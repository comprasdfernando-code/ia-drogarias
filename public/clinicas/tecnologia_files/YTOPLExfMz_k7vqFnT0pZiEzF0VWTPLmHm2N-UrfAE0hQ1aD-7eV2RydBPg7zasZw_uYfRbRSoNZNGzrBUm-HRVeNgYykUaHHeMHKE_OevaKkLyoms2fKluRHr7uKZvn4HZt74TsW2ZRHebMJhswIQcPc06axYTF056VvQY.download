;/*FB_PKG_DELIM*/

__d("Base64",[],(function(t,n,r,o,a,i){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function l(t){var n=t.charCodeAt(0)<<16|t.charCodeAt(1)<<8|t.charCodeAt(2);return String.fromCharCode(e.charCodeAt(n>>>18),e.charCodeAt(n>>>12&63),e.charCodeAt(n>>>6&63),e.charCodeAt(n&63))}var s=">___?456789:;<=_______\0\x07\b	\n\v\f\r______\x1B !\"#$%&'()*+,-./0123";function u(e){var t=s.charCodeAt(e.charCodeAt(0)-43)<<18|s.charCodeAt(e.charCodeAt(1)-43)<<12|s.charCodeAt(e.charCodeAt(2)-43)<<6|s.charCodeAt(e.charCodeAt(3)-43);return String.fromCharCode(t>>>16,t>>>8&255,t&255)}var c={encode:function(t){var e=unescape(encodeURI(t)),n=(e.length+2)%3;return e=(e+"\0\0".slice(n)).replace(/[\s\S]{3}/g,l),e.slice(0,e.length+n-2)+"==".slice(n)},decode:function(t){var e=t.replace(/[^A-Za-z0-9+\/]/g,""),n=e.length+3&3;e=(e+"AAA".slice(n)).replace(/..../g,u),e=e.slice(0,e.length+n-3);try{return decodeURIComponent(escape(e))}catch(e){throw new Error("Not valid UTF-8")}},encodeObject:function(t){return c.encode(JSON.stringify(t))},decodeObject:function(t){return JSON.parse(c.decode(t))},encodeNums:function(n){return String.fromCharCode.apply(String,n.map(function(t){return e.charCodeAt((t|-(t>63?1:0))&-(t>0?1:0)&63)}))}},d=c;i.default=d}),66);
__d("BaseToastContentWrapper.react",["BaseTheme.react","BaseView.react","CometThemeInfraBaseThemeContext.react","CometThemeInfraBaseThemeGated.react","XPlatReactFocusRegion.react","basePushToast","focusScopeQueries","react","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={dark:"__fb-dark-mode ",light:"__fb-light-mode ",type:"CLASSNAMES"};function d(e){var t=e.ariaLabelledBy,n=e.children,a=e.ref,i=e.role,l=e.testid,d=e.themeConfig,m=e.useInvertedDisplayMode,p=e.xstyle,_=r("useCurrentDisplayMode")(),f=_==="dark"?"light":"dark",g=u(r("CometThemeInfraBaseThemeContext.react")),h=m?r("CometThemeInfraBaseThemeGated.react")?s.jsx(r("CometThemeInfraBaseThemeGated.react"),{"aria-labelledby":t,displayMode:f,ref:a,role:i,testid:void 0,themes:g,xstyle:p,children:n}):s.jsx(r("BaseTheme.react"),{"aria-labelledby":t,config:d!=null?d:c,displayMode:f,ref:a,role:i,testid:void 0,xstyle:p,children:n}):s.jsx(r("BaseView.react"),{"aria-labelledby":t,ref:a,role:i,testid:void 0,xstyle:p,children:n});return o("basePushToast").passesNewToastAPIGK()?s.jsx(r("XPlatReactFocusRegion.react"),{containFocusQuery:o("focusScopeQueries").tabbableScopeQuery,children:h}):h}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("BaseToast.react",["BaseInlinePressable.react","BaseToastContentWrapper.react","BaseView.react","XPlatReactFocusRegion.react","basePushToast","focusScopeQueries","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useId,d=u.useMemo,m={item:{display:"x78zum5",flexDirection:"xdt5ytf",paddingBottom:"x19yoh24",paddingInlineStart:"xa6w9w1",paddingInlineEnd:"x7jv1k3",paddingLeft:null,paddingRight:null,paddingTop:"x6enp1t",$$css:!0},itemText:{flexGrow:"x1iyjqo2",$$css:!0},link:{wordBreak:"xdnwjd9",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"x1wkzo03",borderTopColor:"xlnzwam",borderInlineEndColor:"xuc4ihs",borderBottomColor:"xm9qwu6",borderInlineStartColor:"x38i1re",borderStartStartRadius:"x1ghonvh",borderStartEndRadius:"x1c2sbsd",borderEndEndRadius:"x8tb1rc",borderEndStartRadius:"x609f4j",borderTopStyle:"xhf2mca",borderInlineEndStyle:"xaau5u0",borderBottomStyle:"x13y0ya8",borderInlineStartStyle:"xv6865q",borderTopWidth:"xmqxc35",borderInlineEndWidth:"x1a32di2",borderBottomWidth:"x21fg80",borderInlineStartWidth:"xyi7q43",boxShadow:"xi1c1fh",display:"x78zum5",flexShrink:"x2lah0s",maxWidth:"x1cs6qxi",minWidth:"x1hqenl9",paddingTop:"x192rfv7",paddingBottom:"x13jxccy",paddingInlineStart:"x1rcnc7e",paddingInlineEnd:"x1e7pf15",paddingLeft:null,paddingRight:null,$$css:!0},rootDense:{minWidth:"xktpd3l",$$css:!0},rootFullWidth:{width:"xh8yej3",$$css:!0},toastContentDefaultLayout:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",flexGrow:"x1iyjqo2",$$css:!0},toastContentVerticalLayout:{alignItems:"x1cy8zhl",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",$$css:!0}};function p(e){var t,n,a,i,l,u=e.action,p=e.addOnStart,_=e.closeButton,f=e.density,g=e.linkWrapper,h=e.message,y=e.offsetStyles,C=e.onDismiss,b=e.size,v=b===void 0?"full-width":b,S=e.testid,R=e.themeConfigOverride,L=e.toastRef,E=e.useInvertedDisplayMode,k=E===void 0?!0:E,I=e.useVerticalLayout,T=I===void 0?!1:I,D=e.variant,x=c(),$=d(function(){return u!=null?{}:{"aria-atomic":!0,role:"alert"}},[u]),P=u!=null?s.jsx(r("BaseView.react"),{xstyle:[m.item,D==null||(t=D.xstyleConfig)==null?void 0:t.item],children:u.element!=null?u.element:u.labelRenderer&&s.jsx(r("BaseInlinePressable.react"),{onPress:function(t){C(),u.onPress(t)},testid:void 0,xstyle:m.link,children:u.labelRenderer(u.label)})}):null,N=s.jsxs(s.Fragment,{children:[p!=null&&s.jsx(r("BaseView.react"),{xstyle:[m.item,D==null||(n=D.xstyleConfig)==null?void 0:n.item],children:p}),s.jsxs(r("BaseView.react"),{xstyle:[v==="full-width"&&m.rootFullWidth,f==="dense"&&m.rootDense,T?m.toastContentVerticalLayout:m.toastContentDefaultLayout],children:[s.jsx(r("BaseView.react"),babelHelpers.extends({xstyle:[m.item,m.itemText,D==null||(a=D.xstyleConfig)==null?void 0:a.item]},$,{children:h({toastMessageId:x})})),P!=null&&(o("basePushToast").passesNewToastAPIGK()?P:s.jsx(r("XPlatReactFocusRegion.react"),{autoFocusQuery:o("focusScopeQueries").tabbableScopeQuery,children:P}))]}),!!_&&s.jsx(r("BaseView.react"),{xstyle:[m.item,D==null||(i=D.xstyleConfig)==null?void 0:i.item],children:_})]});return N=g!=null?g(N):N,s.jsx(r("BaseToastContentWrapper.react"),{ariaLabelledBy:u!=null&&o("basePushToast").passesNewToastAPIGK?x:void 0,ref:L,role:o("basePushToast").passesNewToastAPIGK()&&(u!=null||_)?"dialog":void 0,testid:void 0,themeConfig:R,useInvertedDisplayMode:k,xstyle:[m.root,v==="full-width"&&m.rootFullWidth,f==="dense"&&m.rootDense,y,D==null||(l=D.xstyleConfig)==null?void 0:l.container],children:N})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","cr:3024","gkx","isEmpty"],(function(t,n,r,o,a,i,l){var e,s="javascript-sandbox",u="OverrideServer",c="www_sandbox",d="www_tier",m=(function(){function t(){}var o=t.prototype;return o.patchRequestHeaders=function(o){var t={},a=r("RTISubscriptionManagerConfig").bladerunner_www_sandbox,i=r("RTISubscriptionManagerConfig").is_intern;if((e||(e=r("isEmpty")))(r("WebDriverConfig").auxiliaryServiceInfo))a!=null&&(t[s]=a);else{var l,m=(l=r("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?l:r("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];m!=null?(typeof m.ip_address=="string"?t[u]=m.ip_address+":18295":typeof m.hostname=="string"&&(t[u]=m.hostname+":18295"),typeof r("WebDriverConfig").originHost=="string"&&(t[c]="www."+r("WebDriverConfig").originHost)):a!=null&&(t[s]=a)}if(i===!0&&(t[d]="intern"),r("WebDriverConfig").isTestRunning&&r("gkx")("20919")){var p=n("cr:3024")==null?void 0:n("cr:3024").get();p!=null&&(t.is_test="true",t.original_request_id=p)}r("gkx")("20929")&&(t["Accept-Ack"]="RSAck");for(var _ in o)t[_]=o[_];return t.http_referer=window.location.href,t},t})(),p=new m,_=p;l.default=_}),98);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(t,n,r,o,a,i,l){var e,s="bladerunner_js_client",u={info:"info",warning:"warning",exception:"exception"},c=(function(){function t(){this.setFBLoggerLevel(1)}var n=t.prototype;return n.info=function(t){this.$2>=2&&r("FBLogger")(s).info("BladeRunner info: %s",t),this.$3(u.info,t)},n.warn=function(t){this.$2>=1&&r("FBLogger")(s).warn("BladeRunner warn: %s",t),this.$3(u.warning,t)},n.exception=function(t,n){n===void 0&&(n="");var e=n+" "+t.toString();this.$2>=0&&r("FBLogger")(s).warn("BladeRunner exception: %s, %s",n,t.toString()),this.$3(u.exception,e)},n.trimForLogging=function(t){var e=1024;return typeof t=="string"&&t.length>e?"[trimmed]:"+t.substring(0,e)+"...":t},n.bumpCounter=function(n,r){r===void 0&&(r=1),(e||(e=o("ODS"))).bumpEntityKey(2966,"BladeRunnerClient",n,r)},n.setClientSessionId=function(t){this.$1=t},n.setFBLoggerLevel=function(t){this.$2=t},n.$3=function(t,n){},t})(),d=new c,m=d;l.default=m}),98);
__d("BladeRunnerTypes",[],(function(t,n,r,o,a,i,l){var e={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6},s={BLADE_RUNNER:1,GATEWAY:2};l.StreamFrameType=e,l.StreamRequestType=s}),98);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){}var t=e.prototype;return t.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")},t.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(e){return null}else return null},t.updateRetryRequestPayload=function(t){t!=null?this.payload=r("Base64").encode(t):this.payload=null},e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.requestType=f(n.requestType),t.payload=y(n.payload),t.headers=v(n.headers),t.extraHeader=y(n.extraHeader),t.requestTarget=y(n.requestTarget),t.instrumentationData=y(n.instrumentationData),t},e})(),s=(function(){function e(){}e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.dataId=g(n.dataId),t.data=y(n.data),t.shouldAck=R(n.shouldAck),t};var t=e.prototype;return t.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data},t.rawDataSize=function(){return this.data==null?0:this.data.length},t.decodeData=function(){if(this.data==null)throw new Error("Expected data");return r("Base64").decode(this.data)},t.setData=function(t){this.data=r("Base64").encode(t)},t.getInstrumentationData=function(){return this.instrumentationData!=null?JSON.parse(this.instrumentationData):null},e})(),u=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.dataId=f(n.dataId),t.success=S(n.success),t.message=y(n.message),t.code=g(n.code),t},e})();u.ACK_CODE_LANDED_AND_ACCEPTED=20,u.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21,u.ACK_CODE_FAILED_TO_LAND=50;var c=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=g(n.streamId),t.message=y(n.message),t},e})(),d=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.status=f(n.status),t.message=y(n.message),t.code=g(n.code),t.shouldRetry=R(n.shouldRetry),t.retryDelayMs=g(n.retryDelayMs),t},e})(),m=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.newBody=y(n.newBody),t.newExtraHeader=y(n.newExtraHeader),t.patchExtraHeader=y(n.patchExtraHeader),t.killBody=R(n.killBody),t.temporary=R(n.temporary),t},e})(),p=(function(){function t(){}var n=t.prototype;return n.getRequest=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")},n.getData=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")},n.getDataAck=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")},n.getStatusUpdate=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")},n.getLog=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")},n.getRewriteRequest=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")},n.getStreamId=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")},n.isInstrumented=function(){return this.type===o("BladeRunnerTypes").StreamFrameType.REQUEST?this.getRequest().instrumentationData!=null:this.type===o("BladeRunnerTypes").StreamFrameType.DATA?this.getData().instrumentationData!=null:!1},t.readObject=function(a){var n=new t;switch(n.type=f(a.type),n.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:n.request=e.readObject(C(a.request));break;case o("BladeRunnerTypes").StreamFrameType.DATA:n.data=s.readObject(C(a.data));break;case o("BladeRunnerTypes").StreamFrameType.DATA_ACK:n.dataAck=u.readObject(C(a.dataAck));break;case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:n.statusUpdate=d.readObject(C(a.statusUpdate));break;case o("BladeRunnerTypes").StreamFrameType.LOG:n.log=c.readObject(C(a.log));break;case o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:n.rewriteRequest=m.readObject(C(a.rewriteRequest));break;default:return r("BladeRunnerLogger").warn("Frame with unexpected type: "+n.type),null}return n},t.newRequestFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.REQUEST,e.request=n,e},t.newDataFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.DATA,e.data=n,e},t.newDataAckFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.DATA_ACK,e.dataAck=n,e},t.newStatusUpdateFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE,e.statusUpdate=n,e},t.newLogFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.LOG,e.log=n,e},t.newRewriteRequestFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST,e.rewriteRequest=n,e},t})(),_=(function(){function e(e,t,n){this.batchId=e,this.frames=t,this.instrumentationData=n}var t=e.prototype;return t.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")},t.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(e){return null}else return null},t.getInstrumentationDataDfTraceId=function(){if(this.instrumentationData!=null)try{var e,t=JSON.parse(this.instrumentationData);return(e=t.dataFlowTracingData)==null?void 0:e.traceId}catch(e){return null}else return null},t.write=function(){return JSON.stringify(this)},t.isInstrumented=function(){return this.getFrames().some(function(e){return e.isInstrumented()})},e.read=function(n){var t=JSON.parse(n),r=t.batchId||0,o=[];for(var a of t.frames){var i=p.readObject(a);i!=null&&o.push(i)}var l=t.instrumentationData||null;return new e(r,o,l)},e})();function f(e){if(typeof e=="number")return e;throw new Error("Expected number")}function g(e){return e==null?null:f(e)}function h(e){if(typeof e=="string")return e;throw new Error("Expected string")}function y(e){return e==null?null:h(e)}function C(e){if(typeof e=="object"&&e!=null)return e;throw new Error("Expected object")}function b(e){if(typeof e=="object"&&e!=null){var t=e,n={};return Object.keys(t).forEach(function(e){var r=t[e];typeof r=="string"&&r!=null&&(n[e]=r)}),n}throw new Error("Expected string map")}function v(e){return e==null?null:b(e)}function S(e){if(typeof e=="boolean"&&e!=null)return e;throw new Error("Expected boolean")}function R(e){return e==null?null:S(e)}l.GatewayStreamRequest=e,l.GatewayStreamData=s,l.GatewayStreamDataAck=u,l.GatewayStreamLog=c,l.GatewayStreamStatusUpdate=d,l.GatewayStreamRewriteRequest=m,l.GatewayStreamFrame=p,l.GatewayStreamBatch=_}),98);
__d("RequestStreamE2EClientLoggerEvent",[],(function(t,n,r,o,a,i){var e=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});i.default=e}),66);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(t,n,r,o,a,i){var e=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});i.default=e}),66);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","getErrorSafe","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){var e=1e3,s=(function(){function t(e,t,n){this.$2=e,this.$1=t,this.$3=n}var n=t.prototype;return n.onProxyResponse=function(t){var e,n;this.$4(t);var a=[];for(var i of t.getFrames())this.$2.witnessFrame(i)&&a.push(i);var l=this.$2.getRequest();(e=l.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").SENT,{},(n=t.getInstrumentationData())==null?void 0:n.auxId,null,t.getInstrumentationDataDfTraceId()),a.length>0&&this.$5(new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(t.batchId,a,t.instrumentationData))},n.onDisconnect=function(){this.$2.resetErrors();var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=this.$2.getRequest().streamId,e.status=o("BladeRunnerStreamStatus").StreamStatus.CLOSED,e.shouldRetry=!0,e.retryDelayMs=0;var t=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(null,[o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(e)]);this.onProxyResponse(t)},n.$4=function(n){var t=this,a=n.getFrames().filter(function(e){return e.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(var i of a){var l=i.getStatusUpdate();if(l.status==o("BladeRunnerStreamStatus").StreamStatus.CLOSED||l.status==o("BladeRunnerStreamStatus").StreamStatus.REJECTED){this.$2.onError();var s=l.shouldRetry!=null&&l.shouldRetry,u=l.message!=null?l.message:"null";if(s&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){l.status=o("BladeRunnerStreamStatus").StreamStatus.STOPPED;var c=e;l.retryDelayMs!=null&&(c=l.retryDelayMs),r("BladeRunnerLogger").info("Can retry: stream "+l.streamId+" closed with status "+l.status+", message "+u+". Error count: "+this.$2.getErrorCount()+", retryDelay "+c+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString()),this.$2.getRetryRequestScheduled()?r("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(r("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),c>0?r("setTimeoutAcrossTransitions")(function(){return t.$6()},c):this.$6())}else r("BladeRunnerLogger").info("Will not retry: stream "+l.streamId+" closed with status "+l.status+", message "+u+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+s.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),s?r("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):r("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(l.streamId)}}},n.$6=function(){if(this.$2.setRetryRequestScheduled(!1),this.$2.isAlive()){var e=this.$1.getUpdatedRequestBody();e!=null&&this.$2.updateRetryRequestPayload(e),this.$3.sendRetryStreamRequest(this.$2)}},n.$5=function(t){r("BladeRunnerLogger").bumpCounter("send_to_handler");var e=[];this.$1.onBatch(t);for(var n of t.getFrames())try{switch(n.type){case o("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(n.getData()),e.push(n.getData());break;case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(n.getStatusUpdate().status);break;case o("BladeRunnerTypes").StreamFrameType.LOG:var a=n.getLog().message;a!=null&&this.$1.onLog(a);break;case o("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(e){var i=r("getErrorSafe")(e);r("BladeRunnerLogger").bumpCounter("send_to_handler_error"),r("BladeRunnerLogger").exception(i,"Failed sending frame to stream handler")}this.$7(e)},n.$7=function(t){var e=[];for(var n of t)if(n.shouldAck===!0&&n.dataId!=null){var r=new(o("BladeRunnerTypesInternal")).GatewayStreamDataAck;r.streamId=n.streamId,r.dataId=n.dataId,r.success=!0,e.push(r)}this.$3.sendDataAcks(e)},t})();l.default=s}),98);
__d("RtiRequestStreamE2eClientBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("819"),s=o("FalcoLoggerInternal").create("rti_request_stream_e2e_client_batch",e),u=s;l.default=u}),98);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1857112"),s=o("FalcoLoggerInternal").create("rti_request_stream_e2e_client",e),u=s;l.default=u}),98);
__d("RequestStreamE2ELogger",["ConstUriUtils","FBLogger","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RtiRequestStreamE2eClientBatchFalcoEvent","RtiRequestStreamE2eClientFalcoEvent","WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="rs_debug_logging",u=["FBGQLS:COMMENT_CREATE_SUBSCRIBE","FBGQLS:COMMENT_LIKE_SUBSCRIBE","FBGQLS:FEEDBACK_COMMENT_PERMISSION_TOGGLE_SUBSCRIBE","FBGQLS:FEEDBACK_TYPING_SUBSCRIBE","GRAPHQL:CometNotificationsReceiveLiveQuery"],c=0;function d(){var e=Date.now();return c>=e?c+=1:c=e,c.toString()}var m=(function(){function e(e,t,n,r,a,i,l,s,u,c){this.$10=[],this.$11=!1,this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,this.$12=c!=null?c:!1;var d=o("ConstUriUtils").getUri(window.location.href);d&&(this.$13=d.getDomain())}var t=e.prototype;return t.logE2EEvent=function(t,n,r,o,a,i,l){if(r===void 0&&(r=null),o===void 0&&(o=null),a===void 0&&(a=null),i===void 0&&(i=null),l===void 0&&(l=null),this.$3!=="Falco"){var e={request_id:this.$1,resume_id:"0",retry_id:a,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:t,event:n,timestamp_ms:d(),aux_id:o,additional_data:r,dgw_stream_group_logging_id:this.$8,dgw_count_prior_streams_in_group:this.$9,domain:this.$13,df_trace_id:i};this.$14(e,l)}},t.$14=function(t,n){if(!this.$12){r("RtiRequestStreamE2eClientFalcoEvent").log(function(){return t});return}if(this.$10.push(t),this.$11||t.event==r("RequestStreamE2EClientLoggerEvent").FAILURE||t.message_type==r("RequestStreamE2EClientLoggerMessageType").RESPONSE){var e={events:this.$10};r("RtiRequestStreamE2eClientBatchFalcoEvent").log(function(){return e}),this.$10=[],this.$11=!0}},t.getRequestId=function(){return this.$1},e})();function p(e,t,n){if(e==null||e.method==null)return null;var r=!1;if(u.includes(e.method)&&(r=!0),t==null||t.length==0)return null;var o=JSON.parse(t);return o.requestId==null?null:new m(o.requestId,n,e.method,_(e.method,e),o.requestLogContext,o.forceLogContext,o.sampleRate,o.dgwStreamGroupLoggingId,o.dgwCountPriorStreamsInGroup,r)}function _(e,t){if(e==="FBLQ"&&t.config_id)return t.config_id;if(e==="SKY"){if(t.topic){var n=t.topic.lastIndexOf("/");return n>0?t.topic.substr(0,n):t.topic}return}return e}function f(e,t,n,o,a,i){if(a===void 0&&(a=null),i===void 0&&(i=null),!(e==null||e.requestId==null||e.clientLoggingDisabled!=null)){var l={request_id:e.requestId,resume_id:"0",transport:t,e2e_sample_rate:e.sampleRate,message_type:n,event:o,timestamp_ms:d(),aux_id:e.auxId,additional_data:a,df_trace_id:i};r("RtiRequestStreamE2eClientFalcoEvent").log(function(){return l})}}l.RequestStreamE2ELogger=m,l.createStreamLogger=p,l.logRequestStreamE2EEventStatic=f}),98);
__d("RequestStreamTransport",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);i.RequestStreamTransport=e}),66);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","getErrorSafe","justknobx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="Connected",u="Disconnected",c="/br_sr",d="/sr_res",m=null;function p(e){var t,n;switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:return(t=e.request)==null?void 0:t.getInstrumentationData();case o("BladeRunnerTypes").StreamFrameType.DATA:return(n=e.data)==null?void 0:n.getInstrumentationData()}return null}function _(e){switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:return r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case o("BladeRunnerTypes").StreamFrameType.DATA:return r("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function f(e){if(e===null)return null;switch(e){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:return"Accepted";case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:return"Rejected";case o("BladeRunnerStreamStatus").StreamStatus.STARTED:return"Started";case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:return"Stopped";case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:return"Closed"}return null}function g(e){var t,n={};return e==null||(t=e.frames)==null||t.forEach(function(e){if(e.type===o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE){var t,r=(t=e.statusUpdate)==null?void 0:t.status,a=f(r);a!==null&&(n.flow_status=a)}}),n}function h(e,t){var n,r;switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:t.data_base64_size=(n=e.request)==null||(n=n.payload)==null||(n=n.length)==null?void 0:n.toString();break;case o("BladeRunnerTypes").StreamFrameType.DATA:t.data_base64_size=(r=e.data)==null||(r=r.rawDataSize())==null?void 0:r.toString();break}return null}function y(e,t,n){var a,i=p(e);if(i!=null){var l=_(e);if(l!=null){var s=null;switch(t){case o("MqttPublishListener").MqttPublishEvent.SENT:s=r("RequestStreamE2EClientLoggerEvent").SENT;break;case o("MqttPublishListener").MqttPublishEvent.ACKED:s=r("RequestStreamE2EClientLoggerEvent").PUBACK;break;case o("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case o("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:s=r("RequestStreamE2EClientLoggerEvent").FAILURE,n.reason==null&&(n.reason=t);break}if(s!=null)if(h(e,n),((a=e.request)==null?void 0:a.e2eLogger)!=null&&i.clientLoggingDisabled==null){var u;(u=e.request)==null||u.e2eLogger.logE2EEvent(l,s,n,i.auxId)}else o("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(i,o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,l,s,n)}}}var C=(function(){function t(e){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map,this.$7=e!=null?e:r("FBMqttChannel"),this.$8=new Map,r("BladeRunnerLogger").setClientSessionId(r("uuidv4")()),this.$9()}t.get=function(){return m==null&&(m=new t(r("FBMqttChannel"))),m};var a=t.prototype;return a.sendNewStreamRequest=function(n,o){var e=new(r("BladeRunnerEventHandler"))(n,o,this),a=n.getRequest();if(this.$6.set(a.streamId,e),!this.$10()){this.$11(e,a.streamId);return}this.getStreamCount()<=t.maxStreamCount?this.$12(a):(r("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),r("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(n.getRequest().getHeaders())),this.$11(e,a.streamId))},a.sendRetryStreamRequest=function(t){this.$12(t.getRequest())},a.sendCancel=function(t){r("BladeRunnerLogger").bumpCounter("socket_send_cancel");var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=t.streamId,e.status=o("BladeRunnerStreamStatus").StreamStatus.CLOSED,this.$13(e,t),this.removeStream(t.streamId)},a.sendAmendment=function(t,n,a){r("BladeRunnerLogger").bumpCounter("socket_send_amendment");var e=new(o("BladeRunnerTypesInternal")).GatewayStreamData;e.streamId=t,e.setData(n),a!=null&&(e.instrumentationData=a),this.$14(e)},a.sendAmendmentWithAck=function(a,i,l){var t=this;r("BladeRunnerLogger").bumpCounter("socket_send_amendment");var s=this.$15(),u=new(o("BladeRunnerTypesInternal")).GatewayStreamData;u.streamId=a,u.setData(i),u.shouldAck=!0,u.dataId=s,l!=null&&(u.instrumentationData=l);var c=new(e||(e=n("Promise")))(function(e,n){t.$8.set(s,{resolve:e,reject:n})});return this.$14(u),c},a.$14=function(t){this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(t)),this.$16()},a.sendDataAcks=function(t){r("BladeRunnerLogger").bumpCounter("socket_send_data_ack",t.length),this.$17(t)},a.removeStream=function(t){this.$6.delete(t)},a.getStreamCount=function(){return this.$6.size},a.getNextStreamId=function(){return this.$5++,this.$5},a.onMQTTStateChanged=function(t){this.$16(),!(t!=u&&t!=s||this.$4==t)&&(this.$4=t,r("BladeRunnerLogger").info("MQTTStateChanged: "+t),t==u?(r("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):t==s&&r("BladeRunnerLogger").bumpCounter("mqtt_state_connected"))},a.$12=function(t){if(r("BladeRunnerLogger").bumpCounter("socket_send_request"),this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(t)),!this.$16()){var e;(e=t.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}},a.$13=function(t,n){if(this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(t)),this.$16()){var e;(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").SENT)}},a.$17=function(t){for(var e of t)this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(e));this.$16()},a.$19=function(){return this.$2++,this.$2},a.$15=function(){return this.$3++,this.$3},a.$16=function(){var e=!1;if(this.$7.getConnectionState()===s&&this.$1.length>0)try{this.$20(this.$1),e=!0}catch(e){}finally{this.$1=[]}return e},a.$20=function(t){var e=this,n=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(this.$19(),t),a=n.write();if(a.length>this.$21()){var i=Math.floor(t.length/2);if(i===0){t.forEach(function(e){return y(e,o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var l=new Error("Publish is too long: "+a.length);throw l.stack,this.$22(n,l,"Publish is too long"),l}this.$20(t.slice(0,i)),this.$20(t.slice(i,t.length))}else try{r("BladeRunnerLogger").info("send message to "+c+" ("+a.length+" bytes)");var s={qos:1,skipBuffer:!1};if(n.isInstrumented()){var u=Date.now();s.listener={onEvent:function(n){var e=(Date.now()-u).toString();t.forEach(function(t){y(t,n,{latency:e})})}}}this.$7.publish(c,a,s).catch(function(t){e.$22(n,t,"Failed publishing to MQTT")}),r("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(e){var d=r("getErrorSafe")(e);throw this.$22(n,d,"Failed publishing to MQTT"),d}},a.$9=function(){var e=this;r("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent),this.onMQTTStateChanged(this.$7.getConnectionState()),this.$7.subscribeChannelEvents({onMQTTStateChanged:function(n){e.onMQTTStateChanged(n)},onJSError:function(t){var e=t!=null&&typeof t.isRecoverable=="boolean"?t.isRecoverable:!1;e?r("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(r("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof t=="object"&&t!=null?t.toString():"unknown error")+", "+JSON.stringify(t)),r("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}}),this.$7.subscribe(c,function(e){throw new Error("Unexpected response: "+c+" "+e.toString())}),this.$7.subscribe(d,function(t){e.$23(t)})},a.$23=function(t){var e=o("BladeRunnerTypesInternal").GatewayStreamBatch.read(t);this.processBatch(e)},a.$22=function(t,n,a){for(var e of t.getFrames())if(e.type===o("BladeRunnerTypes").StreamFrameType.REQUEST){var i=e.getRequest(),l=this.$6.get(i.streamId);l!=null&&this.$24(l,i.streamId,o("BladeRunnerStreamStatus").StreamStatus.CLOSED,!0,null)}else if(e.type===o("BladeRunnerTypes").StreamFrameType.DATA){var s=e.getData(),u=s.dataId;if(s.shouldAck!=null&&s.shouldAck&&u!=null){var c=new(o("BladeRunnerTypesInternal")).GatewayStreamDataAck;c.streamId=s.streamId,c.dataId=u,c.success=!1,c.code=o("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND,c.message=a,this.$25(c)}}r("BladeRunnerLogger").info("Failed publishing to MQTT: "+n.message),r("BladeRunnerLogger").bumpCounter("mqtt_publish_error")},a.$25=function(t){var e=this.$8.get(t.dataId);e!=null&&(this.$8.delete(t.dataId),t.success?e.resolve(!0):t.code===o("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?e.resolve(!1):e.reject(t.message))},a.processBatch=function(t){try{o("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(t.getInstrumentationData(),o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").RECEIVED,g(t),t.getInstrumentationDataDfTraceId()),r("BladeRunnerLogger").bumpCounter("socket_process_batch");var e=JSON.stringify(t);r("BladeRunnerLogger").info("Received batch ("+e.length+" bytes)");var n=null;for(var a of t.getFrames()){var i=a.getStreamId();if(n==null&&(n=i),i!=null&&n!=i)throw new Error("Received batch with frames for multiple streams");a.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$25(a.getDataAck())}if(n!=null){var l=this.$6.get(n);l!=null?l.onProxyResponse(t):r("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+n)}else r("BladeRunnerLogger").info("Received batch with no frames")}catch(e){var s=r("getErrorSafe")(e);throw r("BladeRunnerLogger").exception(s,"Failed processing batch from MQTT"),r("BladeRunnerLogger").bumpCounter("socket_process_batch_error"),s}},a.$18=function(){this.$6.forEach(function(e,t,n){e.onDisconnect()})},a.$11=function(t,n){this.$24(t,n,o("BladeRunnerStreamStatus").StreamStatus.REJECTED,!1,0)},a.$24=function(t,n,r,a,i){var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=n,e.status=r,e.shouldRetry=a,e.retryDelayMs=i;var l=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(null,[o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(e)]);t.onProxyResponse(l)},a.$10=function(){return r("CurrentUser").isLoggedIn()?!0:(r("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out"),!1)},a.$21=function(){var e=1048576,t=512*1024;try{var n=r("justknobx")._("317");t=n*e}catch(e){}return Math.max(t-1024,0)},t})();C.maxStreamCount=2e3,l.default=C}),98);
__d("BladeRunnerStream",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){var e,l=(function(){function t(e){this.$1=e}var r=t.prototype;return r.getStreamHandler=function(){return this.$1},r.cancel=function(){},r.amendWithAck=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return!1});function t(t){return e.apply(this,arguments)}return t})(),r.amendFireAndForget=function(t){},r.amendWithoutAck=function(t){},r.start=function(){return(e||(e=n("Promise"))).resolve()},r.isAlive=function(){return!1},r.canAmend=function(){return!1},r.getStatus=function(){return null},r.getStreamId=function(){return 0},t})();i.default=l}),66);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=e,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var t=e.prototype;return t.getRequest=function(){return this.$1},t.updateRetryRequestPayload=function(t){this.$1.updateRetryRequestPayload(t)},t.isAlive=function(){return!(this.$2==o("BladeRunnerStreamStatus").StreamStatus.CLOSED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.REJECTED)},t.canAmend=function(){return this.$2==o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.STARTED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.STOPPED},t.getLastStatus=function(){return this.$2},t.setLastStatus=function(t){this.$2=t},t.onError=function(){this.$3+=1},t.getErrorCount=function(){return this.$3},t.resetErrors=function(){this.$3=0},t.getRetryRequestScheduled=function(){return this.$6},t.setRetryRequestScheduled=function(t){this.$6=t},t.witnessFrame=function(t){switch(t.type){case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var e=t.getStatusUpdate(),n=!0;switch(e.status){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:n=!this.$4,this.$4||(this.$4=!0);break;case o("BladeRunnerStreamStatus").StreamStatus.STARTED:n=this.getLastStatus()!=o("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:n=this.getLastStatus()==o("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:default:n=!0}return this.setLastStatus(e.status),n;case o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:return this.$7(t.getRewriteRequest()),!1;default:return!0}},t.setRetriesAllowed=function(t){this.$5=t},t.getRetriesAllowed=function(){return this.$5},t.$7=function(t){if(!(t.temporary!=null||t.temporary==!0)){if(t.newBody!=null&&(this.$1.payload=t.newBody),t.newExtraHeader!=null&&(this.$1.extraHeader=t.newExtraHeader,this.$1.headers=JSON.parse(t.newExtraHeader)),t.patchExtraHeader!=null)try{var e=JSON.parse(t.patchExtraHeader),n=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});for(var o of Object.keys(e))this.$1.headers[o]=e[o],n[o]=e[o];this.$1.extraHeader=JSON.stringify(n)}catch(e){r("BladeRunnerLogger").warn("Failed to patch header: "+t.patchExtraHeader)}t.killBody!=null&&t.killBody==!0&&(this.$1.payload=null)}},e})();l.default=e}),98);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerStreamStatus","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","asyncToGeneratorRuntime","uuidv4"],(function(t,n,r,o,a,i,l){var e,s=4,u={reason:"stream_dead"},c=(function(t){function a(e,n,o){var a;return a=t.call(this,e)||this,a.$BladeRunnerSocketStream$p_1=o,a.$BladeRunnerSocketStream$p_2=new(r("BladeRunnerStreamState"))(n),a.$BladeRunnerSocketStream$p_2.setRetriesAllowed(s),a}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.start=function(){var t=this;return new(e||(e=n("Promise")))(function(e){t.send(),e()})},i.send=function(){var e,t,n=this.$BladeRunnerSocketStream$p_2.getRequest();(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(t=n.payload)==null||(t=t.length)==null?void 0:t.toString()}),this.$BladeRunnerSocketStream$p_1.sendNewStreamRequest(this.$BladeRunnerSocketStream$p_2,this.getStreamHandler())},i.amendWithAck=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var o,a=this.$BladeRunnerSocketStream$p_2.getRequest(),i=a.getInstrumentationData();if(i){var l,s;i.auxId=r("uuidv4")(),(l=a.e2eLogger)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:t==null||(s=t.length)==null?void 0:s.toString()},i.auxId)}if(this.canAmend()){if(i){var c,d;(c=a.e2eLogger)==null||c.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:t==null||(d=t.length)==null?void 0:d.toString()},i.auxId)}return this.$BladeRunnerSocketStream$p_1.sendAmendmentWithAck(a.streamId,this.$BladeRunnerSocketStream$p_3(t),i==null?null:JSON.stringify(i))}return(o=a.e2eLogger)==null||o.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,u,i==null?void 0:i.auxId),(e||(e=n("Promise"))).reject("Stream is closed or not accepted")});function o(e){return t.apply(this,arguments)}return o})(),i.amendFireAndForget=function(t){var e=this.$BladeRunnerSocketStream$p_2.getRequest(),n=e.getInstrumentationData();if(n){var o,a;n.auxId=r("uuidv4")(),(o=e.e2eLogger)==null||o.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:t==null||(a=t.length)==null?void 0:a.toString()},n.auxId)}if(this.canAmend()){if(this.$BladeRunnerSocketStream$p_1.sendAmendment(this.$BladeRunnerSocketStream$p_2.getRequest().streamId,this.$BladeRunnerSocketStream$p_3(t),n==null?null:JSON.stringify(n)),n){var i,l;(i=e.e2eLogger)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:t==null||(l=t.length)==null?void 0:l.toString()},n.auxId)}}else{var s;throw(s=e.e2eLogger)==null||s.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,u,n==null?void 0:n.auxId),new Error("Stream is closed or not accepted")}},i.amendWithoutAck=function(t){this.amendFireAndForget(t)},i.$BladeRunnerSocketStream$p_3=function(t){return typeof t=="object"?btoa(new TextDecoder("utf8").decode(t)):t},i.cancel=function(){var e,t=this.$BladeRunnerSocketStream$p_2.getRequest();(e=t.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").RECEIVED),this.isAlive()&&(this.$BladeRunnerSocketStream$p_1.sendCancel(this.$BladeRunnerSocketStream$p_2.getRequest()),this.$BladeRunnerSocketStream$p_2.setLastStatus(o("BladeRunnerStreamStatus").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())},i.isAlive=function(){return this.$BladeRunnerSocketStream$p_2.isAlive()},i.canAmend=function(){return this.$BladeRunnerSocketStream$p_2.canAmend()},i.getStatus=function(){return this.$BladeRunnerSocketStream$p_2.getLastStatus()},i.getStreamId=function(){return this.$BladeRunnerSocketStream$p_2.getRequest().streamId},a})(r("BladeRunnerStream"));l.default=c}),98);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","uuidv4"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return e==null?!1:e.requestId!=null&&typeof e.requestId=="string"&&e.forceLogContext!=null&&typeof e.forceLogContext=="string"}function u(e,t){var n=r("RequestStreamE2EClientSamplingConfig").sampleRate;if(n>1&&e!=null){var o=r("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[e];o==0?n=0:o!=null&&(n/=o)}return n==1?1:n/t}function c(e,t,n,o){var a=r("uuidv4")();(t.requestId==null||t.requestId===""||typeof t.requestId!="string")&&(e.requestId!=null&&typeof e.requestId=="string"?t.requestId=e.requestId:t.requestId=a),t.requestId+="/_"+a.substring(0,4),t.resumeId="0",n!=null?t.sampleRate=n:t.sampleRate=void 0;var i="";o!=null&&o.length>0&&(i=o),i.length>0&&(t.requestLogContext!=null&&t.requestLogContext.length>0?t.requestLogContext+=":":t.requestLogContext="",t.requestLogContext+=i),(e==null?void 0:e.method)==="Falco"&&(t.clientLoggingDisabled="Falco");var l={};for(var s of Object.keys(t).sort())l[s]=t[s];return JSON.stringify(l)}function d(t,n,o,a){n&&(!n.requestId.includes("/")&&!n.requestId.includes("#")||s(0,41721));var i=u(t.method,a!=null?a:1);return r("Random").coinflip(i)?c(t,n||{requestId:""},i,o):e(n)?c(t,n||{requestId:""},null,o):""}l.isForceLogged=e,l.getSampleRateForLogging=u,l.normalizeInstrumentationData=c,l.validateInstrumentationData=d}),98);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){this.$2=o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=e!=null?e:r("BladeRunnerSocket").get(),t&&(this.$2=t)}var t=e.prototype;return t.createStream=function(t,n,r,o){return this.$3(t,n,r,o)},t.requestStream=function(t,r,o,a){var e=this.$3(t,r,o,a);return e.send(),n("cr:2046346")!=null&&n("cr:2046346").startPulsarTest(),e},t.logInfo=function(t){r("BladeRunnerLogger").info(t)},t.bumpCounter=function(t){r("BladeRunnerLogger").bumpCounter(t)},t.$3=function(t,n,a,i){var e=new(o("BladeRunnerTypesInternal")).GatewayStreamRequest;return e.streamId=this.$1.getNextStreamId(),e.requestType=o("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER,e.headers=r("BladeRunnerConfig").patchRequestHeaders(t),e.extraHeader=JSON.stringify(e.headers),e.payload=n!=null?r("Base64").encode(n):null,i!=null&&(i.transport="WEB_RS_MQTT"),e.instrumentationData=o("RequestStreamE2ESampling").validateInstrumentationData(e.headers||{},i),e.e2eLogger=o("RequestStreamE2ELogger").createStreamLogger(e.headers,e.instrumentationData,this.$2),new(r("BladeRunnerSocketStream"))(a,e,this.$1)},e})();l.default=e}),98);
__d("CometRelayEF",["Bootloader","BootloaderEvents","ClientConsistencyEventEmitter","CometRouterSSREntrypoint","cometAsyncFetch","gkx","performanceAbsoluteNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map;function u(t){if(r("gkx")("26332")){var n=t.filter(function(e){return!s.has(e)});if(n.length!==0){n.forEach(function(e){o("BootloaderEvents").notifyHasteResponseEFStart("relay_3d",e)});var a=(e||(e=r("performanceAbsoluteNow")))(),i=r("cometAsyncFetch")("/ajax/relay-ef/",{data:{queries:n},method:"POST"}).then(function(t){return{fetchPredictionsEnd:(e||(e=r("performanceAbsoluteNow")))(),fetchPredictionsStart:a,payload:t}});n.forEach(function(e){return s.set(e,i)})}}}function c(e,t){var n=o("CometRouterSSREntrypoint").processRootEntryPoint(e,t);u(n.map(function(e){var t=e.name;return t}))}function d(t){if(r("gkx")("26332")){u(t);var n=(e||(e=r("performanceAbsoluteNow")))();t.forEach(function(e){var t=s.get(e);t&&t!==!0&&r("promiseDone")(t,function(t){var a=t.fetchPredictionsEnd,i=t.fetchPredictionsStart,l=t.payload;if(l!=null&&typeof l=="object"){var s,u;r("Bootloader").loadPredictedResourceMap(l.predictions[e],{onLog:function(r){return o("BootloaderEvents").notifyHasteResponseEF("relay_3d",e,{fetchPredictionsEnd:a,fetchPredictionsStart:i,fetchRsrcsStart:n,tierOne:r})}},(s=(u=l.consistency)==null?void 0:u.rev)!=null?s:null),l.consistency!=null&&r("ClientConsistencyEventEmitter").emit("newEntry",l.consistency)}}),s.set(e,!0)})}}function m(e,t){var n=o("CometRouterSSREntrypoint").processRootEntryPoint(e,t),r=n.map(function(e){var t=e.name;return t});d(r)}var p={fetchPredictedResources:m,fetchPredictedResourcesForQueries:d,fetchPredictions:c,fetchPredictionsForQueries:u};l.default=p}),98);
__d("CometToast.react",["fbt","ix","BaseToast.react","CometPressable.react","FDSCircleButton.react","FDSText.react","fbicon","react"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e=["action","href","icon","impressionLoggingRef","message","onDismiss","target","testid","truncateText","useVerticalLayout","withoutCloseButton"],c,d=c||(c=o("react")),m=c.useMemo,p={pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",width:"xh8yej3",$$css:!0}};function _(t){var n=t.action,a=t.href,i=t.icon,l=t.impressionLoggingRef,c=t.message,_=t.onDismiss,f=t.target,g=t.testid,h=g===void 0?"Toast":g,y=t.truncateText,C=y===void 0?!0:y,b=t.useVerticalLayout,v=b===void 0?!1:b,S=t.withoutCloseButton,R=S===void 0?!1:S,L=babelHelpers.objectWithoutPropertiesLoose(t,e),E=m(function(){return a!=null?{target:f,url:a}:void 0},[a,f]);return d.jsx(r("BaseToast.react"),{action:n!=null?{label:n.label,labelRenderer:function(t){return d.jsx(r("FDSText.react"),{color:"blueLink",numberOfLines:1,type:"bodyLink3",children:t})},onPress:n.onPress,testid:n.testid}:void 0,addOnStart:i,closeButton:R!==!0&&d.jsx(r("FDSCircleButton.react"),{"aria-label":s._(/*BTDS*/"Fechar"),icon:o("fbicon")._(u("478231"),12),onPress:_,size:24,testid:void 0}),linkWrapper:L.onPress!=null||E!=null?function(e){return d.jsx(r("CometPressable.react"),babelHelpers.extends({},L,{expanding:!0,linkProps:E,xstyle:p.pressable,children:e}))}:void 0,message:function(t){var e=t.toastMessageId;return d.jsx(r("FDSText.react"),{color:"primary",id:e,numberOfLines:C?4:void 0,type:"body3",children:c})},onDismiss:_,testid:void 0,toastRef:l,useVerticalLayout:v})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),226);
__d("TWriteBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(t){t===void 0&&(t=e.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(t)),this.$2=0}var t=e.prototype;return t.write=function(t){this.$2+t.length>this.$1.byteLength&&this.$3(this.$2+t.length);for(var e=0;e<t.length;e++)this.$1.setUint8(this.$2+e,t[e]);return this.$2+=t.length,t.length},t.writeByte=function(t){return this.$2+1>this.$1.byteLength&&this.$3(this.$2+1),this.$1.setUint8(this.$2,t),this.$2++,1},t.writeFloatBE=function(t){return this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT),this.$1.setFloat32(this.$2,t),this.$2+=Float32Array.BYTES_PER_ELEMENT,Float32Array.BYTES_PER_ELEMENT},t.writeDoubleBE=function(t){return this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT),this.$1.setFloat64(this.$2,t),this.$2+=Float64Array.BYTES_PER_ELEMENT,Float64Array.BYTES_PER_ELEMENT},t.toByteArray=function(){var e=new Uint8Array(this.$1.buffer,0,this.$2);return e},t.currentSize=function(){return this.$2},t.getUnderlyingDataView=function(){return this.$1},t.$3=function(t){var e=t*2;if(!Number.isSafeInteger(e))throw new Error("unable to resize");for(var n=new DataView(new ArrayBuffer(e)),r=0;r<this.$2;r++)n.setUint8(r,this.$1.getUint8(r));this.$1=n},t.readByte=function(){throw new Error("operation not supported")},t.readBytes=function(t){throw new Error("operation not supported")},t.readFloatBE=function(){throw new Error("operation not supported")},t.readDoubleBE=function(){throw new Error("operation not supported")},e})();e.DEFAULT_BYTE_BUFFER_SIZE=16,i.default=e}),66);
__d("StringToUtf8",["TWriteBuffer"],(function(t,n,r,o,a,i,l){var e=function(t){for(var e=new(r("TWriteBuffer"))(t.length),n,o=0;o<t.length;o++)if(n=t.charCodeAt(o),n<128)e.writeByte(n);else if(n<2048)e.writeByte(n>>6|192),e.writeByte(n&63|128);else if((n&64512)==55296){if(o+1>=t.length)throw new Error("UTF-16 string is truncated: ["+n.toString(16)+"]");if((t.charCodeAt(o+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+n.toString(16)+", "+t.charCodeAt(o+1).toString(16)+"]");n=65536+((n&1023)<<10)+(t.charCodeAt(++o)&1023),e.writeByte(n>>18|240),e.writeByte(n>>12&63|128),e.writeByte(n>>6&63|128),e.writeByte(n&63|128)}else e.writeByte(n>>12|224),e.writeByte(n>>6&63|128),e.writeByte(n&63|128);return e.toByteArray()};l.StringToUtf8=e}),98);
__d("ThriftTypes",[],(function(t,n,r,o,a,i){var e=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19}),l=e;i.default=l}),66);
__d("Utf8ToString",[],(function(t,n,r,o,a,i){var e=function(t,n){throw new Error(t+": ["+n.map(function(e){return e.toString(16)}).toString()+"]")},l=function(n){e("Invalid UTF-8 sequence",n)},s=function(n,r){e("Not enough bytes for "+n+"-byte sequence",r)},u=function(t){for(var e=0,n=[];e<t.length;){var r=t[e++];if(r<128)n.push(String.fromCharCode(r));else if(r>=128&&r<194)l([r]);else if(r>=194&&r<224){e>=t.length&&s(2,[r]);var o=t[e++];(o&192)!==128&&l([r,o]),n.push(String.fromCharCode((r&31)<<6|o&63))}else if(r>=240&&r<245){e+2>=t.length&&s(4,[r]);var a=t[e++],i=t[e++],u=t[e++];(r==240&&(!(a>=144&&a<192)||(i&192)!==128||(u&192)!==128)||r>=241&&r<244&&((a&192)!==128||(i&192)!==128||(u&192)!==128)||r==244&&(!(a>=128&&a<144)||(i&192)!==128||(u&192)!==128))&&l([r,a,i,u]);var c=((r&7)<<18|(a&63)<<12|(i&63)<<6|u&63)-65536;n.push(String.fromCharCode(55296+(c>>10))),n.push(String.fromCharCode(56320+(c&1023)))}else if(r>=245)l([r]);else{e+1>=t.length&&s(3,[r]);var d=t[e++],m=t[e++];r==224?d>=160&&d<192||l([r,d,m]):r>=225&&r<237?d>=128&&d<192||l([r,d,m]):r==237?d>=128&&d<160||l([r,d,m]):r>=238&&r<240&&(d>=128&&d<192||l([r,d,m])),m>=128&&m<192||l([r,d,m]),n.push(String.fromCharCode((r&15)<<12|(d&63)<<6|m&63))}}return n.join("")};i.Utf8ToString=u}),66);
__d("jsbi",[],(function(t,n,r,o,a,i){(function(e,t){typeof i=="object"&&typeof a!="undefined"?a.exports=t():typeof define=="function"&&define.amd?define(t):e.JSBI=t()})(this,function(){"use strict";function e(t){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function s(){return s=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),a=new o;return n&&i(a,n.prototype),a},s.apply(null,arguments)}function u(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function c(e){var t=typeof Map=="function"?new Map:void 0;return c=function(e){function n(){return s(e,arguments,a(this).constructor)}if(e===null||!u(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},c(e)}function d(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:d(e)}var p=(function(n){var i=Math.abs,l=Math.max,s=Math.imul,u=Math.clz32;function c(e,n){var r;if(t(this,c),e>c.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return r=m(this,a(c).call(this,e)),r.sign=n,r}return o(c,n),r(c,[{key:"toDebugString",value:function(){var e=["BigInt["],t=!0,n=!1,r=void 0;try{for(var o,a,i=this[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)a=o.value,e.push((a&&(a>>>0).toString(16))+", ")}catch(e){n=!0,r=e}finally{try{t||i.return==null||i.return()}finally{if(n)throw r}}return e.push("]"),e.join("")}},{key:"toString",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10;if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(e&e-1)==0?c.__toStringBasePowerOfTwo(this,e):c.__toStringGeneric(this,e,!1)}},{key:"__copy",value:function(){for(var e=new c(this.length,this.sign),t=0;t<this.length;t++)e[t]=this[t];return e}},{key:"__trim",value:function(){for(var e=this.length,t=this[e-1];t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var e=0;e<this.length;e++)this[e]=0}},{key:"__clzmsd",value:function(){return u(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(e,t,n){n>this.length&&(n=this.length);for(var r=65535&e,o=e>>>16,a=0,i=65535&t,l=t>>>16,u=0;u<n;u++){var c=this.__digit(u),d=65535&c,m=c>>>16,p=s(d,r),_=s(d,o),f=s(m,r),g=s(m,o),h=i+(65535&p),y=l+a+(h>>>16)+(p>>>16)+(65535&_)+(65535&f);i=(_>>>16)+(f>>>16)+(65535&g)+(y>>>16),a=i>>>16,i&=65535,l=g>>>16,this.__setDigit(u,65535&h|y<<16)}if(a!==0||i!==0||l!==0)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(e,t,n){for(var r,o=0,a=0;a<n;a++)r=this.__halfDigit(t+a)+e.__halfDigit(a)+o,o=r>>>16,this.__setHalfDigit(t+a,r);return o}},{key:"__inplaceSub",value:function(e,t,n){var r=0;if(1&t){t>>=1;for(var o=this.__digit(t),a=65535&o,i=0;i<n-1>>>1;i++){var l=e.__digit(i),s=(o>>>16)-(65535&l)-r;r=1&s>>>16,this.__setDigit(t+i,s<<16|65535&a),o=this.__digit(t+i+1),a=(65535&o)-(l>>>16)-r,r=1&a>>>16}var u=e.__digit(i),c=(o>>>16)-(65535&u)-r;if(r=1&c>>>16,this.__setDigit(t+i,c<<16|65535&a),t+i+1>=this.length)throw new RangeError("out of bounds");(1&n)==0&&(o=this.__digit(t+i+1),a=(65535&o)-(u>>>16)-r,r=1&a>>>16,this.__setDigit(t+e.length,4294901760&o|65535&a))}else{t>>=1;for(var d=0;d<e.length-1;d++){var m=this.__digit(t+d),p=e.__digit(d),_=(65535&m)-(65535&p)-r;r=1&_>>>16;var f=(m>>>16)-(p>>>16)-r;r=1&f>>>16,this.__setDigit(t+d,f<<16|65535&_)}var g=this.__digit(t+d),h=e.__digit(d),y=(65535&g)-(65535&h)-r;r=1&y>>>16;var C=0;(1&n)==0&&(C=(g>>>16)-(h>>>16)-r,r=1&C>>>16),this.__setDigit(t+d,C<<16|65535&y)}return r}},{key:"__inplaceRightShift",value:function(e){if(e!==0){for(var t,n=this.__digit(0)>>>e,r=this.length-1,o=0;o<r;o++)t=this.__digit(o+1),this.__setDigit(o,t<<32-e|n),n=t>>>e;this.__setDigit(r,n)}}},{key:"__digit",value:function(e){return this[e]}},{key:"__unsignedDigit",value:function(e){return this[e]>>>0}},{key:"__setDigit",value:function(e,t){this[e]=0|t}},{key:"__setDigitGrow",value:function(e,t){this[e]=0|t}},{key:"__halfDigitLength",value:function(){var e=this.length;return 65535>=this.__unsignedDigit(e-1)?2*e-1:2*e}},{key:"__halfDigit",value:function(e){return 65535&this[e>>>1]>>>((1&e)<<4)}},{key:"__setHalfDigit",value:function(e,t){var n=e>>>1,r=this.__digit(n),o=1&e?65535&r|t<<16:4294901760&r|65535&t;this.__setDigit(n,o)}}],[{key:"BigInt",value:function(t){var n=Math.floor,r=Number.isFinite;if(typeof t=="number"){if(t===0)return c.__zero();if((0|t)===t)return 0>t?c.__oneDigit(-t,!0):c.__oneDigit(t,!1);if(!r(t)||n(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return c.__fromDouble(t)}if(typeof t=="string"){var o=c.__fromString(t);if(o===null)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return o}if(typeof t=="boolean")return t===!0?c.__oneDigit(1,!1):c.__zero();if(e(t)==="object"){if(t.constructor===c)return t;var a=c.__toPrimitive(t);return c.BigInt(a)}throw new TypeError("Cannot convert "+t+" to a BigInt")}},{key:"toNumber",value:function(e){var t=e.length;if(t===0)return 0;if(t===1){var n=e.__unsignedDigit(0);return e.sign?-n:n}var r=e.__digit(t-1),o=u(r),a=32*t-o;if(1024<a)return e.sign?-1/0:1/0;var i=a-1,l=r,s=t-1,d=o+1,m=d===32?0:l<<d;m>>>=12;var p=d-12,_=12<=d?0:l<<20+d,f=20+d;0<p&&0<s&&(s--,l=e.__digit(s),m|=l>>>32-p,_=l<<p,f=p),0<f&&0<s&&(s--,l=e.__digit(s),_|=l>>>32-f,f-=32);var g=c.__decideRounding(e,f,s,l);if((g===1||g===0&&(1&_)==1)&&(_=_+1>>>0,_===0&&(m++,m>>>20!=0&&(m=0,i++,1023<i))))return e.sign?-1/0:1/0;var h=e.sign?-2147483648:0;return i=i+1023<<20,c.__kBitConversionInts[1]=h|i|m,c.__kBitConversionInts[0]=_,c.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(e){if(e.length===0)return e;var t=e.__copy();return t.sign=!e.sign,t}},{key:"bitwiseNot",value:function(e){return e.sign?c.__absoluteSubOne(e).__trim():c.__absoluteAddOne(e,!0)}},{key:"exponentiate",value:function(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return c.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&(1&t.__digit(0))==0?c.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");var n=t.__unsignedDigit(0);if(n===1)return e;if(n>=c.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){var r=1+(n>>>5),o=e.sign&&(1&n)!=0,a=new c(r,o);a.__initializeDigits();var i=1<<(31&n);return a.__setDigit(r-1,i),a}var l=null,s=e;for((1&n)!=0&&(l=e),n>>=1;n!==0;n>>=1)s=c.multiply(s,s),(1&n)!=0&&(l===null?l=s:l=c.multiply(l,s));return l}},{key:"multiply",value:function(e,t){if(e.length===0)return e;if(t.length===0)return t;var n=e.length+t.length;32<=e.__clzmsd()+t.__clzmsd()&&n--;var r=new c(n,e.sign!==t.sign);r.__initializeDigits();for(var o=0;o<e.length;o++)c.__multiplyAccumulate(t,e.__digit(o),r,o);return r.__trim()}},{key:"divide",value:function(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>c.__absoluteCompare(e,t))return c.__zero();var n,r=e.sign!==t.sign,o=t.__unsignedDigit(0);if(t.length===1&&65535>=o){if(o===1)return r===e.sign?e:c.unaryMinus(e);n=c.__absoluteDivSmall(e,o,null)}else n=c.__absoluteDivLarge(e,t,!0,!1);return n.sign=r,n.__trim()}},{key:"remainder",value:function(t,n){if(n.length===0)throw new RangeError("Division by zero");if(0>c.__absoluteCompare(t,n))return t;var e=n.__unsignedDigit(0);if(n.length===1&&65535>=e){if(e===1)return c.__zero();var r=c.__absoluteModSmall(t,e);return r===0?c.__zero():c.__oneDigit(r,t.sign)}var o=c.__absoluteDivLarge(t,n,!1,!0);return o.sign=t.sign,o.__trim()}},{key:"add",value:function(e,t){var n=e.sign;return n===t.sign?c.__absoluteAdd(e,t,n):0<=c.__absoluteCompare(e,t)?c.__absoluteSub(e,t,n):c.__absoluteSub(t,e,!n)}},{key:"subtract",value:function(e,t){var n=e.sign;return n===t.sign?0<=c.__absoluteCompare(e,t)?c.__absoluteSub(e,t,n):c.__absoluteSub(t,e,!n):c.__absoluteAdd(e,t,n)}},{key:"leftShift",value:function(e,t){return t.length===0||e.length===0?e:t.sign?c.__rightShiftByAbsolute(e,t):c.__leftShiftByAbsolute(e,t)}},{key:"signedRightShift",value:function(e,t){return t.length===0||e.length===0?e:t.sign?c.__leftShiftByAbsolute(e,t):c.__rightShiftByAbsolute(e,t)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(e,t){return 0>c.__compareToBigInt(e,t)}},{key:"lessThanOrEqual",value:function(e,t){return 0>=c.__compareToBigInt(e,t)}},{key:"greaterThan",value:function(e,t){return 0<c.__compareToBigInt(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return 0<=c.__compareToBigInt(e,t)}},{key:"equal",value:function(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e.__digit(n)!==t.__digit(n))return!1;return!0}},{key:"notEqual",value:function(e,t){return!c.equal(e,t)}},{key:"bitwiseAnd",value:function(e,t){if(!e.sign&&!t.sign)return c.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){var n=l(e.length,t.length)+1,r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return r=c.__absoluteOr(r,o,r),c.__absoluteAddOne(r,!0,r).__trim()}if(e.sign){var a=[t,e];e=a[0],t=a[1]}return c.__absoluteAndNot(e,c.__absoluteSubOne(t)).__trim()}},{key:"bitwiseXor",value:function(e,t){if(!e.sign&&!t.sign)return c.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){var n=l(e.length,t.length),r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return c.__absoluteXor(r,o,r).__trim()}var a=l(e.length,t.length)+1;if(e.sign){var i=[t,e];e=i[0],t=i[1]}var s=c.__absoluteSubOne(t,a);return s=c.__absoluteXor(s,e,s),c.__absoluteAddOne(s,!0,s).__trim()}},{key:"bitwiseOr",value:function(e,t){var n=l(e.length,t.length);if(!e.sign&&!t.sign)return c.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){var r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return r=c.__absoluteAnd(r,o,r),c.__absoluteAddOne(r,!0,r).__trim()}if(e.sign){var a=[t,e];e=a[0],t=a[1]}var i=c.__absoluteSubOne(t,n);return i=c.__absoluteAndNot(i,e,i),c.__absoluteAddOne(i,!0,i).__trim()}},{key:"asIntN",value:function(e,t){if(t.length===0)return t;if(e===0)return c.__zero();if(e>=c.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var r=t.__unsignedDigit(n-1),o=1<<(31&e-1);if(t.length===n&&r<o)return t;if((r&o)!==o)return c.__truncateToNBits(e,t);if(!t.sign)return c.__truncateAndSubFromPowerOfTwo(e,t,!0);if((r&o-1)==0){for(var a=n-2;0<=a;a--)if(t.__digit(a)!==0)return c.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===n&&r===o?t:c.__truncateToNBits(e,t)}return c.__truncateAndSubFromPowerOfTwo(e,t,!1)}},{key:"asUintN",value:function(e,t){if(t.length===0)return t;if(e===0)return c.__zero();if(t.sign){if(e>c.__kMaxLengthBits)throw new RangeError("BigInt too big");return c.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=c.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var r=31&e;if(t.length==n){if(r==0)return t;var o=t.__digit(n-1);if(!(o>>>r))return t}return c.__truncateToNBits(e,t)}},{key:"ADD",value:function(e,t){if(e=c.__toPrimitive(e),t=c.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=c.__toNumeric(e),t=c.__toNumeric(t),c.__isBigInt(e)&&c.__isBigInt(t))return c.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(e,t){return c.__compare(e,t,0)}},{key:"LE",value:function(e,t){return c.__compare(e,t,1)}},{key:"GT",value:function(e,t){return c.__compare(e,t,2)}},{key:"GE",value:function(e,t){return c.__compare(e,t,3)}},{key:"EQ",value:function(t,n){for(;;){if(c.__isBigInt(t))return c.__isBigInt(n)?c.equal(t,n):c.EQ(n,t);if(typeof t=="number"){if(c.__isBigInt(n))return c.__equalToNumber(n,t);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(typeof t=="string"){if(c.__isBigInt(n))return t=c.__fromString(t),t!==null&&c.equal(t,n);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(typeof t=="boolean"){if(c.__isBigInt(n))return c.__equalToNumber(n,+t);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(e(t)==="symbol"){if(c.__isBigInt(n))return!1;if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(e(t)==="object"){if(e(n)==="object"&&n.constructor!==c)return t==n;t=c.__toPrimitive(t)}else return t==n}}},{key:"NE",value:function(e,t){return!c.EQ(e,t)}},{key:"__zero",value:function(){return new c(0,!1)}},{key:"__oneDigit",value:function(e,t){var n=new c(1,t);return n.__setDigit(0,e),n}},{key:"__decideRounding",value:function(e,t,n,r){if(0<t)return-1;var o;if(0>t)o=-t-1;else{if(n===0)return-1;n--,r=e.__digit(n),o=31}var a=1<<o;if((r&a)==0)return-1;if(a-=1,(r&a)!=0)return 1;for(;0<n;)if(n--,e.__digit(n)!==0)return 1;return 0}},{key:"__fromDouble",value:function(e){c.__kBitConversionDouble[0]=e;var t,n=2047&c.__kBitConversionInts[1]>>>20,r=n-1023,o=(r>>>5)+1,a=new c(o,0>e),i=1048575&c.__kBitConversionInts[1]|1048576,l=c.__kBitConversionInts[0],s=20,u=31&r,d=0;if(u<s){var m=s-u;d=m+32,t=i>>>m,i=i<<32-m|l>>>m,l<<=32-m}else if(u===s)d=32,t=i,i=l;else{var p=u-s;d=32-p,t=i<<p|l>>>32-p,i=l<<p}a.__setDigit(o-1,t);for(var _=o-2;0<=_;_--)0<d?(d-=32,t=i,i=l):t=0,a.__setDigit(_,t);return a.__trim()}},{key:"__isWhitespace",value:function(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}},{key:"__fromString",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=0,r=e.length,o=0;if(o===r)return c.__zero();for(var a=e.charCodeAt(o);c.__isWhitespace(a);){if(++o===r)return c.__zero();a=e.charCodeAt(o)}if(a===43){if(++o===r)return null;a=e.charCodeAt(o),n=1}else if(a===45){if(++o===r)return null;a=e.charCodeAt(o),n=-1}if(t===0){if(t=10,a===48){if(++o===r)return c.__zero();if(a=e.charCodeAt(o),a===88||a===120){if(t=16,++o===r)return null;a=e.charCodeAt(o)}else if(a===79||a===111){if(t=8,++o===r)return null;a=e.charCodeAt(o)}else if(a===66||a===98){if(t=2,++o===r)return null;a=e.charCodeAt(o)}}}else if(t===16&&a===48){if(++o===r)return c.__zero();if(a=e.charCodeAt(o),a===88||a===120){if(++o===r)return null;a=e.charCodeAt(o)}}for(;a===48;){if(++o===r)return c.__zero();a=e.charCodeAt(o)}var i=r-o,l=c.__kMaxBitsPerChar[t],s=c.__kBitsPerCharTableMultiplier-1;if(i>1073741824/l)return null;var u=l*i+s>>>c.__kBitsPerCharTableShift,d=new c(u+31>>>5,!1),m=10>t?t:10,p=10<t?t-10:0;if((t&t-1)==0){l>>=c.__kBitsPerCharTableShift;var _=[],f=[],g=!1;do{for(var h,y=0,C=0;;){if(h=void 0,a-48>>>0<m)h=a-48;else if((32|a)-97>>>0<p)h=(32|a)-87;else{g=!0;break}if(C+=l,y=y<<l|h,++o===r){g=!0;break}if(a=e.charCodeAt(o),32<C+l)break}_.push(y),f.push(C)}while(!g);c.__fillFromParts(d,_,f)}else{d.__initializeDigits();var b=!1,v=0;do{for(var S,R=0,L=1;;){if(S=void 0,a-48>>>0<m)S=a-48;else if((32|a)-97>>>0<p)S=(32|a)-87;else{b=!0;break}var E=L*t;if(4294967295<E)break;if(L=E,R=R*t+S,v++,++o===r){b=!0;break}a=e.charCodeAt(o)}s=32*c.__kBitsPerCharTableMultiplier-1;var k=l*v+s>>>c.__kBitsPerCharTableShift+5;d.__inplaceMultiplyAdd(L,R,k)}while(!b)}if(o!==r){if(!c.__isWhitespace(a))return null;for(o++;o<r;o++)if(a=e.charCodeAt(o),!c.__isWhitespace(a))return null}return n!==0&&t!==10?null:(d.sign=n===-1,d.__trim())}},{key:"__fillFromParts",value:function(e,t,n){for(var r=0,o=0,a=0,i=t.length-1;0<=i;i--){var l=t[i],s=n[i];o|=l<<a,a+=s,a===32?(e.__setDigit(r++,o),a=0,o=0):32<a&&(e.__setDigit(r++,o),a-=32,o=l>>>s-a)}if(o!==0){if(r>=e.length)throw new Error("implementation bug");e.__setDigit(r++,o)}for(;r<e.length;r++)e.__setDigit(r,0)}},{key:"__toStringBasePowerOfTwo",value:function(e,t){var n=e.length,r=t-1;r=(85&r>>>1)+(85&r),r=(51&r>>>2)+(51&r),r=(15&r>>>4)+(15&r);var o=r,a=t-1,i=e.__digit(n-1),l=u(i),s=0|(32*n-l+o-1)/o;if(e.sign&&s++,268435456<s)throw new Error("string too long");for(var d=Array(s),m=s-1,p=0,_=0,f=0;f<n-1;f++){var g=e.__digit(f),h=(p|g<<_)&a;d[m--]=c.__kConversionChars[h];var y=o-_;for(p=g>>>y,_=32-y;_>=o;)d[m--]=c.__kConversionChars[p&a],p>>>=o,_-=o}var C=(p|i<<_)&a;for(d[m--]=c.__kConversionChars[C],p=i>>>o-_;p!==0;)d[m--]=c.__kConversionChars[p&a],p>>>=o;if(e.sign&&(d[m--]="-"),m!==-1)throw new Error("implementation bug");return d.join("")}},{key:"__toStringGeneric",value:function(e,t,n){var r=e.length;if(r===0)return"";if(r===1){var o=e.__unsignedDigit(0).toString(t);return n===!1&&e.sign&&(o="-"+o),o}var a=32*r-u(e.__digit(r-1)),i=c.__kMaxBitsPerChar[t],l=i-1,s=a*c.__kBitsPerCharTableMultiplier;s+=l-1,s=0|s/l;var d,m,p=s+1>>1,_=c.exponentiate(c.__oneDigit(t,!1),c.__oneDigit(p,!1)),f=_.__unsignedDigit(0);if(_.length===1&&65535>=f){d=new c(e.length,!1),d.__initializeDigits();for(var g,h=0,y=2*e.length-1;0<=y;y--)g=h<<16|e.__halfDigit(y),d.__setHalfDigit(y,0|g/f),h=0|g%f;m=h.toString(t)}else{var C=c.__absoluteDivLarge(e,_,!0,!0);d=C.quotient;var b=C.remainder.__trim();m=c.__toStringGeneric(b,t,!0)}d.__trim();for(var v=c.__toStringGeneric(d,t,!0);m.length<p;)m="0"+m;return n===!1&&e.sign&&(v="-"+v),v+m}},{key:"__unequalSign",value:function(e){return e?-1:1}},{key:"__absoluteGreater",value:function(e){return e?-1:1}},{key:"__absoluteLess",value:function(e){return e?1:-1}},{key:"__compareToBigInt",value:function(e,t){var n=e.sign;if(n!==t.sign)return c.__unequalSign(n);var r=c.__absoluteCompare(e,t);return 0<r?c.__absoluteGreater(n):0>r?c.__absoluteLess(n):0}},{key:"__compareToNumber",value:function(e,t){if(!0|t){var n=e.sign,r=0>t;if(n!==r)return c.__unequalSign(n);if(e.length===0){if(r)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return c.__absoluteGreater(n);var o=i(t),a=e.__unsignedDigit(0);return a>o?c.__absoluteGreater(n):a<o?c.__absoluteLess(n):0}return c.__compareToDouble(e,t)}},{key:"__compareToDouble",value:function(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;var n=e.sign;if(n!==0>t)return c.__unequalSign(n);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;c.__kBitConversionDouble[0]=t;var r=2047&c.__kBitConversionInts[1]>>>20;if(r==2047)throw new Error("implementation bug: handled elsewhere");var o=r-1023;if(0>o)return c.__absoluteGreater(n);var a=e.length,i=e.__digit(a-1),l=u(i),s=32*a-l,d=o+1;if(s<d)return c.__absoluteLess(n);if(s>d)return c.__absoluteGreater(n);var m=1048576|1048575&c.__kBitConversionInts[1],p=c.__kBitConversionInts[0],_=20,f=31-l;if(f!==(s-1)%31)throw new Error("implementation bug");var g,h=0;if(f<_){var y=_-f;h=y+32,g=m>>>y,m=m<<32-y|p>>>y,p<<=32-y}else if(f===_)h=32,g=m,m=p;else{var C=f-_;h=32-C,g=m<<C|p>>>32-C,m=p<<C}if(i>>>=0,g>>>=0,i>g)return c.__absoluteGreater(n);if(i<g)return c.__absoluteLess(n);for(var b=a-2;0<=b;b--){0<h?(h-=32,g=m>>>0,m=p,p=0):g=0;var v=e.__unsignedDigit(b);if(v>g)return c.__absoluteGreater(n);if(v<g)return c.__absoluteLess(n)}if(m!==0||p!==0){if(h===0)throw new Error("implementation bug");return c.__absoluteLess(n)}return 0}},{key:"__equalToNumber",value:function(e,t){return t|t===0?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===i(t):c.__compareToDouble(e,t)===0}},{key:"__comparisonResultToBool",value:function(e,t){switch(t){case 0:return 0>e;case 1:return 0>=e;case 2:return 0<e;case 3:return 0<=e}throw new Error("unreachable")}},{key:"__compare",value:function(e,t,n){if(e=c.__toPrimitive(e),t=c.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(n){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(c.__isBigInt(e)&&typeof t=="string")return t=c.__fromString(t),t!==null&&c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(typeof e=="string"&&c.__isBigInt(t))return e=c.__fromString(e),e!==null&&c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(e=c.__toNumeric(e),t=c.__toNumeric(t),c.__isBigInt(e)){if(c.__isBigInt(t))return c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(typeof t!="number")throw new Error("implementation bug");return c.__comparisonResultToBool(c.__compareToNumber(e,t),n)}if(typeof e!="number")throw new Error("implementation bug");if(c.__isBigInt(t))return c.__comparisonResultToBool(c.__compareToNumber(t,e),2^n);if(typeof t!="number")throw new Error("implementation bug");return n===0?e<t:n===1?e<=t:n===2?e>t:n===3?e>=t:void 0}},{key:"__absoluteAdd",value:function(e,t,n){if(e.length<t.length)return c.__absoluteAdd(t,e,n);if(e.length===0)return e;if(t.length===0)return e.sign===n?e:c.unaryMinus(e);var r=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&r++;for(var o=new c(r,n),a=0,i=0;i<t.length;i++){var l=t.__digit(i),s=e.__digit(i),u=(65535&s)+(65535&l)+a,d=(s>>>16)+(l>>>16)+(u>>>16);a=d>>>16,o.__setDigit(i,65535&u|d<<16)}for(;i<e.length;i++){var m=e.__digit(i),p=(65535&m)+a,_=(m>>>16)+(p>>>16);a=_>>>16,o.__setDigit(i,65535&p|_<<16)}return i<o.length&&o.__setDigit(i,a),o.__trim()}},{key:"__absoluteSub",value:function(e,t,n){if(e.length===0)return e;if(t.length===0)return e.sign===n?e:c.unaryMinus(e);for(var r=new c(e.length,n),o=0,a=0;a<t.length;a++){var i=e.__digit(a),l=t.__digit(a),s=(65535&i)-(65535&l)-o;o=1&s>>>16;var u=(i>>>16)-(l>>>16)-o;o=1&u>>>16,r.__setDigit(a,65535&s|u<<16)}for(;a<e.length;a++){var d=e.__digit(a),m=(65535&d)-o;o=1&m>>>16;var p=(d>>>16)-o;o=1&p>>>16,r.__setDigit(a,65535&m|p<<16)}return r.__trim()}},{key:"__absoluteAddOne",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length;n===null?n=new c(r,t):n.sign=t;for(var o=!0,a=0;a<r;a++){var i=e.__digit(a),l=i===-1;o&&(i=0|i+1),o=l,n.__setDigit(a,i)}return o&&n.__setDigitGrow(r,1),n}},{key:"__absoluteSubOne",value:function(e,t){var n=e.length;t=t||n;for(var r=new c(t,!1),o=!0,a=0;a<n;a++){var i=e.__digit(a),l=i===0;o&&(i=0|i-1),o=l,r.__setDigit(a,i)}for(var s=n;s<t;s++)r.__setDigit(s,0);return r}},{key:"__absoluteAnd",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=a;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)&t.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteAndNot",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;r<o&&(a=r);var i=r;n===null?n=new c(i,!1):i=n.length;for(var l=0;l<a;l++)n.__setDigit(l,e.__digit(l)&~t.__digit(l));for(;l<r;l++)n.__setDigit(l,e.__digit(l));for(;l<i;l++)n.__setDigit(l,0);return n}},{key:"__absoluteOr",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=r;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)|t.__digit(u));for(;u<r;u++)n.__setDigit(u,e.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteXor",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=r;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)^t.__digit(u));for(;u<r;u++)n.__setDigit(u,e.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteCompare",value:function(e,t){var n=e.length-t.length;if(n!=0)return n;for(var r=e.length-1;0<=r&&e.__digit(r)===t.__digit(r);)r--;return 0>r?0:e.__unsignedDigit(r)>t.__unsignedDigit(r)?1:-1}},{key:"__multiplyAccumulate",value:function(e,t,n,r){if(t!==0){for(var o=65535&t,a=t>>>16,i=0,l=0,u=0,c=0;c<e.length;c++,r++){var d=n.__digit(r),m=65535&d,p=d>>>16,_=e.__digit(c),f=65535&_,g=_>>>16,h=s(f,o),y=s(f,a),C=s(g,o),b=s(g,a);m+=l+(65535&h),p+=u+i+(m>>>16)+(h>>>16)+(65535&y)+(65535&C),i=p>>>16,l=(y>>>16)+(C>>>16)+(65535&b)+i,i=l>>>16,l&=65535,u=b>>>16,d=65535&m|p<<16,n.__setDigit(r,d)}for(;i!==0||l!==0||u!==0;r++){var v=n.__digit(r),S=(65535&v)+l,R=(v>>>16)+(S>>>16)+u+i;l=0,u=0,i=R>>>16,v=65535&S|R<<16,n.__setDigit(r,v)}}}},{key:"__internalMultiplyAdd",value:function(e,t,n,r,o){for(var a=n,i=0,l=0;l<r;l++){var u=e.__digit(l),c=s(65535&u,t),d=(65535&c)+i+a;a=d>>>16;var m=s(u>>>16,t),p=(65535&m)+(c>>>16)+a;a=p>>>16,i=m>>>16,o.__setDigit(l,p<<16|65535&d)}if(o.length>r)for(o.__setDigit(r++,a+i);r<o.length;)o.__setDigit(r++,0);else if(a+i!==0)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(e,t,n){n===null&&(n=new c(e.length,!1));for(var r=0,o=2*e.length-1;0<=o;o-=2){var a=(r<<16|e.__halfDigit(o))>>>0,i=0|a/t;r=0|a%t,a=(r<<16|e.__halfDigit(o-1))>>>0;var l=0|a/t;r=0|a%t,n.__setDigit(o>>>1,i<<16|l)}return n}},{key:"__absoluteModSmall",value:function(e,t){for(var n,r=0,o=2*e.length-1;0<=o;o--)n=(r<<16|e.__halfDigit(o))>>>0,r=0|n%t;return r}},{key:"__absoluteDivLarge",value:function(e,t,n,r){var o=t.__halfDigitLength(),a=t.length,i=e.__halfDigitLength()-o,l=null;n&&(l=new c(i+2>>>1,!1),l.__initializeDigits());var u=new c(o+2>>>1,!1);u.__initializeDigits();var d=c.__clz16(t.__halfDigit(o-1));0<d&&(t=c.__specialLeftShift(t,d,0));for(var m=c.__specialLeftShift(e,d,1),p=t.__halfDigit(o-1),_=0,f=i;0<=f;f--){var g=65535,h=m.__halfDigit(f+o);if(h!==p){var y=(h<<16|m.__halfDigit(f+o-1))>>>0;g=0|y/p;for(var C=0|y%p,b=t.__halfDigit(o-2),v=m.__halfDigit(f+o-2);s(g,b)>>>0>(C<<16|v)>>>0&&(g--,C+=p,!(65535<C)););}c.__internalMultiplyAdd(t,g,0,a,u);var S=m.__inplaceSub(u,f,o+1);S!==0&&(S=m.__inplaceAdd(t,f,o),m.__setHalfDigit(f+o,m.__halfDigit(f+o)+S),g--),n&&(1&f?_=g<<16:l.__setDigit(f>>>1,_|g))}return r?(m.__inplaceRightShift(d),n?{quotient:l,remainder:m}:m):n?l:void 0}},{key:"__clz16",value:function(e){return u(e)-16}},{key:"__specialLeftShift",value:function(e,t,n){var r=e.length,o=new c(r+n,!1);if(t===0){for(var a=0;a<r;a++)o.__setDigit(a,e.__digit(a));return 0<n&&o.__setDigit(r,0),o}for(var i,l=0,s=0;s<r;s++)i=e.__digit(s),o.__setDigit(s,i<<t|l),l=i>>>32-t;return 0<n&&o.__setDigit(r,l),o}},{key:"__leftShiftByAbsolute",value:function(e,t){var n=c.__toShiftAmount(t);if(0>n)throw new RangeError("BigInt too big");var r=n>>>5,o=31&n,a=e.length,i=o!==0&&e.__digit(a-1)>>>32-o!=0,l=a+r+(i?1:0),s=new c(l,e.sign);if(o===0){for(var u=0;u<r;u++)s.__setDigit(u,0);for(;u<l;u++)s.__setDigit(u,e.__digit(u-r))}else{for(var d=0,m=0;m<r;m++)s.__setDigit(m,0);for(var p,_=0;_<a;_++)p=e.__digit(_),s.__setDigit(_+r,p<<o|d),d=p>>>32-o;if(i)s.__setDigit(a+r,d);else if(d!==0)throw new Error("implementation bug")}return s.__trim()}},{key:"__rightShiftByAbsolute",value:function(e,t){var n=e.length,r=e.sign,o=c.__toShiftAmount(t);if(0>o)return c.__rightShiftByMaximum(r);var a=o>>>5,i=31&o,l=n-a;if(0>=l)return c.__rightShiftByMaximum(r);var s=!1;if(r){if((e.__digit(a)&(1<<i)-1)!=0)s=!0;else for(var u=0;u<a;u++)if(e.__digit(u)!==0){s=!0;break}}if(s&&i===0){var d=e.__digit(n-1);~d==0&&l++}var m=new c(l,r);if(i===0)for(var p=a;p<n;p++)m.__setDigit(p-a,e.__digit(p));else{for(var _,f=e.__digit(a)>>>i,g=n-a-1,h=0;h<g;h++)_=e.__digit(h+a+1),m.__setDigit(h,_<<32-i|f),f=_>>>i;m.__setDigit(g,f)}return s&&(m=c.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(e){return e?c.__oneDigit(1,!0):c.__zero()}},{key:"__toShiftAmount",value:function(e){if(1<e.length)return-1;var t=e.__unsignedDigit(0);return t>c.__kMaxLengthBits?-1:t}},{key:"__toPrimitive",value:function(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"default";if(e(t)!=="object"||t.constructor===c)return t;var r=t[Symbol.toPrimitive];if(r){var o=r(n);if(e(o)!=="object")return o;throw new TypeError("Cannot convert object to primitive value")}var a=t.valueOf;if(a){var i=a.call(t);if(e(i)!=="object")return i}var l=t.toString;if(l){var s=l.call(t);if(e(s)!=="object")return s}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(e){return c.__isBigInt(e)?e:+e}},{key:"__isBigInt",value:function(t){return e(t)==="object"&&t.constructor===c}},{key:"__truncateToNBits",value:function(e,t){for(var n=e+31>>>5,r=new c(n,t.sign),o=n-1,a=0;a<o;a++)r.__setDigit(a,t.__digit(a));var i=t.__digit(o);if((31&e)!=0){var l=32-(31&e);i=i<<l>>>l}return r.__setDigit(o,i),r.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(e,t,n){for(var r=Math.min,o=e+31>>>5,a=new c(o,n),i=0,l=o-1,s=0,u=r(l,t.length);i<u;i++){var d=t.__digit(i),m=0-(65535&d)-s;s=1&m>>>16;var p=0-(d>>>16)-s;s=1&p>>>16,a.__setDigit(i,65535&m|p<<16)}for(;i<l;i++)a.__setDigit(i,0|-s);var _,f=l<t.length?t.__digit(l):0,g=31&e;if(g===0){var h=0-(65535&f)-s;s=1&h>>>16;var y=0-(f>>>16)-s;_=65535&h|y<<16}else{var C=32-g;f=f<<C>>>C;var b=1<<32-C,v=(65535&b)-(65535&f)-s;s=1&v>>>16;var S=(b>>>16)-(f>>>16)-s;_=65535&v|S<<16,_&=b-1}return a.__setDigit(l,_),a.__trim()}},{key:"__digitPow",value:function(e,t){for(var n=1;0<t;)1&t&&(n*=e),t>>>=1,e*=e;return n}}]),c})(c(Array));return p.__kMaxLength=33554432,p.__kMaxLengthBits=p.__kMaxLength<<5,p.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],p.__kBitsPerCharTableShift=5,p.__kBitsPerCharTableMultiplier=1<<p.__kBitsPerCharTableShift,p.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],p.__kBitConversionBuffer=new ArrayBuffer(8),p.__kBitConversionDouble=new Float64Array(p.__kBitConversionBuffer),p.__kBitConversionInts=new Int32Array(p.__kBitConversionBuffer),p})}),null);
__d("TCompactProtocolPolyfill",["StringToUtf8","ThriftTypes","Utf8ToString","jsbi"],(function(t,n,r,o,a,i,l){var e,s,u=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),c=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:u.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:u.CT_BOOLEAN_FALSE}),d=[u.CT_STOP,0,u.CT_BOOLEAN_TRUE,u.CT_BYTE,u.CT_DOUBLE,0,u.CT_I16,0,u.CT_I32,0,u.CT_I64,u.CT_BINARY,u.CT_STRUCT,u.CT_MAP,u.CT_SET,u.CT_LIST,0,0,0,u.CT_FLOAT],m=Math.pow(2,7)-1,p=-1*Math.pow(2,7),_=Math.pow(2,15)-1,f=-1*Math.pow(2,15),g=Math.pow(2,31)-1,h=-1*Math.pow(2,31),y=Math.pow(2,32)-1,C=(s=r("jsbi")).BigInt("9223372036854775807"),b=s.BigInt("-9223372036854775808"),v=s.BigInt("18446744073709551615"),S=s.BigInt(63),R=s.BigInt(1),L=s.BigInt(0),E=s.BigInt(7),k=s.BigInt(70),I=s.BigInt(127),T=s.BigInt(128),D=Math.pow(2,4),x=(function(){function t(e){this.$4=null,this.$5=null,this.$1=e,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var n=t.prototype;return n.readStructBegin=function(){this.$2.push(this.$3),this.$3=0},n.readStructEnd=function(){return this.$3=this.$2.pop(),0},n.writeStructBegin=function(t){return this.$2.push(this.$3),this.$3=0,0},n.writeStructEnd=function(){return this.$3=this.$2.pop(),0},n.writeFieldBegin=function(n){return n.ftype===(e||(e=r("ThriftTypes"))).BOOL?(this.$4={fid:n.fid,fname:n.fname,ftype:n.ftype},0):this.$7(n,c.NONE)},n.writeListBegin=function(t){return this.$8(t)},n.writeListEnd=function(){return 0},n.writeSetBegin=function(t){return this.$8(t)},n.writeSetEnd=function(){return 0},n.writeMapBegin=function(t){var e=0;if(t.size===0)e+=this.$1.writeByte(0);else if(e+=this.writeVarint32(t.size),t.ktype!=null&&t.vtype!=null)e+=this.$1.writeByte(this.$9(t.ktype)<<4|this.$9(t.vtype));else throw new Error("received invalid map info: "+JSON.stringify(t));return e},n.writeMapEnd=function(){return 0},n.$7=function(t,n){var e=0,r=n===c.NONE?this.$9(t.ftype):n;return t.fid>this.$3&&t.fid-this.$3<=D-1?e+=this.$1.writeByte(t.fid-this.$3<<4|r):(e+=this.$1.writeByte(r),e+=this.writeI16(t.fid)),this.$3=t.fid,e},n.$8=function(t){var e=0,n=this.$9(t.etype);return t.size<=D-2?e+=this.$1.writeByte(t.size<<4|n):(e+=this.$1.writeByte(240|n),e+=this.writeVarint32(t.size)),e},n.readFieldBegin=function(){var t=this.$1.readByte(),n=t&15;if(n===(e||(e=r("ThriftTypes"))).STOP)return{ftype:(e||(e=r("ThriftTypes"))).STOP,fid:0};var o=(t&240)>>>4,a;o===0?a=this.readI16():a=this.$3+o;var i=this.$10(n);return(n===u.CT_BOOLEAN_TRUE||n===u.CT_BOOLEAN_FALSE)&&(this.$5=n===u.CT_BOOLEAN_TRUE),this.$3=a,{ftype:i,fid:a}},n.readListBegin=function(){return this.$11()},n.readListEnd=function(){return 0},n.readSetBegin=function(){return this.$11()},n.readSetEnd=function(){return 0},n.readMapBegin=function(){var e=this.readVarint32();if(e>0){var t=this.$1.readByte(),n=this.$12(t>>4,"readMapBegin:key"),r=this.$12(t&15,"readMapBegin:value");return{ktype:this.$10(n),vtype:this.$10(r),size:e}}return{size:e}},n.readMapEnd=function(){return 0},n.$12=function(t,n){if(t<0||t>13)throw new Error(n+" read invalid compact type: "+t);return t},n.$11=function(){var e=this.$1.readByte(),t=this.$12(e&15,"_readListOrSetBegin"),n=this.$10(t),r=e>>4&15;return r===15&&(r=this.readVarint32()),{etype:n,size:r}},n.readFieldEnd=function(){return 0},n.readByte=function(){return this.$6.setUint8(0,this.$1.readByte()),this.$6.getInt8(0)},n.writeByte=function(t){if(t<p||t>m)throw new Error("byte to write is out of range: "+t);return this.$6.setInt8(0,t),this.$1.writeByte(this.$6.getUint8(0))},n.readFloat=function(){return this.$1.readFloatBE()},n.writeFloat=function(t){return this.$1.writeFloatBE(t)},n.readDouble=function(){return this.$1.readDoubleBE()},n.writeDouble=function(t){return this.$1.writeDoubleBE(t)},n.writeString=function(t){return this.writeBinary(o("StringToUtf8").StringToUtf8(t))},n.skip=function(n){switch(n){case(e||(e=r("ThriftTypes"))).STOP:return;case(e||(e=r("ThriftTypes"))).BOOL:this.readBool();break;case(e||(e=r("ThriftTypes"))).BYTE:this.readByte();break;case(e||(e=r("ThriftTypes"))).DOUBLE:this.readDouble();break;case(e||(e=r("ThriftTypes"))).I16:this.readI16();break;case(e||(e=r("ThriftTypes"))).I32:this.readI32();break;case(e||(e=r("ThriftTypes"))).I64:this.readI64();break;case(e||(e=r("ThriftTypes"))).STRING:this.readString();break;case(e||(e=r("ThriftTypes"))).STRUCT:{this.readStructBegin();for(var t;t=this.readFieldBegin(),t.ftype!==(e||(e=r("ThriftTypes"))).STOP;)this.skip(t.ftype);this.readStructEnd();break}case(e||(e=r("ThriftTypes"))).MAP:{var o=this.readMapBegin();if(o.size>0&&o.ktype!=null&&o.vtype!=null)for(var a=o.ktype,i=o.vtype,l=0;l<o.size;l++)this.skip(a),this.skip(i);break}case(e||(e=r("ThriftTypes"))).SET:case(e||(e=r("ThriftTypes"))).LIST:{for(var s=this.$11(),u=0;u<s.size;u++)this.skip(s.etype);break}case(e||(e=r("ThriftTypes"))).FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+n+" in skip")}},n.toByteArray=function(){return this.$1.toByteArray()},n.writeFieldEnd=function(){return 0},n.writeFieldStop=function(){return this.$1.writeByte((e||(e=r("ThriftTypes"))).STOP)},n.writeI16=function(t){if(t<f||t>_)throw new Error("trying to write i16 out of range: "+t);return this.writeVarint32(this.i32ToZigzag(t))},n.readI16=function(){var e=this.zigzagToI32(this.readVarint32());if(e<f||e>_)throw new Error("read invalid i16: "+e);return e},n.writeI32=function(t){if(t<h||t>g)throw new Error("i32 out of range: "+t);return this.writeVarint32(this.i32ToZigzag(t))},n.readI32=function(){return this.zigzagToI32(this.readVarint32())},n.writeI64=function(t){return this.writeVarint64(this.i64ToZigzag(t))},n.readI64=function(){return this.zigzagToI64(this.readVarint64())},n.readBool=function(){var e;return this.$5!=null?(e=this.$5,this.$5=null):e=this.$1.readByte()===u.CT_BOOLEAN_TRUE,e},n.writeBool=function(t){var e=0;return this.$4!=null?(e+=this.$7(this.$4,t?c.CT_BOOLEAN_TRUE:c.CT_BOOLEAN_FALSE),this.$4=null):e+=this.$1.writeByte(t?u.CT_BOOLEAN_TRUE:u.CT_BOOLEAN_FALSE),e},n.readBinary=function(){var e=this.readVarint32();return e===0?new Uint8Array(0):this.$1.readBytes(e)},n.writeBinary=function(t){var e=0;return e+=this.writeVarint32(t.length),e+=this.$1.write(t),e},n.i32ToZigzag=function(t){if(t<h||t>g)throw new Error("number: "+t+" is out of range of i32");return(t<<1^(t<0?4294967295:0))>>>0},n.zigzagToI32=function(t){if(t<0||t>y)throw new Error("number: "+t+" is out of range of uint32");return t>>>1^-1*(t&1)},n.i64ToZigzag=function(t){if(r("jsbi").greaterThan(t,C)||r("jsbi").lessThan(t,b))throw new Error("i64 out of range: "+t.toString());return r("jsbi").bitwiseXor(r("jsbi").signedRightShift(t,S),r("jsbi").leftShift(t,R))},n.zigzagToI64=function(t){if(r("jsbi").lessThan(t,0)||r("jsbi").greaterThan(t,v))throw new Error("invalid uint64: "+t.toString());return r("jsbi").equal(r("jsbi").bitwiseAnd(t,R),R)?r("jsbi").bitwiseNot(r("jsbi").signedRightShift(t,R)):r("jsbi").signedRightShift(t,R)},n.writeVarint32=function(t){if(t<0||t>y)throw new Error("writeVarint32 received out of range uint32: "+t);for(var e=t,n=0;;)if(e>>>7)this.$1.writeByte(e&127|128),n++,e>>>=7;else{this.$1.writeByte(e),n++;break}return n},n.readVarint32=function(){for(var e=0,t=0,n;;){if(n=this.$1.readByte(),e=(e|(n&127)<<t)>>>0,t+=7,(n&128)==0){if(t===35&&(n&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(t>28)throw new Error("result exceeded 32 bit limit")}return e},n.writeVarint64=function(t){if(r("jsbi").lessThan(t,L)||r("jsbi").greaterThan(t,v))throw new Error("invalid uint64: "+t.toString());for(var e=t,n=0;;)if(r("jsbi").equal(r("jsbi").signedRightShift(e,E),L)){this.$1.writeByte(r("jsbi").toNumber(e)),n++;break}else{var o,a=(o=r("jsbi")).toNumber(o.bitwiseOr(o.bitwiseAnd(e,I),T));this.$1.writeByte(a),n++,e=o.signedRightShift(e,E)}return n},n.readVarint64=function(){for(var e=L,t=L,n;;){var o;if(n=(o=r("jsbi")).BigInt(this.$1.readByte()),e=o.bitwiseOr(e,o.leftShift(o.bitwiseAnd(n,I),t)),t=o.add(t,E),r("jsbi").equal(r("jsbi").bitwiseAnd(n,T),L)){if(r("jsbi").equal(t,k)&&r("jsbi").notEqual(n,R))throw new Error("result exceeded 64 bit limit");break}if(r("jsbi").greaterThan(t,S))throw new Error("result exceeded 64 bit limit")}return e},n.readString=function(){return o("Utf8ToString").Utf8ToString(this.readBinary())},n.getLastFieldId=function(){return this.$3},n.getLastField=function(){return this.$2},n.getBooleanFieldInfo=function(){return this.$4},n.getBooleanValue=function(){return this.$5},n.$9=function(t){return d[t]},n.$10=function(n){switch(n){case u.CT_STOP:return(e||(e=r("ThriftTypes"))).STOP;case u.CT_BOOLEAN_FALSE:case u.CT_BOOLEAN_TRUE:return(e||(e=r("ThriftTypes"))).BOOL;case u.CT_BYTE:return(e||(e=r("ThriftTypes"))).BYTE;case u.CT_I16:return(e||(e=r("ThriftTypes"))).I16;case u.CT_I32:return(e||(e=r("ThriftTypes"))).I32;case u.CT_I64:return(e||(e=r("ThriftTypes"))).I64;case u.CT_DOUBLE:return(e||(e=r("ThriftTypes"))).DOUBLE;case u.CT_FLOAT:return(e||(e=r("ThriftTypes"))).FLOAT;case u.CT_BINARY:return(e||(e=r("ThriftTypes"))).STRING;case u.CT_LIST:return(e||(e=r("ThriftTypes"))).LIST;case u.CT_SET:return(e||(e=r("ThriftTypes"))).SET;case u.CT_MAP:return(e||(e=r("ThriftTypes"))).MAP;case u.CT_STRUCT:return(e||(e=r("ThriftTypes"))).STRUCT;default:throw new Error("don't know what type")}},t})();l.default=x}),98);
__d("TNoOpWriteBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(){this.$1=0}var t=e.prototype;return t.write=function(t){return this.$1+=t.length,t.length},t.writeByte=function(t){return this.$1++,1},t.writeFloatBE=function(t){return this.$1+=Float32Array.BYTES_PER_ELEMENT,Float32Array.BYTES_PER_ELEMENT},t.writeDoubleBE=function(t){return this.$1+=Float64Array.BYTES_PER_ELEMENT,Float64Array.BYTES_PER_ELEMENT},t.toByteArray=function(){throw new Error("operation not supported")},t.currentSize=function(){return this.$1},t.readByte=function(){throw new Error("operation not supported")},t.readBytes=function(t){throw new Error("operation not supported")},t.readFloatBE=function(){throw new Error("operation not supported")},t.readDoubleBE=function(){throw new Error("operation not supported")},e})();i.default=e}),66);
__d("TReadBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.$1=e,this.$2=0}var t=e.prototype;return t.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")},t.readBytes=function(t){if(t<0)throw new Error("cannot readBytes of negative length: "+t);if(t+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new Uint8Array(this.$1.buffer,this.$3(),t);return this.$2+=t,e},t.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new DataView(this.$1.buffer).getFloat32(this.$3());return this.$2+=Float32Array.BYTES_PER_ELEMENT,e},t.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new DataView(this.$1.buffer).getFloat64(this.$3());return this.$2+=Float64Array.BYTES_PER_ELEMENT,e},t.$3=function(){return this.$2+this.$1.byteOffset},t.getCurrentCursor=function(){return this.$2},t.writeByte=function(t){throw new Error("operation not supported")},t.write=function(t){throw new Error("operation not supported")},t.toByteArray=function(){throw new Error("operation not supported")},t.writeFloatBE=function(t){throw new Error("operation not supported")},t.writeDoubleBE=function(t){throw new Error("operation not supported")},e})();i.default=e}),66);
__d("CompactSerializerPolyfill",["TCompactProtocolPolyfill","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=new(r("TReadBuffer"))(e),o=new(r("TCompactProtocolPolyfill"))(n);return t(o)}function s(t,n,r){try{return e(t,n)}catch(e){r!=null&&r(e)}return null}function u(e,t,n){n===void 0&&(n=!1);var o;if(n){var a=new(r("TNoOpWriteBuffer")),i=new(r("TCompactProtocolPolyfill"))(a);t(e,i),o=new(r("TWriteBuffer"))(a.currentSize())}else o=new(r("TWriteBuffer"));var l=new(r("TCompactProtocolPolyfill"))(o);return t(e,l),l.toByteArray()}function c(e,t,n,r){n===void 0&&(n=!1);try{return u(e,t,n)}catch(e){r!=null&&r(e)}return null}l.deserialize=e,l.deserializeNoThrow=s,l.serialize=u,l.serializeNoThrow=c}),98);
__d("ContextualConfigConstants",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=", ",s={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"},u={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"},c=[],d=[],m=[],p={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},_=10,f=", ",g={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};i.ANALYTICS_SAMPLE_RATE=e,i.BUCKET_DELIMITER=l,i.CONTEXT_BUCKET_STRATEGY=s,i.CONFIG_TYPE=u,i.EMPTY_RESOLVED_CONTEXTS=c,i.EMPTY_RESOLVED_MONITORS=d,i.EMPTY_RESULT_PARAMS=m,i.ERROR=p,i.JSON_SUB_SAMPLE_RATE=_,i.LIST_DELIMITER=f,i.TYPE=g}),66);
__d("ContextualConfigResolvedContextsUtils",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e=[];for(var n of t){var r=n.bucketIndex;if(r==null)break;e.push(r)}return e},l=function(t){var e=[];for(var n of t){var r=n.bucketName;if(r===void 0)break;e.push(r)}return e},s=function(t){return t.name},u=function(t){return t.map(s)},c=function(t){var e=[];for(var n of t){var r=n.value;if(r===void 0)break;e.push(r)}return e};i.getBucketIndices=e,i.getBucketNames=l,i.getContextNames=u,i.getContextValues=c}),66);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["cfg_ver_timestamp","policy_id","version","sample_rate"],s=function(t){return t.join(o("ContextualConfigConstants").LIST_DELIMITER)},u=function(n,r){for(var t of e)r[t]!=null&&(n[t]=r[t]);r.name&&(n.config_name=r.name)},c=function(t,n){var e=n[0],r=n[1],a=n[2],i=n[3];e!=null&&(t.exception=e.message),t.result=s(r.map(function(e){return e.value}))||"INVALID",t.context=s(o("ContextualConfigResolvedContextsUtils").getContextNames(a)),t.context_value=s(o("ContextualConfigResolvedContextsUtils").getContextValues(a)),t.bucket_name=s(o("ContextualConfigResolvedContextsUtils").getBucketNames(a)),t.monitor=s(o("ContextualConfigResolvedContextsUtils").getContextNames(i)),t.monitor_value=s(o("ContextualConfigResolvedContextsUtils").getContextValues(i))};function d(e,t,n){var r={sample_rate:o("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};return u(r,e),c(r,t),n&&(r.config_contents=JSON.stringify(e)),r}l.default=d}),98);
__d("ContextualConfigExposureEvent",["Random"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$2=e,this.$4=o("Random").random()<1/e.sample_rate,this.$3=t,this.$1=n}var t=e.prototype;return t.getData=function(){return this.$2},t.log=function(t){var e=this.$2,n=this.$3,r=this.$4;return t&&n(e),r&&this.$1(e),this},t.isSampled=function(){return this.$4},e})();l.default=e}),98);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$2=e,this.$1=t}var t=e.prototype;return t.createEvent=function(t){var e=new(r("ContextualConfigExposureEvent"))(t,this.$2,this.$1);return e},e})();function s(t,n){return new e(t,n)}l.default=s}),98);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(t,n,r,o,a,i){var e="client_event",l="navigation",s=18e4,u="marauder",c="marauder_last_event_time",d="marauder_last_session_id",m={},p=[],_=!1,f=null,g=null,h=null,y=0,C,b,v=!1,S=null;function R(){P().set(c,L())}n("Banzai").subscribe(n("Banzai").SHUTDOWN,R);function L(){return C=C||P().get(c)||0,C}function E(){v||(b=P().get(d),v=!0);var e=Date.now();return(!b||e-s>L())&&(b=e.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),P().set(d,b)),b}function k(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function I(){return{locale:navigator.language}}function T(e,t,n,r,o,a,i){var l=i!=null&&i!=0?i:Date.now();C=i!=null&&i!=0?Date.now():l;var s=t!=null&&t!=""?t:f;return{name:e,time:l/1e3,module:s,obj_type:r,obj_id:o,uuid:a,extra:n}}function D(e,t,n){return T("content",null,{flags:t},null,null,e,n)}function x(e){var t=window.__mrdr;if(t)for(var n in t){var r=t[n];if(r[3]!==0){if(delete t[n],n==="1")if(h!==null)n=h;else continue;e.push(D(n,1,r[1])),e.push(D(n,2,r[2])),e.push(D(n,3,r[3]))}}}function $(t,r){if(x(t),t.length!==0){_&&t.push(T("counters",null,m));var o=n("Banzai").BASIC;r==="vital"&&(o=n("Banzai").VITAL);var a=n("MarauderConfig").gk_enabled;if(y===0&&a&&(t.push(T("device_status",null,I())),o={delay:5e3}),r==="signal"&&(o={signal:!0}),a&&Math.random()<.01&&t.push(T("device_info",null,k())),h!==null)for(var i=0;i<t.length;i++){var l=t[i];l.uuid==null&&(l.uuid=h)}var s={app_ver:n("MarauderConfig").app_version,data:t,device_id:void 0,log_type:e,seq:y++,session_id:E()},c=P().get("device_id");c&&(s.device_id=c),m={},_=!1,n("Banzai").post(u,s,o)}}function P(){return S||(S=new(n("CacheStorage"))("localstorage","")),S}function N(e){m[e]||(m[e]=0),m[e]++,_=!0}function M(e,t,n,r,o,a,i,l){$([T(e,t,n,r,o,a,i)],l)}function w(e,t){f!==t&&(p.push(T(l,f,{dest_module:t,source_url:g,destination_url:e})),f=t,g=e)}function A(e,t){f!==t&&(h=null,w(e,t))}function F(e,t,n){M(t?"show_module":"hide_module",e,n)}function O(e){f=e}function B(){return f}function W(e){h===null&&(h=e,e!==null&&($(p),p=[]))}a.exports={count:N,log:M,navigateTo:A,navigateWithinSession:w,toggleModule:F,setUUID:W,setNavigationModule:O,getNavigationModule:B}}),null);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){},s=function(t){o("MarauderLogger").log("contextual_config_exposure","",t)},u=r("ContextualConfigExposureLoggerFactory")(e,s);l.default=u}),98);
__d("ContextualConfigAssert",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e===!1)throw new Error(t)}i.default=e}),66);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return Array.isArray(t)},s=function(t){return typeof t=="boolean"},u=function(t){return t!=null},c=function(t){return(function(e){return Object.prototype.hasOwnProperty.call(t,e)})},d=function(t){return p(t)&&t%1===0},m=function(t){return _(t)&&t.length>0},p=function(t){return typeof t=="number"&&!isNaN(t)&&t!==1/0&&t!==-1/0},_=function(t){return typeof t=="string"},f=function(t){switch(t){case o("ContextualConfigConstants").TYPE.BOOL:case o("ContextualConfigConstants").TYPE.FLOAT:case o("ContextualConfigConstants").TYPE.INT:case o("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};l.isArray=e,l.isBoolean=s,l.isDefined=u,l.isKey=c,l.isInteger=d,l.isNonEmptyString=m,l.isNumber=p,l.isString=_,l.isType=f}),98);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(o("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}l.default=e}),98);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n;switch(t){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var a=r("ContextualConfigParseBoolean")(e);n=function(t){return t===a};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:n=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:n=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:n=function(t){return!0};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(e){return n(e)}}l.default=e}),98);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,u=function(t){return s.test(t)};function c(t){(e||(e=r("ContextualConfigAssert")))(u(t),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);var n=parseFloat(t);return e(o("ContextualConfigValidators").isNumber(n),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),n}l.default=c}),98);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/^[-\+]?([1-9]\d*|0)$/,u=function(t){return s.test(t)};function c(t){(e||(e=r("ContextualConfigAssert")))(u(t),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);var n=parseInt(t,10);return e(o("ContextualConfigValidators").isNumber(n),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),n}l.default=c}),98);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(n>0,o("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},u=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n===a,o("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},c=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n<a,o("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};l.assertHasValues=s,l.assertNumberOfValues=u,l.assertValueOrder=c}),98);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){var l=a.map(i?r("ContextualConfigParseInteger"):e||(e=r("ContextualConfigParseFloat"))),s;switch(n){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var u=i?r("ContextualConfigParseInteger")(t):(e||(e=r("ContextualConfigParseFloat")))(t);s=function(t){return i&&!o("ContextualConfigValidators").isInteger(t)?!1:t===u};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:s=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:s=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:s=function(t){return!0};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,2),o("ContextualConfigPredAssertions").assertValueOrder(l[0],l[1]),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>=l[0]&&t<l[1]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t<l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t<=l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t===l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t!==l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>=l[0]};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(e){return s(e)}}l.default=s}),98);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=/^\/(.+)\/(.*)$/;function s(t){try{var n=t.match(e);return n!=null?new RegExp(n[1],n[2]):new RegExp(t)}catch(e){throw new Error(o("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}l.default=s}),98);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){if(typeof t!="string")throw new Error(o("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return t},s=function(n){var t=[];for(var r of n)t.push(e(r));return t};function u(e,t,n){var a=s(n),i;switch(t){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:i=function(n){return typeof n!="string"?!1:n===e};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(t){return!0};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:o("ContextualConfigPredAssertions").assertHasValues(a.length),i=function(t){return typeof t!="string"?!1:a.indexOf(t)!==-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:o("ContextualConfigPredAssertions").assertHasValues(a.length),i=function(t){return typeof t!="string"?!1:a.indexOf(t)===-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:o("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1),i=function(t){return typeof t!="string"?!1:t.indexOf(a[0])!==-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:o("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1);var l=r("ContextualConfigParseRegExp")(a[0]);i=function(t){return typeof t!="string"?!1:l.test(t)};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(e){return i(e)}}l.default=u}),98);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},c=o("ContextualConfigValidators").isKey(o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isString(n)&&c(n.toUpperCase()),o("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},m=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},p=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},_=function(t,n){var e=n.name;p(e);var a=n.strategy;d(a);var i=n.values||[];switch(m(i),t){case o("ContextualConfigConstants").TYPE.BOOL:return r("ContextualConfigParsePredBoolean")(e,a);case o("ContextualConfigConstants").TYPE.FLOAT:return r("ContextualConfigParsePredNumeric")(e,a,i,!1);case o("ContextualConfigConstants").TYPE.INT:return r("ContextualConfigParsePredNumeric")(e,a,i,!0);case o("ContextualConfigConstants").TYPE.STRING:return r("ContextualConfigParsePredString")(e,a,i);default:throw new Error(o("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},f=function(t,n){s(n);var e=n.name;return p(e),{name:e,pred:_(t,n)}};function g(e,t){return u(t),t.map(function(t){return f(e,t)})}l.default=g}),98);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n)&&n.length>0,o("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(t){s(t);var e=t.name,n=t.type,o=t.buckets;return c(e),d(n),{name:e,type:n,buckets:r("ContextualConfigParseContextBuckets")(n,o)}};function p(e){return u(e),e.map(m)}l.default=p}),98);
__d("ContextualConfigIsEqualParams",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n+=1){var r=e[n],o=t[n];if(r.name!==o.name||r.type!==o.type)return!1}return!0}i.default=e}),66);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isString(n),o("ContextualConfigConstants").ERROR.INVALID_STRING)};function c(e,t){switch(u(t),e){case o("ContextualConfigConstants").TYPE.BOOL:return r("ContextualConfigParseBoolean")(t);case o("ContextualConfigConstants").TYPE.FLOAT:return(s||(s=r("ContextualConfigParseFloat")))(t);case o("ContextualConfigConstants").TYPE.INT:return r("ContextualConfigParseInteger")(t);case o("ContextualConfigConstants").TYPE.STRING:return t;default:throw new Error(o("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}l.default=c}),98);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_RESULTS)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},p=function(t,n){for(var e of t)if(e.name===n)return e.type;throw new Error(o("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},_=function(t){return(function(e){c(e);var n=e.name;d(n);var o=p(t,n);m(o);var a=(s||(s=r("ContextualConfigParseResultParamValue")))(o,e.value);return{name:n,type:o,value:a}})};function f(e,t){return u(t),t.map(_(e))}l.default=f}),98);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n,a){return(e||(e=r("ContextualConfigAssert")))(r("ContextualConfigIsEqualParams")(n,a),o("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function u(e,t){var n=r("ContextualConfigParseResultParams")(e,t.map(function(t,n){return{name:e[n].name,value:t}}));return s(e,n),n}l.default=u}),98);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){try{return r("ContextualConfigParseDenseResultParams")(e,t)}catch(e){throw new Error(o("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}l.default=e}),98);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(t){s(t);var e=t.name,n=t.type;return c(e),d(n),{name:e,type:n}};function p(e){return u(e),e.map(m)}l.default=p}),98);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(m(n),o("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},m=function(t){var e={};for(var n of t){if(e[n.name])return!1;e[n.name]=!0}return!0},p=function(t){return c(t.name),u(t.type),t};function _(e){s(e);var t=e.map(p);return d(t),t}l.default=_}),98);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_VECTOR)},c=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n===a,o("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},d=function(t,n){c(t.length,n.length);for(var e=0;e<t.length;e+=1){var o=t[e].type,a=n[e];(s||(s=r("ContextualConfigParseResultParamValue")))(o,a)}},m=function(t){return t.reduce(function(e,t){var n=t.buckets;return e*n.length},1)};function p(e,t,n){u(n);var r=m(t),o=e.length;c(r*o,n.length);for(var a=0;a<r;a+=1){var i=a*o;d(e,n.slice(i,i+o))}return n}l.default=p}),98);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){for(var e=0;e<t.length;e+=1){var r=t[e];try{if(r.pred(n))return[r.name,e]}catch(e){return null}}return null};function s(t,n,r){var a=null,i=t.map(function(t){var i=t.name,l={name:i};if(a!=null)return l;var s;if(r[i]!=null?s=r[i]:n[i]!=null?s=n[i]():s=null,l.value=s,t.buckets!=null){var u=e(t.buckets,s);if(u==null)return a=new Error(o("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH),l;var c=u[0],d=u[1];l.bucketName=c,l.bucketIndex=d}return l});return[a,i]}l.default=s}),98);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=function(t){for(var e=[],n=1,r=t.length-1;r>=0;r-=1)e.push(n),n*=t[r].buckets.length;return e.reverse()},c=function(t,n,o,a){try{var e=n.slice(o,o+t.length);return[null,r("ContextualConfigParseDenseResultParams")(t,e)]}catch(e){return[r("getErrorSafe")(e),a]}},d=function(n,o,a){try{var t=a.reduce(function(t,o,a){return(e||(e=r("ContextualConfigAssert")))(a<n.length,"Auxillery index out of range."),t+n[a]*o},0);return[null,t*o]}catch(e){return[r("getErrorSafe")(e),-1]}},m=(function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs),o=r("ContextualConfigParseContexts")(e.contexts);this.aux=u(o),this.contexts=o,this.defaults=r("ContextualConfigParseDenseDefaults")(n,e.vectorDefaults),this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.outputs=n,this.vector=r("ContextualConfigParseVector")(n,o,e.vector)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[r("getErrorSafe")(e),this.defaults,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.aux,n=this.globalContextProviders,a=this.contexts,i=this.defaults,l=this.monitors,s=this.outputs,u=this.vector,m=r("ContextualConfigResolveContexts")(a,n,t),p=m[0],_=m[1];if(p!=null)return[p,i,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var f=d(e,s.length,o("ContextualConfigResolvedContextsUtils").getBucketIndices(_)),g=f[0],h=f[1];if(g!=null)return[g,i,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var y=c(s,u,h,i),C=y[0],b=y[1];if(C!=null)return[C,b,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var v=r("ContextualConfigResolveContexts")(l,n,t),S=v[0],R=v[1];return S!=null?[S,b,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,b,_,R]},e})();l.default=m}),98);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=(function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs);this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.values=r("ContextualConfigParseResultParams")(n,e.values)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[r("getErrorSafe")(e),this.values,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.globalContextProviders,n=this.monitors,a=this.values,i=r("ContextualConfigResolveContexts")(n,e,t),l=i[0],s=i[1];return l!=null?[l,a,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,a,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,s]},e})();l.default=u}),98);
__d("ContextualConfigMergePartialResultParams",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n={};for(var r of t)n[r.name]=r;var o=[];for(var a of e){var i=n[a.name];o.push(i!=null&&i.name===a.name&&i.type===a.type?i:a)}return o}i.default=e}),66);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n,a){return(e||(e=r("ContextualConfigAssert")))(r("ContextualConfigIsEqualParams")(n,a),o("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function u(e,t){var n=r("ContextualConfigParseResultParams")(e,t);return s(e,n),n}l.default=u}),98);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},m=function(t,n){u(n);var e=n.bucket,o=n.values;return c(e),d(o),{bucket:e,values:r("ContextualConfigParseResultParams")(t,o)}};function p(e,t){return s(t),t.reduce(function(t,n){var r=m(e,n);return t[r.bucket]=r.values,t},{})}l.default=p}),98);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[],u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},c=(function(){function e(e,t){u(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs);this.contexts=r("ContextualConfigParseContexts")(e.contexts),this.defaults=r("ContextualConfigParseDefaults")(n,e.defaults),this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.table=r("ContextualConfigParseTable")(n,e.table)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[e,this.defaults,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.globalContextProviders,n=this.contexts,a=this.defaults,i=this.monitors,l=this.table,u=r("ContextualConfigResolveContexts")(n,e,t),c=u[0],d=u[1];if(c!=null)return[c,a,d,[]];var m=o("ContextualConfigResolvedContextsUtils").getBucketNames(d).join(o("ContextualConfigConstants").BUCKET_DELIMITER),p=l[m]||s,_=r("ContextualConfigMergePartialResultParams")(a,p),f=r("ContextualConfigResolveContexts")(i,e,t),g=f[0],h=f[1];return g!=null?[g,_,d,[]]:[null,_,d,h]},e})();l.default=c}),98);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[1],u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n)&&o("ContextualConfigValidators").isDefined(n.version),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(s.indexOf(n)!==-1,o("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function d(e,t){switch(u(e),c(e.version),e.cctype){case o("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(r("DenseContextualConfig"))(e,t);case o("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(r("MultiOutputResolvedContextualConfig"))(e,t);case o("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(r("TableContextualConfig"))(e,t);default:throw new Error(o("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}l.default=d}),98);
__d("ContextualConfigWarn",[],(function(t,n,r,o,a,i){"use strict";function e(e){}i.default=e}),66);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.reduce(function(e,t){var n=t.name,r=t.value;return e[n]=r,e},{}),this.$2=e}var t=e.prototype;return t.get=function(t,n){try{var e=this.$1[t];return typeof e!=typeof n?(r("ContextualConfigWarn")(o("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND),n):e}catch(e){return r("ContextualConfigWarn")(r("getErrorSafe")(e).message),n}},t.getParams=function(){return this.$2},e})();l.default=e}),98);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.error=e}var t=e.prototype;return t.resolve=function(t){return[this.error,o("ContextualConfigConstants").EMPTY_RESULT_PARAMS,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]},e})();l.default=e}),98);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=1/o("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,s=1,u=(function(){function t(e,t){t===void 0&&(t={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=e,this.$2=t}var n=t.prototype;return n.$5=function(){if(this.$1)return this.$1;var e=this.$2,t=this.$4,n;try{n=r("ContextualConfigParseConfig")(t,e)}catch(e){n=new(r("ErrorContextualConfig"))(r("getErrorSafe")(e))}return this.$1=n,n},n.$6=function(n){var t=this.isDebugLoggingEnabled,a=this.$3,i=!a&&o("Random").random()<e;i&&(this.$3=!0);var l=r("ContextualConfigCollateExposureData")(this.$4,n,i),s=r("ContextualConfigExposureLogger").createEvent(l);s.log(t)},n.resolve=function(t){t===void 0&&(t={});var e=this.$1||this.$5(),n=e.resolve(t);return this.$6(n),new(r("ContextualConfigResult"))(n[s])},t})();l.default=u}),98);
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1755537"),s=o("FalcoLoggerInternal").create("dgw_client",e),u=s;l.default=u}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(t,n,r,o,a,i,l){"use strict";var e,s="dgw_client",u=n("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),c={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function d(e){switch(e){case u.GROUPED_STREAM_COMPONENT:case u.ACK_MANAGER_COMPONENT:return!0;default:return!1}}var m=(function(){function t(e,t,n,r,o,a,i){a===void 0&&(a=!1),i===void 0&&(i=!1),this.$5=""+e,this.$1=t,this.$4=n,this.$3=r,this.sgTransportId=o,this.$2=a,this.$6=i}t.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}};var n=t.prototype;return n.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=this.$4+"."+n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}},n.logEvent=function(t,n,r,o,a){o===void 0&&(o=!1),this.$2||this.$7(t,n,null,c.INFO,r,o,a)},n.$7=function(t,n,o,a,i,l,s){var e=this;l===void 0&&(l=!1),!(l&&!this.$6)&&(d(t)&&this.$1!=null||!d(t)&&this.sgTransportId!=null)&&r("DgwClientFalcoEvent").log(function(){return{event:n,logging_id:s!=null?s:e.$1,dgw_version:e.$5,message:o,severity:a,uuid:e.$3,dgw_component:t,extra_info:i,destination_tier:e.$4,sg_transport_id:e.sgTransportId,source:2}})},n.logError=function(t,n,r,o,a,i){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.ERROR,o,a,i)},n.logWarn=function(t,n,r,o,a){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.WARNING,o,a)},t})();l.DGW_MODULE=s,l.DGWLoggingComponent=u,l.DGWLoggingContext=m}),98);
__d("DGWAckManager",["DGWLoggingContext","Promise","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function e(e,t,n){var r=this;this.$3=n,this.sendId=e,this.$2=t,this.handleAckReceived=function(){r.stopTracking(!0)},this.$1=window.setTimeout(function(){r.stopTracking(!1)},t)}var t=e.prototype;return t.stopTracking=function(t){window.clearTimeout(this.$1),this.$3(t)},e})(),u=(function(){function t(e){this.$1=new Map,this.$2=e}var a=t.prototype;return a.waitForAck=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var i=this.$1;try{var l=yield new(e||(e=n("Promise")))(function(e,n){i.set(t,new s(t,a,e))});return l===!0?this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+t,!0):(this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+t+" timed out after "+a+"ms")),i.delete(t),l}catch(e){var u=r("getErrorSafe")(e);throw this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error"),i.delete(t),u}});function a(e,n){return t.apply(this,arguments)}return a})(),a.handleAckReceived=function(t){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var e=this.$1.get(t);if(e===void 0){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+t+" which was not being tracked");return}e.handleAckReceived()},a.clearPendingAcks=function(){var e=this;this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size),this.$1.forEach(function(t,n,r){e.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+t.sendId,null,!0),t.stopTracking(!1),r.delete(n)})},t})();l.DGWAckManager=u}),98);
__d("DGWAuth",["$InternalEnum","err"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0",INTERNALFB:"2:0",OCULUS:"3:0",ENTERPRISEFB:"7:0",RECRUITINGFB:"8:0",INSTAGRAM:"6:0",HORIZON_WEB:"12:0",SPARK_WEB:"13:0",ABRA:"15:0",GUEST:"19:0"});function s(t){if(t==="TEST")return e.TEST;if(t==="FACEBOOK")return e.FACEBOOK;if(t==="INTERNALFB")return e.INTERNALFB;if(t==="OCULUS")return e.OCULUS;if(t==="ENTERPRISEFB")return e.ENTERPRISEFB;if(t==="RECRUITINGFB")return e.RECRUITINGFB;if(t==="INSTAGRAM")return e.INSTAGRAM;if(t==="HORIZON_WEB")return e.HORIZON_WEB;if(t==="SPARK_WEB")return e.SPARK_WEB;if(t==="ABRA")return e.ABRA;if(t==="GUEST")return e.GUEST;throw r("err")("failed to convert string ("+t+") to DGWAuth Type")}function u(t){return t===e.FACEBOOK?"FACEBOOK":t===e.INTERNALFB?"INTERNALFB":t===e.OCULUS?"OCULUS":t===e.ENTERPRISEFB?"ENTERPRISEFB":t===e.RECRUITINGFB?"RECRUITINGFB":t===e.INSTAGRAM?"INSTAGRAM":t===e.HORIZON_WEB?"HORIZON_WEB":t===e.SPARK_WEB?"SPARK_WEB":t===e.ABRA?"ABRA":t===e.GUEST?"GUEST":"TEST"}l.DGWAuth=e,l.fromStringToDGWAuth=s,l.fromDGWAuthToString=u}),98);
__d("DGWStream",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_ERROR","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR","ACK_TIMEOUT"]);function l(t){switch(t){case e.UNAUTHENTICATED:case e.UNAUTHORIZED:case e.REJECTED:case e.BAD_REQUEST:case e.UNKNOWN_ERROR:case e.SERVER_INTERNAL_ERROR:return!1;default:return!0}}i.StreamError=e,i.isRetryableError=l}),66);
__d("DGWCppBridge",[],(function(t,n,r,o,a,i){var e=(function(){var e=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return(function(t){t=t||{};var t=typeof t!="undefined"?t:{},n=(function(){function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function r(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,n._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?o:a)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){a(t.promise,e);return}o(t.promise,r)})}function o(e,r){try{if(r===e)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var o=r.then;if(r instanceof n){e._state=3,e._value=r,i(e);return}else if(typeof o=="function"){s(t(o,r),e);return}}e._state=1,e._value=r,i(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,i(e)}function i(e){e._state===2&&e._deferreds.length===0&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,o=e._deferreds.length;t<o;t++)r(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=n}function s(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(t,n){var o=new this.constructor(e);return r(this,new l(t,n,o)),o},n.all=function(e){return new n(function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return t([]);var o=r.length;function a(e,i){try{if(i&&(typeof i=="object"||typeof i=="function")){var l=i.then;if(typeof l=="function"){l.call(i,function(t){a(e,t)},n);return}}r[e]=i,--o===0&&t(r)}catch(e){n(e)}}for(var i=0;i<r.length;i++)a(i,r[i])})},n.resolve=function(e){return e&&typeof e=="object"&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,r){if(!Array.isArray(e))return r(new TypeError("Promise.race accepts an array"));for(var o=0,a=e.length;o<a;o++)n.resolve(e[o]).then(t,r)})},n._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){setTimeout(e,0)},n._unhandledRejectionFn=function(t){},n})(),r,o;t.ready=new n(function(e,t){r=e,o=t});var a={},i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);var l=[],s="./this.program",u=function(t,n){throw n},c=!0,d=!1,m="";function p(e){return t.locateFile?t.locateFile(e,m):m+e}var _,f,g,h;typeof document!="undefined"&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",_=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var n=ge(t);if(n)return pe(n);throw e}},f=function(t,n,r){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){if(e.status==200||e.status==0&&e.response){n(e.response);return}var o=ge(t);if(o){n(o.buffer);return}r()},e.onerror=r,e.send(null)},h=function(t){document.title=t};var y=t.print||console.log.bind(console),C=t.printErr||console.warn.bind(console);for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);a=null,t.arguments&&(l=t.arguments),t.thisProgram&&(s=t.thisProgram),t.quit&&(u=t.quit);var b;t.wasmBinary&&(b=t.wasmBinary);var v=t.noExitRuntime||!0,S={Memory:function(t){this.buffer=new ArrayBuffer(t.initial*65536)},Module:function(t){},Instance:function(t,n){this.exports=(function(t){function e(e){return e.set=function(e,t){this[e]=t},e.get=function(e){return this[e]},e}for(var n,r=new Uint8Array(123),o=25;o>=0;--o)r[48+o]=52+o,r[65+o]=o,r[97+o]=26+o;r[43]=62,r[47]=63;function a(e,t,n){for(var o,a,i=0,l=t,s=n.length,u=t+(s*3>>2)-(n[s-2]=="=")-(n[s-1]=="=");i<s;i+=4)o=r[n.charCodeAt(i+1)],a=r[n.charCodeAt(i+2)],e[l++]=r[n.charCodeAt(i)]<<2|o>>4,l<u&&(e[l++]=o<<4|a>>2),l<u&&(e[l++]=a<<6|r[n.charCodeAt(i+3)])}function i(e){a(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),a(n,1372,"gAkQ")}function l(t){var r=t.a,o=r.buffer;r.grow=Le;var a=new Int8Array(o),l=new Int16Array(o),s=new Int32Array(o),u=new Uint8Array(o),c=new Uint16Array(o),d=new Uint32Array(o),m=new Float32Array(o),p=new Float64Array(o),_=Math.imul,f=Math.fround,g=Math.abs,h=Math.clz32,y=Math.min,C=Math.max,b=Math.floor,v=Math.ceil,S=Math.trunc,R=Math.sqrt,L=t.abort,E=NaN,k=1/0,I=t.b,T=1051008,D=0;function x(e,t,n,r,o,i){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0;var m=0,p=0,f=0;m=T-80|0,T=m,s[m+72>>2]=e,s[m+68>>2]=t,s[m+64>>2]=n,s[m+60>>2]=r,s[m+56>>2]=o,s[m+52>>2]=i;e:{if(!s[m+52>>2]||!s[m+56>>2]|(!s[m+72>>2]|!s[m+68>>2]|(!s[m+64>>2]|!s[m+60>>2]))){s[m+76>>2]=5;break e}s[s[m+64>>2]>>2]=0,s[s[m+60>>2]>>2]=0,t=s[m+68>>2],n=s[m+56>>2],r=s[m+52>>2],e=T+-64|0,T=e,s[e+56>>2]=s[m+72>>2],s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=0,s[e+36>>2]=s[e+56>>2];t:{n:{r:{for(;;){if(!s[e+52>>2])break n;if(s[e+32>>2]=s[e+36>>2],a[e+31|0]=u[s[e+36>>2]],s[e+52>>2]=s[e+52>>2]-1,s[e+36>>2]=s[e+36>>2]+1,u[e+31|0]==10||u[e+31|0]==2|u[e+31|0]==4|u[e+31|0]==9){s[e+40>>2]=s[e+40>>2]+1;continue}if(s[e+24>>2]=1,J(u[e+31|0])&1){if(p=e,f=ee(u[e+31|0])&1,a[p+23|0]=f,s[e+16>>2]=a[e+23|0]&1?1:2,d[e+52>>2]<d[e+16>>2]){s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}if(s[e+52>>2]=s[e+52>>2]-s[e+16>>2],s[e+24>>2]=s[e+16>>2]+s[e+24>>2],s[e+36>>2]=s[e+16>>2]+s[e+36>>2],!(u[e+31|0]!=14&&u[e+31|0]!=8)){s[e+40>>2]=s[e+40>>2]+1;continue}}if(d[e+52>>2]<3)break r;if(s[e+12>>2]=0,t=s[e+36>>2],n=u[t|0]|u[t+1|0]<<8,a[e+12|0]=n,a[e+13|0]=n>>>8,a[e+14|0]=u[t+2|0],s[e+52>>2]=s[e+52>>2]-3,s[e+24>>2]=s[e+24>>2]+3,s[e+36>>2]=s[e+36>>2]+3,d[e+12>>2]<=d[e+52>>2]){s[e+40>>2]=s[e+40>>2]+1,s[e+36>>2]=s[e+12>>2]+s[e+36>>2],s[e+52>>2]=s[e+52>>2]-s[e+12>>2];continue}break}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+44>>2]>>2]=s[e+52>>2]}if(s[e+60>>2]=s[e+40>>2],T=e- -64|0,s[m+48>>2]=s[e+60>>2],!s[m+48>>2]){s[m+76>>2]=0;break e}if(p=m,f=$(_(s[m+48>>2],20)),s[p+44>>2]=f,!s[m+44>>2]){s[m+76>>2]=3;break e}for(s[m+40>>2]=s[m+44>>2],s[m+36>>2]=s[m+72>>2],s[m+32>>2]=s[m+68>>2]-s[s[m+52>>2]>>2],s[m+28>>2]=0;;){if(d[m+28>>2]<d[m+48>>2]){if(d[m+32>>2]<1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}a[m+27|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;t:{if(!u[m+27|0]|u[m+27|0]==1|(u[m+27|0]==2|u[m+27|0]==3)|(u[m+27|0]==4|u[m+27|0]==9|u[m+27|0]==10)||J(u[m+27|0])&1)break t;V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=6;break e}e=s[m+40>>2],s[e>>2]=u[m+27|0]&15|s[e>>2]&-16;t:{if(u[m+27|0]==10||u[m+27|0]==2|u[m+27|0]==4|u[m+27|0]==9){e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441,s[m+40>>2]=s[m+40>>2]+20;break t}if(J(u[m+27|0])&1){e=T-48|0,T=e,s[e+40>>2]=s[m+40>>2],s[e+36>>2]=m+36,s[e+32>>2]=m+32;n:{if(!(J(s[s[e+40>>2]>>2]&15)&1)){s[e+44>>2]=1;break n}if(p=e,f=ee(s[s[e+40>>2]>>2]&15)&1,a[p+31|0]=f,s[e+24>>2]=a[e+31|0]&1?1:2,d[s[e+32>>2]>>2]<d[e+24>>2]){s[e+44>>2]=1;break n}if(ae(s[e+40>>2]+4|0,s[s[e+36>>2]>>2],s[e+24>>2]),t=s[e+36>>2],s[t>>2]=s[e+24>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+24>>2],(s[s[e+40>>2]>>2]&15)==8){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==14){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if(d[s[e+32>>2]>>2]<3){s[e+44>>2]=11;break n}if(s[e+20>>2]=0,t=s[s[e+36>>2]>>2],n=u[t|0]|u[t+1|0]<<8,a[e+20|0]=n,a[e+21|0]=n>>>8,a[e+22|0]=u[t+2|0],t=s[e+36>>2],s[t>>2]=s[t>>2]+3,t=s[e+32>>2],s[t>>2]=s[t>>2]-3,t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441|(s[e+20>>2]&16777215)<<4,d[s[e+32>>2]>>2]<d[e+20>>2]){s[e+44>>2]=11;break n}if((s[s[e+40>>2]>>2]&15)==15){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==5){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}r:{if(!((s[s[e+40>>2]>>2]&15)!=6&&(s[s[e+40>>2]>>2]&15)!=7)){if(p=e,f=G(s[e+36>>2],s[e+32>>2],e+19|0,e+18|0),s[p+12>>2]=f,s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}break r}if(!((s[s[e+40>>2]>>2]&15)!=13&&(s[s[e+40>>2]>>2]&15)!=12)){n=s[e+32>>2],t=T-32|0,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=e+19,s[t+12>>2]=e+16,l[t+10>>1]=0;o:{if(d[s[t+20>>2]>>2]<2){s[t+28>>2]=1;break o}n=s[s[t+24>>2]>>2],n=u[n|0]|u[n+1|0]<<8,a[t+10|0]=n,a[t+11|0]=n>>>8,n=s[t+24>>2],s[n>>2]=s[n>>2]+2,n=s[t+20>>2],s[n>>2]=s[n>>2]-2,a[s[t+16>>2]]=(c[t+10>>1]&32768)==32768,l[s[t+12>>2]>>1]=c[t+10>>1]&32767,s[t+28>>2]=0}if(s[e+12>>2]=s[t+28>>2],s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}}}if((s[s[e+40>>2]>>2]&15)==12){t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==7){t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==13){n=s[e+32>>2],r=s[e+20>>2],o=s[e+40>>2]+12|0,i=s[e+40>>2],t=T-32|0,T=t,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=r,s[t+12>>2]=o,s[t+8>>2]=i+16;r:{if(d[t+16>>2]<2){s[t+28>>2]=9;break r}if(s[s[t+8>>2]>>2]=s[t+16>>2]-2,d[s[t+20>>2]>>2]<d[s[t+8>>2]>>2]){s[t+28>>2]=1;break r}if(n=$(s[s[t+8>>2]>>2]),s[s[t+12>>2]>>2]=n,!s[s[t+12>>2]>>2]){s[t+28>>2]=3;break r}ae(s[s[t+12>>2]>>2],s[s[t+24>>2]>>2],s[s[t+8>>2]>>2]),n=s[t+24>>2],s[n>>2]=s[s[t+8>>2]>>2]+s[n>>2],n=s[t+20>>2],s[n>>2]=s[n>>2]-s[s[t+8>>2]>>2],s[t+28>>2]=0}if(T=t+32|0,s[e+8>>2]=s[t+28>>2],s[e+8>>2]){s[e+44>>2]=s[e+8>>2];break n}t=s[e+40>>2],l[t+8>>1]=a[e+19|0]&1|c[t+8>>1]&65534,t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==6){if(p=e,f=q(s[e+36>>2],s[e+32>>2],s[e+20>>2],s[e+40>>2]+12|0,s[e+40>>2]+16|0),s[p+4>>2]=f,s[e+4>>2]){s[e+44>>2]=s[e+4>>2];break n}t=s[e+40>>2],a[t+8|0]=a[e+19|0]&1|u[t+8|0]&254,t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}s[e+44>>2]=1}if(T=e+48|0,s[m+20>>2]=s[e+44>>2],!s[m+20>>2]){s[m+40>>2]=s[m+40>>2]+20;break t}V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+20>>2];break e}if(s[m+16>>2]=0,d[m+32>>2]<3){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}if(e=s[m+36>>2],t=u[e|0]|u[e+1|0]<<8,a[m+16|0]=t,a[m+17|0]=t>>>8,a[m+18|0]=u[e+2|0],s[m+36>>2]=s[m+36>>2]+3,s[m+32>>2]=s[m+32>>2]-3,!(s[m+16>>2]==1|u[m+27|0]!=1)){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=7;break e}if(e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441|(s[m+16>>2]&16777215)<<4,u[m+27|0]==3){if(s[m+16>>2]!=1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=10;break e}if(a[m+15|0]=0,d[m+32>>2]<1){O(s[m+44>>2]),s[m+76>>2]=1;break e}a[m+15|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;n:{if(u[m+15|0]<=4){a[s[m+40>>2]+4|0]=u[m+15|0];break n}a[s[m+40>>2]+4|0]=4}s[m+40>>2]=s[m+40>>2]+20;break t}if(p=m,f=G(m+36|0,m+32|0,m+14|0,m+13|0),s[p+8>>2]=f,s[m+8>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+8>>2];break e}if(u[m+27|0]==1){e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20;break t}if(!u[m+27|0]){if(p=m,f=q(m+36|0,m+32|0,s[m+16>>2],s[m+40>>2]+8|0,s[m+40>>2]+12|0),s[p+4>>2]=f,s[m+4>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+4>>2];break e}e=s[m+40>>2],a[e+4|0]=a[m+14|0]&1|u[e+4|0]&254,e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20}}s[m+28>>2]=s[m+28>>2]+1;continue}break}if(s[m+32>>2]){V(s[m+44>>2],s[m+48>>2]),s[m+76>>2]=1;break e}s[s[m+64>>2]>>2]=s[m+44>>2],s[s[m+60>>2]>>2]=s[m+48>>2],s[m+76>>2]=0}return T=m+80|0,s[m+76>>2]}function $(e){var t=0,n=0,r=0,o=0,a=0,i=0,l=0,u=0,c=0,d=0,m=0;c=8;e:{t:{if(e>>>0>4294967239)break t;for(;;){c=c>>>0>8?c:8,n=s[603],a=n,o=s[602],l=o,e=e>>>0>8?e+3&-4:8;n:{if(e>>>0<=127){i=(e>>>3|0)-1|0;break n}if(r=h(e),i=((e>>>29-r^4)-(r<<2)|0)+110|0,e>>>0<=4095)break n;r=((e>>>30-r^2)-(r<<1)|0)+71|0,i=r>>>0<63?r:63}if(t=i,r=t&31,(t&63)>>>0>=32?(t=0,n=n>>>r|0):(t=n>>>r|0,n=((1<<r)-1&n)<<32-r|l>>>r),r=t,n|t){for(;;){a=n,t=r;n:{if(t|n){o=t-1|0,u=o+1|0,l=o,o=n-1|0,l=(o|0)!=-1?u:l,o=h(n^o)+32|0,n=h(t^l),n=(n|0)==32?o:n,t=63-n|0,D=0-(n>>>0>63)|0;break n}D=0,t=64}o=t,t=o,n=t&31,(t&63)>>>0>=32?(t=0,l=r>>>n|0):(t=r>>>n|0,l=((1<<n)-1&r)<<32-n|a>>>n),r=t,i=o+i|0,a=i<<4,t=s[a+1384>>2],o=a+1376|0;n:{if((t|0)!=(o|0)){if(n=F(t,c,e),n)break t;n=s[t+4>>2],s[n+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=n,s[t+8>>2]=o,n=a+1380|0,s[t+4>>2]=s[n>>2],s[n>>2]=t,s[s[t+4>>2]+8>>2]=t,i=i+1|0,n=(r&1)<<31|l>>>1,r=r>>>1|0;break n}d=s[603],t=i,u=t&63,n=u,a=n&31,n>>>0>=32?(n=0,o=-1>>>a|0):(n=-1>>>a|0,o=(1<<a)-1<<32-a|-1>>>a),o=o&-2,a=u&31,u>>>0>=32?(n=o<<a,u=0):(n=(1<<a)-1&o>>>32-a|n<<a,u=o<<a),a=n,o=0-t&63,n=o,t=n&31,n>>>0>=32?(n=-1<<t,t=0):(n=(1<<t)-1&-1>>>32-t|-1<<t,t=-1<<t),m=t&-2,t=o&31,o>>>0>=32?(o=0,t=n>>>t|0):(o=n>>>t|0,t=((1<<t)-1&n)<<32-t|m>>>t),n=t|u,D=a|o,s[602]=s[602]&n,s[603]=D&d,n=l^1}if(!(n|r))break}o=s[602],a=s[603]}n:{if(a|o){r=h(a),r=63-((r|0)==32?h(o)+32|0:r)<<4,t=r+1376|0,r=s[r+1384>>2];r:{if(!a&o>>>0<1073741824||(i=98,(t|0)==(r|0)))break r;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],!i)break r;if(i=i-1|0,(t|0)==(r|0))break}}if(M(e+48|0))break n;if(!r|(t|0)==(r|0))break e;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],(t|0)==(r|0))break}break e}if(!M(e+48|0))break e}if(n=0,e>>>0>4294967239)break t;for(r=c,t=0;;){if(i=t,r){r=r-1&r,t=t+1|0;continue}break}if(!(i>>>0<=1))break}}return n}return 0}function P(e,t,n,r,o,i,m){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0,m=m|0;var p=0,_=0,f=0;p=T-32|0,T=p,l[p+26>>1]=e,s[p+20>>2]=t,s[p+16>>2]=n,a[p+15|0]=r,l[p+12>>1]=o,s[p+8>>2]=i,s[p+4>>2]=m;e:{if(!(!(a[p+15|0]&1)|c[p+12>>1]<=32767)){s[p+28>>2]=4;break e}t=s[p+20>>2],n=s[p+16>>2],r=s[p+8>>2],o=s[p+4>>2],i=a[p+15|0]&1,e=T+-64|0,T=e,s[e+56>>2]=p+26,s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=o,a[e+39|0]=2,a[e+38|0]=13,s[e+32>>2]=p+12,a[e+31|0]=i,a[e+30|0]=2;t:{n:{if(!(!s[e+52>>2]|(!s[e+44>>2]|!s[e+40>>2]))&&d[e+48>>2]<=16777215)break n;s[e+60>>2]=5;break t}if(s[e+24>>2]=s[e+48>>2]+(u[e+39|0]+(u[e+30|0]+4|0)|0),_=e,f=$(s[e+24>>2]),s[_+20>>2]=f,!s[e+20>>2]){s[e+60>>2]=3;break t}if(s[e+16>>2]=s[e+20>>2],a[s[e+16>>2]]=u[e+38|0],s[e+16>>2]=s[e+16>>2]+1,ae(s[e+16>>2],s[e+56>>2],u[e+30|0]),s[e+16>>2]=u[e+30|0]+s[e+16>>2],s[e+12>>2]=u[e+39|0]+s[e+48>>2],d[e+12>>2]<d[e+48>>2]){O(s[e+20>>2]),s[e+60>>2]=9;break t}if(t=s[e+16>>2],n=u[e+12|0]|u[e+13|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+14|0],s[e+16>>2]=s[e+16>>2]+3,a[e+31|0]&1)n:{if(u[e+38|0]==6){t=s[e+32>>2],a[t|0]=u[t|0]|128;break n}r:{if(u[e+38|0]==13){t=s[e+32>>2],l[t>>1]=c[t>>1]|32768;break r}O(s[e+20>>2]),s[e+60>>2]=1;break t}}ae(s[e+16>>2],s[e+32>>2],u[e+39|0]),s[e+16>>2]=u[e+39|0]+s[e+16>>2],ae(s[e+16>>2],s[e+52>>2],s[e+48>>2]),s[s[e+44>>2]>>2]=s[e+20>>2],s[s[e+40>>2]>>2]=s[e+24>>2],s[e+60>>2]=0}T=e- -64|0,s[p+28>>2]=s[e+60>>2]}return T=p+32|0,s[p+28>>2]}function N(e,t,n,r,o){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0;var i=0,c=0,m=0;i=T-32|0,T=i,l[i+30>>1]=e,s[i+24>>2]=t,s[i+20>>2]=n,s[i+16>>2]=r,s[i+12>>2]=o,t=s[i+24>>2],n=s[i+20>>2],r=s[i+16>>2],o=s[i+12>>2],e=T-48|0,T=e,s[e+40>>2]=i+30,s[e+36>>2]=t,s[e+32>>2]=n,s[e+28>>2]=r,s[e+24>>2]=o,a[e+23|0]=2,a[e+22|0]=15;e:{if(!(s[e+24>>2]&&s[e+28>>2])){s[e+44>>2]=5;break e}if(s[s[e+28>>2]>>2]=0,s[s[e+24>>2]>>2]=0,!(d[e+32>>2]<=16777215&&s[e+36>>2])){s[e+44>>2]=5;break e}if(s[e+16>>2]=s[e+32>>2]+(u[e+23|0]+4|0),c=e,m=$(s[e+16>>2]),s[c+12>>2]=m,!s[e+12>>2]){s[e+44>>2]=3;break e}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+22|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],t=s[e+8>>2],n=u[e+32|0]|u[e+33|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+34|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+36>>2],s[e+32>>2]),s[e+8>>2]=s[e+32>>2]+s[e+8>>2],s[s[e+28>>2]>>2]=s[e+12>>2],s[s[e+24>>2]>>2]=s[e+16>>2],s[e+44>>2]=0}return T=e+48|0,T=i+32|0,s[e+44>>2]}function M(e){var t=0,n=0,r=0,o=0,i=0,l=0;r=s[343],n=e+3&-4,t=r+n|0;e:{t:{if(t>>>0<=r>>>0&&n||t>>>0>Re()<<16>>>0&&!(I(t|0)|0))break t;s[343]=t;break e}s[604]=48,r=-1}if((r|0)!=-1){n=e+r|0,t=n-16|0,s[t+12>>2]=16,s[t>>2]=16,e=s[600],e?l=s[e+8>>2]:l=0;e:{t:{if((l|0)==(r|0)){if(o=r-(s[r-4>>2]&-2)|0,i=s[o-4>>2],s[e+8>>2]=n,e=o-(i&-2)|0,n=-16,!(a[(e+s[e>>2]|0)-4|0]&1))break t;n=s[e+4>>2],s[n+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=n,t=t-e|0,s[e>>2]=t;break e}s[r+12>>2]=16,s[r>>2]=16,s[r+8>>2]=n,s[r+4>>2]=e,s[600]=r,n=16}e=r+n|0,t=t-e|0,s[e>>2]=t}s[((t&-4)+e|0)-4>>2]=t|1,l=e,o=s[e>>2]-8|0;e:{if(o>>>0<=127){t=(o>>>3|0)-1|0;break e}if(i=h(o),t=((o>>>29-i^4)-(i<<2)|0)+110|0,o>>>0<=4095)break e;t=((o>>>30-i^2)-(i<<1)|0)+71|0,t=t>>>0<63?t:63}n=t<<4,s[l+4>>2]=n+1376,n=n+1384|0,s[e+8>>2]=s[n>>2],s[n>>2]=e,s[s[e+8>>2]+4>>2]=e,n=s[603],e=t&31,(t&63)>>>0>=32?(t=1<<e,e=0):(t=(1<<e)-1&1>>>32-e,e=1<<e),s[602]=e|s[602],s[603]=t|n}return(r|0)!=-1}function w(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0;var o=0,i=0,d=0;o=T-16|0,T=o,l[o+10>>1]=e,l[o+8>>1]=t,s[o+4>>2]=n,s[o>>2]=r;e:{if(c[o+8>>1]>32767){s[o+12>>2]=4;break e}t=s[o+4>>2],n=s[o>>2],e=T-48|0,T=e,s[e+40>>2]=o+10,s[e+36>>2]=t,s[e+32>>2]=n,a[e+31|0]=2,a[e+30|0]=12,s[e+24>>2]=o+8,a[e+23|0]=2;t:{if(!(s[e+32>>2]&&s[e+36>>2])){s[e+44>>2]=5;break t}if(s[e+16>>2]=u[e+31|0]+(u[e+23|0]+4|0),i=e,d=$(s[e+16>>2]),s[i+12>>2]=d,!s[e+12>>2]){s[e+44>>2]=3;break t}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+30|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],s[e+4>>2]=u[e+31|0],t=s[e+8>>2],n=u[e+4|0]|u[e+5|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+6|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+24>>2],u[e+31|0]),s[s[e+32>>2]>>2]=s[e+16>>2],s[s[e+36>>2]>>2]=s[e+12>>2],s[e+44>>2]=0}T=e+48|0,s[o+12>>2]=s[e+44>>2]}return T=o+16|0,s[o+12>>2]}function A(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,a=0,i=0,l=0;a=T+-64|0,T=a,o=1;e:{if(j(e,t,0)||(o=0,!t))break e;r=T+-64|0,T=r,o=s[t>>2],i=s[o-4>>2],l=s[o-8>>2],s[r+20>>2]=0,s[r+16>>2]=1084,s[r+12>>2]=t,s[r+8>>2]=1132,o=0,ie(r+24|0,39),t=t+l|0;t:{if(j(i,1132,0)){s[r+56>>2]=1,Se[s[s[i>>2]+20>>2]](i,r+8|0,t,t,1,0),o=s[r+32>>2]==1?t:0;break t}Se[s[s[i>>2]+24>>2]](i,r+8|0,t,1,0);n:switch(s[r+44>>2]){case 0:o=s[r+48>>2]==1&&s[r+36>>2]==1&&s[r+40>>2]==1?s[r+28>>2]:0;break t;case 1:break n;default:break t}if(s[r+48>>2]|s[r+36>>2]!=1|s[r+40>>2]!=1&&s[r+32>>2]!=1)break t;o=s[r+24>>2]}if(T=r- -64|0,t=o,o=0,!t)break e;ie(a+8|4,52),s[a+56>>2]=1,s[a+20>>2]=-1,s[a+16>>2]=e,s[a+8>>2]=t,Se[s[s[t>>2]+28>>2]](t,a+8|0,s[n>>2],1),e=s[a+32>>2],(e|0)==1&&(s[n>>2]=s[a+24>>2]),o=(e|0)==1}return e=o,T=a- -64|0,e|0}function F(e,t,n){var r=0,o=0,a=0,i=0;if(r=e+4|0,o=(r+t|0)-1&0-t,t=s[e>>2],o+n>>>0<=(t+e|0)-4>>>0){a=s[e+4>>2],s[a+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=a,(r|0)!=(o|0)&&(o=o-r|0,a=e-(s[e-4>>2]&-2)|0,r=o+s[a>>2]|0,s[a>>2]=r,s[(a+(r&-4)|0)-4>>2]=r,e=e+o|0,t=t-o|0,s[e>>2]=t);e:{if(n+24>>>0<=t>>>0){r=(e+n|0)+8|0,t=(t-n|0)-8|0,s[r>>2]=t,s[(r+(t&-4)|0)-4>>2]=t|1,i=r,a=s[r>>2]-8|0;t:{if(a>>>0<=127){o=(a>>>3|0)-1|0;break t}if(t=h(a),o=((a>>>29-t^4)-(t<<2)|0)+110|0,a>>>0<=4095)break t;t=((a>>>30-t^2)-(t<<1)|0)+71|0,o=t>>>0<63?t:63}t=o,o=t<<4,s[i+4>>2]=o+1376,o=o+1384|0,s[r+8>>2]=s[o>>2],s[o>>2]=r,s[s[r+8>>2]+4>>2]=r,o=s[603],r=t&31,(t&63)>>>0>=32?(t=1<<r,i=0):(t=(1<<r)-1&1>>>32-r,i=1<<r),s[602]=i|s[602],s[603]=t|o,t=n+8|0,s[e>>2]=t,s[((t&-4)+e|0)-4>>2]=t;break e}s[(e+t|0)-4>>2]=t}e=e+4|0}else e=0;return e}function O(e){var t=0,n=0,r=0,o=0,a=0;if(e){n=e-4|0,o=s[n>>2],r=o,t=n,a=s[e-8>>2],e=a&-2,(e|0)!=(a|0)&&(t=n-e|0,r=s[t+4>>2],s[r+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=r,r=e+o|0),e=n+o|0,n=s[e>>2],(n|0)!=s[(e+n|0)-4>>2]&&(o=s[e+4>>2],s[o+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=o,r=r+n|0),s[t>>2]=r,s[((r&-4)+t|0)-4>>2]=r|1,a=t,r=s[t>>2]-8|0;e:{if(r>>>0<=127){e=(r>>>3|0)-1|0;break e}if(o=h(r),e=((r>>>29-o^4)-(o<<2)|0)+110|0,r>>>0<=4095)break e;e=((r>>>30-o^2)-(o<<1)|0)+71|0,e=e>>>0<63?e:63}n=e<<4,s[a+4>>2]=n+1376,n=n+1384|0,s[t+8>>2]=s[n>>2],s[n>>2]=t,s[s[t+8>>2]+4>>2]=t,n=s[603],t=e&31,(e&63)>>>0>=32?(e=1<<t,t=0):(e=(1<<t)-1&1>>>32-t,t=1<<t),s[602]=t|s[602],s[603]=e|n}}function B(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-48|0,T=r,s[r+40>>2]=e,s[r+36>>2]=t,s[r+32>>2]=n;e:{if(!(s[r+32>>2]&&s[r+36>>2])){s[r+44>>2]=5;break e}if(d[r+40>>2]>4){s[r+44>>2]=8;break e}if(s[r+28>>2]=5,o=r,i=$(s[r+28>>2]),s[o+24>>2]=i,!s[r+24>>2]){s[r+44>>2]=3;break e}s[r+20>>2]=s[r+24>>2],a[r+19|0]=3,a[s[r+20>>2]]=u[r+19|0],s[r+20>>2]=s[r+20>>2]+1,s[r+12>>2]=1,e=s[r+20>>2],t=u[r+12|0]|u[r+13|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,a[e+2|0]=u[r+14|0],s[r+20>>2]=s[r+20>>2]+3,a[r+11|0]=s[r+40>>2],a[s[r+20>>2]]=u[r+11|0],s[s[r+36>>2]>>2]=s[r+24>>2],s[s[r+32>>2]>>2]=s[r+28>>2],s[r+44>>2]=0}return T=r+48|0,s[r+44>>2]}function W(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(j(e,s[t>>2],o)){if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+32>>2]=r;t:{if(s[t+44>>2]==4)break t;if(l[t+52>>1]=0,e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,n,1,o),u[t+53|0]){if(s[t+44>>2]=3,!u[t+52|0])break t;break e}s[t+44>>2]=4}if(s[t+20>>2]=n,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2)break e;a[t+54|0]=1;return}e=s[e+8>>2],Se[s[s[e>>2]+24>>2]](e,t,n,r,o)}}function q(e,t,n,r,o){var a=0;a=T-32|0,T=a,s[a+24>>2]=e,s[a+20>>2]=t,s[a+16>>2]=n,s[a+12>>2]=r,s[a+8>>2]=o;e:{if(d[a+16>>2]<1){s[a+28>>2]=9;break e}if(s[s[a+8>>2]>>2]=s[a+16>>2]-1,d[s[a+20>>2]>>2]<d[s[a+8>>2]>>2]){s[a+28>>2]=1;break e}if(e=$(s[s[a+8>>2]>>2]),s[s[a+12>>2]>>2]=e,!s[s[a+12>>2]>>2]){s[a+28>>2]=3;break e}ae(s[s[a+12>>2]>>2],s[s[a+24>>2]>>2],s[s[a+8>>2]>>2]),e=s[a+24>>2],s[e>>2]=s[s[a+8>>2]>>2]+s[e>>2],e=s[a+20>>2],s[e>>2]=s[e>>2]-s[s[a+8>>2]>>2],s[a+28>>2]=0}return T=a+32|0,s[a+28>>2]}function U(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-32|0,T=r,l[r+26>>1]=e,s[r+20>>2]=t,s[r+16>>2]=n,s[s[r+16>>2]>>2]=3,o=r,i=$(s[s[r+16>>2]>>2]),s[o+12>>2]=i;e:{if(!s[r+12>>2]){s[r+28>>2]=3;break e}s[s[r+20>>2]>>2]=s[r+12>>2],a[r+11|0]=14,a[s[r+12>>2]]=u[r+11|0],s[r+12>>2]=s[r+12>>2]+1,e=s[r+12>>2],t=u[r+26|0]|u[r+27|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,s[r+28>>2]=0}return T=r+32|0,s[r+28>>2]}function V(e,t){var n=0;for(n=T-16|0,T=n,s[n+12>>2]=e,s[n+8>>2]=t,s[n+4>>2]=0;;){if(d[n+4>>2]<d[n+8>>2]){s[n>>2]=s[n+12>>2]+_(s[n+4>>2],20);e:{if(!(s[s[n>>2]>>2]&15)){O(s[s[n>>2]+8>>2]);break e}t:{if((s[s[n>>2]>>2]&15)==5){O(s[s[n>>2]+8>>2]);break t}(s[s[n>>2]>>2]&15)==6&&O(s[s[n>>2]+12>>2])}}s[n+4>>2]=s[n+4>>2]+1;continue}break}O(s[n+12>>2]),T=n+16|0}function H(e,t,n,r){a[e+53|0]=1;e:{if(s[e+4>>2]!=(n|0))break e;if(a[e+52|0]=1,n=s[e+16>>2],!n){if(s[e+36>>2]=1,s[e+24>>2]=r,s[e+16>>2]=t,(r|0)!=1|s[e+48>>2]!=1)break e;a[e+54|0]=1;return}if((t|0)==(n|0)){if(n=s[e+24>>2],(n|0)==2&&(s[e+24>>2]=r,n=r),s[e+48>>2]!=1|(n|0)!=1)break e;a[e+54|0]=1;return}a[e+54|0]=1,s[e+36>>2]=s[e+36>>2]+1}}function G(e,t,n,r){var o=0;o=T-32|0,s[o+24>>2]=e,s[o+20>>2]=t,s[o+16>>2]=n,s[o+12>>2]=r,a[o+11|0]=0;e:{if(d[s[o+20>>2]>>2]<1){s[o+28>>2]=1;break e}a[o+11|0]=u[s[s[o+24>>2]>>2]],e=s[o+24>>2],s[e>>2]=s[e>>2]+1,e=s[o+20>>2],s[e>>2]=s[e>>2]-1,a[s[o+16>>2]]=(u[o+11|0]&128)==128,a[s[o+12>>2]]=u[o+11|0]&127,s[o+28>>2]=0}return s[o+28>>2]}function z(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(!j(e,s[t>>2],o))break e;if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+20>>2]=n,s[t+32>>2]=r,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2||(a[t+54|0]=1),s[t+44>>2]=4}}function j(e,t,n){var r=0;if(!n)return s[e+4>>2]==s[t+4>>2];if((e|0)==(t|0))return 1;n=s[e+4>>2],e=u[n|0],t=s[t+4>>2],r=u[t|0];e:{if(!e|(r|0)!=(e|0))break e;for(;;){if(r=u[t+1|0],e=u[n+1|0],!e)break e;if(t=t+1|0,n=n+1|0,(e|0)!=(r|0))break}}return(e|0)==(r|0)}function K(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=9,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Q(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=10,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function X(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=2,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Y(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=4,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function J(e){var t=0;t=T-16|0,T=t,s[t+12>>2]=e,e=1;e:{if(ee(s[t+12>>2])&1||(e=1,s[t+12>>2]==15)||(e=1,s[t+12>>2]==13)||(e=1,s[t+12>>2]==12))break e;e=s[t+12>>2]==14}return T=t+16|0,e}function Z(e,t,n){var r=0;if(r=s[e+16>>2],!r){s[e+36>>2]=1,s[e+24>>2]=n,s[e+16>>2]=t;return}e:{if((t|0)==(r|0)){if(s[e+24>>2]!=2)break e;s[e+24>>2]=n;return}a[e+54|0]=1,s[e+24>>2]=2,s[e+36>>2]=s[e+36>>2]+1}}function ee(e){var t=0;t=T-16|0,s[t+12>>2]=e,e=1;e:{if(s[t+12>>2]==5||(e=1,s[t+12>>2]==6)||(e=1,s[t+12>>2]==7))break e;e=s[t+12>>2]==8}return e}function te(e,t,n,r,o,a){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)){H(t,n,r,o);return}e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,r,o,a)}function ne(){for(var e=0,t=0,n=0;t=e<<4,n=t+1376|0,s[t+1380>>2]=n,s[t+1384>>2]=n,e=e+1|0,(e|0)!=64;);M(48)}function re(e,t,n,r){if(e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)){Z(t,n,r);return}e=s[e+8>>2],Se[s[s[e>>2]+28>>2]](e,t,n,r)}function oe(e,t,n,r,o,a){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)&&H(t,n,r,o)}function ae(e,t,n){if(n)for(;a[e|0]=u[t|0],e=e+1|0,t=t+1|0,n=n-1|0,!!n;);}function ie(e,t){if(t)for(;a[e|0]=0,e=e+1|0,t=t-1|0,!!t;);}function le(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)&&Z(t,n,r)}function se(e,t,n){s[e+28>>2]==1|s[e+4>>2]!=(t|0)||(s[e+28>>2]=n)}function ue(e,t){return e=e|0,t=t|0,_(t,20)+e|0}function ce(e){return e=e|0,c[e+8>>1]>>>1|0}function de(e){return e=e|0,l[e+8>>1]&1}function me(e){return e=e|0,s[e+12>>2]}function pe(e){return e=e|0,s[e>>2]&15}function _e(e){return e=e|0,s[e+16>>2]}function fe(e){return e=e|0,c[e+4>>1]}function ge(e){return e=e|0,s[e+8>>2]}function he(e){return e=e|0,u[e+4|0]}function ye(e){return e=e|0,e|0}function Ce(e){return $(e)}function be(e){e=e|0,O(e)}function ve(e){e=e|0}n=u,i(t);var Se=e([null,ye,be,ve,ve,A,oe,z,le,be,te,W,re]);function Re(){return o.byteLength/65536|0}function Le(e){e=e|0;var t=Re()|0,i=t+e|0;if(t<i&&i<65536){var f=new ArrayBuffer(_(i,65536)),g=new Int8Array(f);g.set(a),a=new Int8Array(f),l=new Int16Array(f),s=new Int32Array(f),u=new Uint8Array(f),c=new Uint16Array(f),d=new Uint32Array(f),m=new Float32Array(f),p=new Float64Array(f),o=f,r.buffer=o,n=u}return t}return{c:ne,d:Ce,e:be,f:X,g:Y,h:B,i:N,j:U,k:P,l:w,m:K,n:Q,o:x,p:pe,q:he,r:ue,s:fe,t:ge,u:me,v:me,w:_e,x:ce,y:de,z:ce,A:Se}}return l(t)})(he)},instantiate:function(t,n){return{then:function(n){var e=new S.Module(t);n({instance:new S.Instance(e)})}}},RuntimeError:Error};b=[],typeof S!="object"&&ne("no native wasm support detected");var R,L=!1,E;function k(e,t){e||ne("Assertion failed: "+t)}function I(e,t){return e%t>0&&(e+=t-e%t),e}var T,D,x,$,P,N,M,w,A;function F(e){T=e,t.HEAP8=D=new Int8Array(e),t.HEAP16=$=new Int16Array(e),t.HEAP32=N=new Int32Array(e),t.HEAPU8=x=new Uint8Array(e),t.HEAPU16=P=new Uint16Array(e),t.HEAPU32=M=new Uint32Array(e),t.HEAPF32=w=new Float32Array(e),t.HEAPF64=A=new Float64Array(e)}var O=t.INITIAL_MEMORY||2097152;t.wasmMemory?R=t.wasmMemory:R=new S.Memory({initial:O/65536,maximum:32768}),R&&(T=R.buffer),O=T.byteLength,F(T);var B,W=[],q=[],U=[],V=!1;function H(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)j(t.preRun.shift());ue(W)}function G(){V=!0,ue(q)}function z(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Q(t.postRun.shift());ue(U)}function j(e){W.unshift(e)}function K(e){q.unshift(e)}function Q(e){U.unshift(e)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(t,n){var e=t>>>16,r=t&65535,o=n>>>16,a=n&65535;return r*a+(e*a+r*o<<16)|0}),!Math.fround){var X=new Float32Array(1);Math.fround=function(e){return X[0]=e,X[0]}}Math.clz32||(Math.clz32=function(e){var t=32,n=e>>16;return n&&(t-=16,e=n),n=e>>8,n&&(t-=8,e=n),n=e>>4,n&&(t-=4,e=n),n=e>>2,n&&(t-=2,e=n),n=e>>1,n?t-2:t-e}),Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)});var Y=0,J=null,Z=null;function ee(e){Y++,t.monitorRunDependencies&&t.monitorRunDependencies(Y)}function te(e){if(Y--,t.monitorRunDependencies&&t.monitorRunDependencies(Y),Y==0&&(J!==null&&(clearInterval(J),J=null),Z)){var n=Z;Z=null,n()}}t.preloadedImages={},t.preloadedAudios={};function ne(e){t.onAbort&&t.onAbort(e),e+="",C(e),L=!0,E=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new S.RuntimeError(e);throw o(n),n}var re="data:application/octet-stream;base64,";function oe(e){return e.startsWith(re)}var ae="dgwcppbridge.wasm";oe(ae)||(ae=p(ae));function ie(e){try{if(e==ae&&b)return new Uint8Array(b);var t=ge(e);if(t)return t;if(g)return g(e);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}function le(){return!b&&(c||d)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ae+"'";return e.arrayBuffer()}).catch(function(){return ie(ae)}):n.resolve().then(function(){return ie(ae)})}function se(){var e={a:he};function n(e,n){var r=e.exports;t.asm=r,B=t.asm.A,K(t.asm.c),te("wasm-instantiate")}ee("wasm-instantiate");function r(e){n(e.instance)}function a(t){return le().then(function(t){var n=S.instantiate(t,e);return n}).then(t,function(e){C("failed to asynchronously prepare wasm: "+e),ne(e)})}function i(){return!b&&typeof S.instantiateStreaming=="function"&&!oe(ae)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(t){var n=S.instantiateStreaming(t,e);return n.then(r,function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),a(r)})}):a(r)}if(t.instantiateWasm)try{var l=t.instantiateWasm(e,n);return l}catch(e){return C("Module.instantiateWasm callback failed with error: "+e),!1}return i().catch(o),{}}function ue(e){for(;e.length>0;){var n=e.shift();if(typeof n=="function"){n(t);continue}var r=n.func;typeof r=="number"?n.arg===void 0?B.get(r)():B.get(r)(n.arg):r(n.arg===void 0?null:n.arg)}}function ce(e){try{return R.grow(e-T.byteLength+65535>>>16),F(R.buffer),1}catch(e){}}function de(e){var t=x.length;e=e>>>0;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var a=Math.min(n,I(Math.max(e,o),65536)),i=ce(a);if(i)return!0}return!1}var me=!1;function pe(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r>255&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")}var _e=typeof atob=="function"?atob:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r,o,a,i,l,s,u,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=t.indexOf(e.charAt(c++)),l=t.indexOf(e.charAt(c++)),s=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),r=i<<2|l>>4,o=(l&15)<<4|s>>2,a=(s&3)<<6|u,n=n+String.fromCharCode(r),s!==64&&(n=n+String.fromCharCode(o)),u!==64&&(n=n+String.fromCharCode(a));while(c<e.length);return n};function fe(e){try{for(var t=_e(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(e){throw new Error("Converting base64 string to bytes failed.")}}function ge(e){if(oe(e))return fe(e.slice(re.length))}var he={b:de,a:R},ye=se(),Ce=t.___wasm_call_ctors=function(){return(Ce=t.___wasm_call_ctors=t.asm.c).apply(null,arguments)},be=t.__malloc=function(){return(be=t.__malloc=t.asm.d).apply(null,arguments)},ve=t.__free=function(){return(ve=t.__free=t.asm.e).apply(null,arguments)},Se=t.__DgwCodecEncodeEmpty=function(){return(Se=t.__DgwCodecEncodeEmpty=t.asm.f).apply(null,arguments)},Re=t.__DgwCodecEncodeDeauth=function(){return(Re=t.__DgwCodecEncodeDeauth=t.asm.g).apply(null,arguments)},Le=t.__DgwCodecEncodeDrain=function(){return(Le=t.__DgwCodecEncodeDrain=t.asm.h).apply(null,arguments)},Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=t.asm.i).apply(null,arguments)},ke=t.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(ke=t.__DgwCodecEncodeStreamGroup_EndOfData=t.asm.j).apply(null,arguments)},Ie=t.__DgwCodecEncodeStreamGroup_Data=function(){return(Ie=t.__DgwCodecEncodeStreamGroup_Data=t.asm.k).apply(null,arguments)},Te=t.__DgwCodecEncodeStreamGroup_Ack=function(){return(Te=t.__DgwCodecEncodeStreamGroup_Ack=t.asm.l).apply(null,arguments)},De=t.__DgwCodecEncodePing=function(){return(De=t.__DgwCodecEncodePing=t.asm.m).apply(null,arguments)},xe=t.__DgwCodecEncodePong=function(){return(xe=t.__DgwCodecEncodePong=t.asm.n).apply(null,arguments)},$e=t.__DgwCodecDecode=function(){return($e=t.__DgwCodecDecode=t.asm.o).apply(null,arguments)},Pe=t.__getFrameType=function(){return(Pe=t.__getFrameType=t.asm.p).apply(null,arguments)},Ne=t.__getDrainReasonFromDrainFrame=function(){return(Ne=t.__getDrainReasonFromDrainFrame=t.asm.q).apply(null,arguments)},Me=t.__getDGWFramePtr=function(){return(Me=t.__getDGWFramePtr=t.asm.r).apply(null,arguments)},we=t.__getStreamIdFromStreamGroupFrame=function(){return(we=t.__getStreamIdFromStreamGroupFrame=t.asm.s).apply(null,arguments)},Ae=t.__getEncodedParamsFromEstablishStreamFrame=function(){return(Ae=t.__getEncodedParamsFromEstablishStreamFrame=t.asm.t).apply(null,arguments)},Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=t.asm.u).apply(null,arguments)},Oe=t.__getDataFromGroupedStreamDataFrame=function(){return(Oe=t.__getDataFromGroupedStreamDataFrame=t.asm.v).apply(null,arguments)},Be=t.__getDataSizeFromGroupedStreamDataFrame=function(){return(Be=t.__getDataSizeFromGroupedStreamDataFrame=t.asm.w).apply(null,arguments)},We=t.__getAckIdFromGroupedStreamDataFrame=function(){return(We=t.__getAckIdFromGroupedStreamDataFrame=t.asm.x).apply(null,arguments)},qe=t.__getRequiresAckFromGroupedStreamDataFrame=function(){return(qe=t.__getRequiresAckFromGroupedStreamDataFrame=t.asm.y).apply(null,arguments)},Ue=t.__getAckIdFromGroupedStreamAckFrame=function(){return(Ue=t.__getAckIdFromGroupedStreamAckFrame=t.asm.z).apply(null,arguments)},Ve;Z=function e(){Ve||He(),Ve||(Z=e)};function He(e){if(e=e||l,Y>0||(H(),Y>0))return;function n(){Ve||(Ve=!0,t.calledRun=!0,!L&&(G(),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),z()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()}if(t.run=He,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return He(),t.ready})})();typeof i=="object"&&typeof a=="object"?a.exports=e:typeof define=="function"&&define.amd?define([],function(){return e}):typeof i=="object"&&(i.Module=e)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Promise","Random","URI","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=4;function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=o("Random").random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function d(e){var t=new TextDecoder,n=t.decode(e),o=r("Base64").encode(n),a=o.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return a}var m=null,p=null;function _(){return p==null&&(p=(s||(s=n("Promise"))).resolve().then(function(){return r("DGWCppBridge")()}).then(function(e){m=e})),p}var f=(function(){function t(){}return t.initialize=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return _()});function t(){return e.apply(this,arguments)}return t})(),t.constructConnectUrl=function(n){var t,a,i=n.appId,l=n.appVersion,s=n.authType,u=n.deviceId,c=n.dgwVersion,m=n.fbId,p=n.tier,_=n.loggingId,f=n.headers,g=n.endpoint,h=n.serviceId,y=n.regionHint,C=n.establishStreamFrame,b=n.trafficTracing,v=n.authToken,S=(t={},t[(a=o("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=i,t[a.HEADER_CONSTANTS.HEADER_APPVERSION]=l,t[a.HEADER_CONSTANTS.HEADER_AUTHTYPE]=s,t[a.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+c,t[a.HEADER_CONSTANTS.HEADER_UUID]=m,t[a.HEADER_CONSTANTS.HEADER_TARGET_TIER]=p,t);C!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=d(C)),_!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=_),y!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=y),u!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=u),b!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+b),v!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_AUTHTOKEN]=v),Object.keys(f).forEach(function(e){var t=o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+e;Object.prototype.hasOwnProperty.call(S,t)||(S[t]=f[e])});var R=new(e||(e=r("URI")))(g);return R.setQueryData(S),R.setPath(R.getPath()+"/"+h),R.toString().length>2e3&&(delete S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],R.setQueryData(S)),R.toStringRawQuery()},t})(),g=(function(){function e(e,t,n){this.$1=null,this.$2=e,this.$3=t,this.$4=n}e.initialize=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return _()});function t(){return e.apply(this,arguments)}return t})();var t=e.prototype;return t.malloc=function(t){try{var e=m.__malloc(t);if(e===0){var n;return(n=this.$2)==null||n.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0"),-1}return e}catch(e){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",r("getErrorSafe")(e).message),-1}},t.free=function(t){m.__free(t)},t.append=function(t){if(this.$1==null){this.$1=t;return}var e=this.$1.length,n=new Uint8Array(e+t.length);n.set(this.$1,0),n.set(t,e),this.$1=n},t.processData=function(){var e=this;if(this.$1!=null){var t=this.$1.length,n=this.malloc(t);if(n!==-1){var r=m.HEAPU8.subarray(n,n+t);if(this.$1)for(var a=0;a<r.length;++a)r[a]=this.$1[a];var i=this.malloc(u*4);if(i!==-1){var l=i,s=l+u,c=s+u,d=c+u,p=m.__DgwCodecDecode(n,t,l,s,c,d);if(this.free(n),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;this.free(i),(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p));return}var f=m.HEAPU32.subarray(d/u,d/u+1)[0];if(this.$1==null){this.free(i);return}var g=this.$1.length-f;if(this.$1&&this.$1.length>g){var h;this.$1=new Uint8Array(((h=this.$1)==null?void 0:h.subarray(g))||[])}else this.$1=null;for(var y=m.HEAPU32.subarray(s/u,s/u+1)[0],C=m.HEAPU32.subarray(l/u,l/u+1)[0],b=[],v=function(){var t=m.__getDGWFramePtr(C,S),n=m.__getFrameType(t);switch(n){case o("DGWConstants").DgwFrameType.DgwFrameType_Drain:{var r,a=m.__getDrainReasonFromDrainFrame(t),i=o("DGWConstants").drainReasonToDrainReasonString(a);(r=e.$2)==null||r.logEvent(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+i),b.push(function(){var t;return(t=e.$3)==null?void 0:t.receivedDrainSignal(i)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:{var l=m.__getStreamIdFromStreamGroupFrame(t),s=m.__getEncodedParamsFromEstablishStreamFrame(t),u=new Uint8Array(m.HEAPU8.subarray(s,s+m.__getEncodedParamsSizeFromEstablishStreamFrame(t)));e.free(s),b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEstablishStreamReceived(l,u)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:{var c=m.__getStreamIdFromStreamGroupFrame(t),d=m.__getDataFromGroupedStreamDataFrame(t),p=new Uint8Array(m.HEAPU8.subarray(d,d+m.__getDataSizeFromGroupedStreamDataFrame(t)));e.free(d);var _=m.__getRequiresAckFromGroupedStreamDataFrame(t)?m.__getAckIdFromGroupedStreamDataFrame(t):null;b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamDataReceived(c,p,_)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:{var f=m.__getStreamIdFromStreamGroupFrame(t),g=m.__getAckIdFromGroupedStreamAckFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamAckReceived(f,g)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:{var h=m.__getStreamIdFromStreamGroupFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEndOfDataReceived(h)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Ping:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPingReceived()});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Pong:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPongReceived()});break}default:break}e.free(t)},S=0;S<y;++S)v();this.free(i);for(var R=0;R<b.length;R++)b[R]()}}}},t.encodeData=function(t,n,r,a){var e=this.malloc(t.length);if(e===-1)return null;for(var i=m.HEAPU8.subarray(e,e+t.length),l=0;l<i.length;++l)i[l]=t[l];var s=this.malloc(u*2),c=s,d=s+u,p=m.__DgwCodecEncodeStreamGroup_Data(a,e,i.length,n,r,c,d);if(this.free(e),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;return(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p)),null}var f=m.HEAPU32.subarray(c/u,c/u+1)[0],g=m.HEAPU32.subarray(d/u,d/u+1)[0],h=new Uint8Array(m.HEAPU8.subarray(f,f+g));return this.free(f),this.free(s),h},t.encodeAck=function(t,n){var e=this.malloc(u*2);if(e===-1)return null;var r=e,a=e+u,i=m.__DgwCodecEncodeStreamGroup_Ack(n,t,r,a);if(i!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var l;return(l=this.$2)==null||l.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(i)),null}var s=m.HEAPU32.subarray(r/u,r/u+1)[0],c=m.HEAPU32.subarray(a/u,a/u+1)[0],d=new Uint8Array(m.HEAPU8.subarray(s,s+c));return this.free(s),this.free(e),d},t.encodeDrain=function(t){var e=this.malloc(u*2);if(e===-1)return null;var n=e,r=e+u,a=m.__DgwCodecEncodeDrain(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=m.HEAPU32.subarray(r/u,r/u+1)[0],c=new Uint8Array(m.HEAPU8.subarray(l,l+s));return this.free(l),this.free(e),c},t.encodeEstablishStream=function(t,n){var e=this.malloc(n.length);if(e===-1)return null;for(var r=m.HEAPU8.subarray(e,e+n.length),a=0;a<n.length;++a)r[a]=n[a];var i=this.malloc(u*2),l=i,s=i+u,c=m.__DgwCodecEncodeStreamGroup_EstabStream(t,e,n.length,l,s);if(this.free(e),c!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var d;return(d=this.$2)==null||d.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(c)+" for StreamId "+t),null}var p=m.HEAPU32.subarray(l/u,l/u+1)[0],_=m.HEAPU32.subarray(s/u,s/u+1)[0],f=new Uint8Array(m.HEAPU8.subarray(p,p+_));return this.free(p),this.free(i),f},t.encodeEndOfData=function(t){var e=this.malloc(u*2);if(e===-1)return null;var n=e,r=e+u,a=m.__DgwCodecEncodeStreamGroup_EndOfData(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=m.HEAPU32.subarray(r/u,r/u+1)[0],c=new Uint8Array(m.HEAPU8.subarray(l,l+s));return this.free(l),this.free(e),c},t.encodePing=function(){var e=this.malloc(u*2);if(e===-1)return null;var t=e,n=e+u,r=m.__DgwCodecEncodePing(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=m.HEAPU32.subarray(t/u,t/u+1)[0],l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=new Uint8Array(m.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),s},t.encodePong=function(){if(this.$5!=null)return this.$5;var e=this.malloc(u*2);if(e===-1)return null;var t=e,n=e+u,r=m.__DgwCodecEncodePong(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=m.HEAPU32.subarray(t/u,t/u+1)[0],l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=new Uint8Array(m.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),this.$5=s,s},e})();l.uuidv4=c,l.Uint8ArrayToBase64UrlStr=d,l.DGWUtils=f,l.DGWCodec=g}),98);
__d("DGWExponentialBackoff",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e,l={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},s=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.errors=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){t===void 0&&(t=l);try{return yield d(e,t)}catch(e){throw e.errors[e.errors.length-1]}}),c.apply(this,arguments)}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){for(var n=0,r=[],o=t.baseRetryInterval,a=t.backoffFactor;n<=t.maxRetries;){try{var i=yield e();return i}catch(e){r.push(e)}yield p(o*Math.pow(a,n)),++n}throw new s("Max call count exceeded",r)}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield new(e||(e=n("Promise")))(function(e){return window.setTimeout(e,t)})}),_.apply(this,arguments)}i.callWithExponentialBackoff=u}),66);
__d("DGWGlobalLogger",["gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.tabID=r("uuidv4")(),this.isTabClosed=!1,this.otherTabs=new Map,this.thisTab={realtime:0,lightspeed:0},this.broadcastChannel=this.$1("DGWGlobalLogger"),this.broadcastChannel.onmessage=function(t){var n=JSON.parse(String(t.data)),r=!e.otherTabs.has(n.key);n.event==="DELETE"?e.otherTabs.delete(n.key):n.event==="UPDATE"&&n.value!=null&&(e.otherTabs.set(n.key,n.value),r&&e.$2())}}var t=e.prototype;return t.$1=function(t){return window.BroadcastChannel!=null?new BroadcastChannel(t):{onmessage:function(t){},postMessage:function(t){}}},t.streamRequested=function(t){switch(t){case"realtime":this.thisTab.realtime++;break;case"lightspeed":this.thisTab.lightspeed++;break}this.$2()},t.streamClosed=function(t){switch(t){case"realtime":this.thisTab.realtime=Math.max(0,this.thisTab.realtime-1);break;case"lightspeed":this.thisTab.lightspeed=Math.max(0,this.thisTab.lightspeed-1);break}this.$2()},t.tabClosed=function(){if(!this.isTabClosed){this.isTabClosed=!0;var e={key:this.tabID,event:"DELETE"};this.broadcastChannel.postMessage(JSON.stringify(e))}},t.getGlobalState=function(){var e={realtime:this.thisTab.realtime,lightspeed:this.thisTab.lightspeed};return this.otherTabs.forEach(function(t){e.realtime+=t.realtime,e.lightspeed+=t.lightspeed}),e},t.$2=function(){var e={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.postMessage(JSON.stringify(e))},e})(),s=r("gkx")("4337")?new e:{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{realtime:-1,lightspeed:-1}}},u=function(){return s};l.getInstance=u}),98);
__d("DGWPinger",["DGWLoggingContext"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$4=t,this.$5=n,this.$3=!1}var t=e.prototype;return t.$6=function(){var e=this;if(this.$3){var t;(t=o("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout_fired.reset"),this.$3=!1,this.$4(),t.DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1)}else o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()},t.reset=function(){var e=this;this.$3=!0,this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null),this.$1>0&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1))},t.cancel=function(){this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)},e})();l.DGWPinger=e}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function l(t){switch(t){case e.TRANSPORT_SERVER_INTERNAL_ERROR:return"TRANSPORT_SERVER_INTERNAL_ERROR";case e.TRANSPORT_ABNORMAL_CLOSURE:return"TRANSPORT_ABNORMAL_CLOSURE";case e.TRANSPORT_GOING_AWAY:return"TRANSPORT_GOING_AWAY";case e.TRANSPORT_UNKNOWN_ERROR:return"TRANSPORT_UNKNOWN_ERROR";case e.TRANSPORT_KEEPALIVE_TIMEOUT:return"TRANSPORT_KEEPALIVE_TIMEOUT";case e.TRANSPORT_UNAUTHORIZED:return"TRANSPORT_UNAUTHORIZED";case e.TRANSPORT_REJECTED:return"TRANSPORT_REJECTED";case e.TRANSPORT_BAD_REQUEST:return"TRANSPORT_BAD_REQUEST";case e.TRANSPORT_DGW_SERVER_ERROR:return"TRANSPORT_DGW_SERVER_ERROR";case e.TRANSPORT_NORMAL_CLOSURE:return"TRANSPORT_NORMAL_CLOSURE"}}function s(t){switch(t){case e.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}var u=(function(){function e(){}var t=e.prototype;return t.onStreamGroupError=function(){},t.onStreamGroupMustDrain=function(){},t.onStreamGroupTransportClose=function(){},e})();i.DGWStreamGroupError=e,i.dgwStreamGroupErrorToString=l,i.isRetryableError=s,i.NoOpDGWStreamGroupCallbacks=u}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$3=e}var t=e.prototype;return t.transportEstablished=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",t),this.$2=Date.now(),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")},t.transportPingSent=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",t,!0)},t.transportPongReceived=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",t,!0)},t.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")},t.transportClosed=function(t,n,r){this.$4=Date.now(),t?(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",n,r))},t.transportEstablishmentFailure=function(t){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+t.code+" reason: "+t.reason+" wasClean: "+String(t.wasClean)),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")},t.streamEstablishmentTimeout=function(t,n,a){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",t,"streamId:"+n+", onLine:"+String(r("NetworkStatus").isOnline()),!1,a),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")},t.streamEstablishmentPending=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")},t.streamEstablishmentSuccess=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")},t.transportError=function(t,n,r){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,t,n,r)},t.receivedFrameForInactiveStream=function(t,n,r){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+t+", streamID: "+n,r)},t.ranOutOfStreamIds=function(t){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",t)},e})();l.DGWTransportEvents=e}),98);
__d("DGWWebSocketTransport",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=new WebSocket(e);return t.binaryType="arraybuffer",t.onopen=function(){},t.onclose=function(){},t.onerror=function(){},t}i.getWebSocketConnection=e}),66);
__d("DGWStreamEvents",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$4=new Map,this.$5=new Map,this.$6=e,this.$1=t,n!=null&&(this.$8="streamId:"+n+"::")}var t=e.prototype;return t.dataSent=function(t,n,r){var e,o=n?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,o,((e=this.$8)!=null?e:"")+"sendId:"+r+", payloadSize:"+t,!0),this.$4.set(r,{ackRequested:n,payloadSize:t,sendTimestamp:Date.now()})},t.ackReceived=function(t){var e;this.$6.logEvent(this.$1,"AckReceived",((e=this.$8)!=null?e:"")+"sendId:"+t,!0),this.$6.bumpODSKey(this.$1,"ack_received");var n=this.$4.get(t);n!=null&&(n.ackReceivedTimestamp=Date.now())},t.ackSent=function(t){var e;this.$6.bumpODSKey(this.$1,"ack_sent"),this.$6.logEvent(this.$1,"ACK sent",((e=this.$8)!=null?e:"")+"ackId:"+t,!0)},t.drainSent=function(t){var e;this.$6.logEvent(this.$1,"Drain sent",((e=this.$8)!=null?e:"")+"drainReason: "+t)},t.dataReceived=function(t,n,r){var e;this.$6.bumpODSKey(this.$1,"data_received"),this.$6.logEvent(this.$1,"Data received",((e=this.$8)!=null?e:"")+"sendId:"+(r!=null?r:"null")+", ackRequested:"+n.toString()+", payloadSize:"+t,!0),r!=null&&this.$5.set(r,{ackRequested:n,payloadSize:t,receiveTimestamp:Date.now()})},t.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)},t.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)},t.streamClosed=function(t,n){this.$7=Date.now();var e=this.$9();if(t){var r;this.$6.bumpODSKey(this.$1,"stream_closed_gracefully"),this.$6.logEvent(this.$1,"Stream closed gracefully",""+((r=this.$8)!=null?r:"")+e)}else{var o;this.$6.bumpODSKey(this.$1,"stream_closed_with_error"),this.$6.logError(this.$1,"Stream closed abnormally",n,""+((o=this.$8)!=null?o:"")+e)}},t.connectionEstablishmentFailure=function(t){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+t)},t.streamEstablishmentFailure=function(t,n){var e;this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+t.toString(),""+((e=this.$8)!=null?e:"")+n),this.$6.bumpODSKey(this.$1,"stream_establishment_failure")},t.error=function(t,n){var e={msg:n,state:this.$9()};this.$6.logError(this.$1,t,JSON.stringify(e),this.$8)},t.$9=function(){var e={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(e)},e})();i.DGWStreamEvents=e}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","Promise","QuickPerformanceLogger","Random","asyncToGeneratorRuntime","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("qpl")._(701242292,"2919"),c=(function(){function t(e,t,n,a,i,l,c){this.$1=e,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=t,this.$7=n,this.$8=a,this.$2=l,this.$9=i,this.$10=new(o("DGWAckManager")).DGWAckManager(this.$9),this.$12=new(o("DGWStreamEvents")).DGWStreamEvents(this.$9,o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=c,this.$14=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),(s||(s=r("QuickPerformanceLogger"))).markerStart(u,this.$14)}var a=t.prototype;return a.send=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=this.$11++%o("DGWConstants").MAX_ACK_ID,r=this.$15(e,!0,n);if(!this.$16(r,!0,n))return!1;var a=yield this.$10.waitForAck(n,t!=null?t:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return a});function t(t,n){return e.apply(this,arguments)}return t})(),a.sendFrame=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a){var i=this.$11++%o("DGWConstants").MAX_ACK_ID,l=this.$15(r,!0,i);if(l==null)return!1;var s=new Uint8Array(t.length+l.length);if(s.set(t),s.set(l,t.length),!this.$16(s,!0,i))return!1;var u=yield this.$10.waitForAck(i,a!=null?a:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return this.__markerPoint(u?"ack_recevied":"ack_timeout"),u||(this.__endMarker(3),(e||(e=n("Promise"))).reject(o("DGWStream").StreamError.ACK_TIMEOUT))});function r(e,n,r){return t.apply(this,arguments)}return r})(),a.sendAndForget=function(t){var e=this.$15(t,!1,0);return this.$16(e,!1,0)},a.sendFrameAndForget=function(t,n){var e=this.$15(n,!1,0);if(e==null)return!1;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),this.$16(r,!1,0)},a.close=function(){var e=this.$2.encodeEndOfData(this.$1);if(e==null){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}var t=this.$8.send(e);if(!t){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent(),this.$5=!0,this.$4&&this.$17()},a.loggingContext=function(){return this.$9},a.__sendDrain=function(t){var e=o("DGWConstants").drainReasonToDrainReasonString(t);if(this.$5)return!1;var n=this.$2.encodeDrain(t);if(n==null)return!1;this.$12.drainSent(e);var r=this.$8.send(n);return r},a.__transportCloseHook=function(t){this.$13(),this.$10.clearPendingAcks(),t?(this.$12.error("Received StreamError","StreamErrorType: "+t),this.$6.onError(t)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(o("DGWStream").StreamError.PREMATURE_CLOSE))},a.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)},a.__dataReceivedHook=function(t,n){this.$12.dataReceived(t.length,n!=null,n),n!=null&&this.$18(n),this.$6.onDataReceived(t)},a.__ackReceivedHook=function(t){this.$12.ackReceived(t),this.$10.handleAckReceived(t)},a.__drainReceivedHook=function(t){this.$3===!1&&(this.$6.onStreamMustDrain(this,t),this.$3=!0)},a.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)},a.__markerPoint=function(t){var e=this.$14;(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,t,{instanceKey:e})},a.__markerAnnotate=function(t){var e=this.$14;(s||(s=r("QuickPerformanceLogger"))).markerAnnotate(u,t,{instanceKey:e})},a.__endMarker=function(t){(s||(s=r("QuickPerformanceLogger"))).markerEnd(u,t,this.$14)},a.$15=function(t,n,r){return this.$2.encodeData(t,n,r,this.$1)},a.$16=function(t,n,r){if(this.__markerPoint("send_data_start"),this.$5)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally"),!1;if(t==null)return!1;var e=this.$8.send(t);return e?(this.__markerPoint("send_data_end"),this.$12.dataSent(t.length,n,r),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString()),!1)},a.$18=function(t){var e=this.$2.encodeAck(t,this.$1);if(e==null)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+t),!1;var n=this.$8.send(e);return n?(this.$12.ackSent(t),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+t),!1)},t})();l.GroupedStream=c}),98);
__d("StreamIdGenerator",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=65535,s=(function(){function t(){this.$1=new Set,this.$2=0}var n=t.prototype;return n.getNextStreamId=function(){var t;if(!this.streamIdAvailable())throw r("err")("Max number of stream IDs reached");if(this.$2<=e)return this.$2++;var n=(t=this.$1.values().next().value)!=null?t:0;return this.$1.delete(n),n},n.putBackStreamId=function(t){this.$1.add(t)},n.streamIdAvailable=function(){return this.$1.size>0||this.$2<=e},t})();l.MAX_STREAM_ID=e,l.StreamIdGeneratorImpl=s}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWGlobalLogger","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","Promise","QuickPerformanceLogger","Random","Run","StreamIdGenerator","asyncToGeneratorRuntime","err","getErrorSafe","qex","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=r("qpl")._(701238781,"3037"),d=(e=r("qex")._("2103"))!=null?e:!1,m=function(t,n,r,a,i){var e=this;this.groupedStream=t,this.$1=window.setTimeout(function(){r(o("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},a),this.handleEstablishFrameReceived=function(){window.clearTimeout(e.$1),n(e.groupedStream)},this.abortStream=function(e){i(),r(e)}},p=(function(){function e(t,n,a,i,l,s,d,m){var p=this,_;this.$18=-1,this.$15=l,this.$17=this.__getStreamIdGenerator(),this.$5=new Map,this.$6=new Map,this.$7=i.keepAliveMs,this.$8=!1,this.$9=!1,this.$3=!0,this.$4=!1,this.$21=!1,this.$22=!1,this.$13=a,this.$11=new TextEncoder,this.$12=new TextDecoder,this.$14=i;var f={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(t){p.$9||(p.$9=!0,p.$15(),p.$13.transportClosed(!0,""),p.$14.streamGroupCallbacks.onStreamGroupMustDrain(t),p.$5.forEach(function(e){e.__drainReceivedHook(t)}),p.onClose(o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(t,n,r){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__dataReceivedHook(n,r)}else p.$13.receivedFrameForInactiveStream("Data",t,"sendAckID: "+(r!=null?r:"null"))},onGroupedStreamAckReceived:function(t,n){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__ackReceivedHook(n)}else p.$13.receivedFrameForInactiveStream("ACK",t,"ackId: "+(n!=null?n:"null"))},onGroupedStreamEndOfDataReceived:function(t){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__endOfDataHook()}else p.$13.receivedFrameForInactiveStream("EndOfData",t)},onGroupedStreamEstablishStreamReceived:function(t,n){if(p.$6.has(t)){var e=p.$6.get(t);p.$6.delete(t);var r=JSON.parse(p.$12.decode(n));(r.code===void 0||r.code!==200)&&(e==null||e.abortStream(o("DGWStream").StreamError.ABNORMAL_CLOSURE)),e==null||e.handleEstablishFrameReceived()}else p.$13.receivedFrameForInactiveStream("EstablishStream",t,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var e=p.$2.encodePing();e!=null&&p.send(e)},onPongReceived:function(){p.$3=!1,p.$22||(p.$22=!0,p.__markerPoint("auth_success")),p.$13.transportPongReceived("readyState:"+p.$1.readyState+", bufferedAmount:"+p.$1.bufferedAmount)}};this.$2=new(o("DGWUtils")).DGWCodec(s,f,i.dgwVersion),this.$20=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),this.$23=o("DGWGlobalLogger").getInstance(),this.$24=(_=i.connectTimeoutMs)!=null?_:2e4;var g=o("Run").onUnload(function(){p.$23.tabClosed()});if(i.enableFirstStreamOnWsHandshake){var h,y,C,b;if(d===void 0)throw r("err")("Missing grouped stream options");if(m===void 0)throw r("err")("Missing grouped stream callbacks");var v=this.$17.getNextStreamId(),S=this.createEstablishStreamFrame(v,d),R=o("DGWUtils").DGWUtils.constructConnectUrl({appId:i.appId,appVersion:i.appVersion,authType:i.authType,deviceId:(h=i.deviceId)!=null?h:void 0,dgwVersion:i.dgwVersion,fbId:i.fbId,tier:i.tier,loggingId:(y=i.loggingId)!=null?y:void 0,headers:e.__prefixAppHeaders(i.headers),endpoint:i.connectEndpoint,serviceId:i.serviceId,regionHint:(C=i.regionHint)!=null?C:void 0,establishStreamFrame:S,authToken:(b=i.authToken)!=null?b:void 0});if(this.$1=n(R),!R.includes(o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;var L=new(o("DGWLoggingContext")).DGWLoggingContext(this.$14.dgwVersion,d.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,d.disableFalcoLogging),E=this.__createGroupedStream(v,m,d,L);this.$16=this.waitForEstablishStream(v,E,d,function(e){p.$5.set(v,e)},function(){p.$17.putBackStreamId(v)})}else this.$1=n(t);this.$23.streamRequested(i.serviceId),(u||(u=r("QuickPerformanceLogger"))).markerStart(c,this.$20),this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var t=e.prototype;return t.send=function(t){try{return this.$1.send(t),!0}catch(e){return this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,r("getErrorSafe")(e).message),!1}},t.close=function(){var e;this.$23.streamClosed(this.$14.serviceId),this.__markerPoint("teardown"),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.onopen=function(e){},this.$1.onmessage=function(e){},this.$1.onerror=function(e){},this.$1.onclose=function(e){},this.$1.close()},t.onClose=function(t){var e;this.$23.streamClosed(this.$14.serviceId),this.__markerPoint("abort"),this.__markerAnnotate({int:{abort_code:t}}),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.close(t)},t.abort=function(t,n,r,o,a){this.$8||(this.$23.streamClosed(this.$14.serviceId),this.$8=!0,this.$13.transportClosed(!1,o,a),this.$5.forEach(function(e){e.__transportCloseHook(n)}),this.$6.forEach(function(e){e.abortStream(n)}),this.$14.streamGroupCallbacks.onStreamGroupError(t),this.$5.clear(),this.$6.clear(),this.$15(),this.onClose(r))},e.getTransportWithInitialStream=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l){yield o("DGWUtils").DGWCodec.initialize();var s=new(o("DGWTransportEvents")).DGWTransportEvents(a);s.transportEstablishmentPending();var u=function(){return e.$25("",r,s,i,a,t,n)};try{var c=yield o("DGWExponentialBackoff").callWithExponentialBackoff(u,l),d=c.$16!=null?c.$16:c.establishGroupedStream(n,t,new(o("DGWLoggingContext")).DGWLoggingContext(r.dgwVersion,t.loggingId,r.serviceId,r.fbId,r.loggingId,t.disableFalcoLogging));return{transport:c,streamPromise:d}}catch(e){throw e}});function r(e,n,r,o,a,i){return t.apply(this,arguments)}return r})(),e.getTransport_DEPRECATED=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i){yield o("DGWUtils").DGWCodec.initialize();var l=new(o("DGWTransportEvents")).DGWTransportEvents(r);l.transportEstablishmentPending();var s=function(){return e.$25(t,n,l,a,r)};try{return yield o("DGWExponentialBackoff").callWithExponentialBackoff(s,i)}catch(e){throw e}});function r(e,n,r,o,a){return t.apply(this,arguments)}return r})(),t.establishGroupedStream=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,o,a,i,l){var u=this;i===void 0&&(i=!0);var c=this.getStreamId(),d=this.createEstablishStreamFrame(c,t),m=this.__createGroupedStream(c,e,t,o);m.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:t.streamTraceId}}),l!=null&&m.__markerAnnotate(l);var p=this.waitForEstablishStream(c,m,t,function(e){u.$5.set(c,e)},function(){u.$17.putBackStreamId(c)});if(a!=null){var _;m.__markerPoint("send_payload_start"),m.__markerAnnotate({int:{establishStreamPayloadSize:a.byteLength}});var f=(_=t.ackTimeoutMs)!=null?_:3e4,g=i?yield m.sendFrame(d,a,f):m.sendFrameAndForget(d,a);return g?(m.__markerPoint("send_payload_end"),m.__endMarker(2),(s||(s=n("Promise"))).resolve(m)):(m.__endMarker(3),(s||(s=n("Promise"))).reject("Failed to send data when establishing stream"))}if(m.__markerPoint("send_establish_stream_start"),!this.send(d))throw m.__endMarker(3),r("err")("Websocket connection closed before stream established");m.__markerPoint("send_establish_stream_end");var h=yield p;return m.__endMarker(2),h});function t(t,n,r,o,a,i){return e.apply(this,arguments)}return t})(),e.__prefixAppHeaders=function(t){return Object.keys(t).reduce(function(e,n){return e[""+o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+n]=t[n],e},{})},t.waitForEstablishStream=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,o,a){var i=this;this.$13.streamEstablishmentPending(e,r.loggingId);try{var l=yield new(s||(s=n("Promise")))(function(n,r){i.$6.set(e,new m(t,n,r,3e4,function(){i.streamEndCallback(e)}))});return o(t),this.$13.streamEstablishmentSuccess(e,r.loggingId),l}catch(t){throw a(),this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,e,r.loggingId),t}});function t(t,n,r,o,a){return e.apply(this,arguments)}return t})(),e.$25=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l,s){var u=new e(t,o("DGWWebSocketTransport").getWebSocketConnection,r,n,a,i,l,s);u.$1.onmessage=e.$26(u),u.$1.onopen=function(){u.__markerPoint("onopen"),r.transportEstablished(t),u.$10!=null&&u.$10.cancel(),u.$7!=null&&(u.$10=new(o("DGWPinger")).DGWPinger(u.$7,function(){u.$27()},function(){u.abort(o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,o("DGWStream").StreamError.KEEPALIVE_TIMEOUT,o("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+u.$1.readyState+", bufferedAmount:"+u.$1.bufferedAmount)}))},u.$1.onerror=function(){u.__markerPoint("onerror"),u.$13.transportError("onerror","readyState: "+u.$1.readyState)},u.$1.onclose=e.$28(u);var c=yield e.getTransportPromise(u);return c});function r(e,n,r,o,a,i,l){return t.apply(this,arguments)}return r})(),e.getTransportPromise=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield new(s||(s=n("Promise")))(function(t,n){var r=e.$1.onerror,a=e.$1.onmessage,i=e.$1.onclose;e.$19=window.setTimeout(function(){e.$15(),e.$13.transportClosed(!1,"TIMEOUT"),e.__markerPoint("connect_timeout"),e.close(),n(o("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},e.$24),e.$1.onerror=function(){e.$19!=null&&(window.clearTimeout(e.$19),e.$19=null),r(),e.close(),d||n(o("DGWStream").StreamError.ESTABLISHMENT_ERROR)},e.$1.onclose=function(t){e.$19!=null&&(window.clearTimeout(e.$19),e.$19=null),i(t),t.code===o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?n(o("DGWStream").StreamError.UNAUTHORIZED):n(t.code+":"+t.reason)},e.$1.onmessage=function(n){a(n),e.$19!=null&&!e.$3&&(window.clearTimeout(e.$19),e.$19=null,e.__markerPoint("connect_success"),t(e))}});return t});function t(t){return e.apply(this,arguments)}return t})(),e.$26=function(t){return function(e){var n;if(t.$21||(t.$21=!0,t.__markerPoint("onmessage")),(n=t.$10)==null||n.reset(),!(e.data instanceof ArrayBuffer)){t.$13.transportError("Incorrect Data Protocol","Received "+typeof e.data+" instead of ArrayBuffer");return}t.$2.append(new Uint8Array(e.data)),t.$2.processData()}},e.$28=function(t){return function(e){var n,r=t.$23.getGlobalState();if(t.__markerPoint("onclose"),t.__markerAnnotate({string:{reason:e.reason},int:{code:e.code,realtimeWebSockets:r.realtime,lightspeedWebSockets:r.lightspeed}}),t.__endMarker(e.code===o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3),(n=t.$10)==null||n.cancel(),!(t.$8===!0||t.$4)){if(t.$23.streamClosed(t.$14.serviceId),t.$8=!0,t.$3===!0){t.$13.transportEstablishmentFailure(e),t.$5.clear(),t.$15();return}if(t.$15(),t.$3=!0,e.code!==o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){t.$13.transportClosed(!1,"Websocket connection failure with code: "+e.code+" reason: "+e.reason+" wasClean: "+String(e.wasClean));var a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;switch(e.code){case o("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case o("DGWConstants").WebsocketCloseCodes.GOING_AWAY:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY,i=o("DGWStream").StreamError.GOING_AWAY;break;case o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED,i=o("DGWStream").StreamError.UNAUTHORIZED;break;case o("DGWConstants").WebsocketCloseCodes.REJECTED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED,i=o("DGWStream").StreamError.REJECTED;break;case o("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST,i=o("DGWStream").StreamError.BAD_REQUEST;break;case o("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.DGW_SERVER_ERROR,a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;break}t.$14.streamGroupCallbacks.onStreamGroupError(a),t.$5.forEach(function(e){e.__transportCloseHook(i)}),t.$6.forEach(function(e){e.abortStream(i)})}else t.$13.transportClosed(!0,""),t.$14.streamGroupCallbacks.onStreamGroupTransportClose(),t.$5.forEach(function(e){e.__transportCloseHook()}),t.$6.forEach(function(e){e.abortStream(o("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});t.$5.clear(),t.$6.clear()}}},t.$27=function(){var e=this.$2.encodePing();if(e==null)throw r("err")("Failed to encode Ping Frame");var t=this.send(e);this.$18=this.$1.bufferedAmount,this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(e==null?void 0:e.byteLength)+", sent:"+String(t))},t.isClosedLocally=function(){return this.$3||this.$8||this.$4},t.streamEndCallback=function(t){this.$5.delete(t),this.$6.delete(t),this.$17.putBackStreamId(t)},t.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()},t.createEstablishStreamFrame=function(n,a){var t=e.__prefixAppHeaders(a.groupedStreamHeaders);a.streamTraceId!=null&&(t[o("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=a.streamTraceId);var i=this.$2.encodeEstablishStream(n,new Uint8Array(this.$11.encode(JSON.stringify(t))));if(i==null)throw this.$17.putBackStreamId(n),r("err")("Failed to encode EstablishStreamFrame");return i},t.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(e){throw this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size),e}},t.__createGroupedStream=function(t,n,r,a){var e=this;return new(o("GroupedStream")).GroupedStream(t,n,r,this,a,this.$2,function(){e.streamEndCallback(t)})},t.__getStreamIdGenerator=function(){return new(o("StreamIdGenerator")).StreamIdGeneratorImpl},t.__markerPoint=function(t){var e=this.$20;(u||(u=r("QuickPerformanceLogger"))).markerPoint(c,t,{instanceKey:e})},t.__markerAnnotate=function(t){var e=this.$20;(u||(u=r("QuickPerformanceLogger"))).markerAnnotate(c,t,{instanceKey:e})},t.__endMarker=function(t){(u||(u=r("QuickPerformanceLogger"))).markerEnd(c,t,this.$20)},e})();l.StreamGroupWebSocketTransport=p}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e={maxRetries:r("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},s=(function(){function t(e,t,n,r,a,i,l,s,u){var c,d,m,p,_,f,g,h,y;this.$2=u,this.$1=u.getNewStreamGroupId();var C=(c=l.overrideUrl)!=null?c:a;this.$5=null,this.$3={appId:e,appVersion:t,authType:(d=l.authType)!=null?d:n,deviceId:l.deviceId,dgwVersion:r,headers:l.streamGroupAppHeaders,tier:(m=l.serviceTier)!=null?m:o("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:C,fbId:i,loggingId:l.loggingId,serviceId:l.serviceId,streamGroupCallbacks:s,keepAliveMs:l.keepAliveMs,regionHint:l.regionHint,enableFirstStreamOnWsHandshake:!1,authToken:l.authToken,connectTimeoutMs:l.connectTimeoutMs},this.$4=l,this.streamGroupLoggingContext=new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(p=l.verboseLoggingEnabled)!=null?p:!1),this.$6=o("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(_=this.$3.deviceId)!=null?_:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers.extends({},this.$3.headers),loggingId:(f=this.$3.loggingId)!=null?f:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(g=this.$3.regionHint)!=null?g:void 0,trafficTracing:(h=this.$4.trafficTracing)!=null?h:void 0,authToken:(y=this.$4.authToken)!=null?y:void 0})}var r=t.prototype;return r.initTransport=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this,t={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){e.$2.removeStreamGroupAndTransport(e.$1)},t);var n;try{n=yield this.$5,this.$5=null}catch(e){throw this.$5=null,e}return this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,n),n});function t(){return e.apply(this,arguments)}return t})(),r.establishStream=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i){var l=this;if(this.$2.containsStreamGroup(this.$1)===!1)if(this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream"),this.$3.enableFirstStreamOnWsHandshake){var u=yield o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(t,n,this.$3,this.streamGroupLoggingContext,function(){l.$2.removeStreamGroupAndTransport(l.$1)},e);return this.$2.setStreamGroupAndTransport(this.$1,u.transport),u.streamPromise}else{this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){l.$2.removeStreamGroupAndTransport(l.$1)},e);var s;try{s=yield this.$5,this.$5=null}catch(e){throw this.$5=null,e}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,s)}return this.establishStreamWithTransport(t,n,r,a,i)});function r(e,n,r,o,a){return t.apply(this,arguments)}return r})(),r.establishStreamWithTransport=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a){var i,l=e.loggingId;this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(n!=null),!0,l);var s=yield this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(t,e,new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,l,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,e.disableFalcoLogging,(i=e.verboseLoggingEnabled)!=null?i:!1),n,r,a);return s});function t(t,n,r,o,a){return e.apply(this,arguments)}return t})(),r.canCreateGroupedStream=function(){var e=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var t=this.$2.getStreamGroupTransport(this.$1);e=t.canCreateGroupedStream()}return o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,e?"can_create":"cannot_create"),e},r.close=function(){if(this.$2.containsStreamGroup(this.$1)){var e=this.$2.getStreamGroupTransport(this.$1);e.close()}},t})();l.StreamGroup=s}),98);
__d("StreamGroupRegistry",["Random","err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Map,this.$2=new Set}var t=e.prototype;return t.setStreamGroupAndTransport=function(t,n){this.$1.set(t,n)},t.containsStreamGroup=function(t){return this.$1.has(t)},t.removeStreamGroupAndTransport=function(t){this.$1.delete(t)},t.getStreamGroupTransport=function(t){var e=this.$1.get(t);if(e==null)throw r("err")("No stream group transport");return e},t.getNewStreamGroupId=function(){for(var e=o("Random").uint32();this.$2.has(e);)e=o("Random").uint32();return this.$2.add(e),e},e})();l.StreamGroupRegistry=e}),98);
__d("RawDGWClient",["CurrentUser","DGWAuth","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.appId,n=e.appVersion,r=e.authType,a=e.dgwVersion,i=e.endpoint,l=e.fbId,s=e.authToken;this.$1=t,this.$2=n,this.$3=r,this.$5=a,this.$6=i,this.$7=l,this.$8=new(o("StreamGroupRegistry")).StreamGroupRegistry,this.$4=s}var t=e.prototype;return t.createStreamGroup=function(t,n){var e,r;this.handleUserChecks((e=n.authType)!=null?e:this.$3);var a=(r=n.authToken)!=null?r:this.$4;return a!=null&&this.$3===o("DGWAuth").DGWAuth.GUEST&&(n.authToken=a),new(o("StreamGroup")).StreamGroup(this.$1,this.$2,this.$3,this.$5,this.$6,this.$7,n,t,this.$8)},t.handleUserChecks=function(t){if(!r("CurrentUser").isLoggedInNow()&&o("DGWAuth").fromDGWAuthToString(t)!=="GUEST"&&!r("isFastRefreshEnabledForCurrentDomain")())throw o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated"),o("DGWStream").StreamError.UNAUTHENTICATED},e})();l.RawDGWClient=e}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("RawDGWClient")).RawDGWClient({appId:r("DGWWebConfig").appId,appVersion:r("DGWWebConfig").appVersion,authType:o("DGWAuth").fromStringToDGWAuth((e=r("DGWEnvUtil")).getDGWAuthType()),dgwVersion:e.getDGWVersion(),endpoint:e.getDGWEndpoint(),fbId:r("DGWWebConfig").fbId,authToken:e.getDGWAuthToken()});function u(){if(r("DGWEnvUtil").isDGWEnvCompatible())return s;throw r("err")("unsupported_environment_retry_with_mqtt")}l.default=u}),98);
__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,o,a){var i={};for(var l of Object.entries(e)){var s=l[0],u=l[1];typeof u=="string"?i["XRSS-"+s]=u:typeof u=="number"?i["XRSN-"+s]=u.toString():typeof u=="boolean"?i["XRSB-"+s]=u.toString():typeof u=="object"&&u!=null&&(i["XRSO-"+s]=r("Base64").encode(JSON.stringify(u)))}if(t&&(i["xrs-body"]="true"),o!=null&&o.length>0&&(i["xrs-instrumentation"]=r("Base64").encode(o)),i["XRS-Accept-Ack"]="RSAck",a!=null&&a.ackTimeoutSec!=null&&(i["XRS-SRAck-Timeout"]=a.ackTimeoutSec.toString()),i["XRSS-http_referer"]=window.location.href,r("WebDriverConfig").isTestRunning&&r("gkx")("20919")){var c=n("cr:3024")==null?void 0:n("cr:3024").get();c!=null&&(i["XRSB-is_test"]="true",i["XRSS-original_request_id"]=c)}return i}function s(e){return Object.keys(e).reduce(function(t,n){return(typeof e[n]=="string"||typeof e[n]=="boolean"||typeof e[n]=="number"||typeof e[n]=="object")&&(t[n]=e[n]),t},{})}function u(e){if(e.response&&e.response.instrumentation_data!=null&&e.response.instrumentation_data.length>0)try{var t,n=JSON.parse(new TextDecoder("utf-8").decode(e.response.instrumentation_data));return{auxId:n.auxId,dfTraceId:(t=n.dataFlowTracingData)==null?void 0:t.traceId}}catch(e){}return null}function c(e,t){var n=e.headers,r=e.body;if(t.kill_body===!0&&(r=null),t.new_body!=null&&(r=t.new_body),t.new_headers!=null)try{n=s(JSON.parse(t.new_headers))}catch(e){}if(t.patch_headers!=null)try{n=babelHelpers.extends({},n,s(JSON.parse(t.patch_headers)))}catch(e){}return{headers:n,body:r}}l.convertHeaders=e,l.cleanHeaders=s,l.getInstrumentationDataFieldsFromPayload=u,l.transformContextWithRewriteDelta=c}),98);
__d("DGWStreamHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n,r,o){this.$2=e,this.$3=t,this.$4=n,this.$5=r,this.$6=o,this.$1=!0}var t=e.prototype;return t.onClose=function(t){this.$1&&this.$2(t)},t.onDataReceived=function(t){this.$1&&this.$3(t)},t.onError=function(t){this.$1&&this.$4(t)},t.onStreamMustDrain=function(t,n){this.$1&&this.$5(t,n)},t.onServerHasFinishedSendingData=function(t){this.$1&&this.$6(t)},t.stop=function(){this.$1=!1},t.isStopped=function(){return!this.$1},e})();i.default=e}),66);
__d("InflightAmends",["Deferred","err"],(function(t,n,r,o,a,i,l){"use strict";var e="inflight_amends_timeout",s="inflight_amends_duplicate_id",u=(function(){function t(e,t,n){this.$1=e,this.$3=t,this.$4=n,this.$2=new Map}var n=t.prototype;return n.add=function(n){var t=this;if(this.$2.has(n))throw r("err")(s);var o=new(r("Deferred")),a=Date.now(),i=setTimeout(function(){t.$2.has(n)&&t.reject(n,r("err")(e))},this.$1);return this.$2.set(n,{id:n,deferred:o,createdTimestampMs:a,timeoutId:i}),o.getPromise()},n.getPromise=function(t){var e;return(e=this.$5(t))==null?void 0:e.deferred.getPromise()},n.resolve=function(t,n){var e=this.$5(t);e&&(e.deferred.resolve==null||e.deferred.resolve(n),this.$3(e.id,Date.now()-e.createdTimestampMs),this.$6(e))},n.reject=function(t,n){var e=this.$5(t);e&&(e.deferred.reject==null||e.deferred.reject(n),this.$4(e.id,n),this.$6(e))},n.rejectAll=function(t){for(var e of this.$2.entries()){var n=e[0],r=e[1];this.reject(n,t)}},n.getSize=function(){return this.$2.size},n.getAllPromises=function(){var e=[];for(var t of this.$2.values())e.push(t.deferred.getPromise());return e},n.$6=function(t){clearTimeout(t.timeoutId),this.$2.delete(t.id)},n.$5=function(t){return this.$2.get(t)},t})();l.default=u}),98);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]);i.RequestStreamCloseReason=e}),66);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{expected_existing_headers:"",patch_headers_if_match:""}}function c(){return{bytes:Uint8Array.of()}}function d(){return{message:""}}function m(){return{reason:o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function p(){return{}}function _(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function f(){return{caller_timestamp_ms:"0"}}function g(){return{original_ping_timestamp_ms:"0"}}function h(){return{}}function y(t,n){n.writeStructBegin("ResponseRewriteRequest"),t.new_headers!=null&&(n.writeFieldBegin({fname:"new_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.new_headers),n.writeFieldEnd()),t.new_body!=null&&(n.writeFieldBegin({fname:"new_body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.new_body),n.writeFieldEnd()),t.patch_headers!=null&&(n.writeFieldBegin({fname:"patch_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.patch_headers),n.writeFieldEnd()),t.kill_body!=null&&(n.writeFieldBegin({fname:"kill_body",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:4}),n.writeBool(t.kill_body),n.writeFieldEnd()),t.temporary!=null&&(n.writeFieldBegin({fname:"temporary",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:5}),n.writeBool(t.temporary),n.writeFieldEnd()),t.conditional_patch_headers!=null&&(n.writeFieldBegin({fname:"conditional_patch_headers",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),C(t.conditional_patch_headers,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("ResponseRewriteConditionalPatchHeaders"),n.writeFieldBegin({fname:"expected_existing_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.expected_existing_headers!=null)n.writeString(t.expected_existing_headers);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"patch_headers_if_match",ftype:e.STRING,fid:2}),t.patch_headers_if_match!=null)n.writeString(t.patch_headers_if_match);else{var a="";n.writeString(a)}n.writeFieldEnd(),t.patch_headers_otherwise!=null&&(n.writeFieldBegin({fname:"patch_headers_otherwise",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.patch_headers_otherwise),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function b(t,n){if(n.writeStructBegin("ResponseData"),n.writeFieldBegin({fname:"bytes",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.bytes!=null)n.writeBinary(t.bytes);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.metadata!=null&&(n.writeFieldBegin({fname:"metadata",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.metadata),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function v(t,n){if(n.writeStructBegin("LogMessage"),n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.message!=null)n.writeString(t.message);else{var o="";n.writeString(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function S(t,n){if(n.writeStructBegin("Termination"),n.writeFieldBegin({fname:"reason",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.reason!=null){var a;n.writeI32((a=t.reason)!=null?a:0)}else{var i=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.message!=null&&(n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.message),n.writeFieldEnd()),t.retry_delay_ms!=null&&(n.writeFieldBegin({fname:"retry_delay_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(r("jsbi").BigInt(t.retry_delay_ms)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function R(t,n){n.writeStructBegin("AmendStreamAck"),t.amendment_id!=null&&(n.writeFieldBegin({fname:"amendment_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.amendment_id)),n.writeFieldEnd()),t.accepted!=null&&(n.writeFieldBegin({fname:"accepted",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:2}),n.writeBool(t.accepted),n.writeFieldEnd()),t.result!=null&&(n.writeFieldBegin({fname:"result",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function L(t,n){if(n.writeStructBegin("StreamCheck"),n.writeFieldBegin({fname:"stream_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.stream_id!=null)n.writeI64(r("jsbi").BigInt(t.stream_id));else{var a="0";n.writeI64(r("jsbi").BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"last_sequencer",ftype:e.I32,fid:2}),t.last_sequencer!=null)n.writeI32(t.last_sequencer);else{var i=0;n.writeI32(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"amendment_count",ftype:e.I32,fid:4}),t.amendment_count!=null)n.writeI32(t.amendment_count);else{var l=0;n.writeI32(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"last_status",ftype:e.I32,fid:3}),t.last_status!=null){var s;n.writeI32((s=t.last_status)!=null?s:0)}else{var u=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);n.writeI32(u!=null?u:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function E(t,n){if(n.writeStructBegin("Ping"),n.writeFieldBegin({fname:"caller_timestamp_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.caller_timestamp_ms!=null)n.writeI64(r("jsbi").BigInt(t.caller_timestamp_ms));else{var o="0";n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),t.streams_to_check!=null){n.writeFieldBegin({fname:"streams_to_check",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.streams_to_check.length});for(var a of t.streams_to_check)L(a,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function k(t,n){if(n.writeStructBegin("Pong"),n.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.original_ping_timestamp_ms!=null)n.writeI64(r("jsbi").BigInt(t.original_ping_timestamp_ms));else{var o="0";n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),t.stream_ids_missing!=null){n.writeFieldBegin({fname:"stream_ids_missing",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.I64,size:t.stream_ids_missing.length});for(var a of t.stream_ids_missing)n.writeI64(r("jsbi").BigInt(a));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_behind!=null){n.writeFieldBegin({fname:"stream_ids_behind",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:3}),n.writeListBegin({etype:e.I64,size:t.stream_ids_behind.length});for(var i of t.stream_ids_behind)n.writeI64(r("jsbi").BigInt(i));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_with_lost_amendments!=null){n.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:4}),n.writeListBegin({etype:e.I64,size:t.stream_ids_with_lost_amendments.length});for(var l of t.stream_ids_with_lost_amendments)n.writeI64(r("jsbi").BigInt(l));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_with_wrong_status!=null){n.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:5}),n.writeListBegin({etype:e.I64,size:t.stream_ids_with_wrong_status.length});for(var s of t.stream_ids_with_wrong_status)n.writeI64(r("jsbi").BigInt(s));n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function I(t,n){if(n.writeStructBegin("StreamResponseDelta"),t.flow_status!=null){var o;n.writeFieldBegin({fname:"flow_status",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32((o=t.flow_status)!=null?o:0),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.log!=null){n.writeFieldBegin({fname:"log",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),v(t.log,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.rewrite!=null){n.writeFieldBegin({fname:"rewrite",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),y(t.rewrite,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.data!=null){n.writeFieldBegin({fname:"data",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),b(t.data,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.termination!=null){n.writeFieldBegin({fname:"termination",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),S(t.termination,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.amend_ack!=null){n.writeFieldBegin({fname:"amend_ack",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),R(t.amend_ack,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function T(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.new_headers=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.new_body=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).BOOL?n.kill_body=t.readBool():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).BOOL?n.temporary=t.readBool():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRUCT?n.conditional_patch_headers=D(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function D(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.expected_existing_headers=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers_if_match=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers_otherwise=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.expected_existing_headers===void 0&&(n.expected_existing_headers=""),n.patch_headers_if_match===void 0&&(n.patch_headers_if_match=""),n}function x(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.bytes=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.metadata=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.bytes===void 0&&(n.bytes=Uint8Array.of()),n}function $(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.message===void 0&&(n.message=""),n}function P(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.reason=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I64?n.retry_delay_ms=t.readI64().toString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.reason===void 0&&(n.reason=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)),n}function N(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.amendment_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).BOOL?n.accepted=t.readBool():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.result=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function M(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.stream_id=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.last_sequencer=t.readI32():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.amendment_count=t.readI32():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.last_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.stream_id===void 0&&(n.stream_id="0"),n.last_sequencer===void 0&&(n.last_sequencer=0),n.amendment_count===void 0&&(n.amendment_count=0),n.last_status===void 0&&(n.last_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)),n}function w(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.caller_timestamp_ms=t.readI64().toString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.streams_to_check=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=M(t);n.streams_to_check.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.caller_timestamp_ms===void 0&&(n.caller_timestamp_ms="0"),n}function A(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.original_ping_timestamp_ms=t.readI64().toString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_missing=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readI64().toString();n.stream_ids_missing.push(u)}}else t.skip(a);break;case 3:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_behind=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=t.readI64().toString();n.stream_ids_behind.push(m)}}else t.skip(a);break;case 4:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_with_lost_amendments=[];for(var p=t.readListBegin(),_=0;_<p.size;_++){var f=t.readI64().toString();n.stream_ids_with_lost_amendments.push(f)}}else t.skip(a);break;case 5:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_with_wrong_status=[];for(var g=t.readListBegin(),h=0;h<g.size;h++){var y=t.readI64().toString();n.stream_ids_with_wrong_status.push(y)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.original_ping_timestamp_ms===void 0&&(n.original_ping_timestamp_ms="0"),n}function F(t){var n,a={};for(t.readStructBegin();;){var i=t.readFieldBegin(),l=i.ftype,s=i.fid;if(l===(e||(e=r("ThriftTypes"))).STOP)break;switch(s){case 1:if(l===(e||(e=r("ThriftTypes"))).I32)if(n==null)a.flow_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(t.readI32()),n="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+n);else t.skip(l);break;case 2:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.log=$(t),n="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+n);else t.skip(l);break;case 3:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.rewrite=T(t),n="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+n);else t.skip(l);break;case 4:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.data=x(t),n="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+n);else t.skip(l);break;case 5:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.termination=P(t),n="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+n);else t.skip(l);break;case 6:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.amend_ack=N(t),n="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+n);else t.skip(l);break;default:t.skip(l)}t.readFieldEnd()}return t.readStructEnd(),a}l.ResponseRewriteRequest$DefaultConstructor=s,l.ResponseRewriteConditionalPatchHeaders$DefaultConstructor=u,l.ResponseData$DefaultConstructor=c,l.LogMessage$DefaultConstructor=d,l.Termination$DefaultConstructor=m,l.AmendStreamAck$DefaultConstructor=p,l.StreamCheck$DefaultConstructor=_,l.Ping$DefaultConstructor=f,l.Pong$DefaultConstructor=g,l.StreamResponseDelta$DefaultConstructor=h,l.serializeResponseRewriteRequest=y,l.serializeResponseRewriteConditionalPatchHeaders=C,l.serializeResponseData=b,l.serializeLogMessage=v,l.serializeTermination=S,l.serializeAmendStreamAck=R,l.serializeStreamCheck=L,l.serializePing=E,l.serializePong=k,l.serializeStreamResponseDelta=I,l.deserializeResponseRewriteRequest=T,l.deserializeResponseRewriteConditionalPatchHeaders=D,l.deserializeResponseData=x,l.deserializeLogMessage=$,l.deserializeTermination=P,l.deserializeAmendStreamAck=N,l.deserializeStreamCheck=M,l.deserializePing=w,l.deserializePong=A,l.deserializeStreamResponseDelta=F}),98);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500}),l=n("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});a.exports={Ack:e,Payload$Types:l}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{body:Uint8Array.of()}}function c(){return{amendment:Uint8Array.of()}}function d(){return{ack:o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function m(){return{delta:[]}}function p(){return{}}function _(t,n){n.writeStructBegin("RequestStreamHeaders"),t.headers!=null&&(n.writeFieldBegin({fname:"headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeBinary(t.headers),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function f(t,n){if(n.writeStructBegin("RequestStreamBody"),n.writeFieldBegin({fname:"body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.body!=null)n.writeBinary(t.body);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function g(t,n){if(n.writeStructBegin("AmendStream"),t.amendment_id!=null&&(n.writeFieldBegin({fname:"amendment_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.amendment_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"amendment",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),t.amendment!=null)n.writeBinary(t.amendment);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.is_query!=null&&(n.writeFieldBegin({fname:"is_query",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:3}),n.writeBool(t.is_query),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function h(t,n){if(n.writeStructBegin("StreamResponseAck"),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"ack",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),t.ack!=null){var a;n.writeI32((a=t.ack)!=null?a:0)}else{var i=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.query_result!=null&&(n.writeFieldBegin({fname:"query_result",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.query_result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function y(t,n){if(n.writeStructBegin("StreamResponse"),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"delta",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),t.delta!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.delta.length});for(var a of t.delta)o("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(a,n);n.writeListEnd()}else{var i=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:i.length});for(var l of i)o("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(l,n);n.writeListEnd()}if(n.writeFieldEnd(),t.ack_level!=null){var s;n.writeFieldBegin({fname:"ack_level",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32((s=t.ack_level)!=null?s:0),n.writeFieldEnd()}t.query_request!=null&&(n.writeFieldBegin({fname:"query_request",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.query_request),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("Payload"),t.request_headers!=null){n.writeFieldBegin({fname:"request_headers",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),_(t.request_headers,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.request_body!=null){n.writeFieldBegin({fname:"request_body",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),f(t.request_body,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.amend!=null){n.writeFieldBegin({fname:"amend",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),g(t.amend,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ack!=null){n.writeFieldBegin({fname:"ack",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),h(t.ack,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.response!=null){n.writeFieldBegin({fname:"response",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),y(t.response,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ping!=null){n.writeFieldBegin({fname:"ping",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),o("RequestStreamCommonRequestStreamCommonSerializers").serializePing(t.ping,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.pong!=null){n.writeFieldBegin({fname:"pong",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),o("RequestStreamCommonRequestStreamCommonSerializers").serializePong(t.pong,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function b(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.headers=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function v(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.body=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.body===void 0&&(n.body=Uint8Array.of()),n}function S(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.amendment_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.amendment=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.is_query=t.readBool():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.amendment===void 0&&(n.amendment=Uint8Array.of()),n}function R(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.response_id=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.ack=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.query_result=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.ack===void 0&&(n.ack=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)),n}function L(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.response_id=t.readI64().toString():t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.delta=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(t);n.delta.push(c)}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.ack_level=o("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.query_request=t.readBinary():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.delta===void 0&&(n.delta=[]),n}function E(t){var n,a={};for(t.readStructBegin();;){var i=t.readFieldBegin(),l=i.ftype,s=i.fid;if(l===(e||(e=r("ThriftTypes"))).STOP)break;switch(s){case 1:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.request_headers=b(t),n="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+n);else t.skip(l);break;case 2:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.request_body=v(t),n="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+n);else t.skip(l);break;case 3:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.amend=S(t),n="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+n);else t.skip(l);break;case 4:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.ack=R(t),n="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+n);else t.skip(l);break;case 5:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.response=L(t),n="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+n);else t.skip(l);break;case 6:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.ping=o("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(t),n="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+n);else t.skip(l);break;case 7:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.pong=o("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(t),n="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+n);else t.skip(l);break;default:t.skip(l)}t.readFieldEnd()}return t.readStructEnd(),a}l.RequestStreamHeaders$DefaultConstructor=s,l.RequestStreamBody$DefaultConstructor=u,l.AmendStream$DefaultConstructor=c,l.StreamResponseAck$DefaultConstructor=d,l.StreamResponse$DefaultConstructor=m,l.Payload$DefaultConstructor=p,l.serializeRequestStreamHeaders=_,l.serializeRequestStreamBody=f,l.serializeAmendStream=g,l.serializeStreamResponseAck=h,l.serializeStreamResponse=y,l.serializePayload=C,l.deserializeRequestStreamHeaders=b,l.deserializeRequestStreamBody=v,l.deserializeAmendStream=S,l.deserializeStreamResponseAck=R,l.deserializeStreamResponse=L,l.deserializePayload=E}),98);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(t){case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:return e.seenAccepted||e.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?e:{flowStatus:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:return!e.seenAccepted||e.flowStatus===t?e:{flowStatus:t,seenAccepted:!0}}}l.getNextState=e}),98);
__d("StreamRetryState",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=120*1e3,s=(function(){function t(){this.$1=0}var n=t.prototype;return n.resetErrorAndRetryCount=function(){this.$1=0},n.onRetry=function(){this.$1+=1},n.getRetryCount=function(){return this.$1},n.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(this.$1===2)return e*Math.random();var t=e*Math.pow(2,this.$1-3),n=t*Math.random(),r=t+n;return Math.min(r,l)},t})();i.default=s}),66);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","ODS","Promise","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","asyncToGeneratorRuntime","err","gkx","justknobx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=4,m=0,p=1e3,_=2,f=r("gkx")("20915")?3e4:5e3,g="dgw_stream_send_ack_failure",h=(e=r("qex")._("2097"))!=null?e:!1,y=(s=r("qex")._("2100"))!=null?s:!1;function C(e){if(!e){var t=r("err")(g);throw t.stack,t}}function b(e,t){if(e==null||e.length===0)return null;var n=JSON.parse(e);return n.auxId=t,new TextEncoder().encode(JSON.stringify(n))}function v(e){var t={},n=e.delta;return n.forEach(function(e){if(e.flow_status)switch(t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status,e.flow_status){case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:t.flow_status="Accepted";break;case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:t.flow_status="Started";break;case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:t.flow_status="Stopped";break}else e.log?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:e.rewrite?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:e.data?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:e.termination?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:e.amend_ack&&(t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)}),t}var S=(function(){function e(e,t,n,a,i,l){var s=this,u,c,m;this.$6=null,this.$7={},this.$10=!1,this.$15=new(r("StreamRetryState")),this.$16=0,this.$17=0,this.$18=0,this.$21=0;var p=null;typeof t=="string"?p=new TextEncoder().encode(t):typeof t=="object"&&(p=t),this.$1={headers:e,body:p},this.$3=n,this.$4=a,this.$12=d,this.$9=!1,this.$14=!1,this.$20=l;var _=a==null?void 0:a.serviceId;i!=null&&(this.$22()||(i.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId(_)),i.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(_),i.transport="WEB_RS_STARGATE"),this.$5=o("RequestStreamE2ESampling").validateInstrumentationData(e,i,a==null?void 0:a.requestLogContext,a==null?void 0:a.upsampleMultiplier),this.$22()?this.$7.disableFalcoLogging=!0:this.$6=o("RequestStreamE2ELogger").createStreamLogger(e,this.$5,o("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE),(a==null?void 0:a.deviceId)!=null&&(this.$7.deviceId=a.deviceId),this.$6&&(this.$7.loggingId=this.$6.getRequestId()),a&&a.overrideUrl!=null&&(this.$7.overrideUrl=a.overrideUrl),_!=null&&(this.$7.serviceId=_),this.$8={flowStatus:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1},this.$19=new(r("InflightAmends"))(f,function(e,t){var n;(n=s.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,r("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers.extends({},s.$23(),{latency:t.toString()}),e)},function(e,t){if(t.message!==g){var n;(n=s.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,r("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers.extends({},s.$23(),{reason:t.message}),e)}}),(u=this.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(c=t==null||(m=t.length)==null?void 0:m.toString())!=null?c:"0"},"0","0")}var t=e.prototype;return t.getInstrumentationData=function(){return this.$5},t.getE2EClientLogger=function(){return this.$6},t.amendWithAck=function(t){var e=this.$24(t,!0);return e==null?(c||(c=n("Promise"))).resolve(!1):this.$19.getPromise(e)||(c||(c=n("Promise"))).resolve(!1)},t.amendWithoutAck=function(t){this.$24(t,!1)},t.cancel=function(){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").RECEIVED),this.$9=!0,this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)},t.start=function(t){var e=this;t===void 0&&(t=!1);var a=String(this.$16++),i=Date.now();return this.$26(a).then(function(){var t;e.$14=!1,e.$21=0;var n=(Date.now()-i).toString();(t=e.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:n},a,String(e.$18))}).catch(function(i){if(i.stack,!(i.message===g&&e.$10))if(e.$14=!1,i!==o("DGWStream").StreamError.ESTABLISHMENT_ERROR){var l,s=i.message;if(i===o("DGWStream").StreamError.UNAUTHENTICATED?s="UNAUTHENTICATED":i===o("DGWStream").StreamError.UNAUTHORIZED&&(s="UNAUTHORIZED"),(l=e.$6)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:s},a,String(e.$18)),e.$25(t?o("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:o("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,s,!0),i===o("DGWStream").StreamError.UNAUTHENTICATED||i===o("DGWStream").StreamError.UNAUTHORIZED)return;throw i}else{var u,d;(u=e.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:(d=i.message)!=null?d:i},a,String(e.$18)),e.$15.onRetry();var m=r("gkx")("20916")?e.$15.getBackoffDelayMs():p*Math.pow(_,e.$21);return new(c||(c=n("Promise")))(function(e){return window.setTimeout(e,m)}).then(function(){return e.$21++,e.$18++,e.start()})}})},t.getFlowStatus=function(){return this.$8.flowStatus},t.shouldTerminateOrRetry=function(t,a,i,l){var e=this;if(!this.$14){var s=a;if(this.$12||(s="cannot retry for error: "+a+" because of hit max retry limitation"),t!==o("RequestStreamCloseReason").RequestStreamCloseReason.ClientError){var u;(u=this.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:s},null,String(this.$18))}var d=i&&(r("gkx")("20916")||this.$12);if(this.$25(t,s,!d),d){var p=r("gkx")("20916")?Math.max(l!=null?l:0,this.$15.getBackoffDelayMs()):l!=null?l:m;return this.$14=!0,new(c||(c=n("Promise")))(function(e){return window.setTimeout(e,p)}).then(function(){return e.$27()}).catch(function(e){})}}},t.$28=function(){return this.$11!=null},t.$24=function(t,n){var e,a=this,i=typeof t=="string"?new TextEncoder().encode(t):t,l=String(this.$17++);(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{},l);var s=b(this.$5,l),u={amend:{amendment:i,instrumentation_data:s}};n&&u.amend&&(u.amend.amendment_id=l);var c=o("CompactSerializerPolyfill").serialize(u,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload),d=Date.now();if(this.$29()&&this.$11!=null){var m,p,_;return n&&this.$19.add(l),this.$11.send(c).then(function(e){var t;C(e);var n=(Date.now()-d).toString();(t=a.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:n},l)}).catch(function(e){var t;(t=a.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:e.message},l),a.$19.reject(l,e)}),(m=this.$6)==null||m.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:(p=t==null||(_=t.length)==null?void 0:_.toString())!=null?p:"0"},l),l}else{var f;(f=this.$6)==null||f.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},l)}},t.$26=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this;if(this.$9)throw new Error("stream_already_canceled");var n,a=this.$2||this.$1;try{var i=this.$30();this.$13=i;var l=a.headers.graphiql_sandbox,s=babelHelpers.extends({},a.headers,this.$31());l!=null&&(s=babelHelpers.extends({},s,{www_sandbox:l,distillery_sandbox:l+":8086"}));var u=o("DGWRequestStreamUtils").convertHeaders(s,a.body!=null,this.$5);this.$11=yield this.$20.establishStream(u,i,this.$7)}catch(e){if(e===o("DGWStream").StreamError.ESTABLISHMENT_ERROR||o("DGWStream").StreamError.isValid(e)&&!o("DGWStream").isRetryableError(e))throw e;if(o("DGWStream").StreamError.isValid(e)&&o("DGWStream").isRetryableError(e)){this.$32(e);return}throw e}if(this.$9){this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0);return}var c=new Uint8Array([]);if(a.body!=null){var m={request_body:{body:a.body}};c=o("CompactSerializerPolyfill").serialize(m,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload)}if(!this.$11)throw new Error("dgwstream_is_null");var p=this.$11.send(c).then(function(e){C(e),t.$9&&t.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)});return(n=this.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").SENT,{},e,String(this.$18)),this.$12=d,p});function t(t){return e.apply(this,arguments)}return t})(),t.$29=function(){return this.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted},t.$25=function(t,n,r){var e;this.$11&&t!==o("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&t!==o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close(),(e=this.$13)==null||e.stop(),this.$11=null,this.$10=!0,this.$33(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped),r&&!this.$9&&this.$3.onTermination("terminate stream because "+t+" with msg : "+n)},t.$33=function(t){var e=this.$8;return this.$8=o("RequestStreamState").getNextState(e,t),e!==this.$8},t.$27=function(){return this.$12--,this.$18++,this.$15.onRetry(),this.start(!0)},t.$34=function(t){var e=this,n=o("CompactSerializerPolyfill").deserialize(t,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(n.response){var a,i,l=o("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(n),s=l==null?void 0:l.auxId,c=l==null?void 0:l.dfTraceId;if(!this.$28()){var d;(d=this.$6)==null||d.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},s,String(this.$18),c);return}var m;(a=this.$6)==null||a.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").RECEIVED,v(n.response),s,String(this.$18),c,m);var p=n.response.delta;p.forEach(function(t){if(t.data)e.$15.resetErrorAndRetryCount(),r("justknobx")._("4109")?e.$3.onData(new TextDecoder("utf-8").decode(t.data.bytes)):e.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?e.$3.onData(new TextDecoder("utf-8").decode(t.data.bytes)):(u||(u=o("ODS"))).bumpEntityKey(110,"RequestStream","data_before_started_"+(e.$22()?"falco":"graphql"));else if(t.flow_status){var n=t.flow_status;n===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&e.$15.resetErrorAndRetryCount(),e.$33(n)&&e.$3.onFlowStatus(n)}else if(t.termination){var a,i=(a=t.termination.message)!=null?a:"unknown termination msg";e.$2=null,e.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,i,t.termination.reason===o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,t.termination.retry_delay_ms!=null?parseInt(t.termination.retry_delay_ms,10):null)}else if(t.log)e.$3.onLog(t.log.message);else if(t.amend_ack){var l=t.amend_ack.amendment_id;if(l!=null){var s=t.amend_ack.accepted||!1;e.$19.resolve(l,s)}}else if(t.rewrite){var c=o("DGWRequestStreamUtils").transformContextWithRewriteDelta(e.$1,t.rewrite);t.rewrite.temporary===!0?e.$2=c:e.$1=c}}),(i=this.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").SENT,v(n.response),s,String(this.$18),c),n.response.ack_level===o("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&n.response.response_id!=null&&this.$35(n.response.response_id,s)}else{var _;(_=this.$6)==null||_.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))}},t.$35=function(t,n){var e={ack:{response_id:t,ack:o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}},a=o("CompactSerializerPolyfill").serialize(e,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){var i;this.$11.send(a),(i=this.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,r("RequestStreamE2EClientLoggerEvent").SENT,{},n,String(this.$18))}else{var l;(l=this.$6)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},n,String(this.$18))}},t.$22=function(){return this.$1.headers.method==="Falco"},t.$30=function(){return new(r("DGWStreamHandler"))(this.$36.bind(this),this.$37.bind(this),this.$32.bind(this),this.$38.bind(this),this.$39.bind(this))},t.$39=function(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18)),this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)},t.$36=function(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18)),this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)},t.$37=function(t){try{this.$34(t)}catch(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:t.message},null,String(this.$18)),this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,t.message,!1)}},t.$32=function(t){var e="",n=o("DGWStream").isRetryableError(t);e="StreamError: Received "+t;var r=h?this.$12>0:n,a=y?p*_:void 0;this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,e,r,a)},t.$38=function(t,n){this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,n,!0)},t.$31=function(){return r("RtiWebRequestStreamClient").overrideHeaders},t.$23=function(){var e={};return r("gkx")("20918")&&(e.pending_amendments_size=this.$19.getSize().toString()),e},e})();l.default=S}),98);
__d("DGWStreamGroupHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=t,this.$3=n}var t=e.prototype;return t.onStreamGroupError=function(t){this.$1(t)},t.onStreamGroupMustDrain=function(t){this.$2(t)},t.onStreamGroupTransportClose=function(){this.$3()},e})();i.default=e}),66);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="realtime",u=1e4,c=null,d=(function(){function t(){this.$1={}}t.get=function(){return c==null&&(c=new t),c};var o=t.prototype;return o.$2=function(t){var e;this.$1=(e={},e[t]={dgwStreamGroup:null,multiStreamGroupLoggingId:null,multiStreamGroupPriorStreamCountGuess:0},e)},o.getStreamGroupLoggingId=function(t){var e;return t===void 0&&(t=null),(e=this.$1[t!=null?t:s])==null?void 0:e.multiStreamGroupLoggingId},o.guessStreamGroupPriorStreamCount=function(t){var e;return t===void 0&&(t=null),((e=this.$1[t!=null?t:s])==null?void 0:e.multiStreamGroupPriorStreamCountGuess)||0},o.establishStream=function(o,a,i){var t,l=this,c=i.serviceId==null?s:i.serviceId,d=(t=this.$1[c])==null?void 0:t.dgwStreamGroup;if(d==null||!d.canCreateGroupedStream()){var m={deviceId:i.deviceId,serviceId:c,disableFalcoLogging:i.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"},authToken:i.authToken,authType:i.authType};i.overrideUrl!=null&&(m.overrideUrl=i.overrideUrl),m.keepAliveMs=u,r("gkx")("20920")&&(m.loggingId=r("uuidv4")());try{d=r("DGWClient")().createStreamGroup(new(r("DGWStreamGroupHandler"))(function(){l.$2(c)},function(){l.$2(c)},function(){l.$2(c)}),m),this.$1[c]={dgwStreamGroup:d,multiStreamGroupLoggingId:m.loggingId,multiStreamGroupPriorStreamCountGuess:0}}catch(t){return(e||(e=n("Promise"))).reject(t)}}return this.$1[c].multiStreamGroupPriorStreamCountGuess++,d.establishStream({loggingId:i.loggingId,disableFalcoLogging:i.disableFalcoLogging,groupedStreamHeaders:o},a)},t})();l.default=d}),98);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$1=e!=null?e:r("DGWStreamFactory").get()}var o=t.prototype;return o.createStream=function(o,a,i,l,s){return n("cr:2046346")!=null&&n("cr:2046346").startPulsarTest(),(e||(e=n("Promise"))).resolve(new(r("DGWRequestStreamRef"))(o,a,l,s,i,this.$1))},t})();l.default=s}),98);
__d("InstagramODSObserver",["BaseEventEmitter"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("BaseEventEmitter")),s=e;l.default=s}),98);
__d("InstagramODSImpl",["InstagramODSObserver","ODS"],(function(t,n,r,o,a,i,l){"use strict";var e,s="instagram",u={addListener:function(t){r("InstagramODSObserver").addListener("event",t)},incr:function(n,a){a===void 0&&(a=1),(e||(e=o("ODS"))).bumpEntityKey(5588,s,n,a),r("InstagramODSObserver").emit("event",{count:a,key:n})},incr_CAREFUL_WHEN_USE_DYNAMIC_KEY:function(t,n){u.incr(t,n)}},c=u;l.default=c}),98);
__d("VideoPlayerWithLiveVideoInterruptedOverlay.react",["fbt","FDSLoadingAnimation.react","FDSTextPairing.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react"));function d(){var e=(u||(u=o("VideoPlayerHooks"))).useStreamInterrupted(),t=u.useIsLiveRewindActive();return!e||t?null:c.jsx(o("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{children:c.jsxs("div",{className:"x6s0dn4 x18l40ae x1ey2m1c x9f619 x78zum5 xdt5ytf xtijo5x x1o0tod xl56j7k x10l6tqk x13vifvy",children:[c.jsx("div",{children:c.jsx(r("FDSTextPairing.react"),{body:s._(/*BTDS*/"A transmiss\u00e3o est\u00e1 aguardando um sinal. Ela deve ser retomada em breve."),bodyColor:"white",headline:s._(/*BTDS*/"Aguardando o sinal de v\u00eddeo ao vivo"),headlineColor:"white",level:2,textAlign:"center"})}),c.jsx("div",{className:"xc9qbxq x1sy10c2 x1n2onr6 x14qfxbe",children:c.jsx(r("FDSLoadingAnimation.react"),{size:36})})]})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);/*FB_PKG_DELIM*/
__d("FxAuthenticationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5227"),s=o("FalcoLoggerInternal").create("fx_authentication",e),u=s;l.default=u}),98);
__d("FXAuthenticationLogger",["FxAuthenticationFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.event,n=e.target_account_id,o=n===void 0?null:n,a=e.target_account_type,i=a===void 0?null:a,l={fx_auth_event:t,target_account_id:o,target_account_type:i};r("FxAuthenticationFalcoEvent").log(function(){return l})}l.logEvent=e}),98);
__d("IgtsDefaultsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4193"),s=o("FalcoLoggerInternal").create("igts_defaults",e),u=s;l.default=u}),98);
__d("PolarisAPIFXCALAuthLogin",["PolarisEncryptionHelper","PolarisInstapi","asyncToGeneratorRuntime","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i={requestUUID:r("uuidv4")()},l=babelHelpers.extends({},yield o("PolarisEncryptionHelper").getEncryptedParam("password",t,i),{etoken:a,username:e});return o("PolarisInstapi").apiPost("/api/v1/web/fxcal/auth/login/ajax/",{body:l}).then(function(e){return e.data})}),s.apply(this,arguments)}l.fxcalAuthLogin=e}),98);
__d("PolarisAPIFxcalAuthTwoFactorLogin",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a,i,l){var s={app_id:i,etoken:l,identifier:e,trust_signal:t,two_fac_code:r,username:n,verification_method:a};return o("PolarisInstapi").apiPost("/api/v1/web/fxcal/auth/two_fac_login/ajax/",{body:s}).then(function(e){return e.data})}l.fxcalAuthTwoFactorLogin=e}),98);
__d("PolarisAPILoginTwoFactor",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a,i,l){l===void 0&&(l=!1);var s={identifier:e,isPrivacyPortalReq:l,queryParams:i,trust_signal:t,username:n,verification_method:a,verificationCode:r};return o("PolarisInstapi").apiPost("/api/v1/web/accounts/login/ajax/two_factor/",{body:s}).then(function(e){return e.data})}l.loginTwoFactor=e}),98);
__d("PolarisAPISendAccountRecoveryEmail",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("PolarisInstapi").apiPost("/api/v1/web/accounts/send_account_recovery_email_ajax/",{body:{query:e}}).then(function(e){return e.data})}l.sendAccountRecoveryEmail=e}),98);
__d("PolarisAPISendTwoFactorLoginSms",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n={identifier:t,username:e};return o("PolarisInstapi").apiPost("/api/v1/web/accounts/send_two_factor_login_sms/",{body:n}).then(function(e){return e.data})}l.sendTwoFactorLoginSms=e}),98);
__d("PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="10060380564020189"}),null);
__d("PolarisAPISendTwoFactorLoginWhatsappMutation.graphql",["PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"request_data",variableName:"input"}],concreteType:"XDTSendTwoFactorLoginResponse",kind:"LinkedField",name:"xdt_send_two_factor_login_whatsapp",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTTwoFactorLoginInfo",kind:"LinkedField",name:"two_factor_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"obfuscated_phone_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_messenger_code_option",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_new_login_screen",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sms_not_allowed_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sms_two_factor_on",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totp_two_factor_on",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"two_factor_identifier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"whatsapp_two_factor_on",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"two_factor_required",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"PolarisAPISendTwoFactorLoginWhatsappMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"PolarisAPISendTwoFactorLoginWhatsappMutation",selections:t},params:{id:n("PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_send_two_factor_login_whatsapp"]},name:"PolarisAPISendTwoFactorLoginWhatsappMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("PolarisAPISendTwoFactorLoginWhatsapp",["CometRelay","PolarisAPISendTwoFactorLoginWhatsappMutation.graphql","PolarisRelayEnvironment","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("PolarisAPISendTwoFactorLoginWhatsappMutation.graphql");function c(e,t){return new(s||(s=n("Promise")))(function(n,a){o("CometRelay").commitMutation(r("PolarisRelayEnvironment"),{mutation:u,onCompleted:function(t,r){if(r&&r.length){a(r);return}n(t)},onError:function(t){a([t])},variables:{input:{identifier:t,username:e}}})})}l.sendTwoFactorLoginWhatsapp=c}),98);
__d("PolarisAPISetPrivateAccount",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a={is_private:e};return t&&(a.bypass_rate_limit_dialog="1"),n&&(a.privacy_nux_action=!0),r&&(a.using_confirmation_dialog=!0),o("PolarisInstapi").apiPost("/api/v1/web/accounts/set_private/",{body:a}).then(function(e){return babelHelpers.extends({},e.data,{status:e.status})})}l.setPrivateAccount=e}),98);
__d("PolarisAcceptTermsOfUseBody.react",["IGDSBox.react","IGDSCheckbox.react","IGDSDivider.react","IGDSListItem.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisExternalLink.react","PolarisGenericStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState,m="https://help.instagram.com/581066165581870",p="https://help.instagram.com/519522125107875",_="https://help.instagram.com/626057554667531",f=new Map([[o("PolarisAuthStrings").TERMS_OF_USE_REQUIRED,m],[o("PolarisAuthStrings").DATA_POLICY_REQUIRED,p],[o("PolarisAuthStrings").LOCATION_BASED_FEATURES_REQUIRED,_]]);function g(e){var t=o("react-compiler-runtime").c(12),n=e.onToggle,a=e.selected,i=e.subtitleHref,l=e.title,u;t[0]!==n||t[1]!==a?(u=s.jsx(r("IGDSCheckbox.react"),{checkboxShape:"circle",isChecked:a,name:"acceptTermsCheckbox",onChange:n}),t[0]=n,t[1]=a,t[2]=u):u=t[2];var c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",children:o("PolarisGenericStrings").LEARN_MORE}),t[3]=c):c=t[3];var d;t[4]!==i?(d=s.jsx(r("IGDSBox.react"),{marginBottom:1,children:s.jsx(r("PolarisExternalLink.react"),{href:i,children:c})}),t[4]=i,t[5]=d):d=t[5];var m;t[6]!==l?(m=s.jsx(r("IGDSBox.react"),{marginTop:3,children:s.jsx(r("IGDSText.react"),{maxLines:1,zeroMargin:!0,children:l})}),t[6]=l,t[7]=m):m=t[7];var p;return t[8]!==u||t[9]!==d||t[10]!==m?(p=s.jsx(r("IGDSListItem.react"),{addOnEnd:u,paddingX:0,paddingY:0,subtitle:d,title:m}),t[8]=u,t[9]=d,t[10]=m,t[11]=p):p=t[11],p}function h(e){var t=o("react-compiler-runtime").c(19),n=e.onAcceptAllTermsChange,a=f.size,i=d(!1),l=i[0],u=i[1],m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=new Set,t[0]=m):m=t[0];var p=d(m),_=p[0],h=p[1],y;t[1]!==l?(y=function(){h(l?new Set:new Set(f.keys())),u(!l)},t[1]=l,t[2]=y):y=t[2];var C=y,b,v;t[3]!==l||t[4]!==n?(b=function(){n(l)},v=[l,n],t[3]=l,t[4]=n,t[5]=b,t[6]=v):(b=t[5],v=t[6]),c(b,v);var S;t[7]!==C||t[8]!==l?(S=s.jsx(r("IGDSCheckbox.react"),{checkboxShape:"circle",isChecked:l,name:"acceptAllTermsCheckbox",onChange:C}),t[7]=C,t[8]=l,t[9]=S):S=t[9];var R;t[10]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(r("IGDSBox.react"),{paddingY:4,children:s.jsx(r("IGDSText.react"),{maxLines:1,children:o("PolarisAuthStrings").agreeToAllTermsText(a)})}),t[10]=R):R=t[10];var L;t[11]!==S?(L=s.jsx(r("IGDSListItem.react"),{addOnEnd:S,paddingX:0,paddingY:0,title:R}),t[11]=S,t[12]=L):L=t[12];var E;t[13]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(r("IGDSDivider.react"),{}),t[13]=E):E=t[13];var k;t[14]!==_?(k=Array.from(f.entries()).map(function(e){var t=e[0],n=e[1],r=_.has(t);return s.jsx(g,{onToggle:function(){var e=new Set(_);r?e.delete(t):e.add(t),h(e),u(e.size===a)},selected:r,subtitleHref:n,title:t},t.toString())}),t[14]=_,t[15]=k):k=t[15];var I;return t[16]!==L||t[17]!==k?(I=s.jsxs(r("IGDSBox.react"),{width:"100%",children:[L,E,k]}),t[16]=L,t[17]=k,t[18]=I):I=t[18],I}l.default=h}),98);
__d("PolarisAuthConstants",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e="IG_REG_MSITE",l="IG_REG_WEB",s="IG_REG_WEB",u="IG_REG_MSITE",c="IG_NUX_MSITE",d="IG_NUX_WEB",m="IG_REG_WEB_OIDC",p="ssfErrorAlert",_=n("$InternalEnum").Mirrored(["Login","Signup"]);i.FLOW_TYPE_REG_MOBILE=e,i.FLOW_TYPE_REG_DESKTOP=l,i.FLOW_TYPE_IG_WEB_REG_DESKTOP=s,i.FLOW_TYPE_IG_WEB_REG_MOBILE=u,i.FLOW_TYPE_IG_WEB_NUX_MOBILE=c,i.FLOW_TYPE_IG_WEB_NUX_DESKTOP=d,i.FLOW_TYPE_IG_REG_WEB_OIDC=m,i.SLIM_SIGNUP_FORM_ALERT_ID=p,i.AuthPageType=_}),66);
__d("PolarisSignupFormFields.react",["IGDSBox.react","IGDSDialogFooter.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthConstants","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(38),n=e.children,a=e.handleGoBack,i=e.handleNext,l=e.header,u=e.icon,c=e.isNextActionDisabled,d=e.maxWidth,m=e.requestInFlight,p=e.shouldShowRedesignedSignup,_=e.signupNonSpecificError,f=e.style,g=e.subHeader,h=d===void 0?350:d,y=p===void 0?!1:p,C=y?0:2,b;t[0]!==l||t[1]!==y?(b=y?s.jsx(r("IGDSText.react"),{color:"primaryText",size:"title",textAlign:"center",weight:"bold",children:l}):s.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"center",children:l}),t[0]=l,t[1]=y,t[2]=b):b=t[2];var v;t[3]!==C||t[4]!==b?(v=s.jsx(r("IGDSBox.react"),{marginBottom:C,marginTop:4,position:"relative",children:b}),t[3]=C,t[4]=b,t[5]=v):v=t[5];var S;t[6]!==g?(S=s.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:4,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:g})}),t[6]=g,t[7]=S):S=t[7];var R;t[8]!==i||t[9]!==c||t[10]!==m||t[11]!==y||t[12]!==f?(R=f==="default"&&s.jsx(r("IGDSBox.react"),{marginTop:2,paddingX:2,paddingY:y===!0?2:4,position:"relative",width:"100%",children:s.jsx(r("PolarisIGCoreButton.react"),{disabled:c,fullWidth:!0,loading:m,onClick:i,children:o("PolarisGenericStrings").NEXT})}),t[8]=i,t[9]=c,t[10]=m,t[11]=y,t[12]=f,t[13]=R):R=t[13];var L;t[14]!==_?(L=_!=null&&s.jsx(r("IGDSBox.react"),{marginBottom:2,position:"relative",children:s.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 xkmlbd1 x78zum5 xdt5ytf x2lah0s xln7xf2 xvs91rp xd4r4e8 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:s.jsx("p",{"aria-atomic":"true",id:o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID,role:"alert",children:_})})}),t[14]=_,t[15]=L):L=t[15];var E;t[16]!==a||t[17]!==y||t[18]!==f?(E=f==="default"&&s.jsx(r("IGDSBox.react"),{marginBottom:2,position:"relative",width:"100%",children:y?s.jsx(r("IGDSBox.react"),{paddingX:2,position:"relative",width:"100%",children:s.jsx(r("PolarisIGCoreButton.react"),{borderless:!1,color:"ig-secondary-button",fullWidth:!0,onClick:a,children:o("PolarisGenericStrings").BACK_TEXT})}):s.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:o("PolarisGenericStrings").GO_BACK})}),t[16]=a,t[17]=y,t[18]=f,t[19]=E):E=t[19];var k;t[20]!==n||t[21]!==u||t[22]!==h||t[23]!==v||t[24]!==S||t[25]!==R||t[26]!==L||t[27]!==E?(k=s.jsxs(r("IGDSBox.react"),{alignItems:"center",maxWidth:h,paddingX:7,paddingY:2,position:"relative",children:[u,v,S,n,R,L,E]}),t[20]=n,t[21]=u,t[22]=h,t[23]=v,t[24]=S,t[25]=R,t[26]=L,t[27]=E,t[28]=k):k=t[28];var I;t[29]!==a||t[30]!==i||t[31]!==c||t[32]!==m||t[33]!==f?(I=f==="modal"&&s.jsx(r("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:s.jsx(r("IGDSDialogFooter.react"),{endAdornment:s.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,disabled:c,loading:m,onClick:i,children:o("PolarisAuthStrings").CONTINUE}),startAdornment:s.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:o("PolarisGenericStrings").BACK_TEXT})})}),t[29]=a,t[30]=i,t[31]=c,t[32]=m,t[33]=f,t[34]=I):I=t[34];var T;return t[35]!==k||t[36]!==I?(T=s.jsxs(s.Fragment,{children:[k,I]}),t[35]=k,t[36]=I,t[37]=T):T=t[37],T}l.default=u}),98);
__d("PolarisSignupTypesHelpers",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t={fullName:"",username:""};return(e==null?void 0:e.fields)!=null&&Object.keys(e.fields).forEach(function(n){var r;if(((r=e.fields[n])==null?void 0:r.value)!=null)switch(n){case"optIntoOneTap":t[n]=!!e.fields[n].value;break;default:t[n]=e.fields[n].value}}),t}i.convertSignupResultToSignupFields=e}),66);
__d("usePolarisEmailOrPhoneContactpointType",["PolarisReactRedux.react","polarisIsPhoneNumber"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=o("PolarisReactRedux.react").useSelector(s),n=t==null||(e=t.fields.emailOrPhone)==null?void 0:e.value;if(n==null)return null;var a=r("polarisIsPhoneNumber")(n);return a?"phone":"email"}function s(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}l.default=e}),98);
__d("PolarisAcceptTermsOfUseForm.react",["PolarisAcceptTermsOfUseBody.react","PolarisAuthStrings","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","react","react-compiler-runtime","usePolarisEmailOrPhoneContactpointType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(18),n=e.onSignup,a=e.requestInFlight,i=e.signupNonSpecificError,l=e.style,u=l===void 0?"default":l,m=o("PolarisReactRedux.react").useDispatch(),_=o("PolarisReactRedux.react").useSelector(p),f=r("usePolarisEmailOrPhoneContactpointType")(),g;t[0]!==f||t[1]!==m?(g=function(){m(o("PolarisSignupActions").returnToBaseSignupForm()),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:f,event_name:"back_button_clicked",step:"acceptTerms"})},t[0]=f,t[1]=m,t[2]=g):g=t[2];var h=g,y;t[3]!==f||t[4]!==n||t[5]!==_?(y=function(){n(o("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(_)),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:f,event_name:"accept_terms_form_next_clicked"})},t[3]=f,t[4]=n,t[5]=_,t[6]=y):y=t[6];var C=y,b,v;t[7]!==f?(b=function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:f,event_name:"form_load",step:"acceptTerms"})},v=[f],t[7]=f,t[8]=b,t[9]=v):(b=t[8],v=t[9]),c(b,v);var S=d(!0),R=S[0],L=S[1],E;t[10]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(r("PolarisAcceptTermsOfUseBody.react"),{onAcceptAllTermsChange:function(t){L(!t)}}),t[10]=E):E=t[10];var k;return t[11]!==h||t[12]!==C||t[13]!==R||t[14]!==a||t[15]!==i||t[16]!==u?(k=s.jsx(r("PolarisSignupFormFields.react"),{handleGoBack:h,handleNext:C,header:o("PolarisAuthStrings").AGREE_TO_TERMS,isNextActionDisabled:R,requestInFlight:a,signupNonSpecificError:i,style:u,subHeader:o("PolarisAuthStrings").PERSONAL_INFO_SECURE,children:E}),t[11]=h,t[12]=C,t[13]=R,t[14]=a,t[15]=i,t[16]=u,t[17]=k):k=t[17],k}function p(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}l.default=m}),98);
__d("PolarisAccountPrivacyHelpers",[],(function(t,n,r,o,a,i){"use strict";var e={PRIVATE:"private",PUBLIC:"public"},l={NUX_FORM_IMPRESSION:"web_pbd_nux_form_impression",NUX_FORM_NEXT_BUTTON_CLICK:"web_pbd_nux_form_next_button_click",NUX_FORM_SELECT_OPTION:"web_pbd_nux_form_select_option",NUX_FORM_SET_PRIVATE_FAILURE:"web_pbd_nux_form_set_private_failure",NUX_FORM_SET_PRIVATE_SUCCESS:"web_pbd_nux_form_set_private_success",NUX_PAGE_IMPRESSION:"web_pbd_nux_page_impression"};i.PrivacyOptionsEnum=e,i.PBDNuxEventsEnum=l}),66);
__d("PolarisAccountPrivacyBody.react",["IGDSBox.react","IGDSRadioButton.react","IGDSTextVariants.react","PolarisAccountPrivacyHelpers","PolarisAuthStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.selectedBodyOption,a=e.setSelectedBodyOption,i;if(t[0]===Symbol.for("react.memo_cache_sentinel")){var l;i=[{desc:(l=o("PolarisAuthStrings")).PRIVATE_ACCOUNT_DESCRIPTION,label:l.PRIVATE_ACCOUNT,value:o("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE},{desc:l.PUBLIC_ACCOUNT_DESCRIPTION,label:l.PUBLIC_ACCOUNT,value:o("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PUBLIC}],t[0]=i}else i=t[0];var u=i,c;return t[1]!==n||t[2]!==a?(c=s.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",children:u.map(function(e){return s.jsx(r("IGDSBox.react"),{marginBottom:4,marginTop:3,children:s.jsx(r("IGDSRadioButton.react"),{isChecked:e.value===n,label:s.jsxs(s.Fragment,{children:[s.jsx(r("IGDSBox.react"),{children:s.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"start",children:e.label})}),s.jsx(r("IGDSBox.react"),{marginTop:1,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"start",children:e.desc})})]}),onChange:function(){return a(e.value)},value:e.value})},e.value)})}),t[1]=n,t[2]=a,t[3]=c):c=t[3],c}l.default=u}),98);
__d("PolarisSettingsActionSetPrivateAccount",["FBLogger","InstagramGenericSettingStrings","PolarisAPISetPrivateAccount","PolarisGenericStrings","PolarisSentryFeedbackActions"],(function(t,n,r,o,a,i,l){"use strict";function e(t){var n=t.handleFailure,a=t.handleSuccess,i=t.isNuxAction,l=t.isUsingConfirmationDialog,s=t.privateAccount,u=t.publicToPrivateRateLimitOverride,c=t.setErrorMessage,d=t.setLoading;return function(t){return d!=null&&d(!0),c!=null&&c(null),t({privateAccount:s,type:"PRIVATE_ACCOUNT_UPDATE_REQUESTED"}),o("PolarisAPISetPrivateAccount").setPrivateAccount(s,u,i,l).then(function(r){if(s&&r.status==="ok"&&r.has_private_public_switch_restriction){var i=r.privacy_rate_limit_dialog_message;t({message:i,title:r.privacy_rate_limit_dialog_title,type:"ACCOUNT_PRIVACY_PUBLIC_TO_PRIVATE_SWITCH_RATE_LIMITED"}),d!=null&&d(!1),c!=null&&c(i),n!=null&&n();return}if(!s&&r.status==="ok"&&r.has_private_public_switch_restriction){var l=r.privacy_rate_limit_dialog_message;t({message:l,title:r.privacy_rate_limit_dialog_title,type:"ACCOUNT_PRIVACY_PRIVATE_TO_PUBLIC_SWITCH_RATE_LIMITED"}),d!=null&&d(!1),c!=null&&c(l),n!=null&&n();return}r.status==="ok"?(t({privateAccount:s,toast:{text:o("InstagramGenericSettingStrings").GENERIC_SETTINGS_SAVED},type:"PRIVATE_ACCOUNT_UPDATE_SUCCEEDED"}),a!=null&&a()):(t({privateAccount:!s,toast:{actionHandler:function(){return t(e({privateAccount:s}))},actionText:o("PolarisGenericStrings").RETRY_TEXT,text:o("InstagramGenericSettingStrings").GENERIC_SETTINGS_ERROR},type:"PRIVATE_ACCOUNT_UPDATE_FAILED"}),d!=null&&d(!1),c!=null&&c(o("PolarisGenericStrings").GENERIC_ERROR_MESSAGE),n!=null&&n())},function(a){var i,l;d!=null&&d(!1);var u=((i=a.responseObject)==null?void 0:i.spam)||!1;if(u){var m,p,_,f,g,h,y,C=(m=a.responseObject)==null?void 0:m.feedback_title,b=(p=a.responseObject)==null?void 0:p.feedback_message,v=(_=a.responseObject)==null?void 0:_.feedback_url,S=(f=a.responseObject)==null?void 0:f.feedback_action,R=(g=a.responseObject)==null?void 0:g.feedback_appeal_label,L=(h=a.responseObject)==null?void 0:h.restriction_enrollment_data,E=(y=a.responseObject)==null?void 0:y.enforcement_transparency_instance_identifier;t(o("PolarisSentryFeedbackActions").showSentryFeedback({action:S,enforcement_transparency_instance_identifier:E,feedback_appeal_label:R,message:b,restriction_enrollment_data:L,sourceOfAction:"set_private_account",title:C,url:v})),c!=null&&c(b),n!=null&&n()}var k=(l=a.responseObject)==null?void 0:l.message;t({privateAccount:!s,toast:u?void 0:{actionHandler:function(){return t(e({privateAccount:s}))},actionText:o("PolarisGenericStrings").RETRY_TEXT,text:k||o("InstagramGenericSettingStrings").GENERIC_SETTINGS_ERROR},type:"PRIVATE_ACCOUNT_UPDATE_FAILED"}),c!=null&&c(k||o("PolarisGenericStrings").GENERIC_ERROR_MESSAGE),n!=null&&n(),r("FBLogger")("ig_web").catching(a)})}}l.setPrivateAccount=e}),98);
__d("PolarisAccountPrivacyForm.react",["IGDSBox.react","IGDSLockOutline96Icon.react","IGDSTextVariants.react","IgtsDefaultsFalcoEvent","InstagramODS","PolarisAccountPrivacyBody.react","PolarisAccountPrivacyHelpers","PolarisAuthStrings","PolarisConfig","PolarisGenericOnboardingUnit.react","PolarisReactRedux.react","PolarisSettingsActionSetPrivateAccount","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(32),n=e.buttonLabel,a=e.defaultedToPrivate,i=e.handleNext,l=e.subtitle,u=a||r("gkx")("6489")||r("gkx")("25363"),m=d(u?o("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE:null),p=m[0],_=m[1],f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=o("PolarisConfig").getViewerId(),t[0]=f):f=t[0];var g=f,h=o("PolarisReactRedux.react").useDispatch(),y=d(!1),C=y[0],b=y[1],v=d(null),S=v[0],R=v[1],L,E;t[1]!==u?(L=function(){r("InstagramODS").incr("web.pbd.impression"),r("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:g,event_type:o("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_IMPRESSION,is_set_to_private:u}})},E=[u,g],t[1]=u,t[2]=L,t[3]=E):(L=t[2],E=t[3]),c(L,E);var k;t[4]!==i||t[5]!==p?(k=function(){r("InstagramODS").incr("web.pbd.set_private_success"),r("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:g,event_type:o("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SET_PRIVATE_SUCCESS,target_control_type:p}}),i()},t[4]=i,t[5]=p,t[6]=k):k=t[6];var I=k,T;t[7]!==p?(T=function(){r("InstagramODS").incr("web.pbd.set_private_failure"),r("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:g,event_type:o("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SET_PRIVATE_FAILURE,target_control_type:p}})},t[7]=p,t[8]=T):T=t[8];var D=T,x;t[9]!==h||t[10]!==D||t[11]!==I||t[12]!==p?(x=function(){r("InstagramODS").incr("web.pbd.next_button_click"),r("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:g,event_type:o("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_NEXT_BUTTON_CLICK,target_control_type:p}}),h(o("PolarisSettingsActionSetPrivateAccount").setPrivateAccount({handleFailure:D,handleSuccess:I,isNuxAction:!0,privateAccount:p===o("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE,publicToPrivateRateLimitOverride:!0,setErrorMessage:R,setLoading:b}))},t[9]=h,t[10]=D,t[11]=I,t[12]=p,t[13]=x):x=t[13];var $=x,P;t[14]===Symbol.for("react.memo_cache_sentinel")?(P=function(t){r("InstagramODS").incr("web.pbd.option_select"),r("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:g,event_type:o("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SELECT_OPTION,target_control_type:t}}),_(t)},t[14]=P):P=t[14];var N=P,M;t[15]!==l?(M=s.jsx(r("IGDSBox.react"),{marginBottom:4,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:l})}),t[15]=l,t[16]=M):M=t[16];var w;t[17]!==p?(w=s.jsx(r("PolarisAccountPrivacyBody.react"),{selectedBodyOption:p,setSelectedBodyOption:N}),t[17]=p,t[18]=w):w=t[18];var A;t[19]!==M||t[20]!==w?(A=s.jsxs(s.Fragment,{children:[M,w]}),t[19]=M,t[20]=w,t[21]=A):A=t[21];var F=p==null,O;t[22]!==S?(O=S!=null?s.jsx(r("IGDSBox.react"),{paddingX:1,paddingY:4,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:S})}):null,t[22]=S,t[23]=O):O=t[23];var B;t[24]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(r("IGDSLockOutline96Icon.react"),{alt:o("PolarisAuthStrings").ACCOUNT_PRIVACY_HEADER_TEXT,size:64}),t[24]=B):B=t[24];var W;return t[25]!==n||t[26]!==$||t[27]!==C||t[28]!==A||t[29]!==F||t[30]!==O?(W=s.jsx(r("PolarisGenericOnboardingUnit.react"),{bodyText:A,buttonDisabled:F,buttonText:n,footer:O,headerText:o("PolarisAuthStrings").ACCOUNT_PRIVACY_HEADER_TEXT,icon:B,isProcessing:C,onButtonClick:$}),t[25]=n,t[26]=$,t[27]=C,t[28]=A,t[29]=F,t[30]=O,t[31]=W):W=t[31],W}l.default=m}),98);
__d("PolarisAppsellUnit.react",["fbt","IGDSTextVariants.react","PolarisAppInstallLink.react","PolarisConfigConstants","gkx","polarisGetAppPlatform","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s._(/*BTDS*/"Obtenha o aplicativo."),e[0]=t):t=e[0];var n=t,r;return e[1]===Symbol.for("react.memo_cache_sentinel")?(r=u.jsx("div",{className:"x1anpbxc x3aesyq xyorhqc xqsn43r",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:n})}),e[1]=r):r=e[1],r}function d(e){var t=o("react-compiler-runtime").c(21),n=e.appInstallCampaign,a=e.ctaTypeV2,i=e.hideText,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=o("polarisGetAppPlatform").isWindowsNT()&&r("gkx")("25364"),t[0]=l):l=t[0];var s=l,d;t[1]===Symbol.for("react.memo_cache_sentinel")?(d={className:"x78zum5 xdt5ytf"},t[1]=d):d=t[1];var m;t[2]!==i?(m=i!==!0&&u.jsx(c,{}),t[2]=i,t[3]=m):m=t[3];var p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p={className:"x78zum5 x1b7blni xl56j7k x1anpbxc x14z9mp xyorhqc x1lziwak"},t[4]=p):p=t[4];var _;t[5]!==n||t[6]!==a?(_=!o("polarisGetAppPlatform").isAndroid()&&!s&&u.jsx(r("PolarisAppInstallLink.react"),{campaign:n,ctaTypeV2:a,"data-testid":void 0,platform:o("PolarisConfigConstants").appPlatformTypes.IOS}),t[5]=n,t[6]=a,t[7]=_):_=t[7];var f;t[8]!==n||t[9]!==a?(f=!o("polarisGetAppPlatform").isIOS()&&u.jsx(r("PolarisAppInstallLink.react"),{campaign:n,ctaTypeV2:a,"data-testid":void 0,platform:o("PolarisConfigConstants").appPlatformTypes.ANDROID}),t[8]=n,t[9]=a,t[10]=f):f=t[10];var g;t[11]!==n||t[12]!==a?(g=s&&u.jsx(r("PolarisAppInstallLink.react"),{campaign:n,ctaTypeV2:a,"data-testid":void 0,platform:o("PolarisConfigConstants").appPlatformTypes.WINDOWSNT10}),t[11]=n,t[12]=a,t[13]=g):g=t[13];var h;t[14]!==_||t[15]!==f||t[16]!==g?(h=u.jsxs("div",babelHelpers.extends({},p,{children:[_,f,g]})),t[14]=_,t[15]=f,t[16]=g,t[17]=h):h=t[17];var y;return t[18]!==m||t[19]!==h?(y=u.jsxs("div",babelHelpers.extends({},d,{children:[m,h]})),t[18]=m,t[19]=h,t[20]=y):y=t[20],y}l.default=d}),226);
__d("PolarisTooManyAccountsDialog.react",["fbt","PolarisConfirmDialog.react","PolarisGenericStrings","PolarisOneTapLogin","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.onClose,a=e.onConfirm,i=d,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=i(),t[0]=l):l=t[0];var c;t[1]!==a?(c=a!=null?s._(/*BTDS*/"Editar contas"):void 0,t[1]=a,t[2]=c):c=t[2];var m=a!=null?a:void 0,p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"N\u00e3o \u00e9 poss\u00edvel adicionar a conta"),t[3]=p):p=t[3];var _;return t[4]!==n||t[5]!==c||t[6]!==m?(_=u.jsx(r("PolarisConfirmDialog.react"),{body:l,cancelLabel:o("PolarisGenericStrings").OK_TEXT,confirmLabel:c,onClose:n,onConfirm:m,title:p}),t[4]=n,t[5]=c,t[6]=m,t[7]=_):_=t[7],_}function d(){return o("PolarisOneTapLogin").TOO_MANY_ACCOUNTS_TEXT}l.default=c}),226);
__d("XPolarisLoginControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/accounts/login/",Object.freeze({force_authentication:!1,enable_fb_login:!1,is_from_rle:!1,mtn:!1,flo:!1}),new Set(["force_authentication","enable_fb_login","is_from_rle","mtn"])),s=e;l.default=s}),98);
__d("usePolarisOneTapLoginEditModeStateQuery.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"XDTViewer",kind:"LinkedField",name:"xdt_viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,concreteType:"PolarisOneTapLogin",kind:"LinkedField",name:"one_tap_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"edit_mode",storageKey:null}],storageKey:null}]}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePolarisOneTapLoginEditModeStateQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"usePolarisOneTapLoginEditModeStateQuery",selections:e},params:{cacheID:"fded0f553435868ea14676d1156763b5",id:null,metadata:{is_distillery:!0,root_field_name:["xdt_viewer"]},name:"usePolarisOneTapLoginEditModeStateQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("usePolarisOneTapLoginEditModeState",["CometRelay","PolarisLoginLogger","react","react-compiler-runtime","usePolarisOneTapLoginEditModeStateQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t,r,a=o("react-compiler-runtime").c(7),i=o("CometRelay").useRelayEnvironment(),l,s;a[0]===Symbol.for("react.memo_cache_sentinel")?(l=e!==void 0?e:e=n("usePolarisOneTapLoginEditModeStateQuery.graphql"),s={},a[0]=l,a[1]=s):(l=a[0],s=a[1]);var u=o("CometRelay").useClientQuery(l,s),c;a[2]!==i?(c=function(t){o("CometRelay").commitLocalUpdate(i,function(e){e.getRoot().getOrCreateLinkedRecord("xdt_viewer","XDTViewer").getOrCreateLinkedRecord("one_tap_login","PolarisOneTapLogin").setValue(t,"edit_mode")}),o("PolarisLoginLogger").logLoginEvent({event_name:t?"one_tap_login_done_editing_click":"one_tap_login_manage_accounts_click",login_type:"device_based_login"})},a[2]=i,a[3]=c):c=a[3];var d=c,m=(t=u==null||(r=u.xdt_viewer)==null||(r=r.one_tap_login)==null?void 0:r.edit_mode)!=null?t:!1,p;return a[4]!==m||a[5]!==d?(p=[m,d],a[4]=m,a[5]=d,a[6]=p):p=a[6],p}l.default=c}),98);
__d("PolarisAuthTypeSwitcher.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSTextVariants.react","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthConstants","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisFastLink.react","PolarisLinkBuilder","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutUpsellExposureV2","PolarisLoginLogger","PolarisMultiSignupTypes","PolarisOneTapLogin","PolarisOneTapLoginStorage","PolarisReactRedux.react","PolarisRoutes","PolarisSignupActions","PolarisTooManyAccountsDialog.react","PolarisUA","XPolarisLoginControllerRouteBuilder","XPolarisMultiStepSignupControllerRouteBuilder","react","react-compiler-runtime","usePolarisOneTapLoginEditModeState","usePolarisPageID"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useState,p=o("PolarisAuthLimitedRegistrationHelpers").hasRestrictedRegistration();function _(e){var t=o("react-compiler-runtime").c(17),n=e.className,a=e.fromLoggedOutDialog,i=e.onClick,l=a===void 0?!1:a,c=o("PolarisReactRedux.react").useDispatch(),d=r("usePolarisPageID")(),m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=u.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",children:s._(/*BTDS*/"Cadastre-se")}),t[0]=m):m=t[0];var _=m,f;t[1]!==c||t[2]!==l||t[3]!==i||t[4]!==d?(f=function(){return o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("signup",l?"auth_form_dialog":"auth_form",d),o("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"sign_up_button_clicked"}),p&&c(o("PolarisSignupActions").setShowRegulatoryConsentModal()),i},t[1]=c,t[2]=l,t[3]=i,t[4]=d,t[5]=f):f=t[5];var g=f,h;t[6]!==d?(h=function(){if(o("PolarisUA").isMobile()&&!p)return r("XPolarisMultiStepSignupControllerRouteBuilder").buildUri({step_name:o("PolarisMultiSignupTypes").getFirstStep()}).toString();if(!o("PolarisUA").isMobile()&&!p||d!=="unifiedHome")return o("PolarisRoutes").EMAIL_SIGNUP_PATH},t[6]=d,t[7]=h):h=t[7];var y=h,C;t[8]===Symbol.for("react.memo_cache_sentinel")?(C=s._(/*BTDS*/"N\u00e3o tem uma conta?"),t[8]=C):C=t[8];var b;t[9]!==y?(b=y(),t[9]=y,t[10]=b):b=t[10];var v;t[11]!==g||t[12]!==b?(v=u.jsx(r("PolarisFastLink.react"),{"data-testid":void 0,href:b,onClick:g,prefetchQueriesOnMount_I_KNOW_WHAT_IM_DOING:r("PolarisLoggedOutUpsellExposureV2").xplatform.enable_faster_nav_for_cta,preloadCodeOnMount:r("PolarisLoggedOutUpsellExposureV2").xplatform.enable_faster_nav_for_cta,children:_}),t[11]=g,t[12]=b,t[13]=v):v=t[13];var S;return t[14]!==n||t[15]!==v?(S=u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"auto",children:u.jsxs("p",{className:n,children:[C," ",v]})}),t[14]=n,t[15]=v,t[16]=S):S=t[16],S}function f(e){var t=o("react-compiler-runtime").c(10),n=e.className,a=e.fromLoggedOutDialog,i=e.onClick,l=a===void 0?!1:a,c=r("usePolarisPageID")(),d;t[0]!==l||t[1]!==i||t[2]!==c?(d=function(){return o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login",l?"auth_form_dialog":"auth_form",c),i},t[0]=l,t[1]=i,t[2]=c,t[3]=d):d=t[3];var m=d,p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p=u.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",children:s._(/*BTDS*/"Conecte-se")}),t[4]=p):p=t[4];var _=p,f;t[5]!==m?(f=s._(/*BTDS*/"Tem uma conta? {link that reads Log in}",[s._param("link that reads Log in",u.jsx(r("PolarisFastLink.react"),{"data-testid":void 0,href:o("PolarisLinkBuilder").buildLoginLink("",{source:"auth_switcher"}),onClick:m,children:_}))]),t[5]=m,t[6]=f):f=t[6];var g;return t[7]!==n||t[8]!==f?(g=u.jsx("p",{className:n,children:f}),t[7]=n,t[8]=f,t[9]=g):g=t[9],g}function g(e){var t=o("react-compiler-runtime").c(21),n=e.onSwitchAuthType,a=e.pageType,i=o("PolarisReactRedux.react").useDispatch(),l=r("usePolarisPageID")(),c=r("usePolarisOneTapLoginEditModeState")(),d=c[0],_=c[1],f=m(!1),g=f[0],h=f[1],y;t[0]!==n?(y=function(){o("PolarisOneTapLogin").hasMaxOneTapNonces()?(h(!0),o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_switch_account_too_many_accounts",login_type:"device_based_login"})):(n(o("PolarisAuthActionConstants").AUTH.login),o("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_switch_account_click",login_type:"device_based_login"}))},t[0]=n,t[1]=y):y=t[1];var C=y,b;t[2]!==d||t[3]!==_?(b=function(){_(!d)},t[2]=d,t[3]=_,t[4]=b):b=t[4];var v=b,S;t[5]!==l?(S=function(){if(!(p&&l==="unifiedHome"))return o("PolarisUA").isMobile()?r("XPolarisMultiStepSignupControllerRouteBuilder").buildUri({step_name:o("PolarisMultiSignupTypes").getFirstStep()}).toString():o("PolarisRoutes").EMAIL_SIGNUP_PATH},t[5]=l,t[6]=S):S=t[6];var R=S,L;if(t[7]!==i||t[8]!==R||t[9]!==C||t[10]!==n||t[11]!==a){var E;t[13]!==a?(E=o("PolarisOneTapLogin").hasMaxOneTapNonces()?void 0:a===o("PolarisAuthConstants").AuthPageType.Signup?r("XPolarisLoginControllerRouteBuilder").buildURL({}):void 0,t[13]=a,t[14]=E):E=t[14],L=u.jsx("div",{children:s._(/*BTDS*/"{link that reads Switch Accounts} ou {link that reads sign up}",[s._param("link that reads Switch Accounts",u.jsx(r("IGDSButton.react"),{display:"block",href:E,label:s._(/*BTDS*/"Trocar de conta"),onClick:C,variant:"primary_link"})),s._param("link that reads sign up",u.jsx(r("IGDSButton.react"),{display:"block",href:R(),label:s._(/*BTDS*/"Cadastre-se"),onClick:function(){if(p){i(o("PolarisSignupActions").setShowRegulatoryConsentModal());return}n(o("PolarisAuthActionConstants").AUTH.signup),o("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_signup_click",login_type:"device_based_login"})},variant:"primary_link"}))])}),t[7]=i,t[8]=R,t[9]=C,t[10]=n,t[11]=a,t[12]=L}else L=t[12];var k;t[15]!==v||t[16]!==g?(k=g&&u.jsx(r("PolarisTooManyAccountsDialog.react"),{onClose:function(){return h(!1)},onConfirm:function(){v(),h(!1)}}),t[15]=v,t[16]=g,t[17]=k):k=t[17];var I;return t[18]!==L||t[19]!==k?(I=u.jsxs(u.Fragment,{children:[L,k]}),t[18]=L,t[19]=k,t[20]=I):I=t[20],I}function h(e){var t=o("react-compiler-runtime").c(41),n=e.authType,a=e.className,i=e.fromLoggedOutDialog,l=e.loggedInFBUser,s=e.onNavigate,c=e.onSwitchAuthType,d=e.pageType,m=e.primary,p=i===void 0?!1:i;if(n===o("PolarisAuthActionConstants").AUTH.fbLogin||n===o("PolarisAuthActionConstants").AUTH.fbAccountPicker||n===o("PolarisAuthActionConstants").AUTH.oneTapLogin){var h,y;if(t[0]!==n||t[1]!==a){var C,b=o("PolarisOneTapLoginStorage").getLoginNonces();if(n===o("PolarisAuthActionConstants").AUTH.oneTapLogin&&Object.values(b).length===1){var v=Object.keys(b)[0];C=b[v].username}h=a,y=C!=null&&u.jsx(r("IGDSBox.react"),{alignItems:"center",marginBottom:1,position:"relative",children:o("PolarisAuthStrings").notUsernameText(C)}),t[0]=n,t[1]=a,t[2]=h,t[3]=y}else h=t[2],y=t[3];var S;t[4]!==c||t[5]!==d||t[6]!==m?(S=u.jsx(g,{onSwitchAuthType:c,pageType:d,primary:m}),t[4]=c,t[5]=d,t[6]=m,t[7]=S):S=t[7];var R;return t[8]!==h||t[9]!==y||t[10]!==S?(R=u.jsxs("div",{className:h,children:[y,S]}),t[8]=h,t[9]=y,t[10]=S,t[11]=R):R=t[11],R}else if(n===o("PolarisAuthActionConstants").AUTH.fbConnectV2&&l!=null&&l.profile_name!=null){var L;t[12]!==l.profile_name?(L=o("PolarisAuthStrings").notUsernameText(l.profile_name.split(" ")[0]),t[12]=l.profile_name,t[13]=L):L=t[13];var E;t[14]!==L?(E=u.jsx(r("IGDSBox.react"),{alignItems:"center",marginBottom:1,position:"relative",children:L}),t[14]=L,t[15]=E):E=t[15];var k;t[16]!==c||t[17]!==d||t[18]!==m?(k=u.jsx(g,{onSwitchAuthType:c,pageType:d,primary:m}),t[16]=c,t[17]=d,t[18]=m,t[19]=k):k=t[19];var I;return t[20]!==a||t[21]!==E||t[22]!==k?(I=u.jsxs("div",{className:a,children:[E,k]}),t[20]=a,t[21]=E,t[22]=k,t[23]=I):I=t[23],I}else if(n===o("PolarisAuthActionConstants").AUTH.login||n===o("PolarisAuthActionConstants").AUTH.none){var T;t[24]!==s?(T=function(){return s==null?void 0:s("signup")},t[24]=s,t[25]=T):T=t[25];var D;return t[26]!==a||t[27]!==p||t[28]!==T?(D=u.jsx(_,{className:a,fromLoggedOutDialog:p,onClick:T}),t[26]=a,t[27]=p,t[28]=T,t[29]=D):D=t[29],D}else if(n===o("PolarisAuthActionConstants").AUTH.signup){var x;t[30]!==s?(x=function(){return s==null?void 0:s("login")},t[30]=s,t[31]=x):x=t[31];var $;return t[32]!==a||t[33]!==p||t[34]!==x?($=u.jsx(f,{className:a,fromLoggedOutDialog:p,onClick:x}),t[32]=a,t[33]=p,t[34]=x,t[35]=$):$=t[35],$}else if(o("PolarisUA").isMobile()){var P;t[36]!==s?(P=function(){return s==null?void 0:s("signup")},t[36]=s,t[37]=P):P=t[37];var N;return t[38]!==a||t[39]!==P?(N=u.jsx(_,{className:a,onClick:P}),t[38]=a,t[39]=P,t[40]=N):N=t[40],N}return null}function y(e){var t=e.auth.authType;return{authType:t}}function C(e){return{onSwitchAuthType:function(n){e(o("PolarisAuthActions").switchAuthType(n))}}}var b=o("PolarisReactRedux.react").connect(y,C)(h);l.default=b}),226);
__d("PolarisBarcelonaAppSVGIcon.react",["react","react-compiler-runtime","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u="Threads";function c(e){var t=o("react-compiler-runtime").c(5),n=e.fill,a=e.size,i=n===void 0?"var(--barcelona-logo)":n,l=a===void 0?34:a;r("vulture")("7bQEAu-DlqjkZDNXRF9VX2XxyTI=");var c;t[0]!==i?(c=s.jsx("path",{d:"M141.537 88.9883C140.71 88.5919 139.87 88.2104 139.019 87.8451C137.537 60.5382 122.616 44.905 97.5619 44.745C97.4484 44.7443 97.3355 44.7443 97.222 44.7443C82.2364 44.7443 69.7731 51.1409 62.102 62.7807L75.881 72.2328C81.6116 63.5383 90.6052 61.6848 97.2286 61.6848C97.3051 61.6848 97.3819 61.6848 97.4576 61.6855C105.707 61.7381 111.932 64.1366 115.961 68.814C118.893 72.2193 120.854 76.925 121.825 82.8638C114.511 81.6207 106.601 81.2385 98.145 81.7233C74.3247 83.0954 59.0111 96.9879 60.0396 116.292C60.5615 126.084 65.4397 134.508 73.775 140.011C80.8224 144.663 89.899 146.938 99.3323 146.423C111.79 145.74 121.563 140.987 128.381 132.296C133.559 125.696 136.834 117.143 138.28 106.366C144.217 109.949 148.617 114.664 151.047 120.332C155.179 129.967 155.42 145.8 142.501 158.708C131.182 170.016 117.576 174.908 97.0135 175.059C74.2042 174.89 56.9538 167.575 45.7381 153.317C35.2355 139.966 29.8077 120.682 29.6052 96C29.8077 71.3178 35.2355 52.0336 45.7381 38.6827C56.9538 24.4249 74.2039 17.11 97.0132 16.9405C119.988 17.1113 137.539 24.4614 149.184 38.788C154.894 45.8136 159.199 54.6488 162.037 64.9503L178.184 60.6422C174.744 47.9622 169.331 37.0357 161.965 27.974C147.036 9.60668 125.202 0.195148 97.0695 0H96.9569C68.8816 0.19447 47.2921 9.6418 32.7883 28.0793C19.8819 44.4864 13.2244 67.3157 13.0007 95.9325L13 96L13.0007 96.0675C13.2244 124.684 19.8819 147.514 32.7883 163.921C47.2921 182.358 68.8816 191.806 96.9569 192H97.0695C122.03 191.827 139.624 185.292 154.118 170.811C173.081 151.866 172.51 128.119 166.26 113.541C161.776 103.087 153.227 94.5962 141.537 88.9883ZM98.4405 129.507C88.0005 130.095 77.1544 125.409 76.6196 115.372C76.2232 107.93 81.9158 99.626 99.0812 98.6368C101.047 98.5234 102.976 98.468 104.871 98.468C111.106 98.468 116.939 99.0737 122.242 100.233C120.264 124.935 108.662 128.946 98.4405 129.507Z",fill:i}),t[0]=i,t[1]=c):c=t[1];var d;return t[2]!==l||t[3]!==c?(d=s.jsx("svg",{"aria-label":u,height:l,role:"img",viewBox:"0 0 192 192",width:l,xmlns:"http://www.w3.org/2000/svg",children:c}),t[2]=l,t[3]=c,t[4]=d):d=t[4],d}l.default=c}),98);
__d("usePolarisLoggedInFBUserForHomepage",["PolarisLoggedInFBUserContext","PolarisLoggedOutUpsellExposureV2","PolarisUA","react","usePolarisPageID"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e,t=s(r("PolarisLoggedInFBUserContext")),n=r("usePolarisPageID")();if(o("PolarisUA").isDesktop()){if(n!=="unifiedHome")return null}else return null;return r("PolarisLoggedOutUpsellExposureV2").desktop.enable_fb_connect_v2!==!0?null:(e=t==null?void 0:t.user)!=null?e:null}l.default=u}),98);
__d("PolarisFBConnectV2LoginForm.react",["IGDSBox.react","IGDSButton.react","IGDSText.react","PolarisAuthStrings","PolarisFBConnectHelpers","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutLandingDialogStrings.react","PolarisNavigationReferrerUrlSession","PolarisUserAvatar.react","react","react-compiler-runtime","useCometRouterState","useCurrentRoute","usePolarisLoggedInFBUserForHomepage","usePolarisPageID"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={primaryButton:{borderStartStartRadius:"x6nl9eh",borderStartEndRadius:"x1a5l9x9",borderEndEndRadius:"x7vuprf",borderEndStartRadius:"x1mg3h75",height:"x5kalc8",paddingTop:"xz9dl7a",paddingInlineEnd:"x1xnnf8n",paddingBottom:"xsag5q8",paddingInlineStart:"x106a9eq",$$css:!0},root:{maxWidth:"x1tpxq4b",width:"xh8yej3",$$css:!0}},c=96;function d(){var e=o("react-compiler-runtime").c(15),t=r("usePolarisLoggedInFBUserForHomepage")(),n=r("usePolarisPageID")(),a=r("useCurrentRoute")(),i=r("useCometRouterState")();if(t==null||t.profile_name==null)return null;var l;e[0]!==t.profile_name||e[1]!==t.profile_pic_url?(l=s.jsx(r("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:t.profile_pic_url,size:c,username:t.profile_name}),e[0]=t.profile_name,e[1]=t.profile_pic_url,e[2]=l):l=e[2];var d=l,m;e[3]!==t.profile_name?(m=o("PolarisLoggedOutLandingDialogStrings.react").continueWithYourFacebookAccount(t.profile_name),e[3]=t.profile_name,e[4]=m):m=e[4];var p;e[5]!==m?(p=s.jsx(r("IGDSText.react"),{color:"primaryText",size:"headline3",textAlign:"center",weight:"bold",children:m}),e[5]=m,e[6]=p):p=e[6];var _=p,f;e[7]!==n||e[8]!==(a==null?void 0:a.url)||e[9]!==i?(f=s.jsx(r("IGDSButton.react"),{display:"block",label:o("PolarisAuthStrings").FB_CONTINUE_BUTTON_TEXT,onClick:function(t){var e;t&&t.preventDefault(),o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",n,{isDismissible:!0},"auth_form_fb_connect_v2"),o("PolarisNavigationReferrerUrlSession").setCurrentUrlInformation(i,n),o("PolarisFBConnectHelpers").redirectToFBOAuth((e=a==null?void 0:a.url)!=null?e:"",n)},variant:"primary",xstyle:u.primaryButton}),e[7]=n,e[8]=a==null?void 0:a.url,e[9]=i,e[10]=f):f=e[10];var g=f,h;return e[11]!==d||e[12]!==g||e[13]!==_?(h=s.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"column",justifyContent:"center",paddingX:8,paddingY:2,rowGap:4,xstyle:u.root,children:[d,_,g]}),e[11]=d,e[12]=g,e[13]=_,e[14]=h):h=e[14],h}l.default=d}),98);
__d("PolarisFacebookAccountPicker.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisAuthTypeSwitcher.react","PolarisIGCoreConstants","PolarisIGCorePressable.react","PolarisLoginLogger","PolarisReactRedux.react","PolarisUA","PolarisUserAvatar.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(7),n=e.fbConnectedIgProfiles,a=e.onRequestFBLogin,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={className:"x1qjc9v5 x1xp8e9x x5kv4kf xh05dso x13lttk3 x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a x1n2onr6 x11njtxf"},t[0]=i):i=t[0];var l;t[1]!==n||t[2]!==a?(l=u.jsx(r("IGDSBox.react"),{padding:4,position:"relative",children:u.jsx("div",babelHelpers.extends({},i,{children:u.jsx(d,{fbConnectedIgProfiles:n,onRequestFBLogin:a})}))}),t[1]=n,t[2]=a,t[3]=l):l=t[3];var s;t[4]===Symbol.for("react.memo_cache_sentinel")?(s=o("PolarisUA").isMobile()&&u.jsx(r("IGDSBox.react"),{alignItems:"center",position:"relative",children:u.jsx(r("PolarisAuthTypeSwitcher.react"),{primary:!0})}),t[4]=s):s=t[4];var c;return t[5]!==l?(c=u.jsxs("div",{children:[l,s]}),t[5]=l,t[6]=c):c=t[6],c}function d(e){var t=o("react-compiler-runtime").c(15),n=e.fbConnectedIgProfiles,a=e.onRequestFBLogin,i=o("PolarisReactRedux.react").useSelector(p),l=o("PolarisReactRedux.react").useSelector(m);if(!a||!n)return null;var s;t[0]!==i||t[1]!==l?(s=function(t){return i&&t!==l},t[0]=i,t[1]=l,t[2]=s):s=t[2];var c=s,d;t[3]!==i||t[4]!==l?(d=function(t){return i&&t===l},t[3]=i,t[4]=l,t[5]=d):d=t[5];var _=d,f;if(t[6]!==n||t[7]!==c||t[8]!==_||t[9]!==a){var g;t[11]!==c||t[12]!==_||t[13]!==a?(g=function(t){var e=t.username,n=c(e),i=_(e),l=function(){return a(e)};return u.jsxs(r("PolarisIGCorePressable.react"),{className:"x6s0dn4 x5n08af x1ypdohk x78zum5 x1q0g3np xwhw2v2 xsag5q8",onPress:n?r("emptyFunction"):l,role:"button",tabIndex:0,children:[u.jsx(r("IGDSBox.react"),{marginEnd:3,position:"relative",children:u.jsx(r("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:t.profilePictureUrl,size:r("PolarisIGCoreConstants").AVATAR_SIZES.small,username:e})}),u.jsx(r("IGDSBox.react"),{display:"block",flex:"grow",position:"relative",children:u.jsx(r("IGDSText.react"),{weight:"semibold",children:e})}),u.jsx(r("IGDSBox.react"),{position:"relative",children:u.jsx(r("IGDSButton.react"),{display:"block",isDisabled:n,isLoading:i,label:o("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:l})})]},e)},t[11]=c,t[12]=_,t[13]=a,t[14]=g):g=t[14],f=n.map(g),t[6]=n,t[7]=c,t[8]=_,t[9]=a,t[10]=f}else f=t[10];return f}function m(e){return e.auth.login.igUsername}function p(e){return e.auth.login.requestInFlight}function _(e){var t=o("react-compiler-runtime").c(5),n=e.fbConnectedIgProfiles,a=e.onRequestFBLogin;o("PolarisLoginLogger").logLoginEvent({event_name:"account_picker_multi_linked_user_form_load"});var i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=s._(/*BTDS*/"Voc\u00ea pode fazer login nestas contas porque elas est\u00e3o na sua Central de Contas."),t[0]=i):i=t[0];var l=i,d;t[1]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx(r("IGDSBox.react"),{marginBottom:4,marginTop:2,paddingX:3,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:l})}),t[1]=d):d=t[1];var m;return t[2]!==n||t[3]!==a?(m=u.jsxs(r("IGDSBox.react"),{position:"relative",width:"350px",children:[d,u.jsx(c,{fbConnectedIgProfiles:n,onRequestFBLogin:a})]}),t[2]=n,t[3]=a,t[4]=m):m=t[4],m}l.default=_}),226);
__d("XPolarisEmailSignupControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/accounts/emailsignup/",Object.freeze({hide_fb_signup:!1}),void 0),s=e;l.default=s}),98);
__d("PolarisFacebookLoginForm.react",["fbt","IGDSBox.react","IGDSButton.react","PolarisAuthActionConstants","PolarisAuthConstants","PolarisAuthStrings","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisLoggedOutCtaImpressionLogger","PolarisLoginActionConstants","PolarisLoginLogger","XPolarisEmailSignupControllerRouteBuilder","polarisLogAction","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$1=function(e,n){e.preventDefault(),t.props.onSwitchAccountsClick(n)},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){r("polarisLogAction")("facebookLoginFormDisplayed"),o("PolarisLoginLogger").logLoginEvent({event_name:"fb_login_form_load",fbconnect_status:this.props.fbConnectStatus,login_type:"fbconnect"}),o("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("auth_form",this.props.pageID)},n.$2=function(){var e,t;return this.props.errorMessage!=null&&this.props.errorMessage!==""&&(e=this.props.errorMessage,t="xkmlbd1 x1qoy3rc xdj266r xyu1916 xat24cr xbt2mb3 xexx8yu xf159sx xx6bls6 xe2zdcy xxymvpz"),e==null||e===""||e===o("PolarisLoginActionConstants").FB_SSO_DISABLED?null:u.jsx("div",{className:t,children:u.jsx("p",{"aria-atomic":"true",id:"errorAlert",role:"alert",children:e},"message")})},n.$3=function(){var e=this,t=this.props.accountInfo.profilePictureUrl,n=this.props.accountInfo.username,o=this.props.requestInFlight;return u.jsx(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",position:"relative",children:u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(r){return e.props.onRequestLogin(n,r)},children:u.jsx("img",babelHelpers.extends({alt:s._(/*BTDS*/"Foto do perfil de {username}",[s._param("username",n)])},{0:{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x1m2trrv xxy3q5o x119j0k9 x1ynp9ky x1lliihq xln7xf2 xk390pu xpyat2d x1anpbxc x11t971q xyorhqc xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1exxlbk"},1:{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x1m2trrv xxy3q5o x119j0k9 x1ynp9ky x1lliihq xln7xf2 xk390pu xpyat2d x1anpbxc x11t971q xyorhqc xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1exxlbk xz5rk10"}}[!!o<<0],{src:t}))})})},n.render=function(){var e=this,t=this.props.accountInfo,n=s._(/*BTDS*/"Continuar como {username}",[s._param("username",t.username)]);return u.jsxs("div",{className:"x78zum5 xdt5ytf",children:[this.$2(),this.$3(),u.jsx(r("IGDSBox.react"),{marginBottom:4,marginEnd:"auto",marginStart:"auto",marginTop:4,maxWidth:"100%",minWidth:120,position:"relative",width:"intrinsic",children:u.jsx(r("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:function(r){return e.props.onRequestLogin(t.username,r)},children:u.jsx(r("IGDSBox.react"),{paddingX:4,position:"relative",children:u.jsx(r("PolarisIGCoreText").BodyEmphasized,{color:"web-always-white",display:"truncated",zeroMargin:!0,children:n})})})}),u.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu xcxhlts x14z9mp x1fqp7bg x1lziwak xexx8yu xp48ta0 x18d9i69 xtssl2i x1n2onr6 x2b8uid x11njtxf",children:u.jsxs("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd x5n08af xt0psk2 xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:[o("PolarisAuthStrings").notUsernameText(t.username)," ",this.props.pageType===o("PolarisAuthConstants").AuthPageType.Signup?u.jsx(r("IGDSButton.react"),{display:"block",href:r("XPolarisEmailSignupControllerRouteBuilder").buildURL({}),label:s._(/*BTDS*/"Cadastre-se"),onClick:function(n){return e.$1(n,o("PolarisAuthActionConstants").AUTH.signup)},variant:"primary_link"}):u.jsx(r("IGDSButton.react"),{display:"block",label:s._(/*BTDS*/"Trocar de conta"),onClick:function(n){return e.$1(n,o("PolarisAuthActionConstants").AUTH.login)},variant:"primary_link"})]})})]})},t})(u.Component);l.default=c}),226);
__d("PolarisLandingFormButtonGroup.react",["IGDSBox.react","IGDSText.react","PolarisAuthStrings","PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={brandForwardPrimaryButtonContainer:{paddingTop:"xexx8yu",paddingInlineEnd:"x64bnmy",paddingBottom:"x18d9i69",paddingInlineStart:"x13jy36j",width:"xh8yej3",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(6),n=e.button,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={__className:"x5yr21d"},t[0]=a):a=t[0];var i;t[1]!==n.label?(i=s.jsx(r("IGDSText.react"),{color:"primaryButton",weight:"semibold",children:n.label}),t[1]=n.label,t[2]=i):i=t[2];var l;return t[3]!==n.onClick||t[4]!==i?(l=s.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,dangerouslySetClassName:a,"data-testid":void 0,onClick:n.onClick,children:i}),t[3]=n.onClick,t[4]=i,t[5]=l):l=t[5],l}function d(e){var t=o("react-compiler-runtime").c(11),n=e.buttonEnd,a=e.buttonStart,i;t[0]!==a?(i=a&&s.jsx(c,{button:a}),t[0]=a,t[1]=i):i=t[1];var l;t[2]!==n||t[3]!==a?(l=a&&n&&s.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginEnd:1,marginStart:1,position:"relative",children:s.jsx(r("IGDSText.react"),{color:"secondaryText",children:o("PolarisAuthStrings").OR})}),t[2]=n,t[3]=a,t[4]=l):l=t[4];var u;t[5]!==n?(u=n&&s.jsx(c,{button:n}),t[5]=n,t[6]=u):u=t[6];var d;return t[7]!==i||t[8]!==l||t[9]!==u?(d=s.jsxs(r("IGDSBox.react"),{alignSelf:"center",display:"inlineBlock",marginTop:5,position:"relative",children:[i,l,u]}),t[7]=i,t[8]=l,t[9]=u,t[10]=d):d=t[10],d}function m(e){var t=o("react-compiler-runtime").c(6),n=e.fullWidth,a=e.primaryButton,i=n===void 0?!1:n,l;t[0]!==a.label?(l=s.jsx(r("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",position:"relative",children:a.label}),t[0]=a.label,t[1]=l):l=t[1];var u;return t[2]!==i||t[3]!==a.onClick||t[4]!==l?(u=s.jsx(r("PolarisIGCoreButton.react"),{fullWidth:i,large:!0,onClick:a.onClick,children:l}),t[2]=i,t[3]=a.onClick,t[4]=l,t[5]=u):u=t[5],u}function p(e){var t=o("react-compiler-runtime").c(12),n=e.isBrandForwardStyle,a=e.primaryButton,i=e.secondaryButtonEnd,l=e.secondaryButtonStart,c=n===void 0?!1:n,p=c&&u.brandForwardPrimaryButtonContainer,_;t[0]!==c||t[1]!==a?(_=c?s.jsx("div",{className:"x1wmp3kr x15b4ht x11g16fi xkyum4 x6ikm8r x10wlt62",children:s.jsx(m,{fullWidth:!0,primaryButton:a})}):s.jsx(m,{primaryButton:a}),t[0]=c,t[1]=a,t[2]=_):_=t[2];var f;t[3]!==p||t[4]!==_?(f=s.jsx(r("IGDSBox.react"),{marginEnd:10,marginStart:10,marginTop:4,position:"relative",xstyle:p,children:_}),t[3]=p,t[4]=_,t[5]=f):f=t[5];var g;t[6]!==i||t[7]!==l?(g=s.jsx(d,{buttonEnd:i,buttonStart:l}),t[6]=i,t[7]=l,t[8]=g):g=t[8];var h;return t[9]!==f||t[10]!==g?(h=s.jsxs(s.Fragment,{children:[f,g]}),t[9]=f,t[10]=g,t[11]=h):h=t[11],h}l.default=p}),98);
__d("PolarisLoggedOutCarouselCard.react",["CometImage.react","IGDSBox.react","PolarisHSnapScroll.react","PolarisStepIndicator.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useState,c={image:{display:"x1lliihq",height:"x5yr21d",width:"x14atkfc",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(20),n=e.images,a=e.texts,i=u(0),l=i[0],d=i[1],p;t[0]!==l||t[1]!==n.length?(p=function(t){var e=t.startPct,r=Math.round(e),o=Math.max(0,Math.min(r,n.length-1));o!==l&&d(o)},t[0]=l,t[1]=n.length,t[2]=p):p=t[2];var _=p,f;if(t[3]!==n||t[4]!==a){var g;t[6]!==a?(g=function(t,n){return s.jsxs("div",{className:"x6s0dn4 x78zum5 xdt5ytf xl56j7k x1g81zrj xn9wirt",children:[s.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf x1vd4hg5 xl56j7k x6ikm8r x10wlt62 x14atkfc",children:s.jsx(r("CometImage.react"),{src:t,xstyle:c.image})}),s.jsx("div",{className:"x1qz8m4s xnh215r xddofbv x1j61x8r xo1l8bm xkds0cx x1ls015a xat24cr xotxm5o x11fxgd9 x2b8uid",children:a[n]||""})]},n)},t[6]=a,t[7]=g):g=t[7],f=n.map(g),t[3]=n,t[4]=a,t[5]=f}else f=t[5];var h=f,y;t[8]===Symbol.for("react.memo_cache_sentinel")?(y={className:"x16nrsnc xdj266r xpwdb9g xat24cr xefazk8 x1n2onr6 xh8yej3"},t[8]=y):y=t[8];var C;t[9]===Symbol.for("react.memo_cache_sentinel")?(C={next:!0,previous:!0},t[9]=C):C=t[9];var b;t[10]!==h||t[11]!==_||t[12]!==n.length?(b=s.jsx(r("PolarisHSnapScroll.react"),{animationDuration:150,enableMouseSwipe:!0,gutterWidth:0,itemCount:n.length,itemWidth:window.innerWidth,onInteract:m,onVisibilityChange:_,pagerDisabled:C,swipeSize:1,children:h}),t[10]=h,t[11]=_,t[12]=n.length,t[13]=b):b=t[13];var v;t[14]!==l||t[15]!==n.length?(v=n.length>1&&s.jsx(r("PolarisStepIndicator.react"),{className:"x6s0dn4 xxzp1fc x1f889gz xrr41r3 xl56j7k x10l6tqk",numSteps:n.length,selectedStep:l,style:"lightContrast"}),t[14]=l,t[15]=n.length,t[16]=v):v=t[16];var S;return t[17]!==b||t[18]!==v?(S=s.jsx(r("IGDSBox.react"),{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",children:s.jsxs("div",babelHelpers.extends({},y,{children:[b,v]}))}),t[17]=b,t[18]=v,t[19]=S):S=t[19],S}function m(){}l.default=d}),98);
__d("XPolarisStarterPackDirectoryControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/list/directory/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("usePolarisLOXMobileHomepageDesign",["react-compiler-runtime","usePolarisRouteConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(4),t=r("usePolarisRouteConfig")(),n=t.homepageDesignVariant,a=n==="mweb_branding",i=n!==void 0&&n!=="default",l=n==="mweb_starter_pack",s;return e[0]!==a||e[1]!==i||e[2]!==l?(s={isBrandingDesign:a,isLOXMobileHomepageDesign:i,isStarterPackDesign:l},e[0]=a,e[1]=i,e[2]=l,e[3]=s):s=e[3],s}l.default=e}),98);
__d("PolarisLoggedOutMobileHomeBrandingContent.react",["fbt","ix","IGCoreImage.react","IGDSBox.react","IGDSButton.react","IGDSIgLogoFilledIcon.react","IGDSListCell.react","IGDSText.react","PolarisLandingFormUtils","PolarisLoggedOutCarouselCard.react","PolarisLoggedOutCtaClickLogger","PolarisNavigationUtils","XPolarisStarterPackDirectoryControllerRouteBuilder","react","react-compiler-runtime","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXMobileHomepageDesign","usePolarisPageID","usePolarisRouteConfig"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d={joinButton:{paddingInlineEnd:"x64bnmy",paddingInlineStart:"x13jy36j",$$css:!0},starterPackHeader:{backgroundColor:"xvbhtw8",borderBottomColor:"x1bs97v6",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",marginTop:"xxhku1v",paddingBottom:"xsag5q8",paddingTop:"xz9dl7a",zIndex:"x1vjfegm",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(16),n=e.onLogoClick,a;if(t[0]===Symbol.for("react.memo_cache_sentinel")){var i;a=[{images:[u("914477"),u("914478"),u("914479")],texts:[(i=o("PolarisLandingFormUtils")).WATCH_SEND_SHORT_VIDEOS,i.SEE_FRIENDS_CREATORS_UPDATES,i.FIND_SHARE_INTERESTS]},{images:[u("914480"),u("914481"),u("914482")],texts:[i.COMMUNITY_Q_AND_A,i.MATCH_MUSIC_TO_MOMENTS,i.SAVE_CORE_MEMORIES]},{images:[u("914483"),u("914484"),u("914485")],texts:[i.SHARE_WITH_CLOSE_FRIENDS,i.SPARK_DM_CONVERSATIONS,i.DROP_QUICK_NOTES]}],t[0]=a}else a=t[0];var l=a,m=r("usePolarisLOXBrandForwardDeeplinkLogoUpsell")(),_=m.getBrandForwardDeeplinkLogoUpsellVariant,f=r("usePolarisLOXMobileHomepageDesign")(),g=f.isLOXMobileHomepageDesign,h=r("usePolarisLOXMobileHomepageDesign")(),y=h.isStarterPackDesign,C=r("usePolarisRouteConfig")(),b=C.showBrandingPageWithNav,v=_()==="mweb_deeplink_logo"||b===!0,S=r("usePolarisPageID")(),R;t[1]!==y||t[2]!==S?(R=y&&c.jsx(r("IGDSBox.react"),{direction:"row",justifyContent:"center",marginBottom:5,position:"sticky",top:!0,xstyle:d.starterPackHeader,children:c.jsx(r("IGDSListCell.react"),{addOnEnd:c.jsx(r("IGDSButton.react"),{display:"block",label:"Join",onClick:function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("open_starter_pack_directory","full_page",S,{isDismissible:!1}),o("PolarisNavigationUtils").openURL(r("XPolarisStarterPackDirectoryControllerRouteBuilder").buildURL({}))},variant:"primary",xstyle:d.joinButton}),content:c.jsx(r("IGDSText.react"),{size:"body",weight:"semibold",children:"Customize a feed based on your interests when you join."})})}),t[1]=y,t[2]=S,t[3]=R):R=t[3];var L;t[4]!==v||t[5]!==g||t[6]!==n?(L=v||g?c.jsx(r("IGDSBox.react"),{alignItems:"baseline",marginBottom:5,marginTop:2,paddingX:2,children:c.jsx(r("IGDSButton.react"),{icon:c.jsx(r("IGDSIgLogoFilledIcon.react"),{alt:"ins",color:"ig-primary-text",size:47}),onClick:n,variant:"tertiary"})}):c.jsx(r("IGDSBox.react"),{alignItems:"baseline",marginBottom:3,paddingX:6,children:c.jsx(r("IGDSIgLogoFilledIcon.react"),{alt:"ins",color:"ig-primary-text",size:47})}),t[4]=v,t[5]=g,t[6]=n,t[7]=L):L=t[7];var E;t[8]===Symbol.for("react.memo_cache_sentinel")?(E=s._(/*BTDS*/"Imagem de destino"),t[8]=E):E=t[8];var k;t[9]===Symbol.for("react.memo_cache_sentinel")?(k=c.jsxs(r("IGDSBox.react"),{alignItems:"center",marginBottom:13,marginTop:10,paddingX:6,children:[c.jsx(r("IGCoreImage.react"),{alt:E,"data-testid":void 0,src:{light:u("914486")}}),c.jsx("div",{className:"x1qz8m4s xnh215r x1j61x8r x2b8uid xcg35fi xo1l8bm xmx5zq6 x9d7mpn x14vqqas",children:o("PolarisLandingFormUtils").SHARE_EVERYDAY_MOMENTS_FBT})]}),t[9]=k):k=t[9];var I;t[10]!==R||t[11]!==L?(I=c.jsxs(c.Fragment,{children:[R,L,k]}),t[10]=R,t[11]=L,t[12]=I):I=t[12];var T=I,D;t[13]===Symbol.for("react.memo_cache_sentinel")?(D=l.map(p),t[13]=D):D=t[13];var x=D,$;return t[14]!==T?($=c.jsxs(c.Fragment,{children:[T,x]}),t[14]=T,t[15]=$):$=t[15],$}function p(e,t){return c.jsx("div",{className:"x1byr4rc xyri2b x1egpv2n x1c1uobl",children:c.jsx(r("PolarisLoggedOutCarouselCard.react"),{images:e.images,texts:e.texts},t)},t)}p.displayName=p.name+" [from "+i.id+"]",l.default=m}),226);
__d("PolarisLandingForm.react",["IGDSBox.react","InstagramODS","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisFooter.react","PolarisIGCoreText","PolarisIgLiteCarbonUpsellsUtils","PolarisLandingFormButtonGroup.react","PolarisLandingFormUtils","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutMobileHomeBrandingContent.react","PolarisLoggedOutUpsellUtils","PolarisReactRedux.react","PolarisRoutePropUtils","PolarisSignupActions","PolarisUA","XPolarisLoginControllerRouteBuilder","gkx","react","react-compiler-runtime","useCometRouterDispatcher","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXMobileHomepageDesign","usePolarisOpenApp","usePolarisPageID","usePolarisRouteConfig"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext;function m(e,t,n){return{primary:{label:n.buttonText,onClick:n.onClickFn},secondary:{end:{label:o("PolarisAuthStrings").SIGN_UP_BUTTON_TEXT_LOWER_CASE,onClick:t},start:{label:o("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:e}}}}function p(e){var t=o("react-compiler-runtime").c(28),n=e.ref,a=o("PolarisReactRedux.react").useDispatch(),i=r("usePolarisPageID")(),l=r("useCometRouterDispatcher")(),u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=o("PolarisIgLiteCarbonUpsellsUtils").isIgLiteCarbonUpsellsEligible(),t[0]=u):u=t[0];var c=u,p=r("usePolarisLOXBrandForwardDeeplinkLogoUpsell")(),_=p.isBrandForwardDeeplinkLogoUpsell,f=r("usePolarisLOXMobileHomepageDesign")(),g=f.isLOXMobileHomepageDesign,h=r("usePolarisRouteConfig")(),y=h.showBrandingPageWithNav,C=_||g||y===!0,b=d(o("PolarisRoutePropUtils").PolarisRoutePropContext),v;t[1]!==b.routePropQE?(v=b.routePropQE.getNumber("landing_page_value_prop_variant",0),t[1]=b.routePropQE,t[2]=v):v=t[2];var S=Number(v),R;t[3]!==a||t[4]!==i?(R=function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("signup","full_page",i),o("PolarisAuthLimitedRegistrationHelpers").hasRestrictedRegistration()?a(o("PolarisSignupActions").setShowRegulatoryConsentModal()):a(o("PolarisAuthActions").switchAuthType(o("PolarisAuthActionConstants").AUTH.signup))},t[3]=a,t[4]=i,t[5]=R):R=t[5];var L=R,E;t[6]!==l||t[7]!==a||t[8]!==i?(E=function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login","full_page",i),r("gkx")("18606")===!0?l==null||l.go(r("XPolarisLoginControllerRouteBuilder").buildUri({mtn:!0}).toString(),{}):a(o("PolarisAuthActions").switchAuthType(o("PolarisAuthActionConstants").AUTH.login))},t[6]=l,t[7]=a,t[8]=i,t[9]=E):E=t[9];var k=E,I=r("usePolarisOpenApp")(),T;t[10]!==I||t[11]!==i?(T=function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("app_open","full_page",i),o("PolarisUA").isDesktop()&&r("InstagramODS").incr("web.desktop.app_open_click.PolarisLandingForm"),I(c?{utmCampaignDefault:"rootLandingPage",utmMedium:"installLink"}:void 0)},t[10]=I,t[11]=i,t[12]=T):T=t[12];var D=T,x=o("PolarisLoggedOutUpsellUtils").useGetUpsellTextAndAction(D,c),$;t[13]!==k||t[14]!==L||t[15]!==x?($=m(k,L,x),t[13]=k,t[14]=L,t[15]=x,t[16]=$):$=t[16];var P=$,N;t[17]!==P.primary||t[18]!==P.secondary.end||t[19]!==P.secondary.start||t[20]!==C||t[21]!==D||t[22]!==S||t[23]!==y?(N=C?s.jsxs(s.Fragment,{children:[s.jsx(r("PolarisLoggedOutMobileHomeBrandingContent.react"),{onLogoClick:D}),s.jsx(r("IGDSBox.react"),{marginTop:17,children:s.jsx(r("PolarisFooter.react"),{includeLanguageAndCopyright:!0,variant:"centered"})}),s.jsx("div",babelHelpers.extends({},{0:{className:"x6s0dn4 xm0mo6v xxux13n x1ey2m1c x78zum5 xdt5ytf xtijo5x x1o0tod xl84xjf xixxii4 xh8yej3 x1vjfegm"},1:{className:"x6s0dn4 xm0mo6v xxux13n x78zum5 xdt5ytf xtijo5x x1o0tod xl84xjf xixxii4 xh8yej3 x1vjfegm xvivwo0"}}[(y===!0)<<0],{children:s.jsx(r("PolarisLandingFormButtonGroup.react"),{isBrandForwardStyle:C,primaryButton:P.primary,secondaryButtonEnd:P.secondary.end,secondaryButtonStart:P.secondary.start})}))]}):s.jsxs(s.Fragment,{children:[s.jsx(r("IGDSBox.react"),{marginBottom:4,paddingX:7,position:"relative",children:s.jsx(r("PolarisIGCoreText"),{Element:"h1",size:"headline2",textAlign:"center",weight:"normal",children:o("PolarisLandingFormUtils").getLoginValuePropText(S)})}),s.jsx(r("PolarisLandingFormButtonGroup.react"),{primaryButton:P.primary,secondaryButtonEnd:P.secondary.end,secondaryButtonStart:P.secondary.start})]}),t[17]=P.primary,t[18]=P.secondary.end,t[19]=P.secondary.start,t[20]=C,t[21]=D,t[22]=S,t[23]=y,t[24]=N):N=t[24];var M;return t[25]!==n||t[26]!==N?(M=s.jsx(r("IGDSBox.react"),{containerRef:n,flex:"grow",marginTop:5,position:"relative",width:"100%",children:N}),t[25]=n,t[26]=N,t[27]=M):M=t[27],M}l.default=p}),98);
__d("PolarisLoggedOutContentWallDialogAuthCTAs.react",["IGDSText.react","PolarisAppInstallStrings","PolarisConsentStrings.react","PolarisLoggedOutLoginButton.react","PolarisLoggedOutSignupButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={button:{height:"xn3w4p2",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(5),t,n,a,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={className:"xkh2ocl x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x3pnbk8"},n=s.jsx(r("PolarisLoggedOutSignupButton.react"),{ctaTypeV2:"auth_form_dialog",isDismissible:!0,label:o("PolarisAppInstallStrings").SIGNUP_UP_FOR_INSTAGRAM_APP,loginSource:"logged_out_megaphone_signup",variant:"primary",xstyle:u.button}),a=s.jsx(r("PolarisLoggedOutLoginButton.react"),{ctaTypeV2:"auth_form_dialog",loginSource:"logged_out_megaphone_signup",variant:"secondary",xstyle:u.button}),i={className:"xz9dl7a xsag5q8"},e[0]=t,e[1]=n,e[2]=a,e[3]=i):(t=e[0],n=e[1],a=e[2],i=e[3]);var l;return e[4]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsxs("div",babelHelpers.extends({},t,{children:[n,a,s.jsx("div",babelHelpers.extends({},i,{children:s.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",textAlign:"center",children:o("PolarisConsentStrings.react").instagramTermsOfUseAndPrivacyPolicyText("secondaryText")})}))]})),e[4]=l):l=e[4],l}l.default=c}),98);
__d("PolarisLoginActionClearStopDeletionNonce",[],(function(t,n,r,o,a,i){"use strict";function e(){return function(e,t){e({deletionDate:null,deletionNonce:null,type:"ACCOUNT_DELETED"})}}i.clearStopDeletionNonce=e}),66);
__d("PolarisLoginActionOneTapLoginRemove",["PolarisAuthStrings","PolarisLoginLogger","PolarisOneTapLogin","PolarisToastActions"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(t,n){o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_account_remove_click",ig_userid:e,login_type:"device_based_login"});try{o("PolarisOneTapLogin").removeLoginNonce(e)}catch(e){o("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_account_remove_failed",login_type:"device_based_login"}),t(o("PolarisToastActions").showToast({persistOnNavigate:!0,text:o("PolarisAuthStrings").LOGIN_FAILED_TEXT}))}window.location.reload()}}l.oneTapLoginRemove=e}),98);
__d("PolarisOneTapLoginForm.react",["fbt","CometPressable.react","IGDSBox.react","IGDSButton.react","IGDSDivider.react","IGDSXPanoFilledIcon.react","PolarisAuthStrings","PolarisAuthTypeSwitcher.react","PolarisConfirmDialog.react","PolarisGenericStrings","PolarisIGCoreSVGIconButton.react","PolarisLoginActionOneTapLogin","PolarisLoginActionOneTapLoginRemove","PolarisLoginLogger","PolarisReactRedux.react","PolarisUA","PolarisUserAvatar.react","emptyFunction","react","react-compiler-runtime","stylex","usePolarisOneTapLoginEditModeState","useSingleSimpleImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useState,_=s._(/*BTDS*/"Gerenciar contas"),f={account:{alignItems:"x6s0dn4",cursor:"x1ypdohk",display:"x78zum5",flexDirection:"x1q0g3np",flexGrow:"x1iyjqo2",fontWeight:"xwhw2v2",$$css:!0},multiContainer:{paddingBottom:"xx6bls6",paddingTop:"x7sb2j6",$$css:!0},profilePicture:{borderTopColor:"x1w6pcvv",borderInlineEndColor:"x1kr3336",borderBottomColor:"x1e5933n",borderInlineStartColor:"x8itksh",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",marginInlineEnd:"xbmvrgn",$$css:!0},profilePictureSingle:{borderTopColor:"x1w6pcvv",borderInlineEndColor:"x1kr3336",borderBottomColor:"x1e5933n",borderInlineStartColor:"x8itksh",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",marginTop:"x1xmf6yo",marginInlineEnd:"x11t971q",marginBottom:"x1yztbdb",marginInlineStart:"xvc5jky",$$css:!0},root:{fontSize:"xvs91rp",fontWeight:"xz5fbns",maxWidth:"x1dc814f",width:"xh8yej3",$$css:!0}};function g(e){var t=o("react-compiler-runtime").c(12),n=e.handleRemoveOneTapLoginDialogClose,a=e.handleRemoveOneTapLoginDialogConfirm,i=e.userId,l=e.username,u;t[0]!==l?(u=s._(/*BTDS*/"Voc\u00ea precisar\u00e1 inserir seu nome de usu\u00e1rio e senha na pr\u00f3xima vez que voc\u00ea entrar como {username}",[s._param("username",l)]),t[0]=l,t[1]=u):u=t[1];var d,m;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Cancelar"),m=s._(/*BTDS*/"Remover"),t[2]=d,t[3]=m):(d=t[2],m=t[3]);var p;t[4]!==a||t[5]!==i?(p=function(){return a(i)},t[4]=a,t[5]=i,t[6]=p):p=t[6];var _;t[7]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"Remover conta?"),t[7]=_):_=t[7];var f;return t[8]!==n||t[9]!==u||t[10]!==p?(f=c.jsx(r("PolarisConfirmDialog.react"),{body:u,cancelLabel:d,confirmLabel:m,onClose:n,onConfirm:p,title:_}),t[8]=n,t[9]=u,t[10]=p,t[11]=f):f=t[11],f}function h(e){var t=o("react-compiler-runtime").c(33),n=e.fbConnectedUser,a=e.isLoginButtonDisabled,i=e.isLoginButtonLoading,l=e.onRequestFBLogin;if(!n||!l)return null;var s=n.fbUserID,u=n.profilePictureUrl,d=n.username,m=String(s),p;t[0]!==m||t[1]!==a?(p=a(m),t[0]=m,t[1]=a,t[2]=p):p=t[2];var _=p,g;t[3]!==m||t[4]!==i?(g=i(m),t[3]=m,t[4]=i,t[5]=g):g=t[5];var h=g,C;t[6]!==_||t[7]!==l||t[8]!==d?(C=_?r("emptyFunction"):function(){l(d)},t[6]=_,t[7]=l,t[8]=d,t[9]=C):C=t[9];var b;t[10]===Symbol.for("react.memo_cache_sentinel")?(b="x1w6pcvv x1kr3336 x1e5933n x8itksh x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 xbmvrgn",t[10]=b):b=t[10];var v;t[11]!==l||t[12]!==d?(v=function(){return l(d)},t[11]=l,t[12]=d,t[13]=v):v=t[13];var S;t[14]!==u||t[15]!==v||t[16]!==d?(S=c.jsx(r("PolarisUserAvatar.react"),{className:b,isLink:!1,onClick:v,profilePictureUrl:u,size:y,username:d}),t[14]=u,t[15]=v,t[16]=d,t[17]=S):S=t[17];var R;t[18]===Symbol.for("react.memo_cache_sentinel")?(R={className:"x1qjc9v5 xdt5ytf x1iyjqo2 xs83m0k x6ikm8r x10wlt62 xlyipyv xuxw1ft"},t[18]=R):R=t[18];var L;t[19]!==d?(L=c.jsx("div",babelHelpers.extends({},R,{children:d})),t[19]=d,t[20]=L):L=t[20];var E;t[21]!==l||t[22]!==d?(E=function(){l(d)},t[21]=l,t[22]=d,t[23]=E):E=t[23];var k;t[24]!==_||t[25]!==h||t[26]!==E?(k=c.jsx(r("IGDSBox.react"),{justifyContent:"end",children:c.jsx(r("IGDSButton.react"),{display:"block",isDisabled:_,isLoading:h,label:o("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:E})}),t[24]=_,t[25]=h,t[26]=E,t[27]=k):k=t[27];var I;return t[28]!==k||t[29]!==C||t[30]!==S||t[31]!==L?(I=c.jsxs(r("CometPressable.react"),{onPress:C,role:"button",xstyle:f.account,children:[S,L,k]}),t[28]=k,t[29]=C,t[30]=S,t[31]=L,t[32]=I):I=t[32],I}var y=38,C=86;function b(t){var n=o("react-compiler-runtime").c(14),a=t.handleLoginClick,i=t.isSingleAccount,l=t.loginNonces,s=t.userId,u=l[s],d=u.nonce,m=u.profilePicUrl,p=u.username,_;n[0]===Symbol.for("react.memo_cache_sentinel")?(_={className:"x78zum5 xl56j7k"},n[0]=_):_=n[0];var g=i?f.profilePictureSingle:f.profilePicture,h;n[1]!==g?(h=(e||(e=r("stylex")))(g),n[1]=g,n[2]=h):h=n[2];var b;n[3]!==a||n[4]!==i||n[5]!==d||n[6]!==s?(b=i?function(){return a(s,d)}:void 0,n[3]=a,n[4]=i,n[5]=d,n[6]=s,n[7]=b):b=n[7];var v=i?C:y,S;return n[8]!==m||n[9]!==h||n[10]!==b||n[11]!==v||n[12]!==p?(S=c.jsx("div",babelHelpers.extends({},_,{children:c.jsx(r("PolarisUserAvatar.react"),{className:h,isLink:!1,onClick:b,profilePictureUrl:m,size:v,username:p})})),n[8]=m,n[9]=h,n[10]=b,n[11]=v,n[12]=p,n[13]=S):S=n[13],S}function v(e){var t=o("react-compiler-runtime").c(39),n=e.editMode,a=e.handleLoginClick,i=e.handleRemoveAccountClick,l=e.isLoginButtonDisabled,s=e.isLoginButtonLoading,u=e.loginNonces,d=e.userId,m=u[d].nonce,p=u[d].username,_;t[0]!==l||t[1]!==d?(_=l(d),t[0]=l,t[1]=d,t[2]=_):_=t[2];var g=_,h;t[3]!==s||t[4]!==d?(h=s(d),t[3]=s,t[4]=d,t[5]=h):h=t[5];var y=h,C;t[6]!==n||t[7]!==a||t[8]!==g||t[9]!==m||t[10]!==d?(C=n||g?r("emptyFunction"):function(){return a(d,m)},t[6]=n,t[7]=a,t[8]=g,t[9]=m,t[10]=d,t[11]=C):C=t[11];var v=C,S=g||y,R;t[12]!==i||t[13]!==d||t[14]!==p?(R=function(){return i(d,p)},t[12]=i,t[13]=d,t[14]=p,t[15]=R):R=t[15];var L;t[16]===Symbol.for("react.memo_cache_sentinel")?(L=c.jsx(r("IGDSXPanoFilledIcon.react"),{alt:o("PolarisGenericStrings").CLOSE_TEXT,size:12}),t[16]=L):L=t[16];var E;t[17]!==S||t[18]!==R?(E=c.jsx(r("PolarisIGCoreSVGIconButton.react"),{disabled:S,onClick:R,padding:0,children:L}),t[17]=S,t[18]=R,t[19]=E):E=t[19];var k=E,I;t[20]!==a||t[21]!==u||t[22]!==d?(I=c.jsx(b,{handleLoginClick:a,isSingleAccount:!1,loginNonces:u,userId:d}),t[20]=a,t[21]=u,t[22]=d,t[23]=I):I=t[23];var T;t[24]===Symbol.for("react.memo_cache_sentinel")?(T={className:"x1qjc9v5 xdt5ytf x1iyjqo2 xs83m0k x6ikm8r x10wlt62 xlyipyv xuxw1ft"},t[24]=T):T=t[24];var D;t[25]!==p?(D=c.jsx("div",babelHelpers.extends({},T,{children:p})),t[25]=p,t[26]=D):D=t[26];var x;t[27]!==n||t[28]!==v||t[29]!==g||t[30]!==y||t[31]!==k?(x=c.jsx(r("IGDSBox.react"),{justifyContent:"end",children:n?k:c.jsx(r("IGDSButton.react"),{display:"block",isDisabled:g,isLoading:y,label:o("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:v})}),t[27]=n,t[28]=v,t[29]=g,t[30]=y,t[31]=k,t[32]=x):x=t[32];var $;return t[33]!==v||t[34]!==D||t[35]!==x||t[36]!==I||t[37]!==d?($=c.jsx(r("IGDSBox.react"),{alignItems:"center",columnGap:2,direction:"row",flex:"grow",paddingY:2,children:c.jsxs(r("CometPressable.react"),{onPress:v,role:"button",xstyle:f.account,children:[I,D,x]},d)}),t[33]=v,t[34]=D,t[35]=x,t[36]=I,t[37]=d,t[38]=$):$=t[38],$}function S(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsx(r("IGDSBox.react"),{paddingX:9,paddingY:2,position:"relative",width:"100%",children:c.jsx(r("IGDSDivider.react"),{})}),e[0]=t):t=e[0];var n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=c.jsxs(c.Fragment,{children:[t,c.jsx(r("IGDSBox.react"),{alignItems:"center",marginBottom:4,marginTop:4,position:"relative",children:c.jsx(r("PolarisAuthTypeSwitcher.react"),{primary:!0})})]}),e[1]=n):n=e[1],n}function R(e){var t=o("react-compiler-runtime").c(3),n=e.onRemoveClick,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s._(/*BTDS*/"Remover conta"),t[0]=a):a=t[0];var i;return t[1]!==n?(i=c.jsx(r("IGDSButton.react"),{display:"block",label:a,onClick:n,variant:"primary_link"}),t[1]=n,t[2]=i):i=t[2],i}function L(e){var t=o("react-compiler-runtime").c(29),n=e.handleLoginClick,a=e.handleRemoveAccountClick,i=e.isLoginButtonLoading,l=e.loginNonces,u=e.showSingleAccountProfilePicture,d;t[0]!==l?(d=Object.keys(l),t[0]=l,t[1]=d):d=t[1];var m=d[0],p=l[m],_=p.nonce,f=p.username,g;t[2]!==f?(g=s._(/*BTDS*/"Continuar como {username}",[s._param("username",f)]),t[2]=f,t[3]=g):g=t[3];var h=g,y;t[4]!==n||t[5]!==l||t[6]!==u||t[7]!==m?(y=u&&c.jsx(b,{handleLoginClick:n,isSingleAccount:!0,loginNonces:l,userId:m}),t[4]=n,t[5]=l,t[6]=u,t[7]=m,t[8]=y):y=t[8];var C;t[9]!==i||t[10]!==m?(C=i(m),t[9]=i,t[10]=m,t[11]=C):C=t[11];var v;t[12]!==n||t[13]!==_||t[14]!==m?(v=function(){return n(m,_)},t[12]=n,t[13]=_,t[14]=m,t[15]=v):v=t[15];var L;t[16]!==h||t[17]!==C||t[18]!==v?(L=c.jsx(r("IGDSBox.react"),{marginBottom:5,marginEnd:"auto",marginStart:"auto",marginTop:4,minWidth:120,position:"relative",width:"intrinsic",children:c.jsx(r("IGDSButton.react"),{isLoading:C,label:h,onClick:v,size:"small",variant:"primary"})}),t[16]=h,t[17]=C,t[18]=v,t[19]=L):L=t[19];var E;t[20]!==a||t[21]!==m||t[22]!==f?(E=c.jsx(r("IGDSBox.react"),{alignItems:"center",marginBottom:5,position:"relative",children:c.jsx(R,{onRemoveClick:function(){return a(m,f)}})}),t[20]=a,t[21]=m,t[22]=f,t[23]=E):E=t[23];var k;t[24]===Symbol.for("react.memo_cache_sentinel")?(k=o("PolarisUA").isMobile()&&c.jsx(S,{}),t[24]=k):k=t[24];var I;return t[25]!==y||t[26]!==L||t[27]!==E?(I=c.jsxs(r("IGDSBox.react"),{direction:"column",flex:"grow",children:[y,L,E,k]}),t[25]=y,t[26]=L,t[27]=E,t[28]=I):I=t[28],I}function E(e){var t=o("react-compiler-runtime").c(27),n=e.editMode,a=e.fbConnectedUser,i=e.handleLoginClick,l=e.handleManageAccountsClick,u=e.handleRemoveAccountClick,d=e.isLoginButtonDisabled,m=e.isLoginButtonLoading,p=e.loginNonces,g=e.onRequestFBLogin,y;t[0]!==n?(y=n?s._(/*BTDS*/"Concluir edi\u00e7\u00f5es"):_,t[0]=n,t[1]=y):y=t[1];var C=y,b;t[2]!==p?(b=Object.keys(p),t[2]=p,t[3]=b):b=t[3];var S;t[4]!==n||t[5]!==i||t[6]!==u||t[7]!==d||t[8]!==m||t[9]!==p||t[10]!==b?(S=b.map(function(e){return c.jsx(v,{editMode:n,handleLoginClick:i,handleRemoveAccountClick:u,isLoginButtonDisabled:d,isLoginButtonLoading:m,loginNonces:p,userId:e},"account_"+e)}),t[4]=n,t[5]=i,t[6]=u,t[7]=d,t[8]=m,t[9]=p,t[10]=b,t[11]=S):S=t[11];var R=S,L;t[12]!==a||t[13]!==d||t[14]!==m||t[15]!==g?(L=c.jsx(h,{fbConnectedUser:a,isLoginButtonDisabled:d,isLoginButtonLoading:m,onRequestFBLogin:g}),t[12]=a,t[13]=d,t[14]=m,t[15]=g,t[16]=L):L=t[16];var E;t[17]!==R||t[18]!==L?(E=c.jsxs(r("IGDSBox.react"),{alignItems:"stretch",direction:"column",paddingX:4,xstyle:f.multiContainer,children:[R,L]}),t[17]=R,t[18]=L,t[19]=E):E=t[19];var k;t[20]!==l||t[21]!==C?(k=c.jsx(r("IGDSBox.react"),{marginBottom:6,position:"relative",children:c.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:c.jsx(r("IGDSButton.react"),{display:"block",label:C,onClick:l,variant:"primary_link"})})}),t[20]=l,t[21]=C,t[22]=k):k=t[22];var I;t[23]===Symbol.for("react.memo_cache_sentinel")?(I=o("PolarisUA").isMobile()&&c.jsx(r("IGDSBox.react"),{alignItems:"center",position:"relative",children:c.jsx(r("PolarisAuthTypeSwitcher.react"),{primary:!0})}),t[23]=I):I=t[23];var T;return t[24]!==E||t[25]!==k?(T=c.jsxs(r("IGDSBox.react"),{direction:"column",flex:"grow",children:[E,k,I]}),t[24]=E,t[25]=k,t[26]=T):T=t[26],T}function k(e){var t=e.fbConnectedUser,n=e.loginNonces,a=e.onLoginClick,i=e.onRemoveClick,l=e.onRequestFBLogin,s=e.requestInFlight,u=e.requestUserId,d=e.showSingleAccountProfilePicture,_=d===void 0?!0:d,h=p({id:"",username:""}),y=h[0],C=h[1],b=p(!1),v=b[0],S=b[1],R=r("usePolarisOneTapLoginEditModeState")(),k=R[0],I=R[1];r("useSingleSimpleImpression")(function(){Object.keys(n).length===1?o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_single_user_form_load",login_type:"device_based_login"}):o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_multi_user_form_load",login_type:"device_based_login"}),o("PolarisLoginLogger").logLoginEvent({event_category:"aymh_home_page_init",event_flow:"aymh",event_name:"aymh_step_view_loaded",event_step:"home_page",extra_client_data:{total_count:Object.keys(n).length.toString()}})});var T=m(function(e,t){a(e,t,function(){return T(e,t)}),o("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_login_click",extra_client_data:{credential_type:"nonce"},login_type:"device_based_login"})},[a]),D=m(function(e,t){C({id:e,username:t}),S(!0),o("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_remove_account_prompt_show",login_type:"device_based_login"})},[]),x=m(function(e){i(e)},[i]),$=m(function(){C({id:"",username:""}),S(!1),o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_remove_account_prompt_hide",login_type:"device_based_login"})},[]),P=m(function(){I(!k)},[k,I]),N=function(t){return s&&t!==u},M=function(t){return s&&t===u},w=Object.keys(n).length===1&&!t;return c.jsxs(r("IGDSBox.react"),{alignItems:"stretch",direction:"column",xstyle:f.root,children:[w?c.jsx(L,{handleLoginClick:T,handleRemoveAccountClick:D,isLoginButtonLoading:M,loginNonces:n,showSingleAccountProfilePicture:_}):c.jsx(E,{editMode:k,fbConnectedUser:t,handleLoginClick:T,handleManageAccountsClick:P,handleRemoveAccountClick:D,isLoginButtonDisabled:N,isLoginButtonLoading:M,loginNonces:n,onRequestFBLogin:l}),v&&y.id&&y.username&&c.jsx(g,{handleRemoveOneTapLoginDialogClose:$,handleRemoveOneTapLoginDialogConfirm:x,userId:y.id,username:y.username})]})}k.displayName=k.name+" [from "+i.id+"]";function I(e){var t,n,r=e.auth;return{requestInFlight:(r==null||(t=r.login)==null?void 0:t.requestInFlight)===!0,requestUserId:r==null||(n=r.login)==null?void 0:n.userId}}function T(e){return{onLoginClick:function(n,r,a){e(o("PolarisLoginActionOneTapLogin").oneTapLogin({loginNonce:r,retry:a,userId:n}))},onRemoveClick:function(n){e(o("PolarisLoginActionOneTapLoginRemove").oneTapLoginRemove(n))}}}var D=o("PolarisReactRedux.react").connect(I,T)(k);l.default=D}),226);
__d("PolarisBirthdaySignupForm.react",["ix","IGCoreImage.react","IGDSBox.react","IGDSTextVariants.react","PolarisAgeCollectionHelpers","PolarisAuthStrings","PolarisBirthdayFormInput.react","PolarisBirthdaysAdditionalInfoModal.react","PolarisDateHelpers","PolarisDateStrings","PolarisExternalLink.react","PolarisIGCoreButton.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","gkx","react","usePolarisEmailOrPhoneContactpointType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useState;function p(e){var t,n=e.onBirthdayEntered,a=e.onSignup,i=e.pageIdentifier,l=e.requestInFlight,c=e.shouldShowBirthdayTransparency,p=c===void 0?!1:c,_=e.shouldShowRedesignedSignup,f=_===void 0?!1:_,g=e.signupNonSpecificError,h=e.style,y=h===void 0?"default":h,C=o("PolarisReactRedux.react").useDispatch(),b=m(!1),v=b[0],S=b[1],R=o("PolarisReactRedux.react").useSelector(function(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}),L=m((R==null||(t=R.fields.birthday)==null?void 0:t.value)!=null?o("PolarisDateHelpers").dateToDateType(new Date(R.fields.birthday.value)):o("PolarisDateHelpers").getOneYearAgoDateType()),E=L[0],k=L[1],I=r("usePolarisEmailOrPhoneContactpointType")(),T=function(){C(o("PolarisSignupActions").returnToBaseSignupForm()),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:I,event_name:"back_button_clicked",step:"birthday"})},D=o("PolarisAgeCollectionHelpers").isDOBInputAttemptDisabled(E),x=function(){var e=o("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(R);e.birthday=o("PolarisDateHelpers").dateTypeToString(E),r("gkx")("14029")===!0&&n(),a(e)},$=function(t){o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:i,event_name:"birthday_interaction"}),k(t)};return d(function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:I,event_name:"form_load",step:"birthday"})},[I]),u.jsxs(u.Fragment,{children:[u.jsx(r("PolarisSignupFormFields.react"),{handleGoBack:T,handleNext:x,header:o("PolarisAuthStrings").BIRTHDAY_HEADER_TEXT,icon:f?null:u.jsx(r("IGCoreImage.react"),{alt:o("PolarisAgeCollectionHelpers").BIRTHDAY_ICON_ALT_TEXT,src:{dark:s("877412"),light:s("877413")}}),isNextActionDisabled:D,maxWidth:400,requestInFlight:l,shouldShowRedesignedSignup:f,signupNonSpecificError:g,style:y,subHeader:o("PolarisAuthStrings").BIRTHDAY_SUBHEADER_TEXT,children:u.jsxs(u.Fragment,{children:[u.jsx(r("IGDSBox.react"),{marginBottom:f?5:2,position:"relative",children:u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return S(!0)},children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",children:o("PolarisAuthStrings").BIRTHDAY_WHY_LINK_TEXT})})}),u.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:u.jsx(r("PolarisBirthdayFormInput.react"),{birthday:o("PolarisDateHelpers").dateTypeToString(E),onBirthdayChange:$,shouldShowRedesignedSignup:f})}),u.jsxs(r("IGDSBox.react"),{position:"relative",width:"100%",children:[u.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",textAlign:"center",children:o("PolarisDateStrings").getBirthdayDisclaimerText()})}),p&&u.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:u.jsxs(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",textAlign:"center",children:[o("PolarisDateStrings").getBirthdayTransparencyText(),u.jsx(r("PolarisExternalLink.react"),{href:o("PolarisDateStrings").PRIVACY_POLICY_LINK,rel:"noopener noreferrer",target:"_blank",children:u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",children:o("PolarisDateStrings").getPrivacyPolicyText()})})})]})})]})]})}),v&&u.jsx(r("PolarisBirthdaysAdditionalInfoModal.react"),{onClose:function(){return S(!1)}})]})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("PolarisCaptchaSignupForm.react",["IGDSBox.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisReactRedux.react","PolarisRecaptcha","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","react","usePolarisEmailOrPhoneContactpointType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=e.onSignup,n=e.requestInFlight,a=e.signupNonSpecificError,i=e.style,l=i===void 0?"default":i,u=o("PolarisReactRedux.react").useDispatch(),m=d(function(){return""}),p=m[0],_=m[1],f=o("PolarisReactRedux.react").useSelector(function(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}),g=r("usePolarisEmailOrPhoneContactpointType")();c(function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:g,event_name:"form_load",step:"captcha"})},[g]);var h=function(){u(o("PolarisSignupActions").returnToBaseSignupForm()),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:g,event_name:"back_button_clicked",step:"captcha"})},y=p==="",C=function(){var e=o("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(f);e.captcha=p,t(e)},b=function(t){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:g,event_name:"captcha_solved"}),_(t)};return s.jsxs(r("PolarisSignupFormFields.react"),{handleGoBack:h,handleNext:C,header:o("PolarisAuthStrings").SIGN_UP_BUTTON_TEXT,isNextActionDisabled:y,requestInFlight:n,style:l,subHeader:o("PolarisAuthStrings").SIGN_UP_PHONE_LINK_TEXT,children:[s.jsx(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",position:"relative",children:s.jsx(r("PolarisRecaptcha"),{onChange:b})}),a!=null&&s.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:a})})]})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("PolarisEmailConfirmationForm.react",["fbt","ix","IGCoreImage.react","IGDSBox.react","IGDSButton.react","IGDSDialogFooter.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisIGCoreTextInput.react","PolarisLabeledTextInput.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useEffect,_=d.useState,f=6,g=s._(/*BTDS*/"Confirma\u00e7\u00e3o por email"),h=350;function y(e){var t,n,a=o("react-compiler-runtime").c(75),i=e.onSubmit,l=e.pageIdentifier,s=e.requestInFlight,d=e.shouldShowRedesignedSignup,m=e.signupNonSpecificError,y=e.style,b=d===void 0?!1:d,v=y===void 0?"default":y,S=o("PolarisReactRedux.react").useDispatch(),R=o("PolarisReactRedux.react").useSelector(C),L=(t=R==null||(n=R.fields.emailOrPhone)==null?void 0:n.value)!=null?t:"",E=_(""),k=E[0],I=E[1],T=_(!1),D=T[0],x=T[1],$=_(!1),P=$[0],N=$[1],M=k.length<f||s,w=m;if(w==null&&(R==null?void 0:R.fields)!=null){var A=R.fields,F=Object.keys(A).some(function(e){var t;return((t=A[e])==null?void 0:t.error)!=null});F&&(w=o("PolarisAuthStrings").ERROR_SIGNUP_UNKNOWN)}var O;a[0]===Symbol.for("react.memo_cache_sentinel")?(O=function(t){I(t.target.value)},a[0]=O):O=a[0];var B=O,W;a[1]!==S?(W=function(){S(o("PolarisSignupActions").returnToBaseSignupForm()),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",event_name:"back_button_clicked",step:"emailConfirmation"})},a[1]=S,a[2]=W):W=a[2];var q=W,U;a[3]!==S||a[4]!==L?(U=function(){S(o("PolarisSignupActions").requestConfirmationEmailWithLogging(L,null,!0))},a[3]=S,a[4]=L,a[5]=U):U=a[5];var V=U,H;a[6]!==k||a[7]!==M||a[8]!==i||a[9]!==R?(H=function(){if(!M&&R!=null){var e=Object.keys(R.fields).reduce(function(e,t){var n,r=(n=R.fields[t])==null?void 0:n.value;return r!=null&&t!=="optIntoOneTap"&&(e[t]=r),e},{});e.emailConfirmationCode=k,i(e)}},a[6]=k,a[7]=M,a[8]=i,a[9]=R,a[10]=H):H=a[10];var G=H,z,j;a[11]!==l?(z=function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",containermodule:l,event_name:"form_load",step:"emailConfirmation"})},j=[l],a[11]=l,a[12]=z,a[13]=j):(z=a[12],j=a[13]),p(z,j);var K;a[14]!==k.length||a[15]!==G||a[16]!==D?(K=function(){D||k.length===f&&r("qex")._("2155")===!0&&(x(!0),G())},a[14]=k.length,a[15]=G,a[16]=D,a[17]=K):K=a[17];var Q;a[18]!==k||a[19]!==G||a[20]!==D?(Q=[k,G,D],a[18]=k,a[19]=G,a[20]=D,a[21]=Q):Q=a[21],p(K,Q);var X;a[22]!==b?(X=b!==!0&&c.jsx(r("IGCoreImage.react"),{alt:g,src:{dark:u("148908"),light:u("835354")}}),a[22]=b,a[23]=X):X=a[23];var Y;a[24]!==b?(Y=c.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:4,position:"relative",children:b===!0?c.jsx(r("IGDSText.react"),{color:"primaryText",size:"title",textAlign:"center",weight:"bold",children:o("PolarisAuthStrings").JUST_ONE_MORE_STEP_HEADER}):c.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"center",children:o("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE_HEADER})}),a[24]=b,a[25]=Y):Y=a[25];var J=b?2:4,Z;a[26]!==L?(Z=o("PolarisAuthStrings").emailConfirmationCodeSubheader(L),a[26]=L,a[27]=Z):Z=a[27];var ee;a[28]!==V?(ee=c.jsx(r("IGDSButton.react"),{display:"block",label:o("PolarisAuthStrings").EMAIL_CONFIRMATION_RESEND_CODE,onClick:V,variant:"primary_link"}),a[28]=V,a[29]=ee):ee=a[29];var te;a[30]!==Z||a[31]!==ee?(te=c.jsxs(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:[Z," ",ee]}),a[30]=Z,a[31]=ee,a[32]=te):te=a[32];var ne;a[33]!==J||a[34]!==te?(ne=c.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginBottom:4,marginTop:J,position:"relative",children:te}),a[33]=J,a[34]=te,a[35]=ne):ne=a[35];var re;a[36]!==X||a[37]!==Y||a[38]!==ne?(re=c.jsxs(r("IGDSBox.react"),{alignItems:"center",maxWidth:h,paddingX:7,paddingY:2,position:"relative",children:[X,Y,ne]}),a[36]=X,a[37]=Y,a[38]=ne,a[39]=re):re=a[39];var oe;a[40]!==G?(oe=function(t){t.preventDefault(),G()},a[40]=G,a[41]=oe):oe=a[41];var ae;a[42]===Symbol.for("react.memo_cache_sentinel")?(ae=c.jsx("input",{className:"x1s85apg",type:"submit"}),a[42]=ae):ae=a[42];var ie=b?7:10,le;a[43]!==k||a[44]!==P||a[45]!==l||a[46]!==b?(le=c.jsx(r("IGDSBox.react"),{position:"relative",width:"100%",children:b===!0?c.jsx("div",babelHelpers.extends({},{0:{className:"x6s0dn4 x7r02ix x1yvgwvq xjd31um x1ixjvfu xwt6s21 x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x5n08af x78zum5 x1q0g3np xvs91rp x1n2onr6 xh8yej3"},1:{className:"x6s0dn4 x7r02ix x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x5n08af x78zum5 x1q0g3np xvs91rp x1n2onr6 xh8yej3 x19gtwsn xhpglom x1xp9za0 x1fqc88y"}}[!!P<<0],{children:c.jsx(r("PolarisLabeledTextInput.react"),{"aria-label":o("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,autoComplete:"off",isRedesignedSignupFieldInput:!0,maxLength:8,name:"email_confirmation_code",onBlur:function(){return N(!1)},onChange:B,onFocus:function(){N(!0),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",containermodule:l,event_name:"confirmation_interaction"})},placeholder:o("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,slimTextInputCol:!0,type:"text",value:k})})):c.jsx(r("PolarisIGCoreTextInput.react"),{"aria-label":o("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,autoComplete:"off",backgroundColor:"ig-secondary-background",maxLength:8,name:"email_confirmation_code",onChange:B,onFocus:function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",containermodule:l,event_name:"confirmation_interaction"})},placeholder:o("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,value:k})}),a[43]=k,a[44]=P,a[45]=l,a[46]=b,a[47]=le):le=a[47];var se;a[48]!==M||a[49]!==q||a[50]!==G||a[51]!==s||a[52]!==b||a[53]!==v?(se=v==="default"&&c.jsxs(c.Fragment,{children:[c.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",width:"100%",children:c.jsx(r("IGDSButton.react"),{fullWidth:!0,isDisabled:M,isLoading:s,label:b===!0?o("PolarisGenericStrings").FINISH:o("PolarisGenericStrings").NEXT,onClick:G})}),b===!0?c.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",width:"100%",children:c.jsx(r("PolarisIGCoreButton.react"),{borderless:!1,color:"ig-secondary-button",fullWidth:!0,onClick:q,children:o("PolarisGenericStrings").BACK_TEXT})}):c.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:c.jsx(r("IGDSButton.react"),{display:"block",isDisabled:s,label:o("PolarisGenericStrings").GO_BACK,onClick:q,variant:"primary_link"})})]}),a[48]=M,a[49]=q,a[50]=G,a[51]=s,a[52]=b,a[53]=v,a[54]=se):se=a[54];var ue;a[55]!==w?(ue=w!=null&&c.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:c.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:w})}),a[55]=w,a[56]=ue):ue=a[56];var ce;a[57]!==ie||a[58]!==le||a[59]!==se||a[60]!==ue?(ce=c.jsxs(r("IGDSBox.react"),{alignItems:"center",margin:"auto",marginBottom:2,marginTop:2,maxWidth:h,paddingX:ie,position:"relative",children:[le,se,ue]}),a[57]=ie,a[58]=le,a[59]=se,a[60]=ue,a[61]=ce):ce=a[61];var de;a[62]!==M||a[63]!==q||a[64]!==G||a[65]!==s||a[66]!==v?(de=v==="modal"&&c.jsx(r("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:c.jsx(r("IGDSDialogFooter.react"),{endAdornment:c.jsx(r("IGDSButton.react"),{display:"block",isDisabled:M,isLoading:s,label:o("PolarisAuthStrings").CONTINUE,onClick:G,variant:"primary_link"}),startAdornment:c.jsx(r("IGDSButton.react"),{display:"block",label:o("PolarisGenericStrings").BACK_TEXT,onClick:q,variant:"primary_link"})})}),a[62]=M,a[63]=q,a[64]=G,a[65]=s,a[66]=v,a[67]=de):de=a[67];var me;a[68]!==oe||a[69]!==ce||a[70]!==de?(me=c.jsx(r("IGDSBox.react"),{position:"relative",width:"100%",children:c.jsxs("form",{method:"POST",noValidate:!1,onSubmit:oe,children:[ae,ce,de]})}),a[68]=oe,a[69]=ce,a[70]=de,a[71]=me):me=a[71];var pe;return a[72]!==re||a[73]!==me?(pe=c.jsxs(c.Fragment,{children:[re,me]}),a[72]=re,a[73]=me,a[74]=pe):pe=a[74],pe}function C(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}l.default=y}),226);
__d("PolarisPhoneSignupChangeNumberForm.react",["fbt","IGDSBox.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisSlimTextInput.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useRef,p=c.useState,_="phoneSignupConfirmErrorAlert",f=s._(/*BTDS*/"Novo n\u00famero de telefone");function g(e){var t=o("react-compiler-runtime").c(35),n=e.errorMessage,a=e.initialPhoneNumber,i=e.onGoBackClick,l=e.onSubmit,c=e.requestInFlight,g=m(null),h=p(""),y=h[0],C=h[1],b,v;t[0]===Symbol.for("react.memo_cache_sentinel")?(b=function(){var e;(e=g.current)==null||e.focus()},v=[],t[0]=b,t[1]=v):(b=t[0],v=t[1]),d(b,v);var S;t[2]!==y||t[3]!==l?(S=function(t){t.preventDefault(),l(y)},t[2]=y,t[3]=l,t[4]=S):S=t[4];var R=S,L;t[5]===Symbol.for("react.memo_cache_sentinel")?(L=function(t){C(t.target.value)},t[5]=L):L=t[5];var E=L,k,I,T,D,x,$;t[6]===Symbol.for("react.memo_cache_sentinel")?(I={className:"x889kno xyri2b x1a8lsjc x1c1uobl"},T=u.jsx("h2",{className:"x972fbf x10w94by x1qhh985 x14e42zd x1lliihq xln7xf2 x1jchvi3 x1s688f xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x2b8uid x11njtxf",children:s._(/*BTDS*/"Alterar n\u00famero de telefone")}),D={className:"x972fbf x10w94by x1qhh985 x14e42zd x1lliihq xln7xf2 x1f6kntn x1fcty0u xd4r4e8 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x2b8uid x11njtxf"},x=u.jsx("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd x5n08af xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:s._(/*BTDS*/"N\u00famero de telefone atual:")}),$=u.jsx("br",{}),k={className:"x972fbf x10w94by x1qhh985 x14e42zd x1roi4f4 xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},t[6]=k,t[7]=I,t[8]=T,t[9]=D,t[10]=x,t[11]=$):(k=t[6],I=t[7],T=t[8],D=t[9],x=t[10],$=t[11]);var P;t[12]!==a?(P=u.jsxs("p",babelHelpers.extends({},D,{children:[x,$,u.jsx("span",babelHelpers.extends({},k,{children:a}))]})),t[12]=a,t[13]=P):P=t[13];var N;t[14]===Symbol.for("react.memo_cache_sentinel")?(N={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp x1lziwak x1yztbdb xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},t[14]=N):N=t[14];var M;t[15]===Symbol.for("react.memo_cache_sentinel")?(M="xdj266r x11gldyt x1iymm2a x11hdunq",t[15]=M):M=t[15];var w;t[16]!==y?(w=u.jsx(r("PolarisSlimTextInput.react"),{"aria-label":f,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:M,name:"newPhoneNumber",onChange:E,placeholder:f,ref:g,type:"tel",value:y}),t[16]=y,t[17]=w):w=t[17];var A;t[18]===Symbol.for("react.memo_cache_sentinel")?(A=s._(/*BTDS*/"Alterar"),t[18]=A):A=t[18];var F;t[19]!==R||t[20]!==c?(F=u.jsx(r("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,position:"relative",children:u.jsx(r("PolarisIGCoreButton.react"),{loading:c,onClick:R,children:A})}),t[19]=R,t[20]=c,t[21]=F):F=t[21];var O;t[22]!==R||t[23]!==w||t[24]!==F?(O=u.jsxs("form",babelHelpers.extends({},N,{method:"POST",onSubmit:R,children:[w,F]})),t[22]=R,t[23]=w,t[24]=F,t[25]=O):O=t[25];var B;t[26]!==n?(B=!r("isStringNullOrEmpty")(n)&&u.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 xkmlbd1 x78zum5 xdt5ytf x2lah0s xln7xf2 x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:u.jsx("p",{"aria-atomic":"true",id:_,role:"alert",children:n})}),t[26]=n,t[27]=B):B=t[27];var W;t[28]!==i?(W=u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:i,children:o("PolarisGenericStrings").GO_BACK}),t[28]=i,t[29]=W):W=t[29];var q;return t[30]!==P||t[31]!==O||t[32]!==B||t[33]!==W?(q=u.jsxs("div",babelHelpers.extends({},I,{children:[T,P,O,B,W]})),t[30]=P,t[31]=O,t[32]=B,t[33]=W,t[34]=q):q=t[34],q}l.default=g}),226);
__d("PolarisPhoneSignupConfirmForm.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSText.react","IGDSTextVariants.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisLabeledTextInput.react","PolarisMultiSignupConstants","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSlimTextInput.react","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useEffect,p=c.useRef,_=c.useState,f="phoneSignupConfirmErrorAlert",g="confirmationCodeDescription",h=s._(/*BTDS*/"S\u00f3 mais uma etapa");function y(e){return s._(/*BTDS*/"Insira o c\u00f3digo de 6 d\u00edgitos que enviamos para: {phone number}",[s._param("phone number",e)])}function C(e){return s._(/*BTDS*/"Insira o c\u00f3digo de 6 d\u00edgitos que enviamos para {phone number}.",[s._param("phone number",e)])}var b=s._(/*BTDS*/"Reenviar c\u00f3digo"),v=s._(/*BTDS*/"Alterar n\u00famero"),S=s._(/*BTDS*/"C\u00f3digo de confirma\u00e7\u00e3o"),R="######",L=s._(/*BTDS*/"Confirmar");function E(e,t){return u.jsx("div",{className:t,children:u.jsx("p",{"aria-atomic":"true",id:f,role:"alert",children:e})})}E.displayName=E.name+" [from "+i.id+"]";function k(e){var t=o("react-compiler-runtime").c(70),n=e.errorMessage,a=e.onChangeNumberClick,i=e.onResendClick,l=e.onSubmit,c=e.pageIdentifier,d=e.phoneNumber,f=e.requestInFlight,E=e.shouldShowRedesignedSignup,k=e.successMessage,x=E===void 0?!1:E,$=_(""),P=$[0],N=$[1],M=_(!1),w=M[0],A=M[1],F=p(null),O=_(!1),B=O[0],W=O[1],q,U;t[0]===Symbol.for("react.memo_cache_sentinel")?(q=function(){(F==null?void 0:F.current)!=null&&F.current.focus()},U=[],t[0]=q,t[1]=U):(q=t[0],U=t[1]),m(q,U);var V=D,H=T,G=o("PolarisReactRedux.react").useSelector(I),z;t[2]!==P||t[3]!==l||t[4]!==G?(z=function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",event_name:"twofac_form_next_clicked"});var e=P.replace(/\s+/g,"");if((G==null?void 0:G.fields)!=null){var t=Object.keys(G.fields).reduce(function(e,t){var n,r=(n=G.fields[t])==null?void 0:n.value;return r!=null&&t!=="optIntoOneTap"&&(e[t]=r),e},{});t.twofac=e,l(t)}},t[2]=P,t[3]=l,t[4]=G,t[5]=z):z=t[5];var j=z,K;t[6]===Symbol.for("react.memo_cache_sentinel")?(K=function(t){var e=t.target.value;e.match(/^[0-9 ]*$/)&&N(e)},t[6]=K):K=t[6];var Q=K,X;t[7]!==P.length||t[8]!==j||t[9]!==w?(X=function(){w||P.length===o("PolarisMultiSignupConstants").TWO_FAC_CODE_MIN_LENGTH&&r("qex")._("2156")===!0&&(A(!0),j())},t[7]=P.length,t[8]=j,t[9]=w,t[10]=X):X=t[10];var Y;t[11]!==P||t[12]!==j||t[13]!==w?(Y=[P,j,w],t[11]=P,t[12]=j,t[13]=w,t[14]=Y):Y=t[14],m(X,Y);var J;t[15]===Symbol.for("react.memo_cache_sentinel")?(J={className:"x889kno xyri2b x1a8lsjc x1c1uobl"},t[15]=J):J=t[15];var Z;t[16]!==x?(Z=u.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:x?u.jsx(r("IGDSText.react"),{color:"primaryText",size:"title",textAlign:"center",weight:"bold",children:h}):u.jsx(r("IGDSText.react"),{size:"label",textAlign:"center",weight:"semibold",children:h})}),t[16]=x,t[17]=Z):Z=t[17];var ee=x?1:4,te=x?2:4,ne;t[18]!==d||t[19]!==x?(ne=x?C(d):y(d),t[18]=d,t[19]=x,t[20]=ne):ne=t[20];var re;t[21]!==ne?(re=u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:ne}),t[21]=ne,t[22]=re):re=t[22];var oe;t[23]!==ee||t[24]!==te||t[25]!==re?(oe=u.jsx(r("IGDSBox.react"),{marginBottom:ee,marginTop:te,position:"relative",children:re}),t[23]=ee,t[24]=te,t[25]=re,t[26]=oe):oe=t[26];var ae;t[27]!==i||t[28]!==x?(ae=x===!0&&u.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginBottom:5,position:"relative",children:u.jsx(r("IGDSButton.react"),{display:"block",label:b,onClick:function(t){i(t)},variant:"primary_link"})}),t[27]=i,t[28]=x,t[29]=ae):ae=t[29];var ie;t[30]!==oe||t[31]!==ae||t[32]!==Z?(ie=u.jsxs(r("IGDSBox.react"),{alignItems:"center",id:g,paddingX:7,position:"relative",children:[Z,oe,ae]}),t[30]=oe,t[31]=ae,t[32]=Z,t[33]=ie):ie=t[33];var le;t[34]===Symbol.for("react.memo_cache_sentinel")?(le={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp x1lziwak x1yztbdb xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},t[34]=le):le=t[34];var se;t[35]!==j?(se=function(t){t.preventDefault(),j()},t[35]=j,t[36]=se):se=t[36];var ue;t[37]!==P||t[38]!==B||t[39]!==c||t[40]!==x?(ue=x===!0?u.jsx(r("IGDSBox.react"),{marginBottom:4,paddingX:7,children:u.jsx("div",babelHelpers.extends({},{0:{className:"x6s0dn4 x7r02ix x1yvgwvq xjd31um x1ixjvfu xwt6s21 x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x5n08af x78zum5 x1q0g3np xvs91rp x1n2onr6 xh8yej3"},1:{className:"x6s0dn4 x7r02ix x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x5n08af x78zum5 x1q0g3np xvs91rp x1n2onr6 xh8yej3 x19gtwsn xhpglom x1xp9za0 x1fqc88y"}}[!!B<<0],{children:u.jsx(r("PolarisLabeledTextInput.react"),{"aria-label":S,autoComplete:"off",isRedesignedSignupFieldInput:!0,maxLength:8,name:"phone_confirmation_code",onBlur:function(){return W(!1)},onChange:Q,onFocus:function(){W(!0),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",containermodule:c,event_name:"confirmation_interaction"})},placeholder:S,slimTextInputCol:!0,type:"text",value:P})}))}):u.jsx(r("PolarisSlimTextInput.react"),{"aria-describedby":g,"aria-label":R,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:"xdj266r x11gldyt x1iymm2a x11hdunq",maxLength:6,name:"confirmationCode",onChange:Q,onFocus:function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",containermodule:c,event_name:"confirmation_interaction"})},placeholder:R,ref:F,type:"tel",value:P}),t[37]=P,t[38]=B,t[39]=c,t[40]=x,t[41]=ue):ue=t[41];var ce;t[42]!==P.length||t[43]!==n||t[44]!==j||t[45]!==a||t[46]!==f||t[47]!==x||t[48]!==k?(ce=x===!0?u.jsxs(u.Fragment,{children:[u.jsx(r("IGDSBox.react"),{paddingX:4,position:"relative",width:"100%",children:u.jsx(r("IGDSButton.react"),{fullWidth:!0,isDisabled:P.length<o("PolarisMultiSignupConstants").TWO_FAC_CODE_MIN_LENGTH||f,isLoading:f,label:o("PolarisGenericStrings").FINISH,onClick:j})}),u.jsx(r("IGDSBox.react"),{marginTop:2,paddingX:4,position:"relative",width:"100%",children:u.jsx(r("PolarisIGCoreButton.react"),{borderless:!1,color:"ig-secondary-button",fullWidth:!0,onClick:a,children:v})}),n!=null&&n!==""&&u.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:n})}),k!=null&&k!==""&&u.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:k})})]}):u.jsx(r("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,position:"relative",children:u.jsx(r("PolarisIGCoreButton.react"),{loading:f,onClick:j,children:L})}),t[42]=P.length,t[43]=n,t[44]=j,t[45]=a,t[46]=f,t[47]=x,t[48]=k,t[49]=ce):ce=t[49];var de;t[50]!==se||t[51]!==ue||t[52]!==ce?(de=u.jsxs("form",babelHelpers.extends({},le,{method:"POST",onSubmit:se,children:[ue,ce]})),t[50]=se,t[51]=ue,t[52]=ce,t[53]=de):de=t[53];var me;t[54]!==n||t[55]!==x?(me=!x&&n!=null&&n!==""&&V(n),t[54]=n,t[55]=x,t[56]=me):me=t[56];var pe;t[57]!==x||t[58]!==k?(pe=!x&&k!=null&&k!==""&&H(k),t[57]=x,t[58]=k,t[59]=pe):pe=t[59];var _e;t[60]!==a||t[61]!==i||t[62]!==x?(_e=!x&&u.jsxs("div",{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt x1yztbdb x11hdunq x2b8uid",children:[u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:s._(/*BTDS*/"Alterar n\u00famero")})," | ",u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:i,children:s._(/*BTDS*/"Solicitar novo c\u00f3digo")})]}),t[60]=a,t[61]=i,t[62]=x,t[63]=_e):_e=t[63];var fe;return t[64]!==ie||t[65]!==de||t[66]!==me||t[67]!==pe||t[68]!==_e?(fe=u.jsxs("div",babelHelpers.extends({},J,{children:[ie,de,me,pe,_e]})),t[64]=ie,t[65]=de,t[66]=me,t[67]=pe,t[68]=_e,t[69]=fe):fe=t[69],fe}function I(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}function T(e){return E(e,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x5n08af")}function D(e){return E(e,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid xkmlbd1")}l.default=k}),226);
__d("PolarisPhoneSignupForm.react",["fbt","invariant","FBLogger","IGDSBox.react","PolarisAssetManagerGlyphMapping","PolarisIGCoreIcon.react","PolarisPhoneSignupChangeNumberForm.react","PolarisPhoneSignupConfirmForm.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useEffect,m=s._(/*BTDS*/"Confirma\u00e7\u00e3o do telefone");function p(e){var t=o("react-compiler-runtime").c(37),n=e.onSubmit,a=e.pageIdentifier,i=e.requestInFlight,l=e.shouldShowRedesignedSignup,p=l===void 0?!1:l,y=o("PolarisReactRedux.react").useSelector(h),C=o("PolarisReactRedux.react").useSelector(g),b=o("PolarisReactRedux.react").useSelector(f),v=o("PolarisReactRedux.react").useSelector(_),S=o("PolarisReactRedux.react").useDispatch(),R;t[0]!==S?(R=function(){return S(o("PolarisSignupActions").switchPhoneSignupStep("changePhoneNumber"))},t[0]=S,t[1]=R):R=t[1];var L=R,E;t[2]!==S?(E=function(){return S(o("PolarisSignupActions").switchPhoneSignupStep("enterCode"))},t[2]=S,t[3]=E):E=t[3];var k=E,I;t[4]!==S?(I=function(t){return S(o("PolarisSignupActions").rerequestSMSCode(t))},t[4]=S,t[5]=I):I=t[5];var T=I,D;t[6]!==S?(D=function(){return S(o("PolarisSignupActions").rerequestSMSCode())},t[6]=S,t[7]=D):D=t[7];var x=D;!r("isStringNullOrEmpty")(C)||u(0,51615);var $,P;t[8]!==a?($=function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",containermodule:a,event_name:"form_load",step:"twofac"})},P=[a],t[8]=a,t[9]=$,t[10]=P):($=t[9],P=t[10]),d($,P);var N;if(b==="enterCode"){var M;t[11]!==v?(M=v&&c.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x5n08af x78zum5 xdt5ytf x2lah0s xln7xf2 x1f6kntn xd4r4e8 x1anpbxc x3aesyq xyorhqc xqsn43r xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:s._(/*BTDS*/"Seu c\u00f3digo foi reenviado.")}),t[11]=v,t[12]=M):M=t[12];var w;t[13]!==L||t[14]!==x||t[15]!==n||t[16]!==a||t[17]!==C||t[18]!==i||t[19]!==p||t[20]!==y?(w=c.jsx(r("PolarisPhoneSignupConfirmForm.react"),{errorMessage:y,onChangeNumberClick:L,onResendClick:x,onSubmit:n,pageIdentifier:a,phoneNumber:C,requestInFlight:i,shouldShowRedesignedSignup:p,successMessage:null}),t[13]=L,t[14]=x,t[15]=n,t[16]=a,t[17]=C,t[18]=i,t[19]=p,t[20]=y,t[21]=w):w=t[21];var A;t[22]!==M||t[23]!==w?(A=c.jsxs("div",{children:[M,w]}),t[22]=M,t[23]=w,t[24]=A):A=t[24],N=A}else if(b==="changePhoneNumber"){var F;t[25]!==T||t[26]!==k||t[27]!==C||t[28]!==i||t[29]!==y?(F=c.jsx(r("PolarisPhoneSignupChangeNumberForm.react"),{errorMessage:y,initialPhoneNumber:C,onGoBackClick:k,onSubmit:T,requestInFlight:i}),t[25]=T,t[26]=k,t[27]=C,t[28]=i,t[29]=y,t[30]=F):F=t[30],N=F}else return r("FBLogger")("ig_web").mustfix("Unexpected phone signup step"),null;var O;t[31]!==b||t[32]!==p?(O=(!p||b==="changePhoneNumber")&&c.jsx(r("PolarisIGCoreIcon.react"),{alt:m,icon:o("PolarisAssetManagerGlyphMapping").ICONS.PHONE_CONFIRM}),t[31]=b,t[32]=p,t[33]=O):O=t[33];var B;return t[34]!==N||t[35]!==O?(B=c.jsxs(r("IGDSBox.react"),{alignItems:"center",position:"relative",children:[O,N]}),t[34]=N,t[35]=O,t[36]=B):B=t[36],B}function _(e){var t;return((t=e.auth.signup)==null?void 0:t.resentResetCode)||!1}function f(e){var t;return(t=e.auth.signup)==null?void 0:t.phoneSignupConfirmStep}function g(e){var t;return(t=e.auth.signup)==null||(t=t.signupCredentials)==null?void 0:t.phoneNumber}function h(e){var t;return(t=e.auth.signup)==null?void 0:t.signupNonSpecificError}l.default=p}),226);
__d("PolarisEmailDomainHelpers",["PolarisConfig","memoize"],(function(t,n,r,o,a,i,l){"use strict";var e={"aol.com":{initialSuggestion:!1},"bk.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"gmail.com":{initialSuggestion:!0},"gmx.de":{countryCodeFilter:"DE",initialSuggestion:!1},"hotmail.com":{initialSuggestion:!0},"icloud.com":{initialSuggestion:!1},"inbox.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"list.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"live.com":{initialSuggestion:!1},"mail.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"msn.com":{initialSuggestion:!1},"naver.com":{initialSuggestion:!1},"onet.pl":{countryCodeFilter:"PL",initialSuggestion:!1},"outlook.com":{initialSuggestion:!0},"qq.com":{initialSuggestion:!1},"rambler.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"web.de":{countryCodeFilter:"DE",initialSuggestion:!1},"yahoo.co.jp":{countryCodeFilter:"JP",initialSuggestion:!1},"yahoo.com":{initialSuggestion:!0},"yandex.com":{initialSuggestion:!1},"yandex.ru":{countryCodeFilter:"RU",initialSuggestion:!1}},s=r("memoize")(function(){return Object.keys(e).filter(function(t){var n=e[t];return"countryCodeFilter"in n?n.countryCodeFilter===o("PolarisConfig").getCountryCode():!0})}),u=r("memoize")(function(){return s().reduce(function(t,n){var r=e[n];return r.initialSuggestion?[].concat(t,[n]):t},[])}),c={"gail.com":"gmail.com","gamel.com":"gmail.com","gamil.com":"gmail.com","gamli.com":"gmail.com","gemil.com":"gmail.com","gma.com":"gmail.com","gmail.co":"gmail.com","gmaile.com":"gmail.com","gmali.com":"gmail.com","gmall.com":"gmail.com","gmel.com":"gmail.com","gmeli.com":"gmail.com","gmile.com":"gmail.com"};function d(e){var t=e.split("@"),n=t[0],r=t[1];return r&&Object.prototype.hasOwnProperty.call(c,r)?n+"@"+c[r]:null}l.getPopularDomainList=s,l.getInitialSuggestedPopularDomains=u,l.getSuggestedEmail=d}),98);
__d("PolarisMultiSignupEmailSuggestionDialog.react",["fbt","IGCoreDialog.react","PolarisRegistrationLogger","memoizeStringOnly","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,t.handleSuggestionClick=function(e){e===t.props.emailSuggestion?o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint:e,contactpoint_type:"email",event_name:"typo_fix_accept"}):o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint:e,contactpoint_type:"email",event_name:"typo_fix_skip"}),t.props.onSelection(e)},t.$1=r("memoizeStringOnly")(function(e){return t.handleSuggestionClick.bind(babelHelpers.assertThisInitialized(t),e)}),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getEmailDomain=function(t){return t.split("@")[1]},n.render=function(){var e=this.props,t=e.emailSuggestion,n=e.originalEmail;return u.jsxs(o("IGCoreDialog.react").IGCoreDialog,{body:s._(/*BTDS*/"Parece que voc\u00ea n\u00e3o digitou o seu endere\u00e7o de email corretamente. Voc\u00ea queria usar o {filled email domain}?",[s._param("filled email domain",u.jsx("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd xln7xf2 xk390pu xl7tqy7 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:"@"+this.getEmailDomain(n)}))]),onModalClose:this.props.onClose,title:s._(/*BTDS*/"Cometeu um erro?"),children:[u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-primary-button",onClick:this.$1(t),children:s._(/*BTDS*/"Usar {email suggestion} em vez disso",[s._param("email suggestion","@"+this.getEmailDomain(t))])}),u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.$1(n),children:s._(/*BTDS*/"Manter como est\u00e1")})]})},t})(u.Component);l.default=c}),226);
__d("PolarisSlimSignupUsernameSuggestions.react",["IGDSBox.react","IGDSButton.react","PolarisRegistrationLogger","gkx","isEmail","polarisIsPhoneNumber","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState,m=38,p=134;function _(e){return e==null||e===""?null:r("isEmail")(e)?"email":r("polarisIsPhoneNumber")(e)?"phone":null}function f(e){var t=o("react-compiler-runtime").c(28),n=e.emailOrPhone,a=e.onUsernameUpdate,i=e.pageIdentifier,l=e.shouldShowUsername,u=e.username,f=e.usernameSuggestions,h=l===void 0?!0:l,y;t[0]!==f?(y=f.filter(g),t[0]=f,t[1]=y):y=t[1];var C=y,b=d(C),v=b[0],S=b[1],R=d(!1),L=R[0],E=R[1],k,I;t[2]!==C||t[3]!==i?(k=function(){C.length>0&&o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:i,event_name:"username_suggestion_fetch_success"}),S(C)},I=[C,i],t[2]=C,t[3]=i,t[4]=k,t[5]=I):(k=t[4],I=t[5]),c(k,I);var T;t[6]!==C[0]||t[7]!==C.length||t[8]!==L||t[9]!==a||t[10]!==h||t[11]!==u?(T=function(){if(!L){if(u!=null&&u!=="")E(!0);else if(C.length>0){var e,t=!h||((e=r("gkx")("3317"))!=null?e:!1);t&&a(C[0]),E(!0)}}},t[6]=C[0],t[7]=C.length,t[8]=L,t[9]=a,t[10]=h,t[11]=u,t[12]=T):T=t[12];var D;if(t[13]!==C||t[14]!==L||t[15]!==a||t[16]!==h||t[17]!==u?(D=[u,C,L,a,h],t[13]=C,t[14]=L,t[15]=a,t[16]=h,t[17]=u,t[18]=D):D=t[18],c(T,D),C.length===0||!h)return null;var x;if(t[19]!==n||t[20]!==a||t[21]!==v){var $;t[23]!==n||t[24]!==a?($=function(t){return s.jsx("div",{className:"x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x6ikm8r x10wlt62 x1n2onr6",style:{height:m,width:p},children:s.jsx(r("IGDSBox.react"),{marginBottom:2,marginEnd:1,position:"relative",children:s.jsx(r("IGDSButton.react"),{label:t,onClick:function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:_(n),event_name:"click_username_suggestions"}),a(t)},variant:"secondary"})})},t)},t[23]=n,t[24]=a,t[25]=$):$=t[25],x=v.slice(0,2).map($),t[19]=n,t[20]=a,t[21]=v,t[22]=x}else x=t[22];var P;return t[26]!==x?(P=s.jsx(r("IGDSBox.react"),{direction:"row",height:m,marginEnd:10,marginStart:10,position:"relative",children:x}),t[26]=x,t[27]=P):P=t[27],P}function g(e){return e.length<14}l.default=f}),98);
__d("PolarisTermsPrivacyPolicyBlurb.react",["fbt","IGDSTextVariants.react","PolarisConsentTypes","PolarisExternalRoutes","PolarisFastLink.react","PolarisReactRedux.react","PolarisRoutes","URI","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react"));function d(t,n){return new(e||(e=r("URI")))(t).addQueryData({entry_point:n}).toString()}var m="ig_polaris_email_signup_eu_terms",p="ig_polaris_email_signup_eu_privacy_policy",_="ig_polaris_email_signup_eu_cookies_policy",f="ig_polaris_email_signup_row_terms",g="ig_polaris_email_signup_row_privacy_policy",h="ig_polaris_email_signup_row_cookies_policy";function y(){return r("gkx")("25366")===!0}function C(e){var t=o("react-compiler-runtime").c(3),n=e.className,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:s._(/*BTDS*/"Ao se cadastrar, voc\u00ea concorda com nossos {=Terms} e {=Privacy Policy}.",[s._param("=Terms",c.jsx(r("PolarisFastLink.react"),{href:"/legal/terms/",target:"_blank",children:s._(/*BTDS*/"Termos")})),s._param("=Privacy Policy",c.jsx(r("PolarisFastLink.react"),{href:"/legal/privacy/",target:"_blank",children:s._(/*BTDS*/"Pol\u00edtica de Privacidade")}))])}),t[0]=a):a=t[0];var i;return t[1]!==n?(i=c.jsx("p",{className:n,children:a}),t[1]=n,t[2]=i):i=t[2],i}function b(e){return e===void 0&&(e=!0),c.jsxs(c.Fragment,{children:[c.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:s._(/*BTDS*/"As pessoas que usam nosso servi\u00e7o podem ter carregado suas informa\u00e7\u00f5es de contato no Instagram. {Contact uploading for non-users privacy policy}",[s._param("Contact uploading for non-users privacy policy",c.jsx(r("PolarisFastLink.react"),{href:o("PolarisExternalRoutes").FACEBOOK_CONTACT_UPLOADING_AND_NON_USERS,target:"_blank",children:s._(/*BTDS*/"Saiba mais")}))])}),e&&c.jsxs(c.Fragment,{children:[c.jsx("br",{}),c.jsx("br",{})]})]})}function v(e){var t=o("react-compiler-runtime").c(7),n=e.className,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsxs(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:[b(),s._(/*BTDS*/"Ao se cadastrar, voc\u00ea concorda com nossos {=Terms}. Saiba como coletamos, usamos e compartilhamos seus dados na nossa {Privacy Policy} e como usamos cookies e tecnologias semelhantes na nossa {Cookies Policy}.",[s._param("=Terms",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,m),target:"_blank",children:s._(/*BTDS*/"Termos")})),s._param("Privacy Policy",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisExternalRoutes").NEW_PRIVACY_POLICY_PATH,p),target:"_blank",children:s._(/*BTDS*/"Pol\u00edtica de Privacidade")})),s._param("Cookies Policy",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisRoutes").NEW_COOKIE_POLICY_PATH,_),target:"_blank",children:s._(/*BTDS*/"Pol\u00edtica de Cookies")}))])]}),t[0]=a):a=t[0];var i,l;t[1]!==n?(i=c.jsx("p",{className:n,children:a}),l=y()&&c.jsx("p",{className:n,children:c.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:s._(/*BTDS*/"{=fund our services} usando seus dados pessoais para mostrar an\u00fancios.",[s._param("=fund our services",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,m),target:"_blank",children:s._(/*BTDS*/"Mantemos nossos servi\u00e7os")}))])})}),t[1]=n,t[2]=i,t[3]=l):(i=t[2],l=t[3]);var u;return t[4]!==i||t[5]!==l?(u=c.jsxs(c.Fragment,{children:[i,l]}),t[4]=i,t[5]=l,t[6]=u):u=t[6],u}function S(e){var t=o("react-compiler-runtime").c(3),n=e.className,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsxs(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:[b(),s._(/*BTDS*/"Ao se cadastrar, voc\u00ea concorda com nossos {=Terms}, {Privacy Policy} e {Cookies Policy}.",[s._param("=Terms",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,f),target:"_blank",children:s._(/*BTDS*/"Termos")})),s._param("Privacy Policy",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisExternalRoutes").NEW_PRIVACY_POLICY_PATH,g),target:"_blank",children:s._(/*BTDS*/"Pol\u00edtica de Privacidade")})),s._param("Cookies Policy",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisRoutes").NEW_COOKIE_POLICY_PATH,h),target:"_blank",children:s._(/*BTDS*/"Pol\u00edtica de Cookies")}))])]}),t[0]=a):a=t[0];var i;return t[1]!==n?(i=c.jsx("p",{className:n,children:a}),t[1]=n,t[2]=i):i=t[2],i}function R(e){var t=o("react-compiler-runtime").c(3),n=e.className,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=b(!1),t[0]=r):r=t[0];var a;return t[1]!==n?(a=c.jsx("p",{className:n,children:r}),t[1]=n,t[2]=a):a=t[2],a}function L(e){var t=o("react-compiler-runtime").c(8),n=e.className,r=e.cpeOnly,a=e.tosVersion,i=r===void 0?!1:r;if(i){var l;return t[0]!==n?(l=c.jsx(R,{className:n}),t[0]=n,t[1]=l):l=t[1],l}switch(a){case o("PolarisConsentTypes").TosVersion.EU:{var s;return t[2]!==n?(s=c.jsx(v,{className:n}),t[2]=n,t[3]=s):s=t[3],s}case o("PolarisConsentTypes").TosVersion.ROW:{var u;return t[4]!==n?(u=c.jsx(S,{className:n}),t[4]=n,t[5]=u):u=t[5],u}case o("PolarisConsentTypes").TosVersion.DEFAULT:default:{var d;return t[6]!==n?(d=c.jsx(C,{className:n}),t[6]=n,t[7]=d):d=t[7],d}}}function E(e){return{tosVersion:e.signup.tosVersion}}var k=o("PolarisReactRedux.react").connect(E)(L);l.default=k}),226);
__d("whitelistObjectKeys",[],(function(t,n,r,o,a,i){function e(e,t){for(var n={},r=Array.isArray(t)?t:Object.keys(t),o=0;o<r.length;o++)typeof e[r[o]]!="undefined"&&(n[r[o]]=e[r[o]]);return n}i.default=e}),66);
__d("PolarisSlimSignupForm.react",["cx","fbt","IGDSBox.react","IGDSSpinner.react","IGDSText.react","IGDSTextVariants.react","PolarisAgeCollectionHelpers","PolarisAuthConstants","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisBirthdaysAdditionalInfoModal.react","PolarisDOBFieldSelect.react","PolarisDateHelpers","PolarisDateStrings","PolarisEmailDomainHelpers","PolarisFastLink.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisLinkBuilder","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutUpsellStrings","PolarisMultiSignupEmailSuggestionDialog.react","PolarisOrBar.react","PolarisRegistrationLogger","PolarisRelayEnvironment","PolarisSlimSignupUsernameSuggestions.react","PolarisSlimTextInput.react","PolarisTermsPrivacyPolicyBlurb.react","PolarisUA","PolarisWebStorage","fetchPolarisLoggedOutExperiment","gkx","joinClasses","nullthrows","polarisIsPhoneNumber","polarisSignupSelectors","promiseDone","react","whitelistObjectKeys"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=["username","password","emailOrPhone","fullName","optIntoOneTap"],m=(function(e){function t(t){var n,a,i,l,s,u,c;c=e.call(this,t)||this,c.$5=function(){c.setState({emailSuggestion:null})},c.$6=function(e){c.setState({emailOrPhone:e,emailSuggestion:null},function(){c.$7()})},c.$8=function(){var e,t=c.props.usernameSuggestions.indexOf((e=c.state.username)!=null?e:"");c.setState({username:c.props.usernameSuggestions[++t]||c.props.usernameSuggestions[0]}),o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:"suggested_username_refreshed"})},c.$9=function(e){var t,n=e.target,r=n.name,o=n.value;c.setState((t={},t[r]=o,t))},c.$10=function(){var e=c.state.isPasswordHidden;c.setState({isPasswordHidden:!e}),e?o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:"show_password_clicked"}):o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:"hide_password_clicked"})},c.$11=function(e){e.relatedTarget instanceof HTMLElement&&c.$1&&c.$1.contains(e.relatedTarget)||c.$4(c.state,null)},c.$12=function(e,t){var n=e.target.name;c.$4(c.state,n),t&&o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:t})},c.$14=function(e){var t;e.preventDefault();var n=c.state.emailOrPhone;if(o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:"base_form_next_clicked"}),n!=null&&!r("polarisIsPhoneNumber")(n)){var a=o("PolarisEmailDomainHelpers").getSuggestedEmail(n);if(a!=null){c.setState({emailSuggestion:a});return}}var i=(t=c.props.signupResult)==null||(t=t.fields)==null||(t=t.username)==null?void 0:t.error;if(i!==void 0||c.state.username==null||c.state.username===""){c.setState({shouldShowUsername:!0});return}c.$7()},c.$15=function(e){e.keyCode===13&&c.$14(e)},c.$22=function(e){c.setState({username:e})},c.$23=function(){var e=c.props.pageIdentifier;o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login","auth_form",e)},c.$25=function(e){c.setState({birthday:e}),o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:"birthday_interaction"})},c.$26=function(){c.setState({showBirthdayAdditionalInfo:!0})},c.$27=function(){c.setState({showBirthdayAdditionalInfo:!1})};var d={birthday:((n=t.signupResult)==null||(n=n.fields)==null||(n=n.birthday)==null?void 0:n.value)!=null?o("PolarisDateHelpers").dateToDateType(new Date(t.signupResult.fields.birthday.value)):o("PolarisDateHelpers").getOneYearAgoDateType(),emailOrPhone:((a=t.signupResult)==null||(a=a.fields)==null||(a=a.emailOrPhone)==null?void 0:a.value)||"",emailSuggestion:null,fullName:(i=(l=(s=t.signupResult)==null||(s=s.fields)==null||(s=s.fullName)==null?void 0:s.value)!=null?l:t.initialFullName)!=null?i:"",isPasswordHidden:!0,optIntoOneTap:!1,shouldShowUsername:t.shouldAutoPickUsername!==!0,showBirthdayAdditionalInfo:!1,username:((u=t.signupResult)==null||(u=u.fields)==null||(u=u.username)==null?void 0:u.value)||""};if(c.props.needEmailOrPhone){var m,p,_;d.emailOrPhone=(m=(p=(_=t.signupResult)==null||(_=_.fields)==null||(_=_.emailOrPhone)==null?void 0:_.value)!=null?p:c.props.prefillPhoneNumber)!=null?m:""}return c.props.needPassword&&(d.password=""),c.state=d,c.$2={},c.$3=!1,c}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.pageIdentifier==="fbSignupPage"?"fb_signup_form_load":"form_load";o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:this.props.pageIdentifier,event_name:e,fb_userid:this.props.fbUserID,fbconnect_status:this.props.fbConnectedStatus})},n.componentDidUpdate=function(t,n){var e,r=this.props;((e=this.state.username)!=null?e:"").length===0&&this.props.usernameSuggestions.length===0&&r.usernameSuggestions.length>=1&&this.setState({username:r.usernameSuggestions[0]});var o=this.state;t.usernameSuggestions.length===0&&r.usernameSuggestions.length>=1&&n.username!==o.username&&this.$4(o,"username")},n.focusUsername=function(){r("nullthrows")(this.$2.username).focus()},n.$4=function(t,n){var e=this.props.onSignupFocusChange;if(e){var o=r("whitelistObjectKeys")(t,d);e(o,n)}},n.$13=function(){var e,t,n,a,i;if(this.props.requestInFlight||this.props.shouldShowBirthdayStepInBaseForm===!0&&o("PolarisAgeCollectionHelpers").isDOBInputAttemptDisabled(this.state.birthday))return!0;var l=(e=this.props.signupResult)==null?void 0:e.fields,s=l==null||(t=l.emailOrPhone)==null?void 0:t.error,u=l==null||(n=l.username)==null?void 0:n.error,c=l==null||(a=l.password)==null?void 0:a.error,d=l==null||(i=l.fullName)==null?void 0:i.error;if(s!==void 0||this.state.shouldShowUsername&&u!==void 0||c!==void 0||d!==void 0){r("promiseDone")(r("fetchPolarisLoggedOutExperiment")(r("PolarisRelayEnvironment"),{name:"ig_web_desktop_signup_disable_next_button_on_error"}));var m=r("gkx")("16475")===!0;return m}var p=this.props,_=p.needEmailOrPhone,f=p.needPassword,g=this.state,h=g.emailOrPhone,y=g.password,C=g.username;return o("polarisSignupSelectors").getSubmitDisabled({needEmailOrPhone:_,needPassword:f},{emailOrPhone:h,password:y,username:C},this.state.shouldShowUsername)},n.$7=function(){var e,t=r("whitelistObjectKeys")(this.state,d);this.props.shouldShowBirthdayStepInBaseForm===!0&&(t.birthday=o("PolarisDateHelpers").dateTypeToString(this.state.birthday),this.props.onBirthdayEntered&&this.props.onBirthdayEntered()),(e=r("PolarisWebStorage").getSessionStorage())==null||e.setItem("nux_username",String(!this.state.shouldShowUsername)),this.$3=!0,this.props.onSubmit(t)},n.$16=function(t){var e;return!!(this.props.signupResult&&(e=this.props.signupResult.fields[t])!=null&&e.validated)},n.$17=function(t){var e,n=(e=this.props.signupResult)==null?void 0:e.fields;if(t==="emailOrPhone"){var r;return(n==null||(r=n.emailOrPhone)==null?void 0:r.value)!==this.state.emailOrPhone}else if(t==="username"){var o;return(n==null||(o=n.username)==null?void 0:o.value)!==this.state.username}else if(t==="password"){var a;return(n==null||(a=n.password)==null?void 0:a.value)!==this.state.password}return!1},n.$18=function(t){var e=this.props,n=e.focusedFields,r=e.signupResult,o=r==null?void 0:r.wasDryRun,a=!o;if(n){var i=n.current===t,l=n.previous.indexOf(t)>-1,s=!i&&l,u=this.$17(t)===!1;a=(s||i)&&u}if(a){var c;return r==null||(c=r.fields)==null||(c=c[t])==null?void 0:c.error}return null},n.$19=function(t){return c.jsx("div",{className:"_aaht",children:c.jsx("p",{"aria-atomic":"true",id:o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID,role:"alert",children:t})})},n.$20=function(){return o("PolarisUA").isMobile()?o("PolarisAuthStrings").FB_CONTINUE_BUTTON_TEXT:o("PolarisAuthStrings").FB_LOGIN_BUTTON_TEXT},n.$21=function(t){var e=this.props.hideHeader;if(e)return null;var n=t===!0?o("PolarisLoggedOutUpsellStrings").DEFAULT_TITLE_SIGN_UP:o("PolarisAuthStrings").SIGN_UP_VALUE_PROP_WITHOUT_GRADIENT;return o("PolarisUA").isMobile()?c.jsx("div",{className:"_aahx",children:c.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:n})}):c.jsx("div",{className:"_aahw",children:t===!0?c.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:1,children:c.jsx(r("IGDSText.react"),{color:"primaryText",size:"headline2",textAlign:"center",weight:"semibold",children:n})}):c.jsx(o("IGDSTextVariants.react").IGDSTextSection,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:n})})},n.$24=function(){return this.props.shouldShowRedesignedSignup!==!0?null:c.jsx(r("PolarisFastLink.react"),{href:o("PolarisLinkBuilder").buildLoginLink("",{source:"auth_switcher"}),onClick:this.$23,children:c.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",textAlign:"center",children:u._(/*BTDS*/"Entrar com uma conta existente")})})},n.$28=function(){return this.props.shouldShowBirthdayStepInBaseForm!==!0?null:c.jsxs(c.Fragment,{children:[c.jsx(r("IGDSBox.react"),{marginBottom:2,marginStart:11,marginTop:3,position:"relative",children:c.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryText",textAlign:"start",children:o("PolarisAuthStrings").BIRTHDAY_TEXT})}),c.jsx(r("IGDSBox.react"),{marginBottom:2,marginStart:11,marginTop:2,position:"relative",children:c.jsx(r("PolarisDOBFieldSelect.react"),{align:"start",date:this.state.birthday,onDateChange:this.$25,shouldShowRedesignedSignup:!0})}),c.jsx(r("IGDSBox.react"),{position:"relative",children:c.jsx(r("IGDSBox.react"),{marginBottom:2,marginStart:2,paddingX:7,position:"relative",children:c.jsxs(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",textAlign:"center",children:[o("PolarisDateStrings").BIRTHDAY_DISCLAIMER_TEXT,c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:this.$26,children:c.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"primaryButton",children:o("PolarisGenericStrings").LEARN_MORE})})]})})})]})},n.render=function(){var e,t,n=this,a=this.props,i=a.canUsePhone,l=a.shouldShowRedesignedSignup,s=a.signupNonSpecificError,d=a.signupResult,m=this.state.shouldShowUsername,p=!!(this.props.usernameSuggestions.length&&(!this.props.needEmailOrPhone||this.state.emailOrPhone)),_=d==null?void 0:d.otherError;s!=null&&(_=s);var f=_!=null&&(d==null?void 0:d.wasDryRun)===!0,g=this.$18("emailOrPhone"),h=this.$18("fullName"),y=this.$18("username"),C=this.$18("password"),b=l===!0?"_aueq":o("PolarisUA").isMobile()?"_aahv":"_aahy",v=(d==null||(e=d.fields.username)==null?void 0:e.errorCode)==null||(d==null||(t=d.fields.username)==null?void 0:t.errorCode)==="username_is_taken";return c.jsxs("div",{className:r("joinClasses")(this.props.className,"_aahz"),"data-testid":void 0,children:[this.state.emailSuggestion!=null?c.jsx(r("PolarisMultiSignupEmailSuggestionDialog.react"),{emailSuggestion:this.state.emailSuggestion,onClose:this.$5,onSelection:this.$6,originalEmail:r("nullthrows")(this.state.emailOrPhone)}):null,c.jsxs("form",{className:r("joinClasses")("_aah-",l===!0?"_auep":null),method:"post",onBlur:this.$11,onSubmit:this.$14,ref:function(t){return n.$1=t},children:[this.$21(l===!0),!this.props.hideFBOption&&c.jsxs(c.Fragment,{children:[c.jsx(r("IGDSBox.react"),{marginBottom:2,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:c.jsxs(r("PolarisIGCoreButton.react"),{onClick:this.props.onSignupWithFBClick,showLegacyPrimaryColor:l===!0,children:[c.jsx("span",{className:(l!==!0?"_9zlu":"")+" _aah_"}),this.$20()]})}),c.jsx("div",{className:(l!==!0?"_aai0":"")+(l===!0?" _aueu":""),children:c.jsx(r("PolarisOrBar.react"),{shouldShowRedesignedSignup:l===!0})})]}),this.props.needEmailOrPhone&&c.jsx(r("PolarisSlimTextInput.react"),{accepted:this.$16("emailOrPhone"),"aria-describedby":g!=null&&!f?o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":i?o("PolarisAuthStrings").EMAIL_OR_PHONE:o("PolarisAuthStrings").EMAIL,"aria-required":"true",autoCapitalize:"off",autoComplete:"tel",autoCorrect:"off",className:b,errorMessage:g,hasError:!!g,isInputFocused:!0,isRedesignedSignupFieldInput:l,name:"emailOrPhone",onChange:this.$9,onFocus:function(t){return n.$12(t,"contactpoint_interaction")},onKeyDown:this.$15,placeholder:i?o("PolarisAuthStrings").EMAIL_OR_PHONE:o("PolarisAuthStrings").EMAIL,ref:function(t){return n.$2.emailOrPhone=t},value:this.state.emailOrPhone}),this.props.needPassword&&c.jsx(r("PolarisSlimTextInput.react"),{accepted:this.$16("password"),"aria-describedby":C!=null&&!f?o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":o("PolarisAuthStrings").PASSWORD,"aria-required":"true",autoCapitalize:"off",autoComplete:"new-password",autoCorrect:"off",className:b,errorMessage:C,hasError:!!C,isInputFocused:!0,isPasswordHidden:this.state.isPasswordHidden,isRedesignedSignupFieldInput:l,name:"password",onChange:this.$9,onFocus:function(t){return n.$12(t,"password_interaction")},onKeyDown:this.$15,onPasswordToggle:this.$10,placeholder:o("PolarisAuthStrings").PASSWORD,ref:function(t){return n.$2.password=t},showPasswordToggleLink:!!this.state.password,type:this.state.isPasswordHidden?"password":"text",value:this.state.password}),this.props.shouldEnableShortFirstStep===!0?null:c.jsx(r("PolarisSlimTextInput.react"),{accepted:this.$16("fullName"),"aria-describedby":h!=null&&!f?o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":o("PolarisAuthStrings").FULL_NAME,"aria-required":"false",autoCapitalize:"sentences",autoCorrect:"off",className:b,errorMessage:h,hasError:!!h,isInputFocused:!0,isRedesignedSignupFieldInput:l,name:"fullName",onChange:this.$9,onFocus:function(t){return n.$12(t,"name_interaction_full_name")},onKeyDown:this.$15,placeholder:o("PolarisAuthStrings").FULL_NAME,ref:function(t){return n.$2.fullName=t},value:this.state.fullName}),m&&c.jsx(r("PolarisSlimTextInput.react"),{accepted:this.$16("username"),"aria-describedby":y!=null&&!f?o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":o("PolarisAuthStrings").USERNAME,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",canRefresh:p,className:b,errorMessage:y,hasError:!!y,isInputFocused:!0,isRedesignedSignupFieldInput:l,maxLength:30,name:"username",omitErrorMarginBottom:v,onChange:this.$9,onFocus:function(t){return n.$12(t,"username_interaction")},onKeyDown:this.$15,onRefresh:this.$8,placeholder:o("PolarisAuthStrings").USERNAME,ref:function(t){return n.$2.username=t},value:this.state.username}),v&&c.jsx(r("IGDSBox.react"),{alignContent:"center",marginStart:1,children:c.jsx(r("PolarisSlimSignupUsernameSuggestions.react"),{emailOrPhone:this.state.emailOrPhone,onUsernameUpdate:this.$22,pageIdentifier:this.props.pageIdentifier,shouldShowUsername:m,username:this.state.username,usernameSuggestions:this.props.usernameSuggestions})}),this.$28(),o("PolarisUA").isDesktop()&&c.jsx(r("PolarisTermsPrivacyPolicyBlurb.react"),{className:"_aai1",cpeOnly:o("PolarisAuthLimitedRegistrationHelpers").shouldShowSouthKoreaTOS()}),c.jsxs("div",{children:[c.jsx(r("IGDSBox.react"),{marginBottom:l===!0?3:2,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:c.jsx(r("PolarisIGCoreButton.react"),{disabled:this.$13(),onClick:this.$14,type:"submit",children:!this.props.gdprRequired&&o("PolarisUA").isDesktop()?u._(/*BTDS*/"Cadastre-se"):u._(/*BTDS*/"Avan\u00e7ar")})}),this.props.requestInFlight?c.jsx(r("IGDSSpinner.react"),{position:"absolute"}):null]}),this.$24(),_&&!f&&this.$19(_)]}),this.state.showBirthdayAdditionalInfo&&c.jsx(r("PolarisBirthdaysAdditionalInfoModal.react"),{onClose:this.$27})]})},t})(c.Component);m.defaultProps={hideFBOption:!1,hideHeader:!1,needPassword:!0},l.default=m}),226);
__d("polarisIsEligibleForFacebookLogin",["PolarisConfig","PolarisQueryParams"],(function(t,n,r,o,a,i,l){"use strict";var e={CN:!0,CU:!0,IR:!0,KP:!0},s=/^((preprod|business|www)\.)?([a-z0-9-]+\.){0,}instagram\.com$/;function u(t){return!!e[t]}function c(e){return s.test(e)}function d(){return c(window.location.hostname)&&!u(o("PolarisConfig").getCountryCode()||"")&&(!o("PolarisQueryParams").hasForceAuthenticationParam()||o("PolarisQueryParams").hasEnableFBLoginParam())}l.default=d}),98);
__d("PolarisSignupForm.react",["invariant","CometRouteURL","IGCoreDialog.react","PolarisAcceptTermsOfUseForm.react","PolarisAccountPrivacyForm.react","PolarisAgeCollectionHelpers","PolarisAuthStrings","PolarisBirthdaySignupForm.react","PolarisCaptchaSignupForm.react","PolarisEmailConfirmationForm.react","PolarisFBConnectHelpers","PolarisFBConnectStatus","PolarisGenericStrings","PolarisLoggedOutCtaClickLogger","PolarisPhoneSignupForm.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisRoutes","PolarisSignupActions","PolarisSignupTypes","PolarisSlimSignupForm.react","PolarisUA","polarisIsEligibleForFacebookLogin","react","vulture"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$1=function(){o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:n.props.pageIdentifier,event_name:"fbconnect_click",fb_userid:n.props.fbUserID,fbconnect_status:n.props.fbConnectedStatus});var e=o("PolarisRoutes").FXCAL_DISCLOSURE_PATH;o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",n.props.pageIdentifier),o("PolarisFBConnectHelpers").redirectToFBOAuth(e,"signupPage")},n.state={showFacebookLogin:r("polarisIsEligibleForFacebookLogin")()},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=o("CometRouteURL").getWindowURLParams()||{},t=e.hide_fb_signup;t&&this.setState({showFacebookLogin:!1})},n.$2=function(){return o("PolarisUA").isDesktop()&&!1},n.render=function(){switch(this.props.step){case o("PolarisSignupTypes").STEP.emailConfirmation:return u.jsx(r("PolarisEmailConfirmationForm.react"),{onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,shouldShowRedesignedSignup:this.props.shouldShowRedesignedSignup,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case o("PolarisSignupTypes").STEP.phoneConfirmation:return u.jsx(r("PolarisPhoneSignupForm.react"),{onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,shouldShowRedesignedSignup:this.props.shouldShowRedesignedSignup,signupResult:this.props.signupResult,usernameSuggestions:this.props.usernameSuggestions});case o("PolarisSignupTypes").STEP.birthday:return u.jsxs(u.Fragment,{children:[u.jsx(r("PolarisBirthdaySignupForm.react"),{onBirthdayEntered:this.props.onBirthdayEntered,onSignup:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,shouldShowBirthdayTransparency:this.props.shouldShowBirthdayTransparency,shouldShowRedesignedSignup:this.props.shouldShowRedesignedSignup,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style}),this.props.signupAgeSpecificError!=null&&u.jsx(o("IGCoreDialog.react").IGCoreDialog,{onModalClose:this.props.onClearAgeError,title:o("PolarisAgeCollectionHelpers").WE_COULDNT_CREATE_AN_ACC,children:u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.props.onClearAgeError,children:o("PolarisGenericStrings").OK_TEXT})})]});case o("PolarisSignupTypes").STEP.accountPrivacy:return r("vulture")("CSF1e4Q94Qx1U5d393aPFU3T8yY="),u.jsx(r("PolarisAccountPrivacyForm.react"),{buttonLabel:o("PolarisGenericStrings").NEXT,defaultedToPrivate:!1,handleNext:function(){},subtitle:o("PolarisAuthStrings").ACCOUNT_PRIVACY_SUBHEADER_TEXT});case o("PolarisSignupTypes").STEP.acceptTerms:return u.jsx(r("PolarisAcceptTermsOfUseForm.react"),{onSignup:this.props.onSignup,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case o("PolarisSignupTypes").STEP.captcha:return u.jsx(r("PolarisCaptchaSignupForm.react"),{onSignup:this.props.onSignup,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case o("PolarisSignupTypes").STEP.base:default:{var e=this.$2()||!this.state.showFacebookLogin;return u.jsxs(u.Fragment,{children:[u.jsx(r("PolarisSlimSignupForm.react"),{canUsePhone:!0,errorNonce:this.props.errorNonce,fbConnectedStatus:this.props.fbConnectedStatus,fbUserID:this.props.fbUserID,focusedFields:this.props.focusedFields,gdprRequired:this.props.gdprRequired,hideFBOption:e,hideHeader:this.props.hideHeader,needEmailOrPhone:!0,onBirthdayEntered:this.props.onBirthdayEntered,onSignupFocusChange:this.props.onSignupFocusChange,onSignupWithFBClick:this.$1,onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,shouldAutoPickUsername:this.props.shouldAutoPickUsername,shouldEnableShortFirstStep:this.props.shouldEnableShortFirstStep,shouldShowBirthdayStepInBaseForm:this.props.shouldShowBirthdayStepInBaseForm,shouldShowRedesignedSignup:this.props.shouldShowRedesignedSignup,signupNonSpecificError:this.props.signupNonSpecificError,signupResult:this.props.signupResult,usernameSuggestions:this.props.usernameSuggestions}),this.props.signupAgeSpecificError!=null&&this.props.shouldShowBirthdayStepInBaseForm===!0&&u.jsx(o("IGCoreDialog.react").IGCoreDialog,{onModalClose:this.props.onClearAgeError,title:o("PolarisAgeCollectionHelpers").WE_COULDNT_CREATE_AN_ACC,children:u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.props.onClearAgeError,children:o("PolarisGenericStrings").OK_TEXT})})]})}}},t})(u.Component);function d(e,t){var n,r=e.auth,a=r.login&&r.login.submissionCount||r.signup&&r.signup.submissionCount||0,i=r.signup&&r.signup.requestInFlight||t.requestInFlight;return{errorNonce:a,fbConnectedStatus:e.fb.status,fbEligible:e.fb.status!==o("PolarisFBConnectStatus").STATUS.ineligible,fbUserID:e==null||(n=e.fb)==null||(n=n.authResponse)==null?void 0:n.userID,focusedFields:r.signup&&r.signup.signupFocusedField,gdprRequired:e.signup.gdprRequired,requestInFlight:i,signupAgeSpecificError:r.signup&&r.signup.signupAgeSpecificError,signupNonSpecificError:r.signup&&r.signup.signupNonSpecificError,signupResult:r.signup&&r.signup.signupResult,step:r.signup&&r.signup.step||o("PolarisSignupTypes").STEP.base,usernameSuggestions:r.signup&&r.signup.usernameSuggestions||[]}}function m(e,t){return{onBirthdayEntered:function(){e(o("PolarisSignupActions").processBirthday())},onClearAgeError:function(){e({errorMessage:void 0,type:"SIGNUP_ERROR"})},onSignup:function(r){r.emailOrPhone!=null||s(0,51567),e(o("PolarisSignupActions").validateFormAndContinue(r,t.pageIdentifier))},onSignupFocusChange:function(n,r){e(o("PolarisSignupActions").changeSignupFormFocus(n,r)),e(o("PolarisSignupActions").performDryRun(n))}}}var p=o("PolarisReactRedux.react").connect(d,m)(c);l.default=p}),98);
__d("PolarisAuthTestIDs",[],(function(t,n,r,o,a,i){"use strict";var e="login-error-message",l="login-info-message",s="login-success-message",u="auth-message-modal";i.DESKTOP_AUTH_ERROR_MESSAGE=e,i.DESKTOP_AUTH_INFO_MESSAGE=l,i.DESKTOP_AUTH_SUCCESS_MESSAGE=s,i.MOBILE_AUTH_MESSAGE_MODAL=u}),66);
__d("PolarisStopDeletionDialogStrings",["fbt","PolarisExternalLink.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=u.jsx(r("PolarisExternalLink.react"),{href:"https://help.instagram.com/370452623149242",children:s._(/*BTDS*/"Saiba mais")});function d(e,t){return s._(/*BTDS*/"Voc\u00ea solicitou a exclus\u00e3o de {username}. Se mudar de ideia, ter\u00e1 at\u00e9 {date} para nos informar. Caso contr\u00e1rio, todos os seus posts e as suas informa\u00e7\u00f5es ser\u00e3o exclu\u00eddos. {Learn More}",[s._param("username",e),s._param("date",t),s._param("Learn More",c)])}var m=s._(/*BTDS*/"Quer continuar usando esta conta?"),p=s._(/*BTDS*/"Manter conta"),_=s._(/*BTDS*/"Voltar para o login");l.getDeletionBodyText=d,l.DELETION_TITLE=m,l.DELETION_KEEP_ACCOUNT=p,l.DELETION_BACK_TO_LOGIN=_}),226);
__d("PolarisThirdPartyAuthHelpers",["InstagramQueryParamsHelper","PolarisFBConnectHelpers","PolarisRoutes"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){if(n||r){t();return}var a=o("PolarisRoutes").FXCAL_DISCLOSURE_PATH,i=e!=null?o("InstagramQueryParamsHelper").appendQueryParams(a,{next:e}):a;o("PolarisFBConnectHelpers").redirectToFBOAuth(i,"loginPage")}l.handleLoginOrFacebookAuth=e}),98);
__d("usePolarisSendAccountRecoveryEmailForBoost",["PolarisAPISendAccountRecoveryEmail","PolarisAuthStrings","PolarisInstajax","PolarisLoginLogger","PolarisReactRedux.react","nullthrows","react-compiler-runtime","useIGDSToaster"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e instanceof o("PolarisInstajax").AjaxError&&e.message?e.message:o("PolarisAuthStrings").SEND_ACCOUNT_RECOVERY_LINK_FAILED_TEXT}function s(){var t=o("react-compiler-runtime").c(6),n=r("useIGDSToaster")(),a=n.add,i=o("PolarisReactRedux.react").useDispatch(),l=o("PolarisReactRedux.react").useSelector(u),s;t[0]!==a?(s=function(t){a({message:t,target:"bottom"},{duration:1e4})},t[0]=a,t[1]=s):s=t[1];var c=s,d;t[2]!==c||t[3]!==i||t[4]!==l?(d=function(){i({type:"ACCOUNT_RECOVERY_MODAL_DISMISSED"});var t=l.accountRecovery,n=t==null?void 0:t.targetUsername,a=n!=null?n:t==null?void 0:t.query,s={event_flow:"account_recovery",login_identifier:a!=null?a:void 0};o("PolarisLoginLogger").logLoginEvent(babelHelpers.extends({event_name:"boost_account_recovery_send_email_submit"},s)),o("PolarisAPISendAccountRecoveryEmail").sendAccountRecoveryEmail(r("nullthrows")(a)).then(function(e){c(e.toast_message),o("PolarisLoginLogger").logLoginEvent(babelHelpers.extends({event_name:"boost_account_recovery_send_email_success"},s))}).catch(function(t){c(e(t)),o("PolarisLoginLogger").logLoginEvent(babelHelpers.extends({event_name:"boost_account_recovery_send_email_error",extra_client_data:{error_message:t.message}},s))})},t[2]=c,t[3]=i,t[4]=l,t[5]=d):d=t[5];var m=d;return m}function u(e){return e.auth}l.default=s}),98);
__d("PolarisSlimLoginForm.react",["fbt","CometImage.react","CometRouteParams","IGDSBox.react","IGDSButton.react","IGDSCheckbox.react","IGDSIconButton.react","IGDSInfoPanoFilledIcon.react","IGDSText.react","IGDSTextVariants.react","InstagramQueryParamsHelper","PolarisAccountSwitcherActions","PolarisAuthStrings","PolarisAuthTestIDs","PolarisAuthTypeSwitcher.react","PolarisConsentQEHelpers","PolarisConsentStrings.react","PolarisFacebookLoginButtonRevamped","PolarisFastLink.react","PolarisIGCoreButton.react","PolarisIsLoggedIn","PolarisLoggedOutCtaClickLogger","PolarisLoginLogger","PolarisLoginQPL","PolarisMultiSignupTypes","PolarisMultiStepSignupQEHelpers","PolarisOneTapLogin","PolarisOrBar.react","PolarisQueryParams","PolarisReactRedux.react","PolarisRoutes","PolarisSlimTextInput.react","PolarisStopDeletionDialog.react","PolarisThirdPartyAuthHelpers","PolarisTooManyAccountsDialog.react","PolarisUA","XPolarisMultiStepSignupControllerRouteBuilder","gkx","justknobx","qex","react","react-compiler-runtime","usePolarisPageID","usePolarisSendAccountRecoveryEmailForBoost"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useMemo,p=c.useRef,_=c.useState,f="slfErrorAlert",g=6,h={profilePicture:{maxWidth:"x193iq5w",$$css:!0}};function y(e){var t=o("react-compiler-runtime").c(12),n=e.checkboxId,a=e.checkboxOnChange,i=e.checkboxState,l=e.checkboxText,s=e.disabled,c=o("PolarisReactRedux.react").useSelector(C),d=o("PolarisUA").isMobile()&&c&&o("PolarisIsLoggedIn").isLoggedIn()?4:10,m=s?"secondaryText":"primaryText",p;t[0]!==l||t[1]!==m?(p=u.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:m,children:l}),t[0]=l,t[1]=m,t[2]=p):p=t[2];var _;t[3]!==a||t[4]!==i||t[5]!==s||t[6]!==p?(_=u.jsx(r("IGDSCheckbox.react"),{checkboxShape:"square",isChecked:i,isDisabled:s,name:"LoginCheckbox",onChange:a,size:16,zeroPadding:!0,children:p}),t[3]=a,t[4]=i,t[5]=s,t[6]=p,t[7]=_):_=t[7];var f;return t[8]!==n||t[9]!==d||t[10]!==_?(f=u.jsx(r("IGDSBox.react"),{id:n,marginBottom:3,marginEnd:2,marginStart:d,marginTop:3,position:"relative",children:_}),t[8]=n,t[9]=d,t[10]=_,t[11]=f):f=t[11],f}function C(e){return e.navigation.isAccountSwitcherOpen}function b(e){var t=o("react-compiler-runtime").c(23),n=e.fromLoggedOutDialog,a=e.hideForgotPassword,i=e.isThreadsRequest,l=e.newAuthDesign,c=e.onClick,d=n===void 0?!1:n,m=i===void 0?!1:i,p=l===void 0?!1:l,_=o("PolarisReactRedux.react").useDispatch(),f;t[0]!==_?(f=function(){return _(o("PolarisAccountSwitcherActions").closeAccountSwitcher())},t[0]=_,t[1]=f):f=t[1];var g=f,h=o("PolarisReactRedux.react").useSelector(v),y=m?"center":"end";if(a===!0)return null;var C;t[2]!==p?(C=p?s._(/*BTDS*/"Esqueceu?"):s._(/*BTDS*/"Esqueceu a senha?"),t[2]=p,t[3]=C):C=t[3];var b=C,S=o("PolarisRoutes").PASSWORD_RESET_PATH;if(o("PolarisQueryParams").isFromLoginForAPI()){var R;t[4]===Symbol.for("react.memo_cache_sentinel")?(R=o("InstagramQueryParamsHelper").appendQueryParams(o("PolarisRoutes").PASSWORD_RESET_PATH,{source:"api-login"}),t[4]=R):R=t[4],S=R}else if(o("PolarisQueryParams").isFromFxcal()){var L;t[5]===Symbol.for("react.memo_cache_sentinel")?(L=o("InstagramQueryParamsHelper").appendQueryParams(o("PolarisRoutes").PASSWORD_RESET_PATH,{source:"fxcal"}),t[5]=L):L=t[5],S=L}var E;t[6]!==b||t[7]!==m||t[8]!==p?(E=m?u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:b}):p?u.jsx(o("IGDSTextVariants.react").IGDSTextFootnote,{color:"link",maxLines:1,textAlign:"center",children:b}):o("PolarisUA").isMobile()?u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",textAlign:"center",children:b}):u.jsx(r("IGDSText.react"),{color:"link",zeroMargin:!0,children:b}),t[6]=b,t[7]=m,t[8]=p,t[9]=E):E=t[9];var k=E,I;t[10]!==d||t[11]!==h||t[12]!==c||t[13]!==g?(I=function(t){c==null||c(),o("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"forgot_password_click"}),o("PolarisLoginLogger").logLoginEvent({event_category:"search",event_flow:"account_recovery_start",event_name:"account_recovery_start",event_step:"search",extra_client_data:d?{event_source:"login_logged_out_dialog_forgot"}:null}),h&&g()},t[10]=d,t[11]=h,t[12]=c,t[13]=g,t[14]=I):I=t[14];var T=I,D;return t[15]!==b||t[16]!==T||t[17]!==h||t[18]!==m||t[19]!==y||t[20]!==p||t[21]!==k?(D=o("PolarisUA").isMobile()&&!(h&&o("PolarisIsLoggedIn").isLoggedIn())||m?u.jsx(r("IGDSBox.react"),{direction:"row",justifyContent:y,marginBottom:p?0:2,marginEnd:p?0:10,marginStart:10,paddingY:3,position:"relative",children:u.jsx(r("PolarisFastLink.react"),{href:S,onClick:T,children:k},"reset")}):u.jsx(r("IGDSBox.react"),{alignContent:"center",alignSelf:"center",display:"flex",marginTop:3,children:u.jsx(r("IGDSButton.react"),{href:S,label:b,onClick:T,variant:o("PolarisUA").isMobile()&&h?"primary_link":"secondary_link"},"reset")}),t[15]=b,t[16]=T,t[17]=h,t[18]=m,t[19]=y,t[20]=p,t[21]=k,t[22]=D):D=t[22],D}function v(e){return e.navigation.isAccountSwitcherOpen}function S(e){var t=o("react-compiler-runtime").c(20),n=e.fromLoggedOutDialog,a=e.hideForgotPassword,i=e.isThreadsRequest,l=e.onForgotPasswordClick,s=e.onNavigate,c=n===void 0?!1:n,d=i===void 0?!1:i,m=o("PolarisReactRedux.react").useSelector(R);if(d)return null;if(o("PolarisUA").isMobile()&&!(m&&o("PolarisIsLoggedIn").isLoggedIn())){if(o("PolarisQueryParams").isFromFxcal()||o("PolarisQueryParams").hasDisableSignupParam())return null;var p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=o("PolarisConsentQEHelpers").shouldShowIPFingerPrintingDisclosure(),t[0]=p):p=t[0];var _=p,f;t[1]!==s?(f=u.jsx(r("PolarisAuthTypeSwitcher.react"),{onNavigate:s}),t[1]=s,t[2]=f):f=t[2];var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=_&&u.jsx(r("IGDSBox.react"),{paddingY:9,width:"80%",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:o("PolarisConsentStrings.react").INSTAGRAM_TERMS_OF_USE_AND_PRIVACY_POLICY_TEXT})}),t[3]=g):g=t[3];var h;return t[4]!==f?(h=u.jsxs(r("IGDSBox.react"),{alignItems:"center",marginTop:4,position:"relative",children:[f,g]}),t[4]=f,t[5]=h):h=t[5],h}if(o("PolarisUA").isDesktop()&&!(m&&o("PolarisIsLoggedIn").isLoggedIn())&&o("PolarisQueryParams").hasEnableSignupWeb()){var y;t[6]!==c||t[7]!==a||t[8]!==l?(y=u.jsx(b,{fromLoggedOutDialog:c,hideForgotPassword:a,onClick:l}),t[6]=c,t[7]=a,t[8]=l,t[9]=y):y=t[9];var C;t[10]!==c||t[11]!==s?(C=u.jsx(r("IGDSBox.react"),{alignItems:"center",marginTop:4,position:"relative",children:u.jsx(r("PolarisAuthTypeSwitcher.react"),{fromLoggedOutDialog:c,onNavigate:s})}),t[10]=c,t[11]=s,t[12]=C):C=t[12];var v;return t[13]!==y||t[14]!==C?(v=u.jsxs(u.Fragment,{children:[y,C]}),t[13]=y,t[14]=C,t[15]=v):v=t[15],v}var S;return t[16]!==c||t[17]!==a||t[18]!==l?(S=u.jsx(b,{fromLoggedOutDialog:c,hideForgotPassword:a,onClick:l}),t[16]=c,t[17]=a,t[18]=l,t[19]=S):S=t[19],S}function R(e){return e.navigation.isAccountSwitcherOpen}function L(e){var t=o("react-compiler-runtime").c(6),n=e.className,a=e.message,i=e.testid,l;t[0]!==n||t[1]!==a?(l=u.jsx("div",{className:n,children:a}),t[0]=n,t[1]=a,t[2]=l):l=t[2];var s;return t[3]!==l||t[4]!==i?(s=u.jsx(r("IGDSText.react"),{testid:void 0,children:l}),t[3]=l,t[4]=i,t[5]=s):s=t[5],s}function E(e){var t,n=o("react-compiler-runtime").c(18),a=e.errorMessage,i;n[0]===Symbol.for("react.memo_cache_sentinel")?(i="xkmlbd1 xvs91rp xd4r4e8 x1anpbxc x11gldyt xyorhqc x11hdunq x2b8uid",n[0]=i):i=n[0];var l;n[1]!==a?(l=u.jsx(L,{className:i,message:a,testid:void 0}),n[1]=a,n[2]=l):l=n[2];var s=l,c=r("usePolarisSendAccountRecoveryEmailForBoost")(),m=_(!1),p=m[0],f=m[1],g=a===o("PolarisAuthStrings").ERROR_LOGIN_PASSWORD_BOOST_ACCOUNT_RECOVERY||a===o("PolarisAuthStrings").ERROR_LOGIN_USERNAME_BOOST_ACCOUNT_RECOVERY,h=o("PolarisReactRedux.react").useSelector(k),y=h==null||(t=h.accountRecovery)==null||(t=t.options)==null?void 0:t.is_boost_user_eligible_for_account_recovery,C;n[3]!==p||n[4]!==c?(C=function(){p||(f(!0),c(),o("PolarisLoginLogger").logLoginEvent({event_flow:"account_recovery",event_name:"boost_account_recovery_error_message_click"}))},n[3]=p,n[4]=c,n[5]=C):C=n[5];var b=C,v;n[6]!==g?(v=function(){g&&o("PolarisLoginLogger").logLoginEvent({event_flow:"account_recovery",event_name:"boost_account_recovery_error_message_view"})},n[6]=g,n[7]=v):v=n[7];var S;if(n[8]!==a||n[9]!==g?(S=[g,a],n[8]=a,n[9]=g,n[10]=S):S=n[10],d(v,S),g&&y===!0){var R;n[11]===Symbol.for("react.memo_cache_sentinel")?(R=u.jsx(r("IGDSText.react"),{color:"link",maxLines:1,textAlign:"center",zeroMargin:!0,children:o("PolarisAuthStrings").ERROR_LOGIN_BOOST_ACCOUNT_RECOVERY_EMAIL_LINK}),n[11]=R):R=n[11];var E;n[12]!==p||n[13]!==b?(E=u.jsx(r("IGDSBox.react"),{margin:"auto",children:u.jsx(r("PolarisFastLink.react"),{disabled:p,onClick:b,children:R})}),n[12]=p,n[13]=b,n[14]=E):E=n[14];var I;return n[15]!==s||n[16]!==E?(I=u.jsxs(r("IGDSBox.react"),{children:[s,E]}),n[15]=s,n[16]=E,n[17]=I):I=n[17],I}return s}function k(e){return e.auth}function I(e){var t,n=o("react-compiler-runtime").c(150),a=e.dialogSource,i=e.errorMessage,l=e.fbConnectStatus,c=e.forceLoginIgId,m=e.forceLoginProfilePicUrl,C=e.forceLoginUsername,v=e.fromLoggedOutDialog,R=e.hideFBLogin,k=e.hideForgotPassword,I=e.infoMessage,M=e.isFBLoggedIn,w=e.isIGSSODisabled,A=e.isThreadsRequest,F=e.nextUrl,O=e.onClearStopDeletionNonce,B=e.onLoginWithFBClick,W=e.onStopAccountDeletion,q=e.onSubmit,U=e.requestInFlight,V=e.stopDeletionDate,H=e.stopDeletionNonce,G=e.style,z=e.successMessage,j=e.usernameHint,K=v===void 0?!1:v,Q=A===void 0?!1:A,X=_((t=C!=null?C:j)!=null?t:""),Y=X[0],J=X[1],Z=_(""),ee=Z[0],te=Z[1],ne=_(!1),re=ne[0],oe=ne[1],ae,ie;n[0]===Symbol.for("react.memo_cache_sentinel")?(ie=o("PolarisOneTapLogin").hasMaxOneTapNonces(),n[0]=ie):ie=n[0],ae=ie;var le=ae,se=r("usePolarisPageID")(),ue=o("PolarisReactRedux.react").useSelector(N),ce=o("CometRouteParams").useRouteParams(),de;n[1]!==M||n[2]!==w||n[3]!==F||n[4]!==B||n[5]!==se?(de=function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",se),o("PolarisThirdPartyAuthHelpers").handleLoginOrFacebookAuth(F!=null?F:void 0,B,M,w)},n[1]=M,n[2]=w,n[3]=F,n[4]=B,n[5]=se,n[6]=de):de=n[6];var me=de,pe;n[7]!==K||n[8]!==q||n[9]!==re||n[10]!==ee||n[11]!==Y?(pe=function(t){o("PolarisLoginLogger").logLoginEvent({event_category:K?"logged_out_dialog_interaction":null,event_flow:"login_manual",event_name:"login_button_clicked",event_step:K?"logged_out_dialog":null}),t.preventDefault(),re===!0?o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_optin"}):o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_optout"}),r("PolarisLoginQPL").addPointLoginButtonClick(),q(Y,ee,re)},n[7]=K,n[8]=q,n[9]=re,n[10]=ee,n[11]=Y,n[12]=pe):pe=n[12];var _e=pe,fe,ge;n[13]===Symbol.for("react.memo_cache_sentinel")?(fe=function(){var e=r("qex")._("871")===!0;oe(e)},ge=[],n[13]=fe,n[14]=ge):(fe=n[13],ge=n[14]),d(fe,ge);var he;e:{if(o("PolarisQueryParams").isFromFxcal()||o("PolarisIsLoggedIn").isLoggedIn()||Q||o("PolarisQueryParams").isFromBizappIGBoostMsite()||o("PolarisQueryParams").isFromIGBoostSteering()){he=!1;break e}he=!R&&r("gkx")("5230")===!1}var ye=he,Ce=_(!1),be=Ce[0],ve=Ce[1],Se=_(!0),Re=Se[0],Le=Se[1],Ee=p(null),ke=o("PolarisAuthStrings").PHONE_USERNAME_OR_EMAIL,Ie;e:{if(o("PolarisUA").isMobile()){var Te;n[15]!==ue?(Te=ue&&o("PolarisIsLoggedIn").isLoggedIn()?"xdj266r x1ys307a xzueoph xyqm7xq":"xdj266r x11gldyt xzueoph x11hdunq",n[15]=ue,n[16]=Te):Te=n[16],Ie=Te;break e}var De;n[17]===Symbol.for("react.memo_cache_sentinel")?(De="xdj266r x11gldyt xzueoph x11hdunq",n[17]=De):De=n[17],Ie=De}var xe=Ie,$e,Pe;n[18]!==a||n[19]!==l||n[20]!==K?($e=function(){o("PolarisLoginLogger").logLoginEvent({event_name:"login_form_load",fbconnect_status:l}),K?o("PolarisLoginLogger").logLoginEvent({event_category:"logged_out_dialog_init",event_flow:"login_manual",event_name:"login_step_view_loaded",event_step:"logged_out_dialog",extra_client_data:{dialog_source:a!=null?a:""}}):o("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"login_step_view_loaded"}),o("PolarisQueryParams").hasForceAuthenticationParam()&&Ee.current!=null&&Ee.current.focus()},Pe=[a,l,K],n[18]=a,n[19]=l,n[20]=K,n[21]=$e,n[22]=Pe):($e=n[21],Pe=n[22]),d($e,Pe);var Ne=_(!1),Me=Ne[0],we=Ne[1],Ae;n[23]===Symbol.for("react.memo_cache_sentinel")?(Ae=r("justknobx")._("912"),n[23]=Ae):Ae=n[23];var Fe=Ae,Oe,Be;n[24]===Symbol.for("react.memo_cache_sentinel")?(Oe=function(){var e=function(){if(Fe){var e,t=!!((e=document.querySelector("input[name=username]"))!=null&&e.matches("*:-webkit-autofill"));we(t)}};e(),window.setTimeout(e,200)},Be=[Fe],n[24]=Oe,n[25]=Be):(Oe=n[24],Be=n[25]),d(Oe,Be);var We;n[26]!==Re?(We=function(t){Le(!Re),t.preventDefault()},n[26]=Re,n[27]=We):We=n[27];var qe=We,Ue;n[28]!==re?(Ue=function(){le?ve(!0):oe(!re)},n[28]=re,n[29]=Ue):Ue=n[29];var Ve=Ue,He=P,Ge=$,ze;n[30]!==Me?(ze=function(){Me&&we(!1)},n[30]=Me,n[31]=ze):ze=n[31];var je=ze,Ke=x,Qe;n[32]!==ue?(Qe=o("PolarisUA").isMobile()&&ue&&o("PolarisIsLoggedIn").isLoggedIn(),n[32]=ue,n[33]=Qe):Qe=n[33];var Xe=Qe,Ye;n[34]!==ue?(Ye=o("PolarisUA").isMobile()&&!(ue&&o("PolarisIsLoggedIn").isLoggedIn()),n[34]=ue,n[35]=Ye):Ye=n[35];var Je=Ye,Ze=!Y&&!ee&&!Me&&Fe,et=!Y||!ee||ee.length<g||Ze,tt;n[36]!==ue?(tt=ue&&o("PolarisIsLoggedIn").isLoggedIn(),n[36]=ue,n[37]=tt):tt=n[37];var nt=tt,rt=nt,ot,at=i==null||i===""?void 0:f,it;n[38]!==at||n[39]!==c||n[40]!==m||n[41]!==C||n[42]!==je||n[43]!==xe||n[44]!==Y?(it=u.jsx(u.Fragment,{children:c!=null&&C!=null&&m!=null?u.jsxs("div",{className:"x6s0dn4 x78zum5 x1q0g3np xdj266r x11gldyt x1fqp7bg x11hdunq",children:[u.jsx("div",{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x972fbf x10w94by x1qhh985 x14e42zd xj87blo xln7xf2 xk390pu xc9qbxq xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x14qfxbe",children:u.jsx(r("CometImage.react"),{alt:s._(/*BTDS*/"Foto do perfil de {username}",[s._param("username",C)]),src:m,xstyle:h.profilePicture})}),u.jsx("div",{className:"xj87blo x13fj5qh",children:u.jsx(r("IGDSText.react"),{size:"label",textAlign:"start",weight:"normal",children:C})})]}):u.jsx(r("PolarisSlimTextInput.react"),{"aria-describedby":at,"aria-label":ke,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:xe,"data-testid":void 0,isInputFocused:Ke(),maxLength:75,name:"username",onChange:function(t){var e=t.target,n=e.value;J(n),je()},onFocus:D,placeholder:ke,ref:Ee,value:Y})}),n[38]=at,n[39]=c,n[40]=m,n[41]=C,n[42]=je,n[43]=xe,n[44]=Y,n[45]=it):it=n[45];var lt=it,st=o("PolarisAuthStrings").PASSWORD,ut=o("PolarisAuthStrings").ONE_TAP_CHECKBOX_TEXT,ct;n[46]!==c||n[47]!==je||n[48]!==ee.length?(ct=function(t){var e=t.target,n=e.value;ee.length===0&&n.length>=6&&o("PolarisLoginLogger").logLoginEvent({event_name:"login_form_autofill",ig_userid:c!=null?c:void 0}),te(n),je()},n[46]=c,n[47]=je,n[48]=ee.length,n[49]=ct):ct=n[49];var dt=!!ee,mt=Re?"password":"text",pt;n[50]!==at||n[51]!==qe||n[52]!==xe||n[53]!==Re||n[54]!==ee||n[55]!==ct||n[56]!==dt||n[57]!==mt?(pt=u.jsx(r("PolarisSlimTextInput.react"),{"aria-describedby":at,"aria-label":st,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:xe,"data-testid":void 0,isInputFocused:Ke(),isPasswordHidden:Re,name:"password",onChange:ct,onFocus:T,onPasswordToggle:qe,placeholder:st,showPasswordToggleLink:dt,type:mt,value:ee}),n[50]=at,n[51]=qe,n[52]=xe,n[53]=Re,n[54]=ee,n[55]=ct,n[56]=dt,n[57]=mt,n[58]=pt):pt=n[58];var _t;n[59]!==Ve||n[60]!==re||n[61]!==rt||n[62]!==be?(_t=rt&&u.jsxs(u.Fragment,{children:[u.jsxs(r("IGDSBox.react"),{direction:"row",position:"relative",children:[u.jsx(y,{checkboxId:"optIntoOneTap",checkboxOnChange:Ve,checkboxState:re,checkboxText:ut,disabled:le}),le&&u.jsx(r("IGDSIconButton.react"),{onClick:Ve,padding:0,children:u.jsx(r("IGDSInfoPanoFilledIcon.react"),{alt:ut,color:"ig-secondary-text",size:16})})]}),be&&u.jsx(r("PolarisTooManyAccountsDialog.react"),{onClose:function(){ve(!1)}})]}),n[59]=Ve,n[60]=re,n[61]=rt,n[62]=be,n[63]=_t):_t=n[63];var ft;n[64]!==k||n[65]!==Je||n[66]!==Q?(ft=Je&&!Q&&u.jsx(b,{hideForgotPassword:k,onClick:He}),n[64]=k,n[65]=Je,n[66]=Q,n[67]=ft):ft=n[67];var gt;n[68]!==pt||n[69]!==_t||n[70]!==ft?(gt=u.jsxs(u.Fragment,{children:[pt,_t,ft]}),n[68]=pt,n[69]=_t,n[70]=ft,n[71]=gt):gt=n[71];var ht=gt,yt;n[72]!==ce?(yt=function(t){if(t in ce){var e=ce[t];return typeof e=="string"?e:null}return null},n[72]=ce,n[73]=yt):yt=n[73];var Ct=yt,bt;if(n[74]!==Ct){var vt=Ct("source_of_flow"),St=Ct("is_in_reg_entrypoint_qe_test");bt=o("PolarisMultiStepSignupQEHelpers").shouldShowCreateAccountButtonOnLoginFB(vt,St),n[74]=Ct,n[75]=bt}else bt=n[75];var Rt=bt,Lt=Xe?4:10,Et=Xe?4:10,kt=Xe?3:2,It=Q?"barcelona-primary-button":"ig-primary-button",Tt;n[76]===Symbol.for("react.memo_cache_sentinel")?(Tt=u.jsx(r("IGDSBox.react"),{position:"relative",children:s._(/*BTDS*/"Entrar")}),n[76]=Tt):Tt=n[76];var Dt;n[77]!==_e||n[78]!==et||n[79]!==U||n[80]!==It?(Dt=u.jsx(r("PolarisIGCoreButton.react"),{color:It,"data-testid":void 0,disabled:et,loading:U,onClick:_e,type:"submit",children:Tt}),n[77]=_e,n[78]=et,n[79]=U,n[80]=It,n[81]=Dt):Dt=n[81];var xt;n[82]!==Lt||n[83]!==Et||n[84]!==kt||n[85]!==Dt?(xt=u.jsx(r("IGDSBox.react"),{marginBottom:2,marginEnd:Lt,marginStart:Et,marginTop:kt,position:"relative",children:Dt}),n[82]=Lt,n[83]=Et,n[84]=kt,n[85]=Dt,n[86]=xt):xt=n[86];var $t;n[87]!==Xe||n[88]!==Rt?($t=Rt&&u.jsx(r("IGDSBox.react"),{alignItems:"center",marginBottom:2,marginEnd:Xe?4:10,marginStart:Xe?4:10,marginTop:1,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:u.jsxs("p",{"data-testid":void 0,children:[s._(/*BTDS*/"N\u00e3o tem uma conta?")," ",u.jsx(r("PolarisFastLink.react"),{"data-testid":void 0,href:o("PolarisUA").isMobile()?r("XPolarisMultiStepSignupControllerRouteBuilder").buildUri({step_name:o("PolarisMultiSignupTypes").getFirstStep()}).toString():o("PolarisRoutes").EMAIL_SIGNUP_PATH,onClick:function(){return Ge("signup")},children:u.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",children:s._(/*BTDS*/"Cadastre-se")})})]})})}),n[87]=Xe,n[88]=Rt,n[89]=$t):$t=n[89];var Pt;n[90]!==k||n[91]!==Q?(Pt=Q&&u.jsx(b,{hideForgotPassword:k,isThreadsRequest:Q,onClick:He}),n[90]=k,n[91]=Q,n[92]=Pt):Pt=n[92];var Nt;n[93]!==xt||n[94]!==$t||n[95]!==Pt?(Nt=u.jsxs(u.Fragment,{children:[xt,$t,Pt]}),n[93]=xt,n[94]=$t,n[95]=Pt,n[96]=Nt):Nt=n[96];var Mt=Nt,wt;n[97]!==lt||n[98]!==ht||n[99]!==Mt?(wt=u.jsxs(u.Fragment,{children:[lt,ht,Mt]}),n[97]=lt,n[98]=ht,n[99]=Mt,n[100]=wt):wt=n[100];var At=wt,Ft;n[101]===Symbol.for("react.memo_cache_sentinel")?(Ft=u.jsx("div",{className:"x1hmvnq2 x11gldyt x91k8ka x11hdunq",children:u.jsx(r("PolarisOrBar.react"),{})}),n[101]=Ft):Ft=n[101];var Ot=Ft;if(!ye)ot=At;else if(o("PolarisUA").isMobile()||ue){var Bt;n[102]!==ue||n[103]!==me?(Bt=u.jsx(r("PolarisFacebookLoginButtonRevamped"),{isAccountSwitcherOpen:ue,onClick:me}),n[102]=ue,n[103]=me,n[104]=Bt):Bt=n[104];var Wt;n[105]!==At||n[106]!==Bt?(Wt=u.jsxs(u.Fragment,{children:[Bt,Ot,At]}),n[105]=At,n[106]=Bt,n[107]=Wt):Wt=n[107],ot=Wt}else{var qt;n[108]!==ue||n[109]!==me?(qt=u.jsx(r("PolarisFacebookLoginButtonRevamped"),{isAccountSwitcherOpen:ue,onClick:me}),n[108]=ue,n[109]=me,n[110]=qt):qt=n[110];var Ut;n[111]!==At||n[112]!==qt?(Ut=u.jsxs(u.Fragment,{children:[At,Ot,qt]}),n[111]=At,n[112]=qt,n[113]=Ut):Ut=n[113],ot=Ut}var Vt;n[114]!==I?(Vt=I!=null&&I!==""&&u.jsx(L,{className:"x1roi4f4 xvs91rp xd4r4e8 x1anpbxc x11gldyt x4n8cb0 x11hdunq x2b8uid",message:I,testid:void 0}),n[114]=I,n[115]=Vt):Vt=n[115];var Ht;n[116]!==z?(Ht=z!=null&&z!==""&&u.jsx(L,{className:"x5n08af xvs91rp xd4r4e8 x1anpbxc x11gldyt x4n8cb0 x11hdunq x2b8uid",message:z,testid:void 0}),n[116]=z,n[117]=Ht):Ht=n[117];var Gt;n[118]===Symbol.for("react.memo_cache_sentinel")?(Gt={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},n[118]=Gt):Gt=n[118];var zt=Xe?3:6,jt;n[119]!==ot||n[120]!==zt?(jt=u.jsx(r("IGDSBox.react"),{marginTop:zt,position:"relative",children:ot}),n[119]=ot,n[120]=zt,n[121]=jt):jt=n[121];var Kt;n[122]!==i?(Kt=i!=null&&i!==""&&u.jsx(E,{errorMessage:i}),n[122]=i,n[123]=Kt):Kt=n[123];var Qt;n[124]!==K||n[125]!==k||n[126]!==Q?(Qt=u.jsx(S,{fromLoggedOutDialog:K,hideForgotPassword:k,isThreadsRequest:Q,onForgotPasswordClick:He,onNavigate:Ge}),n[124]=K,n[125]=k,n[126]=Q,n[127]=Qt):Qt=n[127];var Xt;n[128]!==O||n[129]!==W||n[130]!==re||n[131]!==ee||n[132]!==V||n[133]!==H||n[134]!==Y?(Xt=H!=null&&V!=null&&u.jsx(r("PolarisStopDeletionDialog.react"),{onClose:O,onStopDeletion:function(t){return W(Y,ee,re,t)},stopDeletionDate:V,stopDeletionNonce:H,username:Y}),n[128]=O,n[129]=W,n[130]=re,n[131]=ee,n[132]=V,n[133]=H,n[134]=Y,n[135]=Xt):Xt=n[135];var Yt;n[136]!==Xe||n[137]!==G?(Yt=G==="modal"&&!Xe&&u.jsx(r("IGDSBox.react"),{marginBottom:6,position:"relative"}),n[136]=Xe,n[137]=G,n[138]=Yt):Yt=n[138];var Jt;n[139]!==_e||n[140]!==jt||n[141]!==Kt||n[142]!==Qt||n[143]!==Xt||n[144]!==Yt?(Jt=u.jsxs("form",babelHelpers.extends({},Gt,{"data-testid":void 0,id:"loginForm",method:"post",onSubmit:_e,children:[jt,Kt,Qt,Xt,Yt]})),n[139]=_e,n[140]=jt,n[141]=Kt,n[142]=Qt,n[143]=Xt,n[144]=Yt,n[145]=Jt):Jt=n[145];var Zt;return n[146]!==Vt||n[147]!==Ht||n[148]!==Jt?(Zt=u.jsxs("div",{children:[Vt,Ht,Jt]}),n[146]=Vt,n[147]=Ht,n[148]=Jt,n[149]=Zt):Zt=n[149],Zt}function T(){return r("PolarisLoginQPL").addPointPasswordFocus()}function D(){return r("PolarisLoginQPL").addPointUsernameFocus()}function x(){return!o("PolarisIsLoggedIn").isLoggedIn()&&!o("PolarisUA").isMobile()}function $(e){e==="signup"&&r("PolarisLoginQPL").endCancelNavigateToSignup()}function P(){r("PolarisLoginQPL").endCancelNavigateToForgotPassword()}function N(e){return e.navigation.isAccountSwitcherOpen}l.default=I}),226);
__d("PolarisStrategicWebTraffic",["ExecutionEnvironment","PolarisConfig","PolarisDismissEntry","PolarisQueryParams","PolarisUA","memoize"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("memoize")(function(){return(e||(e=r("ExecutionEnvironment"))).canUseDOM&&o("PolarisDismissEntry").isDismissed(o("PolarisDismissEntry").PROMOTED_TRAFFIC_TYPE)?!0:(e||(e=r("ExecutionEnvironment"))).canUseDOM&&o("PolarisUA").isMobile()&&o("PolarisQueryParams").parseQueryParams().utm_source&&o("PolarisQueryParams").parseQueryParams().utm_source.includes("_sd")?(o("PolarisDismissEntry").setDismissEntry(o("PolarisDismissEntry").PROMOTED_TRAFFIC_TYPE),!0):!1}),u=r("memoize")(function(){return o("PolarisConfig").isProgressiveWebApp()||s()});l.isStrategicTraffic=u}),98);
__d("PolarisFXAuthActions",["FXAuthenticationLogger","PolarisAPIExtractTwoFactorChallengeIfPresent","PolarisAPIFXCALAuthLogin","PolarisAuthStrings","PolarisNavigationUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){return function(a,i){return a({appId:n,etoken:r,type:"FX_AUTH_LOGIN_ATTEMPTED"}),o("PolarisAPIFXCALAuthLogin").fxcalAuthLogin(e.replace(/\s+$/,""),t,n,r).then(function(e){e.authenticated?c(String(e.username),String(e.profile_pic_url),String(e.blob),String(e.token))(a,i):a({errorDescription:o("PolarisAuthStrings").ERROR_LOGIN_PASSWORD,type:"FX_AUTH_LOGIN_FAILED"})},function(e){var t=o("PolarisAPIExtractTwoFactorChallengeIfPresent").extractTwoFactorChallengeIfPresent(e);if(t){a(babelHelpers.extends({fromFB:!1,fromFxAuth:!0,timeReceived:Date.now(),type:"TWO_FACTOR_CHALLENGE_RECEIVED"},t)),a({type:"FX_AUTH_TWO_FACTOR_REQUIRED"});return}a({errorDescription:o("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN,type:"FX_AUTH_LOGIN_FAILED"})}).catch()}}function s(){return function(e){e({type:"FX_AUTH_LOGOUT"}),o("FXAuthenticationLogger").logEvent({event:"web_auth_force_logout",target_account_type:1})}}function u(e,t,n){return function(r){if(!(e==null||t==null||n==null)){var a=new URL(e);a.searchParams.append("blob",t),a.searchParams.append("token",n),r({redirectUrl:a.toString(),type:"FX_AUTH_CONFIRMED"}),o("FXAuthenticationLogger").logEvent({event:"web_auth_confirmed_redirect",target_account_type:1});var i=a.toString();o("PolarisNavigationUtils").openURLWithFullPageReload(i),i.startsWith("accountscenter://")&&window.close()}}}function c(e,t,n,r){return function(a){a({blob:n,profilePicUrl:t,token:r,type:"FX_AUTH_LOGIN_SUCCEEDED",username:e}),o("FXAuthenticationLogger").logEvent({event:"web_auth_confirm_page_view",target_account_type:1})}}l.fxAuthLoginAction=e,l.fxAuthLogoutAction=s,l.fxAuthConfirmedAction=u,l.fxAuthSucceededAction=c}),98);
__d("polarisUpdateTwoFactorLoginNoncesFromResponse",["PolarisOneTapLogin","PolarisTrustedDevicesUtils","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.loginNonce,n=e.trustedDeviceNonce,a=e.userId;a!=null&&(r("isStringNullOrEmpty")(n)||o("PolarisTrustedDevicesUtils").addTrustedDevicesNonce(a,n),r("isStringNullOrEmpty")(t)||o("PolarisOneTapLogin").updateLoginNonce(a,t))}l.default=e}),98);
__d("PolarisTwoFactorActions",["invariant","CAAWebLoginLoggingUtils","PolarisAPIFxcalAuthTwoFactorLogin","PolarisAPILoginTwoFactor","PolarisAPISendTwoFactorLoginSms","PolarisAPISendTwoFactorLoginWhatsapp","PolarisAuthStrings","PolarisFXAuthActions","PolarisInstajax","PolarisLoginQPL","PolarisOneTapLogin","PolarisQueryParams","PolarisRedirectHelper","polarisGetAppPlatform","polarisLogAction","polarisUpdateTwoFactorLoginNoncesFromResponse"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e,t,n,a,i){return i===void 0&&(i=!1),function(l,u){var c=u(),d=c.auth,m=d.dyiJobID,p=d.next,_=d.showOneTap,f=c.auth.twoFactor;f||s(0,51503);var g=f.fromFB,h=f.fromFxAuth,y=f.identifier,C=f.username,b=c.fxAuth,v=b.appId,S=b.etoken;l({type:"TWO_FACTOR_VERIFY_ATTEMPTED"});var R={fb:g,platform:o("polarisGetAppPlatform").getAppPlatform(),source:e},L=h?{}:o("PolarisQueryParams").parseQueryParams(),E=h?o("PolarisAPIFxcalAuthTwoFactorLogin").fxcalAuthTwoFactorLogin(y,t,C,n,a,v!=null?v:"0",S!=null?S:""):o("PolarisAPILoginTwoFactor").loginTwoFactor(y,t,C,n,a,o("PolarisOneTapLogin").queryParamStringWithOneTapInfo(L),i);r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointTwoFactorFormSubmit(a),r("polarisLogAction")("twoFacLoginAttempt",R),E.then(function(e){if(e.authenticated)if(l({type:"TWO_FACTOR_VERIFY_SUCCEEDED"}),r("polarisLogAction")("loginSuccess",babelHelpers.extends({},R,{twoFac:!0})),o("CAAWebLoginLoggingUtils").logLoginResult("two_fac_redirect","two_fac",1,!0,null,null,!1,e.cryptedUid),r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").endSuccess(),r("polarisUpdateTwoFactorLoginNoncesFromResponse")(e),h&&e.blob!==null)l(o("PolarisFXAuthActions").fxAuthSucceededAction(C,String(e.profile_pic_url),String(e.blob),String(e.token)));else{var t,n=(t=L.dyi_job_id)!=null?t:"";o("PolarisRedirectHelper").redirectAfterLogin(p,!!e.reactivated,_&&!!e.oneTapPrompt,e.nonce!=null&&e.nonce!==""?e.nonce:"",m||n)}else{var a=o("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN;l({message:a,type:"TWO_FACTOR_VERIFY_FAILED"}),r("polarisLogAction")("loginFailure",babelHelpers.extends({},R,{twoFac:!0})),r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointUserError("two_factor_failed")}},function(e){var t,n=e instanceof o("PolarisInstajax").AjaxError&&((t=e.responseObject)==null?void 0:t.message)||o("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN;l({message:n,type:"TWO_FACTOR_VERIFY_FAILED"}),r("polarisLogAction")("loginFailure",babelHelpers.extends({},R,{twoFac:!0})),o("CAAWebLoginLoggingUtils").logLoginResult("two_fac_redirect","two_fac",1,!1),r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointUserError("two_factor_failed")})}}function u(){return{type:"TWO_FACTOR_CODE_REQUESTED"}}function c(e){return{message:e,type:"TWO_FACTOR_CODE_REQUEST_FAILED"}}function d(e,t){return{identifier:e,timeSent:Date.now(),type:"TWO_FACTOR_CODE_SENT",verificationMethod:t}}function m(){return _("SMS")}function p(){return _("WHATSAPP")}function _(e){return function(t,n){t(u());var a=n().auth.twoFactor;a||s(0,51504);var i=a.identifier,l=a.username;return r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointTwoFactorRequestNewSMSCode(),e==="SMS"?o("PolarisAPISendTwoFactorLoginSms").sendTwoFactorLoginSms(l,i).then(function(e){t(d(e.two_factor_info.two_factor_identifier,"SMS"))},function(e){var n,a=e instanceof o("PolarisInstajax").AjaxError&&((n=e.responseObject)==null?void 0:n.message)||o("PolarisAuthStrings").TWOFAC_CODE_RESEND_FAILED_TEXT;t(c(a)),r("polarisLogAction")("newCodeSentFailure",{platform:o("polarisGetAppPlatform").getAppPlatform()}),r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").markError("request_new_sms_code_failed",e)}):o("PolarisAPISendTwoFactorLoginWhatsapp").sendTwoFactorLoginWhatsapp(l,i).then(function(e){t(d(e.xdt_send_two_factor_login_whatsapp.two_factor_info.two_factor_identifier,"WHATSAPP"))},function(e){var n,a=e instanceof o("PolarisInstajax").AjaxError&&((n=e.responseObject)==null?void 0:n.message)||o("PolarisAuthStrings").TWOFAC_CODE_RESEND_FAILED_TEXT;t(c(a)),r("polarisLogAction")("newCodeSentFailure",{platform:o("polarisGetAppPlatform").getAppPlatform()}),r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").markError("request_new_whatsapp_code_failed",e)})}}function f(e){return{eligibleForMultipleTotp:!1,fromFB:!1,fromFxAuth:!1,identifier:e.identifier||"",isInSowaExperience:e.isInSowaExperience,lastFourDigits:e.lastFourDigits||"",maskedPhoneNumber:e.maskedPhoneNumber||"",showTrustedDevice:!1,smsTwoFactorOn:e.smsTwoFactorOn||!1,timeReceived:Date.now(),totpTwoFactorOn:e.totpTwoFactorOn||!1,type:"TWO_FACTOR_CHALLENGE_RECEIVED",username:e.username||""}}l.submitVerificationCode=e,l.requestSMSCode=m,l.requestWhatsappCode=p,l.loadTwoFactorAuthenticationData=f}),98);
__d("PolarisTwoFactorForm.react",["fbt","invariant","IGDSBox.react","IGDSCheckbox.react","IGDSDialogFooter.react","IGDSText.react","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisIsLoggedIn","PolarisLoginQPL","PolarisNavigationUtils","PolarisReactRedux.react","PolarisSlimTextInput.react","PolarisTwoFactorActions","PolarisUA","react","react-compiler-runtime","vulture"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d="twoFactorErrorAlert",m=s._(/*BTDS*/"c\u00f3digos de reserva"),p=s._(/*BTDS*/"SMS"),_=s._(/*BTDS*/"app de autentica\u00e7\u00e3o"),f=s._(/*BTDS*/"reenvi\u00e1-lo"),g=s._(/*BTDS*/"Enviar c\u00f3digo por SMS"),h=s._(/*BTDS*/"Enviar c\u00f3digo por WhatsApp"),y=s._(/*BTDS*/"Confiar neste dispositivo"),C=s._(/*BTDS*/"N\u00e3o solicitaremos um c\u00f3digo na pr\u00f3xima vez"),b=s._(/*BTDS*/"C\u00f3digo de seguran\u00e7a"),v=s._(/*BTDS*/"Confirmar"),S=s._(/*BTDS*/"Insira o c\u00f3digo de login"),R=s._(/*BTDS*/"Insira o c\u00f3digo de 6 d\u00edgitos gerado pelo seu app de autentica\u00e7\u00e3o."),L=s._(/*BTDS*/"Insira um c\u00f3digo de login de 6 d\u00edgitos gerado por um app de autentica\u00e7\u00e3o."),E=s._(/*BTDS*/"Insira um dos c\u00f3digos de 8 d\u00edgitos fornecidos quando voc\u00ea configurou a autentica\u00e7\u00e3o de dois fatores.");function k(e){var t=o("react-compiler-runtime").c(9),n=e.onClickAuthAppCode,a=e.onClickBackupCode,i=e.verificationMethod,l=o("PolarisReactRedux.react").useSelector(I),u;t[0]!==l?(u={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&l&&o("PolarisIsLoggedIn").isLoggedIn())<<0],t[0]=l,t[1]=u):u=t[1];var d;t[2]!==n||t[3]!==a||t[4]!==i?(d=i==="TOTP"?s._(/*BTDS*/"Se voc\u00ea n\u00e3o receber um c\u00f3digo de login de um app de autentica\u00e7\u00e3o, use um dos seus {=backup codes}.",[s._param("=backup codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):s._(/*BTDS*/"Se n\u00e3o conseguir usar um dos c\u00f3digos de reserva, voc\u00ea pode obter um dos seus {=auth app codes}",[s._param("=auth app codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:_}))]),t[2]=n,t[3]=a,t[4]=i,t[5]=d):d=t[5];var p;return t[6]!==u||t[7]!==d?(p=c.jsx("div",babelHelpers.extends({},u,{children:d})),t[6]=u,t[7]=d,t[8]=p):p=t[8],p}function I(e){return e.navigation.isAccountSwitcherOpen}function T(e){var t=o("react-compiler-runtime").c(9),n=e.onClickBackupCode,a=e.onClickSmsCode,i=e.verificationMethod,l=o("PolarisReactRedux.react").useSelector(D),u;t[0]!==l?(u={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&l&&o("PolarisIsLoggedIn").isLoggedIn())<<0],t[0]=l,t[1]=u):u=t[1];var d;t[2]!==n||t[3]!==a||t[4]!==i?(d=i==="SMS"||i==="WHATSAPP"?s._(/*BTDS*/"Se voc\u00ea n\u00e3o receber um c\u00f3digo de seguran\u00e7a, use um dos seus {=backup codes}.",[s._param("=backup codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):s._(/*BTDS*/"Se n\u00e3o conseguir usar um c\u00f3digo de seguran\u00e7a dos seus c\u00f3digos de reserva, voc\u00ea poder\u00e1 conseguir um ao {=resend it}",[s._param("=resend it",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:p}))]),t[2]=n,t[3]=a,t[4]=i,t[5]=d):d=t[5];var _;return t[6]!==u||t[7]!==d?(_=c.jsx("div",babelHelpers.extends({},u,{children:d})),t[6]=u,t[7]=d,t[8]=_):_=t[8],_}function D(e){return e.navigation.isAccountSwitcherOpen}function x(e){var t=o("react-compiler-runtime").c(10),n=e.onClickAuthAppCode,a=e.onClickBackupCode,i=e.onClickSmsCode,l=e.verificationMethod,u=o("PolarisReactRedux.react").useSelector($),d;t[0]!==u?(d={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&u&&o("PolarisIsLoggedIn").isLoggedIn())<<0],t[0]=u,t[1]=d):d=t[1];var f;t[2]!==n||t[3]!==a||t[4]!==i||t[5]!==l?(f=l==="TOTP"?s._(/*BTDS*/"Se voc\u00ea n\u00e3o receber um c\u00f3digo de login de um app de autentica\u00e7\u00e3o, obtenha um por {=sms code} ou use um dos seus {=backup codes}.",[s._param("=sms code",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:i,children:p})),s._param("=backup codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):l==="SMS"?s._(/*BTDS*/"Se voc\u00ea n\u00e3o receber o c\u00f3digo de seguran\u00e7a por SMS, use um dos seus {=auth app codes} ou {=backup codes}.",[s._param("=auth app codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:_})),s._param("=backup codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):s._(/*BTDS*/"Se n\u00e3o conseguir receber um c\u00f3digo de seguran\u00e7a dos seus c\u00f3digos de backup, voc\u00ea pode {=resend it} ou usar um dos seus {=auth app codes}",[s._param("=resend it",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:i,children:p})),s._param("=auth app codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:_}))]),t[2]=n,t[3]=a,t[4]=i,t[5]=l,t[6]=f):f=t[6];var g;return t[7]!==d||t[8]!==f?(g=c.jsx("div",babelHelpers.extends({},d,{children:f})),t[7]=d,t[8]=f,t[9]=g):g=t[9],g}function $(e){return e.navigation.isAccountSwitcherOpen}function P(e){var t=o("react-compiler-runtime").c(7),n=e.onNewCodeClicked,a=o("PolarisReactRedux.react").useSelector(N),i;t[0]!==a?(i={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&a&&o("PolarisIsLoggedIn").isLoggedIn())<<0],t[0]=a,t[1]=i):i=t[1];var l;t[2]!==n?(l=s._(/*BTDS*/"N\u00e3o recebeu o c\u00f3digo de seguran\u00e7a? Podemos {=resend it}.",[s._param("=resend it",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:f})}))]),t[2]=n,t[3]=l):l=t[3];var u;return t[4]!==i||t[5]!==l?(u=c.jsx("div",babelHelpers.extends({},i,{children:l})),t[4]=i,t[5]=l,t[6]=u):u=t[6],u}function N(e){return e.navigation.isAccountSwitcherOpen}function M(e){var t=o("react-compiler-runtime").c(13),n=e.onNewCodeClicked,a=e.onOtherMethodCodeClicked,i=e.verificationMethod,l=o("PolarisReactRedux.react").useSelector(w),u;t[0]!==l?(u={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&l&&o("PolarisIsLoggedIn").isLoggedIn())<<0],t[0]=l,t[1]=u):u=t[1];var d;t[2]!==n||t[3]!==a||t[4]!==i?(d=i==="SMS"&&s._(/*BTDS*/"N\u00e3o recebeu o c\u00f3digo de seguran\u00e7a? Podemos {=resend it}. {=send WhatsApp instead}",[s._param("=resend it",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:f})})),s._param("=send WhatsApp instead",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:h})}))]),t[2]=n,t[3]=a,t[4]=i,t[5]=d):d=t[5];var m;t[6]!==a||t[7]!==i?(m=i==="WHATSAPP"&&s._(/*BTDS*/"N\u00e3o recebeu o c\u00f3digo de seguran\u00e7a? {=send sms instead}",[s._param("=send sms instead",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:g})}))]),t[6]=a,t[7]=i,t[8]=m):m=t[8];var p;return t[9]!==u||t[10]!==d||t[11]!==m?(p=c.jsxs("div",babelHelpers.extends({},u,{children:[d,m]})),t[9]=u,t[10]=d,t[11]=m,t[12]=p):p=t[12],p}function w(e){return e.navigation.isAccountSwitcherOpen}var A="verificationCodeDescription";function F(e){switch(e){case"SMS":return 1;case"BACKUP_CODE":return 2;case"TOTP":return 3;case"WHATSAPP":return 6;default:return r("vulture")("yhGvsyGQ7jRu4D6I_6RGJXqrpD8="),0}}var O=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$3=function(){r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointTwoFactorCodeFocus()},n.$4=function(e){r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointTwoFactorSubmitButtonClick(),n.$5(e)},n.$5=function(e){e.preventDefault();var t=n.state,r=t.currentVerificationMethod,o=t.trustSignal,a=t.verificationCode,i=a.replace(/\s+/g,""),l=F(r).toString();n.props.onSubmit(o,i,l)},n.$6=function(e){var t=e.target.value;t.match(/^[0-9 ]*$/)&&n.setState({verificationCode:t})},n.state={currentVerificationMethod:t.totpTwoFactorOn?"TOTP":t.isInSowaExperience?"WHATSAPP":"SMS",trustSignal:t.showTrustedDevice,verificationCode:""},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){this.$1&&this.$1.focus(),this.$2()},n.componentDidUpdate=function(){this.$2()},n.$2=function(){this.props.hasTwoFactorState||o("PolarisNavigationUtils").openURL("/")},n.$7=function(t){return this.$8(t,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x1atzwio")},n.$9=function(t){return this.$8(t,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x5n08af")},n.$8=function(t,n){return c.jsx("div",{className:n,children:c.jsx("p",{"aria-atomic":"true",id:d,role:"alert",size:"footnote",children:t})})},n.getSubTextIndex=function(){var e=this.state.currentVerificationMethod,t=this.props,n=t.eligibleForMultipleTotp,r=t.isInSowaExperience;switch(e){case"TOTP":return n===!0?0:1;case"BACKUP_CODE":return 2;case"WHATSAPP":return 3;case"SMS":return r?4:5}},n.render=function(){var e=this,t=this.props,n=t.errorMessage,a=t.isAccountSwitcherOpen,i=t.showTrustedDevice,l=t.smsTwoFactorOn,d=t.successMessage,m=t.totpTwoFactorOn,p=this.state.currentVerificationMethod;l||m||u(0,51594);var _=s._(/*BTDS*/"Insira o c\u00f3digo enviado por WhatsApp ao seu n\u00famero de celular: {maskedPhoneNumber}.",[s._param("maskedPhoneNumber",this.props.maskedPhoneNumber)]),f=s._(/*BTDS*/"Insira o c\u00f3digo enviado por SMS ao seu n\u00famero de celular: {maskedPhoneNumber}.",[s._param("maskedPhoneNumber",this.props.maskedPhoneNumber)]),g=s._(/*BTDS*/"Digite o c\u00f3digo que enviamos para o seu n\u00famero com final {lastFourDigits}",[s._param("lastFourDigits",this.props.lastFourDigits)]),h=[L,R,E,_,f,g];return c.jsxs("div",babelHelpers.extends({},{0:{className:"x889kno xyri2b x1a8lsjc x1c1uobl"},1:{className:"x889kno xyri2b x18d9i69 x1c1uobl"}}[(this.props.style==="modal")<<0],{children:[c.jsx("div",babelHelpers.extends({},{0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&a&&o("PolarisIsLoggedIn").isLoggedIn())<<0],{id:A,children:h[this.getSubTextIndex()]})),c.jsxs("form",{className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",method:"POST",onSubmit:this.$5,children:[c.jsx(r("PolarisSlimTextInput.react"),{"aria-describedby":A,"aria-label":b,"aria-required":"true",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:{0:"xdj266r x11gldyt xzueoph x11hdunq",1:"x14vqqas x1ys307a x1hq5gj4 xyqm7xq"}[!!(o("PolarisUA").isMobile()&&a&&o("PolarisIsLoggedIn").isLoggedIn())<<0],"data-testid":void 0,maxLength:8,name:"verificationCode",onChange:this.$6,onFocus:this.$3,placeholder:b,ref:function(n){return e.$1=n},type:"tel",value:this.state.verificationCode}),this.props.style==="default"&&c.jsx(r("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,marginTop:1,position:"relative",children:c.jsx(r("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:this.$4,children:v})}),n!=null&&n!==""&&this.$7(n),d!=null&&d!==""&&this.$9(d),i?c.jsx(r("IGDSBox.react"),{marginBottom:6,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:c.jsx(r("IGDSCheckbox.react"),{isChecked:this.state.trustSignal,onChange:function(){var t=e.state.trustSignal;e.setState({trustSignal:!t})},size:16,children:c.jsxs(r("IGDSBox.react"),{direction:"column",display:"flex",position:"relative",children:[c.jsx(r("IGDSText.react"),{size:"footnote",weight:"semibold",children:y}),c.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",children:c.jsx(r("IGDSText.react"),{size:"footnote",children:C})})]})})}):null,m&&l&&c.jsx(x,{onClickAuthAppCode:function(){e.setState({currentVerificationMethod:"TOTP"})},onClickBackupCode:function(){e.setState({currentVerificationMethod:"BACKUP_CODE"})},onClickSmsCode:function(n){e.props.onNewCodeClicked(n),e.setState({currentVerificationMethod:"SMS"})},verificationMethod:p}),m&&!l&&c.jsx(k,{onClickAuthAppCode:function(){e.setState({currentVerificationMethod:"TOTP"})},onClickBackupCode:function(){e.setState({currentVerificationMethod:"BACKUP_CODE"})},verificationMethod:p}),!m&&p==="WHATSAPP"&&c.jsx(M,{onOtherMethodCodeClicked:function(n){e.props.onNewCodeClicked(n),e.setState({currentVerificationMethod:"SMS"})},verificationMethod:"WHATSAPP"}),!m&&p==="SMS"&&this.props.isInSowaExperience&&c.jsx(M,{onNewCodeClicked:function(n){e.props.onNewCodeClicked(n),e.setState({currentVerificationMethod:"SMS"})},onOtherMethodCodeClicked:function(n){e.props.onNewWhatsappCodeClicked(n),e.setState({currentVerificationMethod:"WHATSAPP"})},verificationMethod:"SMS"}),!m&&p==="SMS"&&!this.props.isInSowaExperience&&c.jsx(P,{onNewCodeClicked:this.props.onNewCodeClicked}),!m&&c.jsx(T,{onClickBackupCode:function(){e.setState({currentVerificationMethod:"BACKUP_CODE"})},onClickSmsCode:function(n){e.props.onNewCodeClicked(n),e.setState({currentVerificationMethod:"SMS"})},verificationMethod:p}),this.props.style==="modal"&&(o("PolarisUA").isMobile()?c.jsx(r("IGDSBox.react"),{marginBottom:8,marginEnd:4,marginStart:3,marginTop:3,position:"relative",children:c.jsx(r("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:this.$5,children:o("PolarisAuthStrings").CONTINUE})}):c.jsx(r("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:c.jsx(r("IGDSDialogFooter.react"),{endAdornment:c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,loading:this.props.requestInFlight,onClick:this.$5,children:o("PolarisAuthStrings").CONTINUE}),startAdornment:this.props.onBackClick!=null?c.jsx(r("IGDSBox.react"),{alignItems:"start",justifyContent:"center",paddingX:3,position:"relative",children:c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:this.props.onBackClick,children:o("PolarisGenericStrings").BACK_TEXT})}):null})}))]})]}))},t})(c.Component);O.defaultProps={style:"default"};function B(e,t){var n,r=e.twoFactor,o=r==null?void 0:r.message;return{eligibleForMultipleTotp:(r==null?void 0:r.eligibleForMultipleTotp)||!1,errorMessage:o&&o.isError&&o.text||((n=t.errorMessage)!=null?n:null),hasTwoFactorState:!!r,isAccountSwitcherOpen:e.navigation.isAccountSwitcherOpen,isInSowaExperience:(r==null?void 0:r.isInSowaExperience)||!1,lastFourDigits:r==null?void 0:r.lastFourDigits,maskedPhoneNumber:r==null?void 0:r.maskedPhoneNumber,requestInFlight:(r==null?void 0:r.requestInFlight)||t.requestInFlight,showTrustedDevice:(r==null?void 0:r.showTrustedDevice)||!1,smsTwoFactorOn:(r==null?void 0:r.smsTwoFactorOn)||!1,successMessage:o&&!o.isError?o.text:"",totpTwoFactorOn:(r==null?void 0:r.totpTwoFactorOn)||!1}}function W(e,t){return{onNewCodeClicked:function(n){e(o("PolarisTwoFactorActions").requestSMSCode())},onNewWhatsappCodeClicked:function(n){e(o("PolarisTwoFactorActions").requestWhatsappCode())},onSubmit:function(r,a,i){var n;e(o("PolarisTwoFactorActions").submitVerificationCode(t.pageIdentifier,r,a,i,(n=t.isPrivacyPortalReq)!=null?n:!1))}}}var q=o("PolarisReactRedux.react").connect(B,W)(O);l.default=q}),226);
__d("XPolarisLoginControllerParamsRefineValidator",["coerceRouteParams","refine"],(function(t,n,r,o,a,i,l){var e,s=(e=o("refine")).or(e.literal(null),e.string()),u=e.object({dyi_job_id:s,e_un:s,enable_fb_login:e.bool(),flo:e.bool(),force_authentication:e.bool(),force_login_igid:s,hl:s,is_from_rle:e.bool(),is_in_reg_entrypoint_qe_test:s,is_initiator_feta:s,logged_out_reporting_url:s,mtn:e.bool(),next:s,platform_app_id:s,request_id:s,source:s,source_of_flow:s,target_user_id:s}),c=e.coercion(u),d=Object.freeze({force_authentication:{legacyNames:[],default:!1,coercibleType:"EXISTS"},target_user_id:{legacyNames:[],default:null,coercibleType:"STRING"},force_login_igid:{legacyNames:[],default:null,coercibleType:"STRING"},platform_app_id:{legacyNames:[],default:null,coercibleType:"STRING"},logged_out_reporting_url:{legacyNames:[],default:null,coercibleType:"STRING"},next:{legacyNames:[],default:null,coercibleType:"STRING"},dyi_job_id:{legacyNames:[],default:null,coercibleType:"STRING"},source:{legacyNames:[],default:null,coercibleType:"STRING"},hl:{legacyNames:[],default:null,coercibleType:"STRING"},e_un:{legacyNames:[],default:null,coercibleType:"STRING"},enable_fb_login:{legacyNames:[],default:!1,coercibleType:"EXISTS"},request_id:{legacyNames:[],default:null,coercibleType:"STRING"},is_from_rle:{legacyNames:[],default:!1,coercibleType:"EXISTS"},mtn:{legacyNames:[],default:!1,coercibleType:"EXISTS"},flo:{legacyNames:[],default:!1,coercibleType:"BOOL"},source_of_flow:{legacyNames:[],default:null,coercibleType:"STRING"},is_in_reg_entrypoint_qe_test:{legacyNames:[],default:null,coercibleType:"STRING"},is_initiator_feta:{legacyNames:[],default:null,coercibleType:"STRING"}});function m(e){return c(r("coerceRouteParams")(e,d))}l.refineXPolarisLoginControllerParams=m}),98);
__d("PolarisAuthFormCard.react",["fbt","invariant","ix","CometRouteParams","FBLogger","IGCoreImage.react","IGDSBox.react","IGDSDivider.react","IGDSIgLogoFilledIcon.react","IGDSSpinner.react","IGDSText.react","IGDSTextVariants.react","InstagramQueryParamsHelper","PolarisAppsellUnit.react","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthTypeSwitcher.react","PolarisBarcelonaAppSVGIcon.react","PolarisConfig","PolarisConsentModal.react","PolarisExternalLink.react","PolarisFBConnectActions","PolarisFBConnectHelpers","PolarisFBConnectV2LoginForm.react","PolarisFacebookAccountPicker.react","PolarisFacebookLoginForm.react","PolarisIsLoggedIn","PolarisLandingForm.react","PolarisLoggedOutContentWallDialogAuthCTAs.react","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutCtaImpressionLogger","PolarisLoggedOutNetzDGReportLink.react","PolarisLoggedOutUpsellStrings","PolarisLoginActionClearStopDeletionNonce","PolarisLoginActionLogin","PolarisLoginActionLoginWithFBAccessToken","PolarisLoginActionLoginWithFBJSSDK","PolarisLoginLogger","PolarisLoginQPL","PolarisOneTapLogin","PolarisOneTapLoginForm.react","PolarisOneTapLoginStorage","PolarisQueryParams","PolarisReactRedux.react","PolarisSenderNameHelpers","PolarisSignupForm.react","PolarisSignupTypes","PolarisSlimLoginForm.react","PolarisStrategicWebTraffic","PolarisTwoFactorForm.react","PolarisUA","PolarisUserAvatar.react","URI","XPolarisLoginControllerParamsRefineValidator","nullthrows","polarisIsEligibleForFacebookLogin","polarisUserSelectors","react","react-compiler-runtime","stylex","usePolarisCentralizedUpsellState","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXMobileHomepageDesign","usePolarisLoggedInFBUserForHomepage","usePolarisPageID","usePolarisRouteConfig","usePrevious","useSinglePartialViewImpression","warning"],(function(t,n,r,o,a,i,l,s,u,c){"use strict";var e,d,m,p=m||(m=o("react")),_=m.useEffect,f=s._(/*BTDS*/"Continue sem fazer login."),g=s._(/*BTDS*/"Sua senha foi redefinida. Tente fazer login novamente."),h=s._(/*BTDS*/"Conecte-se para seguir as pessoas no Instagram."),y=s._(/*BTDS*/"\u00cdcone de cadeado da autentica\u00e7\u00e3o de dois fatores"),C={mobileBrandingForwardPadding:{paddingTop:"xexx8yu",$$css:!0},mobileBrandPadding:{paddingTop:"xnk5j39",$$css:!0},mobileFooterPadding:{paddingBottom:"xefzj8c",$$css:!0},redesignedRoot:{maxWidth:"x1k7vjkh xusnbm3",$$css:!0},root:{color:"x5n08af",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k x7qam4e",marginTop:"x14vqqas x15lw1kp",maxWidth:"x1dc814f x1owpceq",width:"xh8yej3",$$css:!0},rootModal:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",maxWidth:"x1319t99",width:"xh8yej3",$$css:!0}};function b(t){var n=o("react-compiler-runtime").c(90),a=t.authTypeOverride,i=t.dialogSource,l=t.forceLoginIgId,s=t.forceLoginProfilePicUrl,c=t.forceLoginUsername,d=t.fromLoggedOutDialog,m=t.hideAppUpsells,f=t.hideBorder,g=t.hideForgotPassword,h=t.intentSource,y=t.isPrivacyPortalReq,b=t.pageIdentifier,S=t.pageType,R=t.shouldAutoPickUsername,L=t.shouldEnableShortFirstStep,E=t.shouldShowBirthdayStepInBaseForm,k=t.shouldShowBirthdayTransparency,I=t.shouldShowRedesignedSignupPage,T=t.showNetzDGReportLink,D=t.style,x=t.useMobileBrandPadding,$=t.useMobileFooterPadding,M=t.usernameHint,w=t.xstyle,F=d===void 0?!1:d,B=m===void 0?!1:m,W=g===void 0?!1:g,q=y===void 0?!1:y,U=E===void 0?!1:E,V=T===void 0?!1:T,H=D===void 0?"default":D,G=x===void 0?!0:x,z=$===void 0?!0:$,j=r("usePolarisPageID")(),K=b!=null?b:j,Q=r("usePolarisLoggedInFBUserForHomepage")(),Y=N();Q=!Y&&o("PolarisUA").isDesktop()?Q:null;var J=o("PolarisReactRedux.react").useSelector(v),Z=J.auth,ee=Z.authType,te=a!=null?a:ee;te!=null||u(0,51551);var oe=I===!0&&te===o("PolarisAuthActionConstants").AUTH.signup,ie=r("usePolarisLOXBrandForwardDeeplinkLogoUpsell")(),le=ie.isBrandForwardDeeplinkLogoUpsell,se=r("usePolarisLOXMobileHomepageDesign")(),ue=se.isLOXMobileHomepageDesign,ce=r("usePolarisRouteConfig")(),de=ce.showBrandingPageWithNav,me=le||ue||de===!0,pe=r("usePrevious")(te),_e,fe;n[0]!==te||n[1]!==pe?(_e=function(){!r("PolarisLoginQPL").isActive()&&pe!==o("PolarisAuthActionConstants").AUTH.login&&te===o("PolarisAuthActionConstants").AUTH.login&&r("PolarisLoginQPL").start()},fe=[pe,te],n[0]=te,n[1]=pe,n[2]=_e,n[3]=fe):(_e=n[2],fe=n[3]),_(_e,fe);var ge=o("PolarisReactRedux.react").useStore(),he,ye;n[4]!==te||n[5]!==ge?(he=function(){if(te===o("PolarisAuthActionConstants").AUTH.login||te===o("PolarisAuthActionConstants").AUTH.twoFactor)return function(){var e=ge.getState().auth.authType===o("PolarisAuthActionConstants").AUTH.twoFactor;r("PolarisLoginQPL").isActive()&&!e&&r("PolarisLoginQPL").endCancel()}},ye=[te,ge],n[4]=te,n[5]=ge,n[6]=he,n[7]=ye):(he=n[6],ye=n[7]),_(he,ye);var Ce=o("PolarisReactRedux.react").useDispatch(),be=P(),ve;n[8]!==te||n[9]!==Y||n[10]!==Q||n[11]!==be?(ve=function(){var e;Q!=null&&((e=Q)==null?void 0:e.profile_name)!=null&&o("PolarisUA").isDesktop()&&!Y&&te!==o("PolarisAuthActionConstants").AUTH.fbLogin&&te!==o("PolarisAuthActionConstants").AUTH.fbAccountPicker&&te!==o("PolarisAuthActionConstants").AUTH.oneTapLogin&&be(o("PolarisAuthActionConstants").AUTH.fbConnectV2)},n[8]=te,n[9]=Y,n[10]=Q,n[11]=be,n[12]=ve):ve=n[12];var Se;n[13]!==te||n[14]!==Ce||n[15]!==Y||n[16]!==Q||n[17]!==be||n[18]!==pe?(Se=[pe,te,Q,Y,Ce,be],n[13]=te,n[14]=Ce,n[15]=Y,n[16]=Q,n[17]=be,n[18]=pe,n[19]=Se):Se=n[19],_(ve,Se);var Re;if(n[20]!==te||n[21]!==me||n[22]!==oe||n[23]!==H||n[24]!==G||n[25]!==z||n[26]!==w){var Le;n[28]!==te||n[29]!==me||n[30]!==G?(Le=o("PolarisUA").isMobile()&&te===o("PolarisAuthActionConstants").AUTH.none&&G&&(me?C.mobileBrandingForwardPadding:C.mobileBrandPadding),n[28]=te,n[29]=me,n[30]=G,n[31]=Le):Le=n[31],Re=(e||(e=r("stylex"))).props(C.root,H==="modal"&&C.rootModal,oe&&C.redesignedRoot,o("PolarisUA").isMobile()&&!!z&&C.mobileFooterPadding,Le,w),n[20]=te,n[21]=me,n[22]=oe,n[23]=H,n[24]=G,n[25]=z,n[26]=w,n[27]=Re}else Re=n[27];var Ee;n[32]!==te||n[33]!==f||n[34]!==oe||n[35]!==H?(Ee={0:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf"},4:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a xh8yej3"},2:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},6:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},1:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},5:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xh8yej3 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},3:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},7:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"}}[(H==="modal")<<2|!!(f===!0||oe)<<1|(te===o("PolarisAuthActionConstants").AUTH.fbConnectV2&&H!=="modal")<<0],n[32]=te,n[33]=f,n[34]=oe,n[35]=H,n[36]=Ee):Ee=n[36];var ke;n[37]!==te||n[38]!==K||n[39]!==me||n[40]!==oe?(ke=!me&&p.jsx(X,{authType:te,pageID:K,shouldShowRedesignedSignup:oe}),n[37]=te,n[38]=K,n[39]=me,n[40]=oe,n[41]=ke):ke=n[41];var Ie;n[42]!==te||n[43]!==i||n[44]!==l||n[45]!==s||n[46]!==c||n[47]!==F||n[48]!==W||n[49]!==h||n[50]!==q||n[51]!==Q||n[52]!==K||n[53]!==S||n[54]!==R||n[55]!==L||n[56]!==U||n[57]!==k||n[58]!==oe||n[59]!==H||n[60]!==M?(Ie=p.jsx(O,{authType:te,dialogSource:i,forceLoginIgId:l,forceLoginProfilePicUrl:s,forceLoginUsername:c,fromLoggedOutDialog:F,hideForgotPassword:W,intentSource:h,isPrivacyPortalReq:q,loggedInFBUser:Q,pageID:K,pageType:S,shouldAutoPickUsername:R,shouldEnableShortFirstStep:L,shouldShowBirthdayStepInBaseForm:U,shouldShowBirthdayTransparency:k,shouldShowRedesignedSignup:oe,style:H,usernameHint:M}),n[42]=te,n[43]=i,n[44]=l,n[45]=s,n[46]=c,n[47]=F,n[48]=W,n[49]=h,n[50]=q,n[51]=Q,n[52]=K,n[53]=S,n[54]=R,n[55]=L,n[56]=U,n[57]=k,n[58]=oe,n[59]=H,n[60]=M,n[61]=Ie):Ie=n[61];var Te;n[62]!==te||n[63]!==Ie?(Te=p.jsx(A,{authType:te,children:Ie}),n[62]=te,n[63]=Ie,n[64]=Te):Te=n[64];var De;n[65]!==K||n[66]!==V?(De=p.jsx(ne,{pageID:K,showNetzDGReportLink:V}),n[65]=K,n[66]=V,n[67]=De):De=n[67];var xe;n[68]===Symbol.for("react.memo_cache_sentinel")?(xe=p.jsx(re,{}),n[68]=xe):xe=n[68];var $e;n[69]!==Ee||n[70]!==ke||n[71]!==Te||n[72]!==De?($e=p.jsxs("div",babelHelpers.extends({},Ee,{"data-testid":void 0,children:[ke,Te,De,xe]})),n[69]=Ee,n[70]=ke,n[71]=Te,n[72]=De,n[73]=$e):$e=n[73];var Pe;n[74]===Symbol.for("react.memo_cache_sentinel")?(Pe=p.jsx(r("PolarisConsentModal.react"),{}),n[74]=Pe):Pe=n[74];var Ne;n[75]!==te||n[76]!==l||n[77]!==F||n[78]!==B||n[79]!==f||n[80]!==Q||n[81]!==K||n[82]!==S||n[83]!==oe||n[84]!==H?(Ne=oe!==!0&&p.jsx(ae,{authType:te,forceLoginIgId:l,fromLoggedOutDialog:F,hideAppUpsells:B,hideBorder:f,loggedInFBUser:Q,pageId:K,pageType:S,style:H}),n[75]=te,n[76]=l,n[77]=F,n[78]=B,n[79]=f,n[80]=Q,n[81]=K,n[82]=S,n[83]=oe,n[84]=H,n[85]=Ne):Ne=n[85];var Me;return n[86]!==Re||n[87]!==$e||n[88]!==Ne?(Me=p.jsxs("div",babelHelpers.extends({},Re,{children:[$e,Pe,Ne]})),n[86]=Re,n[87]=$e,n[88]=Ne,n[89]=Me):Me=n[89],Me}function v(e){return e}function S(e,t,n){var a=o("react-compiler-runtime").c(4),i;return a[0]!==e||a[1]!==t||a[2]!==n?(i={onImpressionStart:function(){e||o("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("auth_form",n,{},t!=null?t:void 0)}},a[0]=e,a[1]=t,a[2]=n,a[3]=i):i=a[3],r("useSinglePartialViewImpression")(i)}function R(e){var t=r("usePolarisCentralizedUpsellState")(),n=t[0],a=n.isProfileOrPostPage;return e===o("PolarisAuthActionConstants").AUTH.signup&&a}function L(e){var t=o("react-compiler-runtime").c(4),n=o("PolarisReactRedux.react").useSelector(E),a=n.auth,i=a.signup,l=r("usePolarisCentralizedUpsellState")(),s=l[0],u=s.isProfileOrPostPage,c;return t[0]!==e||t[1]!==u||t[2]!==(i==null?void 0:i.step)?(c=!o("PolarisIsLoggedIn").isLoggedIn()&&o("PolarisUA").isDesktop()&&u&&e!==o("PolarisAuthActionConstants").AUTH.fbConnectV2&&(e===o("PolarisAuthActionConstants").AUTH.signup?(i==null?void 0:i.step)===o("PolarisSignupTypes").STEP.base:!0),t[0]=e,t[1]=u,t[2]=i==null?void 0:i.step,t[3]=c):c=t[3],c}function E(e){return e}function k(){var e=o("react-compiler-runtime").c(6),t=o("PolarisReactRedux.react").useSelector(I),n=t.fb,r=n.authResponse,a=n.igProfile,i=n.igProfiles,l=n.igSSODisabled;if(a==null)return null;var s=r==null?void 0:r.userID,u;return e[0]!==a.profilePictureUrl||e[1]!==a.username||e[2]!==i||e[3]!==l||e[4]!==s?(u={fbUserID:s,igSSODisabled:l,linkedIGProfiles:i,profilePictureUrl:a.profilePictureUrl,username:a.username},e[0]=a.profilePictureUrl,e[1]=a.username,e[2]=i,e[3]=l,e[4]=s,e[5]=u):u=e[5],u}function I(e){return e}function T(){var e,t,n=o("PolarisReactRedux.react").useSelector(D),r=n.auth,a=r.login,i=r.twoFactor;return(a==null?void 0:a.errorMessage)!=null?a.errorMessage:(i==null||(e=i.message)==null?void 0:e.isError)===!0&&(i==null||(t=i.message)==null?void 0:t.text)!=null?i.message.text:null}function D(e){return e}function x(){var e,t,n,r=o("PolarisReactRedux.react").useSelector($),a=r.auth,i=a.login,l=a.signup,s=a.twoFactor;return(e=(t=(n=i==null?void 0:i.requestInFlight)!=null?n:l==null?void 0:l.requestInFlight)!=null?t:s==null?void 0:s.requestInFlight)!=null?e:!1}function $(e){return e}function P(){var e=o("react-compiler-runtime").c(2),t=o("PolarisReactRedux.react").useDispatch(),n;return e[0]!==t?(n=function(n){t(o("PolarisAuthActions").switchAuthType(n))},e[0]=t,e[1]=n):n=e[1],n}function N(){var e=o("react-compiler-runtime").c(2),t=o("PolarisReactRedux.react").useSelector(w),n=t.auth,a=n.next,i;if(e[0]!==a){i=Symbol.for("react.early_return_sentinel");e:{var l=new(d||(d=r("URI")))(a),s=l.getPath(),u=l.getDomain();if(u===""&&s==="/oauth/authorize"){var c,m=l.getQueryData(),p=(c=m.scope)==null?void 0:c.split(",");i=(p==null?void 0:p.every(M))===!0;break e}}e[0]=a,e[1]=i}else i=e[1];return i!==Symbol.for("react.early_return_sentinel")?i:!1}function M(e){return e.startsWith("threads_")}function w(e){return e}function A(e){var t=o("react-compiler-runtime").c(1),n=e.authType,a=e.children,i=o("PolarisReactRedux.react").useSelector(F),l=i.auth,s=l.isFBLoggedIn;if((n===o("PolarisAuthActionConstants").AUTH.fbLogin||n===o("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&s==null){var u;return t[0]===Symbol.for("react.memo_cache_sentinel")?(u=p.jsx(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",minHeight:160,position:"relative",children:p.jsx(r("IGDSSpinner.react"),{size:"small"})}),t[0]=u):u=t[0],u}return a}function F(e){return e}function O(e){var t=o("react-compiler-runtime").c(36),n=e.authType,a=e.dialogSource,i=e.forceLoginIgId,l=e.forceLoginProfilePicUrl,s=e.forceLoginUsername,u=e.fromLoggedOutDialog,c=e.hideForgotPassword,d=e.intentSource,m=e.isPrivacyPortalReq,_=e.loggedInFBUser,f=e.pageID,g=e.pageType,h=e.shouldAutoPickUsername,y=e.shouldEnableShortFirstStep,C=e.shouldShowBirthdayStepInBaseForm,b=e.shouldShowBirthdayTransparency,v=e.shouldShowRedesignedSignup,S=e.style,R=e.usernameHint,L=m===void 0?!1:m,E=h===void 0?!1:h,I=y===void 0?!1:y,T=C===void 0?!1:C,D=v===void 0?!1:v,x=o("PolarisReactRedux.react").useSelector(B),$=x.auth,P=$.isFBLoggedIn,M=k(),w=N(),A=i!=null,F=(n===o("PolarisAuthActionConstants").AUTH.fbLogin||n===o("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&P===!0&&!!M;if(n===o("PolarisAuthActionConstants").AUTH.fbConnectV2&&_!=null&&_.profile_name!=null){var O;return t[0]===Symbol.for("react.memo_cache_sentinel")?(O=p.jsx(z,{}),t[0]=O):O=t[0],O}else if(n===o("PolarisAuthActionConstants").AUTH.signup&&!o("PolarisUA").isMobile()){var V;return t[1]!==n||t[2]!==u||t[3]!==d||t[4]!==f||t[5]!==E||t[6]!==I||t[7]!==T||t[8]!==b||t[9]!==D||t[10]!==S?(V=p.jsx(W,{authType:n,fromLoggedOutDialog:u,intentSource:d,pageID:f,shouldAutoPickUsername:E,shouldEnableShortFirstStep:I,shouldShowBirthdayStepInBaseForm:T,shouldShowBirthdayTransparency:b,shouldShowRedesignedSignup:D,style:S}),t[1]=n,t[2]=u,t[3]=d,t[4]=f,t[5]=E,t[6]=I,t[7]=T,t[8]=b,t[9]=D,t[10]=S,t[11]=V):V=t[11],V}else if(n===o("PolarisAuthActionConstants").AUTH.twoFactor){var H;return t[12]!==L||t[13]!==f||t[14]!==S?(H=p.jsx(q,{isPrivacyPortalReq:L,pageID:f,style:S}),t[12]=L,t[13]=f,t[14]=S,t[15]=H):H=t[15],H}else if(!A&&F&&!w&&(M==null?void 0:M.igSSODisabled)!==!0){var Q;return t[16]!==n||t[17]!==f||t[18]!==g?(Q=p.jsx(U,{authType:n,pageID:f,pageType:g}),t[16]=n,t[17]=f,t[18]=g,t[19]=Q):Q=t[19],Q}else if(!A&&o("PolarisOneTapLogin").isOneTapLoginEligible()&&n===o("PolarisAuthActionConstants").AUTH.oneTapLogin){var X;return t[20]!==n?(X=p.jsx(G,{authType:n}),t[20]=n,t[21]=X):X=t[21],X}else if(o("PolarisUA").isMobile()&&n===o("PolarisAuthActionConstants").AUTH.none){var Y;return t[22]!==f?(Y=p.jsx(j,{pageID:f}),t[22]=f,t[23]=Y):Y=t[23],Y}r("warning")(n===o("PolarisAuthActionConstants").AUTH.login||n===o("PolarisAuthActionConstants").AUTH.oneTapLogin||n===o("PolarisAuthActionConstants").AUTH.multiStepSignup,'Expected authType to be "login or oneTapLogin"; got "%s"',n);var J;return t[24]!==a||t[25]!==i||t[26]!==l||t[27]!==s||t[28]!==u||t[29]!==c||t[30]!==d||t[31]!==L||t[32]!==f||t[33]!==S||t[34]!==R?(J=p.jsx(K,{dialogSource:a,forceLoginIgId:i,forceLoginProfilePicUrl:l,forceLoginUsername:s,fromLoggedOutDialog:u,hideForgotPassword:c,intentSource:d,isPrivacyPortalReq:L,pageID:f,style:S,usernameHint:R}),t[24]=a,t[25]=i,t[26]=l,t[27]=s,t[28]=u,t[29]=c,t[30]=d,t[31]=L,t[32]=f,t[33]=S,t[34]=R,t[35]=J):J=t[35],J}function B(e){return e}function W(e){var t=o("react-compiler-runtime").c(14),n=e.authType,a=e.fromLoggedOutDialog,i=e.intentSource,l=e.pageID,s=e.shouldAutoPickUsername,u=e.shouldEnableShortFirstStep,c=e.shouldShowBirthdayStepInBaseForm,d=e.shouldShowBirthdayTransparency,m=e.shouldShowRedesignedSignup,_=e.style,f=s===void 0?!1:s,g=u===void 0?!1:u,h=c===void 0?!1:c,y=m===void 0?!1:m,C=S(a,i,l),b=x(),v=R(n),L=r("usePolarisCentralizedUpsellState")(),E=L[0],k=E.isProfileOrPostPage;if(v){var I;return t[0]===Symbol.for("react.memo_cache_sentinel")?(I=p.jsx(r("PolarisLoggedOutContentWallDialogAuthCTAs.react"),{}),t[0]=I):I=t[0],I}var T;t[1]!==k||t[2]!==l||t[3]!==b||t[4]!==f||t[5]!==g||t[6]!==h||t[7]!==d||t[8]!==y||t[9]!==_?(T=p.jsx(r("PolarisSignupForm.react"),{hideHeader:k,pageIdentifier:l,requestInFlight:b,shouldAutoPickUsername:f,shouldEnableShortFirstStep:g,shouldShowBirthdayStepInBaseForm:h,shouldShowBirthdayTransparency:d,shouldShowRedesignedSignup:y,style:_}),t[1]=k,t[2]=l,t[3]=b,t[4]=f,t[5]=g,t[6]=h,t[7]=d,t[8]=y,t[9]=_,t[10]=T):T=t[10];var D;return t[11]!==C||t[12]!==T?(D=p.jsx("div",{ref:C,children:T}),t[11]=C,t[12]=T,t[13]=D):D=t[13],D}function q(e){var t=o("react-compiler-runtime").c(6),n=e.isPrivacyPortalReq,a=e.pageID,i=e.style,l=n===void 0?!1:n,s=T(),u=x(),c=s||"",d;return t[0]!==l||t[1]!==a||t[2]!==u||t[3]!==i||t[4]!==c?(d=p.jsx(r("PolarisTwoFactorForm.react"),{errorMessage:c,isPrivacyPortalReq:l,pageIdentifier:a,requestInFlight:u,style:i}),t[0]=l,t[1]=a,t[2]=u,t[3]=i,t[4]=c,t[5]=d):d=t[5],d}function U(e){var t=o("react-compiler-runtime").c(36),n=e.authType,a=e.pageID,i=e.pageType,l=o("PolarisReactRedux.react").useSelector(H),s=l.auth,u=l.fb,c=s.login,d=u.status,m=o("PolarisReactRedux.react").useDispatch(),_=k(),f=T(),g=P(),h=x(),y=L(n),C;if(t[0]!==(_==null?void 0:_.linkedIGProfiles)){var b;C=(b=_==null?void 0:_.linkedIGProfiles)!=null?b:[],t[0]=_==null?void 0:_.linkedIGProfiles,t[1]=C}else C=t[1];var v=C,S;t[2]!==m||t[3]!==a?(S=function(t){t!=null?(o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login_with_fb","auth_form",a),m(o("PolarisLoginActionLoginWithFBJSSDK").loginWithFBJSSDK({pageID:a,source:a},t))):(o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",a),o("PolarisFBConnectHelpers").redirectToFBOAuth("/",a).catch(V))},t[2]=m,t[3]=a,t[4]=S):S=t[4];var R=S,E;t[5]!==_?(E=!!_&&o("PolarisFBConnectHelpers").isFBCUnique(_.username),t[5]=_,t[6]=E):E=t[6];var I=E,D=v.length<=1,$=o("PolarisQueryParams").getShouldRefreshFBCookie();if(o("PolarisOneTapLogin").isOneTapLoginEligible()&&n!==o("PolarisAuthActionConstants").AUTH.fbAccountPicker&&(!$||D)){var N,M;if(t[7]!==I?(N=o("PolarisOneTapLoginStorage").getLoginNonces(),M=Object.values(N).length>=1||I,t[7]=I,t[8]=N,t[9]=M):(N=t[8],M=t[9]),M){var w=I&&D?_:null,A=I&&D?R:void 0,F=!y,O;return t[10]!==N||t[11]!==w||t[12]!==A||t[13]!==F?(O=p.jsx(r("PolarisOneTapLoginForm.react"),{fbConnectedUser:w,loginNonces:N,onRequestFBLogin:A,showSingleAccountProfilePicture:F}),t[10]=N,t[11]=w,t[12]=A,t[13]=F,t[14]=O):O=t[14],O}}else if(v.length>1&&I){var B;t[15]!==(c==null?void 0:c.deletionNonce)||t[16]!==m||t[17]!==a?(B=function(t){m(o("PolarisLoginActionLoginWithFBAccessToken").loginWithFBAccessToken({pageID:a,skipped:!1,source:"fbSignupPage"},t,c==null?void 0:c.deletionNonce))},t[15]=c==null?void 0:c.deletionNonce,t[16]=m,t[17]=a,t[18]=B):B=t[18];var W=B,q;return t[19]!==v||t[20]!==W?(q=p.jsx(r("PolarisFacebookAccountPicker.react"),{fbConnectedIgProfiles:v,onRequestFBLogin:W}),t[19]=v,t[20]=W,t[21]=q):q=t[21],q}var U;t[22]!==d||t[23]!==g?(U=function(t){o("PolarisLoginLogger").logLoginEvent({event_name:"fb_switch_accounts_click",fbconnect_status:d}),g(t)},t[22]=d,t[23]=g,t[24]=U):U=t[24];var G=U,z;t[25]!==_?(z=r("nullthrows")(_),t[25]=_,t[26]=z):z=t[26];var j=i!=null?i:void 0,K;return t[27]!==d||t[28]!==G||t[29]!==f||t[30]!==R||t[31]!==a||t[32]!==h||t[33]!==z||t[34]!==j?(K=p.jsx(r("PolarisFacebookLoginForm.react"),{accountInfo:z,errorMessage:f,fbConnectStatus:d,onRequestLogin:R,onSwitchAccountsClick:G,pageID:a,pageType:j,requestInFlight:h}),t[27]=d,t[28]=G,t[29]=f,t[30]=R,t[31]=a,t[32]=h,t[33]=z,t[34]=j,t[35]=K):K=t[35],K}function V(e){return r("FBLogger")("ig_web").catching(e).mustfix("unexpected")}function H(e){return e}function G(e){var t=o("react-compiler-runtime").c(3),n=e.authType,a=L(n),i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=o("PolarisOneTapLoginStorage").getLoginNonces(),t[0]=i):i=t[0];var l=!a,s;return t[1]!==l?(s=p.jsx(r("PolarisOneTapLoginForm.react"),{loginNonces:i,showSingleAccountProfilePicture:l}),t[1]=l,t[2]=s):s=t[2],s}function z(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(r("PolarisFBConnectV2LoginForm.react"),{}),e[0]=t):t=e[0],t}function j(e){var t=o("react-compiler-runtime").c(4),n=e.pageID,a;t[0]!==n?(a={onImpressionStart:function(){o("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("full_page",n)}},t[0]=n,t[1]=a):a=t[1];var i=r("useSinglePartialViewImpression")(a),l;return t[2]!==i?(l=p.jsx(r("PolarisLandingForm.react"),{ref:i}),t[2]=i,t[3]=l):l=t[3],l}function K(e){var t=o("react-compiler-runtime").c(47),n=e.dialogSource,a=e.forceLoginIgId,i=e.forceLoginProfilePicUrl,l=e.forceLoginUsername,s=e.fromLoggedOutDialog,u=e.hideForgotPassword,c=e.intentSource,d=e.isPrivacyPortalReq,m=e.pageID,_=e.style,f=e.usernameHint,y=d===void 0?!1:d,C=o("PolarisReactRedux.react").useSelector(Q),b=C.auth,v=C.fb,R=b.isFBLoggedIn,L=b.login,E=b.next,I=v.status,D=o("PolarisReactRedux.react").useDispatch(),$=P(),M=S(s,c,m),w=N(),A=k(),F=L&&L.source==="follow"?h:"",O=T(),B=x(),W=L&&L.wasPasswordJustReset?g:"",q;t[0]!==D||t[1]!==s||t[2]!==y||t[3]!==m?(q=function(t,n,r){D(o("PolarisLoginActionLogin").login(t,n,{source:m},r,!1,null,s,y))},t[0]=D,t[1]=s,t[2]=y,t[3]=m,t[4]=q):q=t[4];var U=q,V;t[5]!==D?(V=function(t){D(o("PolarisFBConnectActions").setShowSSODisabledModal(t))},t[5]=D,t[6]=V):V=t[6];var H=V,G;t[7]!==D||t[8]!==s||t[9]!==m?(G=function(t,n,r,a){D(o("PolarisLoginActionLogin").login(t,n,{source:m},r,!1,a,s))},t[7]=D,t[8]=s,t[9]=m,t[10]=G):G=t[10];var z=G,j;t[11]!==D?(j=function(){D(o("PolarisLoginActionClearStopDeletionNonce").clearStopDeletionNonce())},t[11]=D,t[12]=j):j=t[12];var K=j,X;t[13]!==(A==null?void 0:A.igSSODisabled)||t[14]!==(A==null?void 0:A.linkedIGProfiles)||t[15]!==(A==null?void 0:A.username)||t[16]!==H||t[17]!==$?(X=function(){var e,t=(e=A==null?void 0:A.linkedIGProfiles)!=null?e:[];(A==null?void 0:A.igSSODisabled)===!0?($(o("PolarisAuthActionConstants").AUTH.login),H(A==null?void 0:A.username)):t.length>1?$(o("PolarisAuthActionConstants").AUTH.fbAccountPicker):$(o("PolarisAuthActionConstants").AUTH.fbLogin)},t[13]=A==null?void 0:A.igSSODisabled,t[14]=A==null?void 0:A.linkedIGProfiles,t[15]=A==null?void 0:A.username,t[16]=H,t[17]=$,t[18]=X):X=t[18];var Y=X,J;t[19]===Symbol.for("react.memo_cache_sentinel")?(J={className:"xod5an3 x1dc814f xh8yej3"},t[19]=J):J=t[19];var Z=!!R,ee=(A==null?void 0:A.igSSODisabled)===!0,te=L==null?void 0:L.deletionDate,ne=L==null?void 0:L.deletionNonce,re=f!=null?f:void 0,oe;t[20]!==n||t[21]!==I||t[22]!==a||t[23]!==i||t[24]!==l||t[25]!==s||t[26]!==Y||t[27]!==u||t[28]!==F||t[29]!==w||t[30]!==O||t[31]!==E||t[32]!==K||t[33]!==U||t[34]!==z||t[35]!==B||t[36]!==_||t[37]!==W||t[38]!==Z||t[39]!==ee||t[40]!==te||t[41]!==ne||t[42]!==re?(oe=p.jsx(r("PolarisSlimLoginForm.react"),{dialogSource:n,errorMessage:O,fbConnectStatus:I,forceLoginIgId:a,forceLoginProfilePicUrl:i,forceLoginUsername:l,fromLoggedOutDialog:s,hideFBLogin:!r("polarisIsEligibleForFacebookLogin")(),hideForgotPassword:u,infoMessage:F,isFBLoggedIn:Z,isIGSSODisabled:ee,isThreadsRequest:w,nextUrl:E,onClearStopDeletionNonce:K,onLoginWithFBClick:Y,onStopAccountDeletion:z,onSubmit:U,requestInFlight:B,stopDeletionDate:te,stopDeletionNonce:ne,style:_,successMessage:W,usernameHint:re}),t[20]=n,t[21]=I,t[22]=a,t[23]=i,t[24]=l,t[25]=s,t[26]=Y,t[27]=u,t[28]=F,t[29]=w,t[30]=O,t[31]=E,t[32]=K,t[33]=U,t[34]=z,t[35]=B,t[36]=_,t[37]=W,t[38]=Z,t[39]=ee,t[40]=te,t[41]=ne,t[42]=re,t[43]=oe):oe=t[43];var ae;return t[44]!==M||t[45]!==oe?(ae=p.jsx("div",babelHelpers.extends({},J,{ref:M,children:oe})),t[44]=M,t[45]=oe,t[46]=ae):ae=t[46],ae}function Q(e){return e}function X(e){var t=o("react-compiler-runtime").c(9),n=e.authType,a=e.pageID,i=e.shouldShowRedesignedSignup,l=o("PolarisReactRedux.react").useSelector(Y),s=l.auth,u=s.signup,c=L(n),d=r("usePolarisCentralizedUpsellState")(),m=d[0],_=m.isProfileOrPostPage,f=m.lastViewedOwnerID,g;t[0]!==_||t[1]!==f?(g=function(t){var e;return _&&f!=null?(e=o("polarisUserSelectors").maybeGetUserById(t,f))!=null?e:{}:{}},t[0]=_,t[1]=f,t[2]=g):g=t[2];var h=o("PolarisReactRedux.react").useSelector(g),y=!c&&o("PolarisUA").isDesktop()&&n===o("PolarisAuthActionConstants").AUTH.signup?(u==null?void 0:u.step)===o("PolarisSignupTypes").STEP.base:!0;if(c&&(h==null?void 0:h.username)!=null){var C;return t[3]!==a||t[4]!==h?(C=p.jsx(ee,{pageID:a,user:h}),t[3]=a,t[4]=h,t[5]=C):C=t[5],C}else if(y){var b;return t[6]!==n||t[7]!==i?(b=p.jsx(J,{authType:n,shouldShowRedesignedSignup:i}),t[6]=n,t[7]=i,t[8]=b):b=t[8],b}return null}function Y(e){return e}function J(e){var t=o("react-compiler-runtime").c(8),n=e.authType,a=e.shouldShowRedesignedSignup,i=N(),l=n===o("PolarisAuthActionConstants").AUTH.fbConnectV2?2:3,u=n===o("PolarisAuthActionConstants").AUTH.fbConnectV2||a===!0?2:9,d;t[0]!==n||t[1]!==i||t[2]!==a?(d=i?p.jsx(r("PolarisBarcelonaAppSVGIcon.react"),{fill:"var(--barcelona-logo)",size:34}):n===o("PolarisAuthActionConstants").AUTH.twoFactor?p.jsx(r("IGCoreImage.react"),{alt:y,src:{light:c("222729")}}):a===!0?p.jsx(r("IGDSIgLogoFilledIcon.react"),{alt:s._(/*BTDS*/"Instagram"),size:50}):p.jsx(r("IGCoreImage.react"),{alt:s._(/*BTDS*/"Instagram"),src:{dark:c("222731"),light:c("222730")}}),t[0]=n,t[1]=i,t[2]=a,t[3]=d):d=t[3];var m;return t[4]!==l||t[5]!==u||t[6]!==d?(m=p.jsx(r("IGDSBox.react"),{marginBottom:l,marginTop:u,position:"relative",children:d}),t[4]=l,t[5]=u,t[6]=d,t[7]=m):m=t[7],m}var Z={container:{borderTopColor:"x1yhmmig",borderInlineEndColor:"xpcrz0c",borderBottomColor:"xyb01ml",borderInlineStartColor:"x1vpptxl",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xmn4e3e",borderInlineEndWidth:"x1if355w",borderBottomWidth:"x2x41l1",borderInlineStartWidth:"xct1zlm",position:"x1n2onr6",$$css:!0}};function ee(e){var t,n,a,i,l=o("react-compiler-runtime").c(15),s=e.pageID,u=e.user,c=u.fullName,d=u.profilePictureUrl,m=u.username,_=r("nullthrows")(m),f=o("PolarisReactRedux.react").useSelector(te),g=f.sharerInformation,h=o("PolarisSenderNameHelpers").shouldShowSenderName(s),y=g!=null&&h?o("PolarisLoggedOutUpsellStrings").seePhotosFromFullNameBodyText((t=g.fullName)!=null?t:g.username):o("PolarisLoggedOutUpsellStrings").seePhotosFromFullNameBodyText(c!=null?c:_),C=g!=null&&h?o("PolarisLoggedOutUpsellStrings").joinSharerHeaderText((n=g.fullName)!=null?n:g.username):o("PolarisLoggedOutUpsellStrings").getSeeMoreFrom(_),b=g!=null&&h&&(a=g.profilePicUrl)!=null?a:d,v;l[0]!==y||l[1]!==C||l[2]!==b?(v={body:y,header:C,sharerProfilePictureUrl:b},l[0]=y,l[1]=C,l[2]=b,l[3]=v):v=l[3];var S=v,R=S.body,L=S.header,E=S.sharerProfilePictureUrl,k=E!=null?E:d,I=(i=g==null?void 0:g.username)!=null?i:_,T;l[4]!==k||l[5]!==I?(T=p.jsx(r("IGDSBox.react"),{height:104,justifyContent:"center",marginBottom:4,marginTop:8,shape:"circle",width:104,xstyle:Z.container,children:p.jsx(r("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:k,size:96,username:I})}),l[4]=k,l[5]=I,l[6]=T):T=l[6];var D;l[7]!==L?(D=p.jsx(r("IGDSBox.react"),{marginBottom:5,width:"100%",children:p.jsx(r("IGDSText.react"),{color:"primaryText",size:"title",textAlign:"center",weight:"semibold",children:L})}),l[7]=L,l[8]=D):D=l[8];var x;l[9]!==R?(x=p.jsx(r("IGDSBox.react"),{paddingX:10,children:p.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:R})}),l[9]=R,l[10]=x):x=l[10];var $;return l[11]!==T||l[12]!==D||l[13]!==x?($=p.jsxs(r("IGDSBox.react"),{alignItems:"center",marginBottom:4,children:[T,D,x]}),l[11]=T,l[12]=D,l[13]=x,l[14]=$):$=l[14],$}function te(e){return e.upsell}function ne(e){var t,n=o("react-compiler-runtime").c(3),a=e.pageID,i=e.showNetzDGReportLink;if(i!==!0||!o("PolarisConfig").isLoggedOutFRXEligible())return null;var l=(t=o("InstagramQueryParamsHelper").getQueryParams(window.location.search))==null?void 0:t.next,s=l!=null?""+window.location.origin+l:a==="StoriesPage"?window.location.href:null,u;n[0]===Symbol.for("react.memo_cache_sentinel")?(u=o("PolarisUA").isMobile()&&p.jsx(r("IGDSBox.react"),{marginBottom:6,position:"relative",children:p.jsx(r("IGDSDivider.react"),{})}),n[0]=u):u=n[0];var c;return n[1]!==s?(c=p.jsxs(r("IGDSBox.react"),{marginEnd:o("PolarisUA").isMobile()?1:0,marginStart:o("PolarisUA").isMobile()?1:0,paddingX:o("PolarisUA").isMobile()?12:8,paddingY:o("PolarisUA").isMobile()?8:4,position:"relative",children:[u,p.jsx(r("PolarisLoggedOutNetzDGReportLink.react"),{reportedUrlOrContentId:s,textSize:"footnote"})]}),n[1]=s,n[2]=c):c=n[2],c}function re(){var e=o("react-compiler-runtime").c(3),t=o("CometRouteParams").useCometRefinedRouteParams(o("XPolarisLoginControllerParamsRefineValidator").refineXPolarisLoginControllerParams),n=t==null?void 0:t.logged_out_reporting_url;if(n==null)return null;var a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=o("PolarisUA").isMobile()&&p.jsx(r("IGDSBox.react"),{marginBottom:6,position:"relative",width:"100%",children:p.jsx(r("IGDSDivider.react"),{})}),e[0]=a):a=e[0];var i;return e[1]!==n?(i=p.jsxs(r("IGDSBox.react"),{marginEnd:o("PolarisUA").isMobile()?1:0,marginStart:o("PolarisUA").isMobile()?1:0,paddingX:o("PolarisUA").isMobile()?12:8,paddingY:o("PolarisUA").isMobile()?8:4,position:"relative",children:[a,p.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",textAlign:"center",children:p.jsx(r("PolarisExternalLink.react"),{href:n,children:f})})]}),e[1]=n,e[2]=i):i=e[2],i}var oe={oneTap:{color:"x1roi4f4",$$css:!0},root:{color:"x5n08af",fontSize:"x1f6kntn",marginTop:"xcxhlts",marginInlineEnd:"xjx09e3",marginBottom:"x1fqp7bg",marginInlineStart:"xx6jrq6",textAlign:"x2b8uid",$$css:!0}};function ae(t){var n,a=o("react-compiler-runtime").c(20),i=t.authType,l=t.forceLoginIgId,s=t.fromLoggedOutDialog,u=t.hideAppUpsells,c=t.hideBorder,d=t.loggedInFBUser,m=t.pageId,_=t.pageType,f=t.style,g=o("PolarisReactRedux.react").useSelector(le),h=g.auth,y=g.navigation,C=h.isFBLoggedIn,b=y.isAccountSwitcherOpen,v=N(),S=R(i),L=k(),E=l!=null,I=(n=L==null?void 0:L.linkedIGProfiles)!=null?n:[],T=(i===o("PolarisAuthActionConstants").AUTH.fbLogin||i===o("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&C===!0&&!!L,D=function(){var e=I.length>1,t=!E&&T&&e;return!v&&o("PolarisUA").isDesktop()&&!o("PolarisQueryParams").hasForceAuthenticationParam()&&(!(i===o("PolarisAuthActionConstants").AUTH.fbLogin&&!o("PolarisOneTapLogin").isOneTapLoginEligible())||t)&&!S};if(!D()||b)return null;var x=ie,$=!(u==null||u)&&!o("PolarisStrategicWebTraffic").isStrategicTraffic(),P;a[0]!==i||a[1]!==c||a[2]!==f?(P={0:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf"},4:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x7r02ix"},2:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},6:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x7r02ix x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},1:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},5:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},3:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},7:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"}}[(f==="modal")<<2|(c===!0)<<1|(i===o("PolarisAuthActionConstants").AUTH.fbConnectV2&&f!=="modal")<<0],a[0]=i,a[1]=c,a[2]=f,a[3]=P):P=a[3];var M=i===o("PolarisAuthActionConstants").AUTH.oneTapLogin&&oe.oneTap,w;a[4]!==M?(w=(e||(e=r("stylex")))(oe.root,M),a[4]=M,a[5]=w):w=a[5];var A=_!=null?_:void 0,F;a[6]!==s||a[7]!==d||a[8]!==w||a[9]!==A?(F=p.jsx(r("PolarisAuthTypeSwitcher.react"),{className:w,fromLoggedOutDialog:s,loggedInFBUser:d,onNavigate:x,pageType:A,primary:!0}),a[6]=s,a[7]=d,a[8]=w,a[9]=A,a[10]=F):F=a[10];var O;a[11]!==P||a[12]!==F?(O=p.jsx("div",babelHelpers.extends({},P,{children:F})),a[11]=P,a[12]=F,a[13]=O):O=a[13];var B;a[14]!==$||a[15]!==m?(B=$?p.jsx(r("PolarisAppsellUnit.react"),{appInstallCampaign:m,ctaTypeV2:"auth_form"}):null,a[14]=$,a[15]=m,a[16]=B):B=a[16];var W;return a[17]!==O||a[18]!==B?(W=p.jsxs(p.Fragment,{children:[O,B]}),a[17]=O,a[18]=B,a[19]=W):W=a[19],W}function ie(e){r("PolarisLoginQPL").isActive()&&e==="signup"&&r("PolarisLoginQPL").endCancelNavigateToSignup()}function le(e){return e}l.default=b}),226);/*FB_PKG_DELIM*/
__d("EBEnableUnifiedAttachment",[],(function(t,n,r,o,a,i){"use strict";var e=!1;function l(t){e=t}function s(){return e}i.setEbEnableUnifiedAttachment=l,i.getEbEnableUnifiedAttachment=s}),66);
__d("EBLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("wmi_eb",t)};l.EBLogger=e}),98);
__d("EBMinosCheckWasmFeatureSupport",["asyncToGeneratorRuntime","qex","wasm-feature-detect"],(function(t,n,r,o,a,i,l){"use strict";function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("wasm-feature-detect").bulkMemory(),t=yield o("wasm-feature-detect").bigInt(),n=yield o("wasm-feature-detect").referenceTypes();return e&&t&&n}),s.apply(this,arguments)}function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield e();if(!t)return!1;var n=r("qex")._("208")===!0;return n}),c.apply(this,arguments)}l.checkWasmFeatureSupport=e,l.checkWasFeatureSupportAndQE=u}),98);
__d("MWEBUseLocalStorage",["WALogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=t,i=n!=null?n:"true";if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var l;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Encrypted Backups key "," written to local storage"])),a),(l=(s||(s=r("WebStorage"))).getLocalStorage())==null||l.setItem(a,i)}}function c(e){var t=e;if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var n;(n=(s||(s=r("WebStorage"))).getLocalStorage())==null||n.removeItem(t)}}function d(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return(t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n)}return null}function m(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return((t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n))!=null}return!0}l.mwEBCreateLocalStorageEntry=u,l.mwEBDeleteLocalStorageEntry=c,l.mwEBGetLocalStorageEntryValue=d,l.mwEBGetIsLocalStorageEntryValuePresent=m}),98);
__d("EBReenrollmentTriggerHandler",["EBLogger","LSIntEnum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("EBLogger").EBLogger().tags(["DefaultEBReenrollmentTriggerHandler"]),u=(function(){function t(){}var n=t.prototype;return n.handle=function(n){s.debug("Running default reenrollment trigger handler for reason: "+(e||(e=o("LSIntEnum"))).toNumber(n.deviceReenrollmentReason));for(var t of r("MWEncryptedBackupsLocalStorageEntryEnum").members())s.debug("Clearing local storage key: "+t),t!==r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE&&o("MWEBUseLocalStorage").mwEBDeleteLocalStorageEntry(t)},t})();l.DefaultEBReenrollmentTriggerHandler=u}),98);
__d("MWEBODSCategory",[],(function(t,n,r,o,a,i){"use strict";var e=7319;i.default=e}),66);
__d("MWEBODSEntityName.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({MW_EB_PIN_RESTORE_AUTH:"mw_eb_pin_restore_auth",MW_EB_RC_RESTORE_AUTH:"mw_eb_rc_restore_auth",MW_EB_AUTO_RESTORE_AUTH:"mw_eb_auto_restore_auth",MW_EB_OTC_AUTH:"mw_eb_otc_auth",MW_EB_ONBOARDING_AUTH:"mw_eb_onboarding_auth",MW_EBSM_HYDRATION:"mw_ebsm_hydration",MW_EBSM_IDB:"mw_eb_ebsm_idb",MW_EBSM_CORRUPTION:"mw_ebsm_corruption",MW_EBSM_CORRUPTION_RELOAD:"mw_ebsm_corruption_reload",MW_EBSM_RESTORE_PERSISTENCE_ERROR:"mw_ebsm_restore_persistence",MW_EBSM_IDB_TABLE_DELETION:"mw_ebsm_idb_table_deletion",MW_EBSM_WORKER_SUFFIX:"_worker",MW_EBSM_COUNTERS:"mw_ebsm_counters",MW_EBSM_FETCH_BACKUP_IDS:"mw_ebsm_fetch_backup_ids",MW_EB_SWITCH_CONSISTENCY:"mw_eb_switch_consistency",MAW_EB_UPLOAD_TRACKING:"maw_eb_upload_tracking",MAW_EB_UPLOAD_COUNTER:"maw_eb_upload_counter",MAW_EB_RESTORE_COUNTER:"maw_eb_restore_counter",EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST:"eb_symmetric_encryption_js_rust_shadow_test",MAW_EB_FRONTEND_QPL_IN_WORKER:"maw_eb_frontend_qpl_in_worker",MW_EB_RETROACTIVE_BACKUP:"mw_eb_retroactive_backup"}),l=e;i.default=l}),66);
__d("EBReenrollmentTriggerListener",["EBReenrollmentTriggerHandler","LSIntEnum","MWEBODSCategory","MWEBODSEntityName.enum","ODS","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){this.$1=new Map,this.$4=new(o("EBReenrollmentTriggerHandler")).DefaultEBReenrollmentTriggerHandler,this.$2=e,this.$5()}var n=t.prototype;return n.$5=function(){var t=this;return this.$3==null&&(this.$3=o("ReQL").fromTableAscending(this.$2.tables.encrypted_backups_reenrollment_trigger).take(1).subscribe(function(n,a){if(a.operation==="add"||a.operation==="put"){(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_COUNTERS,"reenrollment_trigger");var l=t.getDefaultHandler();if(a.value.deviceReenrollmentReason!=null){var u;l=(u=t.$1.get((s||(s=o("LSIntEnum"))).unwrapIntEnum(a.value.deviceReenrollmentReason)))!=null?u:l}l.handle(a.value),r("promiseDone")(t.$2.runInTransaction(function(e){return e.encrypted_backups_reenrollment_trigger.delete(a.value.pk)},"readwrite",void 0,void 0,i.id+":77"))}})),this.$3},n.attachHandler=function(t,n){this.$1.set(t,n)},n.getDefaultHandler=function(){return this.$4},t})(),c;function d(e){return c!=null||(c=new u(e)),c}function m(e){return c==null&&d(e),c}l.initEBReenrollmentTriggerListener=d,l.getEBReenrollmentTriggerListener_TESTING_ONLY=m}),98);
__d("EBUnifyLegacyMediaUpload",[],(function(t,n,r,o,a,i){"use strict";var e=!1;function l(t){e=t}function s(){return e}i.setEnableUnifyLegacyMediaUpload=l,i.getEnableUnifyLegacyMediaUpload=s}),66);
__d("EphemeralMediaViewMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});i.default=e}),66);
__d("LSDataTraceTag",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=4,d=5,m=6,p=7,_=20,f=21,g=22,h=23,y=24,C=25,b=26,v=27,S=28,R=29,L=30,E=31,k=32,I=33,T=34,D=35,x=36,$=37,P=38,N=39,M=40,w=41,A=42;i.none=e,i.sticker=l,i.image=s,i.animatedImage=u,i.video=c,i.audio=d,i.file=m,i.xma=p,i.messageTypeNone=_,i.messageTypeText=f,i.messageTypeFutureproof=g,i.messageTypeCiphertext=h,i.messageTypeUnavailable=y,i.messageTypeImage=C,i.messageTypeVideo=b,i.messageTypePtt=v,i.messageTypeAdmin=S,i.messageTypeRevoked=R,i.messageTypeGif=L,i.messageTypeSticker=E,i.messageTypeExpiredEphemeral=k,i.messageTypeEphemeralSettingAdmin=I,i.messageTypeEphemeralSyncResponse=T,i.messageTypeEphemeralScreenshotAction=D,i.messageTypeDeleteForMe=x,i.messageTypeEphemeralSettingChangeFromCurrentDevice=$,i.messageTypeAlertICDC=P,i.messageTypeGroupInvite=N,i.messageTypeXMA=M,i.messageTypeReaction=w,i.messageTypeSenderKeyDistribution=A}),66);
__d("LSMEBTaskCreationSource",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,MEM_RECEIVE_PROTOBUF_ONLY_FBN:16,MEM_SEND_PROTOBUF_ONLY_FBN:17,MEM_PEER_SYNC_PROTOBUF_ONLY_FBN:18,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,MESSENGER_MESSAGE_LIST_PAGINATION:45,DELTA_GENERIC_MESSAGE_SYNC:55,MEDIA_GALLERY_RESTORE:57,EB_PROTOBUF_RESTORE_NO_OP:58,NEW_MEMBER_EXPORT:59,THREAD_POINT_QUERY:76,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,IGD_DYI:42,FTS_INDEX_EB_MESSAGES_WEB:43,BULK_QUERY_FOR_SEARCH_RESULT:44,MSGR_DYI:46,EB_RESTORE_ON_REGISTRATION:47,EB_RESTORE_ON_OFFLINE_QUEUE_COUNT_LIMIT:48,EB_POINT_QUERY_RESTORE_ON_ACK_DROP:49,EB_POINT_QUERY_RESTORE_ON_DECRYPTION_FAILURE:50,EB_POINT_QUERY_RESTORE_ON_UNAVAILABLE_DEVICE:51,EB_RANGE_QUERY_RESTORE_ON_THREAD_SESSION_ACTIVATE:52,EB_POINT_QUERY_PINNED_MESSAGES:53,EB_POINT_QUERY_RESTORE_PROTOBUF:54,EB_POINT_QUERY_IN_ACT_REACTIONS:56,EB_POINT_QUERY_BUMP_MESSAGES:60,EB_POINT_QUERY_IN_ACT_FOR_INCOMING_RETRY_RECEIPT:61,EB_POINT_QUERY_IN_ACT_FOR_REPORTING:62,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_STATUS_UPDATE:63,EB_POINT_QUERY_IN_ACT_FOR_REPL_TEST:64,EB_POINT_QUERY_IN_ACT_FOR_FACEBOOK_APP_NSE_NOTIFICATION_RENDERING:65,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_EXPORT_HANDLING:66,EB_POINT_QUERY_IN_ACT_FOR_TAM_ACT_PROXY:67,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_MESSAGE:68,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_AI_BOT_MESSAGE:69,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_PERSISTENCE:70,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_INDEXING:71,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_NEW_MEMBER_HYDRATION:72,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_ECHO_TO_PROTO_CONVERSION:73,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_HISTORICAL_FUTURE_PROOF:74,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_REALTIME_BLOCKED:75,EB_POINT_QUERY_TO_FETCH_SENDER_DEVICE_KEYS:77,RESONANCE_UTILS:80,MPS_RESTORE_REVERB_RESTORE:81,REPORTING:82,CLIENT_MESSAGE_TRUNCATION:83,CALLING_XMA:84,EB_ACT_ATTACHMENT_RESTORE:85,EB_MEB_ATTACHMENT_ACCESS_CONTROL_RESTORE:86,FORCE_CLIENT_MESSAGE_TRUNCATION:87,ACT_EDIT_MESSAGE_VALIDATION:88,ACT_REVOKE_MESSAGE_VALIDATION:89,REVERB_CLEANUP_HANDLER_SINGLE_MESSAGE_POINT_QUERY:90,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_BEFORE_QUERY:91,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_AFTER_QUERY:92,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_SURROUNDING_QUERY:93,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_LOCAL_BACKUP_RESTORE:94,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_ENCRYPTED_BACKUP_RESTORE:95,FILE_GALLERY_RESTORE:96});i.default=e}),66);
__d("LSThreadMediaGalleryGroup",[],(function(t,n,r,o,a,i){var e=Object.freeze({PHOTOS_AND_VIDEOS:0,FILES_ONLY:1,LINKS:2});i.default=e}),66);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function u(e){return e>0}function c(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(0);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(1);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(2);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(5);default:return(e||(e=o("LSIntEnum"))).ofNumber(4)}}function d(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NONE);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SENDING_TO_SERVER);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SERVER_RECEIVED);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").RETRIABLE_ERROR);default:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}l.ACK=s,l.isMsgAuthoritative=u,l.levelToMessagingSendStatusV2=c,l.levelToMessagingSendStatus=d}),98);
__d("MAWAdminAddParticipantMsg",["MAWLocalizationType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS}}}function u(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS}}}function c(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER};case 2:return{adminMsgContent:[t,n,r],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER}}return{adminMsgContent:[t,n,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER}}function d(e,t){switch(e){case 1:return{adminMsgContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU};case 2:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER}}return{adminMsgContent:[(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER}}function m(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER}}return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER}}function p(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r=t[0],a=t[1],i=o("WAJids").userIdFromJid(r),l=a!=null?o("WAJids").userIdFromJid(a):"";if(e==null)return t.includes(n)?d(t.length,r===n?l:i):m(t.length,i,l);if(e===n)return u(t.length,i,l);var p=o("WAJids").userIdFromJid(e);return t.includes(n)?s(t.length,p,r===n?l:i):c(t.length,p,i,l)}function _(t,n){return babelHelpers.extends({},p(t,n),{version:e})}l.createAddParticipantsAdminMessage=_}),98);
__d("WAAckLevel",[],(function(t,n,r,o,a,i){"use strict";var e={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};i.ACK=e}),66);
__d("MAWAdminMsgHelpers",["MAWCreateParticipantAdminMsg","MAWExternalId","MAWRemoveParticipantAdminMsg","WAAckLevel","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e="Facebook User",s=1;function u(t){return t==null||t===""?e:t}function c(t){return t!=null?o("WAJids").userIdFromJid(t):e}function d(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWCreateParticipantAdminMsg").createParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function m(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWRemoveParticipantAdminMsg").removeParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function p(e,t){return babelHelpers.extends({},_(e,t),{version:s})}function _(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n={adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserPromotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotPromoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotPromoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantPromotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:"participantPromotedParticipant"}}return n}function f(e,t,n,r){var a=_(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function g(e,t){return babelHelpers.extends({},h(e,t),{version:s})}function h(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n=e===r?{adminMsgContent:[],adminType:"currentUserSelfDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserDemotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotDemoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantDemotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:a===e?"participantSelfDemoted":"participantDemotedParticipant"}}return n}function y(e,t,n,r){var a=h(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function C(e,t,n,r){var a,i=[],l=t.subject.content;if(l!=null)return t.subject.user===o("WAGlobals").getMyUserJid()?(a="currentUserNamedGroup",i.push(l)):n==null?(a="unkonwnUserNamedGroup",i.push(l)):(a="participantNamedGroup",i.push(n,l)),{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:i,adminType:a},serverTs:r,ts:r,type:"Admin"}}function b(e,t){var n=v(e,t);if(n!=null)return babelHelpers.extends({},n,{version:s})}function v(e,t){var n,r=[];if(e===o("WAGlobals").getMyUserJid())switch(t){case"all_member_add":n="currentUserSetAddModeAllMembers";break;case"admin_add":n="currentUserSetAddModeAdminOnly";break}else if(e!=null)switch(r.push(o("WAJids").userIdFromJid(e)),t){case"all_member_add":n="participantSetAddModeAllMembers";break;case"admin_add":n="participantSetAddModeAdminOnly";break}else switch(t){case"all_member_add":n="serverSetAddModeAllMembers";break;case"admin_add":n="serverSetAddModeAdminOnly";break}if(n!=null)return{adminMsgContent:r,adminType:n}}function S(e,t,n,r){var a=v(n,t);if(a!=null)return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}l.UNKNOWN_USER=e,l.maybeUnknownParticipantName=u,l.createAdminMsgContactId=c,l.createParticipantAddAdminMessage=d,l.createParticipantRemoveAdminMsg=m,l.createParticipantPromoteAdminMessage=p,l.createParticipantPromoteAdminMsg=f,l.createParticipantDemoteAdminMessage=g,l.createParticipantDemoteAdminMsg=y,l.createGroupNameChangeAdminMsg=C,l.createMemberAddModeChangeAdminMessage=b,l.createMemberAddModeChangeAdminMsg=S}),98);
__d("MAWCreateParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantAddedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantAddedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantAddedYouAndMoreThanOneUsers"}}}function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"currentUserAddedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserAddedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserAddedMoreThanTwoParticipant"}}}function u(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:"participantAddedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantAddedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantAddedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c)):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(d),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c))}l.createParticipantAdminMessage=c}),98);
__d("MAWRemoveParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantRemovedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantRemovedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantRemovedYouAndMoreThanOneUsers"}}}function s(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:"currentUserLeftGroup"}:{adminMsgContent:[t],adminType:"currentUserRemovedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserRemovedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserRemovedMoreThanTwoParticipant"}}}function u(e,t,n,r,o){switch(e){case 1:return o?{adminMsgContent:[t],adminType:"participantLeftGroup"}:{adminMsgContent:[t,n],adminType:"participantRemovedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantRemovedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantRemovedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===o("WAGlobals").getMyUserJid()):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===t)}l.removeParticipantAdminMessage=c}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return{contactIds:t,contents:[]};case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:{var n=t[0],r=t[1];return{contactIds:[n],contents:[r]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:{var a=t[0],i=t[1],l=t[2];return{contactIds:[a,i],contents:[l]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:{var s=t[0],u=t[1],c=t[2];return{contactIds:[s],contents:[u,c]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:{var d=t[0],m=t[1],p=t[2];return{contactIds:[d],contents:[m]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:{var _=t[0],f=t[1],g=t[2],h=t[3];return{contactIds:[_],contents:[f,g]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:t}}}l.deconstructContactIdsFromAdminContent=e}),98);
__d("MAWAdminMsgTypesGrouped",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e=o("MAWLocalizationType")).LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE],u=[e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN],c=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE],d=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS],m=[e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER],p=[e.LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS],_=[e.LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP],f=[e.LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME],g=[e.LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME,e.LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME],h=[e.LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE],y=[e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED],C=[e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED,e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT],b=[e.LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK],v=[e.LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK,e.LOCALIZATION_TYPE.RTC_XMA_FALLBACK],S=[e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE],R=[e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE],L=[e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET],E=[e.LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE],k=[e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL],I=[e.LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED],T=[e.LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_POST,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG,e.LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE],D=[e.LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP,e.LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_POST,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT],x=[e.LOCALIZATION_TYPE.EMPTY_SNIPPET];l.cutoverAdminMsgs=s,l.dualThreadCutoverAdminMsgs=u,l.deviceChanges=c,l.currentUserAddRemoveParticipant=d,l.otherUserAddRemoveParticipant=m,l.groupPermissionsChanged=p,l.participantLeftGroup=_,l.chatCustomizedByCurrentUser=f,l.chatCustomizedByOtherUser=g,l.pinnedMessageUpdate=h,l.limitSharingUpdate=y,l.twoUsersConnected=C,l.fallbackMsgFromCurrentUser=b,l.fallbackMsgFromOtherUser=v,l.currentUserBumpsMessage=S,l.otherUserBumpsMessage=R,l.ephemeralSettingChanges=L,l.icdcAlerts=E,l.callActionToNotifyAbout=k,l.callActionNotToNotifyAbout=I,l.otherNonAdminMsgToBeBumped=T,l.otherNonAdminMsgToBeMarkedAsUnread=D,l.otherNonAdminMsgToNotTriggerUpdate=x}),98);
__d("MAWAdminRemoveParticipantMsg",["MAWAdminMsgType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU};case 2:return{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS}}}function u(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LEFT_GROUP}:{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS}}}function c(e,t,n,r,a){switch(e){case 1:return a?{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LEFT_GROUP}:{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_ONE_USER};case 2:return{adminMsgContent:[t,n,r],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_TWO_USER}}return{adminMsgContent:[t,n,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER}}function d(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r=t[0],a=t[1],i=o("WAJids").userIdFromJid(r),l=a!=null?o("WAJids").userIdFromJid(a):"";if(e==null)return t.includes(n)?{adminMsgContent:[],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_REMOVED_YOU}:{adminMsgContent:[i],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_REMOVED_ONE_USER};if(e===n)return u(t.length,i,l,r===n);var d=o("WAJids").userIdFromJid(e);return t.includes(n)?s(t.length,d,r===n?l:i):c(t.length,d,i,l,r===e)}function m(t,n){return babelHelpers.extends({},d(t,n),{version:e})}l.createRemoveParticipantsAdminMessage=m}),98);
__d("MAWAdminWriteGroupNameChangeAdminMsgContent",["MAWAdminMsgType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r,a=[];return e===n?(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_NAMED_GROUP,a.push(t)):e==null?(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_NAMED_GROUP,a.push(t)):(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_NAMED_GROUP,a.push(o("WAJids").userIdFromJid(e),t)),{adminMsgContent:a,adminType:r,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWAudioUtils",["FBLogger","Promise","WAMaybeTranscodeOggOpusToWavForPlayback","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=r("gkx")("3053")?URL.createObjectURL(yield o("WAMaybeTranscodeOggOpusToWavForPlayback").maybeTranscodeOggOpusToWavForPlayback(t)):URL.createObjectURL(t);return new(e||(e=n("Promise")))(function(e,t){var n=new Audio;n.setAttribute("crossOrigin","anonymous"),n.addEventListener("loadedmetadata",function(n){var r=n.currentTarget;if(r instanceof HTMLAudioElement){var o=r.duration;e(Math.ceil(o))}else t("EventTarget returned for event should be HTMLAudioElement")}),n.src=a,n.onabort=function(){t(r("FBLogger")("messenger_web").mustfixThrow("Error loading audio from provided URL"))},n.onerror=function(){var e,o;t(r("FBLogger")("messenger_web").mustfixThrow("getAudioDurationInSeconds: audioElement error code: %s. message: %s",(e=n.error)==null?void 0:e.code,(o=n.error)==null?void 0:o.message))}})}),u.apply(this,arguments)}function c(e){return Array.from(new Uint8Array(e)).join(",")}l.getAudioDurationInSeconds=s,l.serializeWaveform=c}),98);
__d("MsgrWebGating",["MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15418")||o("MAWMpsGating").isMpsMessageRendering()}l.isQuotedMessagesInLsEnabled=e}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a=e.author,i=e.msgId,l=o("WAJids").authorToUserId(a,t),s=(n=e.quote)==null||(n=n.content.msgContent)==null?void 0:n.content,u=(r=e.quote)==null?void 0:r.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:u!=null?u*1e3:void 0,replyMessageText:s,replySourceId:i,replyToUserId:l}}l.default=e}),98);
__d("MAWBridgeMsg",["FBLogger","LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","MsgrWebGating","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){if(e.isForwarded===!0&&e.type!==o("MAWMsgType").MSG_TYPE.STICKER)return{replyType:"FORWARD"};if(o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))return{replyToMsgId:e.msgId,replyToUserId:o("WAJids").authorToUserId(e.author,t),replyType:"HIGHLIGHTS_TAB_POST_REPLY",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null};if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var r=e.threadJid,a=o("WAJids").interpretAsUserJid(r),i;return a!=null&&(i=o("WAJids").userIdFromJid(a)),o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)?{mentionedUserId:i!=null?i:t,replyType:"FB_POST_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}:{mentionedUserId:i!=null?i:t,replyType:"FB_STORY_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}}if(!(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))){var l=(n=e.quote)==null?void 0:n.content;if(l!=null){var s=l.author,u=l.expirationTs,c=l.mediaId,d=l.msgContent,m=l.msgId,p=l.plaintextHash,_=l.sourceId,f=l.ts,g=l.type,h=l.xmaMessageType,y=o("WAJids").authorToUserId(s,t);if(g===o("WAMsgType").NOTE_REPLY)return{noteContent:d==null?void 0:d.content,replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(u*1e3):void 0,replyToMsgId:e.msgId,replyToUserId:y,replyType:"LIGHTWEIGHT_STATUS"};if(g===o("MAWMsgType").MSG_TYPE.XMA&&o("MAWXMAUtils").isXMAStoryReply(h)){if(_==null)return;var C=o("MAWXMAUtils").isXMAStoryProducerReply(h);return C?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:c!=null?c:void 0,storyMediaPlaintextHash:p,storyMsgType:c!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}:{replyType:"STORY",storyMediaPlaintextHash:p,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}}if(m!=null)return{isBumpMsg:e.type===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,replyToMsgId:m,replyType:"MESSAGE"}}}}}function c(e,t,n){var a,i,l,s=((a=e.quote)==null?void 0:a.content.type)===o("WAMsgType").NOTE_REPLY;if(s)return r("getReplyContentForNoteReply")(e,n);var u=(i=e.quote)==null?void 0:i.content;if(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var c,d=e.author,m=e.mediaId,p=e.msgId,_=o("WAJids").authorToUserId(d,n);if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var f=e.threadJid,g;f!=null&&(g=o("WAJids").interpretAsUserJid(f)),g!=null&&(_=o("WAJids").userIdFromJid(g))}return m!=null&&e.plaintextHash==null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content"),{isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(e.xmaMessageType),isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(e.xmaMessageType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(e.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType),replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:m,replyPlaintextHash:(c=e.plaintextHash)!=null?c:void 0,replySenderIsMe:d===o("WAJids").AUTHOR_ME||_===n,replySourceId:p,replySourceTimestampMs:e.sortOrderMs,replyStatusType:m!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:_}}if(!(u==null||(u==null?void 0:u.msgId)==null&&(u==null?void 0:u.sourceId)==null)){var h=u||{},y=h.author,C=h.mediaId,b=h.msgId,v=h.plaintextHash,S=h.sourceId,R=h.specialTextSize,L=h.ts,E=h.type,k=h.xmaMessageType,I=L!=null?L*1e3:void 0,T=u.type===o("MAWMsgType").MSG_TYPE.TEXT||o("MAWXMAUtils").isXMAExternalLinkShare(k)?(l=u.msgContent)==null?void 0:l.content:void 0,D=o("WAJids").authorToUserId(y,n),x=u.type===o("MAWMsgType").MSG_TYPE.TEXT?u.msgContent.mentionedJids:void 0,$=y===o("WAJids").AUTHOR_ME||D===n,P=t||{},N=P.replyMediaId,M=P.replyMediaPreviewHeight,w=P.replyMediaPreviewWidth,A=P.replyMediaUrlFallback,F=P.replyPlaintextHash,O=P.replyXMAId;if(o("MAWXMAUtils").isXMAStoryReply(k)){var B;return{isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(k),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(k),isStoryReply:!0,replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:C,replyPlaintextHash:(B=F!=null?o("WAHashUtils").stringToPlaintextHash(F):v)!=null?B:void 0,replySenderIsMe:$,replySourceId:S,replySourceTimestampMs:I,replyStatusType:C!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:D}}var W=o("MAWImageUtils").boundHeightWidth(M,w,96*.8),q=W.height,U=W.width;return{isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(k),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(k),isStoryReply:!1,replyMediaId:N,replyMediaPreviewHeight:E===o("MAWMsgType").MSG_TYPE.STICKER?q:M,replyMediaPreviewWidth:E===o("MAWMsgType").MSG_TYPE.STICKER?U:w,replyMediaUrlFallback:A,replyMentionedJids:x,replyMessageText:T,replyPlaintextHash:F!=null?o("WAHashUtils").stringToPlaintextHash(F):void 0,replySenderIsMe:$,replySourceId:b,replySourceTimestampMs:I,replyStatusType:R===1||R===2||R===3?o("MAWMsgType").MSG_TYPE.STICKER:E,replyToUserId:D,replyXMAId:O}}}function d(e){var t=e.specialTextSize;switch(t){case 1:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").SMALL);case 2:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").MEDIUM);case 3:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").LARGE);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").NONE)}}function m(e){if(r("justknobx")._("3424")&&e==="media_restore")return"EncryptedBackupsMedia";switch(e){case"eb_restore":return"EncryptedBackups";case"media_restore":return"EncryptedBackupsMedia";case"whatsapp":return"WhatsApp";default:return}}function p(t,n,a){var i,l,s,d,p=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),_=((i=t.isForwarded)!=null?i:!1)&&t.type!==o("MAWMsgType").MSG_TYPE.STICKER,f=(l=t.forwardingScore)!=null?l:0,g=o("MAWDbMsg").getCanonicalTsFromMsg(t),h=c(t,n,p),y=u(t,p),C=o("MAWXMAUtils").isXMAStoryShare(t.xmaMessageType),b=o("MAWXMAUtils").isXMAStoryReaction(t.xmaMessageType),v=o("MAWXMAUtils").isXMAExternalLinkShare(t.xmaMessageType),S=o("MAWXMAUtils").isIGXMAStoryMention(t.xmaMessageType),R=o("MAWXMAUtils").isFBXMAStoryMention(t.xmaMessageType),L=o("MAWXMAUtils").isXMAStoryHighlightShare(t.xmaMessageType),E=o("MAWXMAUtils").isXMAPostPrivateReply(t.xmaMessageType),k=o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(t.xmaMessageType),I=t.messageExpirationTs!=null&&t.messageExpirationTs<=o("WATimeUtils").unixTime(),T=o("MAWDbMsg").getSortOrderWithFallback(t),D=t.externalId,x=m(t.source);(n==null?void 0:n.replyPlaintextHash)!==(h==null?void 0:h.replyPlaintextHash)&&r("FBLogger")("messenger_web").warn("replyPlaintextHash mismatch. From replyMeta is null: %s, from replyContent is null: %s. Message type: %s",(n==null?void 0:n.replyPlaintextHash)==null,(h==null?void 0:h.replyPlaintextHash)==null,t.type);var $=(n==null?void 0:n.replyPlaintextHash)!=null?o("WAHashUtils").stringToPlaintextHash(n==null?void 0:n.replyPlaintextHash):(s=h==null?void 0:h.replyPlaintextHash)!=null?s:void 0;switch(t.type){case o("MAWMsgType").MSG_TYPE.TEXT:{var P,N=o("MAWVault").isVaulted(t.msgContent.content)?t.msgContent.content:o("MAWVault").vault(t.msgContent.content);return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:t.msgContent.commands,content:N,editCount:t.editCount,ephemeralDurationInSec:(P=t.ephemeralSetting)==null?void 0:P.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,mentionedJids:t.msgContent.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,specialTextSize:t.specialTextSize,transportKey:x,ts:g,type_:t.type})}case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,ephemeralDurationInSec:(d=t.ephemeralSetting)==null?void 0:d.ephemeralExpirationInSec,externalId:D,forwardingScore:f,groupId:t.groupId,groupIndex:t.groupIndex,groupSize:t.groupSize,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,unsupportedType:t.msgContent.subtype});case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:[t.msgContent.authorName],adminType:t.msgContent.adminType,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:{var M,w,A;return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:(M=t.msgContent)==null||(M=M.adminMsgContent)==null?void 0:M.map(function(e){return e==="Facebook User"?"0":e}),adminType:(w=t.msgContent)==null?void 0:w.adminType,adminVersion:(A=t.msgContent)==null?void 0:A.version,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type}}case o("MAWMsgType").MSG_TYPE.REVOKED:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,originalTs:t.originalTs,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.XMA:{var F,O,B,W,q,U=(F=t.msgContent)==null?void 0:F.content,V=U!=null?o("MAWVault").isVaulted(U)?(O=t.msgContent)==null?void 0:O.content:o("MAWVault").vault(U):void 0;v&&V==null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"])));var H=V;return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:(B=t.msgContent)==null?void 0:B.commands,content:H,ephemeralDurationInSec:(W=t.ephemeralSetting)==null?void 0:W.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isCollapsed:t.isCollapsed,isExpiredMsg:I,isExpiredXmaMsg:t.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(t.xmaMessageType),isFBStoryMention:R,isForwarded:_,isIGStoryMention:S,isMsgHighlightsTabFriendUpdatesReply:k,isPostPrivateReply:E,isStoryHighlightShare:L,isStoryReaction:b,isStoryShare:C,mentionedJids:(q=t.msgContent)==null?void 0:q.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,xmaMessageType:t.xmaMessageType})}default:return r("WAAssertUnreachable")(t.type)}}l.getSpecialTextSize=d,l.convertDbMsgSourceToLSTransportKey=m,l.createBridgeMsg=p}),98);
__d("MAWBridgeSafeActionsWorkerAndUI",["ExecutionEnvironment","FBLogger","MAWBridge","Promise","ifRequireable"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,i){return(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWBridge").getBridge().sendAndReceive("backend",t,a,i==null?void 0:i.isLoggingDisabled):new(e||(e=n("Promise")))(function(e,n){return r("ifRequireable")("MAWBridgeSendAndReceive",function(n){var r=n.sendAndReceive;return e(r("backend",t,a,i))},function(){return n("MAWBridgeSendAndReceive not available in UI ifRequired")})})}function c(e,t,n){return(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWBridge").getBridge().fireAndForget("backend",e,t,n):r("ifRequireable")("MAWBridgeFireAndForget",function(r){var o=r.fireAndForget;return o("backend",e,t,n)},function(){throw r("FBLogger")("messenger_web").mustfixThrow("MAWBridgeFireAndForget not available in UI ifRequired")})}l.sendAndReceiveBackendWorkerAndUIShared=u,l.fireAndForgetBackendWorkerAndUIShared=c}),98);
__d("MAWBridgeTraceEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ReceivedReceipt","ReceivedSent","FlowEndForFailure","FlowEndForSuccess"]),l=e;i.default=l}),66);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{return(e||(e=o("I64"))).of_string(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).mustfix("Cannot convert string to i64: %s",t)}}l.stringToI64Opt=s}),98);
__d("MAWConvertExtendedContentTypeToLSXmaContentType",["LSXmaContentType","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return null;switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return r("LSXmaContentType").FB_FEED_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return r("LSXmaContentType").FB_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return r("LSXmaContentType").FB_STORY_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return r("LSXmaContentType").FB_STORY_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return r("LSXmaContentType").FB_FEED_VIDEO_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return r("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return r("LSXmaContentType").FB_PRODUCER_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return r("LSXmaContentType").FB_EVENT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:return r("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return r("LSXmaContentType").MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return r("LSXmaContentType").FB_SHORT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return r("LSXmaContentType").MSG_LOCATION_SHARING;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return r("LSXmaContentType").MSG_LOCATION_SHARING_V2;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return r("LSXmaContentType").FB_POST_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY:return r("LSXmaContentType").FB_FEED_POST_REACTION_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return r("LSXmaContentType").MSG_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return r("LSXmaContentType").MSG_AI_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return r("LSXmaContentType").MSG_MEMORIES_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return r("LSXmaContentType").MSG_EXTERNAL_LINK_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return r("LSXmaContentType").RTC_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return r("LSXmaContentType").RTC_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return r("LSXmaContentType").RTC_MISSED_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return r("LSXmaContentType").RTC_MISSED_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return r("LSXmaContentType").FB_PROFILE_DIRECTORY_ITEM;default:return null}}l.convertExtendedContentTypeToLSXmaContentType=e}),98);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWMpsGating","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Promise","Random","ReQL","WAArmadilloXMA.pb","WAJids","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t,n,r,o,a){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i,l,s){var c=r.ctas,d=r.defaultCTA,m=p(r.targetId,r.targetType),f=(u||(u=o("I64"))).of_int32(o("Random").uint32());if(d!=null){var C=g(d,f,i,a,l,m,r.targetType);yield y(t,C,f,s.defaultCta)}var b=o("MAWXMAUtils").isFBXMAPostMention(r.targetType)&&r.author===o("WAJids").AUTHOR_ME,v=[];return c!=null&&!b&&(v=yield(e||(e=n("Promise"))).all(c.map(function(e,n){var r=_(f,n),o=h(e,r,i,a,l,m),u=n===0?s.attachmentCta1:n===1?s.attachmentCta2:n===2?s.attachmentCta3:void 0;return y(t,o,r,u)}))),{attachmentCta1Id:v.length>0?v[0]:void 0,attachmentCta2Id:v.length>1?v[1]:void 0,attachmentCta3Id:v.length>2?v[2]:void 0,defaultCtaId:d==null?void 0:f}}),d.apply(this,arguments)}function m(e){var t="xma_web_url";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:t="xma_rtc_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:t="xma_rtc_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:t="xma_rtc_missed_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:t="xma_rtc_missed_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:t="igd_web_post_share";break}return t}function p(e,t){if(!o("MAWXMAUtils").isFBXMAPostMention(t))return e!=null?o("MAWBridgeUIEventDataValidation").stringToI64Opt(e):void 0}function _(e,t){return(u||(u=o("I64"))).add(e,u.of_int32(t+1))}function f(e,t,n,r,a,i,l){var s;l===void 0&&(l="xma_web_url");var c=e.actionUrl,d=e.nativeUrl;return{actionContentBlob:void 0,actionUrl:c!=null?c:d,attachmentFbid:a,attachmentIndex:(u||(u=o("I64"))).zero,ctaId:t,enableExtensions:!1,extensionHeightType:void 0,messageId:n,nativeUrl:d!=null?d:c,platformToken:void 0,targetId:i!=null?i:void 0,threadKey:r,title:(s=e.title)!=null?s:"Tap to view status update",type_:l!=null?l:"xma_web_url",urlWebviewType:void 0}}function g(e,t,n,r,o,a,i){var l=m(i);return f(e,t,n,r,o,a,l)}function h(e,t,n,r,o,a){var i;switch(e.ctaType){case"contact_sharing_profile":i="contact_sharing_profile";break;case"contact_sharing_message":i="contact_sharing_message";break}return f(e,t,n,r,o,a,i)}function y(e,t,n,r){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){return r!=null?yield e.attachment_ctas.upsert([r.ctaId],t):yield e.attachment_ctas.add(t),n}),C.apply(this,arguments)}function b(e,t,n){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=null,a={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};return r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(t,n)),r!=null&&(a.defaultCta=yield S(e,r.defaultCtaId),a.attachmentCta1=yield S(e,r.attachmentCta1Id),a.attachmentCta2=yield S(e,r.attachmentCta2Id),a.attachmentCta3=yield S(e,r.attachmentCta3Id)),[r,a]}),v.apply(this,arguments)}function S(t,r){var a;return r==null?(e||(e=n("Promise"))).resolve(void 0):(a=o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachment_ctas).getKeyRange(r)))!=null?a:void 0}function R(e,t,n,a,i,l,c,d,m){var p,_,f,g,h,y,C,b,v=(u||(u=o("I64"))).zero,S=L(e),R=o("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(e.targetType),D=R?(u||(u=o("I64"))).of_int32(R):void 0,x=(p=e==null||(_=e.defaultCTA)==null?void 0:_.actionUrl)!=null?p:e==null||(f=e.defaultCTA)==null?void 0:f.nativeUrl;e.defaultPreviewMediaId!=null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+m+"."+e.targetType+"."+(e.defaultPreviewMediaPlaintextHash!=null?"true":"false"));var $=o("MAWMpsGating").isMpsMessageRendering();return{accessibilitySummaryText:void 0,actionUrl:x!=null?x:void 0,attachmentCta1Id:i,attachmentCta2Id:l,attachmentCta3Id:c,attachmentFbid:n,attachmentIndex:u.zero,attachmentLoggingType:void 0,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:u.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:k(e.ctas,1),cta1Type:E(e.ctas,1),cta2Title:k(e.ctas,2),cta2Type:E(e.ctas,2),cta3Title:k(e.ctas,3),cta3Type:E(e.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:d,defaultCtaTitle:(g=e.defaultCTA)==null?void 0:g.title,defaultCtaType:S.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:e.filesize!=null?(u||(u=o("I64"))).of_int32(e.filesize):void 0,gatingTitle:e.overlayTitle,gatingType:e.overlayIconGlyph!=null?String(e.overlayIconGlyph):void 0,hasMedia:e.hasMedia!=null?e.hasMedia:!1,hasXma:!0,hasXmaFavicon:$?e.faviconPlaintextHash!=null:e.faviconMediaId!=null,hasXmaHeaderImage:$?e.headerMediaPlaintextHash!=null:e.headerMediaId!=null,hasXmaPreview:$?e.defaultPreviewMediaPlaintextHash!=null:e.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:e.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:e.maxSubtitleNumOfLines!=null?(u||(u=o("I64"))).of_int32(e.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:e.maxTitleNumOfLines!=null?(u||(u=o("I64"))).of_int32(e.maxTitleNumOfLines):void 0,messageId:a,miniPreview:void 0,offlineAttachmentId:(h=e.offlineAttachmentId)!=null?h:n,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:S.height,previewHeightLarge:e.previewHeightLarge!=null?(u||(u=o("I64"))).of_int32(e.previewHeightLarge):void 0,previewImageDecorationType:T(e.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:S.width,previewWidthLarge:e.previewWidthLarge!=null?(u||(u=o("I64"))).of_int32(e.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:e.subtitleText,targetId:void 0,threadKey:t,timestampMs:v,titleText:e.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:D,xmaDataclass:e.xmaDataclass,xmaFaviconFbid:$?e.faviconPlaintextHash:(y=e.faviconMediaId)==null?void 0:y.toString(),xmaHeaderImageFbid:$?e.headerMediaPlaintextHash:(C=e.headerMediaId)==null?void 0:C.toString(),xmaLayoutType:e.xmaLayoutType!=null?I(e.xmaLayoutType):void 0,xmaPreviewFbid:$?e.defaultPreviewMediaPlaintextHash:(b=e.defaultPreviewMediaId)==null?void 0:b.toString(),xmasTemplateType:e.xmaLayoutType!=null?I(e.xmaLayoutType):void 0}}function L(e){var t;switch(e.targetType){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:t={height:(u||(u=o("I64"))).of_int32(108),width:(u||(u=o("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:t={xmaContentType:"xma_rtc_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:t={xmaContentType:"xma_rtc_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:t={xmaContentType:"xma_rtc_missed_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:t={xmaContentType:"xma_rtc_missed_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:t={xmaContentType:"xma_rtc_missed_group_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:t={xmaContentType:"xma_rtc_missed_group_video"};break;default:t={height:e.previewHeight!=null?(u||(u=o("I64"))).of_int32(e.previewHeight):void 0,width:e.previewWidth!=null?(u||(u=o("I64"))).of_int32(e.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return t}function E(e,t){if(e!=null){var n=e[t-1];if(n!=null){var r=n.buttonType,a=n.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return r===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}}}function k(e,t){if(e!=null){var n=e[t-1];if(n!=null)return n.title}}function I(e){return e===0||e!==3?(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").SINGLE):(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").PORTRAIT)}function T(e){switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").COLLAGE);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").REEL);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").DEFAULT)}}l.addAttachmentCtas=c,l.maybeBridgeToLSTargetId=p,l.getCtaIdFromDefaultCtaId=_,l.composeDefaultAttachmentCta=g,l.composeAttachmentCta=h,l.getExistingAttachmentAndAttachmentCtas=b,l.composeAttachmentXMA=R}),98);
__d("MAWBridgeXMA",["MAWBridgeXMAUtils","MAWDbMedia","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){if(e!=null)switch(e){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function u(t,n,r){var a,i,l,u,c=n.author,d=n.contentRef,m=n.ctas,p=n.defaultCTA,_=n.defaultPreviewMediaId,f=n.defaultPreviewMediaPlaintextHash,g=n.faviconMediaId,h=n.faviconPlaintextHash,y=n.headerMediaId,C=n.headerMediaPlaintextHash,b=n.headerTitle,v=n.maxSubtitleNumOfLines,S=n.maxTitleNumOfLines,R=n.msgId,L=n.offlineAttachmentId,E=n.overlayIconGlyph,k=n.overlayTitle,I=n.subtitleText,T=n.targetId,D=n.targetType,x=n.targetUsername,$=n.threadJid,P=n.titleText,N=n.xmaDataclass,M=n.xmaId,w=n.xmaLayoutType;t!=null&&t.mediaType!==o("MAWDbMedia").MEDIA_TYPE.IMAGE&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""])),t.mediaType),T!=null&&o("MAWBridgeXMAUtils").maybeBridgeToLSTargetId(T,D);var A=r.hasMedia,F=r.hasXmaFaviconMedia,O=r.hasXmaHeaderMedia;return{author:c,contentRef:d,ctas:m==null?void 0:m.filter(function(e){return e.ctaType!=null}),defaultCTA:p,defaultPreviewMediaId:_,defaultPreviewMediaPlaintextHash:f,duration:null,faviconMediaId:g,faviconPlaintextHash:h,filesize:t==null?void 0:t.size,hasMedia:A,hasXmaFaviconMedia:F,hasXmaHeaderMedia:O,headerMediaId:y,headerMediaPlaintextHash:C,headerTitle:b,maxSubtitleNumOfLines:v,maxTitleNumOfLines:S,mediaType:t==null?void 0:t.mediaType,msgId:R,offlineAttachmentId:L,overlayIconGlyph:E,overlayTitle:k,playableUrlMimeType:s(t==null?void 0:t.mediaType),previewHeight:t==null||(a=t.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,previewHeightLarge:t==null||(i=t.validatedImageInfo)==null?void 0:i.height,previewUrlMimeType:s(t==null?void 0:t.mediaType),previewWidth:t==null||(l=t.validatedImageInfo)==null?void 0:l.jpegThumbnailWidth,previewWidthLarge:t==null||(u=t.validatedImageInfo)==null?void 0:u.width,subtitleText:I,targetId:T,targetType:D,targetUsername:x,threadJid:$,titleText:P,ts:t==null?void 0:t.ts,xmaDataclass:N,xmaId:M,xmaLayoutType:w}}function c(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}function d(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}l.mediaTypeToMimeType=s,l.createBridgeXMA=u,l.createBridgeXMAShareExpired=c,l.createBridgeXMAShareTombstoned=d}),98);
__d("MAWDbEditMsgHistory",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(t){return(e||(e=o("I64"))).of_float(t)}function c(t){return(e||(e=o("I64"))).to_float(t)}l.unsafeCoerceToEditMsgHistoryId=s,l.convertToEditMsgHistoryId64=u,l.convertToEditMsgHistoryId=c}),98);
__d("MAWDbPoll",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e,t){var n=(e+t).split("");return Math.abs(n.reduce(function(e,t){var n=t.charCodeAt(0),r=(e<<5)-e+n;return r&=r,r},0))}i.convertStringToOptionHash=e,i.convertOptionHashToString=l,i.generateStableIdFromOptionHash=s}),66);
__d("MAWDbXMA",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(e){return e}function c(t){return(e||(e=o("I64"))).to_float(t)}l.convertNumbersToXMAIds=s,l.convertNumberToXMAId=u,l.convertXMAId64ToXMAId=c}),98);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={dyi:r("justknobx")._("467"),frontloaded:20,initial:20,paginated:r("justknobx")._("3177"),point:1,search:r("justknobx")._("2477")};function c(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"paginated"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function d(t){var n=t.querySource,a=t.runningInWorker,i=t.taskSource,l=t.traceId;l!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:i,traceId:l,triggerType:"initial"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function m(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"dyi"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function p(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"frontloaded"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function _(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"point"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function f(t){var n=t.querySource,a=t.runningInWorker,i=t.traceId;i!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:r("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:i,triggerType:"search"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function g(t,n){t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLSuccessThroughBridge(r("qpl")._(521476165,"2432"),void 0,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endSuccess(r("qpl")._(521476165,"2432"),{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function h(t,n,a,i){a===void 0&&(a="restore_failure"),t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLFailThroughBridge(r("qpl")._(521476165,"2432"),a,i,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endFailure(r("qpl")._(521476165,"2432"),a,{annotations:i,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function y(e){L("protobuf",e)}function C(e){var t=e.querySource,n=e.runningInWorker,a=e.taskSource,i=e.traceId,l=e.triggerType;if(n!=null&&n){var s;o("MAWQplProxy").startQplUserFlow(r("qpl")._(521476165,"2432"),{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(s=u[l])!=null?s:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},{providedInstanceKey:o("WAHashStringToNumber").hashStringToNumber(i),providedTimeoutInMs:r("justknobx")._("2950")})}else{var c;r("QPLUserFlow").start(r("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(c=u[l])!=null?c:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},instanceKey:o("WAHashStringToNumber").hashStringToNumber(i),timeoutInMs:r("justknobx")._("2950")})}}function b(e){var t=e.pointName,n=e.traceId;r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function v(e){var t=e.annotations,n=e.pointName,a=e.traceId;r("QPLUserFlow").addAnnotations(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)}),r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),n,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function S(e){var t=e.annotations,n=e.pointName,a=e.traceId;a!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),n,{annotations:t,instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function R(e){var t=e.pointName,n=e.traceId;o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function L(t,n){var a=n?(s||(s=o("LSIntEnum"))).unwrapIntEnum(n):null;(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+t+"."+E(a))}function E(e){var t;return(t=e==null?void 0:e.toString())!=null?t:"unknown"}l.markEBRestorePaginated=c,l.markEBRestoreInitial=d,l.markEBRestoreDYI=m,l.markEBRestoreFrontloaded=p,l.markEBRestorePoint=_,l.markEBRestoreSearch=f,l.markEBRestoreSuccess=g,l.markEBRestoreFail=h,l.markEBRestoreProtobuf=y,l.addQPLRestorePoint=b,l.addQPLRestorePointWithAnnotations=v,l.addQPLRestorePointWithAnnotationsWorker=S,l.addQPLRestorePointWorker=R}),98);
__d("MWEBODSEntityKey.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({START:"start",SUCCESS:"success",FAIL:"fail",INCORRECT_PIN_CODE:"incorrect_pin_code",INCORRECT_RECOVERY_CODE:"incorrect_recovery_code",TIMEOUT:"timeout",CANCEL:"cancel"}),l=e;i.default=l}),66);
__d("MWEBODSUtils",["CurrentMessengerUser","MWEBODSCategory","ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=o("CurrentMessengerUser").getAppID(),l=i!=null?i.toString():"unknown",s=t+"."+l;(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),s,n,a!=null?a:1),e.bumpEntityKey(r("MWEBODSCategory"),t,n,a!=null?a:1)}l.markODSForEB=s}),98);
__d("WACommsConnectionState",["WAGenericStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,!1)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isConnected=function(){return this.get()},n.waitForConnection=function(){return this.waitForValue(!0)},t})(o("WAGenericStateManager").WAGenericStateManager),s=new e;l.WACommsConnectionState=s}),98);
__d("WAGetHashFromProtocolMsgId",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.externalId+"_"+e.author+"_"+e.chat}i.getHashFromProtocolMsgId=e}),66);
__d("MAWEBUploadTrackingUtils",["MAWAckLevel","MAWEBSwitch","MAWExternalId","MAWMsgType","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBODSUtils","ODS","QPLUserFlow","QuickPerformanceLogger","WACommsConnectionState","WAExceededStorageQuota","WAGetHashFromProtocolMsgId","WAGlobals","WAHashStringToNumber","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={ERROR_FETCHING_DB_MESSAGE:"error_fetching_db_message",FAILED_TO_ACK_MESSAGE:"failed_to_ack_message",FAILED_TO_CONSTRUCT_ECHO_MESSAGE:"failed_to_construct_echo_message",MESSAGE_UPLOAD_TIMEOUT:"message_upload_timeout",RUNTIME_ERROR:"runtime_error"};function c(e,t,n,a,i,l,u,c,d,m){if(l===void 0&&(l=!1),u===void 0&&(u=!1),d===void 0&&(d="unknown"),m===void 0&&(m=0),!!r("MAWEBSwitch").isEnabled()){r("QPLUserFlow").start(r("qpl")._(521481602,"829"),{annotations:{bool:{eb_switch:r("MAWEBSwitch").isEnabled(),eb_upload_queue:!0,fromUploadQueue:l,is_retroactive_upload:u,middleware_init:!1},int:{attachmentsSize:c!=null?c:0,instanceKey:i,retryCount:m},string:{comms_status:o("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected",externalId:e,msgType:n,payloadType:d,threadId:t,triggerType:a,userJid:o("WAGlobals").getMyUserJid()}},instanceKey:i,timeoutInMs:r("justknobx")._("1405")}),p(i,"upload_tracking_started"),(s||(s=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,r("MWEBODSEntityKey.enum").START),o("MWEBODSUtils").markODSForEB(r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+(n!=null?n:"unknown"));var _=o("MAWMsgType").isMAWSupportedMediaType(n!=null?n:"Text")?"media":"non-media";o("MWEBODSUtils").markODSForEB(r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+_)}}function d(e){return e==null?{string:{comms_status_on_failure:o("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected"}}:babelHelpers.extends({},e,{string:babelHelpers.extends({},e.string,{comms_status_on_failure:o("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected"})})}function m(e,t,n,r){switch(e){case"success":g(t,n,r);break;case"fail":f(t,n,r);break;case"point":p(t,n,r);break}}function p(e,t,n){n&&r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),n,{instanceKey:e}),r("QPLUserFlow").addPoint(r("qpl")._(521481602,"829"),t,{instanceKey:e})}function _(e,t){var n;r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),d(t),{instanceKey:e}),r("QPLUserFlow").endCancel(r("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:t==null||(n=t.string)==null?void 0:n.jid}},instanceKey:e}),(s||(s=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,r("MWEBODSEntityKey.enum").CANCEL)}function f(e,t,n){var a;r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),d(n),{instanceKey:e}),r("QPLUserFlow").endFailure(r("qpl")._(521481602,"829"),t,{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:n==null||(a=n.string)==null?void 0:a.jid}},instanceKey:e}),(s||(s=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,r("MWEBODSEntityKey.enum").FAIL)}function g(e,t,n){p(e,t),h(e,n)}function h(e,t){t&&r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),t,{instanceKey:e}),r("QPLUserFlow").endSuccess(r("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},instanceKey:e}),(s||(s=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,r("MWEBODSEntityKey.enum").SUCCESS)}function y(e,t,n){var a;p(e,t),n&&r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),n,{instanceKey:e}),r("QPLUserFlow").endTimeout(r("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:n==null||(a=n.string)==null?void 0:a.jid}},instanceKey:e}),(s||(s=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,r("MWEBODSEntityKey.enum").TIMEOUT)}function C(t,n,o){var a=r("qpl")._(521481602,"829");p(t,n),o&&(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(a,o,{instanceKey:t}),(e||(e=r("QuickPerformanceLogger"))).markerEnd(a,52,t,e.currentTimestamp())}function b(){return o("WAHashStringToNumber").hashStringToNumber(o("MAWExternalId").generateExternalId())}function v(e,t){return t===void 0&&(t=0),o("WAHashStringToNumber").hashStringToNumber(o("WAGetHashFromProtocolMsgId").getHashFromProtocolMsgId(e)+"_"+o("WAGlobals").getMyDeviceJid()+"_"+t)}function S(e){return r("MAWEBSwitch").isEnabled()&&o("MAWMsgType").isEBSupportedMsgType(e.type)&&e.ack>=o("MAWAckLevel").ACK.sent&&e.serverTs!=null&&!(e.ephemeralSetting!=null&&e.ephemeralSetting.ephemeralExpirationInSec>0)}function R(e){return{addAnnotations:function(n){L(e,n)},addPoint:function(n,r){p(e,n,r)},endCancel:function(n,r){_(e,r)},endFail:function(n,r){f(e,n,r)},endSuccess:function(n){h(e,n)},getQPLAttrs:function(){return{instanceKey:e}},isActive:function(){return!0},start:function(){}}}function L(e,t){r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),t,{instanceKey:e})}function E(e,t){return e.get(t)}function k(e,t,n,r,o){var a=E(t,n);if(a!=null)switch(e){case"success":g(a,r,o);break;case"fail":f(a,r,o);break;case"point":p(a,r,o);break}}l.EBUploadTrackingWorkerFailurePoints=u,l.startUploadTracking=c,l.handleBridgeEbUploadTrackingQPL=m,l.addPointWorkerOnly=p,l.endCancelWorkerOnly=_,l.endFailWorkerOnly=f,l.endSuccessWorkerOnly=g,l.endTimeoutWorkerOnly=y,l.endRetryWorkerOnly=C,l.genInstanceKeyOnly=b,l.genInstanceKeyForUploadQueue=v,l.isUploadSupported=S,l.makeEBWorkerQplFlowFromInstanceKey=R,l.addAnnotationsForEBWorkerQplFlow=L,l.getUploadTrackingInstanceKey=E,l.addUploadTrackingByType=k}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NONE:0,LQ_4K:1,HQ_4K:2},u={NONE:0,GIPHY:1,TENOR:2},c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4},d={UNKNOWN:0,OPUS:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={};m.name="WAMediaTransport",m.internalSpec={integral:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,g],ancillary:[2,e.TYPES.MESSAGE,p]},p.name="WAMediaTransport$Ancillary",p.internalSpec={fileLength:[1,e.TYPES.UINT64],mimetype:[2,e.TYPES.STRING],thumbnail:[3,e.TYPES.MESSAGE,_],objectId:[4,e.TYPES.STRING]},_.name="WAMediaTransport$Ancillary$Thumbnail",_.internalSpec={jpegThumbnail:[1,e.TYPES.BYTES],downloadableThumbnail:[2,e.TYPES.MESSAGE,f],thumbnailWidth:[3,e.TYPES.UINT32],thumbnailHeight:[4,e.TYPES.UINT32]},f.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail",f.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],thumbnailScansSidecar:[7,e.TYPES.BYTES],thumbnailScanLengths:[8,e.FLAGS.REPEATED|e.TYPES.UINT32]},g.name="WAMediaTransport$Integral",g.internalSpec={fileSha256:[1,e.TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64]},h.name="ImageTransport",h.internalSpec={integral:[1,e.TYPES.MESSAGE,C],ancillary:[2,e.TYPES.MESSAGE,y]},y.name="ImageTransport$Ancillary",y.internalSpec={height:[1,e.TYPES.UINT32],width:[2,e.TYPES.UINT32],scansSidecar:[3,e.TYPES.BYTES],scanLengths:[4,e.FLAGS.REPEATED|e.TYPES.UINT32],midQualityFileSha256:[5,e.TYPES.BYTES],hdType:[6,e.TYPES.ENUM,s],memoriesConceptScores:[7,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.FLOAT],memoriesConceptIds:[8,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.UINT32]},C.name="ImageTransport$Integral",C.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},b.name="VideoTransport",b.internalSpec={integral:[1,e.TYPES.MESSAGE,S],ancillary:[2,e.TYPES.MESSAGE,v]},v.name="VideoTransport$Ancillary",v.internalSpec={seconds:[1,e.TYPES.UINT32],caption:[2,e.TYPES.MESSAGE,o("WACommon.pb").MessageTextSpec],gifPlayback:[3,e.TYPES.BOOL],height:[4,e.TYPES.UINT32],width:[5,e.TYPES.UINT32],sidecar:[6,e.TYPES.BYTES],gifAttribution:[7,e.TYPES.ENUM,u],accessibilityLabel:[8,e.TYPES.STRING],isHd:[9,e.TYPES.BOOL]},S.name="VideoTransport$Integral",S.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},R.name="AudioTransport",R.internalSpec={integral:[1,e.TYPES.MESSAGE,I],ancillary:[2,e.TYPES.MESSAGE,L]},L.name="AudioTransport$Ancillary",L.internalSpec={seconds:[1,e.TYPES.UINT32],avatarAudio:[2,e.TYPES.MESSAGE,E],waveformData:[3,e.TYPES.STRING],waveform:[4,e.TYPES.BYTES]},E.name="AudioTransport$Ancillary$AvatarAudio",E.internalSpec={poseId:[1,e.TYPES.UINT32],avatarAnimations:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,k]},k.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations",k.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],animationsType:[7,e.TYPES.ENUM,c]},I.name="AudioTransport$Integral",I.internalSpec={transport:[1,e.TYPES.MESSAGE,m],audioFormat:[2,e.TYPES.ENUM,d]},T.name="DocumentTransport",T.internalSpec={integral:[1,e.TYPES.MESSAGE,x],ancillary:[2,e.TYPES.MESSAGE,D]},D.name="DocumentTransport$Ancillary",D.internalSpec={pageCount:[1,e.TYPES.UINT32]},x.name="DocumentTransport$Integral",x.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},$.name="StickerTransport",$.internalSpec={integral:[1,e.TYPES.MESSAGE,N],ancillary:[2,e.TYPES.MESSAGE,P]},P.name="StickerTransport$Ancillary",P.internalSpec={pageCount:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],width:[3,e.TYPES.UINT32],firstFrameLength:[4,e.TYPES.UINT32],firstFrameSidecar:[5,e.TYPES.BYTES],mustacheText:[6,e.TYPES.STRING],isThirdParty:[7,e.TYPES.BOOL],receiverFetchId:[8,e.TYPES.STRING],accessibilityLabel:[9,e.TYPES.STRING]},N.name="StickerTransport$Integral",N.internalSpec={transport:[1,e.TYPES.MESSAGE,m],isAnimated:[2,e.TYPES.BOOL],receiverFetchId:[3,e.TYPES.STRING]},M.name="ContactTransport",M.internalSpec={integral:[1,e.TYPES.MESSAGE,A],ancillary:[2,e.TYPES.MESSAGE,w]},w.name="ContactTransport$Ancillary",w.internalSpec={displayName:[1,e.TYPES.STRING]},A.name="ContactTransport$Integral",A.internalSpec={vcard:[1,e.TYPES.STRING],downloadableVcard:[2,e.TYPES.MESSAGE,m],__oneofs__:{contact:["vcard","downloadableVcard"]}},l.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=s,l.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=u,l.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c,l.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=d,l.WAMediaTransportSpec=m,l.WAMediaTransport$AncillarySpec=p,l.WAMediaTransport$Ancillary$ThumbnailSpec=_,l.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=f,l.WAMediaTransport$IntegralSpec=g,l.ImageTransportSpec=h,l.ImageTransport$AncillarySpec=y,l.ImageTransport$IntegralSpec=C,l.VideoTransportSpec=b,l.VideoTransport$AncillarySpec=v,l.VideoTransport$IntegralSpec=S,l.AudioTransportSpec=R,l.AudioTransport$AncillarySpec=L,l.AudioTransport$Ancillary$AvatarAudioSpec=E,l.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=k,l.AudioTransport$IntegralSpec=I,l.DocumentTransportSpec=T,l.DocumentTransport$AncillarySpec=D,l.DocumentTransport$IntegralSpec=x,l.StickerTransportSpec=$,l.StickerTransport$AncillarySpec=P,l.StickerTransport$IntegralSpec=N,l.ContactTransportSpec=M,l.ContactTransport$AncillarySpec=w,l.ContactTransport$IntegralSpec=A}),98);
__d("WAMediaHdType",[],(function(t,n,r,o,a,i,l){"use strict";var e=0,s=1,u=2,c={HD_TYPE_NONE:e,HD_TYPE_LQ_4K:s,HD_TYPE_HQ_4K:u};l.HD_TYPE_NONE=e,l.HD_TYPE_LQ_4K=s,l.HD_TYPE_HQ_4K=u,l.HD_TYPE=c}),98);
__d("MAWEncodeMediaTransportProtocol",["MAWDbMedia","WAMediaHdType","WAMediaTransport.pb","encodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e="image/jpeg",s="image/webp",u="video/mp4",c="audio/wav",d="audio/ogg",m="image/gif",p="application/octet-stream";function _(e){switch(e){case o("WAMediaHdType").HD_TYPE_NONE:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.NONE;case o("WAMediaHdType").HD_TYPE_LQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.LQ_4K;case o("WAMediaHdType").HD_TYPE_HQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.HQ_4K;default:return}}function f(t,n,r){var a,i,l,s,u,c,d,m,p={ancillary:{hdType:_((a=r==null?void 0:r.hdType)!=null?a:(i=t.validatedImageInfo)==null?void 0:i.hdType),height:(l=t.validatedImageInfo)==null?void 0:l.height,scanLengths:((s=n.progressiveJpegDetails)==null?void 0:s.scanLengths)||[],scansSidecar:(u=n.progressiveJpegDetails)==null?void 0:u.sidecar,width:(c=t.validatedImageInfo)==null?void 0:c.width},integral:{transport:{ancillary:{fileLength:t.size,mimetype:e,objectId:n.objectId,thumbnail:{downloadableThumbnail:n.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:(d=t.validatedImageInfo)==null?void 0:d.jpegThumbnailHeight,thumbnailWidth:(m=t.validatedImageInfo)==null?void 0:m.jpegThumbnailWidth}},integral:{directPath:n.directPath,fileEncSha256:n.fileEncSha256,fileSha256:n.fileSha256,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,p).readBuffer()}function g(e,t,n){var r=f(e,t,n);return{payload:{content:{imageMessage:{caption:{mentionedJid:[]},image:{payload:r,version:1}}}}}}function h(e,t){var n,r,a,i,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,height:(n=e.validatedImageInfo)==null?void 0:n.height,width:(r=e.validatedImageInfo)==null?void 0:r.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:s,objectId:t.objectId,thumbnail:{thumbnailHeight:(a=e.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,thumbnailWidth:(i=e.validatedImageInfo)==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,l).readBuffer()}function y(e,t){var n=h(e,t);return{payload:{content:{stickerMessage:{sticker:{payload:n,version:1}}}}}}function C(e,t){var n,r=e.mediaType===o("MAWDbMedia").MEDIA_TYPE.GIF,a=e.isVideoGif===!0,i=r?e.validatedImageInfo:e.validatedVideoInfo,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,gifPlayback:r||a,height:i==null?void 0:i.height,seconds:r||(n=e.validatedVideoInfo)==null?void 0:n.duration,sidecar:t.sidecar,width:i==null?void 0:i.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:r?m:u,objectId:t.objectId,thumbnail:r?{thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}:{downloadableThumbnail:t.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,l).readBuffer()}function b(e,t){var n=C(e,t);return{payload:{content:{videoMessage:{caption:{mentionedJid:[]},video:{payload:n,version:1}}}}}}var v=new ArrayBuffer(0);function S(e,t){var n,a,i={ancillary:{seconds:(n=e.validatedAudioInfo)==null?void 0:n.duration,waveform:(a=e.validatedAudioInfo)==null?void 0:a.waveform},integral:{audioFormat:r("gkx")("3053")?o("WAMediaTransport.pb").AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT.OPUS:void 0,transport:{ancillary:{fileLength:e.size,mimetype:r("gkx")("3053")?d:c,objectId:t.objectId,thumbnail:{jpegThumbnail:v}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,i).readBuffer()}function R(e,t){var n=S(e,t);return{payload:{content:{audioMessage:{audio:{payload:n,version:1},ptt:!0}}}}}function L(e,t){var n={ancillary:{},integral:{transport:{ancillary:{fileLength:e.size,mimetype:p,objectId:t.objectId,thumbnail:{jpegThumbnail:new ArrayBuffer(1),thumbnailHeight:1,thumbnailWidth:1}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,n).readBuffer()}function E(e,t){var n,r=L(e,t);return{payload:{content:{documentMessage:{document:{payload:r,version:1},fileName:(n=e.validatedDocumentFileInfo)==null?void 0:n.filename}}}}}l.IMAGE_MIME_TYPE=e,l.STICKER_MIME_TYPE=s,l.VIDEO_MIME_TYPE=u,l.AUDIO_WAV_MIME_TYPE=c,l.AUDIO_OGG_MIME_TYPE=d,l.GIF_MIME_TYPE=m,l.FILE_MIME_TYPE=p,l.encodeMediaHdType=_,l.encodeValidatedMediaToImageTransport=f,l.encodeValidatedImageMessage=g,l.encodeValidatedMediaToStickerTransport=h,l.encodeValidatedStickerMessage=y,l.encodeValidatedMediaToVideoTransport=C,l.encodeValidatedVideoMessage=b,l.emptyAudioFileArrayBuffer=v,l.encodeValidatedMediaToAudioTransport=S,l.encodeValidatedAudioMessage=R,l.encodeValidatedMediaToDocumentTransport=L,l.encodeValidatedFileMessage=E}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={ES_OPEN:1,ES_CLOSE:2},c={UNKNOWN:0,NUDE:1,NOT_NUDE:2},d={TAKEDOWN:0,RESTORE:1},m={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23},p={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2},_={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2},f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2},g={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={};h.name="Armadillo",h.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,C],metadata:[2,e.TYPES.MESSAGE,y]},y.name="Armadillo$Metadata",y.internalSpec={},C.name="Armadillo$Payload",C.internalSpec={content:[1,e.TYPES.MESSAGE,B],applicationData:[2,e.TYPES.MESSAGE,L],signal:[3,e.TYPES.MESSAGE,v],subProtocol:[4,e.TYPES.MESSAGE,b],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},b.name="Armadillo$SubProtocolPayload",b.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},v.name="Armadillo$Signal",v.internalSpec={encryptedBackupsSecrets:[1,e.TYPES.MESSAGE,S],__oneofs__:{signal:["encryptedBackupsSecrets"]}},S.name="Armadillo$Signal$EncryptedBackupsSecrets",S.internalSpec={backupId:[1,e.TYPES.UINT64],serverDataId:[2,e.TYPES.UINT64],epoch:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,R],tempOcmfClientState:[4,e.TYPES.BYTES],mailboxRootKey:[5,e.TYPES.BYTES],obliviousValidationToken:[6,e.TYPES.BYTES]},R.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch",R.internalSpec={id:[1,e.TYPES.UINT64],anonId:[2,e.TYPES.BYTES],rootKey:[3,e.TYPES.BYTES],status:[4,e.TYPES.ENUM,u]},L.name="Armadillo$ApplicationData",L.internalSpec={metadataSync:[1,e.TYPES.MESSAGE,O],aiBotResponse:[2,e.TYPES.MESSAGE,k],messageHistoryDocumentMessage:[3,e.TYPES.MESSAGE,E],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}},E.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage",E.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},k.name="Armadillo$ApplicationData$AIBotResponseMessage",k.internalSpec={summonToken:[1,e.TYPES.STRING],messageText:[2,e.TYPES.STRING],serializedExtras:[3,e.TYPES.STRING]},I.name="Armadillo$ApplicationData$MetadataSyncAction",I.internalSpec={actionTimestamp:[1,e.TYPES.INT64],chatAction:[101,e.TYPES.MESSAGE,P],messageAction:[102,e.TYPES.MESSAGE,x],spectraAction:[103,e.TYPES.MESSAGE,D],attachmentInterventionAction:[104,e.TYPES.MESSAGE,T],__oneofs__:{actionType:["chatAction","messageAction","spectraAction","attachmentInterventionAction"]}},T.name="Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionAction",T.internalSpec={messageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],interventionType:[2,e.TYPES.ENUM,c]},D.name="Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraAction",D.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionType:[2,e.TYPES.ENUM,d],takedownActionId:[3,e.TYPES.INT64],config:[4,e.TYPES.STRING]},x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction",x.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],messageDelete:[101,e.TYPES.MESSAGE,$],__oneofs__:{action:["messageDelete"]}},$.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete",$.internalSpec={},P.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction",P.internalSpec={chatId:[1,e.TYPES.STRING],chatArchive:[101,e.TYPES.MESSAGE,w],chatDelete:[102,e.TYPES.MESSAGE,M],chatRead:[103,e.TYPES.MESSAGE,N],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}},N.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead",N.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],read:[2,e.TYPES.BOOL]},M.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete",M.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F]},w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive",w.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],archived:[2,e.TYPES.BOOL]},A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage",A.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],timestamp:[2,e.TYPES.INT64]},F.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange",F.internalSpec={lastMessageTimestamp:[1,e.TYPES.INT64],lastSystemMessageTimestamp:[2,e.TYPES.INT64],messages:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,A]},O.name="Armadillo$ApplicationData$MetadataSyncNotification",O.internalSpec={actions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,I]},B.name="Armadillo$Content",B.internalSpec={commonSticker:[1,e.TYPES.MESSAGE,Q],screenshotAction:[3,e.TYPES.MESSAGE,G],extendedContentMessage:[4,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,e.TYPES.MESSAGE,K],ravenActionNotifMessage:[6,e.TYPES.MESSAGE,j],extendedMessageContentWithSear:[7,e.TYPES.MESSAGE,z],imageGalleryMessage:[8,e.TYPES.MESSAGE,H],paymentsTransactionMessage:[10,e.TYPES.MESSAGE,W],bumpExistingMessage:[11,e.TYPES.MESSAGE,V],noteReplyMessage:[13,e.TYPES.MESSAGE,U],ravenMessageMsgr:[14,e.TYPES.MESSAGE,K],networkVerificationMessage:[15,e.TYPES.MESSAGE,q],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}},W.name="Armadillo$Content$PaymentsTransactionMessage",W.internalSpec={transactionId:[1,e.TYPES.UINT64],amount:[2,e.TYPES.STRING],currency:[3,e.TYPES.STRING],paymentStatus:[4,e.TYPES.ENUM,m],extendedContentMessage:[5,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec]},q.name="Armadillo$Content$NetworkVerificationMessage",q.internalSpec={codeText:[1,e.TYPES.STRING]},U.name="Armadillo$Content$NoteReplyMessage",U.internalSpec={noteId:[1,e.TYPES.STRING],noteText:[2,e.TYPES.MESSAGE,s.MessageTextSpec],noteTimestampMs:[3,e.TYPES.INT64],textContent:[4,e.TYPES.MESSAGE,s.MessageTextSpec],stickerContent:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],videoContent:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}},V.name="Armadillo$Content$BumpExistingMessage",V.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},H.name="Armadillo$Content$ImageGalleryMessage",H.internalSpec={images:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s.SubProtocolSpec]},G.name="Armadillo$Content$ScreenshotAction",G.internalSpec={screenshotType:[1,e.TYPES.ENUM,p]},z.name="Armadillo$Content$ExtendedContentMessageWithSear",z.internalSpec={searId:[1,e.TYPES.STRING],payload:[2,e.TYPES.BYTES],nativeUrl:[3,e.TYPES.STRING],searAssociatedMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],searSentWithMessageId:[5,e.TYPES.STRING]},j.name="Armadillo$Content$RavenActionNotifMessage",j.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionTimestamp:[2,e.TYPES.INT64],actionType:[3,e.TYPES.ENUM,_]},K.name="Armadillo$Content$RavenMessage",K.internalSpec={ephemeralType:[1,e.TYPES.ENUM,f],imageMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],videoMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}},Q.name="Armadillo$Content$CommonSticker",Q.internalSpec={stickerType:[1,e.TYPES.ENUM,g]},l.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=u,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_ATTACHMENT_INTERVENTION_ACTION_INTERVENTION_TYPE=c,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_SPECTRA_ACTION_SPECTRA_ACTION_TYPE=d,l.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=m,l.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=p,l.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=_,l.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f,l.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=g,l.ArmadilloSpec=h,l.Armadillo$MetadataSpec=y,l.Armadillo$PayloadSpec=C,l.Armadillo$SubProtocolPayloadSpec=b,l.Armadillo$SignalSpec=v,l.Armadillo$Signal$EncryptedBackupsSecretsSpec=S,l.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=R,l.Armadillo$ApplicationDataSpec=L,l.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=E,l.Armadillo$ApplicationData$AIBotResponseMessageSpec=k,l.Armadillo$ApplicationData$MetadataSyncActionSpec=I,l.Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionActionSpec=T,l.Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraActionSpec=D,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=x,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=$,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=P,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=N,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=M,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=w,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=A,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=F,l.Armadillo$ApplicationData$MetadataSyncNotificationSpec=O,l.Armadillo$ContentSpec=B,l.Armadillo$Content$PaymentsTransactionMessageSpec=W,l.Armadillo$Content$NetworkVerificationMessageSpec=q,l.Armadillo$Content$NoteReplyMessageSpec=U,l.Armadillo$Content$BumpExistingMessageSpec=V,l.Armadillo$Content$ImageGalleryMessageSpec=H,l.Armadillo$Content$ScreenshotActionSpec=G,l.Armadillo$Content$ExtendedContentMessageWithSearSpec=z,l.Armadillo$Content$RavenActionNotifMessageSpec=j,l.Armadillo$Content$RavenMessageSpec=K,l.Armadillo$Content$CommonStickerSpec=Q}),98);
__d("MAWEphemeralUtils",["MAWLocalizationType","MAWUserJidWrapper","WAArmadilloApplication.pb","WAJids","err"],(function(t,n,r,o,a,i,l){"use strict";var e=60,s=60*e,u=24*s;function c(t,n,r,a){var i,l=[],c=n===u,d=t===o("MAWUserJidWrapper").getMyUserJid();if(a)i=o("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET;else if(t==null)n===0?i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:n<e?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,l.push(n.toString())):n<s?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,l.push((n/e).toString())):n<u||c?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,l.push((n/s).toString())):(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,l.push((n/u).toString()));else{var m=o("WAJids").extractUserId(t).toString();n===0?d?i=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF:(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,l.push(m)):n<e?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,l.push(m)),l.push(n.toString())):n<s?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,l.push(m)),l.push((n/e).toString())):n<u||c?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,l.push(m)),l.push((n/s).toString())):(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,l.push(m)),l.push((n/u).toString()))}return{adminMsgContent:l,adminType:i,version:1}}function d(e,t,n){var a,i=[],l=o("WAJids").extractUserId(t).toString();switch(e){case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:n?a=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT:(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,i.push(l));break;case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:n?a=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN:(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,i.push(l));break;default:throw r("err")("Received unexpected screenshot action type")}return{ephemeralScreenshotActionContent:i,ephemeralScreenshotActionType:a}}l.getEphemeralSettingChangeData=c,l.getEphemeralScreenshotActionData=d}),98);
__d("MAWGetUserDeviceChangeAdminType",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case"add":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}l.getUserDeviceAdminType=e}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWDbMsg","MAWJids","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){if(o("WAJids").isAuthorSystem(e)||t==null||n==null){r("FBLogger")("messenger_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",n);return}return{author:e,chat:t,externalId:n}}function c(e){var t;return u(e.author,e.threadJid,(t=e.externalId)!=null?t:e.editExternalId)}function d(e){return o("WAJids").isAuthorMe(e)?o("WAGlobals").getMyUserJid():e}function m(t,n){var r=(e||(e=o("I64"))).to_string(t),a=(s||(s=o("LSIntEnum"))).unwrapIntEnum(n);switch(a){case 15:return o("MAWJids").jidUtils.toUserJid(r);case 16:return o("WAJids").toGroupJid(r);default:return null}}function p(e){return g(e.threadJid,e.externalId)}function _(e){return f(e.threadJid,e.externalId)}function f(e,t){var n=o("MAWDbMsg").toMsgId(g(e,t));if(n==null)throw r("FBLogger")("messenger_e2ee_web").mustfixThrow("formatProtocolMsgIdFromExternalId: Failed to create protocolMsgId with externalId %s for a msg",t);return n}function g(e,t){return e+"."+t}l.maybeToProtocolMsgId=u,l.toProtocolMsgId=c,l.getAuthorJid=d,l.LSJidtoChatJid=m,l.toProtocolMsgIdStringForMAWStorage=p,l.formatProtocolMsgIdFromMsg=_,l.formatProtocolMsgIdFromExternalId=f}),98);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:3449")&&n("cr:3449").clearLocalStorageBigValues()}l.onQuotaExceeded=e}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){o("WALogger").LOG([e])}function u(e){o("WALogger").ERROR([e])}function c(){return o("LocalStorageWrapper").getStorage(s)}function d(){return o("LocalStorageWrapper").isLocalStorageAvailable(s)}function m(e,t,n){return o("LocalStorageWrapper").setItemGuarded(e,t,n,u,o("MWLocalStorageErrorHandler").onQuotaExceeded)}function p(t,n){t==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]))):t.removeItem(n)}l.getStorage=c,l.isLocalStorageAvailable=d,l.setItemGuarded=m,l.removeItemGuarded=p}),98);
__d("MAWMediaGalleryEBTaggingUtils",["LSThreadMediaGalleryGroup","MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("13725")}function s(e){return u(e)!=null}function u(e){return e===r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS?r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS:e===r("LSThreadMediaGalleryGroup").FILES_ONLY&&o("MAWMpsGating").isFileGalleryEBTaggingEnabled()?r("LSThreadMediaGalleryGroup").FILES_ONLY:void 0}l.isMediaGalleryEBTaggingRestoreEnabled=e,l.isMediaGalleryGroupSupportedForTaggedRestore=s,l.toMediaGalleryGroupForTaggedRestore=u}),98);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","MsgrWebGating","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n,r,a,i){return e===o("MAWMsgType").MSG_TYPE.TEXT?t?(u||(u=o("LSIntEnum"))).ofNumber(8192):(u||(u=o("LSIntEnum"))).ofNumber(1):e===o("MAWMsgType").MSG_TYPE.IMAGE||e===o("MAWMsgType").MSG_TYPE.VIDEO||e===o("MAWMsgType").MSG_TYPE.RAVEN?(u||(u=o("LSIntEnum"))).ofNumber(2):e===o("MAWMsgType").MSG_TYPE.PTT?(u||(u=o("LSIntEnum"))).ofNumber(4):e===o("MAWMsgType").MSG_TYPE.FUTUREPROOF?m(a):e===o("MAWMsgType").MSG_TYPE.CIPHERTEXT?(u||(u=o("LSIntEnum"))).ofNumber(65536):e===o("MAWMsgType").MSG_TYPE.UNAVAILABLE?(u||(u=o("LSIntEnum"))).ofNumber(262144):e===o("MAWMsgType").MSG_TYPE.GIF?(u||(u=o("LSIntEnum"))).ofNumber(16384):e===o("MAWMsgType").MSG_TYPE.STICKER?(u||(u=o("LSIntEnum"))).ofNumber(4096):e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE?(u||(u=o("LSIntEnum"))).ofNumber(64):e===o("MAWMsgType").MSG_TYPE.XMA?n!=null&&n?(u||(u=o("LSIntEnum"))).ofNumber(256):i===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(536870912):(u||(u=o("LSIntEnum"))).ofNumber(1024):e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE?r?(u||(u=o("LSIntEnum"))).ofNumber(1):(u||(u=o("LSIntEnum"))).ofNumber(33554432):e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(134217728):(u||(u=o("LSIntEnum"))).ofNumber(1)}function m(e){switch(e){case"liveLocationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(u||(u=o("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(u||(u=o("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(u||(u=o("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(u||(u=o("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(u||(u=o("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(u||(u=o("LSIntEnum"))).ofNumber(17179869184);default:return(u||(u=o("LSIntEnum"))).ofNumber(131072)}}function p(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16384))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(64))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4096))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function _(e,t){var n=e.replyAttachmentType;if(n==null)return!1;var a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t);return a&&e.replyAttachmentId==null&&(!o("MsgrWebGating").isQuotedMessagesInLsEnabled()||e.replyAttachmentPlaintextHash==null)?!1:(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").AUDIO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO))}function f(e){return(c||(c=o("I64"))).equal(e.displayedContentTypes,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function g(e){return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),e.displayedContentTypes)}function h(e){var t=e.displayedContentTypes;return!!(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(32))}function y(e){return(c||(c=o("I64"))).lt(e.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(2))}function C(e){var t=e.displayedContentTypes;return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),t)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),t)}function b(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(65536))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(131072))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(524288))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4294967296))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1048576))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2097152))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4194304))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2147483648))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8388608))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16777216))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1073741824))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8589934592))?!0:(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(262144))}var v=(s=n("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),S=s({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),R=s({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2}),L=s({IMAGE:0,VIDEO:1});l.text=(e=o("MAWMsgType")).MSG_TYPE.TEXT,l.image=e.MSG_TYPE.IMAGE,l.video=e.MSG_TYPE.VIDEO,l.ptt=e.MSG_TYPE.PTT,l.unsent=e.MSG_TYPE.REVOKED,l.gif=e.MSG_TYPE.GIF,l.bumpExistingMessage=e.MSG_TYPE.BUMP_EXISTING_MESSAGE,l.getDisplayedContentTypes=d,l.isMediaMsg=p,l.isMediaReplyAttachmentType=_,l.isReceiverFetchMsg=f,l.isReceiverFetchXMAMsg=g,l.isAdminMsg=h,l.isOptimistic=y,l.isXMAMsg=C,l.isPlaceholder=b,l.MAWRavenActionNotifType=v,l.MAWRavenMsgEphemeralMediaState=S,l.MAWRavenMsgEphemeralType=R,l.MAWRavenMsgMediaType=L}),98);
__d("MWXMAV2IsDataclassLiveLocationXMA",["MSGDataclassTypes.flow","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s(e)!=null}function s(e){if(e!=null){var t=e.content;if(!(t==null||(t==null?void 0:t.__typename)!=="XMSGXmaSingleContent")){var n=t.custom_template_data;if(!(n==null||(n==null?void 0:n.__typename)!=="XMSGXmaLocationTemplateData")){var r=n.location_metadata;if(!(r==null||(r==null?void 0:r.__typename)!=="XMSGXmaLiveLocationMetadata"))return r}}}}var u=1e3;function c(e,t){var n,a=r("justknobx")._("4207"),i=Math.floor(Date.now()/u)-a;return t!=null&&t<i&&((n=s(e))==null?void 0:n.session_state)===o("MSGDataclassTypes.flow").XmsgXmaLiveLocationSessionState.Started}l.isDataclassLiveLocationXMA=e,l.getLiveLocationMetadata=s,l.isExpiredLiveLocationStarted=c}),98);
__d("MAWParseCollapsibleIdFromXMADataClass",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)throw r("FBLogger")("messenger_web").mustfixThrow("xmaDataclass is missing or invalid");var t=o("MWXMAV2IsDataclassLiveLocationXMA").getLiveLocationMetadata(e);if(t!=null)return parseInt(t.session_id,10);if((e==null?void 0:e.layout_config)==null||typeof(e==null?void 0:e.layout_config.collapsible_id)!="number")throw r("FBLogger")("messenger_web").mustfixThrow("Layout config or collapsible_id is missing or invalid");return e.layout_config.collapsible_id}l.parseCollapsibleIdFromXMADataClass=e}),98);
__d("MWXMAV2XmaDataClass",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null)try{return JSON.parse(e)}catch(e){r("FBLogger")("messenger_web_sharing").mustfix("Error parsing xma dataclass")}}l.parseXmaDataClass=e}),98);
__d("MAWParseXMAUnsupportedMessageType",["MWXMAV2IsDataclassLiveLocationXMA","MWXMAV2XmaDataClass","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(n===void 0&&(n=!1),e==null)return null;if(n)return"paymentsTransactionMessage";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(o("MWXMAV2XmaDataClass").parseXmaDataClass(t))?"liveLocationMessage":"locationMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return"contactShareMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return"storyMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return"postMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return"messengerMemory";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return"rtcMessage";default:return null}}l.getXMAUnsupportedMessageType=e}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="Subprotocol",e.internalSpec={payload:[1,o("WAProtoConst").TYPES.BYTES],version:[2,o("WAProtoConst").TYPES.INT32]},l.SubprotocolSpec=e}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.name="BackupMessage",s.internalSpec={metadata:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,u],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}},u.name="BackupMessage$Metadata",u.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32],clientTimestampMs:[8,e.TYPES.INT64]},c.name="BackupMessage$Metadata$FrankingMetadata",c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]},l.BackupMessageSpec=s,l.BackupMessage$MetadataSpec=u,l.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={},s={};e.name="LocallyTransformedMessage",e.internalSpec={pollUpdateMessage:[1,o("WAProtoConst").TYPES.MESSAGE,s],__oneofs__:{content:["pollUpdateMessage"]}},s.name="LocallyTransformedMessage$PollUpdateAdminMessage",s.internalSpec={pollCreationMessageId:[1,o("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,o("WAProtoConst").TYPES.STRING]},l.LocallyTransformedMessageSpec=e,l.LocallyTransformedMessage$PollUpdateAdminMessageSpec=s}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u=(s=n("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2}),c=s({UNSET:0,CHANGED:1,REMOVED:2}),d=s({UNSET:0,PINNED:1,UNPINNED:2}),m=s({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2}),p=s({UNSET:0,ADDED:1,REMOVED:2}),_=s({UNSET:0,ADDED:1,REMOVED:2}),f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={},X={};f.name="MiTransportAdminMessage",f.internalSpec={skipBumpThread:[34,(e=o("WAProtoConst")).TYPES.BOOL],skipSnippetUpdate:[35,e.TYPES.BOOL],chatThemeChanged:[1,e.TYPES.MESSAGE,X],nicknameChanged:[2,e.TYPES.MESSAGE,Q],groupParticipantChanged:[3,e.TYPES.MESSAGE,K],groupAdminChanged:[4,e.TYPES.MESSAGE,j],groupNameChanged:[5,e.TYPES.MESSAGE,z],groupMembershipAddModeChanged:[6,e.TYPES.MESSAGE,G],messagePinned:[7,e.TYPES.MESSAGE,H],groupImageChanged:[8,e.TYPES.MESSAGE,V],quickReactionChanged:[9,e.TYPES.MESSAGE,U],linkCta:[10,e.TYPES.MESSAGE,W],iconChanged:[11,e.TYPES.MESSAGE,B],disappearingSettingChanged:[12,e.TYPES.MESSAGE,O],limitSharingChanged:[13,e.TYPES.MESSAGE,F],xmatDisappearingSetting:[14,e.TYPES.MESSAGE,A],xmatFriendRequestConfirmedEncrypted:[15,e.TYPES.MESSAGE,w],xmatInstantGameEncryptedDynamicCustomUpdate:[16,e.TYPES.MESSAGE,M],xmatLinkCta:[17,e.TYPES.MESSAGE,N],xmatMagicWords:[18,e.TYPES.MESSAGE,P],xmatMessagingLimitSharing:[19,e.TYPES.MESSAGE,$],xmatMessengerQrCodeScanned:[20,e.TYPES.MESSAGE,x],xmatMessengerSharedAlbumAddition:[21,e.TYPES.MESSAGE,D],xmatMessengerSharedAlbumContentRemoval:[22,e.TYPES.MESSAGE,I],xmatMessengerSharedAlbumDeletion:[23,e.TYPES.MESSAGE,k],xmatMessengerSharedAlbumRename:[24,e.TYPES.MESSAGE,E],xmatMessengerSharedAlbum:[25,e.TYPES.MESSAGE,L],xmatThemeColor:[26,e.TYPES.MESSAGE,R],xmatThreadIcon:[27,e.TYPES.MESSAGE,S],xmatThreadNickname:[28,e.TYPES.MESSAGE,v],xmatThreadQuickReaction:[29,e.TYPES.MESSAGE,b],xmatUpdatePayments:[30,e.TYPES.MESSAGE,C],xmatPinMessageV2:[31,e.TYPES.MESSAGE,y],xmatUnpinMessageV2:[32,e.TYPES.MESSAGE,h],xmatGenaiTaskAdd:[33,e.TYPES.MESSAGE,g],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged","xmatDisappearingSetting","xmatFriendRequestConfirmedEncrypted","xmatInstantGameEncryptedDynamicCustomUpdate","xmatLinkCta","xmatMagicWords","xmatMessagingLimitSharing","xmatMessengerQrCodeScanned","xmatMessengerSharedAlbumAddition","xmatMessengerSharedAlbumContentRemoval","xmatMessengerSharedAlbumDeletion","xmatMessengerSharedAlbumRename","xmatMessengerSharedAlbum","xmatThemeColor","xmatThreadIcon","xmatThreadNickname","xmatThreadQuickReaction","xmatUpdatePayments","xmatPinMessageV2","xmatUnpinMessageV2","xmatGenaiTaskAdd"]}},g.name="MiTransportAdminMessage$XmatGenAITaskAdd",g.internalSpec={taskId:[1,e.TYPES.INT64]},h.name="MiTransportAdminMessage$XmatUnpinMessageV2",h.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},y.name="MiTransportAdminMessage$XmatPinMessageV2",y.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},C.name="MiTransportAdminMessage$XmatUpdatePayments",C.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING],amount:[3,e.TYPES.FLOAT],transactionId:[4,e.TYPES.INT64],transactionStatus:[5,e.TYPES.INT32]},b.name="MiTransportAdminMessage$XmatThreadQuickReaction",b.internalSpec={threadQuickReactionEmoji:[1,e.TYPES.STRING],threadQuickReactionInstructionKeyId:[2,e.TYPES.STRING]},v.name="MiTransportAdminMessage$XmatThreadNickname",v.internalSpec={participantId:[1,e.TYPES.INT64],nickname:[2,e.TYPES.STRING]},S.name="MiTransportAdminMessage$XmatThreadIcon",S.internalSpec={threadIcon:[1,e.TYPES.STRING]},R.name="MiTransportAdminMessage$XmatThemeColor",R.internalSpec={themeId:[1,e.TYPES.STRING],themeColor:[2,e.TYPES.STRING],gradient:[3,e.FLAGS.REPEATED|e.TYPES.STRING],shouldShowIcon:[4,e.TYPES.BOOL],themeType:[5,e.TYPES.INT32],accessibilityLabel:[6,e.TYPES.STRING],themeNameWithSubtitle:[7,e.TYPES.STRING],themeEmoji:[8,e.TYPES.STRING]},L.name="MiTransportAdminMessage$XmatMessengerSharedAlbum",L.internalSpec={xmaDataclass:[1,e.TYPES.STRING]},E.name="MiTransportAdminMessage$XmatMessengerSharedAlbumRename",E.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],oldAlbumTitle:[2,e.TYPES.STRING],newAlbumTitle:[3,e.TYPES.STRING]},k.name="MiTransportAdminMessage$XmatMessengerSharedAlbumDeletion",k.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING]},I.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval",I.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],removedContentMap:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,T],removedContentCount:[3,e.TYPES.INT64],albumTitle:[4,e.TYPES.STRING]},T.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTuple",T.internalSpec={key:[1,e.TYPES.INT64],value:[2,e.TYPES.STRING]},D.name="MiTransportAdminMessage$XmatMessengerSharedAlbumAddition",D.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING],numOfAttachments:[3,e.TYPES.INT64],isAlbumCreation:[4,e.TYPES.BOOL]},x.name="MiTransportAdminMessage$XmatMessengerQRCodeScanned",x.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING]},$.name="MiTransportAdminMessage$XmatMessagingLimitSharing",$.internalSpec={senderName:[1,e.TYPES.STRING],senderId:[2,e.TYPES.STRING],limitSharingType:[3,e.TYPES.STRING]},P.name="MiTransportAdminMessage$XmatMagicWords",P.internalSpec={newMagicWordCount:[1,e.TYPES.INT64],removedMagicWordCount:[2,e.TYPES.INT64],magicWord:[3,e.TYPES.STRING],emojiEffect:[4,e.TYPES.STRING],isAllEdited:[5,e.TYPES.BOOL],themeName:[6,e.TYPES.STRING]},N.name="MiTransportAdminMessage$XmatLinkCTA",N.internalSpec={linkCtaXmatPrimaryText:[1,e.TYPES.STRING],linkCtaXmatCtaText:[2,e.TYPES.STRING],linkCtaXmatCtaUrl:[3,e.TYPES.STRING],linkCtaXmatCtaIosUrl:[4,e.TYPES.STRING],androidUri:[5,e.TYPES.STRING],asyncUrl:[6,e.TYPES.STRING],wwwIsAsyncUrl:[7,e.TYPES.BOOL],msiteEnabled:[8,e.TYPES.BOOL],hideUriInFallback:[9,e.TYPES.BOOL],showConfirmationDialog:[10,e.TYPES.BOOL],graphPayload:[11,e.TYPES.STRING],identifierName:[12,e.TYPES.STRING],threadId:[13,e.TYPES.STRING],hideCtaInFallback:[14,e.TYPES.BOOL],ctxAdConversationStarterInfo:[15,e.TYPES.STRING],fbmUri:[16,e.TYPES.STRING],initiatorUserId:[17,e.TYPES.STRING]},M.name="MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdate",M.internalSpec={senderName:[1,e.TYPES.STRING],muteManagementAdminTextType:[2,e.TYPES.STRING],gameName:[3,e.TYPES.STRING]},w.name="MiTransportAdminMessage$XmatFriendRequestConfirmedEncrypted",w.internalSpec={otherUserName:[1,e.TYPES.STRING],isTurnOnCohort:[2,e.TYPES.STRING],userWhoAcceptedFriendRequest:[3,e.TYPES.STRING]},A.name="MiTransportAdminMessage$XmatDisappearingSetting",A.internalSpec={disappearingSettingTime:[1,e.TYPES.INT64],oldDisappearingSettingTime:[2,e.TYPES.INT64],disappearingSettingActorFbid:[3,e.TYPES.INT64],newEphemeralityType:[4,e.TYPES.INT64],oldEphemeralityType:[5,e.TYPES.INT64]},F.name="MiTransportAdminMessage$LimitSharingChanged",F.internalSpec={sharingType:[1,e.TYPES.ENUM,u]},O.name="MiTransportAdminMessage$DisappearingSettingChanged",O.internalSpec={disappearingSettingDurationSeconds:[1,e.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,e.TYPES.INT32]},B.name="MiTransportAdminMessage$IconChanged",B.internalSpec={threadIcon:[1,e.TYPES.STRING]},W.name="MiTransportAdminMessage$LinkCta",W.internalSpec={ukOsaAdminText:[1,e.TYPES.MESSAGE,q],__oneofs__:{content:["ukOsaAdminText"]}},q.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText",q.internalSpec={initiatorUserId:[2,e.TYPES.STRING]},U.name="MiTransportAdminMessage$QuickReactionChanged",U.internalSpec={emojiName:[1,e.TYPES.STRING]},V.name="MiTransportAdminMessage$GroupImageChanged",V.internalSpec={action:[1,e.TYPES.ENUM,c]},H.name="MiTransportAdminMessage$MessagePinned",H.internalSpec={action:[1,e.TYPES.ENUM,d]},G.name="MiTransportAdminMessage$GroupMembershipAddModeChanged",G.internalSpec={mode:[1,e.TYPES.ENUM,m]},z.name="MiTransportAdminMessage$GroupNameChanged",z.internalSpec={groupName:[1,e.TYPES.STRING]},j.name="MiTransportAdminMessage$GroupAdminChanged",j.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,p]},K.name="MiTransportAdminMessage$GroupParticipantChanged",K.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,_]},Q.name="MiTransportAdminMessage$NicknameChanged",Q.internalSpec={targetUserId:[1,e.TYPES.STRING],nickname:[2,e.TYPES.STRING]},X.name="MiTransportAdminMessage$ChatThemeChanged",X.internalSpec={themeName:[1,e.TYPES.STRING],themeEmoji:[2,e.TYPES.STRING],themeType:[3,e.TYPES.INT32]},l.MiTransportAdminMessage$LimitSharingChanged$SharingType=u,l.MiTransportAdminMessage$GroupImageChanged$Action=c,l.MiTransportAdminMessage$MessagePinned$Action=d,l.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=m,l.MiTransportAdminMessage$GroupAdminChanged$Action=p,l.MiTransportAdminMessage$GroupParticipantChanged$Action=_,l.MiTransportAdminMessageSpec=f,l.MiTransportAdminMessage$XmatGenAITaskAddSpec=g,l.MiTransportAdminMessage$XmatUnpinMessageV2Spec=h,l.MiTransportAdminMessage$XmatPinMessageV2Spec=y,l.MiTransportAdminMessage$XmatUpdatePaymentsSpec=C,l.MiTransportAdminMessage$XmatThreadQuickReactionSpec=b,l.MiTransportAdminMessage$XmatThreadNicknameSpec=v,l.MiTransportAdminMessage$XmatThreadIconSpec=S,l.MiTransportAdminMessage$XmatThemeColorSpec=R,l.MiTransportAdminMessage$XmatMessengerSharedAlbumSpec=L,l.MiTransportAdminMessage$XmatMessengerSharedAlbumRenameSpec=E,l.MiTransportAdminMessage$XmatMessengerSharedAlbumDeletionSpec=k,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemovalSpec=I,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTupleSpec=T,l.MiTransportAdminMessage$XmatMessengerSharedAlbumAdditionSpec=D,l.MiTransportAdminMessage$XmatMessengerQRCodeScannedSpec=x,l.MiTransportAdminMessage$XmatMessagingLimitSharingSpec=$,l.MiTransportAdminMessage$XmatMagicWordsSpec=P,l.MiTransportAdminMessage$XmatLinkCTASpec=N,l.MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdateSpec=M,l.MiTransportAdminMessage$XmatFriendRequestConfirmedEncryptedSpec=w,l.MiTransportAdminMessage$XmatDisappearingSettingSpec=A,l.MiTransportAdminMessage$LimitSharingChangedSpec=F,l.MiTransportAdminMessage$DisappearingSettingChangedSpec=O,l.MiTransportAdminMessage$IconChangedSpec=B,l.MiTransportAdminMessage$LinkCtaSpec=W,l.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=q,l.MiTransportAdminMessage$QuickReactionChangedSpec=U,l.MiTransportAdminMessage$GroupImageChangedSpec=V,l.MiTransportAdminMessage$MessagePinnedSpec=H,l.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=G,l.MiTransportAdminMessage$GroupNameChangedSpec=z,l.MiTransportAdminMessage$GroupAdminChangedSpec=j,l.MiTransportAdminMessage$GroupParticipantChangedSpec=K,l.MiTransportAdminMessage$NicknameChangedSpec=Q,l.MiTransportAdminMessage$ChatThemeChangedSpec=X}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2}),u=n("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3}),c=n("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2}),d={},m={},p={},_={},f={};d.name="TransportEvent",d.internalSpec={placeholder:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],event:[2,e.TYPES.MESSAGE,m],__oneofs__:{content:["placeholder","event"]}},m.name="TransportEvent$Event",m.internalSpec={deviceChange:[1,e.TYPES.MESSAGE,_],icdcAlert:[2,e.TYPES.MESSAGE,p],__oneofs__:{event:["deviceChange","icdcAlert"]}},p.name="TransportEvent$Event$IcdcAlert",p.internalSpec={type:[1,e.TYPES.ENUM,s]},_.name="TransportEvent$Event$DeviceChange",_.internalSpec={type:[1,e.TYPES.ENUM,u],deviceName:[2,e.TYPES.STRING],devicePlatform:[3,e.TYPES.STRING],deviceModel:[4,e.TYPES.STRING]},f.name="TransportEvent$Placeholder",f.internalSpec={type:[1,e.TYPES.ENUM,c]},l.TransportEvent$Event$IcdcAlert$Type=s,l.TransportEvent$Event$DeviceChange$Type=u,l.TransportEvent$Placeholder$Type=c,l.TransportEventSpec=d,l.TransportEvent$EventSpec=m,l.TransportEvent$Event$IcdcAlertSpec=p,l.TransportEvent$Event$DeviceChangeSpec=_,l.TransportEvent$PlaceholderSpec=f}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={SMALL:1,MEDIUM:2,LARGE:3},c={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5},d={NONE:0,VIDEO:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={};m.name="ConsumerApplication",m.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,p],metadata:[2,e.TYPES.MESSAGE,f]},p.name="ConsumerApplication$Payload",p.internalSpec={content:[1,e.TYPES.MESSAGE,y],applicationData:[2,e.TYPES.MESSAGE,h],signal:[3,e.TYPES.MESSAGE,g],subProtocol:[4,e.TYPES.MESSAGE,_],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},_.name="ConsumerApplication$SubProtocolPayload",_.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},f.name="ConsumerApplication$Metadata",f.internalSpec={specialTextSize:[1,e.TYPES.ENUM,u]},g.name="ConsumerApplication$Signal",g.internalSpec={},h.name="ConsumerApplication$ApplicationData",h.internalSpec={revoke:[1,e.TYPES.MESSAGE,I],__oneofs__:{applicationContent:["revoke"]}},y.name="ConsumerApplication$Content",y.internalSpec={messageText:[1,e.TYPES.MESSAGE,s.MessageTextSpec],imageMessage:[2,e.TYPES.MESSAGE,W],contactMessage:[3,e.TYPES.MESSAGE,P],locationMessage:[4,e.TYPES.MESSAGE,w],extendedTextMessage:[5,e.TYPES.MESSAGE,M],statusTextMessage:[6,e.TYPES.MESSAGE,N],documentMessage:[7,e.TYPES.MESSAGE,F],audioMessage:[8,e.TYPES.MESSAGE,B],videoMessage:[9,e.TYPES.MESSAGE,O],contactsArrayMessage:[10,e.TYPES.MESSAGE,$],liveLocationMessage:[11,e.TYPES.MESSAGE,x],stickerMessage:[12,e.TYPES.MESSAGE,A],groupInviteMessage:[13,e.TYPES.MESSAGE,D],viewOnceMessage:[14,e.TYPES.MESSAGE,T],reactionMessage:[16,e.TYPES.MESSAGE,k],pollCreationMessage:[17,e.TYPES.MESSAGE,L],pollUpdateMessage:[18,e.TYPES.MESSAGE,R],editMessage:[19,e.TYPES.MESSAGE,C],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}},C.name="ConsumerApplication$EditMessage",C.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],message:[2,e.TYPES.MESSAGE,s.MessageTextSpec],timestampMs:[3,e.TYPES.INT64]},b.name="ConsumerApplication$PollAddOptionMessage",b.internalSpec={pollOption:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E]},v.name="ConsumerApplication$PollVoteMessage",v.internalSpec={selectedOptions:[1,e.FLAGS.REPEATED|e.TYPES.BYTES],senderTimestampMs:[2,e.TYPES.INT64]},S.name="ConsumerApplication$PollEncValue",S.internalSpec={encPayload:[1,e.TYPES.BYTES],encIv:[2,e.TYPES.BYTES]},R.name="ConsumerApplication$PollUpdateMessage",R.internalSpec={pollCreationMessageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],vote:[2,e.TYPES.MESSAGE,S],addOption:[3,e.TYPES.MESSAGE,S]},L.name="ConsumerApplication$PollCreationMessage",L.internalSpec={encKey:[1,e.TYPES.BYTES],name:[2,e.TYPES.STRING],options:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E],selectableOptionsCount:[4,e.TYPES.UINT32]},E.name="ConsumerApplication$Option",E.internalSpec={optionName:[1,e.TYPES.STRING]},k.name="ConsumerApplication$ReactionMessage",k.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],text:[2,e.TYPES.STRING],groupingKey:[3,e.TYPES.STRING],senderTimestampMs:[4,e.TYPES.INT64],reactionMetadataDataclassData:[5,e.TYPES.STRING],style:[6,e.TYPES.INT32]},I.name="ConsumerApplication$RevokeMessage",I.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},T.name="ConsumerApplication$ViewOnceMessage",T.internalSpec={imageMessage:[1,e.TYPES.MESSAGE,W],videoMessage:[2,e.TYPES.MESSAGE,O],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}},D.name="ConsumerApplication$GroupInviteMessage",D.internalSpec={groupJid:[1,e.TYPES.STRING],inviteCode:[2,e.TYPES.STRING],inviteExpiration:[3,e.TYPES.INT64],groupName:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],caption:[6,e.TYPES.MESSAGE,s.MessageTextSpec]},x.name="ConsumerApplication$LiveLocationMessage",x.internalSpec={location:[1,e.TYPES.MESSAGE,V],accuracyInMeters:[2,e.TYPES.UINT32],speedInMps:[3,e.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,e.TYPES.UINT32],caption:[5,e.TYPES.MESSAGE,s.MessageTextSpec],sequenceNumber:[6,e.TYPES.INT64],timeOffset:[7,e.TYPES.UINT32]},$.name="ConsumerApplication$ContactsArrayMessage",$.internalSpec={displayName:[1,e.TYPES.STRING],contacts:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,P]},P.name="ConsumerApplication$ContactMessage",P.internalSpec={contact:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},N.name="ConsumerApplication$StatusTextMesage",N.internalSpec={text:[1,e.TYPES.MESSAGE,M],textArgb:[6,e.TYPES.FIXED32],backgroundArgb:[7,e.TYPES.FIXED32],font:[8,e.TYPES.ENUM,c]},M.name="ConsumerApplication$ExtendedTextMessage",M.internalSpec={text:[1,e.TYPES.MESSAGE,s.MessageTextSpec],matchedText:[2,e.TYPES.STRING],canonicalUrl:[3,e.TYPES.STRING],description:[4,e.TYPES.STRING],title:[5,e.TYPES.STRING],thumbnail:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],previewType:[7,e.TYPES.ENUM,d]},w.name="ConsumerApplication$LocationMessage",w.internalSpec={location:[1,e.TYPES.MESSAGE,V],address:[2,e.TYPES.STRING]},A.name="ConsumerApplication$StickerMessage",A.internalSpec={sticker:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},F.name="ConsumerApplication$DocumentMessage",F.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],fileName:[2,e.TYPES.STRING]},O.name="ConsumerApplication$VideoMessage",O.internalSpec={video:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},B.name="ConsumerApplication$AudioMessage",B.internalSpec={audio:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],ptt:[2,e.TYPES.BOOL]},W.name="ConsumerApplication$ImageMessage",W.internalSpec={image:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},q.name="ConsumerApplication$InteractiveAnnotation",q.internalSpec={polygonVertices:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,U],location:[2,e.TYPES.MESSAGE,V],__oneofs__:{action:["location"]}},U.name="ConsumerApplication$Point",U.internalSpec={x:[1,e.TYPES.DOUBLE],y:[2,e.TYPES.DOUBLE]},V.name="ConsumerApplication$Location",V.internalSpec={degreesLatitude:[1,e.TYPES.DOUBLE],degreesLongitude:[2,e.TYPES.DOUBLE],name:[3,e.TYPES.STRING]},H.name="ConsumerApplication$MediaPayload",H.internalSpec={protocol:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},l.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=u,l.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=c,l.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=d,l.ConsumerApplicationSpec=m,l.ConsumerApplication$PayloadSpec=p,l.ConsumerApplication$SubProtocolPayloadSpec=_,l.ConsumerApplication$MetadataSpec=f,l.ConsumerApplication$SignalSpec=g,l.ConsumerApplication$ApplicationDataSpec=h,l.ConsumerApplication$ContentSpec=y,l.ConsumerApplication$EditMessageSpec=C,l.ConsumerApplication$PollAddOptionMessageSpec=b,l.ConsumerApplication$PollVoteMessageSpec=v,l.ConsumerApplication$PollEncValueSpec=S,l.ConsumerApplication$PollUpdateMessageSpec=R,l.ConsumerApplication$PollCreationMessageSpec=L,l.ConsumerApplication$OptionSpec=E,l.ConsumerApplication$ReactionMessageSpec=k,l.ConsumerApplication$RevokeMessageSpec=I,l.ConsumerApplication$ViewOnceMessageSpec=T,l.ConsumerApplication$GroupInviteMessageSpec=D,l.ConsumerApplication$LiveLocationMessageSpec=x,l.ConsumerApplication$ContactsArrayMessageSpec=$,l.ConsumerApplication$ContactMessageSpec=P,l.ConsumerApplication$StatusTextMesageSpec=N,l.ConsumerApplication$ExtendedTextMessageSpec=M,l.ConsumerApplication$LocationMessageSpec=w,l.ConsumerApplication$StickerMessageSpec=A,l.ConsumerApplication$DocumentMessageSpec=F,l.ConsumerApplication$VideoMessageSpec=O,l.ConsumerApplication$AudioMessageSpec=B,l.ConsumerApplication$ImageMessageSpec=W,l.ConsumerApplication$InteractiveAnnotationSpec=q,l.ConsumerApplication$PointSpec=U,l.ConsumerApplication$LocationSpec=V,l.ConsumerApplication$MediaPayloadSpec=H}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2},c={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={};d.name="MessageApplication",d.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,e.TYPES.MESSAGE,m]},m.name="MessageApplication$Metadata",m.internalSpec={forwardingScore:[5,e.TYPES.UINT32],isForwarded:[6,e.TYPES.BOOL],businessMetadata:[7,e.TYPES.MESSAGE,(s=o("WACommon.pb")).SubProtocolSpec],frankingKey:[8,e.TYPES.BYTES],frankingVersion:[9,e.TYPES.INT32],quotedMessage:[10,e.TYPES.MESSAGE,p],threadType:[11,e.TYPES.ENUM,u],readonlyMetadataDataclass:[12,e.TYPES.STRING],groupId:[13,e.TYPES.STRING],groupSize:[14,e.TYPES.UINT32],groupIndex:[15,e.TYPES.UINT32],botResponseId:[16,e.TYPES.STRING],collapsibleId:[17,e.TYPES.STRING],secondaryOtid:[18,e.TYPES.STRING],chatEphemeralSetting:[1,e.TYPES.MESSAGE,b],ephemeralSettingList:[2,e.TYPES.MESSAGE,_],ephemeralSharedSecret:[3,e.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}},p.name="MessageApplication$Metadata$QuotedMessage",p.internalSpec={stanzaId:[1,e.TYPES.STRING],remoteJid:[2,e.TYPES.STRING],participant:[3,e.TYPES.STRING],payload:[4,e.TYPES.MESSAGE,f]},_.name="MessageApplication$Metadata$EphemeralSettingMap",_.internalSpec={chatJid:[1,e.TYPES.STRING],ephemeralSetting:[2,e.TYPES.MESSAGE,b]},f.name="MessageApplication$Payload",f.internalSpec={coreContent:[1,e.TYPES.MESSAGE,C],signal:[2,e.TYPES.MESSAGE,y],applicationData:[3,e.TYPES.MESSAGE,h],subProtocol:[4,e.TYPES.MESSAGE,g],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}},g.name="MessageApplication$SubProtocolPayload",g.internalSpec={futureProof:[1,e.TYPES.ENUM,s.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],businessMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],paymentMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],multiDevice:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],voip:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],armadillo:[7,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}},h.name="MessageApplication$ApplicationData",h.internalSpec={},y.name="MessageApplication$Signal",y.internalSpec={},C.name="MessageApplication$Content",C.internalSpec={},b.name="MessageApplication$EphemeralSetting",b.internalSpec={ephemeralExpiration:[2,e.TYPES.UINT32],ephemeralSettingTimestamp:[3,e.TYPES.INT64],ephemeralityType:[5,e.TYPES.ENUM,c],isEphemeralSettingReset:[4,e.TYPES.BOOL]},l.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=u,l.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=c,l.MessageApplicationSpec=d,l.MessageApplication$MetadataSpec=m,l.MessageApplication$Metadata$QuotedMessageSpec=p,l.MessageApplication$Metadata$EphemeralSettingMapSpec=_,l.MessageApplication$PayloadSpec=f,l.MessageApplication$SubProtocolPayloadSpec=g,l.MessageApplication$ApplicationDataSpec=h,l.MessageApplication$SignalSpec=y,l.MessageApplication$ContentSpec=C,l.MessageApplication$EphemeralSettingSpec=b}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.payload;if(a==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(o("decodeProtobuf").getUnknownFields(e.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};var i=a.subProtocol;if(i==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(o("decodeProtobuf").getUnknownFields(i)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:i.futureProof};var l=[],s=(t=e.payload)==null||(t=t.subProtocol)==null?void 0:t.consumerMessage,u=(n=e.payload)==null||(n=n.subProtocol)==null?void 0:n.armadillo,c=(r=e.payload)==null||(r=r.subProtocol)==null?void 0:r.multiDevice;if(s!=null){if(s.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};l.push({payload:new Uint8Array(s.payload),type:"success",subprotocolType:"consumerMessage"})}if(u!=null){if(u.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};l.push({payload:new Uint8Array(u.payload),type:"success",subprotocolType:"armadillo"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};l.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"multiDevice"})}return l.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+l.length}:l[0]}l.parseMessageApplication=e}),98);
__d("lastx",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){var t=null;if(Array.isArray(e))e.length&&(t={value:e[e.length-1]});else for(var n of e)t=t||{},t.value=n;if(t)return t.value;s(0,1145)}l.default=e}),98);
__d("MultiKeyMap",["invariant","lastx"],(function(t,n,r,o,a,i,l,s){"use strict";var e=typeof WeakMap=="function",u=(function(){function t(){this.$1=this.$2(),this.$3=null}var n=t.prototype;return n.set=function(t,n){this.$4(t);for(var e=this.$1,r=0;r<t.length-1;r++){var o=t[r],a=this.$5(e,o).get(o);a==null&&(a=this.$2(),this.$5(e,o).set(o,a)),a.type==="map"||s(0,1732),e=a}var i=t[t.length-1];this.$5(e,i).set(i,{type:"value",value:n})},n.get=function(t){this.$4(t);var e=this.$6(t),n=e&&e.get(r("lastx")(t));return n==null||n.type!=="value"?void 0:n.value},n.delete=function(t){this.$4(t);var e=this.$6(t);return e?e.delete(r("lastx")(t)):!1},n.$5=function(t,n){return c(n)?t.cache:t.weakCache},n.$6=function(t){for(var e=this.$1,n=0;n<t.length-1;n++){var o,a=t[n];if(((o=e)==null?void 0:o.type)==="map")e=this.$5(e,a).get(a);else return}var i=r("lastx")(t),l=e&&this.$5(e,i);return l},n.$2=function(){return{type:"map",cache:new Map,weakCache:e?new WeakMap:new Map}},n.$4=function(t){if(this.$3==null&&(this.$3=t.length),this.$3!==t.length)throw new Error("MultiKeyMap called with different number of keys");if(t.length<1)throw new Error("MultiKeyMap called with empty array of keys")},t})();function c(e){var t=typeof e;return t==="bigint"||t==="boolean"||t==="number"||t==="string"||e==null}l.default=u}),98);
__d("memoizeWithArgsWeak",["MultiKeyMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t="");var n=new(r("MultiKeyMap"));return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=n.get(r);if(a!==void 0)return a;var i=e.apply(void 0,r);return n.set(r,i),i}}l.default=e}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}function s(e){return e instanceof ArrayBuffer?e:o("WAByteArray").uint8ArrayToBuffer(e)}var u=function(t){var e;this.kind="imageTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(e=t.image)==null?void 0:e.payload)},c=function(t){var e;this.kind="audioTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(e=t.audio)==null?void 0:e.payload),this.ptt=t.ptt},d=function(t){var e;this.kind="videoTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(e=t.video)==null?void 0:e.payload),this.caption=t.caption},m=function(t){var e;this.kind="documentTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(e=t.document)==null?void 0:e.payload),this.fileName=t.fileName},p=function(t){var e;this.kind="stickerTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(e=t.sticker)==null?void 0:e.payload)},_=function(t){var e=this,n;this.kind="extendedContentMessage",this.favicon=(n=r("memoize"))(function(){var t,n;return((t=e.payload)==null||(t=t.favicon)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.favicon)==null?void 0:n.payload)}),this.headerImage=n(function(){var t,n;return((t=e.payload)==null||(t=t.headerImage)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.headerImage)==null?void 0:n.payload)}),this.previews=n(function(){var t,n;return(t=(n=e.payload)==null||(n=n.previews)==null?void 0:n.map(function(e){return o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,e.payload)}))!=null?t:[]}),this.associatedMessage=n(function(){var t=e.payload.associatedMessage;return(t==null?void 0:t.payload)==null?null:new y(t.payload)}),this.payload=t},f=function(t){var e=this;this.stickerContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.stickerContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,n.payload)}),this.videoContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.videoContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,n.payload)}),this.payload=t},g=(function(){function e(e){this.kind="armadillo",this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloApplication.pb").ArmadilloSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.extendedContentMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},t.noteReply=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.noteReplyMessage;return t==null?null:new f(t)},t.paymentsTransactionMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null||(e=e.paymentsTransactionMessage)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},e})(),h=(function(){function e(e){var t=this,n;this.kind="consumerApplication",this.imageMessage=(n=r("memoize"))(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.imageMessage;if(n!=null)return new u(n)}),this.audioMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.audioMessage;if(n!=null)return new c(n)}),this.videoMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.videoMessage;if(n!=null)return new d(n)}),this.documentMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.documentMessage;if(n!=null)return new m(n)}),this.stickerMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.stickerMessage;if(n!=null)return new p(n)}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.attachmentMessage=function(){var e,t,n,r;return(e=(t=(n=(r=this.imageMessage())!=null?r:this.audioMessage())!=null?n:this.videoMessage())!=null?t:this.documentMessage())!=null?e:this.stickerMessage()},e})(),y=(function(){function e(e){var t=this;this.kind="messageApplication",this.subProtocol=r("memoize")(function(){var e=o("WAParseMessageApplication").parseMessageApplication(t.proto);if(e.payload!=null){var n=e.payload;switch(e.subprotocolType){case"consumerMessage":return new h(n);case"armadillo":return new g(n);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:e.subprotocolType}}}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e)}var t=e.prototype;return t.consumerMessage=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="consumerApplication"?null:e},t.armadillo=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="armadillo"?null:e},e})(),C=function(t){this.kind="transportEvent",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,t)},b=function(t){this.kind="locallyTransformedMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,t)},v=function(t){this.kind="adminMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,t)},S="SKIP_CACHE",R=(function(){function e(e,t){var n=this;this.payload=r("memoize")(function(){if(n.proto.encryptedTransportEvent!=null)return new C(r("nullthrows")(n.proto.encryptedTransportEvent.payload));if(n.proto.encryptedTransportLocallyTransformedMessage!=null)return new b(r("nullthrows")(n.proto.encryptedTransportLocallyTransformedMessage.payload));if(n.proto.encryptedTransportMessage!=null)return new y(r("nullthrows")(n.proto.encryptedTransportMessage));if(n.proto.miTransportAdminMessage!=null)return new v(r("nullthrows")(n.proto.miTransportAdminMessage.payload));throw r("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")}),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e)}var t=e.prototype;return t.encryptedTransportMessage=function(){var e=this.payload();if(e.kind==="messageApplication")return e},t.encryptedTransportEvent=function(){var e=this.payload();if(e.kind==="transportEvent")return e},t.locallyTransformedMessage=function(){var e=this.payload();if(e.kind==="locallyTransformedMessage")return e},t.adminMessage=function(){var e=this.payload();if(e.kind==="adminMessage")return e},e})();R.create=r("memoizeWithArgsWeak")(function(e){return new R(e,S)}),l.DeserializedImageMessage=u,l.DeserializedAudioMessage=c,l.DeserializedVideoMessage=d,l.DeserializedDocumentMessage=m,l.DeserializedStickerMessage=p,l.DeserializedExtendedContentMessage=_,l.DeserializedNoteReply=f,l.DeserializedArmadilloApplication=g,l.DeserializedConsumerApplication=h,l.DeserializedMessageApplication=y,l.DeserializedTransportEvent=C,l.DeserializedLocallyTransformedMessage=b,l.DeserializedAdminMessage=v,l.DeserializedBackupMessage=R}),98);
__d("RavenMessagingState",[],(function(t,n,r,o,a,i){var e=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});i.default=e}),66);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){switch(t){case o("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return r("RavenMessagingState").PERMANENT;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return r("RavenMessagingState").UNSEEN;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return r("RavenMessagingState").SEEN;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return r("RavenMessagingState").REPLAYED;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return r("RavenMessagingState").EXPIRED}},s=function(t){switch(t){case o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return r("EphemeralMediaViewMode").PERMANENT;case o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return r("EphemeralMediaViewMode").REPLAYABLE;case o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return r("EphemeralMediaViewMode").READ_ONCE}},u=function(t,n){return{ephemeralMediaState:n,ephemeralMediaViewMode:s(t)}};function c(t,n){switch(n){case o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?r("RavenMessagingState").SEEN:e(t);case o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?r("RavenMessagingState").SEEN:t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN?r("RavenMessagingState").REPLAYED:e(t);case o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return e(t)}}l.getEphemeralMediaState=e,l.getEphemeralMediaViewMode=s,l.deriveRavenSettings=u,l.getNextRavenMessageEphemeralState=c}),98);
__d("MAWVaultMaterialsStorage",["MAWVaultMaterials","MWFBLogger","Promise","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="mw_exchange_vm";function u(){var t=o("MAWVaultMaterials").generateNewVaultMaterials(),a="newly-generated";return new(e||(e=n("Promise")))(function(e){r("WebAsyncStorage").getOrSetItem(s,t,function(n,r){if(n!=null){var i=o("MWFBLogger").MWLogger();if(n instanceof Error)throw i.catching(n).mustfixThrow("Failed to store Vaulting Materials. %s",n.toString());i.mustfix("Failed to store Vaulting Materials.")}r!==null&&(t=r,a="storage"),e(o("MAWVaultMaterials").initializeVaultMaterials(t,a))})})}function c(){return o("MAWVaultMaterials").hasVaultBeenSetup()?(e||(e=n("Promise"))).resolve(o("MAWVaultMaterials").getVaultMaterials()):u()}l.setupVaultMaterials=c}),98);
__d("MAWWriteLimitSharingAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r;return t?(n=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,r=n===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED?[e]:[]):(n=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED,r=n===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED?[e]:[]),{adminMsgContent:r,adminType:n,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWritePinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_PINNED_MESSAGE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadHotlikeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e===o("MAWCurrentUser").getID(),r=n?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,a=[];return r===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE?a.push(t):a.push(e,t),{adminMsgContent:a,adminType:r,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadNicknameCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=o("MAWCurrentUser").getID(),a=e===r&&e!==t,i=t===r&&t!==e,l=t===e&&r===t,s=t===e&&r!==t,u;l&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:l&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:s&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:s&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:a&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:a&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:i&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:i&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME;var c=[];switch(u){case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:c.push(t,n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:c.push(e,n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:c.push(n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:c.push(t);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:c.push(e);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:c.push(e,t,n);break;default:break}return{adminMsgContent:c,adminType:u,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadPhotoCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MessengerThreadThemeType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({COLOR_GRADIENT:1,THEME:2,THIRD_PARTY:3,INTERACTIVE:4,IGD_CHANNEL_CUSTOMIZED_THEME:5,AI_AGENT:6,AI_GENERATED_THEME:7,AI_STUDIO_GENERATED_THEME:8,AI_INTERACTIVE_THEME:9,AI_INTERACTIVE_THEME_GENERATED:10,MSGR_CUSTOM_THEME:11,AI_SCROLLABLE_THEME:12}),l=e;i.default=l}),66);
__d("MAWWriteThreadThemeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser","MessengerThreadThemeType","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r){var a=e===o("MAWCurrentUser").getID(),i=u(a,r),l=[];return i===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME||i===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME?l.push(n):l.push(e,n),t!=null&&l.push(t),{adminMsgContent:l,adminType:i,version:1}}function u(t,n){if(n!=null)try{var a=r("MessengerThreadThemeType").cast(parseInt(n,10))===7;if(a)return t?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to convert theme type to integer: ",""])),t)}return t?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_THEME}l.getAdminMsgContent=s}),98);
__d("MAWWriteUKOSAAdminMsgContent",["MAWAdminMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("MAWAdminMsgType").ADMIN_MSG_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE,n=[e];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteUnpinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_UNPINNED_MESSAGE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MWChatEncryptedBackupsQPLEvents",["qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("qpl"))._(521476140,"378"),u=e._(521472542,"295"),c=e._(521484256,"3212"),d=e._(521473384,"31"),m=e._(521482085,"409"),p=e._(521485406,"272"),_=e._(521482763,"296"),f=e._(521484295,"1460"),g=e._(521482969,"1519"),h=e._(521479124,"1939"),y=e._(521474385,"263"),C=e._(521476098,"504"),b=e._(521482858,"1290"),v=e._(521473194,"1331"),S=e._(521471024,"2275");l.pinCodeChangeQplEvent=s,l.optOutQplEvent=u,l.resetBackupQplEvent=c,l.ebResetObserverQplEvent=d,l.backupSetupQplEvent=m,l.mobileOnboardingQplEvent=p,l.restoreQplEvent=_,l.restoreDeviceAuthQplEvent=f,l.messageRestoreQplEvent=g,l.restoreWithAutoRestoreConsentQplEvent=h,l.hsmFleetMigrationQplEvent=y,l.virtualDeviceRevocationQplEvent=C,l.onboardingAuthQplEvent=b,l.processBackupIdsQPLEvent=v,l.fetchBackupIdsQPLEvent=S}),98);
__d("MWXMAV2IsCollapsibleXMA",["MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;return!(e==null||((t=e.layout_config)==null?void 0:t.collapsible_id)==null&&!o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(e))}l.isCollapsibleXMA=e}),98);
__d("MpsAdminMsgToBridge",["FBLogger","MAWAckLevel","MAWAdminAddParticipantMsg","MAWAdminMsgHelpers","MAWAdminRemoveParticipantMsg","MAWAdminWriteGroupNameChangeAdminMsgContent","MAWEphemeralUtils","MAWJids","MAWWriteLimitSharingAdminMsgContent","MAWWritePinMessageAdminMsgContent","MAWWriteThreadHotlikeCustomizationAdminMsgContent","MAWWriteThreadNicknameCustomizationAdminMsgContent","MAWWriteThreadPhotoCustomizationAdminMsgContent","MAWWriteThreadThemeCustomizationAdminMsgContent","MAWWriteUKOSAAdminMsgContent","MAWWriteUnpinMessageAdminMsgContent","WAArmadilloMiTransportAdminMessage.pb","WAMsgType","err","getErrorSafe","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["$$unknownFieldCount","skipBumpThread","skipSnippetUpdate"],s=["type"],u=["type"],c=["type"],d=["type"],m=["type"],p=["type"],_=["type"],f=["type"],g=["type"],h=["type"],y=["type"],C=["type"],b=["type"],v=["type"],S=["type"],R=["type"],L=["type"],E=["type"],k=["type"],I=["type"];function T(e,t){return o("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.emojiName,"emojiName is null"))}function D(e,t){return o("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.threadIcon,"threadIcon is null"))}function x(e,t){var n;return o("MAWWriteThreadThemeCustomizationAdminMsgContent").getAdminMsgContent(e,t.themeEmoji,r("nullthrows")(t.themeName,"themeName is null"),""+((n=t.themeType)!=null?n:""))}function $(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED?o("MAWWritePinMessageAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNPINNED?o("MAWWriteUnpinMessageAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNSET||t.action===null||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function P(e,t){return o("MAWWriteThreadNicknameCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.targetUserId,"targetUserId is null"),r("nullthrows")(t.nickname,"nickname is null"))}function N(e){var t;return o("MAWWriteUKOSAAdminMsgContent").getAdminMsgContent(r("nullthrows")((t=e.ukOsaAdminText)==null?void 0:t.initiatorUserId,"initiatorUserId is null"))}function M(e,t){var n,r;return o("MAWEphemeralUtils").getEphemeralSettingChangeData(o("MAWJids").toUserJid(e),(n=t.disappearingSettingDurationSeconds)!=null?n:0,((r=t.oldDisappearingSettingDurationSeconds)!=null?r:0)===0,!1)}function w(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.CHANGED||t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.REMOVED?o("MAWWriteThreadPhotoCustomizationAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function A(e,t){return t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.ENABLED?o("MAWWriteLimitSharingAdminMsgContent").getAdminMsgContent(e,!0):t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.DISABLED?o("MAWWriteLimitSharingAdminMsgContent").getAdminMsgContent(e,!1):t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.UNSET||t.sharingType===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.sharingType)})()}function F(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.ADDED?o("MAWAdminAddParticipantMsg").createAddParticipantsAdminMessage(o("MAWJids").toUserJid(e),(t.targetUserId||[]).map(function(e){return o("MAWJids").toUserJid(e)})):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.REMOVED?o("MAWAdminRemoveParticipantMsg").createRemoveParticipantsAdminMessage(o("MAWJids").toUserJid(e),(t.targetUserId||[]).map(function(e){return o("MAWJids").toUserJid(e)})):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function O(e,t){return o("MAWAdminWriteGroupNameChangeAdminMsgContent").getAdminMsgContent(o("MAWJids").toUserJid(e),r("nullthrows")(t.groupName))}function B(e,t){var n,a;return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.ADDED?o("MAWAdminMsgHelpers").createParticipantPromoteAdminMessage(o("MAWJids").toUserJid(r("nullthrows")((n=t.targetUserId)==null?void 0:n[0])),o("MAWJids").toUserJid(e)):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.REMOVED?o("MAWAdminMsgHelpers").createParticipantDemoteAdminMessage(o("MAWJids").toUserJid(r("nullthrows")((a=t.targetUserId)==null?void 0:a[0])),o("MAWJids").toUserJid(e)):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function W(e,t){return t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.ADMINS_ONLY?o("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMessage(o("MAWJids").toUserJid(e),"admin_add"):t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.ALL_MEMBERS?o("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMessage(o("MAWJids").toUserJid(e),"all_member_add"):t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.UNSET||t.mode===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.mode)})()}function q(e,t){return M(e,{disappearingSettingDurationSeconds:t.disappearingSettingTime!=null?Number(t.disappearingSettingTime):0,oldDisappearingSettingDurationSeconds:t.oldDisappearingSettingTime!=null?Number(t.oldDisappearingSettingTime):0})}function U(e){return e.initiatorUserId!=null?N({ukOsaAdminText:{initiatorUserId:e.initiatorUserId}}):null}function V(e,t){return A(e,{sharingType:t.limitSharingType==="disabled"?o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.DISABLED:t.limitSharingType==="enabled"?o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.ENABLED:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.UNSET})}function H(e){return $(e,{action:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED})}function G(e){return $(e,{action:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNPINNED})}function z(e,t){return x(e,{themeEmoji:t.themeEmoji,themeName:t.themeNameWithSubtitle,themeType:t.themeType})}function j(e,t){return t.threadIcon!=null?D(e,{threadIcon:t.threadIcon}):null}function K(e,t){return t.participantId!=null&&t.nickname!=null?P(e,{nickname:t.nickname,targetUserId:""+t.participantId}):null}function Q(e,t){return t.threadQuickReactionEmoji!=null?T(e,{emojiName:t.threadQuickReactionEmoji}):null}function X(e){var t=Object.keys(e);if(t.length!==1)throw r("err")("Expected exactly one key");var n=t[0];return babelHelpers.extends({type:n},e[n])}function Y(t,n){var r=n.$$unknownFieldCount,o=n.skipBumpThread,a=n.skipSnippetUpdate,i=babelHelpers.objectWithoutPropertiesLoose(n,e),l=X(i);return(function(e){if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="quickReactionChanged"){var n=e.type,r=babelHelpers.objectWithoutPropertiesLoose(e,s);return T(t,r)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="iconChanged"){var o=e.type,a=babelHelpers.objectWithoutPropertiesLoose(e,u);return D(t,a)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="chatThemeChanged"){var i=e.type,l=babelHelpers.objectWithoutPropertiesLoose(e,c);return x(t,l)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="messagePinned"){var X=e.type,Y=babelHelpers.objectWithoutPropertiesLoose(e,d);return $(t,Y)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="nicknameChanged"){var J=e.type,Z=babelHelpers.objectWithoutPropertiesLoose(e,m);return P(t,Z)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="linkCta"){var ee=e.type,te=babelHelpers.objectWithoutPropertiesLoose(e,p);return N(te)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="disappearingSettingChanged"){var ne=e.type,re=babelHelpers.objectWithoutPropertiesLoose(e,_);return M(t,re)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupImageChanged"){var oe=e.type,ae=babelHelpers.objectWithoutPropertiesLoose(e,f);return w(t,ae)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="limitSharingChanged"){var ie=e.type,le=babelHelpers.objectWithoutPropertiesLoose(e,g);return A(t,le)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupParticipantChanged"){var se=e.type,ue=babelHelpers.objectWithoutPropertiesLoose(e,h);return F(t,ue)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupNameChanged"){var ce=e.type,de=babelHelpers.objectWithoutPropertiesLoose(e,y);return O(t,de)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupAdminChanged"){var me=e.type,pe=babelHelpers.objectWithoutPropertiesLoose(e,C);return B(t,pe)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupMembershipAddModeChanged"){var _e=e.type,fe=babelHelpers.objectWithoutPropertiesLoose(e,b);return W(t,fe)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatDisappearingSetting"){var ge=e.type,he=babelHelpers.objectWithoutPropertiesLoose(e,v);return q(t,he)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatLinkCta"){var ye=e.type,Ce=babelHelpers.objectWithoutPropertiesLoose(e,S);return U(Ce)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessagingLimitSharing"){var be=e.type,ve=babelHelpers.objectWithoutPropertiesLoose(e,R);return V(t,ve)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatPinMessageV2")return H(t);if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatUnpinMessageV2")return G(t);if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThemeColor"){var Se=e.type,Re=babelHelpers.objectWithoutPropertiesLoose(e,L);return z(t,Re)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadIcon"){var Le=e.type,Ee=babelHelpers.objectWithoutPropertiesLoose(e,E);return j(t,Ee)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadNickname"){var ke=e.type,Ie=babelHelpers.objectWithoutPropertiesLoose(e,k);return K(t,Ie)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadQuickReaction"){var Te=e.type,De=babelHelpers.objectWithoutPropertiesLoose(e,I);return Q(t,De)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatFriendRequestConfirmedEncrypted"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatInstantGameEncryptedDynamicCustomUpdate"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMagicWords"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerQrCodeScanned"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumAddition"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumContentRemoval"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumDeletion"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumRename"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbum"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatGenaiTaskAdd"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatUpdatePayments")return null;throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})(l)}function J(e){var t,n,a,i,l=(t=e.deserialize().adminMessage())==null?void 0:t.proto;if(l!=null){var s;try{s=Y(e.message.senderId,l)}catch(e){r("FBLogger")("mps").catching(r("getErrorSafe")(e)).warn("Failed to get admin message content")}var u={ack:o("MAWAckLevel").ACK.received,adminContent:(n=s)==null?void 0:n.adminMsgContent,adminType:(a=s)==null?void 0:a.adminType,adminVersion:(i=s)==null?void 0:i.version,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:u}}}l.getMessageContent=Y,l.adminMsgToBridgeMsg=J}),98);
__d("MpsToBridgeMessageId",["MAWJidUtils","MpsTypes","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWJidUtils").formatProtocolMsgIdFromExternalId(o("WAJids").unsafeCoerceToChatJid(e),o("WAStanzaUtils").toStanzaId(t))}function s(e){var t=e.lastIndexOf("."),n=e.substring(0,t),r=e.substring(t+1);return{messageId:o("MpsTypes").toMessageId(r),threadId:o("MpsTypes").toThreadId(n)}}l.mpsToBridgeMsgId=e,l.bridgeMsgIdToMps=s}),98);
__d("MpsBumpMessageToBridgeMsg",["MAWAckLevel","MAWMsgType","MpsToBridgeMessageId","MpsTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.deserialize().encryptedTransportMessage(),i=a==null||(t=a.armadillo())==null||(t=t.proto.payload)==null||(t=t.content)==null?void 0:t.bumpExistingMessage;if(i==null||((n=i.key)==null?void 0:n.id)==null||a==null)return null;var l=o("MpsTypes").toMessageId(i.key.id),s={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),replyContent:{isBumpMsg:!0,replyToMsgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(e.message.threadId,l),replyType:"MESSAGE"},replySourceId:(r=i.key)==null?void 0:r.id,sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return{kind:"bridgeMsg",value:s}}l.bumpMessageToBridgeMsg=e}),98);
__d("MpsEditToBridge",["LSMessageSendStatus","MAWDbEditMsgHistory","MAWMpsGating","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWDbEditMsgHistory").convertToEditMsgHistoryId64(o("MAWDbEditMsgHistory").unsafeCoerceToEditMsgHistoryId(Number(e.getExternalId()))),a=e.topLevelMetadata(),i={author:e.getAuthor(),editExternalId:o("WAStanzaUtils").toStanzaId(e.getExternalId()),editMsgHistoryId:n,editTs:e.getUnixTs(),msgContent:t,originalMsgExternalId:o("WAStanzaUtils").toStanzaId(a.getExternalId()),originalMsgId:a.getMsgId(),sendStatus:r("LSMessageSendStatus").SENDING_TO_SERVER,threadJid:e.getChatJid()};return{kind:"bridgeEditHistoryMsg",value:i}}function s(t){var n,r,a=(n=t.deserialize().encryptedTransportMessage())==null||(n=n.consumerMessage())==null||(n=n.payload)==null||(n=n.content)==null||(n=n.editMessage)==null?void 0:n.message;if(a!=null)return e(t,{commands:a==null?void 0:a.commands,content:((r=a==null?void 0:a.text)!=null?r:"")+(o("MAWMpsGating").isFullMpsEnabled()?" *":""),mentionedJids:a==null?void 0:a.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean)})}function u(t){var n,r,o,a,i=t.supplementals,l=t.topLevel;if(l.kind!=="bridgeMsg")return t;var s=i.map(function(e){return e.kind==="bridgeEditHistoryMsg"?e.value:null}).filter(Boolean).sort(function(e,t){return t.editTs-e.editTs});if(s.length===0)return t;i.push(e(t.message,{commands:l.value.commands&&[].concat(l.value.commands),content:(n=l.value.content)!=null?n:"",mentionedJids:l.value.mentionedJids&&[].concat(l.value.mentionedJids)}));var u=s[0].msgContent;return l.value=babelHelpers.extends({},l.value,{commands:(r=u.commands)!=null?r:l.value.commands,content:(o=u.content)!=null?o:l.value.content,editCount:s.length,mentionedJids:(a=u.mentionedJids)!=null?a:l.value.mentionedJids}),babelHelpers.extends({},t,{supplementals:i,topLevel:l})}l.editMessageToBridgeMsg=s,l.processEditedMessage=u}),98);
__d("MpsEphemeralMessageToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.supplementals,r=e.topLevel,a=(t=e.message.deserialize().encryptedTransportMessage())==null||(t=t.proto.metadata)==null||(t=t.chatEphemeralSetting)==null?void 0:t.ephemeralExpiration;if(a==null||a===0)return e;var i=o("WATimeUtils").castToUnixTime(e.message.getUnixTs()+a),l=o("WATimeUtils").cappedMillisecondsUntil(i);return l<=0?e:(r.kind==="bridgeMsg"&&(r.value=babelHelpers.extends({},r.value,{ephemeralDurationInSec:a})),e.supplementals.push({kind:"bridgeMsgsStartCountdown",value:{msgs:[{countdownTs:i,millisecondsUntilCountdownTs:l,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),babelHelpers.extends({},e,{supplementals:n,topLevel:r}))}l.processEphemeralMessage=e}),98);
__d("MpsForwardToBridge",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t,n,r,o,a,i=e.message,l=e.topLevel,s=i.deserialize().encryptedTransportMessage();return s==null||l.kind!=="bridgeMsg"||((t=s.proto.metadata)==null?void 0:t.isForwarded)!==!0||(l.value=babelHelpers.extends({},l.value,{forwardingScore:(n=(r=s.proto.metadata)==null?void 0:r.forwardingScore)!=null?n:0,isForwarded:(o=(a=s.proto.metadata)==null?void 0:a.isForwarded)!=null?o:!1,replyContent:{replyType:"FORWARD"}})),e}i.processForwarding=e}),66);
__d("MpsFutureproofToBridge",["MAWAckLevel","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.FUTUREPROOF};return{kind:"bridgeMsg",value:t}}l.futureproofBridgeMsg=e}),98);
__d("MpsLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("mps",t)};l.MpsLogger=e}),98);
__d("getMediaTypeFromConsumerMessage",["MAWEncodeMediaTransportProtocol","WAMediaTransport.pb","decodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a=((t=e.ancillary)==null?void 0:t.gifPlayback)===!0||((n=e.ancillary)==null?void 0:n.gifAttribution)!=null;if(r("gkx")("5398")){var i,l=(i=e.integral)==null||(i=i.transport)==null||(i=i.ancillary)==null?void 0:i.mimetype;if(a&&l===o("MAWEncodeMediaTransportProtocol").GIF_MIME_TYPE)return"gif"}else if(a)return"gif";return"video"}function s(t){var n,r=t==null||(n=t.payload)==null?void 0:n.content;if((r==null?void 0:r.audioMessage)!=null)return"ptt";if((r==null?void 0:r.videoMessage)!=null){var a,i=r==null||(a=r.videoMessage)==null||(a=a.video)==null?void 0:a.payload,l=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,i);return e(l)}if((r==null?void 0:r.documentMessage)!=null)return"document";if((r==null?void 0:r.stickerMessage)!=null)return"sticker";if((r==null?void 0:r.imageMessage)!=null)return"image";if((r==null?void 0:r.extendedContentMessage)!=null)return"xma-image"}l.getMediaTypeForVideo=e,l.getMediaTypeFromConsumerMessage=s}),98);
__d("MpsMediaToBridge",["FBLogger","MAWAckLevel","MAWAudioUtils","MAWDbMedia","MAWImageUtils","MAWMsgType","WAHashUtils","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("getMediaTypeFromConsumerMessage").getMediaTypeFromConsumerMessage(e.proto);if(t!=null)return s(t)}function s(e){return e==="ptt"?o("MAWMsgType").MSG_TYPE.PTT:e==="image"?o("MAWMsgType").MSG_TYPE.IMAGE:e==="video"?o("MAWMsgType").MSG_TYPE.VIDEO:e==="gif"?o("MAWMsgType").MSG_TYPE.GIF:e==="sticker"?o("MAWMsgType").MSG_TYPE.STICKER:e==="document"?o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:e==="xma-image"?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function u(t){var n,r,a,i=t.deserialize().encryptedTransportMessage(),l=i==null?void 0:i.consumerMessage();if(!(i==null||l==null)){var s=e(l);if(s!=null){var u={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),externalId:t.getExternalId(),forwardingScore:0,groupId:(n=i.proto.metadata)==null?void 0:n.groupId,groupIndex:(r=i.proto.metadata)==null?void 0:r.groupIndex,groupSize:(a=i.proto.metadata)==null?void 0:a.groupSize,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,msgId:t.getMsgId(),sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:s};return{kind:"bridgeMsg",value:u}}}}function c(e,t,n){var r,a,i={height:n==null||(r=n.transport)==null||(r=r.ancillary)==null||(r=r.thumbnail)==null?void 0:r.thumbnailHeight,width:n==null||(a=n.transport)==null||(a=a.ancillary)==null||(a=a.thumbnail)==null?void 0:a.thumbnailWidth},l={height:t==null?void 0:t.height,width:t==null?void 0:t.width};if(e==="Sticker"){var s;i=(s=o("MAWImageUtils")).boundHeightWidth(i.height,i.width,s.STICKER_THUMBNAIL_MAX_SIZE),l=s.boundHeightWidth(l.height,l.width,s.STICKER_THUMBNAIL_MAX_SIZE)}return{previewHeight:i.height,previewHeightLarge:l.height,previewWidth:i.width,previewWidthLarge:l.width}}function d(e,t,n,r){var a,i,l,s,u,d,m,p,_,f=e.ancillary,g=e.integral;if(!(f==null||g==null)&&!(f.receiverFetchId!=null||(g==null?void 0:g.receiverFetchId)!=null)){var h=n.getMsgId(),y=g==null||(a=g.transport)==null||(a=a.integral)==null?void 0:a.mediaKeyTimestamp,C=g==null||(i=g.transport)==null||(i=i.integral)==null?void 0:i.fileSha256,b=C!=null?o("WAHashUtils").toPlaintextHash(C):void 0,v=f.waveform!=null?o("MAWAudioUtils").serializeWaveform(f.waveform):void 0;return babelHelpers.extends({accessibilitySummaryText:f.accessibilityLabel,defaultFilename:r,duration:((l=f.seconds)!=null?l:0)*1e3,filenames:r!=null?(s={},s[h]=r,s):void 0,filesize:o("WALongInt").numberOrThrowIfTooLarge((u=g==null||(d=g.transport)==null||(d=d.ancillary)==null?void 0:d.fileLength)!=null?u:0),gifPlayback:f.gifPlayback,hasMedia:!0,hasPreviewMedia:(g==null||(m=g.transport)==null||(m=m.ancillary)==null?void 0:m.thumbnail)!=null},f.hdType!=null?{hdTypes:(p={},p[h]=f.hdType,p)}:{},{mediaId:o("MAWDbMedia").convertNumberToMediaId(0),mediaType:t,messagesSortOrderMs:(_={},_[h]=n.topLevel.timestampMs,_),msgIds:[h],offlineAttachmentId:b,plaintextHash:b},c(t,f,g),{sortOrderMs:y!=null?o("WATimeUtils").castLongIntToMillisTime(y):void 0,threadJid:n.getChatJid(),transportKey:"WhatsApp",ts:n.getUnixTs(),waveformData:v})}}function m(t,n){var o,a,i=(o=t.documentMessage())==null?void 0:o.fileName,l=(a=t.attachmentMessage())==null?void 0:a.payload;if(l!=null){var s=e(t);if(s==null){r("FBLogger")("mps").mustfix("media type is null for attachment message");return}return d(l,s,n,i)}}function p(e){var t,n=(t=e.message.deserialize().encryptedTransportMessage())==null?void 0:t.consumerMessage();if(n==null)return e;var r=m(n,e.message);return r==null||e.supplementals.push({kind:"bridgeMedia",value:r}),e}l.getMediaTypeForMessage=e,l.getMediaTypeForServerMediaType=s,l.mediaToBridge=u,l.getBridgeFromAttachmentTransport=d,l.getBridgeMediaFromConsumerMessage=m,l.processAttachment=p}),98);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(t,n,r,o,a,i,l){function e(e){if(e==null||e.text==null||e.mentions==null||e.mentions.length===0)return e;var t=e.text,n=[],r=[],a=0;for(var i of e.mentions){var l=i.offset,s=i.length,u=i.mentionedJid,c=i.mentionType;c!==o("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||l==null||s==null||u==null||(r.push(u+"@msgr"),n.push(t.substring(a,l)),n.push("@"+u+"@msgr"),a=l+s)}return r.length===0?e:(n.push(t.substring(a)),babelHelpers.extends({},e,{text:n.join(""),mentionedJid:r,mentions:[]}))}l.default=e}),98);
__d("mwv2MessageIsEmojiOnly",["EmojiRenderer","EmoticonRenderer","ReStoreVaulting"],(function(t,n,r,o,a,i,l){"use strict";var e=/^[ \r\n\s]*$/;function s(t,n){if(t==null)return!1;var r=o("ReStoreVaulting").maybeUnvault(t),a=o("EmojiRenderer").parse(r).map(function(e){return{length:e.length,offset:e.offset}}),i=n?o("EmoticonRenderer").parse(r).map(function(e){return{length:e.chars.length,offset:e.offset}}):[],l=a.concat(i);if(l.length===0)return!1;var s=l.sort(function(e,t){return e.offset-t.offset|0}),u={contents:0},c={contents:0},d=s.some(function(t){u.contents===t.offset?(u.contents=u.contents+t.length|0,c.contents=u.contents):c.contents=t.offset;var n=r.substring(u.contents,c.contents);return u.contents=t.offset+t.length|0,e.test(n)===!1}),m=u.contents!==r.length&&!e.test(r.substring(c.contents));return d?!1:!m}l.default=s}),98);
__d("MpsMessageTextToBridge",["MAWAckLevel","MAWMpsGating","MAWVault","WAJids","WAMsgType","maybeConvertMessageTextMentionsV2ToV1","mwv2MessageIsEmojiOnly"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l,s=e.deserialize().encryptedTransportMessage(),u=s==null?void 0:s.consumerMessage(),c=(u==null||(t=u.payload)==null||(t=t.content)==null?void 0:t.messageText)&&r("maybeConvertMessageTextMentionsV2ToV1")(u==null||(n=u.payload)==null||(n=n.content)==null?void 0:n.messageText);if(!(u==null||c==null||s==null)){var d=(a=c.text)!=null?a:"";o("MAWMpsGating").isFullMpsEnabled()&&!r("mwv2MessageIsEmojiOnly")(d,!0)&&(d+="*"),d=o("MAWVault").vault(d);var m={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),commands:c.commands,content:d,externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,mentionedJids:c.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,specialTextSize:(i=(l=u.metadata)==null?void 0:l.specialTextSize)!=null?i:void 0,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.TEXT};return{kind:"bridgeMsg",value:m}}}l.messageTextToBridgeMsg=e}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WAJids").createJidUtils({platform:"msgr"}),s=(function(){function t(e,t){this.message=e,this.topLevel=t}t.fromTopLevel=function(n){return new t(n,n)},t.fromSupplemental=function(n,a){var e,i=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(n.payload),l={messageId:n.messageId,payload:n.payload,senderId:r("nullthrows")((e=i.proto.metadata)==null?void 0:e.senderId),threadId:a.threadId,timestampMs:n.timestampMs};return new t(l,a)};var n=t.prototype;return n.getChatJid=function(){return o("WAJids").unsafeCoerceToChatJid(this.message.threadId)},n.getExternalId=function(){return this.message.messageId},n.getMsgId=function(){return o("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)},n.getSenderJid=function(){return e.toUserJid(this.message.senderId)},n.topLevelMetadata=function(){return t.fromTopLevel(this.topLevel)},n.isAuthorMe=function(){return o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())===this.message.senderId},n.getAuthor=function(){return this.isAuthorMe()?o("WAJids").AUTHOR_ME:this.getSenderJid()},n.getUnixTs=function(){return o("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)},n.deserialize=function(){return o("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)},t})();l.MpsMessageToBridgeWrapper=s}),98);
__d("MpsReceiverFetchInfoToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a,i,l=e.ancillary,s=e.integral,u=(n=s==null?void 0:s.receiverFetchId)!=null?n:l==null?void 0:l.receiverFetchId,c=s==null||(r=s.transport)==null||(r=r.ancillary)==null?void 0:r.mimetype;if(!(u==null||c==null)){var d=(a=l==null?void 0:l.width)!=null?a:0,m=(i=l==null?void 0:l.height)!=null?i:0;return{accessibilitySummaryText:l==null?void 0:l.accessibilityLabel,mimetype:c,msgId:t.getMsgId(),previewHeight:m,previewWidth:d,receiverFetchId:u,sortOrderMs:o("WATimeUtils").castLongIntToMillisTime(t.message.timestampMs),threadJid:t.getChatJid(),transportKey:"WhatsApp",type:"sticker"}}}function s(t,n){var r,o=(r=t.stickerMessage())==null?void 0:r.payload;if(o!=null)return e(o,n)}function u(e){var t,n=(t=e.message.deserialize().encryptedTransportMessage())==null?void 0:t.consumerMessage();if(n==null)return e;var r=s(n,e.message);return r==null||e.supplementals.push({kind:"bridgeReceiverFetchInfo",value:r}),e}l.getReceiverFetchInfoForAttachmentTransport=e,l.getReceiverFetchInfoFromConsumerMessage=s,l.processReceiverFetchInfo=u}),98);
__d("WAMedia",[],(function(t,n,r,o,a,i){"use strict";var e="Image",l="Video",s="Ptt",u="Gif",c="Sticker",d="DocumentFile",m={IMAGE:e,VIDEO:l,PTT:s,GIF:u,STICKER:c,DOCUMENT_FILE:d};i.IMAGE=e,i.VIDEO=l,i.PTT=s,i.GIF=u,i.STICKER=c,i.DOCUMENT_FILE=d,i.MEDIA_TYPE=m}),66);
__d("MpsXmaToBridge",["MAWAckLevel","MAWBridgeXMA","MAWDbMedia","MAWDbXMA","MAWParseCollapsibleIdFromXMADataClass","MAWXMAUtils","MWXMAV2IsCollapsibleXMA","MWXMAV2XmaDataClass","MpsMediaToBridge","MpsReceiverFetchInfoToBridge","WAArmadilloXMA.pb","WAHashUtils","WAJids","WALongInt","WAMedia","WATimeUtils","maybeConvertMessageTextMentionsV2ToV1","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["actionContentBlob"];function s(e){var t,n,o;if(((t=(n=e.payload.messageText)==null?void 0:n.length)!=null?t:0)>0)return r("maybeConvertMessageTextMentionsV2ToV1")({commands:e.payload.commands,mentionedJid:e.payload.mentionedJid,mentions:e.payload.mentions,text:e.payload.messageText});var a=(o=e.associatedMessage())==null||(o=o.consumerMessage())==null||(o=o.payload)==null||(o=o.content)==null?void 0:o.messageText;if(a!=null&&a.text!=null)return r("maybeConvertMessageTextMentionsV2ToV1")(a)}function u(e){if(e!=null){var t=o("WATimeUtils").castLongIntToUnixTime(e);if(t!=null){var n=o("WATimeUtils").cappedMillisecondsUntil(t);if(n!=null){var r=n<=0;return{countdownTs:t,isExpiredXmaMsg:r,millisecondsUntilCountdownTs:n}}}}}function c(e){var t,n=e.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage();if(!(n==null||r==null||o("MAWXMAUtils").isXMAStoryReply(r.payload.targetType))){var a,i=o("MWXMAV2XmaDataClass").parseXmaDataClass(r.payload.xmaDataclass);o("MWXMAV2IsCollapsibleXMA").isCollapsibleXMA(i)&&(a=o("MAWParseCollapsibleIdFromXMADataClass").parseCollapsibleIdFromXMADataClass(i));var l=s(r),c=u(r==null?void 0:r.payload.targetExpiringAtSec),d=babelHelpers.extends({ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid()},a!=null?{collapsibleId:a}:{},{commands:l==null?void 0:l.commands,content:l==null?void 0:l.text,externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isExpiredXmaMsg:c==null?void 0:c.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(r.payload.targetType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(r.payload.targetType),isForwarded:!1,isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(r.payload.targetType),isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(r.payload.targetType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(r.payload.targetType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(r.payload.targetType),isPostPrivateReply:o("MAWXMAUtils").isXMAPostPrivateReply(r.payload.targetType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(r.payload.targetType),isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(r.payload.targetType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(r.payload.targetType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(r.payload.targetType),isStoryShare:o("MAWXMAUtils").isXMAStoryShare(r.payload.targetType),mentionedJids:l==null?void 0:l.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:"XMA",xmaMessageType:r.payload.targetType});return{kind:"bridgeMsg",value:d}}}function d(t){var n,a,i,l,s,u,c,d,m,p,_=t.message,f=t.topLevel;if(f.value.type_!=="XMA")return t;var g=_.deserialize().encryptedTransportMessage(),h=g==null||(n=g.armadillo())==null?void 0:n.extendedContentMessage();if(g==null||h==null)return t;var y=h.payload.ctas.map(function(t){var n=t.actionContentBlob,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return r}),C=r("nullthrows")(h.payload.targetType),b=C===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT,v=b?[null,h.previews().at(0)]:[h.previews().at(0),h.favicon()],S=v[0],R=v[1],L=S==null||(a=S.integral)==null||(a=a.transport)==null||(a=a.integral)==null?void 0:a.fileSha256,E=L!=null?o("WAHashUtils").toPlaintextHash(L):void 0,k=R==null||(i=R.integral)==null||(i=i.transport)==null||(i=i.integral)==null?void 0:i.fileSha256,I=k!=null?o("WAHashUtils").toPlaintextHash(k):void 0,T=(l=h.headerImage())==null||(l=l.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.fileSha256,D=T!=null?o("WAHashUtils").toPlaintextHash(T):void 0,x=o("WAMedia").MEDIA_TYPE.IMAGE,$=o("MAWBridgeXMA").mediaTypeToMimeType(x),P={author:_.getAuthor(),contentRef:h.payload.contentRef,ctas:y.slice(1),defaultCTA:y.at(0),defaultPreviewMediaId:o("MAWDbMedia").convertNumberToMediaId(0),defaultPreviewMediaPlaintextHash:E,duration:null,faviconMediaId:o("MAWDbMedia").convertNumberToMediaId(0),faviconPlaintextHash:I,filesize:o("WALongInt").numberOrThrowIfTooLarge((s=S==null||(u=S.integral)==null||(u=u.transport)==null||(u=u.ancillary)==null?void 0:u.fileLength)!=null?s:0),hasMedia:E!=null,hasXmaFaviconMedia:k!=null,hasXmaHeaderMedia:T!=null,headerMediaId:o("MAWDbMedia").convertNumberToMediaId(0),headerMediaPlaintextHash:D,headerTitle:h.payload.headerTitle,maxSubtitleNumOfLines:h.payload.maxSubtitleNumOfLines,maxTitleNumOfLines:h.payload.maxTitleNumOfLines,mediaType:x,msgId:t.message.getMsgId(),offlineAttachmentId:E,overlayIconGlyph:h.payload.overlayIconGlyph,overlayTitle:h.payload.overlayTitle,playableUrlMimeType:$,previewHeight:S==null||(c=S.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.thumbnailHeight,previewHeightLarge:S==null||(d=S.ancillary)==null?void 0:d.height,previewUrlMimeType:$,previewWidth:S==null||(m=S.integral)==null||(m=m.transport)==null||(m=m.ancillary)==null||(m=m.thumbnail)==null?void 0:m.thumbnailWidth,previewWidthLarge:S==null||(p=S.ancillary)==null?void 0:p.width,subtitleText:h.payload.subtitleText,targetId:h.payload.targetId,targetType:C,targetUsername:h.payload.targetUsername,threadJid:t.message.getChatJid(),titleText:h.payload.titleText,ts:t.message.getUnixTs(),xmaDataclass:h.payload.xmaDataclass,xmaId:o("MAWDbXMA").convertNumberToXMAId(0),xmaLayoutType:h.payload.xmaLayoutType};return t.supplementals.push({kind:"bridgeXMA",value:P}),t}function m(e){var t,n,r=e.message.deserialize().encryptedTransportMessage(),a=r==null||(t=r.armadillo())==null?void 0:t.extendedContentMessage(),i=a==null||(n=a.associatedMessage())==null?void 0:n.consumerMessage();if(i==null)return e;var l=o("MpsMediaToBridge").getBridgeMediaFromConsumerMessage(i,e.message);l!=null&&e.supplementals.push({kind:"bridgeMedia",value:l});var s=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoFromConsumerMessage(i,e.message);return s!=null&&e.supplementals.push({kind:"bridgeReceiverFetchInfo",value:s}),e}function p(e){var t,n=e.message.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage(),o=u(r==null?void 0:r.payload.targetExpiringAtSec);if(o==null)return e;var a=o.countdownTs,i=o.millisecondsUntilCountdownTs;return e.supplementals.push({kind:"bridgeXMAStartCountdown",value:{msgs:[{countdownTs:a,millisecondsUntilCountdownTs:i,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),e}l.computeXmaContent=s,l.getExpiredXMAParams=u,l.xmaToBridge=c,l.processXmaAttachment=d,l.processXmaAssociatedMessageAttachment=m,l.processXmaExpiration=p}),98);
__d("MpsNoteReplyToBridge",["MAWAckLevel","MAWVault","MpsMediaToBridge","MpsReceiverFetchInfoToBridge","MpsXmaToBridge","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e==null?void 0:e.videoContent(),n=e==null?void 0:e.stickerContent(),a=t!=null?t:n;if(a!=null){var i=t!=null?o("getMediaTypeFromConsumerMessage").getMediaTypeForVideo(t):void 0,l=n!=null?"sticker":void 0,s=r("nullthrows")(i!=null?i:l);return o("MpsMediaToBridge").getMediaTypeForServerMediaType(s)}}function s(t){var n,r,a=t.deserialize().encryptedTransportMessage(),i=a==null||(n=a.armadillo())==null?void 0:n.noteReply();if(!(a==null||i==null)){var l=i.payload,s=l.noteText,u=l.noteTimestampMs,c=l.textContent,d=i.payload.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(i.payload.noteTimestampMs)):void 0,m=o("MpsXmaToBridge").getExpiredXMAParams(d),p=t.message.senderId,_=e(i),f={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),content:(c==null?void 0:c.text)==null?void 0:o("MAWVault").vault(c.text),editCount:0,externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isExpiredMsg:!1,isForwarded:!1,isNoteReply:!0,msgId:t.getMsgId(),replyContent:{noteContent:m!=null&&m.isExpiredXmaMsg?void 0:o("MAWVault").vault((r=s==null?void 0:s.text)!=null?r:""),replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(o("WALongInt").numberOrThrowIfTooLarge(u)):void 0,replyToMsgId:t.getMsgId(),replyToUserId:p,replyType:"LIGHTWEIGHT_STATUS"},sender:p,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:_!=null?_:"Text"};return{kind:"bridgeMsg",value:f}}}function u(e){var t,n=e.message.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.noteReplyMessage;if(n==null||r==null)return e;var a=r.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(r.noteTimestampMs)):void 0,i=o("MpsXmaToBridge").getExpiredXMAParams(a);if(i==null)return e;var l=i.countdownTs,s=i.millisecondsUntilCountdownTs;return e.supplementals.push({kind:"bridgeNoteReplyStartCountdown",value:{msgs:[{countdownTs:l,millisecondsUntilCountdownTs:s,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),e}function c(t){var n,r=t.message,a=r.deserialize().encryptedTransportMessage(),i=a==null||(n=a.armadillo())==null?void 0:n.noteReply(),l=i==null?void 0:i.videoContent(),s=i==null?void 0:i.stickerContent(),u=l!=null?l:s,c=e(i);if(u==null||c==null)return t;var d=o("MpsMediaToBridge").getBridgeFromAttachmentTransport(u,c,r);if(d!=null&&t.supplementals.push({kind:"bridgeMedia",value:d}),s!=null){var m=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoForAttachmentTransport(s,r);m!=null&&t.supplementals.push({kind:"bridgeReceiverFetchInfo",value:m})}return t}l.noteReplyToBridge=s,l.processNoteReply=u,l.processNoteReplyAttachment=c}),98);
__d("MpsRavenToBridge",["EphemeralMediaViewMode","FBLogger","MAWAckLevel","MAWDbMedia","MAWProtobufDeserializers","RavenMessagingState","WAArmadilloApplication.pb","WAHashUtils","WAMsgType","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content,o=(n=r==null?void 0:r.ravenMessage)!=null?n:r==null?void 0:r.ravenMessageMsgr;return!!o}function s(t){if(e(t)){var n={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),content:"",externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,msgId:t.getMsgId(),sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.RAVEN};return{kind:"bridgeMsg",value:n}}}function u(e){var t,n,a,i=e.message,l=(t=i.deserialize().encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content,s=(n=l==null?void 0:l.ravenMessage)!=null?n:l==null?void 0:l.ravenMessageMsgr;if(s==null)return e;var u,c;e.supplementalMessages.forEach(function(e){var t,n,r=(t=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(e.payload).encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content;u=(n=r==null?void 0:r.ravenMessage)!=null?n:r==null?void 0:r.ravenMessageMsgr,c=r==null?void 0:r.ravenActionNotifMessage});var d=(typeof u=="object"&&u!==null||typeof u=="function")&&(typeof u.videoMessage=="object"&&u.videoMessage!==null||typeof u.videoMessage=="function")?o("WAMsgType").MSG_TYPE.VIDEO:(typeof u=="object"&&u!==null||typeof u=="function")&&(typeof u.imageMessage=="object"&&u.imageMessage!==null||typeof u.imageMessage=="function")?o("WAMsgType").MSG_TYPE.IMAGE:null;if(d==null&&c==null)return r("FBLogger")("mps").mustfix("Unsupported Raven type"),e;var m=e.message.getMsgId(),p=s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.VIEW_ONCE?r("EphemeralMediaViewMode").READ_ONCE:s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.ALLOW_REPLAY?r("EphemeralMediaViewMode").REPLAYABLE:s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.KEEP_IN_CHAT?r("EphemeralMediaViewMode").PERMANENT:s.ephemeralType===void 0?void 0:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s.ephemeralType)})(),_={duration:null,ephemeralMediaState:c==null?r("RavenMessagingState").UNSEEN:r("RavenMessagingState").SEEN,ephemeralMediaViewMode:p,filesize:100,hasMedia:!1,hasPreviewMedia:!1,mediaId:o("MAWDbMedia").convertNumberToMediaId(0),mediaType:d||o("WAMsgType").MSG_TYPE.IMAGE,messagesSortOrderMs:(a={},a[m]=e.message.topLevel.timestampMs,a),msgIds:[e.message.getMsgId()],plaintextHash:o("WAHashUtils").stringToPlaintextHash("aaa"),previewHeight:1,previewHeightLarge:1,previewWidth:1,previewWidthLarge:1,sortOrderMs:o("WATimeUtils").castLongIntToMillisTime(e.message.topLevel.timestampMs),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()};return e.supplementals.push({kind:"bridgeMedia",value:_}),e}l.isRavenMsg=e,l.ravenToBridge=s,l.processRavenAttachment=u}),98);
__d("MpsReactionToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null||(t=t.consumerMessage())==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.reactionMessage;if(r!=null){var a=r.senderTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WATimeUtils").castLongIntToMillisTime(r.senderTimestampMs)):e.getUnixTs(),i=(n=r.text)!=null?n:"",l=i===""?{reaction:{actorId:e.message.senderId,chatJid:e.getChatJid(),messageId:e.topLevelMetadata().getMsgId()},type:"delete"}:{reaction:{actorId:e.message.senderId,chatJid:e.getChatJid(),messageId:e.topLevelMetadata().getMsgId(),reaction:i,ts:a},type:"upsert"};return{kind:"bridgeReactionAction",value:l}}}l.reactionMessageToBridgeMsg=e}),98);
__d("MpsReplyToBridge",["MpsToBridgeMessageId","MpsTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.message,r=e.topLevel,a=n.deserialize().encryptedTransportMessage();if(r.kind!=="bridgeMsg"||a==null)return e;var i=(t=a.proto.metadata)==null?void 0:t.quotedMessage;if(i==null||i.stanzaId==null||r.value.replyContent!=null)return e;var l=o("MpsTypes").toMessageId(i.stanzaId);return r.value=babelHelpers.extends({},r.value,{replyContent:{isBumpMsg:!1,replyToMsgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(n.message.threadId,l),replyType:"MESSAGE"}}),babelHelpers.extends({},e,{topLevel:r})}l.processReplyMessage=e}),98);
__d("MpsRevokeMessageToBridgeMsg",["MAWAckLevel","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.deserialize().encryptedTransportMessage(),r=n==null||(t=n.consumerMessage())==null||(t=t.payload)==null||(t=t.applicationData)==null?void 0:t.revoke;if(!(n==null||r==null))return{kind:"bridgeMsg",value:{ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.REVOKED}}}l.revokeMessageToBridgeMsg=e}),98);
__d("MpsScreenshotActionToBridgeMsg",["MAWAckLevel","MAWEphemeralUtils","WAArmadilloApplication.pb","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=e.deserialize().encryptedTransportMessage(),a=r==null||(t=r.armadillo())==null||(t=t.proto.payload)==null||(t=t.content)==null?void 0:t.screenshotAction;if(!(a==null||r==null)){var i=o("MAWEphemeralUtils").getEphemeralScreenshotActionData((n=a.screenshotType)!=null?n:o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE,e.getSenderJid(),e.isAuthorMe()),l={ack:o("MAWAckLevel").ACK.received,adminContent:i.ephemeralScreenshotActionContent,adminType:i.ephemeralScreenshotActionType,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:l}}}l.screenshotActionToBridgeMsg=e}),98);
__d("WAParseReadOnlyMetadataDataclassUtils",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if((e==null?void 0:e.readonlyMetadataDataclass)!=null)try{var t=JSON.parse(e==null?void 0:e.readonlyMetadataDataclass);return t}catch(e){throw r("err")("Failed to parse readonly metadata dataclass JSON")}return null}function s(t){var n,r=e(t);return(r==null||(n=r.power_up)==null?void 0:n.power_up_style)!=null}function u(t){var n,r=e(t);return(r==null||(n=r.note_metadata)==null?void 0:n.message_type)==="MENTION"}l.isPowerUp=s,l.isNoteMention=u}),98);
__d("MpsUnsupportedMessagesToBridge",["MAWAckLevel","MAWParseXMAFBConfig","MAWParseXMAUnsupportedMessageType","WACommon.pb","WAMsgType","WAParseReadOnlyMetadataDataclassUtils","gkx","justknobx","maybeConvertMessageTextMentionsV2ToV1"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l,s,u,c=e.deserialize().encryptedTransportMessage();if(c!=null){var d=c==null?void 0:c.consumerMessage(),m={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.FUTUREPROOF},p=(d==null||(t=d.payload)==null||(t=t.content)==null?void 0:t.messageText)&&r("maybeConvertMessageTextMentionsV2ToV1")(d==null||(n=d.payload)==null||(n=n.content)==null?void 0:n.messageText);if(p!=null){var _,f=((_=p.commands)==null?void 0:_.some(function(e){return e.commandType===o("WACommon.pb").COMMAND_COMMAND_TYPE.AI}))===!0;if(f&&!r("gkx")("12661"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"metaAiMessage"})}}var g=c==null||(a=c.armadillo())==null?void 0:a.paymentsTransactionMessage(),h=g!=null?g:c==null||(i=c.armadillo())==null?void 0:i.extendedContentMessage();if(h!=null){var y=h.payload,C=y.targetType,b=y.xmaDataclass;if(C==null||!o("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:C,xmaDataclass:b})){var v=g!=null;return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:o("MAWParseXMAUnsupportedMessageType").getXMAUnsupportedMessageType(C,b,v)})}}}var S=d==null||(l=d.stickerMessage())==null?void 0:l.payload;if(S!=null){var R,L,E=((R=S.integral)==null?void 0:R.receiverFetchId)!=null||((L=S.ancillary)==null?void 0:L.receiverFetchId)!=null;if(E&&!r("justknobx")._("3677"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"stickerReceiverFetchMessage"})}}var k=d==null||(s=d.documentMessage())==null?void 0:s.payload;if(k!=null&&r("gkx")("23924"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m)};if(o("WAParseReadOnlyMetadataDataclassUtils").isNoteMention(c.proto.metadata))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"noteMention"})};var I=d==null||(u=d.payload)==null||(u=u.content)==null?void 0:u.pollCreationMessage;if(I!=null)return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"pollCreationMessage"})}}}l.unsupportedMessagesBridgeMsg=e}),98);
__d("MpsWaAdminMsgToBridge",["MAWAckLevel","MAWGetUserDeviceChangeAdminType","MAWJids","MAWLocalizationType","MAWUserJidWrapper","WAArmadilloTransportEvent.pb","WAJids","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.deserialize(),i=(t=a.encryptedTransportEvent())==null?void 0:t.proto.event;if(i){var l=i.deviceChange,s=i.icdcAlert;if(((n=a.proto.metadata)==null?void 0:n.senderId)!=null){var u=o("WAJids").unsafeCoerceToUserJid((r=a.proto.metadata)==null?void 0:r.senderId),c=o("MAWJids").toUserJid(u),d=c===o("MAWUserJidWrapper").getMyUserJid()?[]:[o("WAJids").userIdFromJid(c)];if(s)return{kind:"bridgeMsg",value:{ack:o("MAWAckLevel").ACK.received,adminContent:d,adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ICDC_ALERT}};if(l){var m,p,_=(typeof l=="object"&&l!==null||typeof l=="function")&&"type"in l&&l.type===o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.ADDED?"add":(typeof l=="object"&&l!==null||typeof l=="function")&&"type"in l&&l.type===o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REMOVED?"remove":typeof l=="object"&&l!==null||typeof l=="function"?"update":(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+l)})();if(((m=a.proto.metadata)==null?void 0:m.senderId)==null)return;var f=o("WAJids").unsafeCoerceToUserJid((p=a.proto.metadata)==null?void 0:p.senderId),g=o("MAWJids").toUserJid(f),h=o("MAWGetUserDeviceChangeAdminType").getUserDeviceAdminType(_,g===o("MAWUserJidWrapper").getMyUserJid()),y={ack:o("MAWAckLevel").ACK.received,adminContent:d,adminType:h,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:y}}}}}l.waAdminMsgToBridgeMsg=e}),98);
__d("MpsWaPlaceholderToBridge",["MAWAckLevel","WAArmadilloTransportEvent.pb","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.deserialize().encryptedTransportEvent(),r=n==null||(t=n.proto.placeholder)==null?void 0:t.type;if(!(n==null||r==null)){var a={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:r===o("WAArmadilloTransportEvent.pb").TransportEvent$Placeholder$Type.UNAVAILABLE_MESSAGE?o("WAMsgType").MSG_TYPE.UNAVAILABLE:o("WAMsgType").MSG_TYPE.CIPHERTEXT};return{kind:"bridgeMsg",value:a}}}l.waPlaceholderToBridgeMsg=e}),98);
__d("MpsXmaMentionToBridge",["MAWUserJidWrapper","MAWXMAUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.message,r=e.topLevel,a=n.deserialize().encryptedTransportMessage(),i=a==null||(t=a.armadillo())==null?void 0:t.extendedContentMessage(),l=i==null?void 0:i.payload.targetType,s=o("MAWXMAUtils").isXMAStoryMention(l)||o("MAWXMAUtils").isFBXMAPostMention(l);if(a==null||i==null||!s||r.kind!=="bridgeMsg")return e;var u=o("MAWXMAUtils").isFBXMAPostMention(l),c=o("WAJids").interpretAsUserJid(n.getChatJid()),d=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),m=c==null?d:o("WAJids").userIdFromJid(c),p={mentionedUserId:m!=null?m:d,timestampMs:o("WATimeUtils").castToMillisTime(n.message.timestampMs)},_=u?babelHelpers.extends({},p,{replyType:"FB_POST_MENTION"}):babelHelpers.extends({},p,{replyType:"FB_STORY_MENTION"});return r.value=babelHelpers.extends({},r.value,{replyContent:_}),e}l.processXmaMention=e}),98);
__d("MpsXmaStoryReplyToBridge",["MAWAckLevel","MAWDbMedia","MAWMsgType","MAWUserJidWrapper","MAWXMAUtils","MpsMediaToBridge","MpsXmaToBridge","WAHashUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=(n=o("WAJids").interpretAsUserJid(t.getChatJid()))!=null?n:t.getSenderJid(),a=o("MAWUserJidWrapper").getMyUserJid();return o("MAWXMAUtils").isXMAStoryProducerReply(e.targetType)?t.isAuthorMe()?a:r:t.isAuthorMe()?r:a}function s(t){var n,r,a,i,l=t.deserialize().encryptedTransportMessage(),s=l==null||(n=l.armadillo())==null?void 0:n.extendedContentMessage();if(!(l==null||s==null||!o("MAWXMAUtils").isXMAStoryReply(s.payload.targetType))){var u=o("MpsXmaToBridge").computeXmaContent(s),c=s.previews().at(0),d=c==null||(r=c.integral)==null||(r=r.transport)==null||(r=r.integral)==null?void 0:r.fileSha256,m=d!=null?o("WAHashUtils").toPlaintextHash(d):void 0,p=(a=s.payload.ctas.at(0))==null?void 0:a.nativeUrl,_=e(s.payload,t),f=o("MAWXMAUtils").isXMAStoryProducerReply(s.payload.targetType),g=(i=s.associatedMessage())==null?void 0:i.consumerMessage(),h=g!=null?o("MpsMediaToBridge").getMediaTypeForMessage(g):null,y=o("MpsXmaToBridge").getExpiredXMAParams(s==null?void 0:s.payload.targetExpiringAtSec),C=f?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:o("MAWDbMedia").convertNumberToMediaId(1),storyMediaPlaintextHash:y!=null&&y.isExpiredXmaMsg?void 0:m,storyMsgType:o("MAWMsgType").MSG_TYPE.IMAGE,storyOwnerId:o("WAJids").extractUserId(_),storyUrl:p!=null?p:"",timestampMs:o("WATimeUtils").castToMillisTime(t.message.timestampMs)}:{replyType:"STORY",storyMediaPlaintextHash:y!=null&&y.isExpiredXmaMsg?void 0:m,storyOwnerId:o("WAJids").extractUserId(_),storyUrl:p!=null?p:"",timestampMs:o("WATimeUtils").castToMillisTime(t.message.timestampMs)},b={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),commands:u==null?void 0:u.commands,content:u==null?void 0:u.text,externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,isStoryReply:!0,mentionedJids:u==null?void 0:u.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:t.getMsgId(),replyContent:C,sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:h!=null?h:"Text"};return{kind:"bridgeMsg",value:b}}}l.storyReplyToBridge=s}),98);
__d("MpsMessageToBridge",["FBLogger","MAWMsgType","MpsAdminMsgToBridge","MpsBumpMessageToBridgeMsg","MpsEditToBridge","MpsEphemeralMessageToBridge","MpsForwardToBridge","MpsFutureproofToBridge","MpsMediaToBridge","MpsMessageTextToBridge","MpsMessageToBridgeWrapper","MpsNoteReplyToBridge","MpsRavenToBridge","MpsReactionToBridge","MpsReceiverFetchInfoToBridge","MpsReplyToBridge","MpsRevokeMessageToBridgeMsg","MpsScreenshotActionToBridgeMsg","MpsUnsupportedMessagesToBridge","MpsWaAdminMsgToBridge","MpsWaPlaceholderToBridge","MpsXmaMentionToBridge","MpsXmaStoryReplyToBridge","MpsXmaToBridge","WAGetPlatformFromStanzaId","WAJids","WAStanzaUtils","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[o("MpsUnsupportedMessagesToBridge").unsupportedMessagesBridgeMsg,o("MpsMessageTextToBridge").messageTextToBridgeMsg,o("MpsMediaToBridge").mediaToBridge,o("MpsAdminMsgToBridge").adminMsgToBridgeMsg,o("MpsScreenshotActionToBridgeMsg").screenshotActionToBridgeMsg,o("MpsRevokeMessageToBridgeMsg").revokeMessageToBridgeMsg,o("MpsBumpMessageToBridgeMsg").bumpMessageToBridgeMsg,o("MpsWaAdminMsgToBridge").waAdminMsgToBridgeMsg,(e=o("MpsXmaToBridge")).xmaToBridge,o("MpsXmaStoryReplyToBridge").storyReplyToBridge,o("MpsRavenToBridge").ravenToBridge,o("MpsNoteReplyToBridge").noteReplyToBridge,o("MpsWaPlaceholderToBridge").waPlaceholderToBridgeMsg,o("MpsFutureproofToBridge").futureproofBridgeMsg],u=[o("MpsEditToBridge").editMessageToBridgeMsg,o("MpsReactionToBridge").reactionMessageToBridgeMsg],c=[o("MpsEditToBridge").processEditedMessage,o("MpsReplyToBridge").processReplyMessage,o("MpsMediaToBridge").processAttachment,o("MpsEphemeralMessageToBridge").processEphemeralMessage,o("MpsReceiverFetchInfoToBridge").processReceiverFetchInfo,e.processXmaAttachment,e.processXmaAssociatedMessageAttachment,o("MpsXmaMentionToBridge").processXmaMention,o("MpsRavenToBridge").processRavenAttachment,o("MpsForwardToBridge").processForwarding,o("MpsNoteReplyToBridge").processNoteReply,o("MpsNoteReplyToBridge").processNoteReplyAttachment,e.processXmaExpiration];function d(e,t){for(var n of e)try{var a=n(t);if(a!=null)return a}catch(e){var i=o("WAStanzaUtils").toStanzaId(t.getExternalId()),l=o("WAJids").interpretAsGroupJid(t.getChatJid())!=null;throw r("FBLogger")("mps").catching(r("getErrorSafe")(e)).mustfixThrow("mpsMessagetoBridge failed to create a bridge object for message from platform: %s, is_group: %s",o("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(i),l)}}function m(e){var t=o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromTopLevel(e.toplevelProtobuf),n=d(s,t);if(n!=null&&!(n.kind==="bridgeMsg"&&n.value.type_===o("MAWMsgType").MSG_TYPE.ADMIN&&n.value.adminType==null)){if(n.kind==="bridgeMsg"&&n.value.type_===o("MAWMsgType").MSG_TYPE.FUTUREPROOF)return{supplementals:[],topLevel:n};var r=e.supplementalProtobufs.values().toArray().map(function(t){return d(u,o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromSupplemental(t,e.toplevelProtobuf))}).filter(Boolean),a=c.reduce(function(e,t){return t(e)},{message:t,supplementalMessages:e.supplementalProtobufs,supplementals:r,topLevel:n});return{supplementals:a.supplementals,topLevel:a.topLevel}}}l.mpsFullMessagetoBridge=m}),98);
__d("WebMpsReverbWrites",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";function e(e,t,r,o,a,i,l){var s=[a,o,r];return l((function(){var l=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var l,u=yield n.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",s);if(!(((l=u==null?void 0:u.timestampMs)!=null?l:0)>=i)){var c={messageId:e,payload:t,supplementalKey:r,threadId:a,timestampMs:i,topLevelMessageId:o};yield n.stores.supplemental.bulkUpsert("[threadId+topLevelMessageId+supplementalKey]",[{item:c,selector:s}])}});return function(e){return l.apply(this,arguments)}})())}function l(e,t,r){var o=e.messageId,a=e.threadId;return r((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r,i=yield n.stores.message.getByIndex("[threadId+messageId]",[a,o]);if(!(i!=null&&!i.isTransportErrorPlaceholder)&&!(i!=null&&i.isTransportErrorPlaceholder&&t.isTransportErrorPlaceholder)){var l=yield n.stores.deleted.getByIndex("[threadId+deletedMessageId]",[e.threadId,e.messageId]),s=babelHelpers.extends({},e,{debugFlags:t.debugFlags,expiryTimestampMs:t.expiryTimestampMs,isLocalOnlyMessage:t.isLocalOnly,isTransportErrorPlaceholder:t.isTransportErrorPlaceholder,timestampMs:(r=i==null?void 0:i.timestampMs)!=null?r:e.timestampMs});if(l)l.payload=s.payload,yield n.stores.deleted.bulkPut([l]),i!=null&&(i.timestampMs=e.timestampMs,yield n.stores.message.bulkPut([i]));else{var u=yield n.stores.message.bulkUpsert("[threadId+messageId]",[{item:s,selector:[a,o]}]),c=u[0],d=yield n.stores.tags.readIndexRange("[threadId+messageId+tag]",{only:[a,o]});d.length>0&&(yield n.stores.tags.bulkDelete(d.map(function(e){return e.pk}))),t.tags.length>0&&(yield n.stores.tags.bulkAdd(t.tags.map(function(e){return{messageId:s.messageId,messagePk:c,tag:e,threadId:s.threadId,timestampMs:s.timestampMs}})))}}});return function(e){return r.apply(this,arguments)}})())}i.upsertSupplementalToReverb=e,i.upsertTopLevelToReverb=l}),66);
__d("WebReverbSchema",["FBLogger","MAWWormOdsLogger","WAHex","Worm","WormEAR","WormIDbDriver","WormMemoryDriver"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{"[threadId+messageId]":{fields:["threadId","messageId"],unique:!0},"[threadId+timestampMs+messageId]":{fields:["threadId","timestampMs","messageId"],unique:!1},expiryTimestampMs:{fields:["expiryTimestampMs"],unique:!1},messageId:{fields:["messageId"],unique:!1},timestampMs:{fields:["timestampMs"],unique:!1}},nonEncryptedFields:["timestampMs","expiryTimestampMs","messageId","debugFlags"],primaryKey:"pk",secure:!0},s={autoIncrement:!0,indexes:{"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!0}},nonEncryptedFields:["topLevelMessageId"],primaryKey:"pk",secure:!0},u={autoIncrement:!0,indexes:{"[threadId+deletedMessageId]":{fields:["threadId","deletedMessageId"],unique:!0},"[threadId+timestampMs+deletedMessageId]":{fields:["threadId","timestampMs","deletedMessageId"],unique:!0},"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!1},deletionTimestampMs:{fields:["deletionTimestampMs"],unique:!1}},nonEncryptedFields:["topLevelMessageId","deletionTimestampMs"],primaryKey:"pk",secure:!0},c={autoIncrement:!0,indexes:{"[threadId+messageId+tag]":{fields:["threadId","messageId","tag"],unique:!0},"[threadId+tag+timestampMs]":{fields:["threadId","tag","timestampMs"],unique:!1}},nonEncryptedFields:["messageId","timestampMs","messagePk","tag"],primaryKey:"pk",secure:!0},d={autoIncrement:!1,indexes:{},primaryKey:"pk",secure:!0},m={dbMetadata:d,deleted:u,message:e,supplemental:s,tags:c};function p(e,t,n,a,i){var l=o("WAHex").parseHex(t),s="reverb",u=new(o("WormEAR")).WormEAR(m,s,l),c=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(e,s,m,u,o("MAWWormOdsLogger").wormOdsWorkerLogger,{blockingErrorThreshold:n,onBlockingError:a,onTransactionError:function(t){if(t instanceof o("WormEAR").DecryptionError){var e=t;r("FBLogger")("mps").mustfix("EAR decryption error in store: %s. Dropping corrupted entity %s",e.store,e.maybeHashedPk),c.runInTransaction([e.store],"readwrite",function(t){var n=t.stores[e.store];return e.maybeHashedPk!=null?n.delete(e.maybeHashedPk):n.clear()},"delete-corrupted-entity")}}}),i);return c}function _(e){return new(o("Worm")).WormDatabase(new(o("WormMemoryDriver")).WormMemoryDriver(m),e)}l.schema=m,l.makeWebReverbSchema=p,l.makeInMemoryReverbSchema_TEST_ONLY=_}),98);
__d("WebReverbDB",["MpsLogger","WAResolvable","WebReverbSchema","asyncToGeneratorRuntime","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;function u(e,t,n,r,o){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i,l){var u;try{var c=o("WebReverbSchema").makeWebReverbSchema(t,n,a,i,l);return e=c,u=yield c.init(),s.resolve(c),u}catch(e){throw o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("Error performing WebReverb init"),e}}),c.apply(this,arguments)}function d(){if(e==null)throw r("err")("Reverb DB is not initialized");return e}function m(){return s.promise}function p(e){return"WebReverb - "+e}l.makeWebReverb=u,l.getWebReverbDB=d,l.getDbPromise=m,l.mpsOp=p}),98);
__d("WebMpsMigrationReverbTxns",["FBLogger","MpsTypes","Promise","WebMpsReverbWrites","WebReverbDB","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return r("FBLogger")("mps").tags(["mps_migration"])};function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){try{yield o("WebReverbDB").getWebReverbDB().runInTransaction(["message","supplemental","deleted","tags","dbMetadata"],"readwrite",function(r){var o=function(t){return t(r)};return(e||(e=n("Promise"))).all(t.map(function(e){return d(e,o)}))},"mps-persist-messages-migrated-from-maw-db")}catch(e){throw r.endFail("reverb_write_failure"),e}}),c.apply(this,arguments)}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=[],i=[];a.push(o("WebMpsReverbWrites").upsertTopLevelToReverb(t.toplevelProtobuf,{actionType:o("MpsTypes").ActionType.UpsertTopLevel,debugFlags:["MAW_Migration"],isLocalOnly:!0,isTransportErrorPlaceholder:!1,tags:[],targetMessageId:t.toplevelProtobuf.messageId},r));for(var l of t.supplementalsToInsert.entries()){var u=l[0],c=l[1];a.push(o("WebMpsReverbWrites").upsertSupplementalToReverb(c.messageId,c.payload,u,t.toplevelProtobuf.messageId,t.toplevelProtobuf.threadId,c.timestampMs,r))}var d=yield(e||(e=n("Promise"))).allSettled(a),m=d.filter(function(e){return e.status==="rejected"});for(var p of m)s().mustfix("Failed to upsert a row into Reverb: %s",p.reason);if(m.length>0)throw s().mustfixThrow("Reverb upsert failed");var _=function*(){var e=f[0],o=f[1];i.push(r((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=[t.toplevelProtobuf.threadId,t.toplevelProtobuf.messageId,e],o=yield n.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",r);o!=null&&(yield n.stores.supplemental.bulkDelete([o.pk]))});return function(e){return r.apply(this,arguments)}})()))};for(var f of t.supplementalsToDelete.entries())yield*_();var g=yield e.allSettled(i),h=g.filter(function(e){return e.status==="rejected"});for(var y of h)s().mustfix("Failed to delete a row from Reverb: %s",y.reason);if(h.length>0)throw s().mustfixThrow("Reverb delete failed")}),m.apply(this,arguments)}function p(){return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readonly",function(e){return e.stores.dbMetadata.get("db-info")},"mps-get-db-metadata")}function _(e,t){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield t.stores.dbMetadata.bulkAdd([babelHelpers.extends({},e,{pk:"db-info"})])});return function(e){return t.apply(this,arguments)}})(),"mps-set-db-metadata")}catch(e){throw t.endFail("migration_state_write_failure"),e}}function f(e,t){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n,r,o,a,i=yield t.stores.dbMetadata.get("db-info");if(i==null)throw s().mustfixThrow("DB Metadata row does not exist, cannot update the cursor");var l=i,u=babelHelpers.extends({},l,{mawDBMigrationCurrentMessageId:(n=e.mawDBMigrationCurrentMessageId)!=null?n:l.mawDBMigrationCurrentMessageId,mawDBMigrationCurrentThread:(r=e.mawDBMigrationCurrentThread)!=null?r:l.mawDBMigrationCurrentThread,mawDBMigrationStartMs:(o=e.mawDBMigrationStartMs)!=null?o:l.mawDBMigrationStartMs,mawDBMigrationState:(a=e.mawDBMigrationState)!=null?a:l.mawDBMigrationState});yield t.stores.dbMetadata.bulkPut([u])});return function(e){return t.apply(this,arguments)}})(),"mps-update-db-metadata")}catch(e){throw t.endFail("migration_state_write_failure"),e}}l.persistMigratedMessagesFromMawDb=u,l.getMawMpsMigrationState=p,l.setInitialMawMpsMigrationState=_,l.setMawMpsMigrationState=f}),98);
__d("MpsReverbInit",["BrowserLockManager","MAWMpsMigrationStatus","MpsTypes","Promise","WebMpsMigrationReverbTxns","WebReverbDB","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s="wmi_mps_m4_non_migrated_status_lock",u="wmi_mps_new_db_status_lock",c;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=yield o("WebReverbDB").makeWebReverb(t.name,t.strEncKey,t.blockingErrorThreshold,t.onBlockingError,t.qplEvent),i=a.isNewDb,l;if(i)l=!0;else{var d=yield o("WebMpsMigrationReverbTxns").getMawMpsMigrationState();l=(d==null?void 0:d.mawDBMigrationState)===o("MpsTypes").MawDBMigrationState.Completed}if(r("BrowserLockManager")==null){o("MAWMpsMigrationStatus").setStatus(l);return}var m=yield r("BrowserLockManager").query(),p=m.held.some(function(e){return e.name===u});if(p){o("MAWMpsMigrationStatus").setStatus(!0);return}if(l===!0){var _=m.held.some(function(e){return e.name===s})||m.pending.some(function(e){return e.name===s});_?l=!1:i===!0&&(c=r("BrowserLockManager").request(u,function(){return new(e||(e=n("Promise")))(function(){})}))}l||(c=r("BrowserLockManager").request(s,function(){return new(e||(e=n("Promise")))(function(){})})),o("MAWMpsMigrationStatus").setStatus(l)}),m.apply(this,arguments)}l.initReverb=d}),98);
__d("WAOfflineUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["INIT","OFFLINE_RESUME","ONLINE"]),l=n("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});i.ServerRPCMode=e,i.WAClientInfraOfflineProgress=l}),66);
__d("groupBy",[],(function(t,n,r,o,a,i){function e(e,t){return e.reduce(function(e,n){return(e[t(n)]=e[t(n)]||[]).push(n),e},{})}i.default=e}),66);
__d("isInstamadilloEB",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("670")===!0}l.default=e}),98);/*FB_PKG_DELIM*/
__d("ArmadilloTaskHandlers",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e,s={add:(e=r("JSResourceForInteraction"))("AddTaskHandler").__setRef("ArmadilloTaskHandlers"),get_messenger_db_dump_attachments_for_bug_reporting:e("GetMessengerDBDumpAttachments").__setRef("ArmadilloTaskHandlers"),maw_get_devices:e("MAWGetDevicesTaskHandler").__setRef("ArmadilloTaskHandlers"),preload_messenger_db_dump_attachments_for_bug_reporting:e("PreloadDBDumpAttachments").__setRef("ArmadilloTaskHandlers"),test:e("TestNativeTaskHandler").__setRef("ArmadilloTaskHandlers"),zenon_send_chatd_mws_message:e("MAWZenonSendMultiwayMsgChatdTaskHandler").__setRef("ArmadilloTaskHandlers")};l.TASK_HANDLERS_RESOURCES=s}),98);
__d("InstamadilloTaskHandlers",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e,s={33:(e=r("JSResourceForInteraction"))("IGDUnsendMessageTaskHandler").__setRef("InstamadilloTaskHandlers"),46:e("IGDSendMessageTaskHandler").__setRef("InstamadilloTaskHandlers"),igd_edit_message:e("IGDEditMessageTaskHandler").__setRef("InstamadilloTaskHandlers"),igd_react_message:e("IGDSendRemoveReactionTaskHandler").__setRef("InstamadilloTaskHandlers"),igd_send_media_message:e("IGDSendMediaMessageTaskHandler").__setRef("InstamadilloTaskHandlers"),igd_send_xma_receiver_fetch:e("IGDSendXmaReceiverFetchTaskHandler").__setRef("InstamadilloTaskHandlers")};l.TASK_HANDLERS_RESOURCES=s}),98);
__d("CometTaskHandlers",["ArmadilloTaskHandlers","InstamadilloTaskHandlers"],(function(t,n,r,o,a,i,l){"use strict";var e=babelHelpers.extends({},o("ArmadilloTaskHandlers").TASK_HANDLERS_RESOURCES,o("InstamadilloTaskHandlers").TASK_HANDLERS_RESOURCES);l.TASK_HANDLERS_RESOURCES=e}),98);
__d("WorkerBootstrap",["HasteSupportData","ServerJSDefine"],(function(t,n,r,o,a,i,l){"use strict";function e(e){Object.keys(e).forEach(function(t){r("ServerJSDefine").handleDefine(t,[],e[t],-1,null)})}function s(t,r){var i,l;t.hsdp&&o("HasteSupportData").handle(t.hsdp);var s=(i=(l=t.jsmods)!=null?l:t.dynamicModules)!=null?i:{};e(s);var u=n.call(null,r);if(t.rds!=null&&t.rds.length>0&&a.call(null,t.rds,function(){}),typeof u=="function"||u!==null)try{for(var c=arguments.length,d=new Array(c>2?c-2:0),m=2;m<c;m++)d[m-2]=arguments[m];u.apply(void 0,d)}catch(e){}}function u(e){var t=e;if(typeof t=="function"||t!==null)try{t()}catch(e){}}l.initDynamicModules=e,l.start=s,l.startServerJS=u}),98);
__d("CurrentSharedWorker",["HasteSupportData","QPLUserFlow","SharedWorkerStatusLock","WorkerBootstrap","emptyFunction","err","justknobx","qpl","structuredClone"],(function(t,n,r,o,a,i,l){"use strict";var e=null,s=[],u=new Set,c=[],d=!1,m=!1,p=null,_=!1,f=r("qpl")._(931609794,"2369");r("QPLUserFlow").start(f);var g=o("SharedWorkerStatusLock").getStatusLock();r("QPLUserFlow").addPoint(f,"status_lock"),r("QPLUserFlow").addAnnotations(f,{string:{id:self.worker_id}}),self.setTimeout(function(){if(!_){try{var e;(e=u.values().next().value)==null||e.postMessage({type:"self-terminate",response:{from:"bundle",workerID:self.worker_id}})}catch(e){r("QPLUserFlow").endFailure(f,"timeout_termination_error"),E(e)}self.close()}},3e5);function h(){m=!0,p=null,e!==null&&(r("QPLUserFlow").addPoint(f,"process_message_buffer"),r("QPLUserFlow").addAnnotations(f,{int:{message_buffer_size:s.length}}),s.forEach(function(e){return e()}),s=[]),r("QPLUserFlow").endSuccess(f)}function y(t,i){var l=t.data;if(typeof l=="object"&&(l==null?void 0:l.type)==="execute-worker"){var c=!d;try{if(!d&&l.args instanceof Array){var C,b=l.args[0],v=b.hsdp,S=b.jsmods,R=b.dynamicModules,L=b.rds;r("QPLUserFlow").addPoint(f,"first_init"),v!=null&&o("HasteSupportData").handle(v),o("WorkerBootstrap").initDynamicModules((C=S!=null?S:R)!=null?C:{}),L!=null&&L.length>0&&a.call(null,L,function(){}),g.init({requestWorkerIdStatusLockToo:r("justknobx")._("4202")}),r("QPLUserFlow").addPoint(f,"status_lock_init"),d=!0,p!=null&&(p(),h())}var E=n.call(n,"SiteData");u.size>1&&i.postMessage({type:"execute-worker-imports",response:{}}),i.postMessage({type:"execute-worker-ack",response:{firstInit:c,workerRevision:E.client_revision,spinMode:E.spin,spinTime:E.__spin_t}}),_=!0}catch(e){r("QPLUserFlow").endFailure(f,"worker_init_error"),g.release(),i.postMessage({type:"execute-worker-ack",response:{firstInit:c,error:e.message}}),self.close()}}else if(typeof l=="object"&&(l==null?void 0:l.type)==="sw-get-rev")try{var I=n.call(n,"SiteData");i.postMessage({type:"sw-get-rev",response:{workerRevision:I.client_revision,spinMode:I.spin,spinTime:I.__spin_t}})}catch(e){i.postMessage({type:"sw-get-rev",response:{error:e.message}})}else if(typeof l=="object"&&(l==null?void 0:l.type)==="sw-shutdown"){var T=Array.isArray(l.args)?l.args[0]:null;typeof T=="object"&&(T==null?void 0:T.upgrade)===!0?k("requested-upgrade"):typeof T=="object"&&typeof(T==null?void 0:T.reason)=="string"?k(T==null?void 0:T.reason):k()}else if(typeof l=="object"&&(l==null?void 0:l.type)==="sw-uptime-tracking"){var D,x=typeof(l==null?void 0:l.args)=="object"?(D=l.args)==null?void 0:D.trackerID:null;i.postMessage({type:"sw-uptime-tracking",response:{trackerID:x}})}else typeof l=="object"&&(l==null?void 0:l.type)==="ww-hrp-init"?i.postMessage({type:"ww-hrp-init",response:{}}):typeof l=="object"&&(l==null?void 0:l.type)==="ww-connection-ack"?i.postMessage({type:"connection-ack",response:{from:"bundle",workerID:self.worker_id,hrpStatus:"processed"}}):e!==null&&m?e(l):s.push(function(){return y(t,i)})}function C(t){var n=e==null;e=t!=null?t:r("emptyFunction"),n&&m&&(s.forEach(function(e){return e()}),s=[])}function b(e,t){u.forEach(function(n){try{n.postMessage(e,t)}catch(t){n.postMessage(e)}})}function v(e){if(d){r("QPLUserFlow").addPoint(f,"init_complete_handler_ran"),e(),h();return}r("QPLUserFlow").addPoint(f,"init_complete_handler_attached"),p=e}["log","error","info","debug","warn"].forEach(function(e){if(self.console[e]==null)throw r("err")('"'+e+'" is not a valid console method.');var t=self.console[e];self.console[e]=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t.apply(void 0,o);var i=!1;try{r("structuredClone")!=null&&r("structuredClone")(o),i=!0}catch(e){}if(!i){b({type:"console",response:{method:"error",args:["DataCloneError: Failed to forward console message from web worker due to args not being serializable."]}});return}b({type:"console",response:{method:e,args:o}})}});try{r("QPLUserFlow").addPoint(f,"bootstrap_start");var S=self.shared_worker_bootstrap_buffer==null?void 0:self.shared_worker_bootstrap_buffer(k);if(S!=null){var R=S.ports,L=S.messages;r("QPLUserFlow").addAnnotations(f,{int:{bootstrap_ports_num:R.length}}),R==null||R.forEach(function(e){try{e.postMessage({type:"connection-ack",response:{from:"bundle",workerID:self.worker_id,hrpStatus:"processed"}}),e.addEventListener("message",function(t){return y(t,e)}),u.add(e)}catch(e){r("QPLUserFlow").addPoint(f,"connection_fail"),E(e)}}),L==null||L.forEach(function(e){try{y(e.e,e.port)}catch(o){var t,n;r("QPLUserFlow").addPoint(f,"message_processing_fail"),r("QPLUserFlow").addAnnotations(f,{string:{failed_msg_type:(t=(n=e.e.data)==null?void 0:n.type)!=null?t:"unknown"}}),E(o)}r("QPLUserFlow").addAnnotations(f,{int:{msg_num:L.length},string_array:{msgs:L.map(function(e){var t;return(t=e.e.data)==null?void 0:t.type})}})})}else r("QPLUserFlow").addPoint(f,"bootstrap_buffer_empty")}catch(e){E(e),r("QPLUserFlow").endFailure(f,"uncaught_bootstrap_error")}function E(e){try{b({type:"sw-uncaught-error",e:{message:e.message,lineno:e.lineno,colno:e.colno,filename:e.filename,error:e.error}})}catch(e){var t;r("QPLUserFlow").addPoint(f,"sending_error_failed"),r("QPLUserFlow").addAnnotations(f,{string:{error:String((t=e.message)!=null?t:e)}})}}self.addEventListener("error",function(e){if(u.size===0){c.push(e);return}E(e)}),self.addEventListener("connect",function(e){var t=e.ports[0];t.postMessage({type:"connection-ack",response:{from:"bundle",workerID:self.worker_id,hrpStatus:"processed"}}),t.addEventListener("message",function(e){return y(e,t)}),t.start(),u.add(t),c.length>0&&(c.forEach(E),c.splice(0,c.length))});function k(e){g.release(),b({type:"sw-shutdown",response:{reason:e,workerID:self.worker_id,isInitialized:_}}),self.close()}l.setMessageHandler=C,l.postMessage=b,l.onInitComplete=v,l.shutdownWorker=k}),98);
__d("CurrentSharedWorkerAdapter",["CurrentSharedWorker","FBLogger"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){}var t=e.prototype;return t.addEventListener=function(t,n,a){switch(t){case"message":o("CurrentSharedWorker").setMessageHandler(function(e){return n({data:e})});break;case"error":break;default:r("FBLogger")("worker").mustfix("Unexpected message type %",t)}},t.removeEventListener=function(t,n,a){switch(t){case"message":o("CurrentSharedWorker").setMessageHandler(null);break;case"error":break;default:r("FBLogger")("worker").mustfix("Unexpected message type %",t)}},t.postMessage=function(t,n){o("CurrentSharedWorker").postMessage(t,n)},t.close=function(){},e})();l.CurrentSharedWorkerAdapter=e}),98);
__d("EARInitType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["EB_INIT","LS_INIT","MAW_INIT","MAW_RP_INIT","MAW_IN_UI_INIT"]),l=e;i.default=l}),66);
__d("EBLSResignCdnUrlDeferred",["gkx","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("EBLSResignCdnUrl").__setRef("EBLSResignCdnUrlDeferred");function s(t){return e.load().then(function(e){return r("gkx")("12896")?e.resignCdnUrlUsingEbdb(t):e.DEPRECATED_eblsResignCdnUrlWithGraphQL(t)})}l.eblsResignCdnUrlWithGraphQL=s}),98);
__d("EncryptedBackupsDYIFileUtils",["FBLogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e="media",s="messages.zip";function u(){if(navigator.storage!=null&&navigator.storage.getDirectory!=null)return navigator.storage.getDirectory();throw r("FBLogger")("wmi_eb").mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.")}function c(){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield u();return t.getDirectoryHandle(e,{create:!0})}),d.apply(this,arguments)}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var o=yield e.getFileHandle(t,{create:!0});try{var a=yield o.createSyncAccessHandle();a.write(n),a.flush(),a.close()}catch(e){if(e instanceof Error){if(e instanceof TypeError)try{var i=yield o.createWritable();yield i.write(n),yield i.close();return}catch(e){throw e instanceof Error?e instanceof TypeError?r("FBLogger")("wmi_eb").mustfixThrow("Write operation is not supported. Please try one of the supported browsers."):r("FBLogger")("wmi_eb").mustfixThrow("Failed to write using writable: %e",e.message):e}throw r("FBLogger")("wmi_eb").mustfixThrow("Failed to write using sync access handle: %s",e.message)}throw e}}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.getFileHandle(t);try{var o=yield n.createSyncAccessHandle(),a=new ArrayBuffer(o.getSize());return o.read(a),o.close(),new Blob([a])}catch(e){if(e instanceof Error){if(e instanceof TypeError)return n.getFile();throw r("FBLogger")("wmi_eb").mustfixThrow("Failed to read file %s, %s",t,e.message)}throw e}}),f.apply(this,arguments)}l.DyiMediaFolder=e,l.DyiArchiveFilename=s,l.getRootFolderHandle=u,l.getMediaFolderHandle=c,l.writeFile=m,l.readFile=_}),98);
__d("MAWThreadKeyUtils",["I64","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("I64"))).to_string(t)}function u(e){return e}function c(e){return r("vulture")("9DZDuAw4Bd5gY57CNHpZSR8vpLc="),e}function d(t){return(e||(e=o("I64"))).of_string(t)}function m(e){return e}l.stringThreadKeyFromThreadKey=s,l.toStringThreadKey=u,l.stringThreadKeyFromString=c,l.stringThreadKeyToI64=d,l.stringThreadKeyToString=m}),98);
__d("EncryptedBackupsDYIGenerateThreadMetadata",["CurrentUser","EncryptedBackupsDYISingleton","I64","IGDWebUtils","LSMessagingThreadTypeUtil","MAWThreadKeyUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(){return o("IGDWebUtils").isOnInstagramWeb()?(c||(c=o("I64"))).of_string(r("CurrentUser").getEIMU()):(c||(c=o("I64"))).of_string(r("CurrentUser").getAccountID())}function m(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(o("MAWThreadKeyUtils").stringThreadKeyToI64(t)))}function p(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(t))}function _(e,t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.contacts).filter(function(e){return t.has((c||(c=o("I64"))).to_string(e.id))}))}function f(e,t){var n;return(n=o("ReQL")).toArrayAsync(n.leftJoin(n.fromTableAscending(e.tables.participants,["contactId"]).getKeyRange(t),n.fromTableAscending(e.tables.contacts,["name"])))}function g(e){return o("LSMessagingThreadTypeUtil").isOneToOne(e)||o("LSMessagingThreadTypeUtil").isOpenOneToOne(e)}function h(e,t,n){if(n!=null&&n.trim()!=="")return n+"_"+t;switch(e.length){case 0:return"Thread_"+t;case 1:return e[0]+"_"+t;case 2:return e[0]+"and"+e[1]+"_"+t;case 3:return""+e[0]+e[1]+"and"+e[2]+"_"+t;case 4:return""+e[0]+e[1]+e[2]+"and1other_"+t;default:return""+e[0]+e[1]+e[2]+"and"+(e.length-3)+"others_"+t}}function y(e,t,n,r,o,a){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l){var s=[],u=[i],d=yield m(r,t);if(d!=null)if(g(d.threadType)){var _=n.getThreadIdForThreadKey(t);if(_==null){n.getLogger().WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),t);return}var y=yield p(r,(c||(c=o("I64"))).of_string(_));(y==null?void 0:y.id)!=null&&(y==null?void 0:y.name)!=null&&n.setContactNameForContactId((c||(c=o("I64"))).to_string(y.id),y.name);var C=(y==null?void 0:y.name)||"Unknown User";s.push(C),u.push(C),n.setThreadMetaDataByThreadKey(t,u,h(s,l,d.threadName))}else{var b=yield f(r,d.threadKey);b.forEach(function(e){var t=e[0],r=e[1];if((t==null?void 0:t.contactId)!=null&&(r==null?void 0:r.name)!=null&&n.setContactNameForContactId((c||(c=o("I64"))).to_string(t.contactId),r.name),!(c||(c=o("I64"))).equal(t.contactId,a)){var i=(r==null?void 0:r.name)||"Unknown User";s.push(i),u.push(i)}}),n.setThreadMetaDataByThreadKey(t,u,h(s,l,d.threadName))}else n.setThreadMetaDataByThreadKey(t,u,h(s,l))}),C.apply(this,arguments)}function b(e){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,r,a=o("EncryptedBackupsDYISingleton").getSingleton(),i=a.getLogger(),l=yield a.getDB(),m=yield p(l,d()),_=(t=m==null?void 0:m.id)!=null?t:(c||(c=o("I64"))).zero,f=(r=m==null?void 0:m.name)!=null?r:"Me";return a.setContactNameForContactId((c||(c=o("I64"))).to_string(_),f),e.reduce((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){yield e;var r=a.getThreadIdForThreadKey(t);return r==null&&i.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),t),y(t,a,l,_,f,n)});return function(t,n,r){return e.apply(this,arguments)}})(),(u||(u=n("Promise"))).resolve())}),v.apply(this,arguments)}l.getAllUnmappedContacts=_,l.EncryptedBackupsDYIGenerateThreadMetadata=b}),98);
__d("EncryptedBackupsDYITypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({NotStarted:0,InProgress:1,Completed:2,Failed:3}),l=n("$InternalEnum")({Armadillo:0,Instamadillo:1});i.EncryptedBackupsDYIState=e,i.EncryptedBackupsDYIConfig=l}),66);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fflate-0.6.10",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){var t,n="";try{t={}.Worker}catch(e){}e.default=t?function(e,r,o,a,i){var l=!1,s=new t(e+n,{eval:!0}).on("error",function(e){return i(e,null)}).on("message",function(e){return i(null,e)}).on("exit",function(e){e&&!l&&i(new Error("exited with code "+e),null)});return s.postMessage(o,a),s.terminate=function(){return l=!0,t.prototype.terminate.call(s)},s}:function(e,t,n,r,o){setImmediate(function(){return o(new Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});var a=function(){};return{terminate:a,postMessage:a}}}var u=!1;function c(){return u||(u=!0,s()),l.exports}var d={},m={exports:d};function p(){var e=c(),t=Uint8Array,n=Uint16Array,r=Uint32Array,o=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(e,t){for(var o=new n(31),a=0;a<31;++a)o[a]=t+=1<<e[a-1];for(var i=new r(o[30]),a=1;a<30;++a)for(var l=o[a];l<o[a+1];++l)i[l]=l-o[a]<<5|a;return[o,i]},s=l(o,2),u=s[0],m=s[1];u[28]=258,m[258]=28;for(var p=l(a,0),_=p[0],f=p[1],g=new n(32768),h=0;h<32768;++h){var y=(h&43690)>>>1|(h&21845)<<1;y=(y&52428)>>>2|(y&13107)<<2,y=(y&61680)>>>4|(y&3855)<<4,g[h]=((y&65280)>>>8|(y&255)<<8)>>>1}for(var C=(function(e,t,r){for(var o=e.length,a=0,i=new n(t);a<o;++a)++i[e[a]-1];var l=new n(t);for(a=0;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;var s;if(r){s=new n(1<<t);var u=15-t;for(a=0;a<o;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],m=l[e[a]-1]++<<d,p=m|(1<<d)-1;m<=p;++m)s[g[m]>>>u]=c}else for(s=new n(o),a=0;a<o;++a)e[a]&&(s[a]=g[l[e[a]-1]++]>>>15-e[a]);return s}),b=new t(288),h=0;h<144;++h)b[h]=8;for(var h=144;h<256;++h)b[h]=9;for(var h=256;h<280;++h)b[h]=7;for(var h=280;h<288;++h)b[h]=8;for(var v=new t(32),h=0;h<32;++h)v[h]=5;var S=C(b,9,0),R=C(b,9,1),L=C(v,5,0),E=C(v,5,1),k=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},I=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},T=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},D=function(e){return(e/8|0)+(e&7&&1)},x=function(e,o,a){(o==null||o<0)&&(o=0),(a==null||a>e.length)&&(a=e.length);var i=new(e instanceof n?n:e instanceof r?r:t)(a-o);return i.set(e.subarray(o,a)),i},$=function(e,n,r){var l=e.length;if(!l||r&&!r.l&&l<5)return n||new t(0);var s=!n||r,c=!r||r.i;r||(r={}),n||(n=new t(l*3));var d=function(e){var r=n.length;if(e>r){var o=new t(Math.max(r*2,e));o.set(n),n=o}},m=r.f||0,p=r.p||0,f=r.b||0,g=r.l,h=r.d,y=r.m,b=r.n,v=l*8;do{if(!g){r.f=m=I(e,p,1);var S=I(e,p+1,3);if(p+=3,S)if(S==1)g=R,h=E,y=9,b=5;else if(S==2){var N=I(e,p,31)+257,M=I(e,p+10,15)+4,w=N+I(e,p+5,31)+1;p+=14;for(var A=new t(w),F=new t(19),O=0;O<M;++O)F[i[O]]=I(e,p+O*3,7);p+=M*3;for(var B=k(F),W=(1<<B)-1,q=C(F,B,1),O=0;O<w;){var U=q[I(e,p,W)];p+=U&15;var L=U>>>4;if(L<16)A[O++]=L;else{var V=0,H=0;for(L==16?(H=3+I(e,p,3),p+=2,V=A[O-1]):L==17?(H=3+I(e,p,7),p+=3):L==18&&(H=11+I(e,p,127),p+=7);H--;)A[O++]=V}}var G=A.subarray(0,N),z=A.subarray(N);y=k(G),b=k(z),g=C(G,y,1),h=C(z,b,1)}else throw"invalid block type";else{var L=D(p)+4,$=e[L-4]|e[L-3]<<8,P=L+$;if(P>l){if(c)throw"unexpected EOF";break}s&&d(f+$),n.set(e.subarray(L,P),f),r.b=f+=$,r.p=p=P*8;continue}if(p>v){if(c)throw"unexpected EOF";break}}s&&d(f+131072);for(var j=(1<<y)-1,K=(1<<b)-1,Q=p;;Q=p){var V=g[T(e,p)&j],X=V>>>4;if(p+=V&15,p>v){if(c)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(X<256)n[f++]=X;else if(X==256){Q=p,g=null;break}else{var Y=X-254;if(X>264){var O=X-257,J=o[O];Y=I(e,p,(1<<J)-1)+u[O],p+=J}var Z=h[T(e,p)&K],ee=Z>>>4;if(!Z)throw"invalid distance";p+=Z&15;var z=_[ee];if(ee>3){var J=a[ee];z+=T(e,p)&(1<<J)-1,p+=J}if(p>v){if(c)throw"unexpected EOF";break}s&&d(f+131072);for(var te=f+Y;f<te;f+=4)n[f]=n[f-z],n[f+1]=n[f+1-z],n[f+2]=n[f+2-z],n[f+3]=n[f+3-z];f=te}}r.l=g,r.p=Q,r.b=f,g&&(m=1,r.m=y,r.d=h,r.n=b)}while(!m);return f==n.length?n:x(n,0,f)},P=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},N=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},M=function(e,r){for(var o=[],a=0;a<e.length;++a)e[a]&&o.push({s:a,f:e[a]});var i=o.length,l=o.slice();if(!i)return[q,0];if(i==1){var s=new t(o[0].s+1);return s[o[0].s]=1,[s,1]}o.sort(function(e,t){return e.f-t.f}),o.push({s:-1,f:25001});var u=o[0],c=o[1],d=0,m=1,p=2;for(o[0]={s:-1,f:u.f+c.f,l:u,r:c};m!=i-1;)u=o[o[d].f<o[p].f?d++:p++],c=o[d!=m&&o[d].f<o[p].f?d++:p++],o[m++]={s:-1,f:u.f+c.f,l:u,r:c};for(var _=l[0].s,a=1;a<i;++a)l[a].s>_&&(_=l[a].s);var f=new n(_+1),g=w(o[m-1],f,0);if(g>r){var a=0,h=0,y=g-r,C=1<<y;for(l.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});a<i;++a){var b=l[a].s;if(f[b]>r)h+=C-(1<<g-f[b]),f[b]=r;else break}for(h>>>=y;h>0;){var v=l[a].s;f[v]<r?h-=1<<r-f[v]++-1:++a}for(;a>=0&&h;--a){var S=l[a].s;f[S]==r&&(--f[S],++h)}g=r}return[new t(f),g]},w=function(e,t,n){return e.s==-1?Math.max(w(e.l,t,n+1),w(e.r,t,n+1)):t[e.s]=n},A=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new n(++t),o=0,a=e[0],i=1,l=function(e){r[o++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(a),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(a);i=1,a=e[s]}return[r.subarray(0,o),t]},F=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},O=function(e,t,n){var r=n.length,o=D(t+2);e[o]=r&255,e[o+1]=r>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var a=0;a<r;++a)e[o+a+4]=n[a];return(o+4+r)*8},B=function(e,t,r,l,s,u,c,d,m,p,_){P(t,_++,r),++s[256];for(var f=M(s,15),g=f[0],h=f[1],y=M(u,15),R=y[0],E=y[1],k=A(g),I=k[0],T=k[1],D=A(R),x=D[0],$=D[1],w=new n(19),B=0;B<I.length;++B)w[I[B]&31]++;for(var B=0;B<x.length;++B)w[x[B]&31]++;for(var W=M(w,7),q=W[0],U=W[1],V=19;V>4&&!q[i[V-1]];--V);var H=p+5<<3,G=F(s,b)+F(u,v)+c,z=F(s,g)+F(u,R)+c+14+3*V+F(w,q)+(2*w[16]+3*w[17]+7*w[18]);if(H<=G&&H<=z)return O(t,_,e.subarray(m,m+p));var j,K,Q,X;if(P(t,_,1+(z<G)),_+=2,z<G){j=C(g,h,0),K=g,Q=C(R,E,0),X=R;var Y=C(q,U,0);P(t,_,T-257),P(t,_+5,$-1),P(t,_+10,V-4),_+=14;for(var B=0;B<V;++B)P(t,_+3*B,q[i[B]]);_+=3*V;for(var J=[I,x],Z=0;Z<2;++Z)for(var ee=J[Z],B=0;B<ee.length;++B){var te=ee[B]&31;P(t,_,Y[te]),_+=q[te],te>15&&(P(t,_,ee[B]>>>5&127),_+=ee[B]>>>12)}}else j=S,K=b,Q=L,X=v;for(var B=0;B<d;++B)if(l[B]>255){var te=l[B]>>>18&31;N(t,_,j[te+257]),_+=K[te+257],te>7&&(P(t,_,l[B]>>>23&31),_+=o[te]);var ne=l[B]&31;N(t,_,Q[ne]),_+=X[ne],ne>3&&(N(t,_,l[B]>>>5&8191),_+=a[ne])}else N(t,_,j[l[B]]),_+=K[l[B]];return N(t,_,j[256]),_+K[256]},W=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q=new t(0),U=function(e,i,l,s,u,c){var d=e.length,p=new t(s+d+5*(1+Math.ceil(d/7e3))+u),_=p.subarray(s,p.length-u),g=0;if(!i||d<8)for(var h=0;h<=d;h+=65535){var y=h+65535;y<d?g=O(_,g,e.subarray(h,y)):(_[h]=c,g=O(_,g,e.subarray(h,d)))}else{for(var C=W[i-1],b=C>>>13,v=C&8191,S=(1<<l)-1,R=new n(32768),L=new n(S+1),E=Math.ceil(l/3),k=2*E,I=function(t){return(e[t]^e[t+1]<<E^e[t+2]<<k)&S},T=new r(25e3),$=new n(288),P=new n(32),N=0,M=0,h=0,w=0,A=0,F=0;h<d;++h){var U=I(h),V=h&32767,H=L[U];if(R[V]=H,L[U]=V,A<=h){var G=d-h;if((N>7e3||w>24576)&&G>423){g=B(e,_,0,T,$,P,M,w,F,h-F,g),w=N=M=0,F=h;for(var z=0;z<286;++z)$[z]=0;for(var z=0;z<30;++z)P[z]=0}var j=2,K=0,Q=v,X=V-H&32767;if(G>2&&U==I(h-X))for(var Y=Math.min(b,G)-1,J=Math.min(32767,h),Z=Math.min(258,G);X<=J&&--Q&&V!=H;){if(e[h+j]==e[h+j-X]){for(var ee=0;ee<Z&&e[h+ee]==e[h+ee-X];++ee);if(ee>j){if(j=ee,K=X,ee>Y)break;for(var te=Math.min(X,ee-2),ne=0,z=0;z<te;++z){var re=h-X+z+32768&32767,oe=R[re],ae=re-oe+32768&32767;ae>ne&&(ne=ae,H=re)}}}V=H,H=R[V],X+=V-H+32768&32767}if(K){T[w++]=268435456|m[j]<<18|f[K];var ie=m[j]&31,le=f[K]&31;M+=o[ie]+a[le],++$[257+ie],++P[le],A=h+j,++N}else T[w++]=e[h],++$[e[h]]}}g=B(e,_,c,T,$,P,M,w,F,h-F,g),!c&&g&7&&(g=O(_,g+1,q))}return x(p,0,s+D(g)+u)},V=(function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(n&1&&-306674912)^n>>>1;e[t]=n}return e})(),H=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=V[n&255^t[r]]^n>>>8;e=n},d:function(){return~e}}},G=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,a=n.length,i=0;i!=a;){for(var l=Math.min(i+2655,a);i<l;++i)o+=r+=n[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|e>>>8<<16|(t&255)<<8|t>>>8}}},z=function(e,t,n,r,o){return U(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,n,r,!o)},j=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},K=function(e,t,n){for(var r=e(),o=e.toString(),a=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),i=0;i<r.length;++i){var l=r[i],s=a[i];if(typeof l=="function"){t+=";"+s+"=";var u=l.toString();if(l.prototype)if(u.indexOf("[native code]")!=-1){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else{t+=u;for(var d in l.prototype)t+=";"+s+".prototype."+d+"="+l.prototype[d].toString()}else t+=u}else n[s]=l}return[t,n]},Q=[],X=function(e){var o=[];for(var a in e)(e[a]instanceof t||e[a]instanceof n||e[a]instanceof r)&&o.push((e[a]=new e[a].constructor(e[a])).buffer);return o},Y=function(t,n,r,o){var a;if(!Q[r]){for(var i="",l={},s=t.length-1,u=0;u<s;++u)a=K(t[u],i,l),i=a[0],l=a[1];Q[r]=K(t[s],i,l)}var c=j({},Q[r][1]);return e.default(Q[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",r,c,X(c),o)},J=function(){return[t,n,r,o,a,i,u,_,R,E,g,C,k,I,T,D,x,$,Ie,oe,ae]},Z=function(){return[t,n,r,o,a,i,m,f,S,b,L,v,g,W,q,C,P,N,M,w,A,F,O,B,D,x,U,z,Re,oe]},ee=function(){return[pe,ge,me,H,V]},te=function(){return[_e,fe]},ne=function(){return[he,me,G]},re=function(){return[ye]},oe=function(e){return postMessage(e,[e.buffer])},ae=function(e){return e&&e.size&&new t(e.size)},ie=function(e,t,n,r,o,a){var i=Y(n,r,o,function(e,t){i.terminate(),a(e,t)});return i.postMessage([e,t],t.consume?[e.buffer]:[]),function(){i.terminate()}},le=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},se=function(e,t,n,r,o){var a,i=Y(e,r,o,function(e,n){e?(i.terminate(),t.ondata.call(t,e)):(n[1]&&i.terminate(),t.ondata.call(t,e,n[0],n[1]))});i.postMessage(n),t.push=function(e,n){if(a)throw"stream finished";if(!t.ondata)throw"no stream handler";i.postMessage([e,a=n],[e.buffer])},t.terminate=function(){i.terminate()}},ue=function(e,t){return e[t]|e[t+1]<<8},ce=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},de=function(e,t){return ce(e,t)+ce(e,t+4)*4294967296},me=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},pe=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&me(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},_e=function(e){if(e[0]!=31||e[1]!=139||e[2]!=8)throw"invalid gzip data";var t=e[3],n=10;t&4&&(n+=e[10]|(e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},fe=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},ge=function(e){return 10+(e.filename&&e.filename.length+1||0)},he=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},ye=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ce(e,t){return!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,e}var be=(function(){function e(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(z(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e})();d.Deflate=be;var ve=(function(){function e(e,t){se([Z,function(){return[le,be]}],this,Ce.call(this,e,t),function(e){var t=new be(e.data);onmessage=le(t)},6)}return e})();d.AsyncDeflate=ve;function Se(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z],function(e){return oe(Re(e.data[0],e.data[1]))},0,n)}d.deflate=Se;function Re(e,t){return z(e,t||{},0,0)}d.deflateSync=Re;var Le=(function(){function e(e){this.s={},this.p=new t(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var n=this.p.length,r=new t(n+e.length);r.set(this.p),r.set(e,n),this.p=r},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=$(this.p,this.o,this.s);this.ondata(x(n,t,this.s.b),this.d),this.o=x(n,this.s.b-32768),this.s.b=this.o.length,this.p=x(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e})();d.Inflate=Le;var Ee=(function(){function e(e){this.ondata=e,se([J,function(){return[le,Le]}],this,0,function(){var e=new Le;onmessage=le(e)},7)}return e})();d.AsyncInflate=Ee;function ke(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J],function(e){return oe(Ie(e.data[0],ae(e.data[1])))},1,n)}d.inflate=ke;function Ie(e,t){return $(e,t)}d.inflateSync=Ie;var Te=(function(){function e(e,t){this.c=H(),this.l=0,this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=z(e,this.o,this.v&&ge(this.o),t&&8,!t);this.v&&(pe(n,this.o),this.v=0),t&&(me(n,n.length-8,this.c.d()),me(n,n.length-4,this.l)),this.ondata(n,t)},e})();d.Gzip=Te,d.Compress=Te;var De=(function(){function e(e,t){se([Z,ee,function(){return[le,be,Te]}],this,Ce.call(this,e,t),function(e){var t=new Te(e.data);onmessage=le(t)},8)}return e})();d.AsyncGzip=De,d.AsyncCompress=De;function xe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ee,function(){return[$e]}],function(e){return oe($e(e.data[0],e.data[1]))},2,n)}d.gzip=xe,d.compress=xe;function $e(e,t){t||(t={});var n=H(),r=e.length;n.p(e);var o=z(e,t,ge(t),8),a=o.length;return pe(o,t),me(o,a-8,n.d()),me(o,a-4,r),o}d.gzipSync=$e,d.compressSync=$e;var Pe=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){var n=this.p.length>3?_e(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Le.prototype.c.call(this,t)},e})();d.Gunzip=Pe;var Ne=(function(){function e(e){this.ondata=e,se([J,te,function(){return[le,Le,Pe]}],this,0,function(){var e=new Pe;onmessage=le(e)},9)}return e})();d.AsyncGunzip=Ne;function Me(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,te,function(){return[we]}],function(e){return oe(we(e.data[0]))},3,n)}d.gunzip=Me;function we(e,n){return $(e.subarray(_e(e),-8),n||new t(fe(e)))}d.gunzipSync=we;var Ae=(function(){function e(e,t){this.c=G(),this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=z(e,this.o,this.v&&2,t&&4,!t);this.v&&(he(n,this.o),this.v=0),t&&me(n,n.length-4,this.c.d()),this.ondata(n,t)},e})();d.Zlib=Ae;var Fe=(function(){function e(e,t){se([Z,ne,function(){return[le,be,Ae]}],this,Ce.call(this,e,t),function(e){var t=new Ae(e.data);onmessage=le(t)},10)}return e})();d.AsyncZlib=Fe;function Oe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ne,function(){return[Be]}],function(e){return oe(Be(e.data[0],e.data[1]))},4,n)}d.zlib=Oe;function Be(e,t){t||(t={});var n=G();n.p(e);var r=z(e,t,2,4);return he(r,t),me(r,r.length-4,n.d()),r}d.zlibSync=Be;var We=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Le.prototype.c.call(this,t)},e})();d.Unzlib=We;var qe=(function(){function e(e){this.ondata=e,se([J,re,function(){return[le,Le,We]}],this,0,function(){var e=new We;onmessage=le(e)},11)}return e})();d.AsyncUnzlib=qe;function Ue(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,re,function(){return[Ve]}],function(e){return oe(Ve(e.data[0],ae(e.data[1])))},5,n)}d.unzlib=Ue;function Ve(e,t){return $((ye(e),e.subarray(2,-4)),t)}d.unzlibSync=Ve;var He=(function(){function e(e){this.G=Pe,this.I=Le,this.Z=We,this.ondata=e}return e.prototype.push=function(e,n){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,n);else{if(this.p&&this.p.length){var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var o=this,a=function(){o.ondata.apply(o,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(a):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(a):new this.Z(a),this.s.push(this.p,n),this.p=null}}},e})();d.Decompress=He;var Ge=(function(){function e(e){this.G=Ne,this.I=Ee,this.Z=qe,this.ondata=e}return e.prototype.push=function(e,t){He.prototype.push.call(this,e,t)},e})();d.AsyncDecompress=Ge;function ze(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return e[0]==31&&e[1]==139&&e[2]==8?Me(e,t,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?ke(e,t,n):Ue(e,t,n)}d.decompress=ze;function je(e,t){return e[0]==31&&e[1]==139&&e[2]==8?we(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?Ie(e,t):Ve(e,t)}d.decompressSync=je;var Ke=function(e,n,r,o){for(var a in e){var i=e[a],l=n+a;i instanceof t?r[l]=[i,o]:Array.isArray(i)?r[l]=[i[0],j(o,i[1])]:Ke(i,l+"/",r,o)}},Qe=typeof TextEncoder!="undefined"&&new TextEncoder,Xe=typeof TextDecoder!="undefined"&&new TextDecoder,Ye=0;try{Xe.decode(q,{stream:!0}),Ye=1}catch(e){}var Je=function(e){for(var t="",n=0;;){var r=e[n++],o=(r>127)+(r>223)+(r>239);if(n+o>e.length)return[t,x(e,n-1)];o?o==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}},Ze=(function(){function e(e){this.ondata=e,Ye?this.t=new TextDecoder:this.p=q}return e.prototype.push=function(e,n){if(!this.ondata)throw"no callback";if(n=!!n,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),n),n){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var o=Je(r),a=o[0],i=o[1];if(n){if(i.length)throw"invalid utf-8 data";this.p=null}else this.p=i;this.ondata(a,n)},e})();d.DecodeUTF8=Ze;var et=(function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(tt(e),this.d=t||!1)},e})();d.EncodeUTF8=et;function tt(e,n){if(n){for(var r=new t(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}if(Qe)return Qe.encode(e);for(var a=e.length,i=new t(e.length+(e.length>>1)),l=0,s=function(e){i[l++]=e},o=0;o<a;++o){if(l+5>i.length){var u=new t(l+8+(a-o<<1));u.set(i),i=u}var c=e.charCodeAt(o);c<128||n?s(c):c<2048?(s(192|c>>6),s(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|e.charCodeAt(++o)&1023,s(240|c>>18),s(128|c>>12&63),s(128|c>>6&63),s(128|c&63)):(s(224|c>>12),s(128|c>>6&63),s(128|c&63))}return x(i,0,l)}d.strToU8=tt;function nt(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(Xe)return Xe.decode(e);var o=Je(e),a=o[0],i=o[1];if(i.length)throw"invalid utf-8 data";return a}}d.strFromU8=nt;var rt=function(e){return e==1?3:e<6?2:e==9?1:0},ot=function(e,t){return t+30+ue(e,t+26)+ue(e,t+28)},at=function(e,t,n){var r=ue(e,t+28),o=nt(e.subarray(t+46,t+46+r),!(ue(e,t+8)&2048)),a=t+46+r,i=ce(e,t+20),l=n&&i==4294967295?it(e,a):[i,ce(e,t+24),ce(e,t+42)],s=l[0],u=l[1],c=l[2];return[ue(e,t+10),s,u,o,a+ue(e,t+30)+ue(e,t+32),c]},it=function(e,t){for(;ue(e,t)!=1;t+=4+ue(e,t+2));return[de(e,t+12),de(e,t+4),de(e,t+20)]},lt=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},st=function(e,t,n,r,o,a,i,l){var s=r.length,u=n.extra,c=l&&l.length,d=lt(u);me(e,t,i!=null?33639248:67324752),t+=4,i!=null&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(a==null&&8),e[t++]=o&&8,e[t++]=n.compression&255,e[t++]=n.compression>>8;var m=new Date(n.mtime==null?Date.now():n.mtime),p=m.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(me(e,t,p<<25|m.getMonth()+1<<21|m.getDate()<<16|m.getHours()<<11|m.getMinutes()<<5|m.getSeconds()>>>1),t+=4,a!=null&&(me(e,t,n.crc),me(e,t+4,a),me(e,t+8,n.size)),me(e,t+12,s),me(e,t+14,d),t+=16,i!=null&&(me(e,t,c),me(e,t+6,n.attrs),me(e,t+10,i),t+=14),e.set(r,t),t+=s,d)for(var _ in u){var f=u[_],g=f.length;me(e,t,+_),me(e,t+2,g),e.set(f,t+4),t+=4+g}return c&&(e.set(l,t),t+=c),t},ut=function(e,t,n,r,o){me(e,t,101010256),me(e,t+8,n),me(e,t+10,n),me(e,t+12,r),me(e,t+16,o)},ct=(function(){function e(e){this.filename=e,this.c=H(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e})();d.ZipPassThrough=ct;var dt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new be(t,function(e,t){n.ondata(null,e,t)}),this.compression=8,this.flag=rt(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.ZipDeflate=dt;var mt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new ve(t,function(e,t,r){n.ondata(e,t,r)}),this.compression=8,this.flag=rt(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.AsyncZipDeflate=mt;var pt=(function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var n=this;if(this.d&2)throw"stream finished";var r=tt(e.filename),o=r.length,a=e.comment,i=a&&tt(a),l=o!=e.filename.length||i&&a.length!=i.length,s=o+lt(e.extra)+30;if(o>65535)throw"filename too long";var u=new t(s);st(u,0,e,r,l);var c=[u],d=function(){for(var e=0,t=c;e<t.length;e++){var r=t[e];n.ondata(null,r,!1)}c=[]},m=this.d;this.d=0;var p=this.u.length,_=j(e,{f:r,u:l,o:i,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),m){var e=n.u[p+1];e?e.r():n.d=1}m=1}}),f=0;e.ondata=function(r,o,a){if(r)n.ondata(r,o,a),n.terminate();else if(f+=o.length,c.push(o),a){var i=new t(16);me(i,0,134695760),me(i,4,e.crc),me(i,8,f),me(i,12,e.size),c.push(i),_.c=f,_.b=s+f+16,_.crc=e.crc,_.size=e.size,m&&_.r(),m=1}else m&&d()},this.u.push(_)},e.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,n=0,r=0,o=0,a=this.u;o<a.length;o++){var i=a[o];r+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0)}for(var l=new t(r+22),s=0,u=this.u;s<u.length;s++){var i=u[s];st(l,e,i,i.f,i.u,i.c,n,i.o),e+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0),n+=i.b}ut(l,e,this.u.length,r,n),this.ondata(null,l,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var n=t[e];n.t()}this.d=2},e})();d.Zip=pt;function _t(e,n,r){if(r||(r=n,n={}),typeof r!="function")throw"no callback";var o={};Ke(e,"",o,n);var a=Object.keys(o),i=a.length,l=0,s=0,u=i,c=new Array(i),d=[],m=function(){for(var e=0;e<d.length;++e)d[e]()},p=function(){var e=new t(s+22),n=l,o=s-l;s=0;for(var a=0;a<u;++a){var i=c[a];try{var d=i.c.length;st(e,s,i,i.f,i.u,d);var m=30+i.f.length+lt(i.extra),p=s+m;e.set(i.c,p),st(e,l,i,i.f,i.u,d,s,i.m),l+=16+m+(i.m?i.m.length:0),s=p+d}catch(e){return r(e,null)}}ut(e,l,c.length,o,n),r(null,e)};i||p();for(var _=function(e){var t=a[e],n=o[t],u=n[0],_=n[1],f=H(),g=u.length;f.p(u);var h=tt(t),y=h.length,C=_.comment,b=C&&tt(C),v=b&&b.length,S=lt(_.extra),R=_.level==0?0:8,L=function(n,o){if(n)m(),r(n,null);else{var a=o.length;c[e]=j(_,{size:g,crc:f.d(),c:o,f:h,m:b,u:y!=t.length||b&&C.length!=v,compression:R}),l+=30+y+S+a,s+=76+2*(y+S)+(v||0)+a,--i||p()}};if(y>65535&&L("filename too long",null),!R)L(null,u);else if(g<16e4)try{L(null,Re(u,_))}catch(e){L(e,null)}else d.push(Se(u,_,L))},f=0;f<u;++f)_(f);return m}d.zip=_t;function ft(e,n){n||(n={});var r={},o=[];Ke(e,"",r,n);var a=0,i=0;for(var l in r){var s=r[l],u=s[0],c=s[1],d=c.level==0?0:8,m=tt(l),p=m.length,_=c.comment,f=_&&tt(_),g=f&&f.length,h=lt(c.extra);if(p>65535)throw"filename too long";var y=d?Re(u,c):u,C=y.length,b=H();b.p(u),o.push(j(c,{size:u.length,crc:b.d(),c:y,f:m,m:f,u:p!=l.length||f&&_.length!=g,o:a,compression:d})),a+=30+p+h+C,i+=76+2*(p+h)+(g||0)+C}for(var v=new t(i+22),S=a,R=i-a,L=0;L<o.length;++L){var m=o[L];st(v,m.o,m,m.f,m.u,m.c.length);var E=30+m.f.length+lt(m.extra);v.set(m.c,m.o+E),st(v,a,m,m.f,m.u,m.c.length,m.o,m.m),a+=16+E+(m.m?m.m.length:0)}return ut(v,a,o.length,R,S),v}d.zipSync=ft;var gt=(function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e})();d.UnzipPassThrough=gt;var ht=(function(){function e(){var e=this;this.i=new Le(function(t,n){e.ondata(null,t,n)})}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(n){this.ondata(n,e,t)}},e.compression=8,e})();d.UnzipInflate=ht;var yt=(function(){function e(e,t){var n=this;t<32e4?this.i=new Le(function(e,t){n.ondata(null,e,t)}):(this.i=new Ee(function(e,t,r){n.ondata(e,t,r)}),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=x(e,0)),this.i.push(e,t)},e.compression=8,e})();d.AsyncUnzipInflate=yt;var Ct=(function(){function e(e){this.onfile=e,this.k=[],this.o={0:gt},this.p=q}return e.prototype.push=function(e,n){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var o=Math.min(this.c,e.length),a=e.subarray(0,o);if(this.c-=o,this.d?this.d.push(a,!this.c):this.k[0].push(a),e=e.subarray(o),e.length)return this.push(e,n)}else{var i=0,l=0,s=void 0,u=void 0;this.p.length?e.length?(u=new t(this.p.length+e.length),u.set(this.p),u.set(e,this.p.length)):u=this.p:u=e;for(var c=u.length,d=this.c,m=d&&this.d,p=function(){var e,t=ce(u,l);if(t==67324752){i=1,s=l,_.d=null,_.c=0;var n=ue(u,l+6),o=ue(u,l+8),a=n&2048,m=n&8,p=ue(u,l+26),f=ue(u,l+28);if(c>l+30+p+f){var g=[];_.k.unshift(g),i=2;var h=ce(u,l+18),y=ce(u,l+22),C=nt(u.subarray(l+30,l+=30+p),!a);h==4294967295?(e=m?[-2]:it(u,l),h=e[0],y=e[1]):m&&(h=-1),l+=f,_.c=h;var b,v={name:C,compression:o,start:function(){if(!v.ondata)throw"no callback";if(!h)v.ondata(null,q,!0);else{var e=r.o[o];if(!e)throw"unknown compression type "+o;b=h<0?new e(C):new e(C,h,y),b.ondata=function(e,t,n){v.ondata(e,t,n)};for(var t=0,n=g;t<n.length;t++){var a=n[t];b.push(a,!1)}r.k[0]==g&&r.c?r.d=b:b.push(q,!0)}},terminate:function(){b&&b.terminate&&b.terminate()}};h>=0&&(v.size=h,v.originalSize=y),_.onfile(v)}return"break"}else if(d){if(t==134695760)return s=l+=12+(d==-2&&8),i=3,_.c=0,"break";if(t==33639248)return s=l-=4,i=3,_.c=0,"break"}},_=this;l<c-4;++l){var f=p();if(f==="break")break}if(this.p=q,d<0){var g=i?u.subarray(0,s-12-(d==-2&&8)-(ce(u,s-16)==134695760&&4)):u.subarray(0,l);m?m.push(g,!!i):this.k[+(i==2)].push(g)}if(i&2)return this.push(u.subarray(l),n);this.p=u.subarray(l)}if(n){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e},e})();d.Unzip=Ct;function bt(e,n){if(typeof n!="function")throw"no callback";for(var r=[],o=function(){for(var e=0;e<r.length;++e)r[e]()},a={},i=e.length-22;ce(e,i)!=101010256;--i)if(!i||e.length-i>65558){n("invalid zip file",null);return}var l=ue(e,i+8);l||n(null,{});var s=l,u=ce(e,i+16),c=u==4294967295;if(c){if(i=ce(e,i-12),ce(e,i)!=101075792){n("invalid zip file",null);return}s=l=ce(e,i+32),u=ce(e,i+48)}for(var d=function(i){var s=at(e,u,c),d=s[0],m=s[1],p=s[2],_=s[3],f=s[4],g=s[5],h=ot(e,g);u=f;var y=function(e,t){e?(o(),n(e,null)):(a[_]=t,--l||n(null,a))};if(!d)y(null,x(e,h,h+m));else if(d==8){var C=e.subarray(h,h+m);if(m<32e4)try{y(null,Ie(C,new t(p)))}catch(e){y(e,null)}else r.push(ke(C,{size:p},y))}else y("unknown compression type "+d,null)},m=0;m<s;++m)d(m);return o}d.unzip=bt;function vt(e){for(var n={},r=e.length-22;ce(e,r)!=101010256;--r)if(!r||e.length-r>65558)throw"invalid zip file";var o=ue(e,r+8);if(!o)return{};var a=ce(e,r+16),i=a==4294967295;if(i){if(r=ce(e,r-12),ce(e,r)!=101075792)throw"invalid zip file";o=ce(e,r+32),a=ce(e,r+48)}for(var l=0;l<o;++l){var s=at(e,a,i),u=s[0],c=s[1],d=s[2],m=s[3],p=s[4],_=s[5],f=ot(e,_);if(a=p,!u)n[m]=x(e,f,f+c);else if(u==8)n[m]=Ie(e.subarray(f,f+c),new t(d));else throw"unknown compression type "+u}return n}d.unzipSync=vt}var _=!1;function f(){return _||(_=!0,p()),m.exports}function g(e){switch(e){case void 0:return f()}}a.exports=g}),null);
__d("fflate",["fflate-0.6.10"],(function(t,n,r,o,a,i){a.exports=n("fflate-0.6.10")()}),null);
__d("EncryptedBackupsDYIZipUtils",["EncryptedBackupsDYIFileUtils","asyncToGeneratorRuntime","fflate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m;function p(e,t,n,r,o,a){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l){var p=yield o("EncryptedBackupsDYIFileUtils").getRootFolderHandle(),_=yield p.getFileHandle("messages.zip",{create:!0});a("stream_file_start");var g=yield _.createWritable({keepExisting:!1,mode:"exclusive"}),h=new(o("fflate")).Zip,y=0;h.ondata=function(t,n,o){if(t){r.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Generic stream error"]))),a("stream_file_error"),l(t);return}y++,y%1e3===0&&r.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Writing chunk #",""])),y),g.write(n).catch(function(e){r.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error during data event"]))),a("stream_file_error"),l(e)}),o&&(r.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Finished ZIP file generation. Saving the results"]))),a("stream_file_end"),a("write_file_start"),g.close().then(function(){a("write_file_end"),r.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Closed the writing stream"]))),i()}).catch(function(e){r.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Error during end event"]))),a("write_file_error"),l(e)}))};for(var C of t){var b=C.threadName+".json",v=new(o("fflate")).ZipDeflate(b,{level:9}),S=new TextEncoder().encode(JSON.stringify(C,null,2));h.add(v),v.push(S,!0)}for(var R of n)yield f(h,R);h.end()}),_.apply(this,arguments)}function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.split("/").pop(),r=yield o("EncryptedBackupsDYIFileUtils").getMediaFolderHandle(),a=yield o("EncryptedBackupsDYIFileUtils").readFile(r,n!=null?n:t),i=yield a.arrayBuffer(),l=new Uint8Array(i),s=new(o("fflate")).ZipPassThrough(t);e.add(s),s.push(l,!0)}),g.apply(this,arguments)}l.generateZipFile=p}),98);
__d("EncryptedBackupsDYISingleton",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYIGenerateThreadMetadata","EncryptedBackupsDYISingletonFactory","EncryptedBackupsDYITypes","EncryptedBackupsDYIZipUtils","FBLogger","I64","LSIntEnum","MAWBridge","MAWQplProxy","WAHashUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=["senderId"],s,u,c,d,m,p,_,f,g,h,y,C,b,v=null;function S(){try{return WorkerGlobalScope!==void 0&&self instanceof WorkerGlobalScope}catch(e){return!1}}function R(e,t,n){if(v==null)switch(e){case o("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Armadillo:if(S())throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Armadillo can only be initialised in the main thread");v=o("EncryptedBackupsDYISingletonFactory").getMAWEncryptedBackupsDYISingleton(t,n);break;case o("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Instamadillo:if(!S())throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Instamadillo can only be initialised in the worker");v=o("EncryptedBackupsDYISingletonFactory").getIGDEncryptedBackupsDYISingleton(t,n);break}}function L(){if(v==null)throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton is not initialised. Please call EncryptedBackupsDYISingleton.initSingleton() first.");return v}var E=(function(){function t(e,t,n,r){this.$5=new Map,this.$6=new Set,this.$7=new Set,this.$8=new Map,this.$9=new Map,this.$10=new Map,this.$11=new Map,this.$12=new Map,this.$1=e,this.$2=t,this.$3=n,this.$4=r}var r=t.prototype;return r.getDB=function(){return this.$1()},r.getLogger=function(){return this.$4},r.getAllMediaUrls=function(){return Array.from(this.$5.values())},r.$13=function(t){return this.$5.get(t)},r.setMediaUrlByPlainTextHash=function(t,n){this.$5.has(t)||this.$5.set(t,n)},r.addThreadKeyToThreadsRestoreInProgress=function(t){this.$6.add(t)},r.isThreadRestoreInProgressForThreadKey=function(t){return this.$6.has(t)},r.deleteThreadKeyFromThreadsRestoreInProgress=function(t){this.$6.delete(t),this.$4.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Finished handling message range queries for thread with thread key ",". "," threads left"])),t,this.$6.size),this.$14()&&(this.$4.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),this.$15())},r.isThreadsRestoreComplete=function(){return this.$6.size===0},r.addPlaintextHashToAttachmentDownloadsInProgress=function(t){this.$7.add(t),this.$4.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Started processing attachment with plaintext hash ","."])),o("WAHashUtils").sanitisePlaintextHash(t))},r.deletePlaintextHashFromAttachmentDownloadsInProgress=function(t){this.$7.delete(t),this.$4.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Finished processing attachment with plaintext hash ",". "," attachments left"])),o("WAHashUtils").sanitisePlaintextHash(t),this.$7.size),this.$7.size<30&&this.$4.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Remaining attachments: ",""])),Array.from(this.$7).map(o("WAHashUtils").sanitisePlaintextHash).join(", ")),this.$14()&&(this.$4.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),this.$15())},r.isAttachmentDownloadInProgressForPlaintextHash=function(t){return this.$7.has(t)},r.isAttachmentDownloadCompleteForPlaintextHash=function(t){return!!this.$5.get(t)},r.isAttachmentDownloadComplete=function(){return this.$7.size===0},r.setMessagesByThreadKey=function(t,n,r){var e=this.getMessagesByThreadKey(t);e.set(n,r)},r.getMessagesByThreadKey=function(t){return this.$16(t)||this.$8.set(t,new Map),this.$8.get(t)},r.$16=function(t){return this.$8.has(t)},r.hasMessage=function(t,n){var e=this.$8.get(t);return e==null?!1:e.has(n)},r.getThreadIdForThreadKey=function(t){return this.$10.get(t)},r.getThreadKeyForThreadId=function(t){return this.$11.get(t)},r.setThreadMapping=function(t,n){this.$10.set(t,n),this.$11.set(n,t)},r.setThreadMetaDataByThreadKey=function(t,n,r){this.$9.set(t,{participants:n,threadName:r})},r.getThreadMetadataMap=function(){return this.$9},r.setContactNameForContactId=function(t,n){this.$12.set(t,n)},r.getContactNameForContactId=function(t){return this.$12.get(t)},r.getContactNameMap=function(){return this.$12},r.getOutput=function(){var t=this;return Array.from(this.getThreadMetadataMap(),function(n){var r=n[0],o=n[1],a=t.$16(r),i=a?Array.from(t.getMessagesByThreadKey(r),function(e){var n=e[0],r=e[1];return babelHelpers.extends({},r,{media:Array.from(r.media,function(e){var n=t.$13(e);return{uri:n!=null?"./"+n:"Failed to download media"}})})}):[];i=i.map(function(n){var r=n.senderId,o=babelHelpers.objectWithoutPropertiesLoose(n,e);if(r!=null&&o.senderName==="Unknown User"){var a=t.getContactNameForContactId(r);if(a!=null)return babelHelpers.extends({},o,{senderName:a})}return n});var l=i.sort(function(e,t){return typeof e.timestamp=="number"&&typeof t.timestamp=="number"?e.timestamp-t.timestamp:0});return babelHelpers.extends({},o,{messages:l})})},r.$14=function(){return this.isAttachmentDownloadComplete()&&this.isThreadsRestoreComplete()},r.$17=function(t){switch(t){case 0:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.InProgress;case 1:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed;case 2:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed;case-1:default:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.NotStarted}},r.updateDYIStatus=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,r=yield this.getDB();yield r.runInTransaction((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield t.encrypted_backups_dyi_backup_restore_status.put({currentStatus:(C||(C=o("LSIntEnum"))).ofNumber(e),pk:(b||(b=o("I64"))).zero})});return function(e){return t.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":521"),o("MAWBridge").getBridge().fireAndForget("event","updateDYIStatus",{qplEvent:this.$2,qplInstanceKeyE2E:(t=this.$3)!=null?t:void 0,status:this.$17(e)})});function t(t){return e.apply(this,arguments)}return t})(),r.$18=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this,t=new Set;this.getContactNameMap().forEach(function(e,n){e==="Unknown User"&&t.add(n)});var n=yield this.getDB(),r=yield o("EncryptedBackupsDYIGenerateThreadMetadata").getAllUnmappedContacts(n,t);r.forEach(function(t){var n=(b||(b=o("I64"))).to_string(t.id);e.setContactNameForContactId(n,t.name)}),this.$4.LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Fetched remaining contact names, total of "," contacts"])),this.getContactNameMap().size.toString())});function t(){return e.apply(this,arguments)}return t})(),r.$15=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this;this.logDYIQPLPoint("complete_dyi_flow_start"),yield this.$18(),this.$4.LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Generating output"])));var t=this.getOutput(),r=Array.from(this.$5.values());this.$4.LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Generating zip file"]))),yield o("EncryptedBackupsDYIZipUtils").generateZipFile(t,r,this.$4,function(t,n){e.logDYIQPLPoint(t,n)},n("asyncToGeneratorRuntime").asyncToGenerator(function*(){e.logDYIQPLPoint("complete_dyi_flow_end"),yield e.updateDYIStatus(1),e.clear()}),(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){e.$4.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate zip file: ",""])),t),e.logDYIQPLPoint("complete_dyi_flow_error"),yield e.updateDYIStatus(2),e.clear()});return function(e){return t.apply(this,arguments)}})())});function t(){return e.apply(this,arguments)}return t})(),r.exitDYIEarly=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){t!=null&&this.$4.LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["DYI Exiting Early - Found "," instamadillo threads"])),t),this.logDYIQPLPoint("dyi_exit_early",{int:{dyi_threads:t}}),yield this.updateDYIStatus(e?2:1),this.clear()});function t(t,n){return e.apply(this,arguments)}return t})(),r.clear=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$5=new Map,this.$6=new Set,this.$7=new Set,this.$8=new Map,this.$9=new Map;var e=yield o("EncryptedBackupsDYIFileUtils").getRootFolderHandle();yield e.removeEntry(o("EncryptedBackupsDYIFileUtils").DyiMediaFolder,{recursive:!0})});function t(){return e.apply(this,arguments)}return t})(),r.logDYIQPLPoint=function(t,n){this.$3!=null&&o("MAWQplProxy").sendQplPointThroughBridge(this.$2,t,{annotations:n,instanceKey:this.$3})},t})();l.initSingleton=R,l.getSingleton=L,l.EncryptedBackupsDYISingleton=E}),98);
__d("EncryptedBackupsDYISingletonFactory",["EncryptedBackupsDYISingleton","WATagsLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return new(o("EncryptedBackupsDYISingleton")).EncryptedBackupsDYISingleton(e,r("qpl")._(521478596,"1329"),t,o("WATagsLogger").TAGS(["labyrinth_web","labyrinth_dyi",t==null?"":t.toString()]))}function s(e,t){return new(o("EncryptedBackupsDYISingleton")).EncryptedBackupsDYISingleton(e,r("qpl")._(521479842,"2163"),t,o("WATagsLogger").TAGS(["igd_labyrinth_web","igd_dyi",t==null?"":t.toString()]))}l.getMAWEncryptedBackupsDYISingleton=e,l.getIGDEncryptedBackupsDYISingleton=s}),98);
__d("EncryptedBackupsDYIMediaDownloadHandlers",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYISingleton","FBLogger","Promise","WAResultOrError","asyncToGeneratorRuntime","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=yield o("EncryptedBackupsDYIFileUtils").getMediaFolderHandle(),l=t.split("/")[1],s=r("uuidv4")()+"."+l;yield o("EncryptedBackupsDYIFileUtils").writeFile(i,s,n);var u=o("EncryptedBackupsDYISingleton").getSingleton();return u.setMediaUrlByPlainTextHash(e,o("EncryptedBackupsDYIFileUtils").DyiMediaFolder+"/"+s),u.deletePlaintextHashFromAttachmentDownloadsInProgress(e),o("WAResultOrError").makeResult()});return function(n,r,o,a){return e.apply(this,arguments)}})(),u=function(){return r("FBLogger")("wmi_eb").debug("[DYIMediaPreviewHandler] Skipping previews for DYI"),(e||(e=n("Promise"))).resolve(o("WAResultOrError").makeResult())};l.DYIMediaDownloadHandler=s,l.DYIMediaPreviewHandler=u}),98);
__d("MAWHandleMediaPreviewBeforeDownloadApi",["MAWMediaPreviewDownloadManager","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r){return o("MAWMediaPreviewDownloadManager").markMediaPreviewAsDownloading(r),(e||(e=n("Promise"))).resolve()};l.handleMediaPreviewBeforeDownload=s}),98);
__d("MAWHandleMediaPreviewDownloadApi",["MAWBridgeTypesCreators","MAWDbMediaTxns","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWLoggerUtils","MAWMediaAfterTxns","MAWMediaDownloadStatus","MAWMediaDownloadStatusForUI","MAWMediaPreviewDownloadManager","MAWMediaUtils","MAWTransactionMode","MWFBLogger","WACryptoSha256","WAHashUtils","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWMediaLogger().tags([o("MAWLoggerUtils").Tag.MediaDownload,o("MAWLoggerUtils").Tag.MessageReceive,"MediaPreview"]),c=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=o("WAHashUtils").toPlaintextHash(yield o("WACryptoSha256").sha256(t));o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download",hash:e,status:r("MAWMediaDownloadStatus").DOWNLOADING,type:"preview"});var l=o("MAWMediaPreviewDownloadManager").getMediaPreviewDownloadingResolvable(e);return l!=null&&(l.resolve(new Blob([t],{type:"image/jpeg"})),o("MAWMediaPreviewDownloadManager").removeMediaPreviewDownloadingResolvable(e)),d(e,i,t,n,a)});return function(n,r,o,a){return e.apply(this,arguments)}})(),d=o("MAWIndexedDb").makeMsgrTransactor({media:o("MAWTransactionMode").READWRITE,messages:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"handleMediaPreviewDownload",function(t){return(function(n,a,i,l,c){return o("MAWDexieTable").dexieAll([o("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(t,n),o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(t,c)]).then(function(c){var d=c[0],m=c[1];if(u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Handling preview for main hash ","... preview hash ","..."])),o("WAHashUtils").sanitisePlaintextHash(n),o("WAHashUtils").sanitisePlaintextHash(a)),d==null)return o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"missing_media_on_save",hash:n,status:r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"preview"}),u.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Main media for preview is null. Type: ",""])),l),o("WAResultOrError").makeError("missing-media-on-save");var p=function(){switch(l){case"image":return t.media.update(d.mediaId,babelHelpers.extends({},d,{validatedImageInfo:babelHelpers.extends({},d.validatedImageInfo,{jpegThumbnail:i})}));case"video":return t.media.update(d.mediaId,babelHelpers.extends({},d,{validatedVideoInfo:babelHelpers.extends({},d.validatedVideoInfo,{jpegThumbnail:i})}));default:return o("MAWDexieTable").dexieResolve()}};return o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download_success",hash:n,status:r("MAWMediaDownloadStatus").SUCCESS,type:"preview"}),p().then(function(){return t.messages.where("msgId").anyOf(d.msgIds).toArray().then(function(e){return t.threads.where("jid").anyOf(e.map(function(e){return e.threadJid})).toArray().then(function(n){return o("MAWDexieTable").dexieAll(n.map(function(n){var r=o("MAWMediaUtils").createHdTypesForBridgeMedia(e),a=o("MAWBridgeTypesCreators").createBridgeMedia({chatJid:n.jid,filteredMsgIds:o("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(e,n.jid),hasMediaForUI:!0,hdTypes:r,media:d,sortOrderMs:m==null?void 0:m.sortOrderMs});return o("MAWMediaAfterTxns").handleNewMediaAfterTxnWithBridgeMedia(t,a,e)})).then(function(){return o("WAResultOrError").makeResult()})})})})})})});l.handleMediaPreviewDownload=c}),98);
__d("MAWHandleMediaPreviewDownloadAsFailedApi",["MAWMediaPreviewDownloadManager","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a){return o("MAWMediaPreviewDownloadManager").markMediaPreviewAsFailed(r,a),(e||(e=n("Promise"))).resolve()};l.handleMediaPreviewDownloadFailed=s}),98);
__d("MebWAMediaDownloader",["MAWHandleMediaPreviewBeforeDownloadApi","MAWHandleMediaPreviewDownloadApi","MAWHandleMediaPreviewDownloadAsFailedApi","WAAPI","WAIsMediaExpiredError","WALogger","WAStartMediaDownloadQplFlow","WATimeUtils","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e,t,n){this.mediaDownloadMetadata=e,this.downloadCallbacks=t,this.waApiDownloadCall=n}var a=t.prototype;return a.handle=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t,n=this.mediaDownloadMetadata.mediaEntry.mediaKeyTimestamp;if(n==null)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][WAMediaDownloader] Cannot download media - missing mediaKeyTimestamp"]))),this.handleError();var a=!o("WATimeUtils").happenedWithin(n,29*o("WATimeUtils").DAY_SECONDS),i=(t=this.mediaDownloadMetadata.isUrlRenewed)!=null?t:!1;if(!i&&(a||r("gkx")("23960")))return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] downloading media from MI directly"]))),this.handleUrlExpired();var l=this.mediaDownloadMetadata,u=l.hash,c=l.mediaEntry,d=l.protocolMsgId,m=yield this.waApiDownloadCall(u,c,d);return m.success?this.downloadCallbacks.onDownloadSuccess({mimeType:m.value.mimeType,plaintext:m.value.plaintext}):o("WAIsMediaExpiredError").isMediaExpiredError(m.error)?this.handleUrlExpired():this.handleError()});function a(){return t.apply(this,arguments)}return a})(),a.handleUrlExpired=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;return yield this.downloadCallbacks.onUrlExpired(),(e=this.mediaDownloadHandler)==null?void 0:e.handle()});function t(){return e.apply(this,arguments)}return t})(),a.handleError=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;return yield this.downloadCallbacks.onDownloadError(),(e=this.mediaDownloadHandler)==null?void 0:e.handle()});function t(){return e.apply(this,arguments)}return t})(),a.getDownloadMetadata=function(){return this.mediaDownloadMetadata},a.setNextHandler=function(t){this.mediaDownloadHandler=t},t})(),c=function(t,n,a){var e=o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"MebWAMediaDownloader",msgType:null,protocolMsgId:a,triggerUIView:null});return r("WAAPI").downloadMedia({downloadMediaMetric:e,handleMediaPreviewBeforeDownload:o("MAWHandleMediaPreviewBeforeDownloadApi").handleMediaPreviewBeforeDownload,handleMediaPreviewDownload:o("MAWHandleMediaPreviewDownloadApi").handleMediaPreviewDownload,handleMediaPreviewDownloadFailed:o("MAWHandleMediaPreviewDownloadAsFailedApi").handleMediaPreviewDownloadFailed,hash:t,mediaEntry:n,protocolMsgId:a})};l.MebWAMediaDownloader=u,l.MebWADownloadMediaFromWorker=c}),98);
__d("EncryptedBackupsDYIMessageProcessingUtils",["EncryptedBackupsDYIMediaDownloadHandlers","EncryptedBackupsDYISingleton","FBLogger","MAWBridge","MAWFrontendMediaUtils","MebWAMediaDownloader","Promise","WAHashUtils","WAJids","WALongInt","WAMediaUtils","WAProgressiveJpegGetScanLengths","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h;function y(e,t){return{isUnsent:!1,media:new Set,reactions:[],senderName:C(e),text:"",timestamp:t!=null?t:0,type:""}}function C(e){var t=o("EncryptedBackupsDYISingleton").getSingleton(),n="Unknown User";if(e!=null){var r=t.getContactNameForContactId(e);r!=null&&(n=r)}return n}function b(e,t,n,r){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=o("EncryptedBackupsDYISingleton").getSingleton(),l=i.getLogger(),s=l.TAGS([o("WAHashUtils").sanitisePlaintextHash(e)]);r("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Sending the media download bridge call for plaintext hash: %s",o("WAHashUtils").sanitisePlaintextHash(e));var u=yield o("MAWBridge").getBridge().sendAndReceive("backend","dyiDownloadMediaV2",{mediaEntry:a,plaintextHash:e,protocolMsgId:t,sortOrderMs:n});if(r("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Received the media download result from the bridge for plaintext hash: %s, success: %s, error: %s",o("WAHashUtils").sanitisePlaintextHash(e),u.success?"true":"false",u.error),u.success){var c=u.value,d=c.unvalidatedMimeType,m=c.validatedResult,h=m.skipValidation?d:m.mimeType,y=yield o("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(e,h,m.validatedPlaintext,t);if(!y.success){s.WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),y.error,y.payload),l.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),y.error,y.payload),i.deletePlaintextHashFromAttachmentDownloadsInProgress(e);return}}else{s.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),u.error,u.payload),l.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),u.error,u.payload),i.deletePlaintextHashFromAttachmentDownloadsInProgress(e);return}}),v.apply(this,arguments)}function S(t,r,a,i,l,p,_,f,g,y,C){var b=o("EncryptedBackupsDYISingleton").getSingleton(),v=b.getLogger(),S=v.TAGS([o("WAHashUtils").sanitisePlaintextHash(g)]),R={author:o("WAJids").toMsgrUserJid(_),chat:o("WAJids").toMsgrUserJid(l),externalId:f},L={hash:g,isUrlRenewed:!1,mediaEntry:i,protocolMsgId:R,sortOrderMs:y},E={onDownloadError:function(){return S.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"]))),v.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"]))),b.deletePlaintextHashFromAttachmentDownloadsInProgress(L.hash),(h||(h=n("Promise"))).resolve()},onDownloadSuccess:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){S.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Successfully downloaded media"])));var t=e.mimeType,n=e.plaintext;yield o("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(L.hash,t,n,R)});function t(t){return e.apply(this,arguments)}return t})(),onUrlExpired:function(){return S.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Media CDN URL has expired and should be renewed"]))),(h||(h=n("Promise"))).resolve()}},k=new(o("MebWAMediaDownloader")).MebWAMediaDownloader(L,E,t),I=i.serverMediaType,T=i.objectId;if(I!=null&&T!=null&&typeof y=="number"){var D={backupEntFbid:r,deliveryObjectId:T,hash:g,mediaType:I,messageId:f,productType:a,sortOrder:y,threadId:l,threadKey:p},x={onResignCdnUrlFailure:function(t){return S.WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),t.message),v.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),t.message),b.deletePlaintextHashFromAttachmentDownloadsInProgress(L.hash),(h||(h=n("Promise"))).resolve()},onResignCdnUrlSuccess:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function t(){return e.apply(this,arguments)}return t})()},$=C(D,x);k.setNextHandler($),$.setNextHandler(new(o("MebWAMediaDownloader")).MebWAMediaDownloader(L,E,t))}k.handle()}function R(e,t,n){var r,a,i,l,s,u,c,d,m,p,_,f=(r=e.integral)==null||(r=r.transport)==null||(r=r.ancillary)==null?void 0:r.mimetype;if(f==null)return o("WAResultOrError").makeError("mime-type-missing");var g=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(f,t).serverMediaType;if(g==null)return o("WAResultOrError").makeError("server-media-type-missing");var h=(a=e.integral)==null||(a=a.transport)==null||(a=a.integral)==null?void 0:a.directPath;if(h==null)return o("WAResultOrError").makeError("direct-path-missing");var y=(i=e.integral)==null||(i=i.transport)==null||(i=i.integral)==null?void 0:i.fileSha256;if(y==null)return o("WAResultOrError").makeError("plaintext-hash-missing");var C=o("WALongInt").maybeNumber((l=e.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.mediaKeyTimestamp);if(C==null)return o("WAResultOrError").makeError("media-key-timestamp-missing");var b;if(((s=e.ancillary)==null?void 0:s.scanLengths)!=null&&((u=e.ancillary)==null?void 0:u.scansSidecar)!=null){var v=e.ancillary,S=v.scanLengths,R=v.scansSidecar;b={scanLengths:S.map(o("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength),sidecar:R}}var L;if(((c=e.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.downloadableThumbnail)!=null){var E=e.integral.transport.ancillary.thumbnail.downloadableThumbnail,k=E.directPath,I=E.fileEncSha256,T=E.fileSha256,D=E.mediaKey,x=E.mediaKeyTimestamp,$=E.objectId;L={directPath:k,fileEncSha256:I,fileSha256:T,mediaKey:D,mediaKeyTimestamp:o("WALongInt").maybeNumber(x),objectId:$}}var P={directPath:h,downloadableThumbnail:L,fileEncSha256:(d=e.integral)==null||(d=d.transport)==null||(d=d.integral)==null?void 0:d.fileEncSha256,filename:n,fileSha256:y,mediaKey:(m=e.integral)==null||(m=m.transport)==null||(m=m.integral)==null?void 0:m.mediaKey,mediaKeyTimestamp:o("WATimeUtils").castToUnixTime(C),objectId:(p=e.integral)==null||(p=p.transport)==null||(p=p.ancillary)==null?void 0:p.objectId,progressiveJpegDetails:b,serverMediaType:g,size:o("WALongInt").maybeNumber((_=e.integral)==null||(_=_.transport)==null||(_=_.ancillary)==null?void 0:_.fileLength)};return o("WAResultOrError").makeResult(o("WAMediaUtils").rawDataToMediaEntry(P))}l.buildBaseDyiMessage=y,l.getSenderName=C,l.downloadMediaWithMediaManager=b,l.startMediaDownloadChain=S,l.decodeMediaEntryFromAttachmentPayload=R}),98);
__d("IndexedDbPolyfills",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.emit=function(t){for(var e=this.$1.get(t),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(e!==void 0)for(var a of e)a.apply(void 0,r);var i=this["on"+t];i!=null&&i.apply(void 0,r)},t.addEventListener=function(t,n,r){var e=this;r===void 0&&(r={});var o=r,a=o.signal,i=this.$1.get(t);i===void 0&&(i=new Set,this.$1.set(t,i)),i.add(n),a!=null&&(a.onabort=function(){e.removeEventListener(t,n)})},t.removeEventListener=function(t,n){var e=this.$1.get(t);e!==void 0&&e.delete(n)},e})(),l=function(){return function(t,n){var r=this.openCursor(t!=null?t:null),o=[],a=new e;return r.onsuccess=function(e){var t=e.target.result;if(t!=null&&(n===void 0||o.length<n))o.push(t.value),t.continue();else{a.result=o,a.onsuccess==null||a.onsuccess({target:{readyState:"done",result:o}});return}},r.onerror=function(e){a.onerror==null||a.onerror(e)},a}},s=typeof window!="undefined"?window:self;typeof s.IDBObjectStore!="undefined"&&s.IDBObjectStore.prototype.getAll===void 0&&(s.IDBObjectStore.prototype.getAll=l()),i.IDBRequest=e,i.getAll=l}),66);
__d("InstamadilloCoreTypeActionLog.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={},s={};e.name="ActionLog",e.internalSpec={actionLogReaction:[1,o("WAProtoConst").TYPES.MESSAGE,s],__oneofs__:{actionLogSubtype:["actionLogReaction"]}},s.name="ActionLogReaction",s.internalSpec={emojiUnicode:[1,o("WAProtoConst").TYPES.STRING]},l.ActionLogSpec=e,l.ActionLogReactionSpec=s}),98);
__d("InstamadilloCoreTypeAdminMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={DEVICE_ADMIN_MESSAGE_TYPE_NONE:0,DEVICE_ADMIN_MESSAGE_TYPE_LOCAL_USER_CHANGED_IDENTITY_KEY_NAMED_DEVICE:1,DEVICE_ADMIN_MESSAGE_TYPE_SECURITY_ALERT_PARTICIPANT_KEY_CHANGE:2,DEVICE_ADMIN_MESSAGE_TYPE_SECURITY_ALERT_PARTICIPANT_NEW_LOGIN:3},s={},u={};s.name="AdminMessage",s.internalSpec={deviceAdminMessage:[1,o("WAProtoConst").TYPES.MESSAGE,u],__oneofs__:{adminMessageSubtype:["deviceAdminMessage"]}},u.name="DeviceAdminMessage",u.internalSpec={deviceAdminMessageType:[1,o("WAProtoConst").TYPES.ENUM,e],deviceName:[2,o("WAProtoConst").TYPES.STRING]},l.DEVICE_ADMIN_MESSAGE_TYPE=e,l.AdminMessageSpec=s,l.DeviceAdminMessageSpec=u}),98);
__d("InstamadilloCoreTypeMedia.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={PJPEG_SCAN_CONFIGURATION_UNSPECIFIED:0,PJPEG_SCAN_CONFIGURATION_WA:1,PJPEG_SCAN_CONFIGURATION_E15:2,PJPEG_SCAN_CONFIGURATION_E35:3},u={RAVEN_VIEW_MODEL_UNSPECIFIED:0,RAVEN_VIEW_MODEL_ONCE:1,RAVEN_VIEW_MODEL_REPLAYABLE:2,RAVEN_VIEW_MODEL_PERMANENT:3},c={UNSET:0,NONE:1,NUDE:2},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={};d.name="Media",d.internalSpec={staticPhoto:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,m],voice:[2,e.TYPES.MESSAGE,p],video:[3,e.TYPES.MESSAGE,_],raven:[4,e.TYPES.MESSAGE,h],gif:[5,e.TYPES.MESSAGE,f],avatarSticker:[6,e.TYPES.MESSAGE,g],__oneofs__:{media:["staticPhoto","voice","video","raven","gif","avatarSticker"]}},m.name="StaticPhoto",m.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],height:[2,e.TYPES.INT32],width:[3,e.TYPES.INT32],scanLengths:[4,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.INT32],thumbnail:[5,e.TYPES.MESSAGE,C],pjpegScanConfiguration:[6,e.TYPES.ENUM,s]},p.name="Voice",p.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],duration:[2,e.TYPES.INT32],waveforms:[3,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.FLOAT],waveformSamplingFrequencyHz:[4,e.TYPES.INT32]},_.name="Video",_.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],height:[2,e.TYPES.INT32],width:[3,e.TYPES.INT32],thumbnail:[4,e.TYPES.MESSAGE,C],videoExtraMetadata:[5,e.TYPES.MESSAGE,v]},f.name="Gif",f.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],height:[2,e.TYPES.INT32],width:[3,e.TYPES.INT32],isSticker:[4,e.TYPES.BOOL],stickerId:[5,e.TYPES.STRING],gifUrl:[6,e.TYPES.STRING],gifSize:[7,e.TYPES.INT32],isRandom:[8,e.TYPES.BOOL]},g.name="AvatarSticker",g.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],isAnimated:[2,e.TYPES.BOOL],stickerId:[3,e.TYPES.STRING],stickerTemplate:[4,e.TYPES.STRING],nuxType:[5,e.TYPES.INT32]},h.name="Raven",h.internalSpec={viewMode:[1,e.TYPES.ENUM,u],content:[2,e.TYPES.MESSAGE,y]},y.name="RavenContent",y.internalSpec={staticPhoto:[1,e.TYPES.MESSAGE,m],video:[2,e.TYPES.MESSAGE,_],__oneofs__:{ravenContent:["staticPhoto","video"]}},C.name="Thumbnail",C.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],height:[2,e.TYPES.INT32],width:[3,e.TYPES.INT32]},b.name="CommonMediaTransport",b.internalSpec={mediaId:[1,e.TYPES.STRING],fileSha256:[2,e.TYPES.STRING],mediaKey:[3,e.TYPES.STRING],fileEncSha256:[4,e.TYPES.STRING],directPath:[5,e.TYPES.STRING],mediaKeyTimestamp:[6,e.TYPES.STRING],sidecar:[7,e.TYPES.STRING],fileLength:[8,e.TYPES.INT32],mimetype:[9,e.TYPES.STRING],objectId:[10,e.TYPES.STRING]},v.name="VideoExtraMetadata",v.internalSpec={uploadMosClientScore:[1,e.TYPES.FLOAT]},l.PJPEG_SCAN_CONFIGURATION=s,l.RAVEN_VIEW_MODE=u,l.MEDIA_INTERVENTION_TYPE=c,l.MediaSpec=d,l.StaticPhotoSpec=m,l.VoiceSpec=p,l.VideoSpec=_,l.GifSpec=f,l.AvatarStickerSpec=g,l.RavenSpec=h,l.RavenContentSpec=y,l.ThumbnailSpec=C,l.CommonMediaTransportSpec=b,l.VideoExtraMetadataSpec=v}),98);
__d("InstamadilloCoreTypeCollection.pb",["InstamadilloCoreTypeMedia.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="Collection",e.internalSpec={name:[1,o("WAProtoConst").TYPES.STRING],media:[2,o("WAProtoConst").FLAGS.REPEATED|o("WAProtoConst").TYPES.MESSAGE,o("InstamadilloCoreTypeMedia.pb").MediaSpec]},l.CollectionSpec=e}),98);
__d("InstamadilloCoreTypeLink.pb",["InstamadilloCoreTypeMedia.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.name="Link",s.internalSpec={text:[1,(e=o("WAProtoConst")).TYPES.STRING],linkContext:[2,e.TYPES.MESSAGE,u]},u.name="LinkContext",u.internalSpec={linkImageUrl:[1,e.TYPES.MESSAGE,c],linkPreviewTitle:[2,e.TYPES.STRING],linkUrl:[3,e.TYPES.STRING],linkSummary:[4,e.TYPES.STRING],linkMusicPreviewUrl:[5,e.TYPES.STRING],linkMusicPreviewCountriesAllowed:[6,e.FLAGS.REPEATED|e.TYPES.STRING],linkPreviewThumbnail:[7,e.TYPES.MESSAGE,o("InstamadilloCoreTypeMedia.pb").ThumbnailSpec],linkPreviewBody:[8,e.TYPES.STRING]},c.name="ImageUrl",c.internalSpec={url:[1,e.TYPES.STRING],width:[2,e.TYPES.INT32],height:[3,e.TYPES.INT32]},l.LinkSpec=s,l.LinkContextSpec=u,l.ImageUrlSpec=c}),98);
__d("InstamadilloCoreTypeText.pb",["InstamadilloCoreTypeMedia.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={TEXT_FORMAT_STYLE_UNSPECIFIED:0,TEXT_FORMAT_STYLE_BOLD:1,TEXT_FORMAT_STYLE_ITALIC:2,TEXT_FORMAT_STYLE_STRIKETHROUGH:3,TEXT_FORMAT_STYLE_UNDERLINE:4,TEXT_FORMAT_STYLE_INVALID:5},u={},c={},d={},m={},p={};u.name="Text",u.internalSpec={text:[1,(e=o("WAProtoConst")).TYPES.STRING],isSuggestedReply:[2,e.TYPES.BOOL],postbackPayload:[3,e.TYPES.STRING],powerUpData:[4,e.TYPES.MESSAGE,c],commands:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d],animatedEmojiCharacterRanges:[6,e.FLAGS.REPEATED|e.TYPES.MESSAGE,p]},c.name="PowerUpsData",c.internalSpec={style:[1,e.TYPES.INT32],mediaAttachment:[2,e.TYPES.MESSAGE,o("InstamadilloCoreTypeMedia.pb").CommonMediaTransportSpec]},d.name="CommandRangeData",d.internalSpec={offset:[1,e.TYPES.INT32],length:[2,e.TYPES.INT32],type:[3,e.TYPES.INT32],fbid:[4,e.TYPES.STRING],userOrThreadFbid:[5,e.TYPES.STRING]},m.name="FormattedText",m.internalSpec={offset:[1,e.TYPES.INT32],length:[2,e.TYPES.INT32],style:[3,e.TYPES.ENUM,s]},p.name="AnimatedEmojiCharacterRange",p.internalSpec={offset:[1,e.TYPES.INT32],length:[2,e.TYPES.INT32]},l.TEXT_FORMAT_STYLE=s,l.TextSpec=u,l.PowerUpsDataSpec=c,l.CommandRangeDataSpec=d,l.FormattedTextSpec=m,l.AnimatedEmojiCharacterRangeSpec=p}),98);
__d("InstamadilloXmaContentRef.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={XMA_ACTION_TYPE_UNSPECIFIED:0,XMA_ACTION_TYPE_SHARE:1,XMA_ACTION_TYPE_REPLY:2,XMA_ACTION_TYPE_REACT:3,XMA_ACTION_TYPE_MENTION:4},u={RECEIVER_FETCH_CONTENT_TYPE_UNSPECIFIED:0,RECEIVER_FETCH_CONTENT_TYPE_NOTE:1,RECEIVER_FETCH_CONTENT_TYPE_STORY:2,RECEIVER_FETCH_CONTENT_TYPE_PROFILE:3,RECEIVER_FETCH_CONTENT_TYPE_CLIP:4,RECEIVER_FETCH_CONTENT_TYPE_FEED:5,RECEIVER_FETCH_CONTENT_TYPE_LIVE:6,RECEIVER_FETCH_CONTENT_TYPE_COMMENT:7,RECEIVER_FETCH_CONTENT_TYPE_LOCATION_SHARE:8,RECEIVER_FETCH_CONTENT_TYPE_REELS_AUDIO:9,RECEIVER_FETCH_CONTENT_TYPE_MEDIA_NOTE:10,RECEIVER_FETCH_CONTENT_TYPE_STORY_HIGHLIGHT:11,RECEIVER_FETCH_CONTENT_TYPE_SOCIAL_CONTEXT:12},c={MEDIA_NOTE_FETCH_PARAMS_MESSAGE_TYPE_UNSPECIFIED:0,MEDIA_NOTE_FETCH_PARAMS_MESSAGE_TYPE_MENTION:1,MEDIA_NOTE_FETCH_PARAMS_MESSAGE_TYPE_REPLY:2},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={};d.name="XmaContentRef",d.internalSpec={actionType:[1,(e=o("WAProtoConst")).TYPES.ENUM,s],contentType:[2,e.TYPES.ENUM,u],targetUrl:[3,e.TYPES.STRING],userName:[4,e.TYPES.STRING],ownerFbid:[5,e.TYPES.STRING],fetchParams:[6,e.TYPES.MESSAGE,m]},m.name="ReceiverFetchXmaFetchParams",m.internalSpec={noteFetchParams:[1,e.TYPES.MESSAGE,p],storyFetchParams:[2,e.TYPES.MESSAGE,_],profileFetchParams:[3,e.TYPES.MESSAGE,f],clipFetchParams:[4,e.TYPES.MESSAGE,g],feedFetchParams:[5,e.TYPES.MESSAGE,h],liveFetchParams:[6,e.TYPES.MESSAGE,y],commentFetchParams:[7,e.TYPES.MESSAGE,C],locationShareFetchParams:[8,e.TYPES.MESSAGE,b],reelsAudioFetchParams:[9,e.TYPES.MESSAGE,v],mediaNoteFetchParams:[10,e.TYPES.MESSAGE,S],socialContextFetchParams:[11,e.TYPES.MESSAGE,R],__oneofs__:{receiverFetchXmaFetchParams:["noteFetchParams","storyFetchParams","profileFetchParams","clipFetchParams","feedFetchParams","liveFetchParams","commentFetchParams","locationShareFetchParams","reelsAudioFetchParams","mediaNoteFetchParams","socialContextFetchParams"]}},p.name="ReceiverFetchXmaNoteFetchParams",p.internalSpec={noteIgid:[1,e.TYPES.STRING]},_.name="ReceiverFetchXmaStoryFetchParams",_.internalSpec={storyIgid:[1,e.TYPES.STRING],reelId:[2,e.TYPES.STRING]},f.name="ReceiverFetchXmaProfileFetchParams",f.internalSpec={profileIgid:[1,e.TYPES.STRING]},g.name="ReceiverFetchXmaClipFetchParams",g.internalSpec={mediaIgid:[1,e.TYPES.STRING]},h.name="ReceiverFetchXmaFeedFetchParams",h.internalSpec={mediaIgid:[1,e.TYPES.STRING],carouselShareChildMediaIgid:[2,e.TYPES.STRING]},y.name="ReceiverFetchXmaLiveFetchParams",y.internalSpec={liveIgid:[1,e.TYPES.STRING]},C.name="ReceiverFetchXmaCommentFetchParams",C.internalSpec={commentFbid:[1,e.TYPES.STRING]},b.name="ReceiverFetchXmaLocationShareFetchParams",b.internalSpec={locationIgid:[1,e.TYPES.STRING]},v.name="ReceiverFetchXmaReelsAudioFetchParams",v.internalSpec={audioIgid:[1,e.TYPES.STRING]},S.name="ReceiverFetchXmaMediaNoteFetchParams",S.internalSpec={mediaNoteIgid:[1,e.TYPES.STRING],messageType:[2,e.TYPES.ENUM,c]},R.name="ReceiverFetchXmaSocialContextFetchParams",R.internalSpec={mediaIgid:[1,e.TYPES.STRING]},l.XMA_ACTION_TYPE=s,l.RECEIVER_FETCH_CONTENT_TYPE=u,l.MEDIA_NOTE_FETCH_PARAMS_MESSAGE_TYPE=c,l.XmaContentRefSpec=d,l.ReceiverFetchXmaFetchParamsSpec=m,l.ReceiverFetchXmaNoteFetchParamsSpec=p,l.ReceiverFetchXmaStoryFetchParamsSpec=_,l.ReceiverFetchXmaProfileFetchParamsSpec=f,l.ReceiverFetchXmaClipFetchParamsSpec=g,l.ReceiverFetchXmaFeedFetchParamsSpec=h,l.ReceiverFetchXmaLiveFetchParamsSpec=y,l.ReceiverFetchXmaCommentFetchParamsSpec=C,l.ReceiverFetchXmaLocationShareFetchParamsSpec=b,l.ReceiverFetchXmaReelsAudioFetchParamsSpec=v,l.ReceiverFetchXmaMediaNoteFetchParamsSpec=S,l.ReceiverFetchXmaSocialContextFetchParamsSpec=R}),98);
__d("InstamadilloAddMessage.pb",["InstamadilloCoreTypeActionLog.pb","InstamadilloCoreTypeAdminMessage.pb","InstamadilloCoreTypeCollection.pb","InstamadilloCoreTypeLink.pb","InstamadilloCoreTypeMedia.pb","InstamadilloCoreTypeText.pb","InstamadilloXmaContentRef.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={PLACEHOLDER_TYPE_NONE:0,PLACEHOLDER_TYPE_DECRYPTION_FAILURE:1,PLACEHOLDER_TYPE_NOT_SUPPORTED_NEED_UPDATE:2,PLACEHOLDER_TYPE_DEVICE_UNAVAILABLE:3,PLACEHOLDER_TYPE_NOT_SUPPORTED_NOT_RECOVERABLE:4},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={};u.name="AddMessagePayload",u.internalSpec={content:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,c],metadata:[2,e.TYPES.MESSAGE,d]},c.name="AddMessageContent",c.internalSpec={text:[1,e.TYPES.MESSAGE,o("InstamadilloCoreTypeText.pb").TextSpec],like:[2,e.TYPES.MESSAGE,h],link:[3,e.TYPES.MESSAGE,o("InstamadilloCoreTypeLink.pb").LinkSpec],receiverFetchXma:[4,e.TYPES.MESSAGE,y],media:[5,e.TYPES.MESSAGE,o("InstamadilloCoreTypeMedia.pb").MediaSpec],placeholder:[6,e.TYPES.MESSAGE,C],collection:[7,e.TYPES.MESSAGE,o("InstamadilloCoreTypeCollection.pb").CollectionSpec],adminMessage:[8,e.TYPES.MESSAGE,o("InstamadilloCoreTypeAdminMessage.pb").AdminMessageSpec],actionLog:[9,e.TYPES.MESSAGE,o("InstamadilloCoreTypeActionLog.pb").ActionLogSpec],__oneofs__:{addMessageContent:["text","like","link","receiverFetchXma","media","placeholder","collection","adminMessage","actionLog"]}},d.name="AddMessageMetadata",d.internalSpec={sendSilently:[1,e.TYPES.BOOL],privateReplyInfo:[2,e.TYPES.MESSAGE,_],repliedToMessage:[3,e.TYPES.MESSAGE,m],forwardingParams:[4,e.TYPES.MESSAGE,f],ephemeralityParams:[5,e.TYPES.MESSAGE,g]},m.name="RepliedToMessage",m.internalSpec={repliedToMessageOtid:[1,e.TYPES.STRING],repliedToMessageWaServerTimeSec:[2,e.TYPES.STRING],repliedToMessageCollectionItemId:[3,e.TYPES.STRING],omMicroSecTs:[4,e.TYPES.MESSAGE,p]},p.name="OpenMessageMicroSecondTimestamp",p.internalSpec={timestampMs:[1,e.TYPES.INT64],microSecondsBits:[2,e.TYPES.INT32]},_.name="PrivateReplyInfo",_.internalSpec={commentId:[1,e.TYPES.STRING],postLink:[2,e.TYPES.STRING]},f.name="ForwardingParams",f.internalSpec={forwardedThreadId:[1,e.TYPES.STRING]},g.name="EphemeralityParams",g.internalSpec={ephemeralDurationSec:[1,e.TYPES.INT64]},h.name="Like",h.internalSpec={},y.name="ReceiverFetchXma",y.internalSpec={contentRef:[1,e.TYPES.STRING],text:[2,e.TYPES.STRING],media:[3,e.TYPES.MESSAGE,o("InstamadilloCoreTypeMedia.pb").MediaSpec],xmaContentRef:[4,e.TYPES.MESSAGE,o("InstamadilloXmaContentRef.pb").XmaContentRefSpec]},C.name="Placeholder",C.internalSpec={placeholderType:[1,e.TYPES.ENUM,s]},l.PLACEHOLDER_TYPE=s,l.AddMessagePayloadSpec=u,l.AddMessageContentSpec=c,l.AddMessageMetadataSpec=d,l.RepliedToMessageSpec=m,l.OpenMessageMicroSecondTimestampSpec=p,l.PrivateReplyInfoSpec=_,l.ForwardingParamsSpec=f,l.EphemeralityParamsSpec=g,l.LikeSpec=h,l.ReceiverFetchXmaSpec=y,l.PlaceholderSpec=C}),98);
__d("InstamadilloDeleteMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="DeleteMessagePayload",e.internalSpec={messageOtid:[1,o("WAProtoConst").TYPES.STRING]},l.DeleteMessagePayloadSpec=e}),98);
__d("InstamadilloSupplementMessage.pb",["InstamadilloCoreTypeMedia.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={};s.name="SupplementMessagePayload",s.internalSpec={targetMessageOtid:[1,(e=o("WAProtoConst")).TYPES.STRING],uniquingKeyForSupplementalData:[2,e.TYPES.STRING],content:[3,e.TYPES.MESSAGE,u],targetMessageWaServerTimeSec:[4,e.TYPES.STRING],targetWaThreadId:[5,e.TYPES.STRING]},u.name="SupplementMessageContent",u.internalSpec={reaction:[1,e.TYPES.MESSAGE,d],contentView:[2,e.TYPES.MESSAGE,m],editText:[3,e.TYPES.MESSAGE,p],mediaReaction:[4,e.TYPES.MESSAGE,c],originalTransportPayload:[5,e.TYPES.MESSAGE,_],mediaInterventions:[6,e.TYPES.MESSAGE,f],__oneofs__:{supplementMessageContent:["reaction","contentView","editText","mediaReaction","originalTransportPayload","mediaInterventions"]}},c.name="MediaReaction",c.internalSpec={mediaId:[1,e.TYPES.STRING],reaction:[2,e.TYPES.MESSAGE,d]},d.name="Reaction",d.internalSpec={reactionType:[1,e.TYPES.STRING],reactionStatus:[2,e.TYPES.STRING],emoji:[3,e.TYPES.STRING],superReactType:[4,e.TYPES.STRING],actionLogOtid:[5,e.TYPES.STRING]},m.name="ContentView",m.internalSpec={seen:[1,e.TYPES.BOOL],screenshotted:[2,e.TYPES.BOOL],replayed:[3,e.TYPES.BOOL],mimetype:[4,e.TYPES.STRING],objectId:[5,e.TYPES.STRING]},p.name="EditText",p.internalSpec={newContent:[1,e.TYPES.STRING],editCount:[2,e.TYPES.INT32]},_.name="OriginalTransportPayload",_.internalSpec={originalTransportPayload:[1,e.TYPES.BYTES]},f.name="MediaInterventions",f.internalSpec={mediaId:[1,e.TYPES.STRING],interventionType:[2,e.TYPES.ENUM,o("InstamadilloCoreTypeMedia.pb").MEDIA_INTERVENTION_TYPE]},l.SupplementMessagePayloadSpec=s,l.SupplementMessageContentSpec=u,l.MediaReactionSpec=c,l.ReactionSpec=d,l.ContentViewSpec=m,l.EditTextSpec=p,l.OriginalTransportPayloadSpec=_,l.MediaInterventionsSpec=f}),98);
__d("InstamadilloTransportPayload.pb",["InstamadilloAddMessage.pb","InstamadilloDeleteMessage.pb","InstamadilloSupplementMessage.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={PAYLOAD_CREATOR_UNSPECIFIED:0,PAYLOAD_CREATOR_IGIOS:1,PAYLOAD_CREATOR_IG4A:2,PAYLOAD_CREATOR_WWW:3,PAYLOAD_CREATOR_IGLITE:4},u={},c={};u.name="TransportPayload",u.internalSpec={franking:[4,(e=o("WAProtoConst")).TYPES.MESSAGE,c],openEb:[5,e.TYPES.BOOL],isE2EeAttributed:[6,e.TYPES.BOOL],payloadCreator:[7,e.TYPES.ENUM,s],add:[1,e.TYPES.MESSAGE,o("InstamadilloAddMessage.pb").AddMessagePayloadSpec],delete:[2,e.TYPES.MESSAGE,o("InstamadilloDeleteMessage.pb").DeleteMessagePayloadSpec],supplement:[3,e.TYPES.MESSAGE,o("InstamadilloSupplementMessage.pb").SupplementMessagePayloadSpec],__oneofs__:{transportPayload:["add","delete","supplement"]}},c.name="Franking",c.internalSpec={frankingKey:[1,e.TYPES.BYTES],frankingVersion:[2,e.TYPES.INT32]},l.PAYLOAD_CREATOR=s,l.TransportPayloadSpec=u,l.FrankingSpec=c}),98);
__d("MAWBridgeSearchMsg",["MAWCurrentUser","MAWVault","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t=!0);var n=e,r=o("MAWCurrentUser").getID(),a=e.author,i=e.externalId,l=e.msgId,s=e.threadJid;if(s==null)return null;var u=n.content,c=n.sortOrderMs,d={chatJid:s,externalId:i,msg:{msgId:l,sender:o("WAJids").authorToUserId(a,r),ts:e.canonicalTs},sortOrderMs:c},m=u;return babelHelpers.extends({},d,{msg:babelHelpers.extends({},d.msg,{content:m!=null?o("MAWVault").isVaulted(m)?t?m:o("MAWVault").unvault(m):t?o("MAWVault").vault(m):m:void 0})})}var s="message_content_search",u="non_message_content_search";l.createBridgeSearchMsg=e,l.MESSAGE_CONTENT_SEARCH=s,l.NON_MESSAGE_CONTENT_SEARCH=u}),98);
__d("MAWCatQuery.graphql",["cr:11203"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:11203")}),34);
__d("MAWCatQuery",["MAWCatQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("MAWCatQuery.graphql"),u=s;l.default=u}),98);
__d("MAWCatQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29559957360285299"}),null);
__d("MAWCatQuery.instagram.graphql",["MAWCatQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"SecureMessageOverWACATGraphResult",kind:"LinkedField",name:"secure_message_over_wa_cat_query",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_serialized_cat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_seconds",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWCatQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MAWCatQuery",selections:e},params:{id:n("MAWCatQuery_instagramRelayOperation"),metadata:{},name:"MAWCatQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("MAWCryptoAuthToken",["FBLogger","MAWCatQuery","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null||e.secure_message_over_wa_cat_query==null||e.secure_message_over_wa_cat_query.encrypted_serialized_cat==null||e.secure_message_over_wa_cat_query.expiration_time_in_seconds==null){var t,n;return r("FBLogger")("maw_device_reg").warn("Crypto Auth Token was null or incomplete %s:%s:%s:%s",e==null,(e==null?void 0:e.secure_message_over_wa_cat_query)==null,(e==null||(t=e.secure_message_over_wa_cat_query)==null?void 0:t.encrypted_serialized_cat)==null,e==null||(n=e.secure_message_over_wa_cat_query)==null?void 0:n.expiration_time_in_seconds),{error:"Crypto Auth Token was null or incomplete"}}return{success:{encrypted_serialized_cat:e.secure_message_over_wa_cat_query.encrypted_serialized_cat,expiration_time_in_seconds:e.secure_message_over_wa_cat_query.expiration_time_in_seconds}}}function s(t){return o("relay-runtime").fetchQuery(t,r("MAWCatQuery"),{}).toPromise().then(e).then(function(e){if(e.error!==null&&e.error!==void 0)throw r("FBLogger")("maw_device_reg").mustfixThrow("[MAWCryptoAuthToken] Error while fetching CAT from GraphQL: %s",e.error);return e.success})}l.processCatResponse=e,l.fetchFreshCAT=s}),98);
__d("MAWEncryptionIndexedDbV2",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","IndexedDbPolyfills","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MWEARKeychainV3","Promise","QPLUserFlow","WALogger","WAWorkerGlobalScope","err","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;n("IndexedDbPolyfills");var c="browserEncryptionMetaV2",d="version",m=1,p=6e4,_=null,f=null,g=null;function h(){return _}function y(){return _!=null}var C=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function b(e,t){t===void 0&&(t=0);var a=o("MAWCurrentUser").getID();return t>m?(L(e,"ear_idb_retry_failed_max_reached"),(u||(u=n("Promise"))).reject(new C)):_!=null?(L(e,"ear_db_exists"),(u||(u=n("Promise"))).resolve()):indexedDB==null?(L(e,"ear_idb_unavailable"),(u||(u=n("Promise"))).reject(r("err")("IndexedDB API not available"))):(L(e,"ear_db_open_start",{bool:{browserLockEnabled:r("BrowserLockManager")!=null}}),new(u||(u=n("Promise")))(function(n,i){var l=function(o){b(e,t+1).then(n).catch(function(e){if(e instanceof C)return i(o);i(e)})};try{g=o("MAWIndexedDbMetadata").encryptionDbName(a);var u=indexedDB.open(g),m=o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("IndexedDB initialisation timeout in %s flow, isInWorker: %s, openRequest: %s",String(e),(s||(s=r("ExecutionEnvironment"))).isInWorker?"true":"false",u.readyState))},p);u.onupgradeneeded=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),L(e,"ear_db_upgrade_start");var n=t.target.result;if(!n.objectStoreNames.contains(c)){var r=n.createObjectStore(c,{autoIncrement:!0,keyPath:"id"});r.createIndex(d,d,{unique:!0})}L(e,"ear_db_upgrade_end")},u.onblocked=function(){L(e,"ear_db_open_blocked"),o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("EAR Open timed out while blocked"))},2e3)},u.onsuccess=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);var a=t.target.result;if(!a.objectStoreNames.contains(c)){var s=u.result.objectStoreNames.contains(c);return r("FBLogger")("messenger_web").warn("Missing encryption meta table. Is store present: %s",s),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),S(a,"missing_encryption_meta_table").then(function(){l(r("err")("Malformed encryption DB"))}).catch(function(t){return L(e,"ear_idb_retry_failed_delete_failed"),i(r("err")("Failed to delete malformed encryption DB: "+t.message))})}a.onversionchange=function(){a.close(),r("FBLogger")("messenger_web").info("EAR onversionchange triggered"),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),f==null||f()},L(e,"ear_db_open_end"),_=a,o("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("global_ear",_),n()},u.onerror=function(){if(o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),u.error.name==="UnknownError")return L(e,"ear_db_open_error_unknown_error"),l(u.error);L(e,"ear_db_open_error"),i(u.error)}}catch(t){L(e,"ear_db_error"),i(t)}}))}function v(e){f=f==null?e:f}function S(e,t){return e===void 0&&(e=_),r("FBLogger")("messenger_web").warn("EAR DB deletion triggered: %s",t),e!=null&&e.close(),o("MAWIndexedDBDeletion").deleteDB(g,"ear")}function R(t){switch(t){case r("EARInitType").EB_INIT:return r("qpl")._(521477507,"1406");case r("EARInitType").MAW_INIT:return r("qpl")._(25310776,"6155");case r("EARInitType").MAW_RP_INIT:return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Armadillo Web Remote Presence] MAW RP Initialising EAR"]))),r("qpl")._(25310776,"6155");case r("EARInitType").LS_INIT:return r("qpl")._(25305590,"1127");case r("EARInitType").MAW_IN_UI_INIT:return null}}function L(e,t,n){var a=R(e);a!=null&&((s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(a,"worker_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(a,t),n!=null&&r("QPLUserFlow").addAnnotations(a,n)))}l.storeName=c,l.ENCRYPTION_MAW_STORES_INDEX=d,l.getEncryptionDB=h,l.isEncryptionDBInited=y,l.makeEncryptionDB=b,l.maybeSetEncryptionDbOnVersionChange=v,l.deleteEncryptionDB_UNSAFE=S}),98);
__d("MAWKeychain",["MWEARKeychainV3"],(function(t,n,r,o,a,i,l){"use strict";var e={getDbEncryptionKey:o("MWEARKeychainV3").getDbEncryptionKey,getLatestVersion:o("MWEARKeychainV3").getLatestVersion,init:o("MWEARKeychainV3").init};l.default=e}),98);
__d("MWSetupDBEncryption",["BrowserLockManager","ExecutionEnvironment","FBLogger","MAWEncryptionIndexedDbV2","MAWKeychain","MWEARKeychainV3","Promise","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(t,n){return n()};function c(e){u=e}var d="mw_ear_db";function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{return yield o("MAWEncryptionIndexedDbV2").makeEncryptionDB(e),yield u("init_setup_keychain",function(){return r("MAWKeychain").init("global_ear",e)})}catch(n){var t=n instanceof Error?n:r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(t).mustfix("[%s] EAR setup error",String(e)),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",t)}}),p.apply(this,arguments)}function _(e){return o("MAWEncryptionIndexedDbV2").getEncryptionDB()!=null&&o("MWEARKeychainV3").isKeychainInitialised("global_ear")?(s||(s=n("Promise"))).resolve(o("WAResultOrError").makeResult(o("MWEARKeychainV3").getLatestVersion("global_ear"))):r("BrowserLockManager")!=null?new(s||(s=n("Promise")))(function(t,o){r("promiseDone")(r("BrowserLockManager").request(d,n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var n=yield m(e);t(n)}catch(e){o(e)}})),function(e){},function(e){o(e)})}):m(e)}function f(e,t){t===void 0&&(t=function(t){return!0});var r=null;return function(a){return r==null&&(r=e(a).then(function(e){return r=t(e)?(s||(s=n("Promise"))).resolve(e):null,e}).catch(function(e){throw r=null,e})),r}}var g=f(function(t){return _(t)},function(e){return(e==null?void 0:e.success)===!0}),h=(e||(e=r("ExecutionEnvironment"))).isInWorker?g:_;l.setPerformanceMeasurementTool=c,l.init=h}),98);
__d("MAWDBKeychain",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWDexie","MAWIndexedDbMetadata","MWEARKeychainV3","MWSetupDBEncryption","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=["id"],s,u,c="encryptionMetaV3",d=function(t){t===void 0&&(t=o("MWEARKeychainV3").logMawInitPoint),t("maw_ear_check_mawdb_start");var e=o("MAWCurrentUser").getID(),n=o("MAWIndexedDbMetadata").dbName(e),a=new(r("MAWDexie"))(n,{addons:[]});return a.open().then(function(e){return t("maw_ear_check_mawdb_end"),e}).catch("NoSuchDatabaseError",function(){return t("maw_ear_check_mawdb_no_db"),null}).catch(function(e){throw t("maw_ear_check_mawdb_error"),e})},m=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){e===void 0&&(e=o("MWEARKeychainV3").logMawInitPoint);var t=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t;try{if(t=yield d(e),!t)return r("FBLogger")("messenger_web").info("MAWDB is missing for MAW EAR worker init."),e("maw_ear_new_user"),{isNewUser:!0,reinitEAR:!0,useMawEAR:!0};if(!t.backendDB().objectStoreNames.contains(c))return t.close(),r("FBLogger")("messenger_web").info("MAW EAR is missing for MAW EAR worker init."),e("maw_ear_missing_ear_table"),{reinitEAR:!0,useMawEAR:!0};var n=yield _(t.backendDB());n.length===0&&(r("FBLogger")("messenger_web").info("Migrating global EAR to MAW EAR"),e("maw_ear_migrating"),yield p(t.backendDB())),o("MWEARKeychainV3").setNamespaceSourceDbWithoutMarkingDbReady("maw_ear",t.backendDB()),e("maw_ear_init_keychain");var a=yield o("MWEARKeychainV3").init("maw_ear",r("EARInitType").MAW_INIT,e);if(a.success===!1)throw a.payload!=null?a.payload:r("FBLogger")("messenger_web").mustfixThrow("Failed to init MAW EAR Keychain.");return e("maw_ear_success"),r("FBLogger")("messenger_web").info("MAW EAR worker successfully initialised."),{useMawEAR:!0}}finally{var i;o("MWEARKeychainV3").setNamespaceSourceDbWithoutMarkingDbReady("maw_ear",null),(i=t)==null||i.close()}});return function(){return t.apply(this,arguments)}})();return new(u||(u=n("Promise")))(function(e,n){return r("BrowserLockManager")!=null?r("BrowserLockManager").request("mawdb_keychain_init_ear",function(){return t().then(e).catch(n)}):t().then(e).catch(n)}).catch(function(t){throw e("maw_ear_failure"),r("FBLogger")("messenger_web").catching(t).mustfixThrow("Failed to init MAW EAR Worker.")})});return function(n){return e.apply(this,arguments)}})(),p=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=yield o("MWSetupDBEncryption").init(r("EARInitType").MAW_INIT);if(!a.success)throw a.payload!=null?a.payload:r("FBLogger")("messenger_web").mustfixThrow("Failed to init global EAR.");var i=o("MWEARKeychainV3").getKeychain("global_ear");if(i.databaseEncryptionKeys.size===0)throw r("FBLogger")("messenger_web").mustfixThrow("Global EAR data is missing.");var l=Array.from(i.databaseEncryptionKeys.entries()).map(function(t){var n=t[0],r=t[1].dbEntry,o=r.id,a=babelHelpers.objectWithoutPropertiesLoose(r,e);return a});return new(u||(u=n("Promise")))(function(e,n){var r=t.transaction(c,"readwrite");l.forEach(function(e){r.objectStore(c).add(e)}),r.onerror=function(){return n(r.error)},r.oncomplete=function(){return e()}})});return function(n){return t.apply(this,arguments)}})();function _(e){return new(u||(u=n("Promise")))(function(t,n){var r=e.transaction(c,"readonly"),o=r.objectStore(c).getAll();o.onsuccess=function(){return t(o.result)},o.onerror=function(){return n(o.error)}})}function f(e,t){if(e.encryptionMetaV3!=null){var n=o("MWEARKeychainV3").getKeychainInitStatus("maw_ear");if(n==="none"&&t!=null){o("MWEARKeychainV3").logMawInitPoint("maw_ear_populate_unstored_key"),e.encryptionMetaV3.add(t);return}var a=o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear",i=Array.from(o("MWEARKeychainV3").getKeychain(a).databaseEncryptionKeys).map(function(e){var t=e[0],n=e[1].dbEntry;return n});if(i.length>0)r("FBLogger")("messenger_web").info("DB re-populated after external DB deletion. Namespace: %s. isWorker: %s",a,(s||(s=r("ExecutionEnvironment"))).isInWorker),e.encryptionMetaV3.bulkPut(i),o("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("maw_ear",e.db.backendDB());else throw r("FBLogger")("messenger_web").mustfixThrow("No encryption keys to populate MAWDB. Namespace: %s. HasUnstoredKey: %s. isWorker: %s",a,!!t,(s||(s=r("ExecutionEnvironment"))).isInWorker)}}l.STORENAME=c,l.checkMawDbExists=d,l.initEAR=m,l.getEncryptionKeys=_,l.onDbPopulateMAWKeychain=f}),98);
__d("MAWEncryptedBackupsStateManager",["MAWEBSwitch"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case 1:return;case 3:r("MAWEBSwitch").set(!0);return;case 2:case 4:default:r("MAWEBSwitch").set(!1);return}}function s(e){return e===4||e===3}l.setEncryptedBackupsState=e,l.eligibleForEBUX=s}),98);
__d("MAWGetReStoreDBError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.message=t,n.name="MAWGetReStoreDBError",n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("MAWHandleEchoProtobufsRestoreApi",["EBLogger","EchoMessageMediaFieldUtils","EncryptedBackupsDYIMessageProcessingUtils","LSMEBTaskCreationSource","MAWJids","MAWMediaUtils","MAWMsg","MAWMsgType","MAWODSProxy","MAWUnstoredContentToUnstoredDbContentUtils","MessageBackupSupplementalKeyGenerator","WAAckLevel","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WABase64","WAConsumerApplication.pb","WAHashUtils","WAJids","WAMediaTransport.pb","WAMsgApplication.pb","WAMsgType","WAOdsEnums","WAParseMediaTransportProtocol","WAParseMessageApplication","WAStanzaUtils","WATimeUtils","decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D=o("EBLogger").EBLogger().tags(["ProtobufRestore"]);function x(t){var n=t.isMediaGalleryRestore,a=t.taskSource,i;return n!=null&&n?(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_RESTORE,key:"is_media_gallery_restore_param"}),D.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["isMediaGalleryRestore is deprecated. Consider using taskSource insted"]))),i=r("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE):i=a!=null?a:r("LSMEBTaskCreationSource").UNKNOWN,babelHelpers.extends({},t,{isMediaGalleryRestore:void 0,taskSource:i})}function $(e,t,n){var r={author:n,chat:t,externalId:e};return r}function P(e,t,n,r,a,i,l,p,_,f,g,h,y,C,b,v){if(e===o("MAWMsgType").MSG_TYPE.TEXT)if(l==null){D.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Text content cannot be null for msg type text - unable to restore msg"])));return}else{var S={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,msgContent:{content:l,mentionedJids:p!=null?p.map(o("WAJids").validateUserJid).filter(Boolean):void 0},ts:t,type:o("MAWMsgType").MSG_TYPE.TEXT};return S}else if(e===o("MAWMsgType").MSG_TYPE.VIDEO){var R={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.VIDEO};return R}else if(e===o("MAWMsgType").MSG_TYPE.GIF){var L={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.GIF};return L}else if(e===o("MAWMsgType").MSG_TYPE.IMAGE){var E={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.IMAGE};return E}else if(e===o("MAWMsgType").MSG_TYPE.STICKER){var k={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.STICKER};return k}else if(e===o("MAWMsgType").MSG_TYPE.PTT){var I={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.PTT};return I}else if(e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE){var T={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE};return T}else if(e===o("MAWMsgType").MSG_TYPE.XMA){var x={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,ts:t,type:o("MAWMsgType").MSG_TYPE.XMA};return x}else if(e===o("MAWMsgType").MSG_TYPE.REVOKED){if(_==null){D.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["No revoked msg external id found for revoked msg"])));return}var $={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,ebTimestampMs:null,id:r,msgContent:void 0,revokedExternalId:_,ts:t,type:o("MAWMsgType").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:t};return $}else if(e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE){var P={ack:o("WAAckLevel").ACK.SENT,id:r,ts:t,type:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return P}else if(e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH){var N={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,ts:t,type:o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH};return N}else if(e===o("MAWMsgType").MSG_TYPE.RAVEN){if(f==null){D.MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["No raven msg ephemeral type found for raven msg"])));return}if(g==null){D.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["No raven msg media type found for raven msg"])));return}var M={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,id:r,mediaId:h,ravenEphemeralMediaState:o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN,ravenEphemeralType:f,ravenMediaType:g,ts:t,type:o("MAWMsgType").MSG_TYPE.RAVEN};return M}else if(e===o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE){if(y==null||C==null||b==null||v==null){D.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] One of the mandatory fields is missing for the group poll creation msg"])));return}var w={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,id:r,ts:t,type:o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE};return w}}function N(e,t,n,r,a){var i,l,s,u,c,d,m,C,b=e.metadata,v=e.msgType;if(b==null){D.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Missing required metadata, unable to create db msg from protobuf"])));return}if(v==null){D.MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Missing required msg type, unable to create db msg from protobuf"])));return}var S=b.messageId,R=b.senderId,L=(i=e.decodedPayload)==null?void 0:i.text,E=(l=e.decodedPayload)==null?void 0:l.mentionedJid;if(S==null){D.MUSTFIX(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Missing required message id, unable to create db msg from protobuf"])));return}if(R==null){D.MUSTFIX(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Missing required author, unable to create db msg from protobuf"])));return}var k=o("WATimeUtils").castMilliSecondsToUnixTime(e.sortOrderMs),I=o("MAWJids").toUserJid(R),T=o("WAStanzaUtils").toStanzaId(S),x=I===n?o("WAJids").AUTHOR_ME:I,N=$(T,t,I);if(e.editMsgData.length>0){var M=k;e.editMsgData.forEach(function(e){var t;if(e.ts>M&&((t=e.editMsgContent.message)==null?void 0:t.text)!=null){var n,r;M=e.ts,L=(n=e.editMsgContent.message)==null?void 0:n.text,E=(r=e.editMsgContent.message)==null?void 0:r.mentionedJid}})}var w=P(v,k,x,N,e.isForwarded,e.forwardingScore,L,E,e.revokedMsgExternalId,e.ravenMsgEphemeralType,e.ravenMsgMediaType,(s=e.ravenUnstoredMedia)==null?void 0:s.plaintextHash,(u=e.groupPollInfo)==null?void 0:u.encKey,(c=e.groupPollInfo)==null?void 0:c.name,(d=e.groupPollInfo)==null?void 0:d.options,(m=e.groupPollInfo)==null?void 0:m.selectableOptionsCount);if(w==null){D.MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Missing required fields, unable to create db msg from protobuf for thread jid "," and otid ",""])),t,T);return}var A;if(e.xmaData!=null&&((C=e.xmaData)==null?void 0:C.targetType)!=null){var F,O={author:I,externalId:T,targetType:(F=e.xmaData)==null?void 0:F.targetType,threadJid:t};A={unstoredAssociatedMedia:void 0,unstoredAssociatedMsg:void 0,unstoredFavicon:void 0,unstoredHeaderMedia:void 0,unstoredPreviews:void 0,xma:O}}var B={unstoredGroupPollCreateInfo:e.groupPollInfo,unstoredMedia:void 0,unstoredMsg:w,unstoredQuotedMedia:void 0,unstoredReceiverFetchInfo:e.receiverFetchInfo,unstoredXMA:A};w.type===o("MAWMsgType").MSG_TYPE.RAVEN&&e.ravenUnstoredMedia!=null&&(B.unstoredMedia=e.ravenUnstoredMedia);var W=o("MAWUnstoredContentToUnstoredDbContentUtils").unstoredContentToUnstoredDbContent(B);if(W.unstoredDbMsg!=null){var q=W.unstoredDbMsg;q.sortOrderMs=e.sortOrderMs,q.serverTs=o("WATimeUtils").castToUnixTime(e.sortOrderMs/1e3),e.noteReply!=null&&(q.quote={content:e.noteReply,remoteJid:void 0});var U=r.get(S);q.author!=null&&n===q.author&&q.author!==o("WAJids").AUTHOR_SYSTEM&&(q.author=o("WAJids").AUTHOR_ME),U!=null&&(q.quoteExternalId=o("WAStanzaUtils").toStanzaId(U)),v===o("MAWMsgType").MSG_TYPE.TEXT&&(q.editCount=e.editMsgData.length);var V={author:q.author,stanzaId:T,unstoredDbContent:W};return W.unstoredDbMedia!=null&&a!=null&&a.set(T,W.unstoredDbMedia),V}D.MUSTFIX(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Failed to create db msg from protobuf"])))}function M(e){switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.GIF;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.STICKER;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_MP4;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_WAV;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;default:return null}}function w(e){switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return o("EchoMessageMediaFieldUtils").AttachmentType.IMAGE;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return o("EchoMessageMediaFieldUtils").AttachmentType.GIF;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return o("EchoMessageMediaFieldUtils").AttachmentType.STICKER;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return o("EchoMessageMediaFieldUtils").AttachmentType.VIDEO;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return o("EchoMessageMediaFieldUtils").AttachmentType.PTT;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return o("EchoMessageMediaFieldUtils").AttachmentType.XMA;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:return o("EchoMessageMediaFieldUtils").AttachmentType.DOCUMENT;default:return null}}function A(e){var t;switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:t="image/jpeg";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:t="audio/wav";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:t="video/mp4";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:t="image/gif";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:t="image/webp";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:t="image/jpeg";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:t="application/octet-stream";break;default:D.MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Unsupported media type, cannot get mimetype for attachment"])))}return t}function F(e,t,n){var r,a,i,l,s,u,c,d,m,p,_=t,f=e.ancillary,g=e.integral,h=g==null||(r=g.transport)==null||(r=r.integral)==null?void 0:r.fileSha256,y=g==null||(a=g.transport)==null||(a=a.integral)==null?void 0:a.fileEncSha256,C=g==null||(i=g.transport)==null||(i=i.integral)==null?void 0:i.mediaKey,S=(g==null||(l=g.transport)==null||(l=l.integral)==null?void 0:l.mediaKeyTimestamp)!=null&&typeof(g==null||(s=g.transport)==null?void 0:s.integral.mediaKeyTimestamp)=="number"?g==null||(u=g.transport)==null?void 0:u.integral.mediaKeyTimestamp:void 0;o("MAWMediaUtils").isTransportLegacyGif(e)&&(_=o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF);var R=g==null||(c=g.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.thumbnailHeight,L=g==null||(d=g.transport)==null||(d=d.ancillary)==null||(d=d.thumbnail)==null?void 0:d.thumbnailWidth,E=M(_),k=w(_);if(k===null){D.MUSTFIX(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Invalid attachment type, cannot restore attachment"])));return}var I=o("EncryptedBackupsDYIMessageProcessingUtils").decodeMediaEntryFromAttachmentPayload(e,k===o("EchoMessageMediaFieldUtils").AttachmentType.XMA,n);I.success||D.WARN(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Cannot generate media entry data, ",""])),I.error);var T={attachmentObjectId:g==null||(m=g.transport)==null||(m=m.ancillary)==null?void 0:m.objectId,attachmentType:k,directPath:g==null||(p=g.transport)==null||(p=p.integral)==null?void 0:p.directPath,encryptedHash:y!=null?o("WAHashUtils").toPlaintextHash(y):void 0,filename:n,height:f==null?void 0:f.height,mediaEntryData:I.value,mediaKey:C!=null?o("WABase64").encodeB64UrlSafe(C):void 0,mediaKeyTimestamp:S,mediaPlayableDuration:f==null?void 0:f.seconds,plaintextHash:h!=null?o("WAHashUtils").toPlaintextHash(h):void 0,width:f==null?void 0:f.width,xAttachmentType:_,xContentType:"full"},x=A(_);return x!=null&&(T.mediaContentType=x),E!=null&&(T.previewContentType=E,T.previewContentHeight=R,T.previewContentWidth=L),o("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(T,"protobuf")}function O(e,t,n){var r,a=F(e,t,n);if(a==null)return{mediaMetadata:void 0,previewMetadata:null};var i=e.integral,l=null,s=i==null||(r=i.transport)==null||(r=r.ancillary)==null||(r=r.thumbnail)==null?void 0:r.downloadableThumbnail;if(s!=null){var u=s.fileSha256,c=s.fileEncSha256,d=s.mediaKey,m=typeof s.mediaKeyTimestamp=="number"?s.mediaKeyTimestamp:void 0;return l={attachmentObjectId:s.objectId,attachmentType:o("EchoMessageMediaFieldUtils").AttachmentType.IMAGE,directPath:s.directPath,encryptedHash:c!=null?o("WAHashUtils").toPlaintextHash(c):void 0,filename:void 0,height:void 0,mediaKey:d!=null?o("WABase64").encodeB64UrlSafe(d):void 0,mediaKeyTimestamp:m,mediaPlayableDuration:void 0,plaintextHash:u!=null?o("WAHashUtils").toPlaintextHash(u):void 0,width:void 0,xAttachmentType:o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.MESSENGER_PREVIEW,xContentType:"preview"},{mediaMetadata:a,previewMetadata:o("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(l,"protobuf")}}return{mediaMetadata:a,previewMetadata:null}}function B(e,t,n,r,a,i){i===void 0&&(i=null),t!=null&&e!=null&&(n.push({mediaMetadata:t,mediaRestoreType:r,previewMetadata:i}),a.set(o("WAStanzaUtils").toStanzaId(e),n))}function W(e){switch(e){case 0:return o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE;case 1:return o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY;case 2:return o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT;default:return}}function q(e,t,n,r,a,i,l,s,u,c,d){var m,p,_,f,g,h,y,C,b,v,I=V(e,i,l,s),T=I==null||(m=I.obj.payload)==null?void 0:m.content,x={editMsgData:[],externalId:r,forwardingScore:(p=I==null||(_=I.metadata)==null?void 0:_.forwardingScore)!=null?p:0,isForwarded:(f=I==null||(g=I.metadata)==null?void 0:g.isForwarded)!=null?f:!1,metadata:e.metadata,reactionData:[],sortOrderMs:t,unknownFieldCount:e.$$unknownFieldCount},$,P=[];if(T!=null){if(T.messageText!=null)return x.msgType=o("MAWMsgType").MSG_TYPE.TEXT,x.decodedPayload=T.messageText,x;if(T.extendedContentMessage!=null){var N,M,w;if(x.msgType=o("MAWMsgType").MSG_TYPE.XMA,x.xmaData=T.extendedContentMessage,((N=T.extendedContentMessage)==null?void 0:N.headerImage)!=null){var A,q=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,(A=T.extendedContentMessage)==null?void 0:A.headerImage.payload),H=F(q,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);B(r,H,P,"xma_header",u)}if(((M=T.extendedContentMessage)==null?void 0:M.favicon)!=null){var G,z=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,(G=T.extendedContentMessage)==null?void 0:G.favicon.payload),j=F(z,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);B(r,j,P,"xma_favicon",u)}if(((w=T.extendedContentMessage)==null?void 0:w.previews)!=null){var K;(K=T.extendedContentMessage)==null||K.previews.forEach(function(e){var t=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,e.payload),n=F(t,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);x.mediaMetadata=n,B(r,n,P,"xma_preview",u)})}return x}else if(T.audioMessage!=null){var Q,X=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(Q=T.audioMessage)==null||(Q=Q.audio)==null?void 0:Q.payload);return $=F(X,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO),x.msgType=o("MAWMsgType").MSG_TYPE.PTT,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(T.videoMessage!=null){var Y,J=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(Y=T.videoMessage)==null||(Y=Y.video)==null?void 0:Y.payload),Z=O(J,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO),ee=Z.mediaMetadata,te=Z.previewMetadata;return $=ee,$!=null&&$.xAttachmentType===o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?x.msgType=o("MAWMsgType").MSG_TYPE.GIF:x.msgType=o("MAWMsgType").MSG_TYPE.VIDEO,x.mediaMetadata=$,B(r,$,P,"attachment",u,te),x}else if(T.imageMessage!=null){var ne,re=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(ne=T.imageMessage)==null||(ne=ne.image)==null?void 0:ne.payload),oe=O(re,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE),ae=oe.mediaMetadata,ie=oe.previewMetadata;return $=ae,x.msgType=o("MAWMsgType").MSG_TYPE.IMAGE,x.mediaMetadata=$,B(r,$,P,"attachment",u,ie),x}else if(T.stickerMessage!=null){var le,se,ue=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(le=T.stickerMessage)==null||(le=le.sticker)==null?void 0:le.payload);if(((se=ue.integral)==null?void 0:se.receiverFetchId)!=null){var ce=o("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(ue);return ce==null?(D.MUSTFIX(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[MAWHandleEchoProtobufsRestoreApi] consumerMessage has no sticker receiver fetch info"]))),x):(x.msgType=o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH,x.receiverFetchInfo=ce,x)}return $=F(ue,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER),x.msgType=o("MAWMsgType").MSG_TYPE.STICKER,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(T.documentMessage!=null){var de,me,pe=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(de=T.documentMessage)==null||(de=de.document)==null?void 0:de.payload);return $=F(pe,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT,(me=T.documentMessage)==null?void 0:me.fileName),x.msgType=o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}}else if((I==null||(h=I.obj.payload)==null||(h=h.applicationData)==null?void 0:h.revoke)!=null){var _e,fe=I==null||(_e=I.obj.payload)==null||(_e=_e.applicationData)==null||(_e=_e.revoke)==null||(_e=_e.key)==null?void 0:_e.id;if(fe==null)D.MUSTFIX(R||(R=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve revoked message external id"])));else return x.revokedMsgExternalId=o("WAStanzaUtils").toStanzaId(fe),x.msgType=o("MAWMsgType").MSG_TYPE.REVOKED,x}if((I==null||(y=I.obj.payload)==null||(y=y.content)==null?void 0:y.bumpExistingMessage)!=null){var ge,he,ye,Ce=I==null||(ge=I.obj.payload)==null||(ge=ge.content)==null?void 0:ge.bumpExistingMessage,be=(he=Ce.key)==null?void 0:he.id;be!=null&&(l.has(be)||i.add(be),s.set(r,be));var ve=(ye=Ce.key)==null?void 0:ye.participant;if(ve==null){var Se;ve=(Se=Ce.key)==null?void 0:Se.remoteJid}if(ve==null)D.MUSTFIX(L||(L=babelHelpers.taggedTemplateLiteralLoose(["No author found for original message that was bumped - unable to restore"])));else{var Re=o("WAJids").unsafeCoerceToUserJid(ve),Le=Re===n?o("WAJids").AUTHOR_ME:Re;return c.set(o("WAStanzaUtils").toStanzaId(r),Le),x.msgType=o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,x}}if((I==null||(C=I.obj)==null||(C=C.payload)==null||(C=C.content)==null?void 0:C.noteReplyMessage)!=null){var Ee,ke,Ie=I==null||(Ee=I.obj)==null||(Ee=Ee.payload)==null||(Ee=Ee.content)==null?void 0:Ee.noteReplyMessage,Te=Ie.noteTimestampMs,De=Ie.noteText,xe=(ke=e.metadata)==null?void 0:ke.senderId;if(Te!=null&&typeof Te=="number"&&xe!=null&&a!=null){var $e=o("MAWJids").toUserJid(xe),Pe=o("MAWJids").toUserJid(a),Ne=Pe===$e?n:Pe,Me={author:Ne===n?o("WAJids").AUTHOR_ME:Ne,externalId:o("WAStanzaUtils").toStanzaId(r),ts:o("WATimeUtils").castMilliSecondsToUnixTime(Te),type:o("WAMsgType").NOTE_REPLY};if((De==null?void 0:De.text)!=null){var we={content:De==null?void 0:De.text,mentionedJids:De==null?void 0:De.mentionedJid.map(function(e){return o("MAWJids").toUserJid(e)})};Me.msgContent=we}x.noteReply=Me}if(Ie.textContent!=null)return x.msgType=o("MAWMsgType").MSG_TYPE.TEXT,x.decodedPayload=Ie.textContent,x;if(Ie.stickerContent!=null){var Ae=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,Ie.stickerContent.payload);return $=F(Ae,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER),x.msgType=o("MAWMsgType").MSG_TYPE.STICKER,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(Ie.videoContent!=null){var Fe=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,Ie.videoContent.payload);return $=F(Fe,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO),$!=null&&$.xAttachmentType===o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?x.msgType=o("MAWMsgType").MSG_TYPE.GIF:x.msgType=o("MAWMsgType").MSG_TYPE.VIDEO,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}}if((I==null||(b=I.obj)==null||(b=b.payload)==null||(b=b.content)==null?void 0:b.ravenMessageMsgr)!=null){var Oe,Be,We;if(x.ravenMsgEphemeralType=W(I==null||(Oe=I.obj)==null||(Oe=Oe.payload)==null||(Oe=Oe.content)==null||(Oe=Oe.ravenMessageMsgr)==null?void 0:Oe.ephemeralType),(I==null||(Be=I.obj)==null||(Be=Be.payload)==null||(Be=Be.content)==null||(Be=Be.ravenMessageMsgr)==null?void 0:Be.imageMessage)!=null){if(d==null||!d){var qe;x.ravenUnstoredMedia=o("WAParseMediaTransportProtocol").decodeImageTransport(I==null||(qe=I.obj)==null||(qe=qe.payload)==null||(qe=qe.content)==null||(qe=qe.ravenMessageMsgr)==null||(qe=qe.imageMessage)==null?void 0:qe.payload,o("WATimeUtils").castMilliSecondsToUnixTime(x.sortOrderMs),"image")}x.ravenMsgMediaType=o("MAWMsg").MAWRavenMsgMediaType.IMAGE}else if((I==null||(We=I.obj)==null||(We=We.payload)==null||(We=We.content)==null||(We=We.ravenMessageMsgr)==null?void 0:We.videoMessage)!=null){if(d==null||!d){var Ue,Ve=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").VideoTransportSpec,I==null||(Ue=I.obj)==null||(Ue=Ue.payload)==null||(Ue=Ue.content)==null||(Ue=Ue.ravenMessageMsgr)==null||(Ue=Ue.videoMessage)==null?void 0:Ue.payload),He=o("WAParseMediaTransportProtocol").parseVideoMsg(Ve,o("WATimeUtils").castMilliSecondsToUnixTime(x.sortOrderMs),!1);He!=null?x.ravenUnstoredMedia=He:D.MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["Decoded raven video unstored message is null - unable to restore"])))}x.ravenMsgMediaType=o("MAWMsg").MAWRavenMsgMediaType.VIDEO}return x.msgType=o("MAWMsgType").MSG_TYPE.RAVEN,x}else if((I==null||(v=I.obj)==null||(v=v.payload)==null||(v=v.content)==null?void 0:v.pollCreationMessage)!=null){x.msgType=o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE;var Ge=I.obj.payload.content.pollCreationMessage,ze=Ge.encKey,je=Ge.name,Ke=Ge.options,Qe=Ge.selectableOptionsCount;return ze!=null&&je!=null&&Ke!=null&&(x.groupPollInfo={encKey:ze,name:je,options:Ke.map(function(e){var t=e.optionName;return t}).filter(Boolean),selectableOptionsCount:Qe||0}),x}return I!=null&&U(x,I.obj),D.MUSTFIX(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve decoded protobuf from backup message - unsupported message type"]))),x}function U(e,t){var n,r,o,a,i,l,s,u,c,d,m,p,_,f;(t==null||(n=t.payload)==null||(n=n.content)==null?void 0:n.locationMessage)!=null&&(e.futureProofMessageType="locationMessage"),(t==null||(r=t.payload)==null||(r=r.content)==null?void 0:r.liveLocationMessage)!=null&&(e.futureProofMessageType="liveLocationMessage"),(t==null||(o=t.payload)==null||(o=o.content)==null?void 0:o.pollUpdateMessage)!=null&&(e.futureProofMessageType="pollUpdateMessage"),(t==null||(a=t.payload)==null||(a=a.content)==null?void 0:a.viewOnceMessage)!=null&&(e.futureProofMessageType="viewOnceMessage"),(t==null||(i=t.payload)==null||(i=i.content)==null?void 0:i.contactMessage)!=null&&(e.futureProofMessageType="contactMessage"),(t==null||(l=t.payload)==null||(l=l.content)==null?void 0:l.extendedTextMessage)!=null&&(e.futureProofMessageType="extendedTextMessage"),(t==null||(s=t.payload)==null||(s=s.content)==null?void 0:s.groupInviteMessage)!=null&&(e.futureProofMessageType="groupInviteMessage"),(t==null||(u=t.payload)==null||(u=u.content)==null?void 0:u.commonSticker)!=null&&(e.futureProofMessageType="commonSticker"),(t==null||(c=t.payload)==null||(c=c.content)==null?void 0:c.screenshotAction)!=null&&(e.futureProofMessageType="screenshotAction"),(t==null||(d=t.payload)==null||(d=d.content)==null?void 0:d.extendedMessageContentWithSear)!=null&&(e.futureProofMessageType="extendedMessageContentWithSear"),(t==null||(m=t.payload)==null||(m=m.content)==null?void 0:m.imageGalleryMessage)!=null&&(e.futureProofMessageType="imageGalleryMessage"),(t==null||(p=t.payload)==null||(p=p.content)==null?void 0:p.paymentsTransactionMessage)!=null&&(e.futureProofMessageType="paymentsTransactionMessage"),(t==null||(_=t.payload)==null||(_=_.applicationData)==null?void 0:_.metadataSync)!=null&&(e.futureProofMessageType="metadataSync"),(t==null||(f=t.payload)==null||(f=f.applicationData)==null?void 0:f.aiBotResponse)!=null&&(e.futureProofMessageType="aiBotResponse")}function V(e,t,n,r){var a,i=(a=e.metadata)==null?void 0:a.messageId,l=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e.encryptedTransportMessage),s=o("WAParseMessageApplication").parseMessageApplication(l);if(s.type==="error"){D.MUSTFIX(I||(I=babelHelpers.taggedTemplateLiteralLoose(["Message contains unparseable message application - unable to restore message"])));return}var u=l.metadata,c=u==null?void 0:u.quotedMessage,d=c==null?void 0:c.stanzaId;if(i!=null&&d!=null&&(n.has(d)||t.add(d),r.set(i,d)),s.subprotocolType==="armadillo"){var m=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAArmadilloApplication.pb").ArmadilloSpec,s.payload);return{metadata:u,obj:m}}else if(s.subprotocolType==="consumerMessage")return{metadata:u,obj:o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAConsumerApplication.pb").ConsumerApplicationSpec,s.payload)}}function H(e,t,n,r,o,a,i,l,s){return e.map(function(e){return G(e,t,n,r,o,a,i,l,s)})}function G(e,t,n,r,a,i,l,s,u){i===void 0&&(i=new Map);var c=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e.toplevelProtobuf.decryptedProtobuf),d=q(c,e.toplevelProtobuf.protobufTimestampMS,t,e.otid,n,r,a,i,l,s,u),m=e.supplementalProtobufs;for(var p of m){var _=p[0],f=p[1],g=o("MessageBackupSupplementalKeyGenerator").parseIdentifierString(_);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_EB_DECODE_MESSAGE_PROTOBUF_SUPPLEMENTAL,key:g.type});var h=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,f.decryptedProtobuf);if(h.encryptedTransportMessage!=null)switch(g.type){case"raven_action_message":{var y=V(h,r,a,i),C=g.senderJid,b=C===t?o("WAJids").AUTHOR_ME:C;if(y!=null){var v,S,R,L=y.obj,E=(v=L.payload)==null||(v=v.content)==null||(v=v.ravenActionNotifMessage)==null?void 0:v.actionTimestamp,k=(S=L.payload)==null||(S=S.content)==null||(S=S.ravenActionNotifMessage)==null?void 0:S.actionType;if(E!=null&&k!=null&&typeof E=="number"&&((R=L.payload)==null||(R=R.content)==null||(R=R.ravenActionNotifMessage)==null||(R=R.key)==null?void 0:R.id)!=null){var I,x,$,P,N=o("WAStanzaUtils").toStanzaId((I=L.payload)==null||(I=I.content)==null||(I=I.ravenActionNotifMessage)==null||(I=I.key)==null?void 0:I.id);if(((x=h.metadata)==null?void 0:x.timestampMs)!=null&&typeof(($=h.metadata)==null?void 0:$.timestampMs)=="number"&&((P=h.metadata)==null?void 0:P.messageId)!=null){var M,w,A=(M=h.metadata)==null?void 0:M.messageId,F=o("WATimeUtils").castMilliSecondsToUnixTime((w=h.metadata)==null?void 0:w.timestampMs),O=o("WAStanzaUtils").toStanzaId(A),B=k===0?o("MAWMsg").MAWRavenActionNotifType.PLAYED:k===1?o("MAWMsg").MAWRavenActionNotifType.SCREENSHOTTED:o("MAWMsg").MAWRavenActionNotifType.FORCE_DISABLED,W={ack:o("WAAckLevel").ACK.RECEIVED,actionTimestamp:o("WATimeUtils").castMilliSecondsToUnixTime(E),actionType:B,author:b,externalId:O,ravenActionToMsgExternalId:N,ts:F,type:o("MAWMsgType").MSG_TYPE.RAVEN_ACTION};d.ravenActionUnstoredMsg=W}}}break}case"reaction":{var U,H,G=(U=h.metadata)==null?void 0:U.messageId,z=(H=V(h,r,a,i))==null||(H=H.obj.payload)==null||(H=H.content)==null?void 0:H.reactionMessage,j=o("WAJids").extractUserId(g.senderJid);z!=null&&j!=null&&d.reactionData.push({reaction:z,reactionExternalId:G,senderId:j,ts:o("WATimeUtils").castMilliSecondsToUnixTime(f.protobufTimestampMS)});break}case"edit":{var K,Q,X=(K=V(h,r,a,i))==null||(K=K.obj.payload)==null||(K=K.content)==null?void 0:K.editMessage,Y=(Q=h.metadata)==null?void 0:Q.senderId;if(X!=null){var J,Z=(J=X.key)==null?void 0:J.id,ee=X.timestampMs;if(Z!=null&&ee!=null&&Y!=null&&typeof ee=="number"){var te=o("MAWJids").toUserJid(Y),ne=te===t?o("WAJids").AUTHOR_ME:te;d.editMsgData.push({author:ne,editMsgContent:X,externalId:o("WAStanzaUtils").toStanzaId(d.externalId),originalMsgExternalId:o("WAStanzaUtils").toStanzaId(Z),ts:o("WATimeUtils").castMilliSecondsToUnixTime(ee)})}}break}case"poll_update":{var re,oe=V(h,r,a,i);if(oe==null)continue;var ae=(re=oe.obj.payload)==null||(re=re.content)==null?void 0:re.pollUpdateMessage;if(ae!=null){var ie={externalId:o("WAStanzaUtils").toStanzaId(g.rawIdentifierString)};ae.addOption!=null&&(ie.addOption=ae.addOption),ae.vote!=null&&(ie.vote=ae.vote),ae.pollCreationMessageKey!=null&&(ie.pollCreationMessageKey=ae.pollCreationMessageKey),d.groupPollUpdateData!=null?d.groupPollUpdateData.push(ie):d.groupPollUpdateData=[ie]}break}case"unknown":{var le=_.split(":"),se=le[0];D.MUSTFIX(T||(T=babelHelpers.taggedTemplateLiteralLoose(["Unknown supplemental identifier. Identifier prefix: ",". Parts: ",""])),se||"null",le.length);break}default:g.type}}return a.add(e.otid),d}l.removeDeprecatedProtobufRestoreArgs=x,l.createUnstoredDbContentFromProtobufObject=N,l.decodeProtobufArray=H,l.decodeDecryptedMessageProtobuf=G}),98);
__d("MAWLoadDbMigrationVersion",["ExecutionEnvironment","MAWBridge","MAWCurrentUser","MAWDBMigrationUtils","MAWDbAppMeta","MAWDbObjEncryption","MAWIndexedDbMetadata","MAWUnrecoverableDbErrors","MWFBLogger","Promise","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=o("MWFBLogger").MWLogger().tags(["db","MAWLoadDbMigrationVersion"]);function h(t){var a=o("MAWCurrentUser").getID(),i=o("MAWIndexedDbMetadata").dbName(a);return new(f||(f=n("Promise")))(function(n){if(!indexedDB){n();return}var a=indexedDB.open(i);a.onupgradeneeded=function(t){t.target.transaction.abort();var r=t.target.result;g.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," onupgradeneeded - closing db"])),i),r==null||r.close(),n()},a.onsuccess=function(e){var a=e.target.result;if(a==null){n();return}try{var i=a.transaction("appMeta","readonly");i.onerror=function(e){var t;g.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Transaction error: ",""])),(t=e.target.error)==null?void 0:t.message),a.close(),n()};var l=i.objectStore("appMeta"),m=l.get(o("MAWDbAppMeta").AppMetaKeysEnum.dbMigrationVersion);m.onerror=function(e){var t;g.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Request error: ",""])),(t=e.target.error)==null?void 0:t.message),a.close(),n()},m.onsuccess=function(e){a.close();var i=e.target.result;if(i!=null)try{var l=o("MAWDbObjEncryption").decryptDbObj(babelHelpers.extends({},i),"appMeta",t),s=l.value.dbMigrationVersion;s!=null&&(o("MAWDBMigrationUtils").mawDbMigrationVersion.version=s)}catch(e){var u=r("getErrorSafe")(e);g.catching(u).MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Failed to decrypt appMeta row"]))),(_||(_=r("ExecutionEnvironment"))).isInWorker&&o("MAWBridge").getBridge().fireAndForget("event","unrecoverableDbError",{error:new(o("MAWUnrecoverableDbErrors")).EarRuntimeError})}n()}}catch(e){var p=r("getErrorSafe")(e);g.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Error accessing appMeta: ",""])),p.message),a.close(),n()}},a.onerror=function(e){var t;g.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," error ",""])),i,e==null||(t=e.target)==null||(t=t.error)==null?void 0:t.message),n()},a.onblocked=function(e){var t=e.target.result;g.DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," blocked"])),i),t==null||t.close()}})}l.default=h}),98);
__d("MAWReStoreDbSetup",["FBLogger","MAWGetReStoreDBError","asyncToGeneratorRuntime","cr:10742","cr:2924","cr:3535"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e=(s=n("cr:3535"))!=null?s:n("cr:10742"))!=null?e:n("cr:2924"),c=u==null?void 0:u.createDB,d;function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield d;e==null||e.closeDb==null||e.closeDb(),d=null}),p.apply(this,arguments)}function _(){if(c==null)throw r("FBLogger")("messenger_web").mustfixThrow("Unexpected invocation of OneDB");return d==null&&(d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e=yield c();return yield e.runInTransaction(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){}),"readwrite",void 0,void 0,i.id+":44"),e}catch(e){throw new(r("MAWGetReStoreDBError"))("Failed to get ReStore DB: "+e)}})()),d}function f(){return c!=null}l.closeDB=m,l.getDB=_,l.shouldUseReStoreDb=f}),98);
__d("MAWReStoreDb",["FBLogger","MAWIndexedDb","MAWReStoreDbSetup","asyncToGeneratorRuntime","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(r("gkx")("3577"))try{var t=yield o("MAWReStoreDbSetup").getDB();return t}catch(e){var n=r("getErrorSafe")(e);throw r("FBLogger")("igd_web").blameToPreviousFrame().catching(n).mustfixThrow("Failed to get ReStore DB: %s",arguments[0])}return e==null&&(o("MAWIndexedDb").willSetupDB()?e=o("MAWIndexedDb").getDB().then(function(){return o("MAWReStoreDbSetup").getDB()}):e=o("MAWReStoreDbSetup").getDB()),e}),u.apply(this,arguments)}function c(){return o("MAWReStoreDbSetup").shouldUseReStoreDb()}l.getDB=s,l.shouldUseReStoreDb=c}),98);
__d("MAWUpdateClientRestoreStatusOperationType",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1;i.upsertClientRestoreStatus=e,i.markCompleteClientRestoreStatus=l}),66);
__d("MAWWorkerPersistedDataService",["FBLogger","MAWBridge","MAWCacheServiceUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="maw_persisted_data_service_broadcast",s=function(){return o("MAWCacheServiceUtils").globalScope.BroadcastChannel?new(o("MAWCacheServiceUtils")).globalScope.BroadcastChannel(e):(r("FBLogger")("messenger_e2ee_web").warn("BroadcastChannel is not supported in this browser"),null)},u=(function(){function t(){this.$1=s()}var n=t.prototype;return n.emitBroadcastChannelMessageToUI=function(n,r,a,i){var t={cache:r,instanceKey:i,namespace:n,source:a};this.$1==null?o("MAWBridge").getBridge().fireAndForget("event","broadcastChannelFallback",{event:{data:t},namespace:e}):this.$1.postMessage(t)},t})(),c=null,d=function(){return c==null&&(c=new u),c};l.MAW_PERSISTED_DATA_SERVICE_BROADCAST_CHANNEL=e,l.getMAWPersistedDataServiceBroadcastChannel=s,l.getMAWWorkerPersistedDataService=d}),98);
__d("MWPMiniSearch",["minisearch"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e={fuzzy:0,prefix:!0};return{fields:["content"],searchOptions:e}}function s(t){t===void 0&&(t=function(){return{}});var n;function o(){n=new(r("minisearch"))(babelHelpers.extends({},e(),t()))}return{getInstance:function(){return n==null&&o(),n}}}l.createMiniSearchSingleton=s}),98);
__d("MediaDownloadMediator",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t,n){e.set(t,n)}function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r;yield(r=e.get(t))==null?void 0:r.continue(n),e.delete(t)}),u.apply(this,arguments)}function c(t,n){var r;(r=e.get(t))==null||r.handleError(n),e.delete(t)}i.mapDeliveryObjectIdToMediaDownloader=l,i.handleNewCDNUrlFromMI=s,i.handleMIDownloadFailure=c}),66);
__d("ReStoreLocalStorageQuotaExceed",["FBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e="Failed to execute 'setItem' on 'Storage'",s="ReStoreLocalStorageQuotaExceed";function u(){try{var t=window.localStorage,n=[],o=[];if(t!=null&&t.length!==0){for(var a in t)if(n.length===0&&o.length===0&&a.includes("falco_queue_log")&&o.push(a),!!Object.prototype.hasOwnProperty.call(t,a)){var i=((t[a]||"").length+a.length)*2;i/1024>2e3&&n.push(a)}}return r("FBLogger")("messenger_web").mustfix(e+": QuotaExceeded - trying to clean up %s or %s",n.join(","),o.join(",")),n.length!==0?n:o}catch(e){return r("FBLogger")("messenger_web").mustfix("Error getting local storage big values for cleanup."),[]}}function c(){try{var e=window.localStorage,t=u();t.forEach(function(t){e.removeItem(t)})}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("maw_db").mustfix("Couldn't remove vals from localStorage",n.message)}}var d=(function(t){function n(n){var r,o=e+": "+n+"; Keys to delete: "+u().join(",");return r=t.call(this,o)||this,r.message=o,r.name=s,r}return babelHelpers.inheritsLoose(n,t),n})(babelHelpers.wrapNativeSuper(Error));l.ERROR_NAME=s,l.getLocalStorageValuesToRemoveOnExceed=u,l.clearLocalStorageBigValues=c,l.ReStoreLocalStorageQuotaExceed=d}),98);
__d("SharedWorkerBootstrap",["CurrentSharedWorker","CurrentSharedWorkerAdapter"],(function(t,n,r,o,a,i,l){"use strict";function e(e){u(function(){return n.call(null,e)})}function s(e){u(function(){return e})}function u(e){o("CurrentSharedWorker").onInitComplete(function(){var t=e();if(typeof t=="function"||t!==null)try{t(new(o("CurrentSharedWorkerAdapter")).CurrentSharedWorkerAdapter)}catch(e){}})}l.start=e,l.startServerJS=s}),98);
__d("SharedOrWebWorkerBootstrapInit",["SharedWorkerBootstrap","WorkerBootstrap"],(function(t,n,r,o,a,i){"use strict";function e(e){"SharedWorkerGlobalScope"in self&&self instanceof self.SharedWorkerGlobalScope?n("SharedWorkerBootstrap").startServerJS(e):n("WorkerBootstrap").startServerJS(e)}i.startServerJS=e}),66);
__d("WAAPIMetrics",["WAGlobals","WAJids","WAPREList","WAPREMetrics"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return n===void 0&&(n={}),function(){for(var r=u(t,n),o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e.apply(void 0,[r].concat(a)).then(function(e){return r.endSuccess(),e}).catch(function(e){throw r.endFail("error",{string:{error:""+e.toString()}}),e})}}function s(e,t,n){return n===void 0&&(n={}),function(){var r=u(t,n);return e.apply(void 0,arguments).then(function(e){return r.endSuccess(),e}).catch(function(e){throw r.endFail("error",{string:{error:""+e.toString()}}),e})}}function u(e,t){var n,r;t===void 0&&(t={});var a=null;try{a=o("WAGlobals").getDependencies().isEmployee()&&o("WAGlobals").getDependencies().isUseridAnnotationEnabled()?o("WAJids").extractUserId(o("WAGlobals").getMyUserJid()).slice(-5):null}catch(e){}return o("WAPREMetrics").startMetric(o("WAPREList").PRE_METRIC.WA_JOB_MANAGER,babelHelpers.extends({},t,{string:babelHelpers.extends({},(n=(r=t)==null?void 0:r.string)!=null?n:{},{name:e,userHash:a})}))}l.withMetrics=e,l.withMetricWrapper=s}),98);
__d("WAAPIDeferred",["WAAPIMetrics","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("requireDeferred"))("WADbPersonalSenderKeyStatusTxns").__setRef("WAAPIDeferred"),u=e("WADbRegistrationApi").__setRef("WAAPIDeferred"),c=e("WADownloadMedia").__setRef("WAAPIDeferred"),d=e("WAGenerateAndUploadPreKeys").__setRef("WAAPIDeferred"),m=e("WAGetCurrentUserDeviceList").__setRef("WAAPIDeferred"),p=e("WAGetDevices").__setRef("WAAPIDeferred"),_=e("WAGetIdentityKeys").__setRef("WAAPIDeferred"),f=e("WANotifyDeviceChange").__setRef("WAAPIDeferred"),g=e("WAPublishAppDataProtocol").__setRef("WAAPIDeferred"),h=e("WAPublishMessage").__setRef("WAAPIDeferred"),y=e("WAQueryGroups").__setRef("WAAPIDeferred"),C=e("WARemoveCurrentDevice").__setRef("WAAPIDeferred"),b=e("WARemoveDevice").__setRef("WAAPIDeferred"),v=e("WASendAppDataFanoutProtocol").__setRef("WAAPIDeferred"),S=e("WASendMsgUtilV2").__setRef("WAAPIDeferred"),R=e("WASendPing").__setRef("WAAPIDeferred"),L=e("WASyncAbProps").__setRef("WAAPIDeferred"),E={getCurrentUserDeviceList:function(){return m.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.getCurrentUserDeviceList,"getCurrentUserDeviceList")()})},syncAbProps:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return L.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.syncAbProps,"syncAbProps").apply(void 0,t)})},generateAndUploadPreKeys:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.generateAndUploadPreKeys,"generateAndUploadPreKeys",{bool:{deferred_load:!0}}).apply(void 0,t)})},publishAppData:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.publishAppData,"publishAppData",{bool:{deferred_load:!0}}).apply(void 0,t)})},getDevicesBeforeSend:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S.load().then(function(e){var n=e.getDevicesBeforeSend;return o("WAAPIMetrics").withMetrics(n,"getDevicesBeforeSend",{bool:{deferred_load:!0}}).apply(void 0,t)})},getIdentityKeys:function(){return _.load().then(function(e){var t=e.getIdentityKeysInWorker;return o("WAAPIMetrics").withMetrics(t,"getIdentityKeys",{bool:{deferred_load:!0}})()})},publishMessage:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.load().then(function(e){var n=e.publishMessage;return o("WAAPIMetrics").withMetricWrapper(n,"publishMessage",{bool:{deferred_load:!0}}).apply(void 0,t)})},sendChatMessage:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S.load().then(function(e){var n=e.sendChatMessage;return o("WAAPIMetrics").withMetrics(n,"sendChatMessage",{bool:{deferred_load:!0}}).apply(void 0,t)})},updateClockSkew:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.updateClockSkew,"updateClockSkew",{bool:{deferred_load:!0}}).apply(void 0,t)})},queryGroups:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.queryGroups,"queryGroups",{bool:{deferred_load:!0}}).apply(void 0,t.concat([!1]))})},queryGroupsForce:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.queryGroups,"queryGroups",{bool:{deferred_load:!0}}).apply(void 0,t.concat([!0]))})},getDevices:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.getDevices,"getDevices",{bool:{deferred_load:!0}}).apply(void 0,t)})},removeDevice:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.removeDevice,"=>",{bool:{deferred_load:!0}}).apply(void 0,t)})},removeCurrentDevice:function(){return C.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.removeCurrentDevice,"removeCurrentDevice",{bool:{deferred_load:!0}})()})},notifyDeviceChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.notifyDeviceChange,"notifyDeviceChange",{bool:{deferred_load:!0}}).apply(void 0,t)})},saveLastSessionDeviceWasLinkedTo:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.saveLastSessionDeviceWasLinkedTo,"saveLastSessionDeviceWasLinkedTo").apply(void 0,t)})},sendAppData:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.sendAppDataToDevicesProtocol,"sendAppData",{bool:{deferred_load:!0}}).apply(void 0,t)})},setRotateSenderKeyToTrue:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.load().then(function(e){return o("WAAPIMetrics").withMetrics(function(t,n){return e.bulkSetRotateSenderKeyToTrue(n)},"setRotateSenderKeyToTrue").apply(void 0,t)})},downloadMedia:function(t){return c.load().then(function(e){return e.downloadMedia(t)})},cachedDownloadFullMediaOnly:function(t){return c.load().then(function(e){return e.cachedDownloadFullMediaOnly(t)})}},k=E;l.default=k}),98);
__d("WAAbPropsTypes",[],(function(t,n,r,o,a,i){"use strict";var e={noyb_opt_out_flag:[3488,"bool",!1,!1],service_improvement_opt_out_flag:[3664,"bool",!1,!1],msgrw_test_bool:[704,"bool",!1,!1],msgrw_test_int:[705,"int",0,0],msgrw_test_string:[706,"string","test_string","test_string"],msgrw_test_float:[707,"float",1,1],msgrw_icdc_alert_trigger_failure_count:[1233,"int",8,8],msgrw_icdc_cooldown_interval_in_minutes:[1234,"int",35,35],msgrw_icdc_interval_in_minutes:[1236,"int",1500,1500],msgrw_logger_entries:[1298,"int",0,0],msgrw_max_keys:[2453,"int",812,812],msgrw_job_manager_conf:[2667,"string",'{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}','{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}'],client_group_participants_limit:[618,"int",257,257],client_group_name_length_limit:[1200,"int",25,25]};i.ABPropConfigs=e}),66);
__d("WAAbPropsToUI",["WAAbPropsTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=["client_group_participants_limit","client_group_name_length_limit"];function s(t){var n=t!=null?t:{},r={};return e.forEach(function(e){n[e]!=null?r[e]=n[e]:r[e]=o("WAAbPropsTypes").ABPropConfigs[e][2]}),r}l.prepareAbPropsForUI=s}),98);
__d("WARetryPromise",["Promise","WAAbortError","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a){return new(e||(e=n("Promise")))(function(i,l){var s=0,u,c=!1;if(a){var d=function(){a.removeEventListener("abort",d),c=!0,u!=null&&clearTimeout(u),l(new(o("WAAbortError")).AbortError)};if(a.aborted){d();return}a.addEventListener("abort",d)}function m(){var o=!1,a=!1;u=null;try{var d=t({retry:function(t){if(!(c||a)){if(o=!0,s++,t==null)return m();u=setTimeout(m,t)}},failCount:s});if(!(d instanceof(e||(e=n("Promise")))))throw r("err")("TypeError: task must return a promise");d.then(function(e){c||o||(a=!0,i(e))}).catch(function(e){c||o||(a=!0,l(e))})}catch(e){if(c||o)return;l(e)}}m()})}l.default=s}),98);
__d("WABackoff",["Promise","WARetryPromise","WARetryableError","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze({timeoutIncludesTaskDuration:!0});function u(t,o){var a=babelHelpers.extends({},s,t),i=a.signal,l=a.timeoutIterator,u=a.timeoutIncludesTaskDuration;return r("WARetryPromise")(function(t){var a=t.retry,i=t.failCount;return new(e||(e=n("Promise")))(function(t,s){var c=Date.now();try{o(d,i).then(t).catch(m)}catch(e){m(r("getErrorSafe")(e));return}function d(t){return(e||(e=n("Promise"))).reject(new(r("WARetryableError"))(t))}function m(e){if(!(e instanceof r("WARetryableError")))return void s(e);var t=l.next();if(t.done)return void s(e.source);var n=Date.now()-c,o=u?Math.max(t.value-n,0):t.value;a(o)}})},i)}l.defaults=s,l.backoff=u}),98);
__d("WAExponentialIterator",[],(function(t,n,r,o,a,i){"use strict";function*e(e){for(var t=1;;)yield t,t*=e}i.default=e}),66);
__d("WAExponentialBackoffIterator",["WAExponentialIterator"],(function(t,n,r,o,a,i,l){"use strict";var e={factor:2,jitter:0,maxTimeout:1/0};function*s(t){var n=babelHelpers.extends({},e,t),o=n.factor,a=n.jitter,i=n.maxTimeout,l=n.minTimeout,s=n.retries,u=0;for(var c of r("WAExponentialIterator")(o)){if(u++,u>s)return;var d=1+(Math.random()*a*2-a);yield Math.min(l*c*d,i)}}l.defaults=e,l.exponentialBackoffIterator=s}),98);
__d("WAExponentialBackoff",["WABackoff","WAExponentialBackoffIterator"],(function(t,n,r,o,a,i,l){"use strict";var e=["signal","timeoutIncludesTaskDuration"],s=babelHelpers.extends({},o("WAExponentialBackoffIterator").defaults,o("WABackoff").defaults);function u(t,n){var r=babelHelpers.extends({},s,t),a=r.signal,i=r.timeoutIncludesTaskDuration,l=babelHelpers.objectWithoutPropertiesLoose(r,e),u=o("WAExponentialBackoffIterator").exponentialBackoffIterator(l);return o("WABackoff").backoff({signal:a,timeoutIterator:u,timeoutIncludesTaskDuration:i},n)}l.exponentialBackoff=u}),98);
__d("WmiMessageSendService",["FBLogger","Promise","QPLFlow","WorkerScheduler","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(function(){function e(e){var t=this,o=e.pipeline,a=e.postSendPipeline;this.$3=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n,o){try{return yield f(e,n,o,t.$1)}catch(e){var a=r("getErrorSafe")(e);throw r("FBLogger")("wmi").catching(a).mustfixThrow("MSS: publish fails")}});return function(t,n,r){return e.apply(this,arguments)}})(),this.$1=o,this.$2=a}var t=e.prototype;return t.publish=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,o){var a=this,i=yield this.$3(e,t,o);(d||(d=n("Promise"))).resolve().then(function(){return p(e,i,a.$2)}).catch(function(e){var t=r("getErrorSafe")(e);throw r("FBLogger")("wmi").catching(t).mustfix("MSS: post-send pipeline fails")})});function t(t,n,r){return e.apply(this,arguments)}return t})(),e})();function p(e,t,n){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){var i=n,l=o("QPLFlow").startNoopQPLFlow();for(var u of a){r("FBLogger")("wmi").DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MSS: "," start"])),u.name);try{i=yield u.process(t,i,l)}catch(e){throw r("FBLogger")("wmi").DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["MSS: "," end"])),u.name),e}}return i}),_.apply(this,arguments)}function f(e,t,n,r){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,o){var a=t;for(var i of o){n.addPoint(i.name+"_start"),r("FBLogger")("wmi").DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["MSS: "," start"])),i.name);try{a=yield i.process(e,a,n)}catch(e){throw n.addPoint(i.name+"_fail"),e}r("FBLogger")("wmi").DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["MSS: "," end"])),i.name),n.addPoint(i.name+"_end")}return a}),g.apply(this,arguments)}function h(e,t,r,a){var i=o("WorkerScheduler").makeScheduler(e,a);return{name:"cticial-section-"+e,process:function(a,l,s){return t(a,l)?i.runTask({customFlags:{runtimeReliability:!0},fn:function(){return f(a,l,s,r)},name:"publish",priority:o("WorkerScheduler").BLOCKING_PRIORITY}):(d||(d=n("Promise"))).resolve(l)}}}l.MessageSendService=m,l.criticalSectionPipeline=h}),98);
__d("WorkerBanzaiLazyQueueChannelWorker",["BanzaiLazyQueue","WorkerFuncChannel"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("WorkerFuncChannel").importChannel({queuePost:null},e,"banzai_lazyqueue_channel");r("BanzaiLazyQueue").onQueue.add(function(){s(t)}),s(t)}function s(e){r("BanzaiLazyQueue").flushQueue().forEach(function(t){e.queuePost.apply(e,t)})}l.init=e}),98);
__d("WorkerSelf",["WorkerBanzaiLazyQueueChannelWorker","WorkerFuncChannel","WorkerQPLChannel"],(function(t,n,r,o,a,i,l){"use strict";function e(e){o("WorkerFuncChannel").activateChannels(e,"worker","client"),o("WorkerBanzaiLazyQueueChannelWorker").init(e),o("WorkerQPLChannel").setMessagePort(e)}l.init=e}),98);
__d("isMAWUniversalSearchWithEBEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);/*FB_PKG_DELIM*/
__d("DedupMiThreadCreationCache",["justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set,s=function(n){var t=r("justknobx")._("4749");t&&e.add(n)};l.DedupMiThreadCreationCache=e,l.addToDedupMiThreadCreationCache=s}),98);
__d("EBMainThreadListeners",["EBReenrollmentTriggerListener","LSDatabaseSingleton","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;o("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(t)}),u.apply(this,arguments)}l.initEBListeners=s}),98);
__d("LSSetIGE2EEEligibility",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(176).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.contactId,e[0])&&t.i64.eq(n.e2eeEligibility,e[1])}).next().then(function(o,a){var i=o.done,l=o.value;return i?(r[1]=new t.Map,r[1].set("contact_id",e[0]),r[1].set("new_eligibility",e[1]),r[2]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTask"),"ig_set_e2ee_eligibility",t.i64.cast([0,60001]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):(a=l.item,0)})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSContactSetIGE2EEEligibilityStoredProcedure",e.__tables__=["ig_contact_info"],a.exports=e}),null);
__d("LSSetIGE2EEEligibilityStoredProcedure",["LSSetIGE2EEEligibility","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSSetIGE2EEEligibility"),a.id,a.e2eeEligibility);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("IGDSetIGE2EEEligibility",["I64","LSDatabaseSingleton","LSFactory","LSInstagramE2EEEligibility","LSIntEnum","LSSetIGE2EEEligibilityStoredProcedure","MAWCurrentUser","asyncToGeneratorRuntime","justknobx","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(e||(e=o("react"))).useEffect;function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton;return n.runInTransaction(function(n){return r("LSSetIGE2EEEligibilityStoredProcedure")(r("LSFactory")(n),{e2eeEligibility:(u||(u=o("LSIntEnum"))).ofNumber(t),id:(c||(c=o("I64"))).of_string(e)})},"readwrite",void 0,void 0,i.id+":31")}),p.apply(this,arguments)}function _(){var e=o("react-compiler-runtime").c(1),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],d(f,t)}function f(){if(!r("justknobx")._("2058")){var e=o("MAWCurrentUser").getID();r("promiseDone")(m(e,r("LSInstagramE2EEEligibility").ELIGIBLE))}}l.useUpsertSetIGE2EEEligibilityOnMount=_}),98);
__d("LSGetLatestThreadIds.nop",["I64","LSVec","MAWBridgeSafeActionsWorkerAndUI","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=[],l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.mi_act_mapping_table)).then(function(e){return e.map(function(e){var t=e.jid;return(s||(s=o("I64"))).to_string(t)})});if(l.length>0){var u=new Set(l);t.forEach(function(e){u.has(e)&&i.push(e)})}return(e||(e=n("Promise"))).resolve([r("LSVec").ofArray(i),!0])}),c.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("getLatestThreadIds",{numThreads:(s||(s=o("I64"))).to_int32(e)});return t}),m.apply(this,arguments)}function p(e,t,n,r,o){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,c){if(c===void 0&&(c=!1),(s||(s=o("I64"))).gt(l,(s||(s=o("I64"))).zero))try{var m=yield d(l);return c?u(m,t):(e||(e=n("Promise"))).resolve([r("LSVec").ofArray(m),!0])}catch(t){return(e||(e=n("Promise"))).resolve([r("LSVec").ofArray([]),!1])}return(e||(e=n("Promise"))).resolve([r("LSVec").ofArray([]),!0])}),_.apply(this,arguments)}var f=p;p.__nop_name__="getLatestThreadIds",l.default=f}),98);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],t=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:t},params:{id:"8996647210435532",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery",["LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("LSPlatformGraphQLLightspeedRequestQuery.graphql");l.query=s}),98);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","LSPlatformGraphQLLightspeedRequestQuery","XPlatRelayEnvironment"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a){return o("CometRelay").fetchQuery(o("XPlatRelayEnvironment").getRelayEnvironment(),o("LSPlatformGraphQLLightspeedRequestQuery").query,{deviceId:e,requestId:t,requestPayload:n,requestType:r},a!=null?a:void 0).toPromise().then(function(e){var t,n=e==null||(t=e.viewer)==null?void 0:t.lightspeed_web_request;if(n!=null)return babelHelpers.extends({dependencies:void 0},n)})}l.default=e}),98);
__d("WAChatState",[],(function(t,n,r,o,a,i){"use strict";var e="typing",l="recording_audio",s="idle",u={TYPING:e,RECORDING_AUDIO:l},c={IDLE:s};i.TYPING=e,i.RECORDING_AUDIO=l,i.IDLE=s,i.ACTIVE_CHAT_STATE_TYPE=u,i.IDLE_CHAT_STATE_TYPE=c}),66);
__d("MAWBridgeReceivedChatStateHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ServerTime","WAChatState","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a.threadJid,"MAWBridgeReceivedChatStateHandler",function(t,i){var l=(s||(s=o("I64"))).of_string(a.senderId),u=s.of_float(3e3+o("ServerTime").getMillis());return a.state===o("WAChatState").TYPING?t.typing_indicator.upsert([i,l],{expirationTimestampMs:u,senderId:l,threadKey:i}).then(r("emptyFunction")):a.state===o("WAChatState").IDLE?t.typing_indicator.delete(i,l).then(r("emptyFunction")):(e||(e=n("Promise"))).resolve()})}l.call=u}),98);
__d("MAWFTSRawStringMatcher",["JSResourceForInteraction","asyncToGeneratorRuntime","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=r("JSResourceForInteraction")("WAFtsMultiLangTokenizer").__setRef("MAWFTSRawStringMatcher"),s=null;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return s=yield e.load(),m}),c.apply(this,arguments)}function d(e){return new(r("nullthrows")(s))().tokenize(e)}function m(e,t){var n=Array.from(d(e)).filter(function(e){return e.length>1});if(n.length===0)return!1;var r=Array.from(d(t));return n.every(function(e){return r.some(function(t){return t.startsWith(e)})})}l.load=u}),98);
__d("MAWFTSMergeCutoverSearchResults",["fbt","I64"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t,n){var r,a,i,l,u=(e||(e=o("I64"))).add((r=t.matchCount)!=null?r:(e||(e=o("I64"))).of_string("1"),(a=n.matchCount)!=null?a:(e||(e=o("I64"))).of_string("1")),c=e.max((i=t.messageTimestampMs)!=null?i:(e||(e=o("I64"))).minus_one,(l=n.messageTimestampMs)!=null?l:(e||(e=o("I64"))).minus_one);return babelHelpers.extends({},t,{contextLine:s._(/*BTDS*/"_j{\"*\":\"{number} mensagens com correspond\\u00eancia\",\"_1\":\"1 mensagem com correspond\\u00eancia\"}",[s._plural(e.to_int32(u),"number")]).toString(),matchCount:u,matchLengths:void 0,matchOffsets:void 0,messageId:void 0,messageTimestampMs:(e||(e=o("I64"))).equal(c,(e||(e=o("I64"))).minus_one)?void 0:c})}l.mergeCutoverSearchResults=u}),226);
__d("MAWMiActOnActThreadReadyDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWMiActOnActThreadReady").__setRef("MAWMiActOnActThreadReadyDeferred");function s(t,n,r,o){return e.load().then(function(e){var a=e.onActThreadReady;return a(t.tables,n,r,o)})}l.default=s}),98);
__d("MAWFTSUniversalSearchQPLLogger",["QPLUserFlow","emptyFunction","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={hasStarted:!1,instanceKey:5e3},s=r("qpl")._(25301522,"2409");function u(){return e.hasStarted&&c(),e.instanceKey++,e.hasStarted=!0,r("QPLUserFlow").start(s,{annotations:{bool:{isInThread:!1}},instanceKey:e.instanceKey}),e.instanceKey}function c(t){!e.hasStarted||t!=null&&e.instanceKey!==t||(e.hasStarted=!1,r("QPLUserFlow").endCancel(s,{instanceKey:e.instanceKey}))}function d(t){var n=t.annotations,o=t.instanceKey,a=t.point;!e.hasStarted||o!=null&&e.instanceKey!==o||(r("QPLUserFlow").addPoint(s,a,{instanceKey:e.instanceKey}),n!=null&&m({annotations:n,instanceKey:e.instanceKey}))}function m(t){var n=t.annotations,o=t.instanceKey;!e.hasStarted||o!=null&&e.instanceKey!==o||r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey})}function p(t){!e.hasStarted||t!=null&&e.instanceKey!==t||(e.hasStarted=!1,r("QPLUserFlow").endSuccess(s,{annotations:{int:{result_count:e.currentResultCount}},instanceKey:e.instanceKey}))}var _={getCurrentInstanceKey:function(){return e.instanceKey},qplAddAnnotations:m,qplAddPoint:d,qplCancel:c,qplMarkFirstResultShowUp:r("emptyFunction"),qplStart:u,qplSuccess:p,updateCurrentResultCount:r("emptyFunction")},f=_;l.default=f}),98);
__d("escapeRegExp",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}i.default=e}),66);
__d("MWContentSearchUtils",["fbt","I64","LSIntEnum","LSMessageSearchType","MAWVault","escapeRegExp","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=r("gkx")("1798");function d(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function m(e,t){var n=d(e).split(" "),o=d(t),a=[],i=[];return n.forEach(function(e){var t=new RegExp(r("escapeRegExp")(e),"gi"),n=o.matchAll(t),l=Array.from(n),s=l.map(function(e){return e.index}),u=s.map(function(t){return e.length});i.push.apply(i,s),a.push.apply(a,u)}),{matchLengths:a.join(","),matchOffsets:i.join(",")}}function p(t,n,a,i){if(a!=null&&(n===1||(e||(e=o("I64"))).equal(i,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE)))){var l=o("MAWVault").isVaulted(a)?o("MAWVault").unvault(a):a,c=m(t,l);return babelHelpers.extends({contextLine:l},c)}else return{contextLine:s._(/*BTDS*/"_j{\"*\":\"{number} mensagens com correspond\\u00eancia\",\"_1\":\"1 mensagem com correspond\\u00eancia\"}",[s._plural(n,"number")]).toString(),matchLengths:void 0,matchOffsets:void 0}}function _(e,t){return e===1&&t!=null?t:void 0}function f(e,t){return e===1&&t!=null?t:void 0}function g(t){return t!=null?(e||(e=o("I64"))).of_float(t):void 0}function h(t,n){var r=(e||(e=o("I64"))).of_float(-t);return n==null?r:e.min(r,n)}function y(t,n){return!c||t.messageTimestampMs==null||n.messageTimestampMs==null?(e||(e=o("I64"))).gt(t.globalIndex,n.globalIndex)?1:(e||(e=o("I64"))).lt(t.globalIndex,n.globalIndex)?-1:0:(e||(e=o("I64"))).lt(t.messageTimestampMs,n.messageTimestampMs)?1:(e||(e=o("I64"))).gt(t.messageTimestampMs,n.messageTimestampMs)?-1:0}l.getContextLineAndMatches=p,l.getMessageOtid=_,l.getMessageId=f,l.getMessageTimestamp=g,l.getGlobalIndex=h,l.searchResultsCompareFn=y}),226);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJID",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("wa_jid",e[0]),r[0].set("tam_thread_subtype",t.i64.cast([0,0])),r[1]=r[0].get("wa_jid"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,1021]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure",["LSSynchronousPromise","LSThreadPointQueryAndRestoreMessagesWithGroupJID","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSThreadPointQueryAndRestoreMessagesWithGroupJID"),a.waJid);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("waitForMiActMappingForUniversalSearch",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWCurrentUser","MAWJids","Promise","ReQL","WAJids","asyncToGeneratorRuntime","emptyFunction","err","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=3e4,c=3e4;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("ReQL").toArrayAsync(e);return t.some(function(e){return e==null||(s||(s=o("I64"))).lt(e.authorityLevel,(s||(s=o("I64"))).of_int32(r("LSAuthorityLevel").AUTHORITATIVE))})===!1}),m.apply(this,arguments)}function p(e,t,n,r){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a,i){a===void 0&&(a=r("emptyFunction")),i===void 0&&(i=r("emptyFunction"));var l=(s||(s=o("I64"))).of_string(o("MAWCurrentUser").getID()),u=o("ReQL").leftJoin(o("ReQL").fromTableAscending(e.tables.participants,["contactId"]).getKeyRange(t.serverThreadKey).filter(function(e){return!(s||(s=o("I64"))).equal(e.contactId,l)}),o("ReQL").fromTableAscending(e.tables.contacts)).map(function(e){var t=e[0],n=e[1];return n}),m=null,p={contents:function(){}};function _(){a(t),p.contents()}if(yield d(u))return _();p.contents=u.subscribe((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(t.operation!=="delete"&&(m!=null&&window.clearTimeout(m),yield d(u)))return _()});return function(t,n){return e.apply(this,arguments)}})()),m=window.setTimeout(function(){p.contents(),i(r("err")("Contacts timed out"))},c)}),_.apply(this,arguments)}function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var l=o("MAWJids").convertChatJidToIntJid(a),s=o("WAJids").interpretAsGroupJid(a)!=null,c=o("ReQL").fromTableAscending(t.tables.mi_act_mapping_table.index("jid")).getKeyRange(l),d=yield o("ReQL").firstAsync(c);if(d!=null)return yield p(t,d),(e||(e=n("Promise"))).resolve(d);var m=null,_=new(e||(e=n("Promise")))(function(e,o){var a={contents:function(){}};function i(t){a.contents(),e(t)}function l(e){a.contents(),o(e)}a.contents=c.subscribe((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){n.operation!=="delete"&&(m!=null&&window.clearTimeout(m),yield p(t,n.value,i,l))});return function(t,n){return e.apply(this,arguments)}})()),m=window.setTimeout(function(){l(r("err")("MiActMapping timed out"))},u)});r("promiseDone")(t.runInTransaction(function(e){return s?r("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure")(r("LSFactory")(e),{waJid:l}):r("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(r("LSFactory")(e),{waJid:l})},"readwrite",void 0,void 0,i.id+":150"));try{d=yield _}catch(e){r("FBLogger")("messenger_web").warn("[FTS] Issue waiting for mi_act_mapping to be ready",r("getErrorSafe")(e).message)}return d}),g.apply(this,arguments)}l.default=f}),98);
__d("MAWUniversalMessageSearch",["FBLogger","I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWFTSMergeCutoverSearchResults","MAWFTSUniversalSearchQPLLogger","MWContentSearchUtils","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","groupBy","promiseDone","waitForMiActMappingForUniversalSearch"],(function(t,n,r,o,a,i,l){"use strict";var e=["matchedTerms","recordType"],s,u,c,d=(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD),m=new Map,p=r("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MAWUniversalMessageSearch");function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){yield e.message_search_queries.put(babelHelpers.extends({hasNextPage:!1,query:t,threadKeyV2:(c||(c=o("I64"))).one,type_:d},n))}),f.apply(this,arguments)}function g(e,t){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=(c||(c=o("I64"))).to_string(t.threadKey);t.matchCount!=null&&m.set(n,(c||(c=o("I64"))).to_float(t.matchCount));var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.message_search_results).getKeyRange(d,t.query,t.threadKey));if(r==null)yield e.message_search_results.put(babelHelpers.extends({},t));else{var a=o("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(r,t);yield e.message_search_results.upsert([d,r.query,r.threadKey,r.globalIndex],babelHelpers.extends({},a,{globalIndex:t.globalIndex}))}}),h.apply(this,arguments)}function y(e,t){var n,r=(n=m.get((c||(c=o("I64"))).to_string(e)))!=null?n:0;r+=t,m.set((c||(c=o("I64"))).to_string(e),r)}function C(){m.clear()}function b(e,t){var n;return o("LSMessagingThreadTypeUtil").isArmadilloSecure(t)&&(n=m.get((c||(c=o("I64"))).to_string(e)))!=null?n:null}function v(e,t,n){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,l){m.clear(),yield t.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield _(e,l,{resultCount:(c||(c=o("I64"))).zero,status:(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING)})});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":142"),r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"search_local_result_start"});var f=yield o("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:l,searchMode:o("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}),h=f.map(function(t){if(t.recordType==="msg"){var n=t.matchedTerms,r=t.recordType,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return babelHelpers.extends({},o)}}).filter(Boolean),y=r("groupBy")(h,function(e){return e.chatJid}),C=Object.values(y);r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{int:{numResult:C.length}},point:"search_local_result_end"}),r("promiseDone")((s||(s=n("Promise"))).all(C.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,s){var u=e[0].chatJid;yield r("waitForMiActMappingForUniversalSearch")(t,u);var m=yield o("MWSearchThreadUtils").getThreadDataForSearchResult(t,u,a,d);if(m!=null){var _=m.profilePicUrl,f=m.secondaryProfilePicUrl,h=m.threadDisplayName,y=m.threadKey,C=m.threadType,b=e.sort(function(e,t){return t.sortOrderMs-e.sortOrderMs})[0],v=e.length===1&&b.msg==null?{id:b.externalId,sortOrderMs:b.sortOrderMs}:null,S={displayName:h,globalIndex:o("MWContentSearchUtils").getGlobalIndex(b.sortOrderMs),matchCount:(c||(c=o("I64"))).of_int32(e.length),profilePicUrl:_,query:l,secondaryProfilePicUrl:f,threadKey:y,threadType:C,type_:d};if(v==null)yield t.runInTransaction((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n,r;yield g(t,babelHelpers.extends({},S,o("MWContentSearchUtils").getContextLineAndMatches(l,e.length,b==null||(n=b.msg)==null?void 0:n.content,d),{messageId:o("MWContentSearchUtils").getMessageId(e.length,b==null||(r=b.msg)==null?void 0:r.msgId),messageOtid:o("MWContentSearchUtils").getMessageOtid(e.length,b==null?void 0:b.externalId),messageTimestampMs:o("MWContentSearchUtils").getMessageTimestamp(b==null?void 0:b.sortOrderMs)}))});return function(e){return t.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":243");else{r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+s+"_start"});var R=yield p.load().then(function(e){var t=e.issueQueryAsPromiseForSearchResult;return t(u,[v])});if(R!=null&&R.length!==0){var L=R[0];r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+s+"_end"}),yield t.runInTransaction((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n;yield g(t,babelHelpers.extends({},S,o("MWContentSearchUtils").getContextLineAndMatches(l,e.length,b==null||(n=b.msg)==null?void 0:n.content,d),{messageOtid:L.externalId,messageTimestampMs:L.sortOrderMs!=null?(c||(c=o("I64"))).of_float(L.sortOrderMs):void 0}))});return function(e){return t.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":282")}else r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{bool:{failedFetchingMissingMessage:!0}},point:"fetch_missing_message_"+s+"_end"})}}});return function(t,n){return e.apply(this,arguments)}})())),function(){r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{int:{numResult:C.length}},point:"issue_secure_search_query_end"}),r("promiseDone")(t.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield _(e,l,{hasNextPage:!1,resultCount:(c||(c=o("I64"))).of_int32(C.length),status:(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").COMPLETE)})});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":322"))},function(e){r("FBLogger")("maw_fts_search").mustfix("Error while searching in secure threads. Err: %s",e==null?void 0:e.message)})}),S.apply(this,arguments)}l.updateSecureMsgMatchCountForThread=y,l.clearSecureMsgMatchCountForThread=C,l.getSecureMsgsMatchCountForThread=b,l.search=v}),98);
__d("isEBSearchEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);
__d("MWInboxSecureContentSearch",["I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MAWFTSMergeCutoverSearchResults","MAWMiActOnActThreadReadyDeferred","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction","groupBy","isEBSearchEnabled","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=["matchedTerms","recordType"],s,u,c,d=r("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MWInboxSecureContentSearch"),m=r("justknobx")._("2605");function p(e,t,r){return(c||(c=n("Promise"))).all([o("ReQL").mergeJoin(o("ReQL").fromTableAscending(r.tables.participants,[]).getKeyRange(e),o("ReQL").fromTableAscending(r.tables.contacts)),o("ReQL").firstAsync(o("ReQL").fromTableAscending(r.tables.threads).getKeyRange(e))]).then(function(e){var n=e[0],r=e[1],a=n.filter(function(e){var n=e[0],r=e[1],a=(s||(s=o("I64"))).equal(r.id,t);return!a}).map(function(e){var t=e[0],n=e[1];return n});return o("ReQL").firstAsync(a)})}function _(e,t){return o("MAWChatJid").toThreadKeyMaybe(t,e.chatJid).then(function(r){return r==null?(c||(c=n("Promise"))).resolve([null,e]):(c||(c=n("Promise"))).all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(r)),c.resolve(e)])})}function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange((s||(s=o("I64"))).of_string(t)));return n}),g.apply(this,arguments)}function h(e,t){var n=t.query,a=t.threadKey;return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.message_search_results).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD),n,a))}function y(e,t,a,l,d,m,p,g){g===void 0&&(g=r("LSSearchRequestStatusType").COMPLETE);var y=function(p){return _(e,p).then(function(e){var i=e[0];if(i!=null){var _=e[1],y=_.msg;if(y!=null&&_!=null)return(c||(c=n("Promise"))).all([o("MWSearchThreadUtils").getThreadPics(i,d,m),o("MWSearchThreadUtils").getThreadParticipants(i,m),(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))?f(m,y.sender):(c||(c=n("Promise"))).resolve(null),(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))?h(p,{query:a,threadKey:i.threadKey}):(c||(c=n("Promise"))).resolve(null)]).then(function(e){var m=e[0],f=m[0],h=m[1],C=e[1],b=e[2],v=e[3];(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))&&o("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(i.threadKey,t);var S=babelHelpers.extends({},o("MWContentSearchUtils").getContextLineAndMatches(a,t,y.content,l),{displayName:o("MWSearchThreadUtils").getThreadDisplayName(d,i,C,b,l),globalIndex:(s||(s=o("I64"))).of_float(-_.sortOrderMs),matchCount:s.of_int32(t),messageId:y.msgId,messageOtid:_.externalId,messageTimestampMs:(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))&&t>1?void 0:(s||(s=o("I64"))).of_string(""+_.sortOrderMs),profilePicUrl:(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))&&b!=null?b.profilePictureUrl:f,query:a,secondaryProfilePicUrl:(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))&&b!=null?b.profilePictureFallbackUrl:h,threadKey:i.threadKey,threadType:i.threadType,type_:l}),R;if((s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))||v==null)R=p.message_search_results.put(S);else{var L=o("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(v,S);R=p.message_search_results.upsert([l,v.query,v.threadKey,v.globalIndex],babelHelpers.extends({},L,{globalIndex:S.globalIndex}))}return(c||(c=n("Promise"))).all([p.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:s.of_int32(t),status:(u||(u=o("LSIntEnum"))).ofNumber(g),threadKeyV2:i.threadKey,type_:l}),R]).then(r("emptyFunction"))})}})};return p!=null?y(p):m.runInTransaction(function(e){return y(e)},"readwrite",void 0,void 0,i.id+":284")}function C(e,t,n,r){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i){i!=null&&i.flow.qplAddPoint({instanceKey:i.instanceKey,point:"search_local_result_start"});var l=yield o("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:r,searchMode:o("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH});return(c||(c=n("Promise"))).all(l.map(function(n){if(n.recordType==="msg"){var r=n.matchedTerms,a=n.recordType,i=babelHelpers.objectWithoutPropertiesLoose(n,e);return o("MAWChatJid").toThreadKeyMaybe(t.tables,i.chatJid).then(function(e){return[i,e]})}}).filter(Boolean)).then(function(e){var t=a!=null?e.filter(function(e){var t=e[0],n=e[1];return n!=null&&(s||(s=o("I64"))).equal(n,a)}):e.filter(function(e){var t=e[0],n=e[1];return n!=null}),n=null;return a!=null&&(n={int:{numResult:t.length}}),i!=null&&i.flow.qplAddPoint({annotations:babelHelpers.extends({},n),instanceKey:i.instanceKey,point:"search_local_result_end"}),t})}),b.apply(this,arguments)}function v(e,t,a,i){return o("MAWUniversalMessageSearch").clearSecureMsgMatchCountForThread(),C(a,e,void 0,i).then(function(l){var d=Object.values(r("groupBy")(l,function(e){var t=e[0],n=e[1];return n==null?"":(s||(s=o("I64"))).to_string(n)}));return i!=null&&i.flow.qplAddAnnotations({annotations:{int:{numResult:d.length}}}),d.map(function(n){var i=n[0];if(i!==null){var l=i[0];return y(l,n.length,e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD),t,a)}}).reduce(function(e,t){return(c||(c=n("Promise"))).all([e,t]).then(r("emptyFunction"))},(c||(c=n("Promise"))).resolve())})}function S(e,t,a,i,l,s){return(c||(c=n("Promise"))).all(i.map(function(n){return y(n,l,a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),s,e,t)})).then(r("emptyFunction"))}function R(e,t,a,i,l){return(c||(c=n("Promise"))).all(a.map(function(n){return y(n,i,t,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),l,e)})).then(r("emptyFunction"))}function L(e,t,a,l,p){return l.runInTransaction(function(n){return n.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:e,resultCount:(s||(s=o("I64"))).of_int32(0),status:(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING),threadKeyV2:t,type_:u.ofNumber(r("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,i.id+":468").then(function(n){return C(l,e,t,p)}).then(function(_){var f=_.length,g=_.filter(function(e){var t=e[0],n=e[1];return t.msg!=null}).length,h=g,C=function(){var o=_.map(function(e){var t=e[0];return t}).filter(function(e){return e.msg==null});return o.length===0?(c||(c=n("Promise"))).resolve():(o=o.slice(0,m),p.flow.qplAddPoint({annotations:{int:{numRequestedMessages:o.length}},instanceKey:p.instanceKey,point:"fetch_missing_messages_start"}),r("MAWMiActOnActThreadReadyDeferred")(l,t,"MWMessageSearchInput.react",function(t,r){var i=o.map(function(e){return{id:e.externalId,sortOrderMs:e.sortOrderMs}});return d.load().then(function(t){var o=t.issueQueryAsPromiseForSearchResult,s=o(r,i);return s==null?(c||(c=n("Promise"))).resolve():s.then((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t;if(t.length!==i.length){p.flow.qplAddPoint({annotations:{int:{numRemainingMessages:i.length-t.length}},instanceKey:p.instanceKey,point:"fetch_missing_messages_partial"});var s=i.filter(function(e){return!n.some(function(t){return t.externalId===e.id})});if(s.length>0){var u=yield o(r,s);u!=null&&(n=[].concat(t,u))}}return h=g+n.length,p.flow.qplAddPoint({annotations:{int:{numRespondedMessages:n.length}},instanceKey:p.instanceKey,point:"fetch_missing_messages_end"}),R(l,e,n,h,a)});return function(e){return t.apply(this,arguments)}})())})}))};return(c||(c=n("Promise"))).all([_.map(function(t){var n=t[0];return y(n,f,e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),a,l,void 0,r("LSSearchRequestStatusType").PENDING)}).reduce(function(e,t){return(c||(c=n("Promise"))).all([e,t]).then(r("emptyFunction"))},c.resolve()),r("isEBSearchEnabled")()?C():(c||(c=n("Promise"))).resolve()]).then(function(n){return l.runInTransaction(function(n){return n.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:e,resultCount:(s||(s=o("I64"))).of_int32(h),status:(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").COMPLETE),threadKeyV2:t,type_:u.ofNumber(r("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,i.id+":618")}).then(function(e){return(c||(c=n("Promise"))).resolve()})})}l.getThreadOtherParticipantContact=p,l.searchSecureDatabaseThreads=v,l.addBridgeSearchMsgsToSearchResult=S,l.addMessagesToSearchResult=R,l.searchSecureDatabaseMessages=L}),98);
__d("addMAWBridgeSearchMessagesToUniversalSearch",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD);function c(e,t,n,r,o){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a,l,c){var d;o("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(t,l.length);var m=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.message_search_results).getKeyRange(u,a,t)),p=m==null,_=(s||(s=o("I64"))).to_int32((d=m==null?void 0:m.matchCount)!=null?d:(s||(s=o("I64"))).zero),f=_+l.length,g=yield o("MWSearchThreadUtils").getThreadDataByThreadKey(e,t,s.of_string(o("MAWCurrentUser").getID()),u);if(g!=null){var h=g.profilePicUrl,y=g.secondaryProfilePicUrl,C=g.threadDisplayName,b=g.threadType,v=m==null?void 0:m.globalIndex,S=o("MWContentSearchUtils").getGlobalIndex(l[0].sortOrderMs,m==null?void 0:m.globalIndex),R=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n;yield e.message_search_results.upsert([u,a,t,v!=null?v:S],babelHelpers.extends({},o("MWContentSearchUtils").getContextLineAndMatches(a,f,(n=l[0].msg)==null?void 0:n.content,u),{displayName:C,globalIndex:S,matchCount:(s||(s=o("I64"))).of_int32(f),messageTimestampMs:o("MWContentSearchUtils").getMessageTimestamp(l[0].sortOrderMs),profilePicUrl:h,query:a,secondaryProfilePicUrl:y,threadKey:t,threadType:b,type_:u})),p&&(yield e.message_search_queries.put(babelHelpers.extends({},c,{resultCount:(s||(s=o("I64"))).add(c.resultCount,s.one)})))});return function(n){return e.apply(this,arguments)}})();r("promiseDone")(e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield R(e)});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":113"))}}),d.apply(this,arguments)}l.default=c}),98);
__d("MAWBridgeAddMessageSearchResultHandler",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWFTSRawStringMatcher","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MWInboxSecureContentSearch","Promise","ReQL","addMAWBridgeSearchMessagesToUniversalSearch","asyncToGeneratorRuntime","emptyFunction","isMAWUniversalSearchWithEBEnabled","promiseDone","waitForMiActMappingForUniversalSearch"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),d=u.ofNumber(r("LSMessageSearchType").THREAD);function m(t,o,a){return a.length===0?(e||(e=n("Promise"))).resolve():(e||(e=n("Promise"))).all([f(t,o,a),h(t,o,a)]).then(r("emptyFunction"))}function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("MAWFTSRawStringMatcher").load();return t.filter(function(t){var r,o=(r=t.msg)==null?void 0:r.content;return o==null?!1:n(e,o)})}),_.apply(this,arguments)}function f(e,t,n){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a){var i=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.message_search_queries).getKeyRange(c));if(i.length!==0)return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a[0].chatJid,"MAWBridgeAddMessageSearchResultHandler",function(t,l){return n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=i.filter(function(e){return(s||(s=o("I64"))).equal(e.threadKeyV2,l)})[0];if(n!=null){var r=n.query;if(!(r==null||r.length<2)){var u=(s||(s=o("I64"))).to_int32(n.resultCount),c=yield p(r,a);c.length!==0&&(yield o("MWInboxSecureContentSearch").addBridgeSearchMsgsToSearchResult(e,t,n.query,c,u+c.length,s.of_string(o("MAWCurrentUser").getID())))}}})().then(r("emptyFunction"))})}),g.apply(this,arguments)}function h(e,t,n){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){if(r("isMAWUniversalSearchWithEBEnabled")()){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.message_search_queries).getKeyRange(d).filter(function(e){return(s||(s=o("I64"))).equal(e.threadKeyV2,s.one)}));if(a!=null){var i=a.query;if(!(i==null||i.length<2)){var l=yield p(i,n);l.length!==0&&r("promiseDone")(r("waitForMiActMappingForUniversalSearch")(e,n[0].chatJid),function(t){if(t!=null)return r("addMAWBridgeSearchMessagesToUniversalSearch")(e,t.serverThreadKey,i,l,a)})}}}}),y.apply(this,arguments)}l.call=m}),98);
__d("MAWBridgeCallRestoreNativeOpHandler",["MAWMpsGating","Promise","WAJids","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("LSProtobufRestoreHandler").__setRef("MAWBridgeCallRestoreNativeOpHandler");function u(t){var r=t.chatJid,a=t.decryptedMessagesProtobufs,i=t.isPointQuery,l=t.taskSource;return o("MAWMpsGating").isFullMpsEnabled()?(e||(e=n("Promise"))).resolve():s.load().then(function(e){return e.handleProtobufRestoreHelper(o("WAJids").threadIdForChatJid(r),{convertedProtobufs:a,type:"convertedProtobufs"},!1,void 0,!1,void 0,i,void 0,void 0,void 0,void 0,l,r)})}l.call=u}),98);
__d("MAWBridgeDeleteGroupInviteHandler",["LSThreadBitOffset","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a.threadJid,"MAWBridgeDeleteGroupInviteHandler",(function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(a,i){var l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.group_invites).getKeyRange(i));return(e||(e=n("Promise"))).all(l.map(function(e){return a.group_invites.delete(e.threadKey,e.inviterId,e.inviteeId)})).then(function(){r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(i)),function(e){if(e!=null){var n=o("LSThreadBitOffset").clear([105],e.capabilities,e.capabilities2,e.capabilities3,e.capabilities4,e.capabilities5),r=n[0],a=n[1],i=n[2],l=n[3],s=n[4];return t.threads.put(babelHelpers.extends({},e,{capabilities:r,capabilities2:a,capabilities3:i,capabilities4:l,capabilities5:s,snippet:void 0}))}})})});return function(e,t){return a.apply(this,arguments)}})())}l.call=s}),98);
__d("LSIssueThreadRemove",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][issueThreadRemove] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[15]=new t.Map,r[15].set("error_msg","Expected a nonempty query result"),r[15].set("code",t.i64.cast([0,3])),r[15].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[16]=t.createArray(),r[17]=(r[16].push(r[15]),r[16]),o=[void 0,r[16]],r[2]=o[0],r[3]=o[1]):(n=l.item,r[15]=new t.Map,r[15].set("backup_id",n.backupId),r[15].set("device_public_key_blob",n.devicePublicKeyBlob),r[15].set("device_private_key_blob",n.devicePrivateKeyBlob),r[15].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[15].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[15].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[15].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[15].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[15].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[15].set("orf_client_state_v2_blob",void 0),r[15].set("orf_v2_authority_level",void 0),r[15].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[15].set("device_id",n.deviceId),r[15].set("backup_tenancy",n.backupTenancy),r[15].set("encryption_version",n.encryptionVersion),r[15].set("revision_version",n.revisionVersion),r[15].set("initialize_restore_result",void 0),r[15].set("device_creation_timestamp_sec",void 0),r[15].set("authority_level",n.authorityLevel),a=[r[15],void 0],r[2]=a[0],r[3]=a[1])})},function(o){return r[5]=new t.Map,r[5].set("value",r[2]),r[5].set("errors",r[3]),r[6]=r[5].get("value"),r[6]!==void 0?t.sequence([function(o){return r[15]=r[6].get("backup_id"),r[16]=r[6].get("device_public_key_blob"),r[17]=r[6].get("device_private_key_blob"),r[18]=r[6].get("epoch_storage_public_key_blob"),r[19]=r[6].get("epoch_storage_private_key_blob"),r[20]=r[6].get("epoch_auth_public_key_blob"),r[21]=r[6].get("epoch_auth_private_key_blob"),r[22]=r[6].get("mailbox_root_key_blob"),r[23]=r[6].get("ocmf_client_state_blob"),r[24]=r[6].get("orf_client_state_v2_blob"),r[25]=r[6].get("orf_v2_authority_level"),r[26]=r[6].get("oblivious_validation_token_blob"),r[27]=r[6].get("device_id"),r[28]=r[6].get("backup_tenancy"),r[29]=r[6].get("encryption_version"),r[30]=r[6].get("revision_version"),r[31]=r[6].get("initialize_restore_result"),r[32]=r[6].get("device_creation_timestamp_sec"),r[33]=r[6].get("authority_level"),t.i64.neq(r[27],void 0)?t.sequence([function(e){return r[36]=void 0,t.i64.neq(r[36],void 0)?t.resolve(r[37]=r[36]):t.sequence([function(e){return r[43]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return r[44]&&(r[53]=(r[43].push(t.i64.cast([0,0])),r[43])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return r[45]&&(r[53]=(r[43].push(t.i64.cast([0,2])),r[43])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return r[46]&&(r[53]=(r[43].push(t.i64.cast([0,3])),r[43])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[47]&&(r[53]=(r[43].push(t.i64.cast([0,4])),r[43])),r[48]=t.createArray(),r[49]=t.i64.of_int32(r[43].length),t.i64.gt(r[49],t.i64.cast([0,0]))?t.loopAsync(r[49],function(e){return r[53]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[43],r[53]).then(function(e){var t;return t=e,r[54]=t[0],r[55]=t[1],t})},function(e){return r[56]=(r[48].push(r[54]),r[48])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[53]=t.createArray(),r[54]=t.i64.of_int32(r[48].length),t.i64.gt(r[54],t.i64.cast([0,0]))?t.loopAsync(r[54],function(e){return r[56]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[48],r[56]).then(function(e){var t;return t=e,r[57]=t[0],r[58]=t[1],t})},function(e){return r[59]=(r[53].push(t.i64.to_string(r[57])),r[53])}])}):t.resolve()},function(e){return r[55]=r[53].join(","),r[50]=r[55]}])},function(e){return r[48].some(function(e){return t.i64.eq(r[29],e)})?r[51]=r[29]:r[51]=void 0,t.i64.neq(r[51],void 0)?r[52]=r[51]:r[52]=void 0,r[37]=r[52]}])},function(o){return t.i64.neq(r[37],void 0)?r[38]=r[37]:r[38]=t.i64.cast([0,0]),t.i64.neq(r[28],void 0)?r[39]=r[28]:r[39]=t.i64.cast([0,1]),r[40]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),["eb_upload",":",e[0]].join(""),t.i64.cast([0,50026]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,93]),void 0,t.i64.le(t.i64.cast([0,0]),t.i64.cast([0,0]))?t.i64.cast([0,0]):t.i64.add(r[40],t.i64.sub(t.i64.cast([0,0]),t.i64.mod_(r[40],t.i64.cast([0,0])))),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],t})},function(n){return t.db.table(177).add({pk:void 0,pendingBackupTaskId:r[41],actionType:t.i64.cast([0,2]),contentType:t.i64.cast([0,2]),backupStatus:t.i64.cast([0,1]),listKey:e[0],uniqueKey:e[0],sortKey:e[1],persistentId:"",isInstamadillo:!1,lsTraceId:e[3],error:e[4]})},function(n){return t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,1]))?t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,1]))?(r[43]=t.createArray(),r[45]=(r[43].push("Successfully issued message backup task. act thread id = "),r[43]),r[45]=(r[43].push(e[0]),r[43]),r[45]=(r[43].push(", otid = "),r[43]),r[45]=(r[43].push(e[0]),r[43]),r[44]=r[43].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ","",r[44]].join("")),t.resolve()):(r[43]=t.createArray(),r[45]=(r[43].push("Successfully issued message remove task. act thread id = "),r[43]),r[45]=(r[43].push(e[0]),r[43]),r[45]=(r[43].push(", otid = "),r[43]),r[45]=(r[43].push(e[0]),r[43]),r[44]=r[43].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ","",r[44]].join("")),t.resolve()):(r[43]=t.createArray(),r[45]=(r[43].push("Successfully issued thread remove task. act thread id = "),r[43]),r[45]=(r[43].push(e[0]),r[43]),r[44]=r[43].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ","",r[44]].join("")),t.resolve())},function(e){var n;return r[42]=new t.Map,r[42].set("task_id",r[41]),n=[r[42],void 0],r[34]=n[0],r[35]=n[1]}]):t.sequence([function(n){return r[36]=t.createArray(),r[39]=(r[36].push("Skipping thread remove since EB is disabled. act thread id = "),r[36]),r[39]=(r[36].push(e[0]),r[36]),r[37]=r[36].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ","",r[37]].join("")),t.resolve()},function(e){var n;return r[38]=new t.Map,r[38].set("error_code",t.i64.cast([0,24])),r[38].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),r[38].set("error_message",""),n=[void 0,r[38]],r[34]=n[0],r[35]=n[1]}])},function(e){var t;return t=[r[34],r[35]],r[7]=t[0],r[8]=t[1],t}]):t.sequence([function(n){return r[15]=r[5].get("errors"),r[16]=r[5].get("errors"),r[17]=t.createArray(),r[20]=(r[17].push("Skipping thread remove since EB is disabled. act thread id = "),r[17]),r[20]=(r[17].push(e[0]),r[17]),r[18]=r[17].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ","",r[18]].join("")),t.resolve()},function(e){var n;return r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,1])),r[19].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),r[19].set("error_message",""),n=[void 0,r[19]],r[7]=n[0],r[8]=n[1]}])},function(e){return r[9]=t.i64.of_float(Date.now()),r[10]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[9],r[0])),r[14]=" ms",r[11]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][issueThreadRemove] ",r[11],r[12],r[11],r[13],r[11],r[14]].join("")),t.i64.eq(t.i64.mod_(r[10],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"issueThreadRemove",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[7],r[8]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsIssueThreadRemoveStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","pending_backups_context_v2"],a.exports=e}),null);
__d("LSIssueThreadRemoveStoredProcedure",["LSIssueThreadRemove","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueThreadRemove"),a.actThreadId,a.sortKey,a.source,a.traceId,a.error);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWBridgeDeleteMessagesOfThreadHandler",["EBIsEbEnabled","LSFactory","LSIntEnum","LSIssueThreadRemoveStoredProcedure","LSMEBTaskCreationSource","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){if(n.actionType===2){if(!(yield o("EBIsEbEnabled").isEbEnabledLS(t)))return;yield r("LSIssueThreadRemoveStoredProcedure")(r("LSFactory")(t),{actThreadId:n.threadId,sortKey:n.ts.toString(),source:(e||(e=o("LSIntEnum"))).ofNumber(r("LSMEBTaskCreationSource").TAM_WEB)})}}),u.apply(this,arguments)}l.call=s}),98);
__d("MAWBridgeEphemeralSettingsUpdatedForUIHandler",["MAWChatJid","MAWEphemeralSettingsUpdate","Promise","asyncToGeneratorRuntime","cr:17100"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=yield o("MAWChatJid").toThreadKeyMaybe(t,r.chatJid);return a!=null?o("MAWEphemeralSettingsUpdate").updateEphemeralSettingsWithTxn(t,r.ephemeralSettingArgs.ephemeralExpirationInSec,yield n("cr:17100").castUnixTimeToMillisTime(r.ephemeralSettingArgs.ephemeralLastUpdatedOrSetTimestamp),r.isEphemeralSettingReset,a,!1,r.author):(e||(e=n("Promise"))).resolve()}),u.apply(this,arguments)}l.call=s}),98);
__d("MAWBridgeFulfillRestorePromisePayloadHandler",["MAWEBRestoreTrackingUtils","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return t.success?o("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(t.value.traceId):o("MAWEBRestoreTrackingUtils").markEBRestoreFail(t.error.traceId),(e||(e=n("Promise"))).resolve()}l.call=s}),98);
__d("MAWBridgeGroupInfoUpdatedHandler",["I64","MAWMiActMappingTableAPI","MWFBLogger","ODS","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("MWFBLogger").MWLogger().tags(["bridgeUIEvent","Occam","Middleware"]);function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r,a=yield o("MAWMiActMappingTableAPI").getMappingRowForChatJid(t,n.chatJid);if(a==null){m.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Missing thread key for chatJid: ",""])),n.chatJid);return}var i=(r=n.threadName)!=null?r:void 0,l=a.serverThreadKey,p=t.threads,_=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(p).getKeyRange(l));if(_==null){(c||(c=o("ODS"))).bumpEntityKey(3185,"armadillo_group_info_update","missing_thread"),m.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Missing thread for updating group with threadKey: ",""])),(d||(d=o("I64"))).to_string(l));return}else i==null&&(i=_.threadName,m.WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(['MAWDB groupInfo is missing "name" field for threadKey: ',""])),(d||(d=o("I64"))).to_string(l)));var f=n.memberAddMode!=="all_member_add";yield p.put(babelHelpers.extends({},_,{needsAdminApprovalForNewParticipant:f,threadName:i}))}),_.apply(this,arguments)}l.call=p}),98);
__d("MAWBridgeGroupInviteUpdateHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","Promise","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a.threadJid,"MAWBridgeGroupInviteUpdateHandler",function(t,i){var l=(s||(s=o("I64"))).of_string(a.inviterId);return(e||(e=n("Promise"))).all([o("MAWUpdateLSThreadCapabilities").setGroupInviteTxn(t,i,l)]).then(r("emptyFunction"))})}l.call=u}),98);
__d("MAWBridgeHandleCOPDigest",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r){return(e||(e=n("Promise"))).resolve()}i.call=l}),66);
__d("MAWBridgeMediaExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeMediaExpiredHandler.bs",function(e,n){return e.attachments.delete(n,t.msgId,String(t.plaintextHash))})}l.call=e}),98);
__d("MAWBridgeMsgUpdatedHandler",["FBLogger","MAWAdminMsgCTA","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsgFetchLSReplyMsgAndAttachment","MAWUpdateMsg","MsgrWebGating","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.chatJid,"MAWBridgeMsgUpdatedHandler",(function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n,a){var i,l=yield(i=o("ReQL")).firstAsync(i.fromTableAscending(n.messages.index("messageId")).getKeyRange(t.msgId)),s=yield i.firstAsync(i.fromTableAscending(n.attachments).getKeyRange(a,t.msgId));if(l==null){r("FBLogger")("messenger_web").info("existing message is null for type %s, and attachment is null: %s",t.type_,s==null);return}var c=yield o("MAWAdminMsgCTA").getAdminMsgCtaStep(n,a,t),d=yield u(e,t);return o("MAWUpdateMsg").call(n,d,l,c)});return function(e,t){return a.apply(this,arguments)}})())}function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){var a=yield o("MAWMsgFetchLSReplyMsgAndAttachment").fetchReplyLocalViaLS(t,r);return a!=null?a:r}return(e||(e=n("Promise"))).resolve(r)}),c.apply(this,arguments)}l.call=s}),98);
__d("LSUpsertAttachmentRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.db.table(17).fetch([[[e[0],e[1]]]]),function(e){return e.delete()})},function(n){return t.db.table(17).add({threadKey:e[0],mediaGroup:e[1],minTimestampMs:e[2],maxTimestampMs:t.i64.cast([2328,1316134911]),hasMoreBefore:e[3],hasMoreAfter:!1,isLoadingBefore:!1,isLoadingAfter:!1,lastLoadedMessageId:e[4]})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertAttachmentRangeStoredProcedure",e.__tables__=["attachments_ranges_v2__generated"],a.exports=e}),null);
__d("LSUpsertAttachmentRangeStoredProcedure",["LSSynchronousPromise","LSUpsertAttachmentRange","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSUpsertAttachmentRange"),a.threadKey,a.mediaGroup,a.newMinTs,a.hasMoreBefore,a.newLastLoadedMessageId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWBridgeNewMediaRangeHandler",["I64","LSFactory","LSIntEnum","LSUpsertAttachmentRangeStoredProcedure","MAWMediaGalleryEBTaggingUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","cr:20238","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a.threadJid,"MAWBridgeNewMediaRangeHandler",function(t,i){var l=(e||(e=o("I64"))).of_float(a.earliestLoadedMediaTs),u=a.mediaGalleryGroup,c=n("cr:20238")!=null?n("cr:20238").getMediaRestoreEBRange(u).getRange(i):null,d=!!(c!=null&&c.hasMoreBefore)&&o("MAWMediaGalleryEBTaggingUtils").isMediaGalleryGroupSupportedForTaggedRestore(u),m=a.hasMoreBefore||d;return r("LSUpsertAttachmentRangeStoredProcedure")(r("LSFactory")(t),{hasMoreBefore:m,mediaGroup:(s||(s=o("LSIntEnum"))).ofNumber(u),newLastLoadedMessageId:a.lastLoadedMessageId,newMinTs:l,threadKey:i})})}function c(e,t){return u(e,t).then(r("emptyFunction"))}l.call=c}),98);
__d("MAWBridgeNoteReplyStartCountdownHandler",["MAWMessageExpirationStorage","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r){return r.msgs.reduce(function(e,t){return e.then(function(){o("MAWMessageExpirationStorage").setMessageForExpiration({bridgeMsgStartCountdown:t,expirationEvent:o("MAWMessageExpirationStorage").expirationNoteReplyEvent})})},(e||(e=n("Promise"))).resolve())}l.call=s}),98);
__d("LSCreateE2EEMetadataThread",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSQplAnnotateInt.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][createE2EEMetadataThread] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[19]=new t.Map,r[19].set("error_msg","Expected a nonempty query result"),r[19].set("code",t.i64.cast([0,3])),r[19].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[20]=t.createArray(),r[21]=(r[20].push(r[19]),r[20]),o=[void 0,r[20]],r[2]=o[0],r[3]=o[1]):(n=l.item,r[19]=new t.Map,r[19].set("backup_id",n.backupId),r[19].set("device_public_key_blob",n.devicePublicKeyBlob),r[19].set("device_private_key_blob",n.devicePrivateKeyBlob),r[19].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[19].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[19].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[19].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[19].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[19].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[19].set("orf_client_state_v2_blob",void 0),r[19].set("orf_v2_authority_level",void 0),r[19].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[19].set("device_id",n.deviceId),r[19].set("backup_tenancy",n.backupTenancy),r[19].set("encryption_version",n.encryptionVersion),r[19].set("revision_version",n.revisionVersion),r[19].set("initialize_restore_result",void 0),r[19].set("device_creation_timestamp_sec",void 0),r[19].set("authority_level",n.authorityLevel),a=[r[19],void 0],r[2]=a[0],r[3]=a[1])})},function(e){return r[5]=new t.Map,r[5].set("value",r[2]),r[5].set("errors",r[3]),r[6]=r[5].get("value"),r[6]!==void 0?t.sequence([function(e){return r[19]=r[6].get("backup_id"),r[20]=r[6].get("device_public_key_blob"),r[21]=r[6].get("device_private_key_blob"),r[22]=r[6].get("epoch_storage_public_key_blob"),r[23]=r[6].get("epoch_storage_private_key_blob"),r[24]=r[6].get("epoch_auth_public_key_blob"),r[25]=r[6].get("epoch_auth_private_key_blob"),r[26]=r[6].get("mailbox_root_key_blob"),r[27]=r[6].get("ocmf_client_state_blob"),r[28]=r[6].get("orf_client_state_v2_blob"),r[29]=r[6].get("orf_v2_authority_level"),r[30]=r[6].get("oblivious_validation_token_blob"),r[31]=r[6].get("device_id"),r[32]=r[6].get("backup_tenancy"),r[33]=r[6].get("encryption_version"),r[34]=r[6].get("revision_version"),r[35]=r[6].get("initialize_restore_result"),r[36]=r[6].get("device_creation_timestamp_sec"),r[37]=r[6].get("authority_level"),t.i64.neq(r[31],void 0)?t.sequence([function(e){return r[39]=void 0,t.i64.neq(r[39],void 0)?t.resolve(r[40]=r[39]):t.sequence([function(e){return r[52]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return r[53]&&(r[62]=(r[52].push(t.i64.cast([0,0])),r[52])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return r[54]&&(r[62]=(r[52].push(t.i64.cast([0,2])),r[52])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[55]=t[0],t})},function(e){return r[55]&&(r[62]=(r[52].push(t.i64.cast([0,3])),r[52])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return r[56]&&(r[62]=(r[52].push(t.i64.cast([0,4])),r[52])),r[57]=t.createArray(),r[58]=t.i64.of_int32(r[52].length),t.i64.gt(r[58],t.i64.cast([0,0]))?t.loopAsync(r[58],function(e){return r[62]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[52],r[62]).then(function(e){var t;return t=e,r[63]=t[0],r[64]=t[1],t})},function(e){return r[65]=(r[57].push(r[63]),r[57])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[62]=t.createArray(),r[63]=t.i64.of_int32(r[57].length),t.i64.gt(r[63],t.i64.cast([0,0]))?t.loopAsync(r[63],function(e){return r[65]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[57],r[65]).then(function(e){var t;return t=e,r[66]=t[0],r[67]=t[1],t})},function(e){return r[68]=(r[62].push(t.i64.to_string(r[66])),r[62])}])}):t.resolve()},function(e){return r[64]=r[62].join(","),r[59]=r[64]}])},function(e){return r[57].some(function(e){return t.i64.eq(r[33],e)})?r[60]=r[33]:r[60]=void 0,t.i64.neq(r[60],void 0)?r[61]=r[60]:r[61]=void 0,r[40]=r[61]}])},function(e){return t.i64.neq(r[40],void 0)?r[41]=r[40]:r[41]=t.i64.cast([0,0]),t.i64.neq(r[32],void 0)?r[42]=r[32]:r[42]=t.i64.cast([0,1]),t.nativeOperation(n("LSBase64Encode.nop"),r[27]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[26]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return r[45]=new t.Map,r[45].set("ocmf_client_state_blob",r[43]==null?"":r[43]),r[45].set("mailbox_root_key",r[44]==null?"":r[44]),r[46]=t.createArray(),t.forEach(t.filter(t.db.table(169).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),function(e){var t=e.item;return r[52]=(r[46].push(t.epochId),r[46])})},function(e){return r[50]="Queried locally available epochs. Count: ",r[47]=t.i64.of_int32(r[46].length),r[51]=t.i64.to_string(r[47]),r[48]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][MEBEpochClientUtils] ",r[48],r[50],r[48],r[51]].join("")),t.resolve()},function(e){return r[49]=new t.Map,r[49].set("device_id",r[31]),r[49].set("raw_tokens",r[45]),r[49].set("locally_available_epochs",r[46]),r[38]=r[49]}]):t.resolve(r[38]=void 0)},function(e){return r[7]=r[38]}]):t.resolve((r[19]=r[5].get("errors"),r[20]=r[5].get("errors"),r[7]=void 0))},function(e){return r[8]=t.i64.random(),r[9]=t.i64.to_string(r[8]),r[9]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,679677570]),r[9],!0,void 0):t.resolve()},function(e){return r[9]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,679677570]),r[9],"issue_task"):t.resolve()},function(e){return r[9]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679677570]),r[9],"request_type","THREAD_POINT_QUERY"):t.resolve()},function(e){return r[9]!==void 0?t.nativeOperation(n("LSQplAnnotateInt.nop"),t.i64.cast([0,679677570]),r[9],"task_creation_source",t.i64.cast([0,76])==null?t.i64.cast([-1,4294967295]):t.i64.cast([0,76])):t.resolve()},function(o){return r[10]=new t.Map,r[10].set("wa_jid",e[0]),r[10].set("offline_thread_key",e[1]),r[10].set("thread_type",e[2]),r[10].set("folder_type",e[3]),r[10].set("bump_timestamp_ms",e[4]),r[10].set("tam_thread_subtype",t.i64.cast([0,0])),r[10].set("created_by_local_device",e[5]),r[10].set("device_context",r[7]),r[10].set("qpl_instance_key",r[9]),r[10].set("should_run_privacy_and_folder_checks",!1),r[10].set("should_only_create_server_thread",!1),r[11]=r[10].get("offline_thread_key"),r[12]=t.toJSON(r[10]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[11]),t.i64.cast([0,388]),r[12],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return r[13]=t.i64.of_float(Date.now()),r[14]=t.i64.random(),r[16]="Finishing execution. Execution time: ",r[17]=t.i64.to_string(t.i64.sub(r[13],r[0])),r[18]=" ms",r[15]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][createE2EEMetadataThread] ",r[15],r[16],r[15],r[17],r[15],r[18]].join("")),t.i64.eq(t.i64.mod_(r[14],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[19]=",",r[20]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"createE2EEMetadataThread",[r[16],r[19],r[17],r[19],r[18]].join(""),r[20],t.i64.cast([0,4]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCreateE2EEMetadataThreadStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"],a.exports=e}),null);
__d("LSCreateE2EEMetadataThreadStoredProcedure",["LSCreateE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSCreateE2EEMetadataThread"),a.waJid,a.offlineThreadKey,a.threadType,a.folderType,a.bumpTimestampMs,a.createdByLocalDevice);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSCreateOfflineThreadingIDStoredProcedure",["LSCreateOfflineThreadingID","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSCreateOfflineThreadingID"),a.timestampMs);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWCreateOptimisticThread",["I64","LSAuthorityLevel","LSCreateOfflineThreadingIDStoredProcedure","LSFactory","LSIntEnum","LSMailboxType","LSRtcCallState","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield r("LSCreateOfflineThreadingIDStoredProcedure")(r("LSFactory")(t),{timestampMs:(e||(e=o("I64"))).of_float(Date.now())}),a=n[0];return a}),c.apply(this,arguments)}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a={authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),folderName:"inbox",lastReadWatermarkTimestampMs:(e||(e=o("I64"))).of_float(0),mailboxType:s.ofNumber(r("LSMailboxType").MESSENGER),ongoingCallState:s.ofNumber(r("LSRtcCallState").NO_ONGOING_CALL),parentThreadKey:e.zero,threadKey:n,threadType:s.ofNumber(15)};return yield t.threads.put(a),n}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield u(e);return yield d(e,t),t}),_.apply(this,arguments)}l.createOfflineThreadingId=u,l.createOptimisticThreadWithThreadKey=d,l.createOptimisticThread=p}),98);
__d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2",["DedupMiThreadCreationCache","FBLogger","I64","LSAuthorityLevel","LSCreateE2EEMetadataThreadStoredProcedure","LSFactory","LSIntEnum","MAWCreateOptimisticThread","MAWFolderUtils","MAWJids","MAWThreadLoadingState","MAWThreadUtils","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c="[Occamadillo][CreateE2EEMetadataThreadHandlerV2]";function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.bumpTimestampMs,a=t.creationSource,i=t.folderId,l=t.jid,u=t.optimisticThreadKey;g(a,l);var c=u!=null?yield e.threads.get((s||(s=o("I64"))).of_string(u)):null;if(c!=null&&o("DedupMiThreadCreationCache").DedupMiThreadCreationCache.has(l)){b(l);return}if(c!=null&&p(c)){h(l,(s||(s=o("I64"))).to_string(c.threadKey));return}var d={bumpTimestampMs:n,createdByLocalDevice:a==="outgoing_message",folderType:o("MAWFolderUtils").systemFolderToLSCoreClientFolder(i),offlineThreadKey:yield _(c,l,e),threadType:o("MAWThreadUtils").getLSThreadTypeFromJid(l),waJid:o("MAWJids").convertChatJidToIntJid(l)};return C(d),r("LSCreateE2EEMetadataThreadStoredProcedure")(r("LSFactory")(e),d).then(function(){o("DedupMiThreadCreationCache").addToDedupMiThreadCreationCache(l)})}),m.apply(this,arguments)}function p(e){var t=(u||(u=o("LSIntEnum"))).unwrapIntEnum(e.authorityLevel);switch(t){case r("LSAuthorityLevel").CLIENT_PARTIAL:case r("LSAuthorityLevel").OPTIMISTIC:case r("LSAuthorityLevel").SERVER_PARTIAL:return!1;case r("LSAuthorityLevel").AUTHORITATIVE:case r("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT:case r("LSAuthorityLevel").CLIENT_AUTHORITATIVE_DELETE:return!0;default:throw r("FBLogger")("messenger_web").mustfixThrow("Unknown authority level")}}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a){if(t!=null)return(e||(e=n("Promise"))).resolve(t.threadKey);var i=yield o("MAWCreateOptimisticThread").createOfflineThreadingId(a);return y(r,i),yield(e||(e=n("Promise"))).all([o("MAWCreateOptimisticThread").createOptimisticThreadWithThreadKey(a,i),o("MAWThreadLoadingState").markActThreadLoadingAsCompleted(a,{intJid:o("MAWJids").convertChatJidToIntJid(r),threadKey:i})]),i}),f.apply(this,arguments)}function g(e,t){r("FBLogger")("messenger_web").info(c+" handler called from %s for jid %s",e,t)}function h(e,t){r("FBLogger")("messenger_web").info(c+" handler returned early for jid %s because thread %s was already authoritative",e,t)}function y(e,t){r("FBLogger")("messenger_web").info(c+" no thread exists for jid %s, creating optimistic thread with key %s",e,(s||(s=o("I64"))).to_string(t))}function C(e){r("FBLogger")("messenger_web").info(c+" Calling LSCreateE2EEMetadataThreadStoredProcedure with params: bumpTimestampMs: %s, createdByLocalDevice: %s, folderType: %s, offlineThreadKey: %s, offlineThreadKeySource: %s, threadType: %s, waJid: %s",(s||(s=o("I64"))).to_string(e.bumpTimestampMs),e.createdByLocalDevice,s.to_string(e.folderType),s.to_string(e.offlineThreadKey),s.to_string(e.threadType),s.to_string(e.waJid))}function b(e){r("FBLogger")("messenger_web").info(c+" LSCreateE2EEMetadataThreadStoredProcedure has already been called for jid %s, early returning",e)}l.call=d}),98);
__d("MAWBridgeParticipantRemovedHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.threadJid,"MAWBridgeParticipantRemovedHandler",function(t,r){return t.participants.delete(r,(e||(e=o("I64"))).of_string(n.userId))})}l.call=s}),98);
__d("MAWBridgeRavenActionMsgForUIHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsg","MAWRavenUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ephemeralMediaState"],s,u;function c(t,r){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,r.threadJid,"MAWBridgeRavenActionMsgForUIHandler",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=t.attachments,l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(i).getKeyRange(a,r.ravenMsgId));if(l==null||l.ephemeralMediaState==null)return(u||(u=n("Promise"))).resolve();var c=(s||(s=o("I64"))).to_int32(l.ephemeralMediaState);if(l.ephemeralMediaViewMode==null)return(u||(u=n("Promise"))).resolve();var d=s.to_int32(l.ephemeralMediaViewMode),m=o("MAWMsg").MAWRavenMsgEphemeralMediaState.cast(c),p=o("MAWMsg").MAWRavenMsgEphemeralType.cast(d);if(m==null||p==null)return(u||(u=n("Promise"))).resolve();var _=o("MAWRavenUtils").getNextRavenMessageEphemeralState(m,p);if(_==null)return(u||(u=n("Promise"))).resolve();var f=l.ephemeralMediaState,g=babelHelpers.objectWithoutPropertiesLoose(l,e),h=babelHelpers.extends({ephemeralMediaState:s.of_int32(_)},g,{transportKey:"WhatsApp"}),y=[g.threadKey,g.messageId,g.attachmentFbid];return i.upsert(y,h)});return function(e,n){return t.apply(this,arguments)}})())}l.call=c}),98);
__d("MAWBridgeReceivedReceiptHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a=(e||(e=o("I64"))).of_string(n.fbid),i=o("MAWTimeUtils").toTimestamp(n.deliveredWatermarkTs),l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.participants).getKeyRange(r,a));l!=null&&(yield t.participants.put({authorityLevel:l.authorityLevel,contactId:l.contactId,deliveredWatermarkTimestampMs:(e||(e=o("I64"))).equal(i,(e||(e=o("I64"))).zero)?l.deliveredWatermarkTimestampMs:i,groupParticipantJoinState:l.groupParticipantJoinState,isAdmin:l.isAdmin,isModerator:l.isModerator,isSuperAdmin:l.isSuperAdmin,nickname:l.nickname,normalizedSearchTerms:l.normalizedSearchTerms,participantCapabilities:l.participantCapabilities,readActionTimestampMs:l.readActionTimestampMs,readWatermarkTimestampMs:l.readWatermarkTimestampMs,subscribeSource:l.subscribeSource,threadKey:l.threadKey,threadRoles:(e||(e=o("I64"))).zero}))}),u.apply(this,arguments)}function c(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.chatJid,"MAWBridgeReceivedReceiptHandler",function(e,n){return s(e,t,n)})}l.callWithoutWaitingForAnything=s,l.call=c}),98);
__d("LSRefetchContactRowIfExists",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.i64.le(a.authorityLevel,t.i64.cast([0,80]))?(r[0]=new t.Map,r[0].set("contact_id",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"cpq_v2",t.i64.cast([0,207]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve())})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSContactRefetchContactRowIfExistsStoredProcedure",e.__tables__=["contacts"],a.exports=e}),null);
__d("LSRefetchContactRowIfExistsStoredProcedure",["LSRefetchContactRowIfExists","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSRefetchContactRowIfExists"),a.id);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWBridgeRefreshContactHandler",["LSFactory","LSRefetchContactRowIfExistsStoredProcedure"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return r("LSRefetchContactRowIfExistsStoredProcedure")(r("LSFactory")(e),{id:t})}l.call=e}),98);
__d("MAWBridgeRemoveMessageSearchResultHandler",["Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a){return n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var r=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.message_search_results).filter(function(e){return a.includes(e.messageOtid)}));yield(e||(e=n("Promise"))).all(r.map(function(e){return t.message_search_results.delete(e.type_,e.query,e.threadKey,e.globalIndex)}))})().then(r("emptyFunction"))}l.call=s}),98);
__d("LSIssueAttachmentRestoreTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSBinaryToHex.nop","LSCreateDerivedKeys.nop","LSFindBackup","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","LSTruncateSortKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] Beginning execution."),e[7]!==void 0?t.resolve(r[1]=e[7]):t.sequence([function(e){return r[28]=t.i64.random(),r[29]=t.i64.to_string(r[28]),r[29]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,679684335]),r[29],!0,void 0):t.resolve()},function(e){return r[1]=r[29]}])},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,679684335]),r[1],"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure_start"):t.resolve()},function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[2]=a[0],r[3]=a[1],r[4]=a[2],r[5]=a[3],r[6]=a[4],r[7]=a[5],r[8]=a[6],r[9]=a[7],r[10]=a[8],r[11]=a[9],r[12]=a[10],r[13]=a[11],r[14]=a[12],r[15]=a[13],r[16]=a[14],r[17]=a[15],r[18]=a[16],r[19]=a[17],a):(o=l.item,t.sequence([function(e){return r[33]=o.backupTenancy,r[32]=o.encryptionVersion,r[28]=void 0,t.i64.neq(r[28],void 0)?t.resolve(r[29]=r[28]):t.sequence([function(e){return r[34]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[35]&&(r[44]=(r[34].push(t.i64.cast([0,0])),r[34])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[36]&&(r[44]=(r[34].push(t.i64.cast([0,2])),r[34])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return r[37]&&(r[44]=(r[34].push(t.i64.cast([0,3])),r[34])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[38]&&(r[44]=(r[34].push(t.i64.cast([0,4])),r[34])),r[39]=t.createArray(),r[40]=t.i64.of_int32(r[34].length),t.i64.gt(r[40],t.i64.cast([0,0]))?t.loopAsync(r[40],function(e){return r[44]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[34],r[44]).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return r[47]=(r[39].push(r[45]),r[39])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[44]=t.createArray(),r[45]=t.i64.of_int32(r[39].length),t.i64.gt(r[45],t.i64.cast([0,0]))?t.loopAsync(r[45],function(e){return r[47]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[39],r[47]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],t})},function(e){return r[50]=(r[44].push(t.i64.to_string(r[48])),r[44])}])}):t.resolve()},function(e){return r[46]=r[44].join(","),r[41]=r[46]}])},function(e){return r[39].some(function(e){return t.i64.eq(r[32],e)})?r[42]=r[32]:r[42]=void 0,t.i64.neq(r[42],void 0)?r[43]=r[42]:r[43]=void 0,r[29]=r[43]}])},function(e){var n;return t.i64.neq(r[29],void 0)?r[30]=r[29]:r[30]=t.i64.cast([0,0]),t.i64.neq(r[33],void 0)?r[31]=r[33]:r[31]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[30],r[31],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[2]=n[0],r[3]=n[1],r[4]=n[2],r[5]=n[3],r[6]=n[4],r[7]=n[5],r[8]=n[6],r[9]=n[7],r[10]=n[8],r[11]=n[9],r[12]=n[10],r[13]=n[11],r[14]=n[12],r[15]=n[13],r[16]=n[14],r[17]=n[15],r[18]=n[16],r[19]=n[17]}]))})},function(e){return t.storedProcedure(n("LSFindBackup")).then(function(e){var t;return t=e,r[21]=t[0],t})},function(o){return t.blobs.neq(r[5],void 0)?t.i64.neq(r[3],void 0)?r[21]!==void 0?t.blobs.neq(r[4],void 0)?t.sequence([function(o){return r[28]=t.createArray(),r[35]=(r[28].push(r[21]),r[28]),r[35]=(r[28].push(e[1]),r[28]),r[29]=t.toJSON(r[28]),r[30]=t.createArray(),r[35]=(r[30].push(t.i64.cast([0,32])),r[30]),t.nativeOperation(n("LSGetBlobFromString.nop"),["thread_ope_key","_",e[5]].join("")).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[31],void 0,r[4],r[30]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[32]?r[33]=!1:r[33]=!0,r[33]?t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),r[36]="Got null keys while deriving message list OPE key. Returning null blobish",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[36]].join("")),r[35]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[36],r[35],t.i64.cast([0,3]))},function(e){return r[34]=void 0}]):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[32],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[35]=t[0],r[36]=t[1],t})},function(e){return r[34]=r[35]}])},function(o){return t.blobs.neq(r[34],void 0)?t.sequence([function(o){return t.i64.neq(e[9],void 0)?r[35]=e[9]:r[35]=t.i64.cast([-1,4294967295]),t.nativeOperation(n("LSGetBlobFromInt64BE.nop"),e[6]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return t.nativeOperation(n("LSTruncateSortKey.nop"),r[36]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.nativeOperation(n("LSOpeEncrypt.nop"),r[34],r[37],t.i64.cast([0,16])).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return t.nativeOperation(n("LSBinaryToHex.nop"),r[38]).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),r[29]).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),r[40]).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[41]).then(function(e){var t;return t=e,r[42]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[42]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),r[21]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWFpbGJveF9pZF9zY29wZQ=="),r[44]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[45]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[46]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[4]).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWVzc2FnZV9pZF9zY29wZQ=="),r[48]).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[49]).then(function(e){var t;return t=e,r[50]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[50]).then(function(e){var t;return t=e,r[51]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[4]).then(function(e){var t;return t=e,r[52]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[52]).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[53]).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[54]).then(function(e){var t;return t=e,r[55]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[5]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("dGhyZWFkX2lkX3Njb3Bl"),r[56]).then(function(e){var t;return t=e,r[57]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[57]).then(function(e){var t;return t=e,r[58]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[58]).then(function(e){var t;return t=e,r[59]=t[0],t})},function(o){return r[60]=new t.Map,r[60].set("attachment_index_key",r[43]==null?"":r[43]),r[60].set("backup_ent_fbid",e[0]),r[60].set("delivery_object_id",e[1]),r[60].set("device_id",r[3]),r[60].set("mailbox_partial_id",r[47]==null?"":r[47]),r[60].set("media_type",e[3]),r[60].set("message_partial_id",r[51]==null?"":r[51]),r[60].set("product_type",e[2]),r[60].set("salt_partial_id",r[55]==null?"":r[55]),r[60].set("sort_key",r[39]==null?"":r[39]),r[60].set("thread_partial_id",r[59]==null?"":r[59]),r[60].set("trace_id",r[1]),r[60].set("source",r[35]),r[61]=new t.Map,r[61].set("otid",e[4]),r[61].set("server_thread_key",e[8]),r[61].set("timestamp",t.i64.to_string(e[6])),t.nativeOperation(n("LSBase64Encode.nop"),r[5]).then(function(e){var t;return t=e,r[62]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[4]).then(function(e){var t;return t=e,r[63]=t[0],t})},function(o){return r[64]=new t.Map,r[64].set("ocmf_client_state_blob",r[62]==null?"":r[62]),r[64].set("mailbox_root_key",r[63]==null?"":r[63]),r[65]=t.createArray(),r[76]=(r[65].push(e[4]),r[65]),r[76]=(r[65].push(e[1]),r[65]),r[66]=t.toJSON(r[65]),r[60].set("raw_identifiers",r[61]),r[60].set("backup_id",r[21]),r[60].set("thread_id",e[5]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[66]).then(function(e){var t;return t=e,r[67]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[67]).then(function(e){var t;return t=e,r[68]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[68]).then(function(e){var t;return t=e,r[69]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[69]).then(function(e){var t;return t=e,r[70]=t[0],t})},function(e){return r[60].set("salt_partial_access_token",r[70]==null?"":r[70]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[29]).then(function(e){var t;return t=e,r[71]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),r[71]).then(function(e){var t;return t=e,r[72]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[72]).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[73]).then(function(e){var t;return t=e,r[74]=t[0],t})},function(e){return r[60].set("salt_partial_attachment_index_key",r[74]==null?"":r[74]),r[60].set("raw_tokens",r[64]),r[75]=t.toJSON(r[60]),t.storedProcedure(n("LSIssueNewTask"),"encrypted_backups_attachment_restore",t.i64.cast([0,50020]),r[75],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):t.sequence([function(e){return r[37]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","OPE_key_is_null"].join(""),r[1]!==void 0&&r[37]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679684335]),r[1],"error",r[37]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,679684335]),r[1],!1):t.resolve()},function(e){return r[36]="OPE key is null for IssueAttachmentRestoreTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",r[36]].join("")),r[35]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",r[36],r[35],t.i64.cast([0,3]))}])}]):t.sequence([function(e){return r[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_mailbox_root_key"].join(""),r[1]!==void 0&&r[30]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679684335]),r[1],"error",r[30]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,679684335]),r[1],!1):t.resolve()},function(e){return r[29]="Missing mailbox_root_key for IssueAttachmentRestoreTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",r[29]].join("")),r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",r[29],r[28],t.i64.cast([0,3]))}]):t.sequence([function(e){return r[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_backup_id"].join(""),r[1]!==void 0&&r[30]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679684335]),r[1],"error",r[30]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,679684335]),r[1],!1):t.resolve()},function(e){return r[29]="Missing backup_id for IssueAttachmentRestoreTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",r[29]].join("")),r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",r[29],r[28],t.i64.cast([0,3]))}]):t.sequence([function(e){return r[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_device_id"].join(""),r[1]!==void 0&&r[30]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679684335]),r[1],"error",r[30]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,679684335]),r[1],!1):t.resolve()},function(e){return r[29]="Missing device_id for IssueAttachmentRestoreTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",r[29]].join("")),r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",r[29],r[28],t.i64.cast([0,3]))}]):t.sequence([function(e){return r[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_ocmf_client_state_blob"].join(""),r[1]!==void 0&&r[30]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679684335]),r[1],"error",r[30]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,679684335]),r[1],!1):t.resolve()},function(e){return r[29]="Missing ocmf_client_state_blob for IssueAttachmentRestoreTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",r[29]].join("")),r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",r[29],r[28],t.i64.cast([0,3]))}])},function(e){return r[22]=t.i64.of_float(Date.now()),r[23]=t.i64.random(),r[25]="Finishing execution. Execution time: ",r[26]=t.i64.to_string(t.i64.sub(r[22],r[0])),r[27]=" ms",r[24]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ",r[24],r[25],r[24],r[26],r[24],r[27]].join("")),t.i64.eq(t.i64.mod_(r[23],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[28]=",",r[29]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",[r[25],r[28],r[26],r[28],r[27]].join(""),r[29],t.i64.cast([0,4]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSIssueAttachmentRestoreTaskStoredProcedure",["LSIssueAttachmentRestoreTask","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueAttachmentRestoreTask"),a.backupEntFbid,a.deliveryObjectId,a.productType,a.mediaType,a.messageId,a.threadId,a.sortOrder,a.traceId,a.serverThreadKey,a.source);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWAsyncEBMediaDownloadPromise",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var n=t.messageId,r=t.objectId,o=t.plaintextHash,a=t.threadId,i=e.get(r);e.set(r,i!=null?[].concat(i,[{messageId:n,plaintextHash:o,threadId:a}]):[{messageId:n,plaintextHash:o,threadId:a}])}function s(t){var n;return(n=e.get(t))==null?void 0:n.pop()}i.setMediaDownloadPayload=l,i.retrieveMediaDownloadPayload=s}),66);
__d("MAWBridgeResignAttachmentCDNUrlHandler",["I64","LSFactory","LSIssueAttachmentRestoreTaskStoredProcedure","MAWAsyncEBMediaDownloadPromise","MAWBridgeFireAndForget","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e,s="-8";function u(t,n){var a,i=n.traceId,l=(a=n.skipLegacyMediaDownloadFlow)!=null?a:!1;function u(e,t,n){!l&&i!=null&&o("MAWBridgeFireAndForget").fireAndForget("backend","addMediaDownloadQpl",{annotations:n!=null?n:void 0,pointName:t,qplInstanceKey:i,qplType:e})}return u("point","resign_cdn_url_bridge_handler_start"),o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.threadJid,"MAWBridgeResignAttachmentCDNUrlHandler",function(t,a){var l={backupEntFbid:(e||(e=o("I64"))).of_string(s),deliveryObjectId:n.deliveryObjectId,mediaType:n.mediaType,messageId:n.messageId,productType:n.productType,serverThreadKey:e.to_string(a),sortOrder:e.of_float(n.sortOrder),threadId:n.threadId,traceId:i.toString()};return n.skipLegacyMediaDownloadFlow!==!0&&o("MAWAsyncEBMediaDownloadPromise").setMediaDownloadPayload({messageId:n.msgId,objectId:n.deliveryObjectId,plaintextHash:n.plaintextHash,threadId:n.threadId}),u("point","resign_cdn_url_issue_attachment_task",{string:{taskTraceId:l.traceId}}),r("LSIssueAttachmentRestoreTaskStoredProcedure")(r("LSFactory")(t),l).then(function(){u("point","resign_cdn_url_issue_attachment_task_end")}).catch(function(e){u("fail","resign_cdn_url_issue_attachment_task_fail",{string:{error:e.toString()}})})})}l.call=u}),98);
__d("MAWBridgeTraceUtils",["I64","Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,r,a){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.data_trace_meta).filter(function(e){var t=e.contextThree;return t!=null&&r===t&&(s||(s=o("I64"))).equal(e.traceType,a)?e.shouldFlush===!1:!1})).then(function(t){return t.length!==0?(e||(e=n("Promise"))).resolve(t[0].traceId):(e||(e=n("Promise"))).resolve()})}l.getTraceId=u}),98);
__d("MAWBridgeStartTraceHandler",["ArmadilloDataTraceCheckPoint","ArmadilloDataTraceType","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceTag","LSFactory","LSRequestId","MAWAckLevel","MAWBridgeTraceUtils","MAWMsg","MAWTimeUtils","Promise","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){return e.data_trace_meta.add({contextOne:void 0,contextThree:t.externalId,contextTwo:void 0,foregroundTimestampMs:(s||(s=o("I64"))).zero,initTimestampMs:o("MAWTimeUtils").toTimestamp(t.ts),predefinedId:void 0,shouldFlush:!1,traceId:n,traceType:t.traceType}).then(function(){return r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(e),{checkPointId:o("ArmadilloDataTraceCheckPoint").traceCreated,dataTraceId:n,syncChannel:(s||(s=o("I64"))).neg_one})}).then(function(){var a;if(!(t.threadKey==null||!r("gkx")("23995")))return r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(e),{checkPointId:o("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:n,syncChannel:(s||(s=o("I64"))).neg_one,tags:(a=t.threadKey)!=null?a:void 0})})}function c(t,a){var i=a.ack,l=a.traceType;return i===o("MAWAckLevel").ACK.clock?o("MAWBridgeTraceUtils").getTraceId(t,a.externalId,a.traceType).then(function(i){if(i==null){var c=r("LSRequestId").generate();return(s||(s=o("I64"))).equal(l,o("ArmadilloDataTraceType").armadilloMessageSend)?u(t,a,c).then(function(){var e=a.threadType;if(e!=="User")return r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(t),{checkPointId:o("ArmadilloDataTraceCheckPoint").traceGroupMessage,dataTraceId:c,syncChannel:(s||(s=o("I64"))).neg_one})}).then(function(){if(a.isFirstMsg)return r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(t),{checkPointId:o("ArmadilloDataTraceCheckPoint").armadilloActMessageSend,dataTraceId:c,syncChannel:(s||(s=o("I64"))).neg_one,tags:"first_msg=1"})}).then(function(){var i=a.type_,l=i===o("MAWMsg").text?o("ArmadilloDataTraceCheckPoint").traceTextMessage:i===o("MAWMsg").ptt||i===o("MAWMsg").image||i===o("MAWMsg").video||i===o("MAWMsg").gif?o("ArmadilloDataTraceCheckPoint").traceMediaMessage:void 0;return l==null||r("promiseDone")(r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(t),{checkPointId:l,dataTraceId:c,syncChannel:(s||(s=o("I64"))).neg_one})),(e||(e=n("Promise"))).resolve(l)}).then(function(e){if(e!=null&&(s||(s=o("I64"))).equal(e,o("ArmadilloDataTraceCheckPoint").traceMediaMessage)){var n=a.type_,i=n===o("MAWMsg").image?o("LSDataTraceTag").image:n===o("MAWMsg").ptt?o("LSDataTraceTag").audio:n===o("MAWMsg").video?o("LSDataTraceTag").video:n===o("MAWMsg").gif?o("LSDataTraceTag").animatedImage:o("LSDataTraceTag").none;return r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(t),{checkPointId:o("ArmadilloDataTraceCheckPoint").richMediaMediaSendAttachmentType,dataTraceId:c,syncChannel:(s||(s=o("I64"))).neg_one,tags:String(i)})}}):u(t,a,c)}}):(e||(e=n("Promise"))).resolve()}l.call=c}),98);
__d("MAWBridgeXMAShareTombstonedHandler",["FBLogger","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a){var i=String(a.xmaId);return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a.threadJid,"MAWBridgeXMAShareTombstonedHandler",function(t,l){return t.attachments.get(l,a.msgId,i).then(function(s){if(s==null)return(e||(e=n("Promise"))).resolve();var u=[s.defaultCtaId,s.attachmentCta1Id,s.attachmentCta2Id,s.attachmentCta3Id].filter(Boolean),c=u.map(function(e){return t.attachment_ctas.delete(e)});return(e||(e=n("Promise"))).all(c).then(function(){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(l,a.msgId,i)).then((function(){var o=n("asyncToGeneratorRuntime").asyncToGenerator(function*(o){if(o!=null){var a=babelHelpers.extends({},o,{attachmentCta1Id:void 0,attachmentCta2Id:void 0,attachmentCta3Id:void 0,cta1Title:void 0,cta1Type:void 0,cta2Title:void 0,cta2Type:void 0,cta3Title:void 0,cta3Type:void 0,defaultCtaId:void 0,defaultCtaTitle:void 0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,previewHeight:void 0,previewHeightLarge:void 0,previewWidth:void 0,previewWidthLarge:void 0,subtitleText:void 0,titleText:void 0});yield t.attachments.put(a)}return r("FBLogger")("messenger_web_sharing").blameToPreviousFrame().mustfix("Trying to tombstone a secure xma attachment but no existing attachment"),(e||(e=n("Promise"))).resolve()});return function(e){return o.apply(this,arguments)}})())})})})}l.call=s}),98);
__d("MAWBridgeStoryReplyStartCountdownHandler",["I64","MAWBridgeXMAShareTombstonedHandler","MAWDbXMA","MAWMessageExpirationStorage","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,r){return r.msgs.reduce(function(r,a){return r.then(function(){return o("MAWMessageExpirationStorage").setMessageForExpiration({bridgeMsgStartCountdown:a,expirationEvent:o("MAWMessageExpirationStorage").expirationStoryReplyEvent}),(s||(s=o("I64"))).of_int32(a.millisecondsUntilCountdownTs),o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a.threadJid,"MAWBridgeMsgsStartCountdownHandler",function(t,r){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(r,a.msgId)).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){yield(e||(e=n("Promise"))).all(r.map(function(e){var n=o("MAWDbXMA").convertNumberToXMAId(Number.parseInt(e.attachmentFbid,10)),r={msgId:a.msgId,threadJid:a.threadJid,xmaId:n};return o("MAWBridgeXMAShareTombstonedHandler").call(t,r)}))});return function(e){return r.apply(this,arguments)}})())})})},(e||(e=n("Promise"))).resolve())}l.call=u}),98);
__d("MAWBridgeSyncContacts",["CurrentMessengerUser","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","Promise","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("CurrentMessengerUser").getID();function d(t,a){return a.reduce(function(e,n){var a=(s||(s=o("I64"))).of_string(n);return e.then(function(){return r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(t),{authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:u.ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:u.ofNumber(r("LSContactIdType").FBID),contactType:u.ofNumber(r("LSContactType").USER),contactViewerRelationship:u.ofNumber(r("LSContactViewerRelationship").UNKNOWN),gender:u.ofNumber(r("LSContactGender").UNKNOWN),id:a,isBlocked:!1,isMemorialized:!1,isSelf:c===n,workForeignEntityType:u.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN)})}).then(r("emptyFunction"))},(e||(e=n("Promise"))).resolve())}l.call=d}),98);
__d("MAWBridgeThreadHiddenV2Handler",["LSFactory","LSIntEnum","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n,"MAWBridgeThreadHiddenV2Handler",function(t,n){var a=r("LSFactory")(t);return r("LSOptimisticRemoveThreadStoredProcedure")(a,{removeType:(e||(e=o("LSIntEnum"))).ofNumber(r("LSThreadRemoveType").DELETE_THREAD),threadKey:n})})}l.call=s}),98);
__d("MAWBridgeThreadUpdatedHandler",["MAWBridgeBuildThreadSnippet","MAWBridgeUIEventDataValidation","MAWFolderUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","asyncToGeneratorRuntime","getMAWLastMessageCtaType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=t.folder!=null?o("MAWFolderUtils").getMessagingFolderTag(t.folder):e.folderName;return(n=t.cannotReplyReason)!=null?n:r==="inbox"?void 0:e.cannotReplyReason}function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){var i=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(a));if(i!=null){var l=o("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(n,i.snippet),s=e(i,n),u=r("getMAWLastMessageCtaType")(n.snippetType),c=babelHelpers.extends({},i,{cannotReplyReason:s,folderName:i.folderName,lastMessageCtaType:u,parentThreadKey:i.parentThreadKey,snippet:l,snippetSenderContactId:n.snippetSenderContactId==null?i.snippetSenderContactId:o("MAWBridgeUIEventDataValidation").stringToI64Opt(n.snippetSenderContactId)});yield t.threads.put(c)}}),u.apply(this,arguments)}function c(e,t){var n=t.threadJid;return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,n,"MAWBridgeThreadUpdatedHandler",function(e,n){return s(e,t,n)})}l.callWithoutWaitingForAnything=s,l.call=c}),98);
__d("MAWBridgeUIEventQueueQPLLogger",["QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){r("QPLUserFlow").start(r("qpl")._(1056849266,"1765"),{annotations:{string_array:{events:t}},instanceKey:e})}function s(e,t){r("QPLUserFlow").addAnnotations(r("qpl")._(1056849266,"1765"),t,{instanceKey:e})}function u(e){r("QPLUserFlow").endSuccess(r("qpl")._(1056849266,"1765"),{instanceKey:e})}function c(e,t){r("QPLUserFlow").endFailure(r("qpl")._(1056849266,"1765"),"MAWBridgeUIEventHandlerFailure",{annotations:{string:{failedEventTag:t}},instanceKey:e})}l.start=e,l.addAnnotations=s,l.endSuccess=u,l.endFailure=c}),98);
__d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r){return(e||(e=n("Promise"))).resolve()}i.call=l}),66);
__d("MAWBridgeUpdateClientRestoreStatus",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","MAWUpdateClientRestoreStatusOperationType","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.encrypted_backups_client_restore_status).filter(function(e){return e.threadId===t})).then(function(t){return t!=null?e.encrypted_backups_client_restore_status.delete(t.threadId).then(r("emptyFunction")):(u||(u=n("Promise"))).resolve()})}function d(t,a,i,l){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.encrypted_backups_client_restore_status).getKeyRange(a)).then(function(l){return l!=null?t.encrypted_backups_client_restore_status.put({lastUpdated:(e||(e=o("I64"))).of_float(Date.now()),restoreStatus:(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsClientRestoreState").RESTORE_COMPLETE),serverThreadKey:i,threadId:a}):(u||(u=n("Promise"))).resolve()})}function m(e){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.encrypted_backups_client_restore_status)).then(function(t){return t.reduce(function(t,n){return t.then(function(){return c(e,n.threadId)})},(u||(u=n("Promise"))).resolve())})}function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=a.threadId,l=a.action;return l===o("MAWUpdateClientRestoreStatusOperationType").upsertClientRestoreStatus?yield t.encrypted_backups_client_restore_status.put({lastUpdated:(e||(e=o("I64"))).of_float(Date.now()),restoreStatus:(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS),serverThreadKey:void 0,threadId:i}):yield d(t,a.threadId,void 0,a.ebPrefetch),(u||(u=n("Promise"))).resolve()}),_.apply(this,arguments)}l.truncateClientRestoreStatusTable=m,l.call=p}),98);
__d("MAWBridgeUpdateContactAsConnectedHandler",["FBLogger","I64","LSAddMessengerContactStoredProcedure","LSContactViewerRelationship","LSFactory","LSIntEnum","LSOptimisticAcceptMessageRequestStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=a.contactUserId,l=a.threadJid,c=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.contacts).getKeyRange((s||(s=o("I64"))).of_string(i)));if(c==null){r("FBLogger")("messenger_web").warn("Missing contact in MAWBridgeUpdateContactAsConnectedHandler");return}var d=babelHelpers.extends({},c,{contactViewerRelationship:(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactViewerRelationship").CONTACT_OF_VIEWER)});return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,l,"MAWBridgeUpdateContactAsConnectedHandler",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){yield(e||(e=n("Promise"))).allSettled([t.contacts.upsert([c.id],d),r("LSAddMessengerContactStoredProcedure")(r("LSFactory")(t),{contactId:c.id}),o("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(t,a),r("LSOptimisticAcceptMessageRequestStoredProcedure")(r("LSFactory")(t),{threadKey:a})])});return function(e,n){return t.apply(this,arguments)}})())}),d.apply(this,arguments)}l.call=c}),98);
__d("LSUpdateE2EEMetadataParticipants",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_key",e[0]),r[0].set("user_self_remove",!1),r[1]=r[0].get("thread_key"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,394]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateE2EEMetadataParticipantsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSUpdateE2EEMetadataParticipantsStoredProcedure",["LSSynchronousPromise","LSUpdateE2EEMetadataParticipants","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSUpdateE2EEMetadataParticipants"),a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWBridgeUpdateE2EEMetadataParticipantsHandler",["LSFactory","LSUpdateE2EEMetadataParticipantsStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeThreadsLoadedHandler",function(e,t){return r("LSUpdateE2EEMetadataParticipantsStoredProcedure")(r("LSFactory")(e),{threadKey:t})})}l.call=e}),98);
__d("LSBumpE2EEMetadataThread",["LSCancelTaskByQueueName","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("bump_timestamp_ms",e[1]),r[0].set("thread_key",e[0]),r[0].set("bumped_by_local_device_send",e[2]),r[0].set("tam_thread_subtype",t.i64.cast([0,0])),r[0].set("wa_jid",void 0),r[0].set("message_ephemeral_duration_in_sec",t.i64.cast([0,0])),r[0].set("message_product_type",void 0),r[0].set("is_message_deletion",!1),r[0].set("is_unbump",e[3]),r[1]=r[0].get("thread_key"),t.storedProcedure(n("LSCancelTaskByQueueName"),t.i64.to_string(r[1]),t.i64.cast([0,389]))},function(o){return r[2]=new t.Map,r[2].set("bump_timestamp_ms",e[1]),r[2].set("thread_key",e[0]),r[2].set("bumped_by_local_device_send",e[2]),r[2].set("tam_thread_subtype",t.i64.cast([0,0])),r[2].set("wa_jid",void 0),r[2].set("message_ephemeral_duration_in_sec",t.i64.cast([0,0])),r[2].set("message_product_type",void 0),r[2].set("is_message_deletion",!1),r[2].set("is_unbump",e[3]),r[3]=r[2].get("thread_key"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[3]),t.i64.cast([0,389]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxBumpE2EEMetadataThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSBumpE2EEMetadataThreadStoredProcedure",["LSBumpE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBumpE2EEMetadataThread"),a.threadKey,a.serverAuthoritativeTimestampMs,a.bumpedByLocalDeviceSend,a.isUnbump);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWBridgeUpdateThreadActivityHandler",["I64","LSBumpE2EEMetadataThreadStoredProcedure","LSFactory","MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2","MAWBridgeOccamadilloVerifyThreadExistsHandler","MAWChatJid","MAWFolderTypes","MAWJids","MAWMiActGetThreadLifecycleState__DO_NOT_USE","MWFBLogger","ODS","WAJids","WATimeUtils","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWLogger().tags(["bridgeUIEvent","Occam","ActivityUpdate"]);function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a=null;return r("gkx")("19864")?((e||(e=o("ODS"))).bumpEntityKey(3185,"occam_thread_creation","verify"),yield o("MAWBridgeOccamadilloVerifyThreadExistsHandler").call(t,{authoritativeThreadKey:null,cannotReplyReason:null,clientThreadKey:null,description:"",folder:null,instanceKey:null,isGroup:o("WAJids").switchOnMsgrChatJidType(n.chatJid,{group:function(){return!0},user:function(){return!1}}),jid:n.chatJid,lastReadTs:o("WATimeUtils").castToMillisTime((s||(s=o("I64"))).to_float(n.bumpTimestampMs))}),a=yield o("MAWChatJid").toThreadMaybe(t,n.chatJid),a==null&&((e||(e=o("ODS"))).bumpEntityKey(3185,"occam_thread_creation","create"),yield o("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2").call(t,{bumpTimestampMs:n.bumpTimestampMs,creationSource:n.source==="outgoing_msg"?"outgoing_message":"incoming_message",folderId:o("MAWFolderTypes").INBOX,jid:n.chatJid,optimisticThreadKey:null}),a=yield o("MAWChatJid").toThreadMaybe(t,n.chatJid))):((e||(e=o("ODS"))).bumpEntityKey(3185,"occam_thread_creation","create_no_verify"),yield o("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2").call(t,{bumpTimestampMs:n.bumpTimestampMs,creationSource:n.source==="outgoing_msg"?"outgoing_message":"incoming_message",folderId:o("MAWFolderTypes").INBOX,jid:n.chatJid,optimisticThreadKey:null}),a=yield o("MAWChatJid").toThreadMaybe(t,n.chatJid)),a==null?(yield b(t,n.chatJid),null):a}),d.apply(this,arguments)}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("MAWChatJid").toThreadMaybe(e,t.chatJid);e:{if(t.source==="outgoing_msg"||t.source==="incoming_msg"){var r=n!=null?n:yield c(e,t);if(r==null){yield b(e,t.chatJid);return}return _(e,r,t)}if(t.source==="deleted_msg"){if(n==null){yield b(e,t.chatJid);return}return g(e,n,t)}if(t.source==="inserted_admin_msg"){if(n==null){yield b(e,t.chatJid);return}return C(n,t,"No bump for admin message")}if(t.source==="eb_restore")return u.warn("Attempted bump from EB restore");throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.source)}}),p.apply(this,arguments)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){if(y(t,n)){C(t,n,"Stale incoming bump");return}yield r("LSBumpE2EEMetadataThreadStoredProcedure")(r("LSFactory")(e),{bumpedByLocalDeviceSend:n.source==="outgoing_msg",isUnbump:!1,serverAuthoritativeTimestampMs:n.bumpTimestampMs,threadKey:t.threadKey}),C(t,n,"Thread bumped")}),f.apply(this,arguments)}function g(e,t,n){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){yield e.threads.put(babelHelpers.extends({},t,{lastActivityTimestampMs:(s||(s=o("I64"))).min(t.lastActivityTimestampMs,n.bumpTimestampMs),lastReadWatermarkTimestampMs:s.min(t.lastReadWatermarkTimestampMs,n.bumpTimestampMs)})),C(t,n,"Thread unbumped")}),h.apply(this,arguments)}function y(e,t){return t.source==="incoming_msg"&&(s||(s=o("I64"))).le(t.bumpTimestampMs,e.lastActivityTimestampMs)}function C(e,t,n){var r=[(s||(s=o("I64"))).to_string(e.threadKey),t.source,s.to_string(t.bumpTimestampMs),s.to_string(e.lastActivityTimestampMs),s.to_string(e.lastReadWatermarkTimestampMs)];u.debug.apply(u,[n+". threadKey: %s, source: %s, bumpTimestampMs: %s, originalLastActivityTimestampMs: %s, originalLastReadWatermarkTimestampMs: %s"].concat(r))}function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByJid(e,o("MAWJids").convertChatJidToIntJid(t),"MAWBridgeUpdateThreadActivityHandler");u.mustfix("Missing LSDBThread when updating thread activity. jid: %s, thread state: %s",t,n.type)}),v.apply(this,arguments)}l.call=m}),98);
__d("MAWBridgeUpdateTraceHandler",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","MAWBridgeTraceEvent","Promise","ReQL","emptyFunction","updateAndFlushLSDataTrace"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,a,i){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.data_trace_meta).filter(function(e){var t=e.contextThree;return t!=null&&a.externalIds.includes(t)&&(u||(u=o("I64"))).equal(e.traceType,a.traceType)?e.shouldFlush===!1:!1})).then(function(l){var s=[];return l.reduce(function(e,n){return e.then(function(){s.push(n.traceId);var e=a.errorMessage;return e!=null?r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(t),{checkPointId:i,dataTraceId:n.traceId,errorMessage:e,syncChannel:(u||(u=o("I64"))).neg_one}):r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(t),{checkPointId:i,dataTraceId:n.traceId,syncChannel:(u||(u=o("I64"))).neg_one})})},(e||(e=n("Promise"))).resolve()).then(function(){return s})})}function d(t,o){return o.reduce(function(e,n){return e.then(function(){return r("updateAndFlushLSDataTrace")(t,n)})},(e||(e=n("Promise"))).resolve())}function m(t,a){var i=a.event;return i===r("MAWBridgeTraceEvent").ReceivedReceipt?c(t,a,o("ArmadilloDataTraceCheckPoint").deliveryReceiptReceived).then(function(e){return d(t,e)}):i===r("MAWBridgeTraceEvent").ReceivedSent?c(t,a,o("ArmadilloDataTraceCheckPoint").advancedCryptoMEMSendTaskComplete).then(r("emptyFunction")):i===r("MAWBridgeTraceEvent").FlowEndForFailure?c(t,a,(s||(s=o("LSIntEnum"))).ofNumber(r("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE)).then(function(e){return d(t,e)}):i===r("MAWBridgeTraceEvent").FlowEndForSuccess?c(t,a,(s||(s=o("LSIntEnum"))).ofNumber(r("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH)).then(function(e){return d(t,e)}):(e||(e=n("Promise"))).resolve()}l.call=m}),98);
__d("LSIssueAttachmentBackupTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] Beginning execution."),e[5]!==void 0?t.resolve(r[1]=e[5]):t.sequence([function(e){return r[27]=t.i64.random(),r[28]=t.i64.to_string(r[27]),r[28]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,637738637]),r[28],!0,void 0):t.resolve()},function(e){return r[1]=r[28]}])},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,637738637]),r[1],"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure_start"):t.resolve()},function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[2]=a[0],r[3]=a[1],r[4]=a[2],r[5]=a[3],r[6]=a[4],r[7]=a[5],r[8]=a[6],r[9]=a[7],r[10]=a[8],r[11]=a[9],r[12]=a[10],r[13]=a[11],r[14]=a[12],r[15]=a[13],r[16]=a[14],r[17]=a[15],r[18]=a[16],r[19]=a[17],a):(o=l.item,t.sequence([function(e){return r[32]=o.backupTenancy,r[31]=o.encryptionVersion,r[27]=void 0,t.i64.neq(r[27],void 0)?t.resolve(r[28]=r[27]):t.sequence([function(e){return r[33]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[34]&&(r[43]=(r[33].push(t.i64.cast([0,0])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[35]&&(r[43]=(r[33].push(t.i64.cast([0,2])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[36]&&(r[43]=(r[33].push(t.i64.cast([0,3])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return r[37]&&(r[43]=(r[33].push(t.i64.cast([0,4])),r[33])),r[38]=t.createArray(),r[39]=t.i64.of_int32(r[33].length),t.i64.gt(r[39],t.i64.cast([0,0]))?t.loopAsync(r[39],function(e){return r[43]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[33],r[43]).then(function(e){var t;return t=e,r[44]=t[0],r[45]=t[1],t})},function(e){return r[46]=(r[38].push(r[44]),r[38])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[43]=t.createArray(),r[44]=t.i64.of_int32(r[38].length),t.i64.gt(r[44],t.i64.cast([0,0]))?t.loopAsync(r[44],function(e){return r[46]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[38],r[46]).then(function(e){var t;return t=e,r[47]=t[0],r[48]=t[1],t})},function(e){return r[49]=(r[43].push(t.i64.to_string(r[47])),r[43])}])}):t.resolve()},function(e){return r[45]=r[43].join(","),r[40]=r[45]}])},function(e){return r[38].some(function(e){return t.i64.eq(r[31],e)})?r[41]=r[31]:r[41]=void 0,t.i64.neq(r[41],void 0)?r[42]=r[41]:r[42]=void 0,r[28]=r[42]}])},function(e){var n;return t.i64.neq(r[28],void 0)?r[29]=r[28]:r[29]=t.i64.cast([0,0]),t.i64.neq(r[32],void 0)?r[30]=r[32]:r[30]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[29],r[30],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[2]=n[0],r[3]=n[1],r[4]=n[2],r[5]=n[3],r[6]=n[4],r[7]=n[5],r[8]=n[6],r[9]=n[7],r[10]=n[8],r[11]=n[9],r[12]=n[10],r[13]=n[11],r[14]=n[12],r[15]=n[13],r[16]=n[14],r[17]=n[15],r[18]=n[16],r[19]=n[17]}]))})},function(o){return t.blobs.neq(r[5],void 0)?t.i64.neq(r[3],void 0)?(r[27]=t.i64.to_string(r[2]),r[27]!==void 0?t.sequence([function(o){return r[28]=t.createArray(),r[63]=(r[28].push(r[27]),r[28]),r[63]=(r[28].push(e[0]),r[28]),r[29]=t.toJSON(r[28]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[29]).then(function(e){var t;return t=e,r[30]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),r[30]).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[31]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[32]).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),r[27]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWFpbGJveF9pZF9zY29wZQ=="),r[34]).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[35]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[36]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(o){return r[38]=new t.Map,r[38].set("attachment_index_key",r[33]==null?"":r[33]),r[38].set("delivery_object_id",e[0]),r[38].set("device_id",r[3]),r[38].set("mailbox_partial_id",r[37]==null?"":r[37]),r[38].set("media_type",e[2]),r[38].set("product_type",e[1]),r[38].set("trace_id",r[1]),r[39]=new t.Map,r[39].set("otid",e[3]),r[39].set("server_thread_key",e[6]),r[39].set("timestamp",void 0),t.nativeOperation(n("LSGetBlobFromString.nop"),e[3]).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[40]).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[41]).then(function(e){var t;return t=e,r[42]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[42]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(o){return r[38].set("salt_partial_id",r[43]==null?"":r[43]),t.nativeOperation(n("LSGetBlobFromString.nop"),e[4]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("dGhyZWFkX2lkX3Njb3Bl"),r[44]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[45]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[46]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(o){return r[38].set("thread_partial_id",r[47]==null?"":r[47]),t.nativeOperation(n("LSGetBlobFromString.nop"),e[3]).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWVzc2FnZV9pZF9zY29wZQ=="),r[48]).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[49]).then(function(e){var t;return t=e,r[50]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[50]).then(function(e){var t;return t=e,r[51]=t[0],t})},function(o){return r[38].set("message_partial_id",r[51]==null?"":r[51]),r[52]=t.createArray(),r[63]=(r[52].push(e[3]),r[52]),r[63]=(r[52].push(e[0]),r[52]),r[53]=t.toJSON(r[52]),r[38].set("raw_identifiers",r[39]),r[38].set("backup_id",r[27]),r[38].set("thread_id",e[4]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[53]).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[54]).then(function(e){var t;return t=e,r[55]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[55]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[56]).then(function(e){var t;return t=e,r[57]=t[0],t})},function(e){return r[38].set("salt_partial_access_token",r[57]==null?"":r[57]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[29]).then(function(e){var t;return t=e,r[58]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),r[58]).then(function(e){var t;return t=e,r[59]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[59]).then(function(e){var t;return t=e,r[60]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[60]).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return r[38].set("salt_partial_attachment_index_key",r[61]==null?"":r[61]),r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637738637]),r[1],!0):t.resolve()},function(e){return r[62]=t.toJSON(r[38]),t.storedProcedure(n("LSIssueNewTask"),"encrypted_backups_attachment_upload",t.i64.cast([0,50012]),r[62],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):t.sequence([function(e){return r[29]="Missing backup_id for IssueAttachmentBackupTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",r[29]].join("")),r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",r[29],r[28],t.i64.cast([0,3]))},function(e){return r[30]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_backup_id"].join(""),r[1]!==void 0&&r[30]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637738637]),r[1],"error",r[30]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637738637]),r[1],!1):t.resolve()}])):t.sequence([function(e){return r[28]="Missing device_id for IssueAttachmentBackupTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",r[28]].join("")),r[27]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",r[28],r[27],t.i64.cast([0,3]))},function(e){return r[29]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_device_id"].join(""),r[1]!==void 0&&r[29]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637738637]),r[1],"error",r[29]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637738637]),r[1],!1):t.resolve()}]):t.sequence([function(e){return r[28]="Missing ocmf_client_state_blob for IssueAttachmentBackupTask",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",r[28]].join("")),r[27]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",r[28],r[27],t.i64.cast([0,3]))},function(e){return r[29]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_ocmf_client_state_blob"].join(""),r[1]!==void 0&&r[29]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637738637]),r[1],"error",r[29]):t.resolve()},function(e){return r[1]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637738637]),r[1],!1):t.resolve()}])},function(e){return r[21]=t.i64.of_float(Date.now()),r[22]=t.i64.random(),r[24]="Finishing execution. Execution time: ",r[25]=t.i64.to_string(t.i64.sub(r[21],r[0])),r[26]=" ms",r[23]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ",r[23],r[24],r[23],r[25],r[23],r[26]].join("")),t.i64.eq(t.i64.mod_(r[22],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[27]=",",r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",[r[24],r[27],r[25],r[27],r[26]].join(""),r[28],t.i64.cast([0,4]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSIssueAttachmentBackupTaskStoredProcedure",["LSIssueAttachmentBackupTask","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueAttachmentBackupTask"),a.deliveryObjectId,a.productType,a.mediaType,a.messageId,a.threadId,a.traceId,a.serverThreadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWBridgeUploadAttachmentHandler",["I64","LSFactory","LSIssueAttachmentBackupTaskStoredProcedure","LSRequestId","MAWEBFrontendQPLLogger","MAWEncryptedBackupUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","Promise","isInstamadilloEB"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a){var i;if(r("isInstamadilloEB")())return(s||(s=n("Promise"))).resolve();var l=(i=a.traceId)!=null?i:r("LSRequestId").generate(),u=a.mediaType;return u==="document"?(s||(s=n("Promise"))).resolve():o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a.threadJid,"MAWBridgeUploadAttachmentHandler",function(t,i){var u=(e||(e=o("I64"))).to_string(i),c=o("MAWTimeUtils").isTimestampNewerThanXDays(a.ts,30);return o("MAWEncryptedBackupUtils").getBackupTenancy(t).then(function(e){var i=a.productType;return e!=null&&c?l!=null?(o("MAWEBFrontendQPLLogger").startFlowUploadAttachmentBackup({deliveryObjectId:a.deliveryObjectId,flow:"old",mediaType:a.mediaType,messageId:a.messageId,threadId:a.threadId,traceId:l}),r("LSIssueAttachmentBackupTaskStoredProcedure")(r("LSFactory")(t),{deliveryObjectId:a.deliveryObjectId,mediaType:a.mediaType,messageId:a.messageId,productType:i,serverThreadKey:u,threadId:a.threadId,traceId:l})):r("LSIssueAttachmentBackupTaskStoredProcedure")(r("LSFactory")(t),{deliveryObjectId:a.deliveryObjectId,mediaType:a.mediaType,messageId:a.messageId,productType:i,serverThreadKey:u,threadId:a.threadId}):(o("MAWEBFrontendQPLLogger").endFlowUploadAttachmentBackup(l,!1,"old"),(s||(s=n("Promise"))).resolve())})})}l.call=u}),98);
__d("MAWBridgeXMAShareExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r,o){var a=String(o.xmaId);return t.attachments.get(r,o.msgId,a).then(function(i){if(i==null)return(e||(e=n("Promise"))).resolve();var l=[i.defaultCtaId,i.attachmentCta1Id,i.attachmentCta2Id,i.attachmentCta3Id].filter(Boolean),s=l.map(function(e){return t.attachment_ctas.delete(e)});return(e||(e=n("Promise"))).all(s).then(function(){return t.attachments.delete(r,o.msgId,a)})})}function u(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeXMAShareExpiredHandler",function(e,n){return s(e,n,t)})}l.callWithoutWaitingForAnything=s,l.call=u}),98);
__d("MAWBridgeUIEventHandler",["EBLogger","MAWAbPropsClient","MAWBridgeAddMessageSearchResultHandler","MAWBridgeCallRestoreNativeOpHandler","MAWBridgeDeleteGroupInviteHandler","MAWBridgeDeleteMessagesHandler","MAWBridgeDeleteMessagesOfThreadHandler","MAWBridgeDeleteReactionHandler","MAWBridgeDropAllSecureThreadsHandler","MAWBridgeEditMsgHistoryAddedHandler","MAWBridgeEphemeralSettingsUpdatedForUIHandler","MAWBridgeFulfillRestorePromisePayloadHandler","MAWBridgeGroupInfoUpdatedHandler","MAWBridgeGroupInviteLoadedHandler","MAWBridgeGroupInviteUpdateHandler","MAWBridgeHandleCOPDigest","MAWBridgeMediaExpiredHandler","MAWBridgeMsgUpdatedHandler","MAWBridgeMsgsStartCountdownHandler","MAWBridgeNewMediaHandler","MAWBridgeNewMediaRangeHandler","MAWBridgeNewMsgHandler","MAWBridgeNewPollHandler","MAWBridgeNewReceiverFetchInfoHandler","MAWBridgeNewXMAHandler","MAWBridgeNoteReplyStartCountdownHandler","MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2","MAWBridgeOccamadilloVerifyThreadExistsHandler","MAWBridgeOneToOneMessageRequestLoadedHandler","MAWBridgeParticipantRemovedHandler","MAWBridgeParticipantsUpdatedHandler","MAWBridgeRavenActionMsgForUIHandler","MAWBridgeReactionUpsertHandler","MAWBridgeReceivedChatStateHandler","MAWBridgeReceivedReceiptHandler","MAWBridgeRefreshContactHandler","MAWBridgeRemoveMessageSearchResultHandler","MAWBridgeResignAttachmentCDNUrlHandler","MAWBridgeStartTraceHandler","MAWBridgeStoryReplyStartCountdownHandler","MAWBridgeSyncContacts","MAWBridgeThreadHiddenV2Handler","MAWBridgeThreadUpdatedHandler","MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUIEventQueueQPLLogger","MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler","MAWBridgeUpdateClientRestoreStatus","MAWBridgeUpdateContactAsConnectedHandler","MAWBridgeUpdateE2EEMetadataParticipantsHandler","MAWBridgeUpdateThreadActivityHandler","MAWBridgeUpdateTraceHandler","MAWBridgeUploadAttachmentHandler","MAWBridgeXMAShareExpiredHandler","MAWBridgeXMAShareTombstonedHandler","MAWLoggerUtils","MAWMessageExpirationStorage","MWFBLogger","Promise","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","emptyFunction","getErrorSafe","isArmadillo","isInstamadilloDYI","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["MAWBridgeUIEvent"]);function m(t,r,a){switch(a.tag){case"NewMsg":return o("MAWBridgeNewMsgHandler").call(r,a.value);case"MsgsStartCountdown":return o("MAWBridgeMsgsStartCountdownHandler").call(r,a.value);case"StoryReplyStartCountdown":return o("MAWBridgeStoryReplyStartCountdownHandler").call(r,a.value);case"NoteReplyStartCountdown":return o("MAWBridgeNoteReplyStartCountdownHandler").call(r,a.value);case"MsgClearCountdown":return(c||(c=n("Promise"))).resolve(o("MAWMessageExpirationStorage").clearMessageFromExpiration(a.value));case"DropAllSecureThreads":return o("MAWBridgeDropAllSecureThreadsHandler").call(r);case"VerifyThreadExists":{var i=a.value;return o("MAWBridgeOccamadilloVerifyThreadExistsHandler").call(r,i)}case"CreateE2EEMetadataThreadV2":return o("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2").call(r,a.value);case"EditMsgHistoryAdded":return o("MAWBridgeEditMsgHistoryAddedHandler").call(t,r,a.value);case"MsgUpdated":return o("MAWBridgeMsgUpdatedHandler").call(r,a.value);case"NewMedia":return o("MAWBridgeNewMediaHandler").call(r,a.value);case"NewMediaRange":return o("MAWBridgeNewMediaRangeHandler").call(r,a.value);case"MediaExpired":return o("MAWBridgeMediaExpiredHandler").call(r,a.value);case"XMAShareExpired":return o("MAWBridgeXMAShareExpiredHandler").call(r,a.value);case"NewXMA":return o("MAWBridgeNewXMAHandler").call(r,a.value);case"XMAShareTombstoned":return o("MAWBridgeXMAShareTombstonedHandler").call(r,a.value);case"ParticipantRemoved":return o("MAWBridgeParticipantRemovedHandler").call(r,a.value);case"UpdateE2EEMetadataParticipants":return o("MAWBridgeUpdateE2EEMetadataParticipantsHandler").call(r,a.value);case"ReceivedReceipt":return o("MAWBridgeReceivedReceiptHandler").call(r,a.value);case"ThreadUpdated":return o("MAWBridgeThreadUpdatedHandler").call(r,a.value);case"GroupInfoUpdated":return o("MAWBridgeGroupInfoUpdatedHandler").call(r,a.value);case"UpdateThreadActivity":return o("MAWBridgeUpdateThreadActivityHandler").call(r,a.value);case"StartTrace":return o("MAWBridgeStartTraceHandler").call(r,a.value);case"UpdateTrace":return o("MAWBridgeUpdateTraceHandler").call(r,a.value);case"ThreadHiddenV2":return o("MAWBridgeThreadHiddenV2Handler").call(r,a.value);case"SyncContacts":return o("MAWBridgeSyncContacts").call(r,a.value);case"ReceivedChatState":return o("MAWBridgeReceivedChatStateHandler").call(r,a.value);case"ClockSkewUpdated":return(c||(c=n("Promise"))).resolve(o("WATimeUtils").setClockSkew(a.value));case"ABPropsUpdated":return d.warn("ABPropsUpdated has been deprecated. Please use the bridge with ABPropsUpdated"),(c||(c=n("Promise"))).resolve(o("MAWAbPropsClient").rewrite(a.value));case"COPDigestReceived":return o("MAWBridgeHandleCOPDigest").call(r,a.value);case"UpsertReaction":return o("MAWBridgeReactionUpsertHandler").call(r,a.value);case"DeleteReaction":return o("MAWBridgeDeleteReactionHandler").call(r,a.value);case"DeleteMessagesOfThread":return o("MAWBridgeDeleteMessagesOfThreadHandler").call(r,a.value);case"UploadAttachment":return o("MAWBridgeUploadAttachmentHandler").call(r,a.value);case"ResignAttachmentCDNUrl":return o("MAWBridgeResignAttachmentCDNUrlHandler").call(r,a.value);case"DeleteMessages":return o("MAWBridgeDeleteMessagesHandler").call(r,a.value);case"RestoreMessageBatch":return o("EBLogger").EBLogger().tags(["labyrinth_dyi"]).WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"]))),(c||(c=n("Promise"))).resolve();case"OneToOneMessageRequestLoaded":return o("MAWBridgeOneToOneMessageRequestLoadedHandler").call(r,a.value);case"GroupInviteUpdate":return o("MAWBridgeGroupInviteUpdateHandler").call(r,a.value);case"UpdateDyiStatus":return o("EBLogger").EBLogger().tags(["labyrinth_dyi"]).WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"]))),(c||(c=n("Promise"))).resolve();case"DeleteGroupInvite":return o("MAWBridgeDeleteGroupInviteHandler").call(r,a.value);case"TraceRecordCheckpoint":return o("MAWBridgeTraceRecordCheckpointHandler").call(r,a.value);case"ParticipantsUpdated":return o("MAWBridgeParticipantsUpdatedHandler").call(r,a.value);case"StartTraceWithTraceId":return(c||(c=n("Promise"))).resolve();case"UpdateClientRestoreStatus":return o("MAWBridgeUpdateClientRestoreStatus").call(r,a.value);case"NewMsgs":return o("MAWBridgeNewMsgHandler").bulkCall(r,a.value.msgs);case"UnArchivedSelfDeviceChangeAlerts":return o("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler").call(r,a.value);case"EphemeralSettingsUpdatedForUI":return o("MAWBridgeEphemeralSettingsUpdatedForUIHandler").call(r,a.value);case"RavenActionUpdate":return o("MAWBridgeRavenActionMsgForUIHandler").call(r,a.value);case"GroupInviteLoaded":return o("MAWBridgeGroupInviteLoadedHandler").call(r,a.value);case"RemoveMessageSearchResult":return o("MAWBridgeRemoveMessageSearchResultHandler").call(r,a.value);case"AddMessageSearchResult":return o("MAWBridgeAddMessageSearchResultHandler").call(t,r,a.value);case"FulfillRestorePromise":return o("MAWBridgeFulfillRestorePromisePayloadHandler").call(a.value);case"UpdateContactAsConnected":return o("MAWBridgeUpdateContactAsConnectedHandler").call(r,a.value);case"RefreshContact":return o("MAWBridgeRefreshContactHandler").call(r,a.value);case"NewReceiverFetchInfo":return o("MAWBridgeNewReceiverFetchInfoHandler").call(r,a.value);case"RestoreNativeOp":return o("MAWBridgeCallRestoreNativeOpHandler").call(a.value);case"NewPoll":return o("MAWBridgeNewPollHandler").call(r,a.value);default:return(c||(c=n("Promise"))).resolve()}}function p(e,t){if(!r("isArmadillo")()&&!r("isInstamadilloDYI")()){d.mustfix("User is neither part of armadillo QE and dual send QE but somehow loaded this handler");return}if(!(t.length===1&&t[0].tag==="TraceRecordCheckpoint")){var n={};n=t.reduce(function(e,t){var n;return e[t.tag]=((n=e[t.tag])!=null?n:0)+1,e},n),d.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Handle UI Events: ",""])),JSON.stringify(n))}r("promiseDone")(_(e,t),r("emptyFunction"),function(e){d.catching(e).mustfix("[MAWBridgeUIEventHandler] Failed to handle UI events: %s",t.map(function(e){return e.tag}).join(", "))})}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var a=yield e,l=o("MAWLoggerUtils").getInstanceKey(),s=t.map(function(e){return e.tag}),u="";o("MAWBridgeUIEventQueueQPLLogger").start(l,s),o("MAWBridgeUIEventQueueQPLLogger").addAnnotations(l,{int:{queue_size:t.length}});var c;try{c=yield a.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){for(var n=0;n<t.length;n++){var i=t[n];try{yield m(a,e,i)}catch(e){return u=i.tag,o("WAResultOrError").makeError(r("getErrorSafe")(e))}}return o("WAResultOrError").makeResult(!0)});return function(t){return e.apply(this,arguments)}})(),"readwrite","background",{events:t,type:"maw_ui_bridge"},i.id+":284")}catch(e){c=o("WAResultOrError").makeError(r("getErrorSafe")(e))}c.success?o("MAWBridgeUIEventQueueQPLLogger").endSuccess(l):(o("MAWBridgeUIEventQueueQPLLogger").endFailure(l,u),d.catching(c.error).mustfix("MAWBridgeUIEventHandler] Did not commit UI events to DB, failed at %s, all events: %s",u,s.toString()))}),f.apply(this,arguments)}function g(e,t,n){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){try{yield m(e,t,n)}catch(e){var o=r("getErrorSafe")(e);throw d.catching(o).mustfix("[handleShimEvent] Failed to handle UI event: %s",n.tag),e}}),h.apply(this,arguments)}l.handleEvents=p,l.handleShimEvent=g}),98);
__d("toMsgrUserJid",["MAWJids"],(function(t,n,r,o,a,i,l){"use strict";l.default=o("MAWJids").toUserJid}),98);
__d("MAWFetchContacts",["I64","LSContactTypeExact","LSIntEnum","MAWContactRelationshipType","ReQL","WAJids","asyncToGeneratorRuntime","requireDeferred","toMsgrUserJid"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWFetchContacts");function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield u.load(),a=yield n(),i=new Set(t.map(function(e){return o("WAJids").extractUserId(e)}));return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.tables.contacts).filter(function(t){return i.has((e||(e=o("I64"))).to_string(t.id))})).then(function(t){return new Map(t.map(function(t){return[r("toMsgrUserJid")((e||(e=o("I64"))).to_string(t.id)),t]}))})}),d.apply(this,arguments)}function m(e){return c(e).then(function(e){var t=new Map;return e.forEach(function(e,n){t.set(n,o("MAWContactRelationshipType").getContactRelationshipType(e))}),t})}function p(t){return c(t).then(function(t){var n=new Map;return t.forEach(function(t,a){var i=t.contactTypeExact!=null&&(e||(e=o("I64"))).equal(t.contactTypeExact,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB));n.set(a,i)}),n})}l.fetchContacts=c,l.fetchContactsRelationships=m,l.fetchContactsIsMsplit=p}),98);
__d("MAWSetupBridgeOfflineSnapshot",["InteractionTracingMetrics","MAWMIC","MWChatInteraction","MWFBLogger","WAOfflineUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["ServerRPC","Offline"]);function m(e){o("MAWMIC").addIntAnnotation("offlineQueueSize",e);var t=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);t!=null&&r("InteractionTracingMetrics").addAnnotationInt(t,"offlineQueueSize",e)}var p=function(r){return(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.downloaded,a=t.expected,i=t.status,l=t.timestamp;switch(i){case o("WAOfflineUtils").WAClientInfraOfflineProgress.Initializing:d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",", messages: ",""])),a.count,a.message),m(a.count),r({tag:"InitOfflineQueueSyncStart",value:a.count}),o("MAWMIC").addPoint("download_offline_queue_start",l);return;case o("WAOfflineUtils").WAClientInfraOfflineProgress.Processing:d.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Progress: "," / ",", messages: "," / ",""])),n.count,a.count,n.message,a.message),r({tag:"InitOfflineQueueSyncProgress",value:n.count});return;case o("WAOfflineUtils").WAClientInfraOfflineProgress.Complete:d.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Stats end: "," / ",", messages: "," / ",""])),n.count,a.count,n.message,a.message),o("MAWMIC").addIntAnnotation("offlineQueueDownloadedCount",n.count),r({tag:"InitOfflineQueueSyncProgress",value:a.count}),o("MAWMIC").addPoint("download_offline_queue_end",l);return;case o("WAOfflineUtils").WAClientInfraOfflineProgress.Failed:d.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["WA infra offline connection lost"]))),o("MAWMIC").addPoint("download_offline_queue_failed",l);return}});return function(e){return t.apply(this,arguments)}})()},_=p;l.default=_}),98);
__d("MWWorkerOwnedDbKeychain",["Deferred","MAWCryptoConsts","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s={accountKey:null,databaseEncryptionKeys:new Map,dbReady:new(r("Deferred")),latestVersion:o("MAWCryptoConsts").VERSION},u=babelHelpers.extends({},s),c="uninitialized",d=o("MWFBLogger").MWLogger().tags(["MWWorkerOwnedDbKeychain"]);function m(){return u}function p(t){d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleEARKeyChange"]))),c="initialized",u=t}function _(){return c==="initialized"}function f(){return u.latestVersion}l.getEARKey=m,l.handleEARKeyChange=p,l.isInitialised=_,l.getLatestVersion=f}),98);
__d("IGDSetupBridge",["DTSG","FBLogger","JSResourceForInteraction","LSDatabaseSingleton","LSGetLatestThreadIds.nop","LSInitSyncCompleteSubscription","LSPlatformGraphQLLightspeedRequest","LSPlatformGraphQLLightspeedRequestForIGD","MAWAbPropsClient","MAWBridgeReceivedChatStateHandler","MAWBridgeUIEventHandler","MAWCommonSetupBridge","MAWFetchContacts","MAWGetEphemeralSettings","MAWSetupBridgeOfflineSnapshot","MAWUnrecoverableDbErrors","MWWorkerOwnedDbKeychain","Promise","Run","WAExceededStorageQuota","WAResultOrError","asyncToGeneratorRuntime","cr:3411","emptyFunction","gkx","isInstamadillo","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u=r("requireDeferred"))("ArmadilloCutoverClientFalcoEvent").__setRef("IGDSetupBridge"),d=u("IGDBridgeResignCdnUrlHandler").__setRef("IGDSetupBridge"),m=u("MAWBridgeUpdateDYIStatusV2").__setRef("IGDSetupBridge"),p=u("MAWSetupBridgeOfflineConsumer").__setRef("IGDSetupBridge"),_=(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(o("LSInitSyncCompleteSubscription").use).then(function(){return(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton}),f=function(t){c.loadImmediately(function(e){var n=e.log;return n(function(){return{armadillo_thread_id:t.armadilloThreadId,domain:t.domain,event:t.event,event_details:t.eventDetails,open_thread_id:t.openThreadId,success:t.success,trace_id:t.traceId}})})},g=new Set(["StartTraceWithTraceId","TraceRecordCheckpoint"]),h=new Set(["ABPropsUpdated","ClockSkewUpdated","DropAllSecureThreads","LargeClockSkewValue","ReceivedChatState","UpdateMediaStatus"]);function y(t){var a,l=t.dispatch,u=t.logout,c=t.reregisterDevice,y=t.rotateCryptoAuthToken,C=t.worker;function b(){C.postMessage({type:"force-flush-data"})}return o("Run").onUnload(b),o("Run").onBeforeUnload(b,!1),o("MAWCommonSetupBridge").initBridge({customizeEventHandlers:{abPropsUpdated:function(t){o("MAWAbPropsClient").rewrite(t.abProps)},earKeyChange:function(t){o("MWWorkerOwnedDbKeychain").handleEARKeyChange(t)},executeGraphQLLightSpeedRequest:function(t){var e=t.args;return r("gkx")("3889")?r("LSPlatformGraphQLLightspeedRequestForIGD").apply(void 0,e):r("LSPlatformGraphQLLightspeedRequest").apply(void 0,e)},getDTSGToken:function(){return(e||(e=n("Promise"))).resolve(o("DTSG").getToken())},getLSDBEphemeralSetting:function(t){return o("MAWGetEphemeralSettings").getEphemeralSetting(t.chatJid)},getLSDBLatestThreadIds:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton;return t.runInTransaction(function(t){return r("LSGetLatestThreadIds.nop")(t,0,"",e.numThreads,e.miActMappingFilteredThreads)},"readonly",void 0,void 0,i.id+":141")});function t(t){return e.apply(this,arguments)}return t})(),getLSDBUsersIsMsplit:function(t){return o("MAWFetchContacts").fetchContactsIsMsplit(t.users)},getLSDBUsersRelationships:function(t){return o("MAWFetchContacts").fetchContactsRelationships(t.users)},getMediaStorageResult:function(){return(e||(e=n("Promise"))).resolve(o("WAResultOrError").makeError({errorMessage:"getMediaStorageResult is not supported in IGD",errorName:"igd-unsupported"}))},getMinosEpochDataForUser:a=r("emptyFunction"),isDbMigrating:function(t){l({tag:"IsDbMigrating",value:!1})},logCutoverEvent:f,logout:u,offlineConsumerProgress:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return(yield p.load())(_,l).apply(void 0,arguments)});function t(){return e.apply(this,arguments)}return t})(),offlineSnapshot:r("MAWSetupBridgeOfflineSnapshot")(l),receivedChatState:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield _;yield t.runInTransaction((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield o("MAWBridgeReceivedChatStateHandler").call(t,e)});return function(e){return t.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":182")});function t(t){return e.apply(this,arguments)}return t})(),reregisterDevice:c,resignCdnUrl:function(t){var e=t.deliveryObjectId,n=t.payload;return d.load().then(function(t){return t.call(n,e)})},rotateCryptoAuthToken:y,storageQuota:function(t){var e=t.exceededStorageQuota;o("WAExceededStorageQuota").setExceededStorageQuota(e)},trackEbConsistency:function(){},uiUpdate:function(t){var e=t.events,a=[],i=e.filter(function(e){if(g.has(e.tag))return a.push(e),!1;if(h.has(e.tag))return!1});a.length>0&&(n("cr:3411")==null||n("cr:3411").recordBridgeUIEvent(e),o("MAWBridgeUIEventHandler").handleEvents(_,e)),i.length!==0&&(r("isInstamadillo")()?r("FBLogger")("igd_web").warn("[Instamadillo] Unsupported invocation of UI Event Handler. Please deprecate UI Event Handler: %s",e.map(function(e){return e.tag}).join(", ")):r("FBLogger")("igd_web").warn("[IGD] Deprecating UIEventHandlers, please update LSDB directly for UI changes: %s",e.map(function(e){return e.tag}).join(", ")))},unrecoverableDbError:function(t){var e=t.error;return o("MAWUnrecoverableDbErrors").setError(e)},updateDYIStatus:function(t){var e=t.qplEvent,n=t.qplInstanceKeyE2E,o=t.status;r("promiseDone")(m.load().then(function(t){return t.call({qplEvent:e,qplInstanceKeyE2E:n,status:o})}))},updateEBLSInWokerStateInMainThread:a,updateMediaStatus:a,updateStateManagerStateInMainThread:a,uploadOpenMessages:function(t){var e=t.uploadPayloads;r("promiseDone")(r("JSResourceForInteraction")("IGDMessageUploadMutation").__setRef("IGDSetupBridge").load().then(function(t){return t.uploadOpenMessageOverGQL(e)}))},writeToMediaStorage:a},worker:C})}l.setupBridge=y}),98);
__d("MessengerWaitForEvent",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r,o){var a,i=o;return new(e||(e=n("Promise")))(function(e){i?a=function(){i.apply(this,arguments)&&e.apply(this,arguments)}:a=e,t==null||t.addEventListener==null||t.addEventListener(r,a)}).finally(function(){t==null||t.removeEventListener==null||t.removeEventListener(r,a)})}i.waitForEvent=l}),66);
__d("LocalStorageMutex",["FBLogger","MessengerWaitForEvent","Promise","QPLUserFlow","emptyFunction","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=1e3,c=r("qpl")._(1056847375,"584"),d=(function(){function t(e){var t=this,n=e.mutexKey,o=e.localTakeoverKey,a=e.log,i=e.logError,l=e.getStorage,s=e.setItemGuarded,c=e.mutexTimeoutMs,d=c===void 0?u:c,m=e.mutexTimeoutCallback;this.mutexFilter=function(e){if(e.key!==t.$1)return!1;var n=e.newValue||"";return!n.includes(r("pageID"))},this.$1=n,this.$2=o,this.$5=l,this.$6=s,this.$3=a,this.$4=i,this.$7=d,this.$8=m}var a=t.prototype;return a.init=function(){r("QPLUserFlow").start(c),this.$3("APPMUTEX - this tab is "+r("pageID"));var t=this.getMutex();if(t===r("pageID"))return this.$3("APPMUTEX - WE ALREADY HAVE THE MUTEX LOCK WITHIN INIT"),r("QPLUserFlow").endSuccess(c),(e||(e=n("Promise"))).resolve(!0);if(t!=null)return this.$3("APPMUTEX - initiating localTAKEOVER"),this.localTakeover();this.$3("APPMUTEX - NO1 ELSE IS ALIVE, GET THE MUTEX");var o=this.$9(r("pageID")),a=this.$10(r("pageID"));return!o.success||!a.success?(r("QPLUserFlow").addAnnotations(c,{bool:{setMutexResult:a.success,setTakeoverResult:o.success},string:{setMutexError:a.error,setTakeoverError:o.error}}),r("QPLUserFlow").endFailure(c,"fail_to_set_takeover_or_mutex"),(e||(e=n("Promise"))).resolve(!1)):(r("QPLUserFlow").endSuccess(c),(e||(e=n("Promise"))).resolve(!0))},a.localTakeover=function(){var t,a=this,i=this.$9(r("pageID"));if(!i.success)return r("QPLUserFlow").addAnnotations(c,{string:{initTakeoverError:i.error}}),r("QPLUserFlow").endFailure(c,"local_takeover_init_takeover_failure"),(e||(e=n("Promise"))).resolve(!1);var l,s=function(){l!=null&&clearTimeout(l)},d=o("MessengerWaitForEvent").waitForEvent(window,"storage",this.mutexFilter),m=(t=this.$7)!=null?t:u;return(e||(e=n("Promise"))).race([d,new e(function(e){l=setTimeout(function(){e()},m)}),this.$8?this.$8():new(e||(e=n("Promise")))(r("emptyFunction"))]).then(function(e){if(e==null){a.$3("AppMutex - Forcefully took the mutex and takeover lock");var t=a.$9(r("pageID")),n=a.$10(r("pageID"));return!t.success||!n.success?(r("QPLUserFlow").addAnnotations(c,{string:{setMutexError:n.error,setTakeoverError:t.error}}),r("QPLUserFlow").endFailure(c,"local_takeover_forcefully_takeover_failure"),!1):(r("QPLUserFlow").endSuccess(c),!0)}a.$3("APPMUTEX - GOT MUTEX STORAGE EVENT CHANGE FROM ANOTHER TAB");var o=a.$11(e.newValue);if(!o&&a.hasTakeoverPermission()){a.$3("APPMUTEX - setting mutex on localtakeover");var i=a.$10(r("pageID"));return i.success?(r("QPLUserFlow").endSuccess(c),!0):(r("QPLUserFlow").addAnnotations(c,{string:{setMutexError:i.error}}),r("QPLUserFlow").endFailure(c,"local_takeover_set_mutex_failure"),!1)}else return a.hasTakeoverPermission()&&a.$12(),r("QPLUserFlow").endFailure(c,"local_takeover_no_takeover_permission"),!1}).then(function(e){return s(),e}).catch(function(e){return s(),a.$4("AppMutex - localTakeover error no permission - "+e),r("QPLUserFlow").endFailure(c,"local_takeover_general_failure"),!1})},a.onMutexDeath=function(){var e=this.getMutex();e!=null&&e===r("pageID")&&(this.$3("APPMUTEX - removing mutex on death"),this.$13(),this.hasTakeoverPermission()&&this.$12())},a.takeoverFilter=function(t){if(t.key!==this.$2)return!1;var e=t.newValue||"";return!e.includes(r("pageID"))},a.$14=function(){if(!s){var e=this.$5();if(!e)throw r("FBLogger")("messenger_web").mustfixThrow("Could not get localStorage");s=e}return s},a.getMutex=function(){return s=this.$14(),s.getItem(this.$1)},a.$10=function(t){return s=this.$14(),this.$6(s,this.$1,t)},a.$13=function(){s=this.$14(),s.removeItem(this.$1)},a.getTakeover=function(){return s=this.$14(),s.getItem(this.$2)},a.$9=function(t){return s=this.$14(),this.$6(s,this.$2,t)},a.$12=function(){s=this.$14(),s.removeItem(this.$2)},a.$11=function(t){return t!=null?t:""},a.hasTakeoverPermission=function(){var e=this.getTakeover();return e!=null&&e===r("pageID")},t})();l.THIS_TAB=r("pageID"),l.LocalStorageMutex=d}),98);
__d("MAWAppMutex",["LocalStorageMutex","MAWLocalStorage","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e="armadillo_msgr_mutex",s="armadillo_msgr_local_takeover",u=null;function c(){return u==null&&(u=new(o("LocalStorageMutex")).LocalStorageMutex({getStorage:o("MAWLocalStorage").getStorage,localTakeoverKey:s,log:function(t){o("WALogger").LOG([t])},logError:function(t){o("WALogger").ERROR([t])},mutexKey:e,setItemGuarded:o("MAWLocalStorage").setItemGuarded})),u}l.MAW_MUTEX_KEY=e,l.MAW_LOCALTAKEOVER_KEY=s,l.use=c}),98);
__d("MAWCommonBackendSetup",["EBIsEbEnabled","FBLogger","MAWAppMutex","MAWInitError","MAWLocalStorage","MAWLoggerUtils","MAWSetupWorker","MAWVaultMaterialsStorage","MAWWorkerReboot","Promise","asyncToGeneratorRuntime","getErrorSafe","gkx","requireDeferredForDisplay","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferredForDisplay")("MAWMainThreadLogger").__setRef("MAWCommonBackendSetup"),u=function(r,a){return a?(e||(e=n("Promise"))).resolve(!0):r.measurePerformance("acquire_mutex",function(){return o("MAWAppMutex").use().init()})};function c(e,t,n,r,o,a){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,c,d){yield t.measurePerformance("prepare_logger",n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=s.load();(yield e).setupMainWaLogger()})),o("MAWLoggerUtils").initMessengerWebLogging();var m=o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();m||(yield t.measurePerformance("detection_support",function(){if(!o("MAWLocalStorage").isLocalStorageAvailable())throw new(o("MAWInitError")).MAWInitError("localstorage_not_supported");return(e||(e=n("Promise"))).resolve()}));var p=t.measurePerformance("setup_vault_materials",function(){return o("MAWVaultMaterialsStorage").setupVaultMaterials()}),_=yield u(t,m);if(!_)throw t.logPoint("maw_appmutex_no_permission"),new(o("MAWInitError")).MAWInitError("maw_appmutex_no_permission");var f=yield p,g;if(r("gkx")("1458"))try{g=yield o("EBIsEbEnabled").isEBEnabled()}catch(e){var h=r("getErrorSafe")(e).message;t.addStringAnnotation("eb_state_fetch_error",h),r("FBLogger")("wmi_eb").mustfix("Failed to get EB state: %s",h),g=void 0}else g=void 0;yield t.measurePerformance("setup_worker",function(){return o("MAWSetupWorker").getOrSetupWorker(f,a,i,l,c,d,g).catch(function(e){return t.logPoint("reboot_worker_on_backend_setup_failure"),t.addStringAnnotation("backend_setup_failure_reason",e.message),o("MAWWorkerReboot").rebootWorker(f,a,i,l,"backend_setup_failure",d).catch(function(e){throw new(o("MAWInitError")).MAWInitError("worker_setup_error",e)})})})}),d.apply(this,arguments)}l.getMutexPermission=u,l.setupArmadilloBackend=c}),98);
__d("WADynamicRouterSync",["ExecutionEnvironment","Promise","WALogger","WAMapWithDefault","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=["toLastActiveClient"],d,m;function p(e,t){if(e!=null){var n=e.toLastActiveClient,r=babelHelpers.objectWithoutPropertiesLoose(e,c);if(n===!0&&t!=null){var o;return babelHelpers.extends({},r,{toClientId:(o=r.toClientId)!=null?o:t})}return r}}var _=(function(){function t(){var e=this;this.$2=new Map,this.$4=new(o("WAMapWithDefault")).MapWithDefault(function(){return new Set}),this.$5=null,this.fireAndForget=function(t,n,r,o,a,i){o===void 0&&(o=!1),e.$3==null||e.$3(t,n,r),e.$4.get(t).add({route:n,arg:r,resolver:null,silentLog:o,eventCallbacks:a,opts:p(i,e.$5)}),e.$6(t,n)},this.sendAndReceive=function(t,r,o,a,i,l){return a===void 0&&(a=!1),new(m||(m=n("Promise")))(function(n){e.$3==null||e.$3(t,r,o),e.$4.get(t).add({route:r,arg:o,resolver:function(t){n(t)},silentLog:a,eventCallbacks:i,opts:p(l,e.$5)}),e.$6(t,r)})}}var a=t.prototype;return a.setAckPayload=function(t){this.$1=t},a.getAckPayoad=function(){return this.$1},a.hasHandlerForNamespace=function(t){return this.$2.has(t)},a.getHandledNamespaces=function(){return Array.from(this.$2.keys())},a.setOnRouteCalled=function(t){this.$3=t},a.setNamespaceHandler=function(t,n){var e=this.$2,r=e.get(t);r!==n&&(e.set(t,n),r==null&&this.$6(t))},a.$7=function(r,a){var t=r.route,i=r.arg,l=r.resolver,s=r.silentLog,u=r.eventCallbacks,c=r.opts;try{var d;this.$5=(d=c==null?void 0:c.fromClientId)!=null?d:this.$5,a(t,i,l,s,u,c)}catch(t){l==null||l((m||(m=n("Promise"))).reject(t)),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Bridge handler: ",""])),t)}},a.$6=function(t,n){var e=this,a=this.$4.get(t),i=this.$2.get(t);if(i==null){var l=(d||(d=r("ExecutionEnvironment"))).isInWorker?"worker":"main-thread";o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["No handler for bridge with namespace: "," route: "," called in environment: ",""])),t,n,l);return}a.forEach(function(t){a.delete(t),e.$7(t,i)})},a.setHandlers=function(t,n){function e(e,a,i,l,s,c){if(n[e]==null)throw o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose([""," is not defined for ",""])),e,t),r("err")(e+" is not defined for "+t);var d=n[e](a,c);i&&i(d)}this.setNamespaceHandler(t,e)},t})();l.normaliseHandlerOptions=p,l.DynamicRouterSync=_}),98);
__d("useMWEncryptedBackupsProcessBackupIdsDeferred",["promiseDone","react","requireDeferred","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u=r("requireDeferred")("MWEncryptedBackupsProcessBackupIdsDEPRECATED").__setRef("useMWEncryptedBackupsProcessBackupIdsDeferred");function c(e){var t=r("useAsyncReStore")();s(function(){var n,o=!1;return u.onReadyImmediately(function(a){r("promiseDone")(t,function(t){o||(n=a.subscribeToEncryptedBackupsRow(t,e))})}),function(){o=!0,n==null||n()}},[t,e])}l.default=c}),98);
__d("MAWCommonSetup",["EBMainThreadEBDBApiDeferred","EBMainThreadListeners","EBMinosCheckWasmFeatureSupport","ExecutionEnvironment","MAWBridgeFireAndForget","MAWCacheServiceDB","MAWCommonBackendSetup","MAWCurrentUser","MAWEncryptedBackupsStateManager","MAWIndexedDbMetadata","MAWInit","MAWInitError","MAWIsIDBOperational","MAWIssueNewUserVisibleErrors","MAWJobDefinitions","MAWLoggerUtils","MAWMIC","MAWStateContext.react","MAWUIJob","MAWWaitForBackendSetup","MessengerWebInitData","MpsReverbInit","WABridge","WADynamicRouterSync","WAJobOrchestratorTypes","WALogger","asyncToGeneratorRuntime","cr:13007","cr:7327","cr:8498","getErrorSafe","isMWAppsSubdomainExperiment","justknobx","performance","promiseDone","qpl","react","requireDeferred","useMWEncryptedBackupsProcessBackupIdsDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useContext,p=d.useEffect,_=r("requireDeferred")("FBLogger").__setRef("MAWCommonSetup"),f=n("cr:7327")||n("cr:8498"),g=n("cr:13007")==null?void 0:n("cr:13007").MAWInitialiseMAWDbInUI;r("requireDeferred")("MAWTimedJob").__setRef("MAWCommonSetup");var h=!1,y=function(){return(s||(s=r("performance"))).now()},C=function(t){o("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(t),o("MAWBridgeFireAndForget").fireAndForget("backend","setEncryptedBackupsState",{newState:t})};function b(){o("MAWBridgeFireAndForget").fireAndForget("backend","resendEBLSInWorkerEbEnabledState")}function v(){o("MAWBridgeFireAndForget").fireAndForget("backend","resendWorkerStateManagerValuesToMainThread")}function S(){b(),v()}function R(e){o("MAWLoggerUtils").initMessengerWebLogging();var t=m(o("MAWStateContext.react").MAWDispatchContext),n=o("MAWIsIDBOperational").useIsIDBOperational();p(function(){n&&(u||(u=r("ExecutionEnvironment"))).isInBrowser&&r("promiseDone")(L(t,e))},[e,t,n]),p(function(){n&&r("promiseDone")(o("EBMainThreadListeners").initEBListeners())},[n]),r("useMWEncryptedBackupsProcessBackupIdsDeferred")(C),r("justknobx")._("4966")===!1&&S()}function L(e,t){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a=n.logout,i=n.reregisterDevice,l=n.rotateCryptoAuthToken,s=n.setupBridge;if(h){_.load().then(function(e){e("messenger_web").warn("Armadillo already setup - return")});return}if(r("isMWAppsSubdomainExperiment")(!1)){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Armadillo is disabled on apps subdomain"])));return}h=!0,o("MAWMIC").startMAWMICFlow(),o("MAWInit").MAWInit.start(),(u||(u=r("ExecutionEnvironment"))).isInBrowser&&(yield o("MpsReverbInit").initReverb({blockingErrorThreshold:r("justknobx")._("3218"),name:o("MAWIndexedDbMetadata").webReverDbbName(o("MAWCurrentUser").getID()),onBlockingError:function(){},qplEvent:r("qpl")._(1056840657,"2716"),strEncKey:r("MessengerWebInitData").accountKeyV2}),yield o("MAWCacheServiceDB").getOrSetupMAWCacheDB(),g!=null&&r("promiseDone")(g(t),function(){},function(e){return _.load().then(function(t){return t("messenger_web").catching(e).mustfix("UI Dexie initialisation failed: %s",e.message)})})),o("WABridge").makeWABridge(new(o("WADynamicRouterSync")).DynamicRouterSync);try{o("MAWIssueNewUserVisibleErrors").deleteAllErrors(),yield o("MAWCommonBackendSetup").setupArmadilloBackend(o("MAWInit").MAWInit,function(e){return s({dispatch:t,logout:a,reregisterDevice:i,rotateCryptoAuthToken:l,worker:e})},function(){t({tag:"InitOfflineQueueSyncComplete",value:void 0}),t({tag:"IsDbMigrating",value:!1}),r("justknobx")._("4966")===!0&&S(),o("MAWMIC").onConnectToExistingWorker()},function(){t({tag:"InitOfflineQueueSyncComplete",value:void 0}),t({tag:"IsDbMigrating",value:!1})},"mawInit",function(e){}),o("MAWUIJob").UIJobStarters.fireAndForget(o("MAWJobDefinitions").jobSerializers.handleFutureproofMsg({priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW})),o("MAWInit").MAWInit.addIntAnnotation("endTimePageRelative",y()),o("MAWInit").MAWInit.endSuccess()}catch(e){var c,d=r("getErrorSafe")(e),m=d instanceof o("MAWInitError").MAWInitError?d.message:"maw_init_failure";d.message=(c=d.message)!=null?c:"Unknown";var p=d.message==="maw_appmutex_no_permission"&&document.visibilityState!=="visible";throw p?o("MAWInit").MAWInit.cancel(m,d):(o("MAWWaitForBackendSetup").rejectBackendSetup(d),o("MAWInit").MAWInit.fail(m,d)),o("MAWIssueNewUserVisibleErrors").issueError(o("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgBody,o("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgTitle,o("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER,d.message),d&&_.load().then(function(e){e("messenger_web").catching(d).mustfix("MAW backend setup failed -- %s",d.message)}),d}o("EBMainThreadEBDBApiDeferred").startListeningDeviceRegistrations();var C=yield o("EBMinosCheckWasmFeatureSupport").checkWasmFeatureSupport();f!=null&&C&&f.initializeMinosDb()}),E.apply(this,arguments)}l.useArmadillo=R}),98);
__d("MAWOccamadilloOnMutexChange",["I64","LSDefaultSyncGroups","LSIntEnum","LSSyncGroupsUtils","Promise","WALogger","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e){var t=o("LSDefaultSyncGroups").e2eeMetadataSyncGroup;return t!=null?e.sync_groups.put(babelHelpers.extends({},o("LSSyncGroupsUtils").defaultSyncGroup,{groupId:(c||(c=o("LSIntEnum"))).ofNumber(t.groupId)})):(s||(s=n("Promise"))).resolve()}function m(e){return e.network_requests.put({epochId:void 0,failureCount:(u||(u=o("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:u.zero,lastSyncRequestTimestampMs:u.zero,networkTaskIdentifier:void 0,syncDatabaseId:(c||(c=o("LSIntEnum"))).ofNumber(95),taskQueueName:""})}function p(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Resetting sync cursor and network request"]))),r("promiseDone")(t.runInTransaction(function(e){return(s||(s=n("Promise"))).all([d(e),m(e)])},"readwrite",void 0,void 0,i.id+":53"))}l.onOccamadilloMutexChange=p}),98);
__d("MAWReinit",["ExecutionEnvironment","MAWCurrentUser","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","asyncToGeneratorRuntime","gkx","qpl","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("qpl")._(25310984,"169");function c(t){var a=t!=null?{instanceKey:t}:void 0,i=!1,l=!1;function c(){l||(l=!0,r("QPLUserFlow").start(u,babelHelpers.extends({cancelOnUnload:!0,onFlowTimeout:function(){i=!0},timeoutInMs:(e||(e=r("ExecutionEnvironment"))).canUseDOM?6e4:0},a)),o("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(e){r("QPLUserFlow").addAnnotations(u,e)}),C())}function d(e){!l||i||(C(),r("QPLUserFlow").addPoint(u,e,a))}function m(e,t){var n;!l||i||r("QPLUserFlow").addAnnotations(u,{bool:(n={},n[e]=t,n)})}function p(e,t){var n;!l||i||r("QPLUserFlow").addAnnotations(u,{string:(n={},n[e]=t,n)})}function _(e,t){var n;!l||i||r("QPLUserFlow").addAnnotations(u,{string_array:(n={},n[e]=t,n)})}function f(e,t){var n;!l||i||r("QPLUserFlow").addAnnotations(u,{int:(n={},n[e]=t,n)})}function g(e){C(),i=!0,r("QPLUserFlow").addAnnotations(u,{string:{failReason:e}},a),r("QPLUserFlow").endFailure(u,"maw_init_fail",a),y=!1}function h(e){C(),i=!0,y=!1,r("QPLUserFlow").addAnnotations(u,{string:{dropReason:e}},a),(s||(s=r("QuickPerformanceLogger"))).markerDrop(u)}var y=!1;function C(){y||(y=!0,r("QPLUserFlow").addAnnotations(u,{bool:{armadillo_init_sync_api_improvements:r("gkx")("24025"),isArmadilloPublicLaunchUser:r("gkx")("23405"),isTlcPublicUser:o("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}}))}function b(e){C(),i=!0,r("QPLUserFlow").addAnnotations(u,{string:{cancelReason:e}},a),r("QPLUserFlow").endCancel(u,a),y=!1}function v(){C(),i=!0,r("QPLUserFlow").endSuccess(u,a),y=!1}function S(e,t){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e+"_start",r=e+"_end";d(n);var o=yield t();return d(r),o}),R.apply(this,arguments)}return{addBoolAnnotation:m,addIntAnnotation:f,addStringAnnotation:p,addStringArrayAnnotation:_,cancel:b,drop:h,endSuccess:v,fail:g,logPoint:d,measurePerformance:S,start:c}}l.getMAWReinit=c}),98);
__d("MAWReinitWorker",["MAWCommonBackendSetup","MAWOccamadilloOnMutexChange","MAWReinit","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.allTablesPersisted,n=e.db,r=e.dispatch,a=e.dispatchClearEphemeralSettings,i=e.instanceKey,l=e.logout,s=e.reregisterDevice,u=e.rotateCryptoAuthToken,c=e.setupBridge,d=e.workerCreateReason,m=o("MAWReinit").getMAWReinit(i);m.start();var p=function(){r({tag:"InitOfflineQueueSyncComplete",value:void 0})};yield o("MAWCommonBackendSetup").setupArmadilloBackend(m,function(e){var a=c({dispatch:r,logout:l,reregisterDevice:s,rotateCryptoAuthToken:u,worker:e});return t||o("MAWOccamadilloOnMutexChange").onOccamadilloMutexChange(n),a},p,p,d,function(e){}),m.endSuccess(),a()}),s.apply(this,arguments)}l.default=e}),98);
__d("MAWSetupMutex",["LocalStorageMutex","MAWAppMutex","MAWBridge","MAWInit","MAWIssueNewUserVisibleErrors","MAWLocalStorage","MAWMIC","MAWReinitWorker","MAWSetupWorker","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MWFBLogger","QPLUserFlow","Run","asyncToGeneratorRuntime","getErrorSafe","isInstamadillo","promiseDone","qpl","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useEffect,m=u.useMemo,p=o("MWFBLogger").MWLogger().tags(["MAWInit"]),_=!1,f=0;function g(e){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(document.visibilityState!=="visible")return!1;var t=window.indexedDB!=null,n=o("MAWLocalStorage").isLocalStorageAvailable();return e?(p.debug("AppMutex - Shouldn't reinitialize, worker already exists"),!1):!(!t||!n)}),h.apply(this,arguments)}function y(t,a){var i=t.logout,l=t.reregisterDevice,s=t.rotateCryptoAuthToken,u=t.setupBridge,h=m(function(){return o("MAWAppMutex").use()},[]),y=(e||(e=r("useReStore")))(),C=y.persistenceTypes.includes("indexeddb"),b=c((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=h.takeoverFilter(e);!t||e.newValue===o("LocalStorageMutex").THIS_TAB||e.newValue===""||(!C&&!r("isInstamadillo")()&&o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"DropAllSecureThreads",value:void 0}]}),yield o("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleStoreChange"),o("MAWWaitForBackendSetup").resetBackendSetup(),o("MAWMIC").cancel("workerMutexLost"),o("MAWInit").MAWInit.cancel("workerMutexLost"),h.onMutexDeath())});return function(t){return e.apply(this,arguments)}})(),[h,C]),v=c(function(){h.onMutexDeath(),r("promiseDone")(o("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleUnload"))},[h]),S=c(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("MAWWebWorkerSingleton").doesWorkerExist(),t=yield g(e);if(!(!t||_)){_=!0,f++;try{yield r("MAWReinitWorker")({allTablesPersisted:C,db:y,dispatch:a,dispatchClearEphemeralSettings:function(){},instanceKey:f,logout:i,reregisterDevice:l,rotateCryptoAuthToken:s,setupBridge:u,workerCreateReason:"mawReinitSetupMutex"}),o("MAWIssueNewUserVisibleErrors").deleteUserVisibleErrorByJSErrorMessage("maw_appmutex_no_permission")}catch(e){var n=r("getErrorSafe")(e);p.catching(n).mustfix("AppMutex - failed to reinitialize worker"),r("QPLUserFlow").endFailure(r("qpl")._(25310984,"169"),"failed_to_reinitialize_worker",{annotations:{string:{error:n.message}},error:n,instanceKey:f})}finally{_=!1}}}),[C,y,a,i,l,s,u]);d(function(){window.addEventListener("storage",b);var e=o("Run").onBeforeUnload(v,!1),t=o("Run").onUnload(v);return window.addEventListener("visibilitychange",S),function(){window.removeEventListener("storage",b),e.remove(),t.remove(),window.removeEventListener("visibilitychange",S)}},[b,v,S])}l.useMutex=y}),98);
__d("MAWSetupMutex.react",["MAWSetupMutex"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.dispatch,n=e.environment,r=e.fbId,a=e.platformSetupUtils;return o("MAWSetupMutex").useMutex(a,t),null}l.default=e}),98);
__d("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure",["LSScheduleOccamThreadsIntegrityChecker","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){a===void 0&&(a={});var i=t.storedProcedure(r("LSScheduleOccamThreadsIntegrityChecker"),a.delayMs,a.maxThreadCount);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWChatFetchThreadMessageCounts",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";function e(e){return l.apply(this,arguments)}function l(){return l=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return{}}),l.apply(this,arguments)}function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return 0}),u.apply(this,arguments)}i.fetchArmadilloThreadMessageCounts=e,i.fetchArmadilloThreadMessageCount=s}),66);
__d("globalCryptoSubtle",[],(function(t,n,r,o,a,i){"use strict";var e=t.crypto.subtle,l=e;i.default=l}),66);
__d("useDataLossStatisticsStorageListener",["LSDatabaseSingleton","MWChatFetchThreadMessageCounts","Visibility","WebStorage","promiseDone","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(s||(s=o("react"))).useEffect,d="armadillo_msgr_data_loss_stats";function m(){c(function(){var t;return window.setTimeout(function(){t=r("Visibility").addListener(r("Visibility").HIDDEN,function(){r("promiseDone")((u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(t){return o("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(t).then(function(t){(e||(e=r("WebStorage"))).setItemGuarded(e.getLocalStorage(),d,JSON.stringify(t))})}))})},3e4),function(){var e;(e=t)==null||e.remove()}},[])}l.DATA_LOSS_STATISTICS_STORAGE_KEY=d,l.useDataLossStatisticsStorageListener=m}),98);
__d("MWChatDataLossCheckerUtil",["FBLogger","I64","MWChatFetchThreadMessageCounts","Promise","QuickPerformanceLogger","WebStorage","asyncToGeneratorRuntime","getErrorSafe","globalCryptoSubtle","promiseDone","qpl","useDataLossStatisticsStorageListener"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e){var t=Array.from(new Uint8Array(e));return t.map(function(e){return e.toString(16).padStart(2,"0")}).join("")}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{var t=new TextEncoder,n=t.encode(e).buffer,o=yield r("globalCryptoSubtle").digest("SHA-256",n);return d(o)}catch(e){return r("getErrorSafe")(e).message}}),p.apply(this,arguments)}function _(e){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.currentIDBCnt,n=e.currentMsgCnt,o=e.logThreadId,a=e.prevMsgCnt,i=e.qplEvent,l=e.threadId;if(o!=null&&o){var s=yield m(l);t!=null?((u||(u=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),u.markerAnnotate(i,{int:{current_idb_count:t,current_msg_count:n,prev_msg_count:a},string:{encrypted_threadId:s}}),u.markerEnd(i,2)):((u||(u=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),u.markerAnnotate(i,{int:{current_msg_count:n,prev_msg_count:a},string:{encrypted_threadId:s}}),u.markerEnd(i,2))}else t!=null?((u||(u=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),u.markerAnnotate(i,{int:{current_idb_count:t,current_msg_count:n,prev_msg_count:a}}),u.markerEnd(i,2)):((u||(u=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),u.markerAnnotate(i,{int:{current_msg_count:n,prev_msg_count:a}}),u.markerEnd(i,2))}),f.apply(this,arguments)}function g(e){var t=e.currentMsgCnt,n=e.logThreadId,r=e.prevMsgCnt,o=e.qplEvent,a=e.threadId;return _({currentMsgCnt:t,logThreadId:n,prevMsgCnt:r,qplEvent:o,threadId:a})}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{var n,a=yield o("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCount(e,t),i=(c||(c=r("WebStorage"))).getAllowlistedKeyFromLocalStorage(o("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(i==null)return{isThreadMissingMessages:!1};var l=JSON.parse(i),u=(n=l[(s||(s=o("I64"))).to_string(t)])!=null?n:null;return u==null?{isThreadMissingMessages:!1}:u>0&&a===0?{currCount:a,isThreadMissingMessages:!0,prevCount:u}:{isThreadMissingMessages:!1}}catch(e){return r("FBLogger")("labyrinth").catching(r("getErrorSafe")(e)).warn("Failed to check for data loss"),{isThreadMissingMessages:!1}}}),y.apply(this,arguments)}function C(t){var a=o("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(t);return a.then(function(t){var a=(c||(c=r("WebStorage"))).getAllowlistedKeyFromLocalStorage(o("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(a==null)return(e||(e=n("Promise"))).resolve(null);var i=JSON.parse(a);return(e||(e=n("Promise"))).resolve({current:t,previous:i})}).then(function(t){if(t==null)return(e||(e=n("Promise"))).resolve();var r=t.current,o=t.previous;return b(o,r)}).catch(function(e){return r("FBLogger")("labyrinth").catching(r("getErrorSafe")(e)).warn("Failed to check for data loss")}),a.then(function(){})}function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,o){var a=[];for(var i in t)Object.prototype.hasOwnProperty.call(o,i)&&a.push(i);for(var l=[],s=0;s<a.length;s++){var u=a[s],c={currentMsgCnt:o[u],prevMsgCnt:t[u],threadId:u};t[u]>0&&o[u]===0?(l.push(g(babelHelpers.extends({},c,{qplEvent:r("qpl")._(717553665,"1183")}))),l.push(g(babelHelpers.extends({},c,{logThreadId:!0,qplEvent:r("qpl")._(717562243,"1358")})))):(l.push(g(babelHelpers.extends({},c,{qplEvent:r("qpl")._(717553666,"1184")}))),l.push(g(babelHelpers.extends({},c,{logThreadId:!0,qplEvent:r("qpl")._(717556541,"1361")}))))}yield(e||(e=n("Promise"))).all(l)}),v.apply(this,arguments)}function S(e){var t=function(n){r("promiseDone")(m(n).then(function(t){(u||(u=r("QuickPerformanceLogger"))).markerStartFromNavStart(r("qpl")._(717567419,"1383")),u.markerAnnotate(r("qpl")._(717567419,"1383"),{string:{encryptedThreadId:t,msg_count:e[n].toString()}}),u.markerEnd(r("qpl")._(717567419,"1383"),2)}))};for(var n in e)t(n)}l.qplLog=g,l.checkIsThreadMissingMessages=h,l.fetchCountsAndLogDataLoss=C,l.logThreadCompleteDataLoss=b,l.logLocalStatistics=S}),98);
__d("useOnMawSetupComplete.react",["emptyFunction","promiseDone","react","waitForMAWMIC"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t,n){t===void 0&&(t=r("emptyFunction")),s(function(){var n=!1;return r("promiseDone")(o("waitForMAWMIC").promise.then(function(){n||e()}).catch(function(){n||t()})),function(){n=!0}},n)}l.useOnMawSetupComplete=u}),98);
__d("useDataLossChecker",["FBLogger","I64","LSDatabaseSingleton","LSFactory","LSScheduleOccamThreadsIntegrityCheckerStoredProcedure","MWChatDataLossCheckerUtil","asyncToGeneratorRuntime","getErrorSafe","gkx","justknobx","promiseDone","useDataLossStatisticsStorageListener","useOnMawSetupComplete.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){o("useDataLossStatisticsStorageListener").useDataLossStatisticsStorageListener(),o("useOnMawSetupComplete.react").useOnMawSetupComplete(function(){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;yield o("MWChatDataLossCheckerUtil").fetchCountsAndLogDataLoss(t)})()),c()},c(),[])}function c(){try{var t=r("gkx")("24061"),a=r("justknobx")._("1683");t&&a&&r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;return t.runInTransaction(function(e){return r("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure")(r("LSFactory")(e),{delayMs:(s||(s=o("I64"))).of_int32(6e4),maxThreadCount:s.of_int32(20)})},"readonly",void 0,void 0,i.id+":62")})())}catch(e){var l=r("getErrorSafe")(e);r("FBLogger")("wmi_eb").warn("Error running thread integrity checker",l.message)}}l.default=u}),98);
__d("useLegacyUserWatchdog",["MAWIssueNewUserVisibleErrors","clearTimeout","react","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u=1440*60*1e3,c=5*u;function d(){s(function(){var e=r("setTimeout")(function(){var e;(e=o("MAWIssueNewUserVisibleErrors")).issueError(e.MAWLegacyUserErrorMsgBody,e.MAWLegacyUserErrorMsgTitle,e.MAWUserVisibleErrorPresentationType.BANNER)},c);return function(){return r("clearTimeout")(e)}},void 0)}l.default=d}),98);
__d("useMAWReregisterDeviceOnError",["FBLogger","LSPersistedDbGating","MAWEBSwitch","MAWIssueNewUserVisibleErrors","MAWLoggerUtils","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","MWEncryptedBackupsInitializeRestoreDeferred","ODS","WAOdsEnums","WMIWABridgeApi","asyncToGeneratorRuntime","emptyFunction","getErrorSafe","promiseDone","react","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=c.useCallback,m=c.useContext,p=!1,_=typeof window!="undefined"?window:self;function f(){p=!0,r("promiseDone")(o("MAWSetupWorker").terminateWorkerPermanently(),function(){(u||(u=o("ODS"))).bumpEntityKey(3185,"armadillo_forced_reregister_fail",_.location.hostname),u.bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"reregister_fail_logout"),o("MAWIssueNewUserVisibleErrors").issueError(o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,o("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)})}function g(t){var a=t.rotateCryptoAuthToken,i=t.setupBridge,l=r("useAsyncReStore")(),s=m(o("MAWStateContext.react").MAWDispatchContext);return d(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!p){(u||(u=o("ODS"))).bumpEntityKey(3185,"armadillo_forced_deregister",_.location.hostname),yield r("WMIWABridgeApi").removeCurrentDevice(),yield o("MAWSetupWorker").terminateWorker("useMAWReregisterDeviceOnError"),o("MAWWaitForBackendSetup").resetBackendSetup();try{var t=yield l;(u||(u=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"reinit_worker"),yield r("MAWReinitWorker")({allTablesPersisted:o("LSPersistedDbGating").allTablesPersisted,db:t,dispatch:s,dispatchClearEphemeralSettings:function(){},logout:f,reregisterDevice:f,rotateCryptoAuthToken:a,setupBridge:i,workerCreateReason:"mawReinitReregDevice"}),r("MAWEBSwitch").isEnabled()&&((u||(u=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"eb_initial_restore"),yield o("MWEncryptedBackupsInitializeRestoreDeferred").encryptedBackupsInitializeRestoreDeferred({db:t,onFailure:r("emptyFunction"),onSuccess:r("emptyFunction")}))}catch(t){var n,c=r("getErrorSafe")(t);o("MAWWaitForBackendSetup").rejectBackendSetup(c);var d=c.message;r("FBLogger")("wmi_wa").tags([(n=o("MAWLoggerUtils")).Tag.DeviceRegistration,n.Tag.LogoutHandler,n.Tag.WorkerSetup,n.Tag.MAWWorker,n.Tag.MAWInit]).catching(c).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to reinit worker: ",""])),d),(u||(u=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"reinit_worker_fail.${message}"),o("MAWIssueNewUserVisibleErrors").issueError(o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,o("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)}}}),[l,s,a,i])}l.default=g}),98);
__d("useStorageUsageMetricsLogger",["cr:20551","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(){s(function(){n("cr:20551")==null||n("cr:20551").logMAWDBUsageMetrics()},[])}l.default=u}),98);
__d("MAWSetupImpl.react",["BaseHeadingContext","CometRelay","MAWCommonSetup","MAWCryptoAuthToken","MAWSetupMutex.react","MAWStateContext.react","cr:6159","cr:6160","cr:8800","promiseDone","react","shouldUseMAWSharedWorker","useDataLossChecker","useLegacyUserWatchdog","useMAWReregisterDeviceOnError","useStorageUsageMetricsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useMemo;window.XPlatTesting=n("cr:6159"),window.XPlatTestingGroups=n("cr:6160"),window.XPlatMockServer=n("cr:8800");function p(e){var t=e.children,n=e.fbid,a=e.logout,i=e.setupBridge,l=d(o("MAWStateContext.react").MAWDispatchContext),u=o("CometRelay").useRelayEnvironment(),p=c(function(){return o("MAWCryptoAuthToken").fetchFreshCAT(u)},[u]),_=r("useMAWReregisterDeviceOnError")({rotateCryptoAuthToken:p,setupBridge:i}),f=m(function(){return{logout:a!=null?a:function(){return r("promiseDone")(_())},reregisterDevice:function(){return r("promiseDone")(_())},rotateCryptoAuthToken:p,setupBridge:i}},[p,a,_,i]);o("MAWCommonSetup").useArmadillo(f),r("useLegacyUserWatchdog")(),r("useDataLossChecker")(),r("useStorageUsageMetricsLogger")();var g=d(r("BaseHeadingContext")),h=!o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();return s.jsxs(r("BaseHeadingContext").Provider,{value:g+1,children:[t,h?s.jsx(r("MAWSetupMutex.react"),{dispatch:l,environment:u,fbId:n,platformSetupUtils:f}):null]})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("MAWBridgeInitOfflineQueueSyncStartHandler",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MessengerLogHistory").__setRef("MAWBridgeInitOfflineQueueSyncStartHandler");function s(){e.onReady(function(e){var t=e.getInstance("maw_setup");t.debug("Init Offline Queue Sync Start")})}l.call=s}),98);
__d("MAWDeviceChangeState-resolver",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=[],s={getDeviceAlertCount:function(){return e},subscribe:function(t){return l.push(t),function(){l=l.filter(function(e){return e!==t})}}};function u(t){e!==t&&(e=t,l.forEach(function(e){return e()}))}function c(){return{read:function(){return s.getDeviceAlertCount()},subscribe:function(t){return s.subscribe(t)}}}i.updateDeviceCount=u,i.deviceAlertCount=c}),66);
__d("MAWStateContextProvider.react",["MAWBridgeInitOfflineQueueSyncCompleteHandler","MAWBridgeInitOfflineQueueSyncStartHandler","MAWDeviceChangeState-resolver","MAWOfflineQueueThreadStatus","MAWSharedProtocolQueueConst","MAWStateContext.react","cr:19624","gkx","react","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useMemo,f=d.useReducer,g=d.useTransition,h=(e=r("gkx")("12254"))!=null?e:!1,y=function(t,n){switch(n.tag){case"InitOfflineQueueSyncProgress":{var e=n.value;return babelHelpers.extends({},t,{offlineQueueProgressDownloaded:e})}case"InitOfflineQueueConsumerSyncProgress":{var r=n.value,a=r.chatJidStatus,i=r.processed,l=t.offlineQueueThreadStatus||{},s=o("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(a,l);return babelHelpers.extends({},t,{offlineQueueProgressProcessed:i,offlineQueueThreadStatus:s})}case"InitOfflineQueueSyncStart":{o("MAWBridgeInitOfflineQueueSyncStartHandler").call();var u=n.value;return babelHelpers.extends({},t,{offlineQueueCount:u})}case"InitOfflineQueueSyncComplete":{o("MAWBridgeInitOfflineQueueSyncCompleteHandler").call();var c=n.value,d=t.offlineQueueThreadStatus||{},m=o("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(c,d);return babelHelpers.extends({},t,{offlineQueueSyncState:o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete,offlineQueueThreadStatus:m})}case"NewXMA":case"NewXMAs":return t;case"SetIsMAWDBinUILoaded":return h?t:babelHelpers.extends({},t,{isMAWDBinUILoaded:!0})}return t},C=function(t){if(n("cr:19624")==null)return!1;if(t.tag==="InitOfflineQueueSyncProgress"){var e=t.value;return n("cr:19624").initOfflineQueueSyncProgress(e),!0}if(t.tag==="InitOfflineQueueConsumerSyncProgress"){var r=t.value,a=r.chatJidStatus,i=r.processed;return n("cr:19624").initOfflineQueueConsumerSyncProgress(i,a),!0}if(t.tag==="InitOfflineQueueSyncStart"){o("MAWBridgeInitOfflineQueueSyncStartHandler").call();var l=t.value;return n("cr:19624").initOfflineQueueSyncStart(l),!0}if(t.tag==="InitOfflineQueueSyncComplete"){o("MAWBridgeInitOfflineQueueSyncCompleteHandler").call();var s=t.value;return n("cr:19624").initOfflineQueueSyncComplete(s),!0}return!1},b=function(t){if(t.tag==="UnArchivedSelfDeviceChangeAlerts"){var e=t.value;return o("MAWDeviceChangeState-resolver").updateDeviceCount(e),!0}return!1};function v(e){var t,n=e.children,r=f(y,(t=o("MAWStateContext.react")).initialState),a=r[0],i=r[1],l=g(),s=l[0],u=l[1],d=m(function(e){var t=C(e);if(!t){var n=b(e);n||u(function(){return i(e)})}},[]),h=_(function(){return new Set},[]),v=_(function(){return{state:a,subscriptions:h}},[a,h]),R=S(v),L=m(function(){return R.current},[R]);return p(function(){h==null||h.forEach(function(e){return e(a)})},[a,h]),c.jsx(t.MAWDispatchContext.Provider,{value:d,children:c.jsx(t.MAWStateContext.Provider,{value:v,children:c.jsx(t.MAWNonRerenderingStateContext.Provider,{value:L,children:n})})})}v.displayName=v.name+" [from "+i.id+"]";function S(e){var t=(s||(s=r("useUnsafeRef_DEPRECATED")))(e);return t.current=e,t}l.MAWStateContextProvider=v}),98);
__d("IGDAWSetup.react",["FBLogger","IGDSetIGE2EEEligibility","IGDSetupBridge","MAWCurrentUser","MAWSetupImpl.react","MAWStateContextProvider.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e){var t=o("react-compiler-runtime").c(4),n=e.children,a=d;o("IGDSetIGE2EEEligibility").useUpsertSetIGE2EEEligibilityOnMount();var i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={className:"xjp7ctv"},t[0]=i):i=t[0];var l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=o("MAWCurrentUser").getID(),t[1]=l):l=t[1];var u;return t[2]!==n?(u=s.jsx("div",babelHelpers.extends({},i,{"data-testid":void 0,children:s.jsx(o("MAWStateContextProvider.react").MAWStateContextProvider,{children:s.jsx(r("MAWSetupImpl.react"),{fbid:l,logout:a,setupBridge:o("IGDSetupBridge").setupBridge,children:n})})})),t[2]=n,t[3]=u):u=t[3],u}function d(){}l.default=c}),98);/*FB_PKG_DELIM*/
__d("EBBatchRequestResignCdnUrlQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24784488421147370"}),null);
__d("EBBatchRequestResignCdnUrlQuery.graphql",["EBBatchRequestResignCdnUrlQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"request"}],t=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"payloads",variableName:"request"}],concreteType:"XFBResignCdnUrlResponse",kind:"LinkedField",name:"batch_resigned_attachment_cdn_url",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"instance_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_enum",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"EBBatchRequestResignCdnUrlQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"EBBatchRequestResignCdnUrlQuery",selections:t},params:{id:n("EBBatchRequestResignCdnUrlQuery_facebookRelayOperation"),metadata:{},name:"EBBatchRequestResignCdnUrlQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("EBBatchRequestResignCdnUrl",["EBBatchRequestResignCdnUrlQuery.graphql","EBEnqueueResignCdnUrlRequests","FBLogger","WADirectPath","WAErrorMessage","WAMediaUtils","WAResultOrError","asyncToGeneratorRuntime","createWorkerQuery"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h=function(){return r("FBLogger")("wmi").tags(["labyrinth_web","resign_cdn_url"])};function y(e){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("EBEnqueueResignCdnUrlRequests").getGqlRestoredCdnUrlMap(),n=[];for(var r of t.entries()){var a=r[0],i=r[1];i.pending||n.push([a,i])}if(!(n.length<1)){var l=n.map(function(e){return{instance_key:e[0],payload:e[1].payload}});n.forEach(function(e){var t=e[0],n=e[1];o("EBEnqueueResignCdnUrlRequests").setGqlRestoredCdnUrlMap(t,{payload:n.payload,pending:!0,resolvable:n.resolvable})}),yield b(e,l)}}),C.apply(this,arguments)}function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(!(t.length<1)){var n=o("EBEnqueueResignCdnUrlRequests").getGqlRestoredCdnUrlMap();e==null||e.addPoint("resign_cdn_url_query_start");try{var a,i,l=yield r("createWorkerQuery")(L,{request:t.map(function(e){return{instance_key:e.instance_key,payload:e.payload.payload}})});e==null||e.addPoint("resign_cdn_url_query_end");var f=l==null||(a=l.viewer)==null||(a=a.messenger_default_encrypted_backup)==null||(a=a.mailbox)==null?void 0:a.batch_resigned_attachment_cdn_url;h().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Received "," requests"])),f==null?void 0:f.length),e==null||e.addAnnotations({int:{resign_cdn_url_gql_batch_size:(i=f==null?void 0:f.length)!=null?i:0}}),f==null||f.forEach(function(t){var r=t.instance_key!=null?o("WAMediaUtils").stringToDeliveryObjectId(t.instance_key):null,a=t.path;if(r!=null){var i,l=o("WADirectPath").validateDirectPath(a);if(!l.success){var s;h().WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL failed: ",", graphql error: ",""])),l.error,t.exception_message),e==null||e.addAnnotations({string:{resign_cdn_url_exception_enum:(s=t.exception_enum)!=null?s:"unknown"}})}var m=(i=n.get(r))==null?void 0:i.resolvable;m!=null?m.resolve(l):h().MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["No resolvable found for instance key: ",""])),r),n.delete(r)}else h().MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url came back with no instance key, ",""])),a)})}catch(r){var g=o("WAErrorMessage").maybeGetMessageFromError(r);e==null||e.addPoint("resign_cdn_url_query_fail"),e==null||e.addAnnotations({string:{resign_cdn_url_gql_error:g}}),h().WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL failed: ",""])),g),t.forEach(function(e){var t,r=(t=n.get(o("WAMediaUtils").stringToDeliveryObjectId(e.instance_key)))==null?void 0:t.resolvable;r!=null?r.resolve(o("WAResultOrError").makeError("resign-cdn-url-gql-error")):h().MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["No resolvable found during error for instance key: ",""])),e.instance_key)})}finally{t.forEach(function(e){var t,r=o("WAMediaUtils").stringToDeliveryObjectId(e.instance_key),a=(t=n.get(r))==null?void 0:t.resolvable;(a==null?void 0:a.isSettled)===!1&&h().MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Resolvable was not properly settled"]))),n.delete(o("WAMediaUtils").stringToDeliveryObjectId(e.instance_key))})}}}),v.apply(this,arguments)}function S(e,t,n){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){e==null||e.addPoint("resign_cdn_url_query_start");try{var a,i=yield r("createWorkerQuery")(L,{request:[{instance_key:t,payload:n.payload}]});e==null||e.addPoint("resign_cdn_url_query_end");var l=i==null||(a=i.viewer)==null||(a=a.messenger_default_encrypted_backup)==null||(a=a.mailbox)==null?void 0:a.batch_resigned_attachment_cdn_url;(l==null?void 0:l.length)!==1&&(e==null||e.addPoint("resign_cdn_url_should_have_one_response"));var s=l==null?void 0:l[0],u=s==null?void 0:s.path,c=o("WADirectPath").validateDirectPath(u);if(!c.success){var d;h().WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL failed: ",", graphql error: ",""])),c.error,s==null?void 0:s.exception_message),e==null||e.addAnnotations({string:{resign_cdn_url_exception_enum:(d=s==null?void 0:s.exception_enum)!=null?d:"unknown"}})}return c}catch(t){var m=o("WAErrorMessage").maybeGetMessageFromError(t);return e==null||e.addPoint("resign_cdn_url_query_fail"),e==null||e.addAnnotations({string:{resign_cdn_url_gql_error:m}}),h().WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL failed: ",""])),m),o("WAResultOrError").makeError("resign-cdn-url-gql-error")}}),R.apply(this,arguments)}var L=e!==void 0?e:e=n("EBBatchRequestResignCdnUrlQuery.graphql");l.batchedResignCdnUrlFromMap=y,l.batchedResignCdnUrlWithGraphQL=b,l.resignCdnUrlWithGraphQL=S}),98);
__d("EBEnqueueResignCdnUrlRequests",["EBBatchRequestResignCdnUrl","WACustomError","WAPromiseDelays","WAPromiseTimeout","WAResolvable","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=!0;return{get:function(){return e},set:function(n){e=n}}})(),s=(function(){var e=window.performance.now();return{get:function(){return e},set:function(n){e=n}}})(),u=new Map,c=r("justknobx")._("4662"),d=r("justknobx")._("3244");function m(t,n,r){var a,i=(a=u.get(t))==null?void 0:a.resolvable;if(i!=null)return r==null||r.addPoint("resign_cdn_url_map_hit"),p({mediaDownloadFlow:r,objectId:t,payload:n,promise:i.promise});var l=new(o("WAResolvable")).Resolvable,s=u.size===0;return u.set(t,{payload:n,pending:!1,resolvable:l}),e.get()?(_(s),p({mediaDownloadFlow:r,objectId:t,payload:n,promise:l.promise})):p({mediaDownloadFlow:r,objectId:t,payload:n,promise:l.promise})}function p(e){var t=e.mediaDownloadFlow,n=e.objectId,r=e.payload,a=e.promise;return o("WAPromiseTimeout").promiseTimeout(a,d).then(function(e){return!e.success&&e.error==="direct-path-undefined"?(u.delete(n),o("WAPromiseDelays").delayMs(d).then(function(){return o("EBBatchRequestResignCdnUrl").resignCdnUrlWithGraphQL(t,n,r)})):e}).catch(function(e){var a=e instanceof Error&&["NetworkTransportError","NetworkTimeoutError","NetworkRequestError"].includes(e.name);if(e instanceof o("WACustomError").TimeoutError||a)return t==null||t.addPoint("resign-cdn-url-gql-timeout"),u.delete(n),o("EBBatchRequestResignCdnUrl").resignCdnUrlWithGraphQL(t,n,r);throw t==null||t.addPoint("resign-cdn-url-gql-unexpected-error"),t==null||t.addAnnotations({string:{resign_cdn_url_payload_fail_reason:e.message}}),e})}function _(t,n){if(e.set(!1),t)return e.set(!0),s.set(window.performance.now()),o("EBBatchRequestResignCdnUrl").batchedResignCdnUrlFromMap(n);var r=Math.max(c-(window.performance.now()-s.get()),0);return o("WAPromiseDelays").delayMs(r).then(function(){return e.set(!0),s.set(window.performance.now()),o("EBBatchRequestResignCdnUrl").batchedResignCdnUrlFromMap(n)})}function f(){return u}function g(e,t){u.set(e,t)}l.enqueueResignCdnUrl=m,l.getGqlRestoredCdnUrlMap=f,l.setGqlRestoredCdnUrlMap=g}),98);
__d("EBCreateResignCDNUrlPayload",["CreateDerivedKeys","EBBase64Encode","EBWorkerEBDBApi","GetBlobFromInt64BE","Hmac_v2","I64","LSVec","OcmfClientMap","OpeEncrypt","Promise","TruncateSortKey","WAArrayBufferUtils","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="thread_ope_key",c="__DEVICE_ID_PLACEHOLDER__";function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.accessTokenSecret,n=e.deliveryObjectId,r=e.mediaType,a=e.messageId,i=e.primaryKeySecret,l=e.productType,s=e.sort,u=s===void 0?!1:s,d=e.sortOrderMs,m=e.threadId,_=yield p({accessTokenSecret:t,deliveryObjectId:n,mediaType:r,messageId:a,primaryKeySecret:i,productType:l,sortOrderMs:d,threadId:m});if(!_.success)return _;var f=_.value,g=f.device_id,h=babelHelpers.extends({},f,{device_id:c}),y=u?JSON.stringify(h,Object.keys(h).sort()):JSON.stringify(h);return o("WAResultOrError").makeResult(y.replace('"'+c+'"',String(g)))}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.accessTokenSecret,a=e.deliveryObjectId,i=e.mediaType,l=e.messageId,u=e.primaryKeySecret,c=e.productType,d=e.sortOrderMs,m=e.threadId,p=yield o("EBWorkerEBDBApi").getSecureEBClientState();if(p==null)return o("WAResultOrError").makeError("no-eb-client-state");var _=String(p.backupId),h=p.deviceId;if(h==null)return o("WAResultOrError").makeError("no-device-id");var y=r("EBBase64Encode")(p.mailboxRootKeyBlob),C=r("EBBase64Encode")(p.ocmfClientStateBlob),b=yield(s||(s=n("Promise"))).all([f("attachment_key_scope",JSON.stringify([_,a]),p.ocmfClientStateBlob),f("mailbox_id_scope",_,p.ocmfClientStateBlob),f("message_id_scope",l,p.ocmfClientStateBlob),f("attachment_token_salt_scope",l,p.ocmfClientStateBlob),f("attachment_key_salt_scope",JSON.stringify([_,a]),p.ocmfClientStateBlob),f("attachment_token_salt_scope",JSON.stringify([l,a]),p.ocmfClientStateBlob),f("thread_id_scope",m,p.ocmfClientStateBlob),g(p.mailboxRootKeyBlob,d,m)]),v=b[0],S=b[1],R=b[2],L=b[3],E=b[4],k=b[5],I=b[6],T=b[7];return T==null?o("WAResultOrError").makeError("no-encrypted-sort-key"):o("WAResultOrError").makeResult({access_token_secret:t,attachment_index_key:r("EBBase64Encode")(v),backup_ent_fbid:-8,backup_id:_,delivery_object_id:a,device_id:h,isOpenEB:0,mailbox_partial_id:r("EBBase64Encode")(S),media_type:i,message_partial_id:r("EBBase64Encode")(R),primary_key_secret:u,product_type:c,raw_identifiers:{otid:l,server_thread_key:null,timestamp:d.toString()},raw_tokens:{mailbox_root_key:y,ocmf_client_state_blob:C},salt_partial_access_token:r("EBBase64Encode")(k),salt_partial_attachment_index_key:r("EBBase64Encode")(E),salt_partial_id:r("EBBase64Encode")(L),sort_key:T,thread_id:m,thread_partial_id:r("EBBase64Encode")(I)})}),_.apply(this,arguments)}function f(e,t,n){return r("Hmac_v2")(o("WAArrayBufferUtils").stringToArrayBuffer(e),o("WAArrayBufferUtils").stringToArrayBuffer(t)).then(function(e){return r("OcmfClientMap")(n,e[0])})}function g(e,t,n){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){var i=new TextEncoder().encode(u+"_"+a).buffer,l=(yield o("CreateDerivedKeys").CreateDerivedKeys(i,void 0,t,[(e||(e=o("I64"))).of_int32(32)]))[0];if(l==null)return null;var s=yield o("GetBlobFromInt64BE").GetBlobFromInt64BE(e.of_float(n)),c=yield o("TruncateSortKey").TruncateSortKey(s[0]),d=yield o("OpeEncrypt").OpeEncrypt(r("LSVec").toArray(l)[0],c[0],e.of_int32(16)),m=Array.from(new Uint8Array(d[0])),p=m.map(function(e){return e.toString(16).padStart(2,"0")});return p.join("").toUpperCase()}),h.apply(this,arguments)}l.createStringifiedMediaRestorePayloadFromEBDB=d}),98);
__d("EBEncryptMessageTypes",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e){return e}function u(e){return e}function c(e){return e}function d(e){return e}function m(e){return e}function p(e){return e}function _(e){return e}function f(e){return e}function g(e){return e}function h(e){return e}function y(e){return e}i.unsafeCastToAAD=e,i.unsafeCastToSecretKey=l,i.unsafeCastToPlaintext=s,i.unsafeCastToCiphertext=u,i.unsafeCastToMsgData=c,i.unsafeCastToMacKey=d,i.unsafeCastToHmac=m,i.unsafeCastToEBCreateDerivedKeysIkm=p,i.unsafeCastToEBCreateDerivedKeysInfo=_,i.unsafeCastToEBCreateDerivedKeysSalt=f,i.unsafeCastToEBCreateDerivedKeyLength=g,i.unsafeCastToEBDerivedKey=h,i.castEBDerivedKeyToArrayBuffer=y}),66);
__d("EBGetContactEpochHead",["EBMinosSecureMailboxKeysForContact","Promise","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r=t.rawContactId;if(r==null)return(e||(e=n("Promise"))).reject(o("WAResultOrError").makeError("invalid-arguments"));var a=yield o("EBMinosSecureMailboxKeysForContact").getSecureMailboxKeysForContact(r);return a==null?o("WAResultOrError").makeResult():o("WAResultOrError").makeResult({epochHead:a.epoch_head,epochHeadCreationTime:a.epoch_head_creation_time})}),u.apply(this,arguments)}l.getContactEpochHead=s}),98);
__d("EBGetLatestChatJids",["I64","MAWBridgeSafeActionsWorkerAndUI","Promise","ReQL","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=1e3;function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){t===void 0&&(t=u);try{var n=m(e,t);return o("WAResultOrError").makeResult(yield n)}catch(e){return o("WAResultOrError").makeError(r("getErrorSafe")(e))}}),d.apply(this,arguments)}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){r===void 0&&(r=u);var a=yield(s||(s=n("Promise"))).all([o("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("getLatestChatJids",{count:r}),yield t.runInTransaction(function(t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.mi_act_mapping_table).map(function(t){var n=t.jid;return(e||(e=o("I64"))).to_string(n)}))},"readonly",void 0,void 0,i.id+":54")]),l=a[0],c=a[1],d=[];if(c.length>0){var m=new Set(c);l.forEach(function(e){var t=e.split("@")[0];m.has(t)&&d.push(e)})}return d}),p.apply(this,arguments)}l.getLatestChatJids=c}),98);
__d("EBGetMessageKeys",["EBMinosDb","FBLogger","Promise","WAResultOrError","WebMps","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("EBMinosDb").getEBMinosDb(),r=yield n.runInTransaction(["secure_minos_message_epoch_heads"],"readonly",function(n){return n.stores.secure_minos_message_epoch_heads.readIndex("[thread_id+message_id]",[e,t])},"LoadNewMinosMessageEpochHead");return r.length===0?null:{epochHead:r[0].epoch_head}});return function(n,r){return e.apply(this,arguments)}})();function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.messageId,i=t.threadId;try{if(a==null||i==null)return o("WAResultOrError").makeError("invalid-arguments");var l=yield o("WebMps").mps().loadMessage({config:{shouldFetchSupplementals:!0,strategy:"local-only"},debug:{purpose:"get-message-keys"},messageId:a,threadId:i}),c=yield u(i,a);if(c==null)return o("WAResultOrError").makeError("no-epoch-head-found");if(l.success===!1)return o("WAResultOrError").makeError(l.error);var d=l.value;if(d==null)return o("WAResultOrError").makeError("no-message");var m=new Map;yield(s||(s=n("Promise"))).all(Array.from(d.supplementalProtobufs).map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e[0],n=e[1],r=yield u(i,n.messageId);if(r==null)return o("WAResultOrError").makeError("no-epoch-head-found");m.set(t,babelHelpers.extends({},n,{senderEpochHead:r.epochHead}))});return function(t){return e.apply(this,arguments)}})()));var p=babelHelpers.extends({},d.toplevelProtobuf,{senderEpochHead:c.epochHead});return o("WAResultOrError").makeResult(babelHelpers.extends({},d,{supplementalProtobufs:m,toplevelProtobuf:p}))}catch(t){throw r("FBLogger")("wmi_minos").catching(r("getErrorSafe")(t)).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Runtime error in EBGetMessageKeys"]))),t}}),d.apply(this,arguments)}l.getMessageKeys=c}),98);
__d("EBMinosWasmDeriveAttachmentTokenPrimaryKey",["EBMinosWasmDeriveAttachmentAccessTokenSecret","EBMinosWasmDeriveAttachmentPrimaryKeySecret","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("EBMinosWasmDeriveAttachmentPrimaryKeySecret").deriveAttachmentPrimaryKeySecret({mediaKey:e});if(!t.success)return o("WAResultOrError").makeError("derive-primary-key-secret-error");var n=yield o("EBMinosWasmDeriveAttachmentAccessTokenSecret").deriveAttachmentAccessTokenSecret({mediaKey:e});return n.success?o("WAResultOrError").makeResult({accessToken:n.value,primaryKey:t.value}):o("WAResultOrError").makeError("derive-access-token-secret-error")}),s.apply(this,arguments)}l.deriveAttachmentTokenPrimaryKeySecret=e}),98);
__d("LSFindBackup",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsFindBackupStoredProcedure] Beginning execution."),t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[1]=a[0],r[2]=a[1],r[3]=a[2],r[4]=a[3],r[5]=a[4],r[6]=a[5],r[7]=a[6],r[8]=a[7],r[9]=a[8],r[10]=a[9],r[11]=a[10],r[12]=a[11],r[13]=a[12],r[14]=a[13],r[15]=a[14],r[16]=a[15],r[17]=a[16],r[18]=a[17],a):(o=l.item,t.sequence([function(e){return r[32]=o.backupTenancy,r[31]=o.encryptionVersion,r[27]=void 0,t.i64.neq(r[27],void 0)?t.resolve(r[28]=r[27]):t.sequence([function(e){return r[33]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[34]&&(r[43]=(r[33].push(t.i64.cast([0,0])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[35]&&(r[43]=(r[33].push(t.i64.cast([0,2])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[36]&&(r[43]=(r[33].push(t.i64.cast([0,3])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return r[37]&&(r[43]=(r[33].push(t.i64.cast([0,4])),r[33])),r[38]=t.createArray(),r[39]=t.i64.of_int32(r[33].length),t.i64.gt(r[39],t.i64.cast([0,0]))?t.loopAsync(r[39],function(e){return r[43]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[33],r[43]).then(function(e){var t;return t=e,r[44]=t[0],r[45]=t[1],t})},function(e){return r[46]=(r[38].push(r[44]),r[38])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[43]=t.createArray(),r[44]=t.i64.of_int32(r[38].length),t.i64.gt(r[44],t.i64.cast([0,0]))?t.loopAsync(r[44],function(e){return r[46]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[38],r[46]).then(function(e){var t;return t=e,r[47]=t[0],r[48]=t[1],t})},function(e){return r[49]=(r[43].push(t.i64.to_string(r[47])),r[43])}])}):t.resolve()},function(e){return r[45]=r[43].join(","),r[40]=r[45]}])},function(e){return r[38].some(function(e){return t.i64.eq(r[31],e)})?r[41]=r[31]:r[41]=void 0,t.i64.neq(r[41],void 0)?r[42]=r[41]:r[42]=void 0,r[28]=r[42]}])},function(e){var n;return t.i64.neq(r[28],void 0)?r[29]=r[28]:r[29]=t.i64.cast([0,0]),t.i64.neq(r[32],void 0)?r[30]=r[32]:r[30]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[29],r[30],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[1]=n[0],r[2]=n[1],r[3]=n[2],r[4]=n[3],r[5]=n[4],r[6]=n[5],r[7]=n[6],r[8]=n[7],r[9]=n[8],r[10]=n[9],r[11]=n[10],r[12]=n[11],r[13]=n[12],r[14]=n[13],r[15]=n[14],r[16]=n[15],r[17]=n[16],r[18]=n[17]}]))})},function(e){return t.i64.neq(r[1],void 0)?r[20]=t.i64.to_string(r[1]):r[20]=void 0,r[21]=t.i64.of_float(Date.now()),r[22]=t.i64.random(),r[24]="Finishing execution. Execution time: ",r[25]=t.i64.to_string(t.i64.sub(r[21],r[0])),r[26]=" ms",r[23]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsFindBackupStoredProcedure] ",r[23],r[24],r[23],r[25],r[23],r[26]].join("")),t.i64.eq(t.i64.mod_(r[22],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[27]=",",r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFindBackupStoredProcedure",[r[24],r[27],r[25],r[27],r[26]].join(""),r[28],t.i64.cast([0,4]))):t.resolve()},function(e){return o[0]=r[20]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsFindBackupStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSCreateResignCDNUrlPayload",["LSArrayGetObjectAt","LSBase64Encode.nop","LSBinaryToHex.nop","LSCreateDerivedKeys.nop","LSFindBackup","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return e[10]?t.sequence([function(o){var a;return t.blobs.neq(e[11],void 0)?t.sequence([function(o){var a;return t.i64.neq(e[8],void 0)?t.sequence([function(o){var a;return e[9]!==void 0?t.sequence([function(o){var a;return t.blobs.neq(e[12],void 0)?t.sequence([function(o){return r[10]=t.createArray(),r[19]=(r[10].push(e[9]),r[10]),r[19]=(r[10].push(e[1]),r[10]),r[11]=t.toJSON(r[10]),r[12]=t.createArray(),r[19]=(r[12].push(t.i64.cast([0,32])),r[12]),t.nativeOperation(n("LSGetBlobFromString.nop"),["thread_ope_key","_",e[5]].join("")).then(function(e){var t;return t=e,r[13]=t[0],t})},function(o){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[13],void 0,e[12],r[12]).then(function(e){var t;return t=e,r[14]=t[0],t})},function(e){return r[14]?r[15]=!1:r[15]=!0,r[15]?t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),r[20]="Got null keys while deriving message list OPE key. Returning null blobish",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[20]].join("")),r[19]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[20],r[19],t.i64.cast([0,3]))},function(e){return r[16]=void 0}]):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[14],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[19]=t[0],r[20]=t[1],t})},function(e){return r[16]=r[19]}])},function(o){var a;return t.blobs.neq(r[16],void 0)?t.sequence([function(o){return t.nativeOperation(n("LSGetBlobFromInt64BE.nop"),e[6]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return t.nativeOperation(n("LSTruncateSortKey.nop"),r[19]).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return t.nativeOperation(n("LSOpeEncrypt.nop"),r[16],r[20],t.i64.cast([0,16])).then(function(e){var t;return t=e,r[21]=t[0],t})},function(e){return t.nativeOperation(n("LSBinaryToHex.nop"),r[21]).then(function(e){var t;return t=e,r[22]=t[0],t})},function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),r[11]).then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),r[23]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(o){return t.nativeOperation(n("LSOcmfClientMap.nop"),e[11],r[24]).then(function(e){var t;return t=e,r[25]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[25]).then(function(e){var t;return t=e,r[26]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[9]).then(function(e){var t;return t=e,r[27]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWFpbGJveF9pZF9zY29wZQ=="),r[27]).then(function(e){var t;return t=e,r[28]=t[0],t})},function(o){return t.nativeOperation(n("LSOcmfClientMap.nop"),e[11],r[28]).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[29]).then(function(e){var t;return t=e,r[30]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[4]).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWVzc2FnZV9pZF9zY29wZQ=="),r[31]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(o){return t.nativeOperation(n("LSOcmfClientMap.nop"),e[11],r[32]).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[33]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[4]).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[35]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(o){return t.nativeOperation(n("LSOcmfClientMap.nop"),e[11],r[36]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[37]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[5]).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("dGhyZWFkX2lkX3Njb3Bl"),r[39]).then(function(e){var t;return t=e,r[40]=t[0],t})},function(o){return t.nativeOperation(n("LSOcmfClientMap.nop"),e[11],r[40]).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[42]=t[0],t})},function(o){return r[43]=new t.Map,r[43].set("attachment_index_key",r[26]==null?"":r[26]),r[43].set("backup_ent_fbid",e[0]),r[43].set("delivery_object_id",e[1]),r[43].set("device_id",e[8]),r[43].set("mailbox_partial_id",r[30]==null?"":r[30]),r[43].set("media_type",e[3]),r[43].set("message_partial_id",r[34]==null?"":r[34]),r[43].set("product_type",e[2]),r[43].set("salt_partial_id",r[38]==null?"":r[38]),r[43].set("sort_key",r[22]==null?"":r[22]),r[43].set("thread_partial_id",r[42]==null?"":r[42]),r[43].set("isOpenEB",e[10]===!0),r[44]=new t.Map,r[44].set("otid",e[4]),r[44].set("server_thread_key",e[7]),r[44].set("timestamp",t.i64.to_string(e[6])),t.nativeOperation(n("LSBase64Encode.nop"),e[11]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(o){return t.nativeOperation(n("LSBase64Encode.nop"),e[12]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(o){return r[47]=new t.Map,r[47].set("ocmf_client_state_blob",r[45]==null?"":r[45]),r[47].set("mailbox_root_key",r[46]==null?"":r[46]),r[48]=t.createArray(),r[60]=(r[48].push(e[4]),r[48]),r[60]=(r[48].push(e[1]),r[48]),r[49]=t.toJSON(r[48]),r[43].set("raw_identifiers",r[44]),r[43].set("backup_id",e[9]),r[43].set("thread_id",e[5]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[49]).then(function(e){var t;return t=e,r[50]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[50]).then(function(e){var t;return t=e,r[51]=t[0],t})},function(o){return t.nativeOperation(n("LSOcmfClientMap.nop"),e[11],r[51]).then(function(e){var t;return t=e,r[52]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[52]).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return r[43].set("salt_partial_access_token",r[53]==null?"":r[53]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[11]).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),r[54]).then(function(e){var t;return t=e,r[55]=t[0],t})},function(o){return t.nativeOperation(n("LSOcmfClientMap.nop"),e[11],r[55]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[56]).then(function(e){var t;return t=e,r[57]=t[0],t})},function(n){var o;return r[43].set("salt_partial_attachment_index_key",r[57]==null?"":r[57]),r[43].set("raw_tokens",r[47]),e[13]!==void 0&&r[43].set("access_token_secret",e[13]),e[14]!==void 0&&r[43].set("primary_key_secret",e[14]),r[58]=t.toJSON(r[43]),r[59]=new t.Map,r[59].set("payload",r[58]),o=[r[59],void 0],r[17]=o[0],r[18]=o[1]}]):t.resolve((r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,25])),r[19].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),r[19].set("error_message","OPE key is null for IssueAttachmentRestoreTask"),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]))},function(e){var t;return t=[r[17],r[18]],r[8]=t[0],r[9]=t[1],t}]):t.resolve((r[10]=new t.Map,r[10].set("error_code",t.i64.cast([0,20])),r[10].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),r[10].set("error_message","Missing mailbox_root_key for IssueAttachmentRestoreTask"),a=[void 0,r[10]],r[8]=a[0],r[9]=a[1]))},function(e){var t;return t=[r[8],r[9]],r[6]=t[0],r[7]=t[1],t}]):t.resolve((r[8]=new t.Map,r[8].set("error_code",t.i64.cast([0,1])),r[8].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),r[8].set("error_message","Missing backup_id for IssueAttachmentRestoreTask"),a=[void 0,r[8]],r[6]=a[0],r[7]=a[1]))},function(e){var t;return t=[r[6],r[7]],r[4]=t[0],r[5]=t[1],t}]):t.resolve((r[6]=new t.Map,r[6].set("error_code",t.i64.cast([0,24])),r[6].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),r[6].set("error_message","Missing device_id for IssueAttachmentRestoreTask"),a=[void 0,r[6]],r[4]=a[0],r[5]=a[1]))},function(e){var t;return t=[r[4],r[5]],r[2]=t[0],r[3]=t[1],t}]):t.resolve((r[4]=new t.Map,r[4].set("error_code",t.i64.cast([0,22])),r[4].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),r[4].set("error_message","Missing ocmf_client_state_blob for IssueAttachmentRestoreTask"),a=[void 0,r[4]],r[2]=a[0],r[3]=a[1]))},function(e){var t;return t=[r[2],r[3]],r[0]=t[0],r[1]=t[1],t}]):t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[2]=a[0],r[3]=a[1],r[4]=a[2],r[5]=a[3],r[6]=a[4],r[7]=a[5],r[8]=a[6],r[9]=a[7],r[10]=a[8],r[11]=a[9],r[12]=a[10],r[13]=a[11],r[14]=a[12],r[15]=a[13],r[16]=a[14],r[17]=a[15],r[18]=a[16],r[19]=a[17],a):(o=l.item,t.sequence([function(e){return r[29]=o.backupTenancy,r[28]=o.encryptionVersion,r[24]=void 0,t.i64.neq(r[24],void 0)?t.resolve(r[25]=r[24]):t.sequence([function(e){return r[30]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return r[31]&&(r[40]=(r[30].push(t.i64.cast([0,0])),r[30])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[32]&&(r[40]=(r[30].push(t.i64.cast([0,2])),r[30])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return r[33]&&(r[40]=(r[30].push(t.i64.cast([0,3])),r[30])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[34]&&(r[40]=(r[30].push(t.i64.cast([0,4])),r[30])),r[35]=t.createArray(),r[36]=t.i64.of_int32(r[30].length),t.i64.gt(r[36],t.i64.cast([0,0]))?t.loopAsync(r[36],function(e){return r[40]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[30],r[40]).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return r[43]=(r[35].push(r[41]),r[35])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[40]=t.createArray(),r[41]=t.i64.of_int32(r[35].length),t.i64.gt(r[41],t.i64.cast([0,0]))?t.loopAsync(r[41],function(e){return r[43]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[35],r[43]).then(function(e){var t;return t=e,r[44]=t[0],r[45]=t[1],t})},function(e){return r[46]=(r[40].push(t.i64.to_string(r[44])),r[40])}])}):t.resolve()},function(e){return r[42]=r[40].join(","),r[37]=r[42]}])},function(e){return r[35].some(function(e){return t.i64.eq(r[28],e)})?r[38]=r[28]:r[38]=void 0,t.i64.neq(r[38],void 0)?r[39]=r[38]:r[39]=void 0,r[25]=r[39]}])},function(e){var n;return t.i64.neq(r[25],void 0)?r[26]=r[25]:r[26]=t.i64.cast([0,0]),t.i64.neq(r[29],void 0)?r[27]=r[29]:r[27]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[26],r[27],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[2]=n[0],r[3]=n[1],r[4]=n[2],r[5]=n[3],r[6]=n[4],r[7]=n[5],r[8]=n[6],r[9]=n[7],r[10]=n[8],r[11]=n[9],r[12]=n[10],r[13]=n[11],r[14]=n[12],r[15]=n[13],r[16]=n[14],r[17]=n[15],r[18]=n[16],r[19]=n[17]}]))})},function(e){return t.storedProcedure(n("LSFindBackup")).then(function(e){var t;return t=e,r[21]=t[0],t})},function(o){var a;return t.blobs.neq(r[5],void 0)?t.sequence([function(o){var a;return t.i64.neq(r[3],void 0)?t.sequence([function(o){var a;return r[21]!==void 0?t.sequence([function(o){var a;return t.blobs.neq(r[4],void 0)?t.sequence([function(o){return r[30]=t.createArray(),r[39]=(r[30].push(r[21]),r[30]),r[39]=(r[30].push(e[1]),r[30]),r[31]=t.toJSON(r[30]),r[32]=t.createArray(),r[39]=(r[32].push(t.i64.cast([0,32])),r[32]),t.nativeOperation(n("LSGetBlobFromString.nop"),["thread_ope_key","_",e[5]].join("")).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[33],void 0,r[4],r[32]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[34]?r[35]=!1:r[35]=!0,r[35]?t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),r[40]="Got null keys while deriving message list OPE key. Returning null blobish",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[40]].join("")),r[39]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[40],r[39],t.i64.cast([0,3]))},function(e){return r[36]=void 0}]):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[34],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[39]=t[0],r[40]=t[1],t})},function(e){return r[36]=r[39]}])},function(o){var a;return t.blobs.neq(r[36],void 0)?t.sequence([function(o){return t.nativeOperation(n("LSGetBlobFromInt64BE.nop"),e[6]).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return t.nativeOperation(n("LSTruncateSortKey.nop"),r[39]).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return t.nativeOperation(n("LSOpeEncrypt.nop"),r[36],r[40],t.i64.cast([0,16])).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return t.nativeOperation(n("LSBinaryToHex.nop"),r[41]).then(function(e){var t;return t=e,r[42]=t[0],t})},function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),r[31]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),r[43]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[44]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),r[21]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWFpbGJveF9pZF9zY29wZQ=="),r[47]).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[48]).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[49]).then(function(e){var t;return t=e,r[50]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[4]).then(function(e){var t;return t=e,r[51]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWVzc2FnZV9pZF9zY29wZQ=="),r[51]).then(function(e){var t;return t=e,r[52]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[52]).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[53]).then(function(e){var t;return t=e,r[54]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[4]).then(function(e){var t;return t=e,r[55]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[55]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[56]).then(function(e){var t;return t=e,r[57]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[57]).then(function(e){var t;return t=e,r[58]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[5]).then(function(e){var t;return t=e,r[59]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("dGhyZWFkX2lkX3Njb3Bl"),r[59]).then(function(e){var t;return t=e,r[60]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[60]).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[61]).then(function(e){var t;return t=e,r[62]=t[0],t})},function(o){return r[63]=new t.Map,r[63].set("attachment_index_key",r[46]==null?"":r[46]),r[63].set("backup_ent_fbid",e[0]),r[63].set("delivery_object_id",e[1]),r[63].set("device_id",r[3]),r[63].set("mailbox_partial_id",r[50]==null?"":r[50]),r[63].set("media_type",e[3]),r[63].set("message_partial_id",r[54]==null?"":r[54]),r[63].set("product_type",e[2]),r[63].set("salt_partial_id",r[58]==null?"":r[58]),r[63].set("sort_key",r[42]==null?"":r[42]),r[63].set("thread_partial_id",r[62]==null?"":r[62]),r[63].set("isOpenEB",e[10]===!0),r[64]=new t.Map,r[64].set("otid",e[4]),r[64].set("server_thread_key",e[7]),r[64].set("timestamp",t.i64.to_string(e[6])),t.nativeOperation(n("LSBase64Encode.nop"),r[5]).then(function(e){var t;return t=e,r[65]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[4]).then(function(e){var t;return t=e,r[66]=t[0],t})},function(o){return r[67]=new t.Map,r[67].set("ocmf_client_state_blob",r[65]==null?"":r[65]),r[67].set("mailbox_root_key",r[66]==null?"":r[66]),r[68]=t.createArray(),r[80]=(r[68].push(e[4]),r[68]),r[80]=(r[68].push(e[1]),r[68]),r[69]=t.toJSON(r[68]),r[63].set("raw_identifiers",r[64]),r[63].set("backup_id",r[21]),r[63].set("thread_id",e[5]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[69]).then(function(e){var t;return t=e,r[70]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),r[70]).then(function(e){var t;return t=e,r[71]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[71]).then(function(e){var t;return t=e,r[72]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[72]).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return r[63].set("salt_partial_access_token",r[73]==null?"":r[73]),t.nativeOperation(n("LSGetBlobFromString.nop"),r[31]).then(function(e){var t;return t=e,r[74]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),r[74]).then(function(e){var t;return t=e,r[75]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[5],r[75]).then(function(e){var t;return t=e,r[76]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[76]).then(function(e){var t;return t=e,r[77]=t[0],t})},function(n){var o;return r[63].set("salt_partial_attachment_index_key",r[77]==null?"":r[77]),r[63].set("raw_tokens",r[67]),e[13]!==void 0&&r[63].set("access_token_secret",e[13]),e[14]!==void 0&&r[63].set("primary_key_secret",e[14]),r[78]=t.toJSON(r[63]),r[79]=new t.Map,r[79].set("payload",r[78]),o=[r[79],void 0],r[37]=o[0],r[38]=o[1]}]):t.resolve((r[39]=new t.Map,r[39].set("error_code",t.i64.cast([0,25])),r[39].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),r[39].set("error_message","OPE key is null for IssueAttachmentRestoreTask"),a=[void 0,r[39]],r[37]=a[0],r[38]=a[1]))},function(e){var t;return t=[r[37],r[38]],r[28]=t[0],r[29]=t[1],t}]):t.resolve((r[30]=new t.Map,r[30].set("error_code",t.i64.cast([0,20])),r[30].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),r[30].set("error_message","Missing mailbox_root_key for IssueAttachmentRestoreTask"),a=[void 0,r[30]],r[28]=a[0],r[29]=a[1]))},function(e){var t;return t=[r[28],r[29]],r[26]=t[0],r[27]=t[1],t}]):t.resolve((r[28]=new t.Map,r[28].set("error_code",t.i64.cast([0,1])),r[28].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),r[28].set("error_message","Missing backup_id for IssueAttachmentRestoreTask"),a=[void 0,r[28]],r[26]=a[0],r[27]=a[1]))},function(e){var t;return t=[r[26],r[27]],r[24]=t[0],r[25]=t[1],t}]):t.resolve((r[26]=new t.Map,r[26].set("error_code",t.i64.cast([0,24])),r[26].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),r[26].set("error_message","Missing device_id for IssueAttachmentRestoreTask"),a=[void 0,r[26]],r[24]=a[0],r[25]=a[1]))},function(e){var t;return t=[r[24],r[25]],r[22]=t[0],r[23]=t[1],t}]):t.resolve((r[24]=new t.Map,r[24].set("error_code",t.i64.cast([0,22])),r[24].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),r[24].set("error_message","Missing ocmf_client_state_blob for IssueAttachmentRestoreTask"),a=[void 0,r[24]],r[22]=a[0],r[23]=a[1]))},function(e){var t;return t=[r[22],r[23]],r[0]=t[0],r[1]=t[1],t}])},function(e){var t;return t=[r[0],r[1]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSCreateResignCDNUrlPayloadStoredProcedure",["LSCreateResignCDNUrlPayload","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSCreateResignCDNUrlPayload"),a.backupEntFbid,a.deliveryObjectId,a.productType,a.mediaType,a.messageId,a.threadId,a.sortOrder,a.serverThreadKey,a.deviceId,a.backupId,a.isOpenEb,a.ocmfClientState,a.mailboxRootKey,a.accessTokenSecret,a.primaryKeySecret);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("EBLSResignCdnUrl",["Base64Utils","EBCreateResignCDNUrlPayload","EBEnqueueResignCdnUrlRequests","EBLS","EBMinosCheckWasmFeatureSupport","EBMinosWasmDeriveAttachmentTokenPrimaryKey","FBLogger","I64","LSCreateResignCDNUrlPayloadStoredProcedure","LSFactory","LSShape","MAWConfig","Promise","WAJids","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R=function(){return r("FBLogger")("wmi").tags(["labyrinth_web","resign_cdn_url"])},L="-8",E=(S||(S=o("I64"))).of_string(L);function k(e){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.chatJid,a=e.deliveryObjectId,l=e.externalId,s=e.mediaDownloadFlow,u=e.mediaKey,c=e.mediaType,d=e.sortOrderMs;R().INFO(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL"])));var m=yield o("EBMinosCheckWasmFeatureSupport").checkWasFeatureSupportAndQE();s==null||s.addPoint("resign_cdn_url_gql_ebls_start");var b=(yield o("EBLS").init()).db;s==null||s.addPoint("resign_cdn_url_gql_ebls_end");var L=null,k=null;if(m){var I=yield o("EBMinosWasmDeriveAttachmentTokenPrimaryKey").deriveAttachmentTokenPrimaryKeySecret(u);I.success?(L=o("Base64Utils").fromArrayBuffer(I.value.accessToken),k=o("Base64Utils").fromArrayBuffer(I.value.primaryKey)):R().WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["",""])),I.error)}var T={accessTokenSecret:L,backupEntFbid:E,deliveryObjectId:a,mediaType:c,messageId:l,primaryKeySecret:k,productType:o("MAWConfig").getConfig().productTypeForEBAttachments,sortOrder:(S||(S=o("I64"))).of_float(d),threadId:o("WAJids").threadIdForChatJid(t)};s==null||s.addPoint("resign_cdn_url_gql_payload_start");var D=[b.runInTransaction(function(e){return r("LSCreateResignCDNUrlPayloadStoredProcedure")(r("LSFactory")(e),T)},"readwrite",void 0,void 0,i.id+":108").then(function(e){var t=e[0],n=e[1];if(t!=null)return o("LSShape").toRecord(t);var r=n==null?{}:o("LSShape").toRecord(n);return R().MUSTFIX(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Failed to create payload. stored procedure: ",", error code: ",", error message: ",""])),r.stored_procedure,r.error_code,r.error_message),null}).catch(function(e){var t=r("getErrorSafe")(e);return s==null||s.addPoint("resign_cdn_url_gql_lsdb_payload_fail"),R().catching(t).MUSTFIX(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Failed to create lsdb payload"]))),null}),o("EBCreateResignCDNUrlPayload").createStringifiedMediaRestorePayloadFromEBDB({accessTokenSecret:L,deliveryObjectId:a,mediaType:c,messageId:l,primaryKeySecret:k,productType:o("MAWConfig").getConfig().productTypeForEBAttachments,sortOrderMs:d,threadId:o("WAJids").threadIdForChatJid(t)}).then(function(e){return e.success?{payload:e.value}:(s==null||s.addPoint("resign_cdn_url_gql_ebdb_payload_fail"),s==null||s.addAnnotations({string:{payload_fail_error:e.error}}),null)}).catch(function(e){var t=r("getErrorSafe")(e);return R().catching(t).MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to create ebdb payload"]))),s==null||s.addAnnotations({string:{payload_fail_error:t.message}}),null})],x=yield(v||(v=n("Promise"))).all(D),$=x[0],P=x[1],N=$!=null?$:P;if($==null&&P!=null&&(s==null||s.addPoint("resign_cdn_url_fallback_to_ebdb")),N==null)return s==null||s.addPoint("resign_cdn_url_gql_payload_fail"),o("WAResultOrError").makeError("create-payload-failed");s==null||s.addPoint("resign_cdn_url_gql_payload_end"),s==null||s.addPoint("resign_cdn_url_gql_restore_start");var M=yield o("EBEnqueueResignCdnUrlRequests").enqueueResignCdnUrl(a,N,s);return M.success?(s==null||s.addPoint("resign_cdn_url_gql_restore_end"),R().INFO(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL succeeded"]))),o("WAResultOrError").makeResult(M.value)):(R().MUSTFIX(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL failed: ",""])),M.error),s==null||s.addPoint("resign_cdn_url_gql_restore_fail"),M)}),I.apply(this,arguments)}function T(e,t){var n=[];for(var r in e)e[r]instanceof Object?t[r]instanceof Object?n.push.apply(n,T(e[r],t[r])):n.push(r):e[r]!==t[r]&&n.push(r);return n}function D(e){return x.apply(this,arguments)}function x(){return x=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.chatJid,n=e.deliveryObjectId,r=e.externalId,a=e.mediaDownloadFlow,i=e.mediaKey,l=e.mediaType,s=e.sortOrderMs,u=yield o("EBMinosCheckWasmFeatureSupport").checkWasFeatureSupportAndQE(),c=null,d=null;if(u){var m=yield o("EBMinosWasmDeriveAttachmentTokenPrimaryKey").deriveAttachmentTokenPrimaryKeySecret(i);m.success?(c=o("Base64Utils").fromArrayBuffer(m.value.accessToken),d=o("Base64Utils").fromArrayBuffer(m.value.primaryKey)):R().WARN(b||(b=babelHelpers.taggedTemplateLiteralLoose(["",""])),m.error)}var p={accessTokenSecret:c,chatJid:t,deliveryObjectId:n,externalId:r,mediaDownloadFlow:a,mediaType:l,primaryKeySecret:d,sortOrderMs:s},_=yield N(p);if(_==null)return $(p);var f=yield w({deliveryObjectId:n,mediaDownloadFlow:a,payload:_});return f.success?f:$(p)}),x.apply(this,arguments)}function $(e){return P.apply(this,arguments)}function P(){return P=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t;(t=e.mediaDownloadFlow)==null||t.addPoint("resign_cdn_url_fallback_to_ls");var n=yield M(e);return n==null?o("WAResultOrError").makeError("create-payload-failed"):w({deliveryObjectId:e.deliveryObjectId,mediaDownloadFlow:e.mediaDownloadFlow,payload:n})}),P.apply(this,arguments)}function N(t){var n=t.accessTokenSecret,a=t.chatJid,i=t.deliveryObjectId,l=t.externalId,s=t.mediaDownloadFlow,u=t.mediaType,c=t.primaryKeySecret,d=t.sortOrderMs;return s==null||s.addPoint("resign_cdn_url_gql_payload_start"),o("EBCreateResignCDNUrlPayload").createStringifiedMediaRestorePayloadFromEBDB({accessTokenSecret:n,deliveryObjectId:i,mediaType:u,messageId:l,primaryKeySecret:c,productType:o("MAWConfig").getConfig().productTypeForEBAttachments,sortOrderMs:d,threadId:o("WAJids").threadIdForChatJid(a)}).then(function(e){return e.success?(s==null||s.addPoint("resign_cdn_url_gql_payload_end"),{payload:e.value}):(s==null||s.addAnnotations({string:{payload_fail_error:e.error}}),s==null||s.addPoint("resign_cdn_url_gql_payload_fail"),null)}).catch(function(t){var n=r("getErrorSafe")(t);return R().catching(n).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to create payload"]))),s==null||s.addAnnotations({string:{payload_fail_error:n.message}}),s==null||s.addPoint("resign_cdn_url_gql_payload_fail"),null})}function M(e){var t=e.accessTokenSecret,n=e.chatJid,a=e.deliveryObjectId,l=e.externalId,c=e.mediaDownloadFlow,d=e.mediaType,m=e.primaryKeySecret,p=e.sortOrderMs;return c==null||c.addPoint("resign_cdn_url_gql_payload_start"),o("EBLS").init().then(function(e){return e.db.runInTransaction(function(e){return r("LSCreateResignCDNUrlPayloadStoredProcedure")(r("LSFactory")(e),{accessTokenSecret:t,backupEntFbid:E,deliveryObjectId:a,mediaType:d,messageId:l,primaryKeySecret:m,productType:o("MAWConfig").getConfig().productTypeForEBAttachments,sortOrder:(S||(S=o("I64"))).of_float(p),threadId:o("WAJids").threadIdForChatJid(n)})},"readwrite",void 0,void 0,i.id+":362").then(function(e){var t=e[0],n=e[1];if(t!=null)return c==null||c.addPoint("resign_cdn_url_gql_payload_end"),o("LSShape").toRecord(t);var r=n==null?{}:o("LSShape").toRecord(n);return R().MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to create payload. stored procedure: ",", error code: ",", error message: ",""])),r.stored_procedure,r.error_code,r.error_message),c==null||c.addPoint("resign_cdn_url_gql_payload_fail"),null})}).catch(function(e){var t=r("getErrorSafe")(e);return R().catching(t).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to create payload"]))),c==null||c.addAnnotations({string:{payload_fail_error:t.message}}),c==null||c.addPoint("resign_cdn_url_gql_payload_fail"),null})}function w(e){var t=e.deliveryObjectId,n=e.mediaDownloadFlow,a=e.payload;return n==null||n.addPoint("resign_cdn_url_gql_restore_start"),o("EBEnqueueResignCdnUrlRequests").enqueueResignCdnUrl(t,a,n).then(function(e){return e.success?(n==null||n.addPoint("resign_cdn_url_gql_restore_end"),R().INFO(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with GraphQL succeeded"]))),e):(R().MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with GraphQL failed: ",""])),e.error),n==null||n.addPoint("resign_cdn_url_gql_restore_fail"),e)}).catch(function(e){var t=r("getErrorSafe")(e);return R().catching(t).MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign cdn url"]))),n==null||n.addAnnotations({string:{resign_cdn_url_gql_restore_error:t.message}}),n==null||n.addPoint("resign_cdn_url_gql_restore_fail"),o("WAResultOrError").makeError("resign-cdn-url-runtime-error")})}l.DEPRECATED_eblsResignCdnUrlWithGraphQL=k,l.getPayloadMismatches=T,l.resignCdnUrlUsingEbdb=D}),98);
__d("EBMainThreadEBDBApi",["$InternalEnum","EBDB","EBDBConsistencyApi","FBLogger","LSDatabaseSingleton","WAResolvable","WormDump","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;try{yield o("EBDBConsistencyApi").startListeningDeviceRegistrations(t,o("EBDB").EBDBEnvironment.UI)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("wmi_eb").catching(n).mustfix("Error on startListeningDeviceRegistrations in UI")}finally{s.resolve(t)}}),c.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("EBDBConsistencyApi").trackOverprompting(o("EBDB").EBDBEnvironment.UI,e)}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield s.promise;yield o("EBDBConsistencyApi").addNewDevice(t,o("EBDB").EBDBEnvironment.UI,e)}),_.apply(this,arguments)}function f(){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e,t=yield o("EBDB").getEBDB();return t.dump({auto_restore_opt_out:{customFields:{optOutKey:(e=o("WormDump")).wormNonSensitiveField,optOutValue:e.wormNonSensitiveField}},device_metadata:{customFields:{backupId:e.wormNonSensitiveField,deviceRegistrationId:e.wormNonSensitiveField,pk:e.wormNonSensitiveField,taskId:e.wormNonSensitiveField}},device_state:{customFields:{deviceId:e.wormNonSensitiveField,env:e.wormNonSensitiveField}},encrypted_backups:{customFields:{authorityLevel:e.wormNonSensitiveField,backupId:e.wormNonSensitiveField,backupTenancy:e.wormNonSensitiveField,hasOtcEligibleDevices:e.wormNonSensitiveField,isUserOptedOut:e.wormNonSensitiveField,pk:e.wormNonSensitiveField}},encrypted_backups_virtual_devices:{customFields:{backupId:e.wormNonSensitiveField,creationTime:e.wormNonSensitiveField,deviceCreatedOn:e.wormNonSensitiveField,pk:e.wormNonSensitiveField,removalStatus:e.wormNonSensitiveField,requiresHsmMigration:e.wormNonSensitiveField}},experiences_shared_state:{},secure_encrypted_backups_client_state:{customFields:{authorityLevel:e.wormNonSensitiveField,backupId:e.wormNonSensitiveField,backupTenancy:e.wormNonSensitiveField,deviceId:e.wormNonSensitiveField,encryptionVersion:e.wormNonSensitiveField}},secure_encrypted_backups_epochs:{customFields:{authorityLevel:e.wormNonSensitiveField,epochId:e.wormNonSensitiveField,epochStatus:e.wormNonSensitiveField}},secure_encrypted_backups_recovery_code_status:{customFields:{pk:e.wormNonSensitiveField,recoveryCodeStatus:e.wormNonSensitiveField}}})}),g.apply(this,arguments)}var h=n("$InternalEnum")({Disabled:0,UIInconsistent:1,WorkerInconsistent:2,Consistent:3});function y(e,t){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield s.promise;o("EBDBConsistencyApi").trackConsistency(n,o("EBDB").EBDBEnvironment.UI,e,function(){var e=h.Disabled,n=o("EBDBConsistencyApi").getDeviceId();return n!=null&&t!=null?e=h.Consistent:n!=null&&t==null?e=h.WorkerInconsistent:n==null&&t!=null&&(e=h.UIInconsistent),{int:{crossEnvConsistency:e}}})}),C.apply(this,arguments)}l.startListeningDeviceRegistrations=u,l.trackOverprompting=d,l.addNewDevice=p,l.getEBDBDump=f,l.EBCrossEnvConsistencyResult=h,l.trackConsistency=y}),98);
__d("EBMainThreadEBDBApiDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("EBMainThreadEBDBApi").__setRef("EBMainThreadEBDBApiDeferred");function s(){return e.load().then(function(e){return e.startListeningDeviceRegistrations()})}function u(t){return e.load().then(function(e){return e.trackOverprompting(t)})}function c(t){return e.load().then(function(e){return e.addNewDevice(t)})}function d(){return e.load().then(function(e){return e.getEBDBDump()})}function m(t,n){return e.load().then(function(e){return e.trackConsistency(t,n)})}l.startListeningDeviceRegistrations=s,l.trackOverprompting=u,l.addNewDevice=c,l.getEBDBDump=d,l.trackConsistency=m}),98);
__d("EBMinosWriteKeyChangeAdminMessage",["EBMinosTypes","FBLogger","MAWAdminWriteUserDeviceMsgTxn","MAWBridge","MAWDbAppMeta","MAWDbThreadTxns","MAWDexieTable","MAWExternalId","MAWIndexedDb","MAWTransactionMode","MpsTypes","Promise","WAArmadilloTransportEvent.pb","WABuildMpsPayload","WADbContact","WAGlobals","WAJids","WAStanzaUtils","WebMps","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return e.appMeta.get({key:o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert}).then(function(e){var t;return(t=e==null?void 0:e.value.allowSecurityAlert)!=null?t:!1})}function c(e,t){var n=o("WAGlobals").getMyUserJid()===t;return!n&&e}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.deviceChangeType,n=t===void 0?o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED:t,a=e.epochHeadCreationTime,i=e.userJid;try{var l=o("MAWExternalId").generateExternalId(),s=o("WABuildMpsPayload").buildMpsDeviceChangeAdminMessage(i,a,o("WAStanzaUtils").toStanzaId(l),n),u={directive:null,insertionSource:o("MpsTypes").InsertionSource.Receive,message:s};yield o("WebMps").mps().saveNewMessages([u],{source:"eb-minos-device-change"}),r("FBLogger")("wmi_minos").info("Sent device change transport event for user %s with type %s",i,String(n))}catch(e){var c=r("getErrorSafe")(e);throw r("FBLogger")("wmi_minos").catching(c).mustfix("Failed to send device change transport event for user %s",i),c}}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.contactId,i=t.epochHeadCreationTime,l=o("EBMinosTypes").userFbidToUserJid(a);if(l==null)return r("FBLogger")("wmi_minos").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Invalid userJid generated in writeKeyChangeAdminMessage"]))),(s||(s=n("Promise"))).resolve();var m=yield o("MAWIndexedDb").makeMsgrTransactor({participants:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"writeKeyChangeAdminMessage",function(e){return function(){return o("MAWDbThreadTxns").getAllThreadsForUsers(e,[l])}})(),p=m.get(l),_=yield o("MAWBridge").getBridge().sendAndReceive("event","getLSDBUsersRelationships",{users:[l]});if(p==null||(p==null?void 0:p.length)===0)return(s||(s=n("Promise"))).resolve();var f=p.filter(function(e){var t=o("WAJids").switchOnMsgrChatJidType(e.jid,{group:function(){return"group"},user:function(){return"one_to_one"}});return t==="one_to_one"}),g=yield(s||(s=n("Promise"))).all([d({deviceChangeType:o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED,epochHeadCreationTime:i,userJid:l}),o("MAWIndexedDb").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READONLY,ftsBackloggedMessages:o("MAWTransactionMode").READWRITE,groupInfo:o("MAWTransactionMode").READONLY,messages:o("MAWTransactionMode").READWRITE,threads:o("MAWTransactionMode").READWRITE},"writeKeyChangeAdminMessage",function(e){return function(){return o("MAWDexieTable").dexieAll(f.map(function(t){return u(e).then(function(n){c(n,l)&&_.get(l)===o("WADbContact").TWO_WAY_CONTACT?o("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(e,l,t,"update",i):o("MAWDexieTable").dexieResolve()})}))}})()]),h=g[1];return h}),_.apply(this,arguments)}l.saveDeviceChangeTransportEvent=d,l.writeMinosKeyChangeAdminMessage=p}),98);
__d("EBMinosWriteSecureStorageAlert",["EBMinosTypes","FBLogger","MAWDbAddDeviceChangeAlertsTxn","MAWDbDeviceChangeAlerts","MAWIndexedDb","MAWTransactionMode","MAWUnsafeCoerce","Promise","WAJids","WASignalOther"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=t.contactId,i=t.epochHead,l=t.epochHeadCreationTime,u=o("WAJids").validateDeviceJid(o("EBMinosTypes").userFbidToUserJid(o("EBMinosTypes").unsafeCastToUserFbId(a)));return u==null?(r("FBLogger")("wmi_minos").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Invalid deviceJid generated in writeMinosSecureStorageAlert"]))),(s||(s=n("Promise"))).resolve()):o("MAWIndexedDb").makeMsgrTransactor({deviceChangeAlerts:o("MAWTransactionMode").READWRITE},"writeMinosSecureStorageAlert",function(e){return function(){return o("MAWDbAddDeviceChangeAlertsTxn").addDeviceChangeAlertsTxn(e,{action:o("MAWDbDeviceChangeAlerts").KEY_CHANGE,deviceJid:u,epochHead:i,identity:o("MAWUnsafeCoerce").unsafeCoerce(o("WASignalOther").toBytes(i,32)),isArchived:!1,model:"secure_storage",platform:"Meta",ts:l})}})()}l.writeMinosSecureStorageAlert=u}),98);
__d("LSEncryptedBackupsClientRestoreState",[],(function(t,n,r,o,a,i){var e=Object.freeze({RESTORE_IN_PROGRESS:1,RESTORE_COMPLETE:2});i.default=e}),66);
__d("EBSetRestoreStatusForInitialRestore",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","Promise","ReQL","WAJids","asyncToGeneratorRuntime","performanceAbsoluteNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.tables.encrypted_backups_client_restore_status).map(function(e){var t=e.threadId;return t}));return a.runInTransaction((function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var i=[],d=[];l.forEach(function(e){i.push(a.encrypted_backups_client_restore_status.delete(e))}),yield(c||(c=n("Promise"))).all(i),t.forEach(function(t){d.push(a.encrypted_backups_client_restore_status.put({lastUpdated:(u||(u=o("I64"))).of_float((e||(e=r("performanceAbsoluteNow")))()),restoreStatus:(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS),threadId:o("WAJids").threadIdForChatJid(t)}))}),yield c.all(d)});return function(e){return a.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":37")}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.encrypted_backups_client_restore_status).map(function(e){var t=e.threadId;return t}));return e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var r=[];t.forEach(function(t){r.push(e.encrypted_backups_client_restore_status.delete(t))}),yield(c||(c=n("Promise"))).all(r)});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":75")}),_.apply(this,arguments)}l.setRestoreStatusForInitialRestore=d,l.resetClientRestoreStatus=p}),98);
__d("LSDataTraceCheckPoint",[],(function(t,n,r,o,a,i){var e=Object.freeze({CLIENT_DB_OUTBOUND:1,CLIENT_NETWORK_OUTBOUND:2,CLIENT_NETWORK_INBOUND:10,CLIENT_DB_INBOUND:11,CLIENT_EVALUATE_DASM:12,CLIENT_APP_STATE_CHANGE:13,CLIENT_CREATE_TASK:20,CLIENT_RECIPIENT_PRESENCE:21,CLIENT_EVALUATE_DASM_BEGIN:22,MQTT_PUBLISH:30,MQTT_PUBLISH_ACK:31,MQTT_DISCONNECTED:32,MQTT_CONNECTING:33,MQTT_CONNECTED:34,MQTT_CONNECTION_ACKED:35,TINCAN_RECEIVE_MESSAGE:36,TINCAN_RECEIVE_DECRYPTION_COMPLETE:37,TINCAN_RECEIVE_DECRYPTION_FAILED:38,TINCAN_RECEIVE_DR_QUEUED:39,TINCAN_RECEIVE_DR_SENT_TO_NETWORK:40,TINCAN_RECEIVE_DR_PUBLISH_TO_MQTT:41,TINCAN_RECEIVE_DRMQTT_PUBACK:42,TINCAN_RECEIVE_BOUNCE_TASK_QUEUED:43,TINCAN_RECEIVE_BOUNCE_TASK_SENT_TO_NETWORK:44,TINCAN_RECEIVE_BOUNCE_TASK_PUBLISH_TO_MQTT:45,RICH_MEDIA_DOWNLOAD_START:50,RICH_MEDIA_DOWNLOAD_END:51,RICH_MEDIA_DOWNLOAD_ERROR:52,RICH_MEDIA_UPLOAD_START:53,ARMADILLO_ACT:60,ARMADILLO_ACT_TASK_PICK:61,ARMADILLO_ACT_SERIALIZE:62,ARMADILLO_ACT_GROUP_SEND:63,ARMADILLO_ACT_SEND_FAILURE:64,ARMADILLO_ACT_MESSAGE_SEND:65,NETWORK_DISCONNECTED:70,NETWORK_CONNECTED:71,NETWORK_UNKNOWN:72,FLOW_CREAT:80,FLOW_END:81,FLOW_INTERRUPTED:82,FLOW_CONNECT_ID:83,FLOW_END_AND_FLUSH:84,FLOW_END_FOR_FAILURE:85,TRACE_CREATED:98,CLIENT_READY_TO_FLUSH:99,PENDING_DELTA:100,NO_PENDING_DELTA:101,INIT_SYNC:102,RESNAPSHOT:103,CATCH_UP:104,PERIODIC_SYNC:105,CATCH_UP_FROM_REVISION:106,RESNAPSHOT_CONTINUE:107,RESNAPSHOT_END:108,PERIODIC_SYNC_CONTINUE:109,PERIODIC_SYNC_END:110,CONTACT_SYNC_OPTIMISTIC:111,CONTACT_SYNC_FROM_OMNISTORE:112,CONTACT_SYNC_TAM_OPTIMISTC:113,CONTACT_SYNC_TAM_FROM_OMNISTORE:114,CONTACT_SYNC_TAM_ERROR:115,VERIFY_USER_FOR_SYNC:116,SNAPSHOT_START:117,SNAPSHOT_CONTINUE:118,SNAPSHOT_END:119,FETCH_DELTA:120,DELTA_SUMMARY:130,RECEIVE_DELIVERY_RECEIPT:200,TASK_DESERIALIZATION_ERROR:201,OPTIMISIC_MESSAGE_FAILED:202,SEND_SERVER_AUTHORITATIVE:203,THREAD_RANGE_QUERY_COMPLETE:204,THREAD_RANGE_QUERY_FAILURE:205,THREAD_POINT_QUERY_COMPLETE:206,SEND_SERVER_PARTIAL:207,MARK_AS_OPTIMISTIC_SENT:208,XMS_TRANSPORT_MESSAGE_SEND_START:300,XMS_TRANSPORT_MESSAGE_SEND_FAIL:301,SKIP_TASK_DISPATCH:900,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_START:1200,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_COMPLETE:1201,ADVANCED_CRYPTO_MEM_WA_PUBLISH:1202,ADVANCED_CRYPTO_MEM_PUBLISH_ACK:1203,ADVANCED_CRYPTO_MEM_SEND_TASK_COMPLETE:1204,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED:1205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING:1206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED:1207,ADVANCED_CRYPTO_MEM_FAILURE:1208,ADVANCED_CRYPTO_MEM_SEND_SUCCESS_WITH_RETRY:1209,ADVANCED_CRYPTO_MEM_DELIVERY_RECEIPT_RECEIVED:1210,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_START:1211,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_END:1212,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_START:1213,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_RETRYSTART:1214,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_END:1215,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_START:1216,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_END:1217,ADVANCED_CRYPTO_REGISTRATION_WCR_REGISTER:1218,ADVANCED_CRYPTO_REGISTRATION_SAVE_WA_DEVICE_ID_ERROR:1219,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_START:1220,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_END:1221,ADVANCED_CRYPTO_MEM_ENCRYPTION_BEGIN:1222,ADVANCED_CRYPTO_MEM_ENCRYPTION_END:1223,ADVANCED_CRYPTO_MEM_ENCRYPTION_DEVICE_COUNT:1224,ADVANCED_CRYPTO_DUAL_SEND:1225,ADVANCED_CRYPTO_REGISTRATION_SERVER_SUCCESS:1226,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER:1227,ADVANCED_CRYPTO_REGISTRATION_CAT_NULL:1228,ADVANCED_CRYPTO_REGISTRATION_WCR_MANAGER_NULL:1229,ADVANCED_CRYPTO_REGISTRATION_RESPONSE_NULL:1230,ADVANCED_CRYPTO_REGISTRATION_SELF_NULL:1231,ADVANCED_CRYPTO_REGISTRATION_EMPTY_DEVICE_ID:1232,ADVANCED_CRYPTO_REGISTRATIONRETRY_REGISTER_FAILURE:1233,ADVANCED_CRYPTO_GROUP_DUAL_SEND:1234,RAVEN_IMAGE_MESSAGE:1235,RAVEN_VIDEO_MESSAGE:1236,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_CAT:1237,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_NETWORK:1238,ADVANCED_CRYPTO_CAT_DISK_FETCH_CAT_INVALID:1239,ADVANCED_CRYPTO_RECONNECT_GENERIC_ERROR:1240,ADVANCED_CRYPTO_RECONNECT_CAT_INVALID:1241,ADVANCED_CRYPTO_RECONNECT_CAT_EXPIRED:1242,ADVANCED_CRYPTO_CAT_MEMORY_FETCH_NULL:1243,ADVANCED_CRYPTO_FIRST_CONNECTION_START:1244,LABYRINTH_INITIALIZE_BACKUP_SPROC:1400,LABYRINTH_INITIALIZE_BACKUP_SUCCESS_SPROC:1401,LABYRINTH_INITIALIZE_BACKUP_FAILURE:1402,LABYRINTH_CREATE_BACKUP_MAILBOX_SPROC:1403,LABYRINTH_HANDLE_CREATE_BACKUP_MAILBOX_SUCCESS_SPROC:1404,LABYRINTH_OPEN_EPOCH_SPROC:1405,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC:1406,LABYRINTH_HANDLER_OPEN_EPOCH_FAILURE_SPROC:1407,LABYRINTH_CREATE_VIRTUAL_DEVICE_SPROC:1410,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_SUCCESS_SPROC:1411,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_FAILURE_SPROC:1412,LABYRINTH_ADD_DEVICE_SPROC:1413,LABYRINTH_ADD_DEVICE_FROM_VIRTUAL_SPROC:1414,LABYRINTH_HANDOLE_WRONG_RECOVERY_CODE_SPROC:1415,LABYRINTH_HANDLE_ADD_DEVICE_SUCCESS_SPROC:1416,LABYRINTH_HANDLE_ADD_DEVICE_FAILURE_SPROC:1417,LABYRINTH_ADD_DEVICE_SPROC_ADD_DEVICE_ALREADY_PENDING:1600,LABYRINTH_ADD_DEVICE_SPROC_UPDATE_RECOVERY_DATA_TABLE_START:1601,LABYRINTH_ADD_DEVICE_SPROC_ADD_DEVICE_NO_VD_TABLE:1602,LABYRINTH_ADD_DEVICE_SPROC_GENERATE_RECOVERY_SECRETS_START:1603,LABYRINTH_ADD_DEVICE_SPROC_WRONG_RC:1604,LABYRINTH_ADD_DEVICE_SPROC_NULL_VD:1605,LABYRINTH_ADD_DEVICE_SPROC_NO_RC_STATUS_TABLE_FOUND:1606,LABYRINTH_ADD_DEVICE_SPROC_ISSUE_FETCH_VD_TASK:1607,LABYRINTH_ADD_DEVICE_SPROC_SUCCESS:1608,LABYRINTH_INITIALIZE_RESTORE_SPROC:1418,LABYRINTH_DECRYPT_THREADS_SPROC:1419,LABYRINTH_REQUEST_MESSAGES_FROM_THREADS_SPROC:1420,LABYRINTH_REQUEST_MESSAGES_FROM_RANGE_QUERY_SPROC:1421,LABYRINTH_DECRYPT_MESSAGES_SPROC:1422,LABYRINTH_DELETE_BACKUP_ON_CLIENT_SPROC:1423,LABYRINTH_DELETE_BACKUPS_SPROC:1424,LABYRINTH_HANDLE_DELETE_MAILBOX_SPROC:1425,LABYRINTH_ISSUE_DELETE_BACKUP_TASK_SPROC:1426,LABYRINTH_BACKUP_UPLOAD_BEGIN:1427,LABYRINTH_BACKUP_UPLOAD_SUCCESS_SPROC:1428,LABYRINTH_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC:1429,LABYRINTH_QR_INIT_ADD_DEVICE_SPROC:1430,LABYRINTH_QR_INIT_ADD_DEVICE_SUCCESS_SPROC:1431,LABYRINTH_QR_INIT_GET_SECRETS_SPROC:1433,LABYRINTH_QR_FINISH_ADD_PEER_DEVICE_SPROC:1434,LABYRINTH_SYNC_EPOCHS_STORED_PROCEDURE_SPROC:1436,LABYRINTH_SYNC_EPOCHS_SUCCESS_SPROC:1437,LABYRINTH_SYNC_EPOCHS_FORWARD_DERIVATION_END:1438,LABYRINTH_SYNC_EPOCHS_BACKWARD_DERIVATION_END:1439,LABYRINTH_SYNC_EPOCHS_OPEN_NEW_EPOCH:1440,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC:1441,LABYRINTH_PREPARE_OPEN_EPOCH_SUCCESS_SPROC:1442,LABYRINTH_MEB_MANAGER_ADD_DEVICE:1443,LABYRINTH_BACKUP_UPLOAD_FAIL:1450,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SPROC:1498,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SUCCESS:1499,LABYRINTH_MEDIA_BACKUP_START:1455,LABYRINTH_MEDIA_BACKUP_SUCCESS:1456,LABYRINTH_MEDIA_BACKUP_FAILURE:1458,LABYRINTH_MEDIA_RESTORE_START:1459,LABYRINTH_MEDIA_RESTORE_SUCCESS:1460,LABYRINTH_MEDIA_RESTORE_FAILURE:1462,LABYRINTH_REMOVE_VIRTUAL_DEVICE_SPROC:1484,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_SUCCESS:1485,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_FAILURE:1486,LABYRINTH_REMOVE_VIRTUAL_DEVICE_BACKUP_NOT_FOUND:1493,LABYRINTH_REMOVE_VIRTUAL_DEVICE_WRITE_TASK:1494,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_TASK_EXECUTER:1495,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_SERIALIZER:1496,LABYRINTH_BACKUP_UPLOAD_SERIALIZE:1451,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_SUCCEED:1463,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_FAIL:1464,LABYRINTH_UPDATE_BACKUP_TABLE_SPROC:1467,LABYRINTH_FETCH_BACKUP_IDS_SPROC:1468,LABYRINTH_PROCESS_BACKUP_IDS_SPROC:1487,LABYRINTH_BACKUP_STATUS_NO_INFO:1488,LABYRINTH_BACKUP_STATUS_FETCH_ERROR:1489,LABYRINTH_BACKUP_STATUS_NOT_ONBOARDED:1490,LABYRINTH_BACKUP_STATUS_ONBOARDED:1491,LABYRINTH_BACKUP_STATUS_NO_BACKUPS_PRESENT:1492,LABYRINTH_OPT_OUT_OF_BACKUP_SPROC:1469,LABYRINTH_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1470,LABYRINTH_HANDLE_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1471,LABYRINTH_FETCH_BACKUPS_METADATA_SPROC:1478,LABYRINTH_HANDLE_BACKUPS_METADATA_RESULT_SPROC:1480,LABYRINTH_RESTORE_THREADS_SUCCESS:1481,LABYRINTH_RESTORE_MESSAGES_SUCCESS:1482,LABYRINTH_POINT_QUERY_MESSAGE_RESTORE:2511,LABYRINTH_RESTORE_MESSAGE_NEWER_DIRECTION:2514,LABYRINTH_RESTORE_SURROUNDING_MESSAGES:2515,LABYRINTH_BACKUP_UPLOAD_GET_ECHO_DOC:1497,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE:1800,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_SUCCESS:1801,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_FAILURE:1802,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_CALLED:1803,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_SUCCESS:1804,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_FAILURE:1805,LABYRINTH_MEBMANAGER_ADD_DEVICE_NOTOFICATION_TRIGGERED:1806,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATE:1807,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATEFAILURE:1808,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_CALLED:1809,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_SUCCESS:1810,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_FAILURE:1811,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_CALLED:1812,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_SUCCESS:1813,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_FAILURE:1814,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_NOTIFICATION_TRIGGERRED:1815,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS:1816,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS_FAILURE:1817,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_SUCCESS:1818,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_FAILURE:1819,LABYRINTH_MEBMANAGER_WRONG_RECOVERY_CODE:1823,LABYRINTH_ENCRYPT_MESSAGE_FAIL:1828,LABYRINTH_ENCRYPT_MESSAGE_GENERATED_PAYLOAD:1824,LABYRINTH_ENCODE_DOCUMENT:1820,LABYRINTH_ENCODE_DOCUMENT_FAIL:1821,LABYRINTH_ENCODE_DOCUMENT_SUCCESS:1822,LABYRINTH_UPLOAD_CANCEL:1850,LABYRINTH_DELETE_BACKUP_ON_CLIENT_STARTING_CANCEL:1851,LABYRINTH_DELETE_BACKUP_ON_CLIENT_DID_CANCEL:1852,LABYRINTH_DELETE_BACKUP_ON_CLIENT_FAILED_CANCEL:1853,LABYRINTH_BACKUP_RETRY_DELETE_MESSAGE_BACKUP_STATUS_ENTRY:1865,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN:1881,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_GOT_MESSAGE_IDS_FROM_ACT:1882,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN_OCMF_OPE_OPERATIONS:1883,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_END_OCMF_OPE_OPERATIONS:1884,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_FETCH_MESSAGE_RANGE_ERROR:1885,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_ISSUE_COMPARATOR_TASK:1886,LABYRINTH_CLEAR_BACKUP_TABLE_ON_CLIENT:1891,LABYRINTH_CLEAR_VIRTUAL_DEVICES_TABLE_ON_CLIENT:1892,LABYRINTH_CLEAR_BACKUP_METADATA_TABLE_ON_CLIENT:1893,SAP_VESTA_FETCH_VESTA_KEY_AND_SECRET_BEGIN:2400,LABYRINTH_PLUGIN_CALLING_GENERATE_RECOVERY_CODE:2401,SAP_FESTA_FETCH_KEY_AND_SECRET_COMPLETION:2402,SAP_VESTA_CALLING_VESTA_REGISTRATION:2403,SAP_VESTA_REGISTRATION_COMPLETION:2404,LABYRINTH_PLUGIN_CALLING_CREATE_EXTRA_VIRTUAL_DEVICE:2405,SAP_VESTA_NOTIFY_SECRET_STORED_COMPLETION:2406,SAP_VESTA_NOTIFY_CLIENT_ABOUT_VESTA_REGISTRATION:2407,SAP_VESTA_CALLING_VESTA_LOGIN:2411,SAP_VESTA_LOGIN_COMPLETION:2412,LABYRINTH_PLUGIN_CALLING_ADD_DEVICE:2413,LABYRINTH_PLUGIN_CALLING_INITIALIZE_BACKUP:2416,LABYRINTH_PIN_SETUP_BEGIN:2417,LABYRINTH_PIN_SETUP_SUCCESS:2418,LABYRINTH_PIN_SETUP_FAILURE:2419,LABYRINTH_PIN_RESTORE_BEGIN:2420,LABYRINTH_PIN_RESTORE_SUCCESS:2421,LABYRINTH_PIN_RESTORE_FAILURE:2422,LABYRINTH_PLUGIN_CALLING_INITIALIZE_RESTORE:2423,LABYRINTH_FETCH_THREAD_IDS_SPROC:2500,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_SUCCESS:2501,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_FAILURE:2502,LABYRINTH_REQUEST_MESSAGES_FROM_FETCH_THREAD_IDS_SPROC:2503,LABYRINTH_REQUEST_MESSAGES_FROM_INIT_RESTORE_SPROC:2506,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_START:2512,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_END:2513,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_START:2800,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_END:2801,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_ENCRYPTION_VERSION_DATA_SPROC:2802,LABYRINTH_VERSIONING_UPSERT_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2803,LABYRINTH_VERSIONING_SYNC_ENCRYPTION_VERSION_DATA_SPROC:2804,LABYRINTH_VERSIONING_VERSION_SUPPORTED:2805,LABYRINTH_VERSIONING_SYNC_UPDATE_VERSION_DATA:2806,LABYRINTH_VERSIONING_SYNC_NO_VERSION_DATA:2807,LABYRINTH_VERSIONING_VERSION_SELECTED:2808,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2809,LABYRINTH_VERSIONING_VERSION_NOT_SUPPORTED:2810,LABYRINTH_VERSIONING_UPSERT_DEVICE_INVALID_SIGNATURE:2811,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_ISSUE_REQUEST_ASSOC_DEVICES:2821,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_NO_BACKUP:2822,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_FLOW_ALREADY_IN_PROGRES:2823,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC:2824,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_NUM_EDGES:2825,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_FROM:2826,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_TO:2827,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_SOURCE:2828,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_SOURCE_EPOCH_LOADED:2829,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DERIVE_CHAINING_KEY_PSK:2830,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_FORWARD_EDGE_ENTROPY:2831,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_SUCCESS:2832,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_FAIL:2833,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2834,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_SOURCE:2835,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_SOURCE_EPOCH_LOADED:2836,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_BACKWARD_EDGE:2837,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DECRYPTION_SUCCESS:2838,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DERIVATION_FAIL:2839,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2840,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FAILURE:2841,LABYRINTH_GET_OPEN_EPOCH_KEYS_SPROC:2842,LABYRINTH_GET_OPEN_EPOCH_KEYS_NO_EPOCHS_ON_CLIENT:2843,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_ALL_EPOCH_ANON_IDS:2844,LABYRINTH_GET_OPEN_EPOCH_KEYS_NUM_ANON_IDS:2845,LABYRINTH_GET_OPEN_EPOCHS_KEYS_EPOCH_ANON_ID_LIST_EMPTY:2846,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_KEYS_FOR_ANON_ID:2847,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NOT_FOUND:2848,LABYRINTH_SYNC_EPOCHS_SPROC_DOWNLOAD_EPOCHS_V2_WRITE_TASK:2849,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_INITIAL_EPOCH:2850,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_EPOCH_WITH_LAST_EPOCH_METADATA:2851,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_AFTER_FIRST_EPOCH:2852,LABYRINTH_OPEN_EPOCH_SPROC_FAILURE_LAST_EPOCH_NOT_FOUND:2853,LABYRINTH_OPEN_EPOCH_SPROC_ERROR:2854,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_CLOSE_LAST_EPOCH:2855,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_DERIVE_AND_STORE_EPOCH:2856,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_DERIVE_AND_STORE:2857,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_AUTHORITY:2858,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_EPOCH_ID:2859,LABYRINTH_INCLUDE_FALLBACK_KEY_DURING_ENCRYPTION:2860,LABYRINTH_DERIVE_FALLBACK_KEY:2861,LABYRINTH_FAILED_TO_INCLUDE_FALLBACK_KEY:2862,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_VALUE:2863,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NULL_VALUE:2864,LABYRINTH_MESSAGE_RESTORE_EPOCH_ANON_ID_NULL:2865,LABYRINTH_WEB_EPOCH_ROTATION_ENABLED:2866,LABYRINTH_WEB_EPOCH_ROTATION_DISABLED:2867,LABYRINTH_MOBILE_EPOCH_ROTATION_ENABLED:2868,LABYRINTH_MOBILE_EPOCH_ROTATION_DISABLED:2869,LABYRINTH_DECRYPT_MESSAGE_SPROC_SINGLE_EPOCH_KEY:2870,LABYRINTH_DECRYPT_MESSAGE_SPROC_EPOCH_NOT_FOUND_ERROR:2871,LABYRINTH_DECRYPT_MESSAGE_SPROC_MULTIPLE_EPOCHS_ERROR:2872,LABYRINTH_WEB_ECHO_MESSAGE_RESTORE_BEGIN:3600,LABYRINTH_WEB_ISSUE_RESTORE_JOB_DONE:3601,LABYRINTH_WEB_INSERT_TO_BAKCUP_MESSAGE_TABLE_DONE:3602,LABYRINTH_WEB_RESTORE_WITH_SERIALIZER_START:3603,LABYRINTH_WEB_ISSUE_RESTORE_JOB_STARTED:3604,LABYRINTH_WEB_INSERT_TO_RESTORE_PAYLOAD_CONTEXT_TABLE_DONE:3605,LABYRINTH_WEB_XMA_RESTORE_STARTED:3606,LABYRINTH_WEB_XMA_RESTORE_ENDED:3607,LABYRINTH_WEB_XMA_RESTORE_MEDIAID_NULL:3608,LABYRINTH_WEB_XMA_RESTORE_DBXMA_NULL:3609,LABYRINTH_WEB_ISSUE_MESSAGE_RANGE_QUERY:3610,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST:3700,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_BEGIN:3701,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE:3702,LABYRINTH_WEB_UPLOAD_THREAD_NOT_PRESENT:3703,LABYRINTH_WEB_UPLOAD_THREAD_PRESENT:3704,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_UNSUCCESSFUL:3705,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_SUCCESSFUL:3706,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NULL:3707,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NOT_NULL:3708,LABYRINTH_WEB_UPLOAD_GET_RECEIPT_STATUS_LIST_SUCCESSFUL:3709,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NULL:3710,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NOT_NULL:3711,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_SUCCESSFUL:3712,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_UNSUCCESSFUL:3713,LABYRINTH_WEB_UPLOAD_INVALID_MSG_TYPE_FOR_MEDIA_TYPE:3714,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_TRUE:3715,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_FALSE:3716,LABYRINTH_WEB_UPLOAD_UNSUPPORTED_MEDIA_TYPE:3717,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ID_FOUND_IN_MEDIA_MSG:3718,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ENTRY_FOR_MEDIA_ID:3719,LABYRINTH_WEB_UPLOAD_GET_REACTION_DATA_SUCCESSFUL:3720,LABYRINTH_WEB_UPLOAD_GET_QUOTE_MSG_SUCCESSFUL:3721,LABYRINTH_WEB_UPLOAD_GET_QUOTE_SENDER_NAME_SUCCESSFUL:3722,LABYRINTH_WEB_UPLOAD_FB_ID_NULL_FOR_XMA_MSG:3723,LABYRINTH_WEB_UPLOAD_GET_XMA_DATA_SUCCESSFUL:3724,LABYRINTH_WEB_UPLOAD_NO_XMA_DB_ENTRY_FOR_EXTERNAL_ID:3725,LABYRINTH_WEB_UPLOAD_ECHO_MESSAGE_CREATION_SUCCESSFUL:3726,LABYRINTH_WEB_UPLOAD_MISSING_MEDIA_DATA_FOR_MEDIA_MSG:3727,LABYRINTH_WEB_UPLOAD_INVOKE_MESSAGE_UPLOAD_SPROC:3728,LABYRINTH_WEB_UPLOAD_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3729,LABYRINTH_WEB_UPLOAD_USER_DEVICE_NOT_ENROLLED:3730,LABYRINTH_WEB_GET_BACKUP_TENANCY:3731,LABYRINTH_WEB_UPLOAD_ERROR_OCCURRED_ON_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3739,LABYRINTH_WEB_UPLOAD_XMA_NOT_FOUND_IN_IDB:3740,LABYRINTH_WEB_UPLOAD_MEDIA_NOT_FOUND_FOR_XMA_IN_IDB:3741,LABYRINTH_WEB_UPLOAD_INVALID_ECHO_MESSAGE_SERIALIZATION_RESPONSE:3742,LABYRINTH_WEB_UPLOAD_DUPLICATE_REQUEST:3743,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MSG:3744,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MEDIA:3745,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MSG_ERROR:3746,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MEDIA_ERROR:3747,LABYRINTH_WEB_UPLOAD_XMA_DATA_IS_NULL:3748,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_NOT_IN_DB:3749,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_IN_DB:3750,MQTT_STATE_DISCONNECTED_EVENT:10000001,MQTT_STATE_CONNECTED_EVENT:10000002,APP_STATEBACKGROUND:10000003,APP_STATEFOREGROUND:10000004,MQTT_STATE_CONNECTING_EVENT:10000005,GLOBAL_CONNECTIVITY_BANNER_DISPLAY:10000006,GLOBAL_CONNECTIVITY_BANNER_VANISH:10000007,SWITCH_ACCOUNT_EVENT:10000008,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED_EVENT:10001205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING_EVENT:10001206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED_EVENT:10001207});i.default=e}),66);
__d("ReQLTable",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){return l.apply(this,arguments)}function l(){return l=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield e.get.apply(e,t),o=n(r);yield e.upsert(t,o)}),l.apply(this,arguments)}i.update=e}),66);
__d("updateAndFlushLSDataTrace",["FBLogger","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","Promise","ReQLTable","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=r("requireDeferred")("LSDataTraceFlush").__setRef("updateAndFlushLSDataTrace");function d(t,a){return a==null?(u||(u=n("Promise"))).resolve():r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(t),{checkPointId:(e||(e=o("LSIntEnum"))).ofNumber(r("LSDataTraceCheckPoint").CLIENT_READY_TO_FLUSH),dataTraceId:a,syncChannel:(s||(s=o("I64"))).neg_one}).then(function(){return o("ReQLTable").update(t.data_trace_meta,[a],function(e){if(e!=null)return{contextOne:e.contextOne,contextThree:e.contextThree,contextTwo:e.contextTwo,foregroundTimestampMs:e.foregroundTimestampMs,initTimestampMs:e.initTimestampMs,predefinedId:e.predefinedId,shouldFlush:!0,traceId:e.traceId,traceType:e.traceType};throw r("FBLogger")("messenger_web").mustfixThrow('Data trace is missing, id: "%s"',a)}).then(function(){return c.load().then(function(e){return e.flush(t,a)})})})}l.default=d}),98);
__d("LSFlushDataTrace.nop",["MetaConfig","Promise","ReQL","updateAndFlushLSDataTrace"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l){return r("MetaConfig")._("62")?o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.data_trace_meta).getKeyRange(l)).then(function(t){return t!=null?r("updateAndFlushLSDataTrace")(a,l):(e||(e=n("Promise"))).resolve()}):(e||(e=n("Promise"))).resolve()};s.__nop_name__="LSFlushDataTrace",l.default=s}),98);
__d("SymmetricEncryptionCreateDecryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_data"),u=function(r,a,i){if(i.byteLength<o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes+o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLengthInBytes)return s.mustfix("cipher text is invalid"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult());var t=new Uint8Array(i),l=t.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),u=new(o("HChaCha20")).HChaCha20,c=t.slice(o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes).buffer,d=u.hChaCha20Bytes(l.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,r);return o("XPlatReactCrypto").subtleImportKey("raw",d,"AES-GCM",!1,["decrypt"]).then(function(e){return o("XPlatReactCrypto").subtleDecrypt({additionalData:a,iv:new Uint8Array(l.slice(o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},e,c)}).then(function(e){var t=o("SymmetricEncryptionPaddingUtils").stripPadding(e);return t==null&&s.mustfix("Failed to strip padding for symmetric decryption"),o("RetUtil").getNullableRetResult(t)}).catch(function(t){return o("CryptoLogger").captureError(s,t).mustfix("symmetric data decryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};l.default=u}),98);
__d("LSSymmetricEncryptionCreateDecryptedData.nop",["EBEncryptMessageTypes","SymmetricEncryptionCreateDecryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a,i,l){return r("SymmetricEncryptionCreateDecryptedData")(o("EBEncryptMessageTypes").unsafeCastToSecretKey(a),o("EBEncryptMessageTypes").unsafeCastToAAD(i),o("EBEncryptMessageTypes").unsafeCastToCiphertext(l))};e.__nop_name__="LSSymmetricEncryptionCreateDecryptedData",l.default=e}),98);
__d("isStringNullOrWhitespaceOnly",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e==null||e.trim()===""}i.default=e}),66);
__d("MAWMemoriesShareXMASnippetFbt",["fbt","isStringNullOrWhitespaceOnly"],(function(t,n,r,o,a,i,l,s){"use strict";var e=function(){return s._(/*BTDS*/"Voc\u00ea enviou uma lembran\u00e7a")},u=function(t){return r("isStringNullOrWhitespaceOnly")(t)?s._(/*BTDS*/"Esse usu\u00e1rio enviou uma lembran\u00e7a"):s._(/*BTDS*/"{user_name} enviou uma lembran\u00e7a",[s._param("user_name",t)])};l.getCurrentUserSendMemoriesShareSnippetFbt=e,l.getParticipantSendMemoriesShareSnippetFbt=u}),226);
__d("MAWPostMentionXMASnippetFbt",["fbt","isStringNullOrWhitespaceOnly"],(function(t,n,r,o,a,i,l,s){"use strict";var e=function(t){return r("isStringNullOrWhitespaceOnly")(t)?s._(/*BTDS*/"Voc\u00ea marcou este usu\u00e1rio no seu post"):s._(/*BTDS*/"Voc\u00ea marcou {user_name} no seu post",[s._param("user_name",t)])},u=function(t){return r("isStringNullOrWhitespaceOnly")(t)?s._(/*BTDS*/"Este usu\u00e1rio marcou voc\u00ea no pr\u00f3prio post"):s._(/*BTDS*/"{user_name} marcou voc\u00ea no pr\u00f3prio post",[s._param("user_name",t)])};l.getCurrentUserSendPostMentionSnippetFbt=e,l.getParticipantSendPostMentionSnippetFbt=u}),226);
__d("getMAWLocalizedBumpMsgReplySnippet",["fbt","FBLogger"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e,t,n){switch(e){case"currentUserBumpedOwnMessage":return s._(/*BTDS*/"Voc\u00ea subiu sua mensagem");case"currentUserBumpedMessage":return n!=null?s._(/*BTDS*/"Voc\u00ea subiu a mensagem de {name}",[s._param("name",n)]):s._(/*BTDS*/"Voc\u00ea subiu uma mensagem");case"participantBumpedCurrentUserMessage":return s._(/*BTDS*/"{sender_name} subiu sua mensagem",[s._param("sender_name",t)]);case"participantBumpedOwnMessage":return s._(/*BTDS*/"{name} subiu a pr\u00f3pria mensagem",[s._param("name",t)]);case"participantBumpedParticipantMessage":return n!=null?s._(/*BTDS*/"{sender_name} subiu a mensagem de {reply_source_sender_name}",[s._param("sender_name",t),s._param("reply_source_sender_name",n)]):s._(/*BTDS*/"{user_name} subiu uma mensagem",[s._param("user_name",t)]);default:return r("FBLogger")("messenger_web").mustfix("unexpected bump type %s",e),""}}l.default=e}),226);
__d("getMAWLocalizedFallbackMsgSnippet",["fbt","FBLogger"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){switch(e){case"userSendEncryptedMessage":return s._(/*BTDS*/"Aguardando esta mensagem. Isso pode demorar um pouco.");case"currentUserSendUnrenderableMessage":return s._(/*BTDS*/"Voc\u00ea enviou uma mensagem, mas este navegador n\u00e3o pode exibi-la.");case"participantSendUnrenderableMessage":return s._(/*BTDS*/"Voc\u00ea recebeu uma mensagem, mas este navegador n\u00e3o pode exibi-la.");case"currentUserSendLiveLocationFallback":return s._(/*BTDS*/"You sent a live location. Use the Messenger mobile app to see it.");case"currentUserSendLocationFallback":return s._(/*BTDS*/"Voc\u00ea enviou uma localiza\u00e7\u00e3o fixada. Use o app para celular do Messenger para ver.");case"participantSendLiveLocation":return s._(/*BTDS*/"You received a live location. Use the Messenger mobile app to see it.");case"participantSendLocation":return s._(/*BTDS*/"Voc\u00ea recebeu uma localiza\u00e7\u00e3o fixada. Use o app para celular do Messenger para ver.");case"currentUserSendPollCreationFallback":return s._(/*BTDS*/"Voc\u00ea enviou uma enquete. Use o app para celular do Messenger para ver.");case"participantSendPollCreation":return s._(/*BTDS*/"Voc\u00ea recebeu uma enquete. Use o app para celular do Messenger para ver.");case"currentUserSendContactShareFallback":return s._(/*BTDS*/"Voc\u00ea enviou um cart\u00e3o de contato. Use o app para celular do Messenger para ver.");case"participantSendContactShareFallback":return s._(/*BTDS*/"Voc\u00ea recebeu um cart\u00e3o de contato. Use o app para celular do Messenger para ver.");case"currentUserSendStoryMentionFallback":return s._(/*BTDS*/"Voc\u00ea enviou uma men\u00e7\u00e3o em um story. Use o app para celular do Messenger para ver.");case"participantSendStoryMentionFallback":return s._(/*BTDS*/"Voc\u00ea recebeu uma men\u00e7\u00e3o fixada. Use o app para celular do Messenger para ver.");case"currentUserSendPostMentionFallback":return s._(/*BTDS*/"Voc\u00ea enviou uma men\u00e7\u00e3o em uma publica\u00e7\u00e3o. Para ver, use o app do Messenger para celular.");case"participantSendPostMentionFallback":return s._(/*BTDS*/"Voc\u00ea recebeu uma men\u00e7\u00e3o em uma publica\u00e7\u00e3o. Para ver, use o app do Messenger para celular.");case"currentUserSendNoteMentionFallback":return s._(/*BTDS*/"Voc\u00ea mencionou algu\u00e9m na sua nota. Use o app para celular do Messenger para ver.");case"participantSendNoteMentionFallback":return s._(/*BTDS*/"Algu\u00e9m mencionou voc\u00ea em uma nota. Use o app para celular do Messenger para ver.");case"messengerMemoryEncryptedMessageFallback":return s._(/*BTDS*/"Para ver esta lembran\u00e7a, abra o app do Messenger no seu smartphone.");case"metaAISendMessageFallback":return s._(/*BTDS*/"Voc\u00ea recebeu uma mensagem da Meta AI. Use o app para celular do Messenger para ver.");case"currentUserSendBumpMessageFallback":return s._(/*BTDS*/"Voc\u00ea enviou uma mensagem que subiu. Use o app para celular do Messenger para ver.");case"participantSendBumpMessageFallback":return s._(/*BTDS*/"Voc\u00ea recebeu uma mensagem que subiu. Use o app para celular do Messenger para ver.");case"participantSendStickerReceiverFetchMessageFallback":return s._(/*BTDS*/"Voc\u00ea recebeu uma figurinha. Use o app para celular do Messenger para ver.");case"currentUserSendStickerReceiverFetchMessageFallback":return s._(/*BTDS*/"Voc\u00ea enviou uma figurinha. Use o app para celular do Messenger para ver.");case"userSendUnavailableMessage":return s._(/*BTDS*/"Mensagem enviada antes deste dispositivo ser adicionado a essa conversa. Essa mensagem n\u00e3o pode ser entregue.");case"participantSendBumpMessageOriginalUnavailable":return s._(/*BTDS*/"Mensagem indispon\u00edvel.");case"unavailableStory":return s._(/*BTDS*/"Story unavailable");case"viewOncePhotoMessageFallback":return s._(/*BTDS*/"Essa foto s\u00f3 pode ser visualizada uma vez. Use o app para celular para visualiz\u00e1-la.");case"viewOnceVideoMessageFallback":return s._(/*BTDS*/"Esse v\u00eddeo s\u00f3 pode ser visualizado uma vez. Use o app para celular para visualiz\u00e1-lo.");case"rtcXMAMessageFallback":return s._(/*BTDS*/"Para ver essa mensagem de notifica\u00e7\u00e3o de liga\u00e7\u00e3o, abra o app do Messenger no seu smartphone.");default:return r("FBLogger")("messenger_web").mustfix("unexpected content fallback type %s",e),""}}l.default=e}),226);
__d("MAWAdminMsg",["fbt","MAWLocalizationType","MAWMemoriesShareXMASnippetFbt","MAWPostMentionXMASnippetFbt","getMAWLocalizedBumpMsgReplySnippet","getMAWLocalizedFallbackMsgSnippet"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e,t,n){switch(n){case o("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET:return"";case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP:return s._(/*BTDS*/"Voc\u00ea criou este grupo").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP:return s._(/*BTDS*/"{actor} criou este grupo",[s._param("actor",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP:return s._(/*BTDS*/"Esse grupo foi criado.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:return s._(/*BTDS*/"Voc\u00ea nomeou o grupo de {custom group name}.",[s._param("custom group name",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:return s._(/*BTDS*/"O nome do grupo foi definido como {custom group name}.",[s._param("custom group name",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:return s._(/*BTDS*/"{actor} nomeou o grupo de {custom group name}.",[s._param("actor",t[0]),s._param("custom group name",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:return s._(/*BTDS*/"Voc\u00ea adicionou um novo dispositivo a esta conversa.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:return s._(/*BTDS*/"{actor} adicionou um novo dispositivo a esta conversa.",[s._param("actor",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:return s._(/*BTDS*/"Voc\u00ea removeu um dispositivo desta conversa.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:return s._(/*BTDS*/"{actor} removeu um dispositivo desta conversa.",[s._param("actor",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:return s._(/*BTDS*/"Sua chave foi alterada.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return s._(/*BTDS*/"A chave de {user_name} foi alterada.",[s._param("user_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:return s._(/*BTDS*/"Algu\u00e9m adicionou {user_name} ao grupo. Essa pessoa s\u00f3 poder\u00e1 ver as mensagens enviadas depois que for adicionada.",[s._param("user_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:return s._(/*BTDS*/"Voc\u00ea adicionou {user_name_1} e {user_name_2} ao grupo. Eles(as) s\u00f3 poder\u00e3o ver as mensagens enviadas depois que forem adicionados(as).",[s._param("user_name_1",t[0]),s._param("user_name_2",t[1])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:return s._(/*BTDS*/"Voc\u00ea adicionou {user_name} e outros {number of participants} participantes ao grupo. Eles s\u00f3 poder\u00e3o ver as mensagens enviadas depois que forem adicionados.",[s._param("user_name",t[0]),s._param("number of participants",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:return s._(/*BTDS*/"_j{\"*\":\"{actor} adicionou voc\\u00ea ao grupo. Voc\\u00ea s\\u00f3 poder\\u00e1 ver as mensagens enviadas depois que for adicionado(a).\",\"1\":\"{actor} adicionou voc\\u00ea ao grupo. Voc\\u00ea s\\u00f3 poder\\u00e1 ver as mensagens enviadas depois que for adicionado.\",\"2\":\"{actor} adicionou voc\\u00ea ao grupo. Voc\\u00ea s\\u00f3 poder\\u00e1 ver as mensagens enviadas depois que for adicionada.\",\"__vcg\":1}",[s._param("actor",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:return s._(/*BTDS*/"{actor} adicionou voc\u00ea e {user_name} ao grupo. Voc\u00eas s\u00f3 poder\u00e3o ver as mensagens enviadas depois que forem adicionados.",[s._param("actor",t[0]),s._param("user_name",t[1])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:return s._(/*BTDS*/"{actor} adicionou voc\u00ea e outros {number of participants} participantes ao grupo. Voc\u00eas s\u00f3 poder\u00e3o ver as mensagens enviadas depois que forem adicionados.",[s._param("actor",t[0]),s._param("number of participants",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:return s._(/*BTDS*/"{actor} adicionou {user_name} ao grupo. Ele(a) s\u00f3 poder\u00e1 ver as mensagens enviadas depois que for adicionado(a).",[s._param("actor",t[0]),s._param("user_name",t[1])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:return s._(/*BTDS*/"{actor} adicionou {user_name_1} e {user_name_2} ao grupo. Eles(as) s\u00f3 ver\u00e3o as mensagens enviadas depois que forem adicionados(as).",[s._param("actor",t[0]),s._param("user_name_1",t[1]),s._param("user_name_2",t[2])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:return s._(/*BTDS*/"{actor} adicionou {user_name_1} e outros {number of participants} participantes ao grupo. Eles s\u00f3 poder\u00e3o ver as mensagens enviadas depois que forem adicionados.",[s._param("actor",t[0]),s._param("user_name_1",t[1]),s._param("number of participants",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:return s._(/*BTDS*/"Voc\u00ea removeu {user_name} do grupo.",[s._param("user_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:return s._(/*BTDS*/"{user_name_1} removeu voc\u00ea do grupo.",[s._param("user_name_1",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:return s._(/*BTDS*/"{user_name_1} removeu {user_name_2} do grupo.",[s._param("user_name_1",t[0]),s._param("user_name_2",t[1])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:return s._(/*BTDS*/"{name} saiu do grupo.",[s._param("name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP:return s._(/*BTDS*/"Voc\u00ea saiu do grupo.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:return s._(/*BTDS*/"{user_name} agora \u00e9 administrador(a).",[s._param("user_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:return s._(/*BTDS*/"{user_name} n\u00e3o administra mais.",[s._param("user_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED:return s._(/*BTDS*/"_j{\"*\":\"Agora voc\\u00ea \\u00e9 um(a) administrador(a).\",\"1\":\"Agora voc\\u00ea \\u00e9 um administrador.\",\"2\":\"Agora voc\\u00ea \\u00e9 uma administradora.\",\"__vcg\":1}").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED:return s._(/*BTDS*/"Voc\u00ea n\u00e3o \u00e9 mais um(a) administrador(a).").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:return s._(/*BTDS*/"{actor} adicionou voc\u00ea como administrador do grupo.",[s._param("actor",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:return s._(/*BTDS*/"{actor} removeu voc\u00ea da fun\u00e7\u00e3o de administrador do grupo.",[s._param("actor",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:return s._(/*BTDS*/"{actor} adicionou {target} \u00e0 fun\u00e7\u00e3o de administrador do grupo.",[s._param("actor",t[0]),s._param("target",t[1])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:return s._(/*BTDS*/"{actor} removeu {target} da fun\u00e7\u00e3o de administrador do grupo.",[s._param("actor",t[0]),s._param("target",t[1])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:return s._(/*BTDS*/"Voc\u00ea removeu {target} da fun\u00e7\u00e3o de administrador do grupo.",[s._param("target",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:return s._(/*BTDS*/"Voc\u00ea adicionou {target} \u00e0 fun\u00e7\u00e3o de administrador do grupo.",[s._param("target",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:return s._(/*BTDS*/"{actor} se removeu da fun\u00e7\u00e3o de administrador do grupo.",[s._param("actor",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED:return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea se removeu da fun\\u00e7\\u00e3o de administrador do grupo.\",\"2\":\"Voc\\u00ea se removeu da fun\\u00e7\\u00e3o de administradora do grupo.\",\"__vcg\":1}").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:return s._(/*BTDS*/"Voc\u00ea").toString()+": "+e[0];case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT:return e[0];case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:return t[0]+": "+e[0];case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:return s._(/*BTDS*/"Voc\u00ea enviou uma foto.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:return s._(/*BTDS*/"Voc\u00ea enviou um v\u00eddeo.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_AUDIO:return s._(/*BTDS*/"Voc\u00ea enviou uma mensagem de voz.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:return s._(/*BTDS*/"Voc\u00ea enviou um GIF.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER:return s._(/*BTDS*/"Voc\u00ea enviou uma figurinha.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:return s._(/*BTDS*/"Voc\u00ea enviou um anexo.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:return s._(/*BTDS*/"You sent a post").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL:return s._(/*BTDS*/"Voc\u00ea enviou um reel").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:return s._(/*BTDS*/"Voc\u00ea enviou um story.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_AI_CONTACT_SHARE:return s._(/*BTDS*/"Voc\u00ea enviou um cart\u00e3o de contato.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT:return s._(/*BTDS*/"Voc\u00ea enviou um evento.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT:return s._(/*BTDS*/"You sent a story highlight").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG:return s._(/*BTDS*/"You mentioned \u0040{user} in your story.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG:return s._(/*BTDS*/"Mencionou voc\u00ea no pr\u00f3prio story").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION:return s._(/*BTDS*/"Voc\u00ea mencionou esse usu\u00e1rio no seu story").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION:return s._(/*BTDS*/"{user} mencionou voc\u00ea no pr\u00f3prio story",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE:return s._(/*BTDS*/"{user} enviou uma foto.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO:return s._(/*BTDS*/"{user} enviou um v\u00eddeo.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO:return s._(/*BTDS*/"{user} enviou uma mensagem de voz.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF:return s._(/*BTDS*/"{user} enviou um GIF.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER:return s._(/*BTDS*/"{user} enviou uma figurinha.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST:return s._(/*BTDS*/"Sent a post").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL:return s._(/*BTDS*/"Sent a reel").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT:return s._(/*BTDS*/"{user} enviou um anexo.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POST_MENTION:return o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(t[1]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POST_MENTION:return o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(t[0]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION:return s._(/*BTDS*/"Voc\u00ea enviou uma localiza\u00e7\u00e3o.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION:return s._(/*BTDS*/"{user} enviou uma localiza\u00e7\u00e3o.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY:return s._(/*BTDS*/"{user} enviou um story.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_AI_CONTACT_SHARE:return s._(/*BTDS*/"{user} enviou um cart\u00e3o de contato.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT:return s._(/*BTDS*/"{user} enviou um evento.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT:return s._(/*BTDS*/"Sent a story highlight").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET:return s._(/*BTDS*/"Mensagem indispon\u00edvel").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.MESSAGE_UNAVAILABLE_SNIPPET:return s._(/*BTDS*/"Message unavailable").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.TWO_USERS_CONNECTED:return s._(/*BTDS*/"Agora voc\u00eas podem enviar mensagens e ligar um para o outro e ver informa\u00e7\u00f5es como o status e quando voc\u00eas leram as mensagens.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT:return s._(/*BTDS*/"Voc\u00eas agora poder\u00e3o enviar mensagens e ligar um para o outro.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.REACHABILITY_ERROR:return s._(/*BTDS*/"Essa conta n\u00e3o pode receber sua mensagem porque n\u00e3o aceita novas solicita\u00e7\u00f5es de contato de todos.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:return s._(/*BTDS*/"_j{\"*\":\"As mensagens tempor\\u00e1rias foram ativadas. Elas desaparecer\\u00e3o {number} segundos ap\\u00f3s o envio.\",\"_1\":\"As mensagens tempor\\u00e1rias foram ativadas. Elas desaparecer\\u00e3o 1 segundo ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:return s._(/*BTDS*/"_j{\"*\":\"As mensagens tempor\\u00e1rias foram ativadas. Elas desaparecer\\u00e3o {number} minutos ap\\u00f3s o envio.\",\"_1\":\"As mensagens tempor\\u00e1rias foram ativadas. Elas desaparecer\\u00e3o 1 minuto ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:return s._(/*BTDS*/"_j{\"*\":\"As mensagens tempor\\u00e1rias foram ativadas. Elas desaparecer\\u00e3o {number} horas ap\\u00f3s o envio.\",\"_1\":\"As mensagens tempor\\u00e1rias foram ativadas. Elas desaparecer\\u00e3o 1 hora ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:return s._(/*BTDS*/"_j{\"*\":\"As mensagens tempor\\u00e1rias foram ativadas. Elas desaparecer\\u00e3o {number} dias ap\\u00f3s o envio.\",\"_1\":\"As mensagens tempor\\u00e1rias foram ativadas. Elas desaparecer\\u00e3o 1 dia ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} segundos ap\\u00f3s o envio.\",\"_1\":\"Voc\\u00ea ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 segundo ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} minutos ap\\u00f3s o envio.\",\"_1\":\"Voc\\u00ea ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 minuto ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} horas ap\\u00f3s o envio.\",\"_1\":\"Voc\\u00ea ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 hora ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} dias ap\\u00f3s o envio.\",\"_1\":\"Voc\\u00ea ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 dia ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:return s._(/*BTDS*/"_j{\"*\":\"{user} ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} segundos ap\\u00f3s o envio.\",\"_1\":\"{user} ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 segundo ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number"),s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:return s._(/*BTDS*/"_j{\"*\":\"{user} ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} minutos ap\\u00f3s o envio.\",\"_1\":\"{user} ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 minuto ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number"),s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:return s._(/*BTDS*/"_j{\"*\":\"{user} ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} horas ap\\u00f3s o envio.\",\"_1\":\"{user} ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 hora ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number"),s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:return s._(/*BTDS*/"_j{\"*\":\"{user} ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} dias ap\\u00f3s o envio.\",\"_1\":\"{user} ativou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 dia ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number"),s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:return s._(/*BTDS*/"_j{\"*\":\"As mensagens tempor\\u00e1rias foram alteradas. Elas desaparecer\\u00e3o {number} segundos ap\\u00f3s o envio.\",\"_1\":\"As mensagens tempor\\u00e1rias foram alteradas. Elas desaparecer\\u00e3o 1 segundo ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:return s._(/*BTDS*/"_j{\"*\":\"As mensagens tempor\\u00e1rias foram alteradas. Elas desaparecer\\u00e3o {number} minutos ap\\u00f3s o envio.\",\"_1\":\"As mensagens tempor\\u00e1rias foram alteradas. Elas desaparecer\\u00e3o 1 minuto ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:return s._(/*BTDS*/"_j{\"*\":\"As mensagens tempor\\u00e1rias foram alteradas. Elas desaparecer\\u00e3o {number} horas ap\\u00f3s o envio.\",\"_1\":\"As mensagens tempor\\u00e1rias foram alteradas. Elas desaparecer\\u00e3o 1 hora ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:return s._(/*BTDS*/"_j{\"*\":\"As mensagens tempor\\u00e1rias foram alteradas. Elas desaparecer\\u00e3o {number} dias ap\\u00f3s o envio.\",\"_1\":\"As mensagens tempor\\u00e1rias foram alteradas. Elas desaparecer\\u00e3o 1 dia ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:return s._(/*BTDS*/"As mensagens e liga\u00e7\u00f5es novas s\u00e3o protegidas com a criptografia de ponta a ponta. Somente as pessoas que est\u00e3o na conversa podem ler, ouvir e compartilhar esse conte\u00fado.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:return s._(/*BTDS*/"Sua outra conversa foi arquivada.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:return s._(/*BTDS*/"Instagram upgraded the security of this chat. Messages and calls will be secured with end-to-end encryption.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return s._(/*BTDS*/"As mensagens anteriores podem estar no seu outro bate-papo.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE:return s._(/*BTDS*/"Um dispositivo n\u00e3o reconhecido foi detectado na sua conta. Recomendamos comparar suas chaves com seus contatos para proteger a conversa.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} segundos ap\\u00f3s o envio.\",\"_1\":\"Voc\\u00ea alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 segundo ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} minutos ap\\u00f3s o envio.\",\"_1\":\"Voc\\u00ea alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 minuto ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS:return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} horas ap\\u00f3s o envio.\",\"_1\":\"Voc\\u00ea alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 hora ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS:return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} dias ap\\u00f3s o envio.\",\"_1\":\"Voc\\u00ea alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 dia ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number")]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:return s._(/*BTDS*/"_j{\"*\":\"{user} alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} segundos ap\\u00f3s o envio.\",\"_1\":\"{user} alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 segundo ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number"),s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:return s._(/*BTDS*/"_j{\"*\":\"{user} alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} minutos ap\\u00f3s o envio.\",\"_1\":\"{user} alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 minuto ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number"),s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:return s._(/*BTDS*/"_j{\"*\":\"{user} alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} horas ap\\u00f3s o envio.\",\"_1\":\"{user} alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 hora ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number"),s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:return s._(/*BTDS*/"_j{\"*\":\"{user} alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o {number} dias ap\\u00f3s o envio.\",\"_1\":\"{user} alterou as mensagens tempor\\u00e1rias. Elas desaparecer\\u00e3o 1 dia ap\\u00f3s o envio.\"}",[s._plural(parseInt(e[0],10),"number"),s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:return s._(/*BTDS*/"As mensagens tempor\u00e1rias foram desativadas.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF:return s._(/*BTDS*/"Voc\u00ea desativou as mensagens tempor\u00e1rias.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:return s._(/*BTDS*/"{user} desativou as mensagens tempor\u00e1rias.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET:return s._(/*BTDS*/"As mensagens tempor\u00e1rias foram desativadas. Ative-as novamente para que as mensagens desapare\u00e7am 24 horas ap\u00f3s o envio.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE:return s._(/*BTDS*/"Voc\u00ea cancelou o envio de uma mensagem").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE:return s._(/*BTDS*/"{first name} cancelou o envio de uma mensagem",[s._param("first name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP:return s._(/*BTDS*/"{name} reagiu com {emoji} \u00e0 sua mensagem",[s._param("name",t[0]),s._param("emoji",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE:return s._(/*BTDS*/"Reagiu com {emoji} \u00e0 sua mensagem",[s._param("emoji",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:return s._(/*BTDS*/"Uma captura de tela foi gerada.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:return s._(/*BTDS*/"A tela atual foi gravada.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT:return s._(/*BTDS*/"Voc\u00ea fez uma captura de tela.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN:return s._(/*BTDS*/"Voc\u00ea gravou a tela.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:return s._(/*BTDS*/"{user} fez uma captura de tela.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:return s._(/*BTDS*/"{user} gravou a tela.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return s._(/*BTDS*/"As mensagens e liga\u00e7\u00f5es s\u00e3o protegidas com criptografia de ponta a ponta.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU:return s._(/*BTDS*/"Algu\u00e9m adicionou voc\u00ea ao grupo. Voc\u00eas s\u00f3 poder\u00e1 ver as mensagens enviadas depois que for adicionado.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:return s._(/*BTDS*/"Algu\u00e9m adicionou voc\u00ea e outros {user_name} ao grupo. Voc\u00eas s\u00f3 poder\u00e3o ver as mensagens enviadas depois que forem adicionados.",[s._param("user_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:return s._(/*BTDS*/"Algu\u00e9m adicionou voc\u00ea e outros {number of participants} participantes ao grupo. Voc\u00eas s\u00f3 poder\u00e3o ver as mensagens enviadas depois que forem adicionados.",[s._param("number of participants",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:return s._(/*BTDS*/"Algu\u00e9m adicionou {user_name} ao grupo. Essa pessoa s\u00f3 poder\u00e1 ver as mensagens enviadas depois que for adicionada.",[s._param("user_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:return s._(/*BTDS*/"Algu\u00e9m adicionou {user_name_1} e {user_name_2} ao grupo. Essas pessoas s\u00f3 poder\u00e3o ver as mensagens enviadas depois que forem adicionadas.",[s._param("user_name_1",t[0]),s._param("user_name_2",t[1])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:return s._(/*BTDS*/"Voc\u00ea adicionou {user_name_1} e outros {number of participants} participantes ao grupo. Eles s\u00f3 poder\u00e3o ver as mensagens enviadas depois que forem adicionados.",[s._param("user_name_1",t[0]),s._param("number of participants",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG:return e[0];case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL:{var a=t[0];return a!=null?s._(/*BTDS*/"Voc\u00ea perdeu uma liga\u00e7\u00e3o de \u00e1udio de {user_name}.",[s._param("user_name",a)]).toString():s._(/*BTDS*/"Voc\u00ea perdeu uma liga\u00e7\u00e3o de um contato.").toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL:{var i=t[0];return i!=null?s._(/*BTDS*/"{user_name} perdeu sua liga\u00e7\u00e3o de \u00e1udio.",[s._param("user_name",i)]).toString():s._(/*BTDS*/"Um contato perdeu sua liga\u00e7\u00e3o de \u00e1udio.").toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL:{var l=t[0];return l!=null?s._(/*BTDS*/"Voc\u00ea perdeu uma liga\u00e7\u00e3o de v\u00eddeo de {user_name}.",[s._param("user_name",l)]).toString():s._(/*BTDS*/"Voc\u00ea perdeu uma liga\u00e7\u00e3o de v\u00eddeo de um contato.").toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL:{var u=t[0];return u!=null?s._(/*BTDS*/"{user} perdeu sua liga\u00e7\u00e3o de v\u00eddeo.",[s._param("user",u)]).toString():s._(/*BTDS*/"Um contato perdeu seu bate-papo de v\u00eddeo.").toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED:return s._(/*BTDS*/"A liga\u00e7\u00e3o de \u00e1udio foi encerrada.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED:return s._(/*BTDS*/"A liga\u00e7\u00e3o de v\u00eddeo foi encerrada.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL:return s._(/*BTDS*/"Voc\u00ea iniciou uma liga\u00e7\u00e3o.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL:{var c=t[0];return c!=null?s._(/*BTDS*/"{user} iniciou uma liga\u00e7\u00e3o.",[s._param("user",c)]).toString():s._(/*BTDS*/"Um contato iniciou uma liga\u00e7\u00e3o.").toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL:return s._(/*BTDS*/"Voc\u00ea iniciou um bate-papo de v\u00eddeo.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL:{var d=t[0];return d!=null?s._(/*BTDS*/"{user} iniciou um bate-papo de v\u00eddeo",[s._param("user",d)]).toString():s._(/*BTDS*/"Um contato iniciou um bate-papo de v\u00eddeo.").toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:return s._(/*BTDS*/"Voc\u00ea definiu a rea\u00e7\u00e3o r\u00e1pida como {emoji}.",[s._param("emoji",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:return s._(/*BTDS*/"{participant_name} definiu a rea\u00e7\u00e3o r\u00e1pida como um {emoji}.",[s._param("participant_name",t[0]),s._param("emoji",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:return s._(/*BTDS*/"Voc\u00ea definiu o apelido para {participant_name} como {nickname}.",[s._param("participant_name",t[0]),s._param("nickname",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:return e[1]!=null?s._(/*BTDS*/"Voc\u00ea alterou o tema para {theme_name} {theme_emoji}.",[s._param("theme_name",e[0]),s._param("theme_emoji",e[1])]).toString():s._(/*BTDS*/"Voc\u00ea alterou o tema para {theme_name}.",[s._param("theme_name",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:return e[1]!=null?s._(/*BTDS*/"Voc\u00ea alterou o tema usando IA para \"{theme_name}\" {theme_emoji}.",[s._param("theme_name",e[0]),s._param("theme_emoji",e[1])]).toString():s._(/*BTDS*/"Voc\u00ea alterou o tema usando IA para \"{theme_name}\".",[s._param("theme_name",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:return s._(/*BTDS*/"You changed the group photo.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:return s._(/*BTDS*/"Voc\u00ea fixou uma mensagem.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:return s._(/*BTDS*/"Voc\u00ea desafixou uma mensagem.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return s._(/*BTDS*/"Voc\u00ea est\u00e1 enviando mensagens para {participant_name} pela primeira vez. Se voc\u00ea se sentir desconfort\u00e1vel, \u00e9 poss\u00edvel",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:return s._(/*BTDS*/"{participant_name_1} definiu o apelido para {participant_name_2} como {nickname}.",[s._param("participant_name_1",t[0]),s._param("participant_name_2",t[1]),s._param("nickname",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:return s._(/*BTDS*/"{participant_name_1} apagou o apelido de {participant_name_2}.",[s._param("participant_name_1",t[0]),s._param("participant_name_2",t[1])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:return e[1]!=null?s._(/*BTDS*/"{participant_name} alterou o tema para {theme_name} {theme_emoji}.",[s._param("participant_name",t[0]),s._param("theme_name",e[0]),s._param("theme_emoji",e[1])]).toString():s._(/*BTDS*/"{participant_name} alterou o tema para {theme_name}.",[s._param("participant_name",t[0]),s._param("theme_name",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:return e[1]!=null?s._(/*BTDS*/"{participant_name} alterou o tema usando IA para \"{theme_name}\" {theme_emoji}.",[s._param("participant_name",t[0]),s._param("theme_name",e[0]),s._param("theme_emoji",e[1])]).toString():s._(/*BTDS*/"{participant_name} alterou o tema usando IA para \"{theme_name}\".",[s._param("participant_name",t[0]),s._param("theme_name",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:return s._(/*BTDS*/"Voc\u00ea criou uma enquete: {poll_name}.",[s._param("poll_name",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:return s._(/*BTDS*/"{participant_name} criou uma enquete: {poll_name}.",[s._param("participant_name",t[0]),s._param("poll_name",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:return s._(/*BTDS*/"{participant_name} adicionou a op\u00e7\u00e3o \"{poll_option}\" \u00e0 enquete.",[s._param("participant_name",t[0]),s._param("poll_option",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:return s._(/*BTDS*/"{participant_name} votou em \"{poll_option}\" na enquete.",[s._param("participant_name",t[0]),s._param("poll_option",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:return s._(/*BTDS*/"Voc\u00ea adicionou a op\u00e7\u00e3o \"{poll_option}\" \u00e0 enquete.",[s._param("poll_option",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:return s._(/*BTDS*/"Voc\u00ea votou em \"{poll_option}\" na enquete.",[s._param("poll_option",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:{var m=parseInt(e[1],10)-1;return s._(/*BTDS*/"_j{\"*\":\"{participant_name} adicionou \\\"{poll_option}\\\" e outras {num_other_options} op\\u00e7\\u00f5es \\u00e0 enquete.\",\"_1\":\"{participant_name} adicionou \\\"{poll_option}\\\" e {num_other_options} outra op\\u00e7\\u00e3o \\u00e0 enquete.\"}",[s._plural(m),s._param("participant_name",t[0]),s._param("poll_option",e[0]),s._param("num_other_options",m)]).toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:{var p=parseInt(e[1],10)-1;return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea adicionou \\\"{poll_option}\\\" e outras {num_other_options} op\\u00e7\\u00f5es \\u00e0 enquete.\",\"_1\":\"Voc\\u00ea adicionou \\\"{poll_option}\\\" e {num_other_options} outra op\\u00e7\\u00e3o \\u00e0 enquete.\"}",[s._plural(p),s._param("poll_option",e[0]),s._param("num_other_options",p)]).toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:{var _=parseInt(e[1],10)-1;return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea votou nem \\\"{poll_option}\\\" e em outras {num_other_votes} op\\u00e7\\u00f5es na enquete.\",\"_1\":\"Voc\\u00ea votou em \\\"{poll_option}\\\" e em {num_other_votes} outra op\\u00e7\\u00e3o na enquete.\"}",[s._plural(_),s._param("poll_option",e[0]),s._param("num_other_votes",_)]).toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:{var f=parseInt(e[1],10)-1;return s._(/*BTDS*/"_j{\"*\":\"{participant_name} votou em \\\"{poll_option}\\\" e em outras {num_other_votes} op\\u00e7\\u00f5es na enquete.\",\"_1\":\"{participant_name} votou em \\\"{poll_option}\\\" e em {num_other_votes} outra op\\u00e7\\u00e3o na enquete.\"}",[s._plural(f),s._param("participant_name",t[0]),s._param("poll_option",e[0]),s._param("num_other_votes",f)]).toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:{var g=parseInt(e[1],10)-1;return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea removeu seu voto em \\\"{poll_option}\\\" e em outras {num_other_removed_votes} op\\u00e7\\u00f5es na enquete.\",\"_1\":\"Voc\\u00ea removeu seu voto em \\\"{poll_option}\\\" e em {num_other_removed_votes} outra op\\u00e7\\u00e3o na enquete.\"}",[s._plural(g),s._param("poll_option",e[0]),s._param("num_other_removed_votes",g)]).toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:{var h=parseInt(e[1],10)-1;return s._(/*BTDS*/"_j{\"*\":\"{participant_name} removeu o voto em \\\"{poll_option}\\\" e em outras {num_other_removed_votes} op\\u00e7\\u00f5es na enquete.\",\"_1\":\"{participant_name} removeu o voto em \\\"{poll_option}\\\" e em {num_other_removed_votes}outra op\\u00e7\\u00e3o na enquete.\"}",[s._plural(h),s._param("participant_name",t[0]),s._param("poll_option",e[0]),s._param("num_other_removed_votes",h)]).toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:return s._(/*BTDS*/"Voc\u00ea removeu seu voto em \"{poll_option}\" na enquete.",[s._param("poll_option",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:return s._(/*BTDS*/"{participant_name} removeu o voto em \"{poll_option}\" na enquete.",[s._param("participant_name",t[0]),s._param("poll_option",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:return s._(/*BTDS*/"A enquete de {participant_name} tem v\u00e1rias atualiza\u00e7\u00f5es.",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:return s._(/*BTDS*/"Sua enquete tem v\u00e1rias atualiza\u00e7\u00f5es.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:return s._(/*BTDS*/"Voc\u00ea alterou seu voto para \"{poll_option}\" na enquete.",[s._param("poll_option",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:return s._(/*BTDS*/"{participant_name} alterou o voto para \"{poll_option}\" na enquete.",[s._param("participant_name",t[0]),s._param("poll_option",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:{var y=parseInt(e[1],10)-1;return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea alterou seu voto para \\\"{poll_option}\\\" e outras {num_other_changed_votes} op\\u00e7\\u00f5es na enquete.\",\"_1\":\"Voc\\u00ea alterou seu voto para \\\"{poll_option}\\\" e {num_other_changed_votes} outra op\\u00e7\\u00e3o na enquete.\"}",[s._plural(y),s._param("poll_option",e[0]),s._param("num_other_changed_votes",y)]).toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:{var C=parseInt(e[1],10)-1;return s._(/*BTDS*/"_j{\"*\":\"{participant_name} alterou o voto para \\\"{poll_option}\\\" e outras {num_other_changed_votes} op\\u00e7\\u00f5es na enquete.\",\"_1\":\"{participant_name} alterou o voto para \\\"{poll_option}\\\" e {num_other_changed_votes} outra op\\u00e7\\u00e3o na enquete.\"}",[s._plural(C),s._param("participant_name",t[0]),s._param("poll_option",e[0]),s._param("num_other_changed_votes",C)]).toString()}case o("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:return s._(/*BTDS*/"O envio de uma enquete foi cancelado.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:return s._(/*BTDS*/"{participant_name} changed the group photo.",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:return s._(/*BTDS*/"{participant_name} fixou uma mensagem.",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return s._(/*BTDS*/"{participant_name} desafixou uma mensagem.",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:return s._(/*BTDS*/"{participant_name} definiu seu apelido como {nickname}.",[s._param("participant_name",t[0]),s._param("nickname",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:return s._(/*BTDS*/"Voc\u00ea definiu seu apelido como {nickname}.",[s._param("nickname",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:return s._(/*BTDS*/"Voc\u00ea apagou seu apelido.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:return s._(/*BTDS*/"Voc\u00ea apagou o apelido de {participant_name}.",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:return s._(/*BTDS*/"{participant_name} definiu o pr\u00f3prio apelido como {nickname}.",[s._param("participant_name",t[0]),s._param("nickname",e[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:return s._(/*BTDS*/"{participant_name} apagou o pr\u00f3prio apelido.",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:return s._(/*BTDS*/"{participant_name} apagou seu apelido.",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:return s._(/*BTDS*/"Voc\u00ea alterou para \"apenas administradores\" quem pode adicionar pessoas.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:return s._(/*BTDS*/"Voc\u00ea alterou para \"todos os membros\" quem pode adicionar pessoas.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:return s._(/*BTDS*/"{participant_name} alterou para \"apenas administradores\" quem pode adicionar pessoas.",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:return s._(/*BTDS*/"{participant_name} alterou para \"todos os membros\" quem pode adicionar pessoas.",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY:return s._(/*BTDS*/"Um administrador do bate-papo alterou para \"todos os membros\" quem pode adicionar pessoas.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS:return s._(/*BTDS*/"Um administrador do bate-papo alterou para \"apenas administradores\" quem pode adicionar pessoas.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return s._(/*BTDS*/"Sua outra conversa com {user} foi arquivada.",[s._param("user",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:return s._(/*BTDS*/"_j{\"*\":\"Sua outra conversa consigo mesmo(a) foi arquivada.\",\"1\":\"Sua outra conversa consigo mesmo foi arquivada.\",\"2\":\"Sua outra conversa consigo mesma foi arquivada.\",\"__vcg\":1}").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return s._(/*BTDS*/"Sua outra conversa com essa pessoa foi arquivada.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE:return r("getMAWLocalizedBumpMsgReplySnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE,null,null).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:return r("getMAWLocalizedBumpMsgReplySnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,null,t[0]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:return r("getMAWLocalizedBumpMsgReplySnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,t[0],null).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:return r("getMAWLocalizedBumpMsgReplySnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,t[0],null).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:return r("getMAWLocalizedBumpMsgReplySnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE,t[0],t[1]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_MEMORIES_SHARE:return o("MAWMemoriesShareXMASnippetFbt").getCurrentUserSendMemoriesShareSnippetFbt().toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_MEMORIES_SHARE:return o("MAWMemoriesShareXMASnippetFbt").getParticipantSendMemoriesShareSnippetFbt(t[0]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.RTC_XMA_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.RTC_XMA_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:return r("getMAWLocalizedFallbackMsgSnippet")(o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:return s._(/*BTDS*/"Voc\u00ea ativou as permiss\u00f5es de compartilhamento de mensagens desta conversa. Agora todas as pessoas na conversa podem compartilhar mensagens com a Meta AI ou salvar fotos automaticamente.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:return s._(/*BTDS*/"Voc\u00ea desativou as permiss\u00f5es de compartilhamento de mensagens desta conversa.").toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:return s._(/*BTDS*/"{participant_name} ativou as permiss\u00f5es de compartilhamento de mensagens desta conversa. Agora todas as pessoas na conversa podem compartilhar mensagens com a Meta AI ou salvar fotos automaticamente.",[s._param("participant_name",t[0])]).toString();case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return s._(/*BTDS*/"{participant_name} desativou as permiss\u00f5es de compartilhamento de mensagens desta conversa.",[s._param("participant_name",t[0])]).toString();default:return""}}l.buildLocalizedString=e}),226);
__d("MAWThreadCustomizationUtils",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME||e===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME||e===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME}function s(e){return e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME}l.skipNicknameCheck=e,l.nicknameOnlyForFirstParticipantChecking=s}),98);
__d("fillArray",[],(function(t,n,r,o,a,i){function e(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n}i.default=e}),66);
__d("mapPull",[],(function(t,n,r,o,a,i){function e(e,t,n){var r=new Map;for(var o of e)r.set(n(o),t(o));return r}i.default=e}),66);
__d("MAWBridgeBuildMsgMentions",["MAWSubscribeToContactNames","MAWThreadCustomizationUtils","WACommon.pb","WAJids","emptyFunction","fillArray","mapPull"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.length>0?e.join(","):void 0}function s(e,t){return e.index-t.index}function u(e,t){return e==null||e===""?e:Array.from(t).reduce(function(e,t){var n=t[0],r=t[1],o=new RegExp(n,"g");return e.replace(o,r)},e)}function c(e,t){return e==null||e===""?[]:Array.from(t.keys()).flatMap(function(t){return Array.from(e.matchAll(t))}).sort(s)}function d(t,n,a,i,l){l===void 0&&(l=[]);var s=r("mapPull")(a,function(e){var t=e[0],r=e[1];return o("MAWSubscribeToContactNames").getContactNameFromLookup(n,t)},function(e){var t=e[0],n=e[1];return n}),d=c(t,s),m=[],p=[],_=[],f=0;for(var g of d){var h=o("WAJids").unsafeCoerceToUserJid(g[0]);m.push(o("WAJids").userIdFromJid(h));var y=o("MAWSubscribeToContactNames").getContactNameFromLookup(s,h);p.push(y.length+1),_.push(Math.max(g.index-1+f,0)),f+=y.length-h.length}var C=r("fillArray")(m.length,"p");for(var b of l){var v=b.commandType,S=b.length,R=b.offset;if(!(S==null||R==null))switch(v){case o("WACommon.pb").COMMAND_COMMAND_TYPE.EVERYONE:C.push("t"),m.push("t"),_.push(R),p.push(S);break;case o("WACommon.pb").COMMAND_COMMAND_TYPE.AI:C.push("ai"),m.push("ai"),_.push(R),p.push(S);break;case o("WACommon.pb").COMMAND_COMMAND_TYPE.AI_IMAGINE:C.push("im"),m.push("im"),_.push(R),p.push(S);break;default:break}}var L=c(i,s);for(var E of L){var k=o("WAJids").unsafeCoerceToUserJid(E[0]);m.push(o("WAJids").userIdFromJid(k))}return{mentionIds:e(m),mentionLengths:e(p),mentionOffsets:e(_),mentionTypes:e(C),replyMessageText:u(i,s),text:u(t,s)}}function m(e,t,n,r){var a=d(e,n,r),i=a.text,l=t.map(function(e){return o("MAWSubscribeToContactNames").getContactNameFromLookup(n,e)});return[i,l]}function p(e,t,n,a){var i=r("mapPull")(t,r("emptyFunction").thatReturnsArgument,o("WAJids").userIdFromJid);return d(e,i,i,n,a)}function _(e,t,n,r,a){return t&&n>0||r?a===o("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$CONTACT_FIRST_NAME("+e+")":"$CONTACT_FULL_NAME("+e+")":a===o("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$PARTICIPANT_FIRST_NAME("+e+")":"$PARTICIPANT_FULL_NAME("+e+")"}function f(e,t,n,a){var i=r("mapPull")(t!=null?t:[],r("emptyFunction").thatReturnsArgument,o("WAJids").userIdFromJid);if(i.size===0||e==null||e===""){var l=o("MAWSubscribeToContactNames").getContactNameModeFromLocalizationType(a),s=o("MAWThreadCustomizationUtils").nicknameOnlyForFirstParticipantChecking(a),u=o("MAWThreadCustomizationUtils").skipNicknameCheck(a),c=n.map(function(e,t){return _(e,s,t,u,l)});return[e,c]}var d=new Map([].concat(Array.from(i.keys()),n).map(function(e){return[e,"$PARTICIPANT_FULL_NAME("+e+")"]}));return m(e,n,d,i)}l.buildMsgTextWithMentions=p,l.buildThreadSnippetWithMentions=f}),98);
__d("MAWBridgeBuildThreadSnippet",["MAWAdminMsg","MAWBridgeBuildMsgMentions","MAWLocalizationType","MAWVault","first"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e!=null?o("MAWVault").unvault(e):void 0}function s(e,t,n){if(e==null)return t;var r=[].concat(t);switch(n){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:{r[0]=e;break}}return r}function u(e){return e.replace(/\$/g,"$$$$")}function c(t,n){var a=t.snippetContactIDs,i=t.snippetMentionJIDs,l=t.snippetParams,c=t.snippetSenderContactId,d=t.snippetType;if(l==null||d==null||a==null)return n;c!=null&&!a.includes(c)&&a.push(c);var m=e(r("first")(l)),p=o("MAWBridgeBuildMsgMentions").buildThreadSnippetWithMentions(m==null?null:u(m),i,a,d),_=p[0],f=p[1];return o("MAWAdminMsg").buildLocalizedString(s(_,l,d),f,d)}l.buildBridgeThreadSnippet=c}),98);
__d("MAWEBFrontendQPLLogger",["EBEnableUnifiedAttachment","EBUnifyLegacyMediaUpload","ExecutionEnvironment","FBLogger","MAWBridgeSafeActionsWorkerAndUI","MAWEBUploadTrackingUtils","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){e!=null&&((s||(s=r("ExecutionEnvironment"))).isInWorker?(y("point",t),o("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("point",e,t,n)):o("MAWBridgeSafeActionsWorkerAndUI").fireAndForgetBackendWorkerAndUIShared("addEbUploadTrackingWorkerQPL",{annotations:n,pointName:t,qplInstanceKey:e,qplType:"point"}))}function c(e,t){(s||(s=r("ExecutionEnvironment"))).isInWorker?(y("success","upload_tracking_completed"),o("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("success",e,"upload_tracking_completed",t)):o("MAWBridgeSafeActionsWorkerAndUI").fireAndForgetBackendWorkerAndUIShared("addEbUploadTrackingWorkerQPL",{annotations:t,pointName:"upload_tracking_completed",qplInstanceKey:e,qplType:"success"})}function d(e,t,n){(s||(s=r("ExecutionEnvironment"))).isInWorker?(y("fail",t),o("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("fail",e,t,n)):o("MAWBridgeSafeActionsWorkerAndUI").fireAndForgetBackendWorkerAndUIShared("addEbUploadTrackingWorkerQPL",{annotations:n,pointName:t,qplInstanceKey:e,qplType:"fail"})}function m(e){var t=e.deliveryObjectId,n=e.flow,a=e.mediaType,i=e.messageId,l=e.threadId,s=e.traceId;if(_(n)){var u=o("WAHashStringToNumber").hashStringToNumber(s),c={bool:{is_legacy_hardening:o("EBUnifyLegacyMediaUpload").getEnableUnifyLegacyMediaUpload(),is_unified_attachment:o("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()},string:{deliveryObjectId:t,flow:n,mediaType:a,messageId:i,threadId:l,traceId:s}};r("QPLUserFlow").start(r("qpl")._(521480391,"1167"),{annotations:c,instanceKey:u})}}function p(e,t,n,a){if(e!=null&&_(n)){var i=o("WAHashStringToNumber").hashStringToNumber(e);if(t){r("QPLUserFlow").endSuccess(r("qpl")._(521480391,"1167"),{instanceKey:i});return}r("QPLUserFlow").endFailure(r("qpl")._(521480391,"1167"),"upload_attachment_backup_failed",{annotations:{string:{error:a!=null?a:"upload_attachment_backup_failed"}},instanceKey:i})}}function _(e){return e==="unified"&&o("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()||e==="old"&&!o("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()}function f(e,t){e.forEach(function(e){if(e.uploadTrackingInstanceKey!=null){var n={string:{traceId:e.traceId}};u(e.uploadTrackingInstanceKey,t,n)}})}function g(e){return{addAnnotations:function(n){h(e,n)},addPoint:function(n,r){u(e,n,r)},endCancel:function(n,r){d(e,""+(n!=null?n:""),r)},endFail:function(n,r){d(e,n,r)},endSuccess:function(n){c(e,n)},getQPLAttrs:function(){return{instanceKey:e}},isActive:function(){return!0},start:function(){}}}function h(e,t){r("FBLogger")("EBFrontendQPLLogger").warn("addAnnotations not implemented for EB Frontend QPL")}function y(t,n){(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_FRONTEND_QPL_IN_WORKER,t+"."+n)}l.addPointEBUploadTracking=u,l.endEBUploadTracking=c,l.failEBUploadTracking=d,l.startFlowUploadAttachmentBackup=m,l.endFlowUploadAttachmentBackup=p,l.addPointForUploadMessageArray=f,l.makeEBFrontendQplFlowFromInstanceKey=g}),98);
__d("MAWUISnippetsMessagesMetadataMapObservable",["I64","ReplayLastSubject"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.value=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.next=function(n){this.value=n,e.prototype.next.call(this,n)},t})(o("ReplayLastSubject").ReplayLastSubject),u=(function(){function t(){this.$1=new Map}var n=t.prototype;return n.get=function(n){var t=(e||(e=o("I64"))).to_string(n),r=this.$1.get(t);if(r==null){var a=new s([]);return this.$1.set(t,a),a}return r},n.set=function(t,n){var e=this.get(t),r=e.value;if(r.length!==n.length){e.next(n);return}var o=r.every(function(e,t){var r=n[t];return e.externalId===r.externalId&&e.sortOrderMs===r.sortOrderMs});o||e.next(n)},t})();l.Subject=s,l.MAWUISnippetsMessagesMetadataMapObservable=u}),98);
__d("getMAWLastMessageCtaType",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL:return"xma_rtc_missed_audio";case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL:return"xma_rtc_missed_group_audio";case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL:return"xma_rtc_missed_video";case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL:return"xma_rtc_missed_group_video";case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:return"messenger_reply_reminder"}}l.default=e}),98);
__d("updateMWLSThreadSnippet",["FBLogger","I64","MAWBridgeBuildThreadSnippet","asyncToGeneratorRuntime","getMAWLastMessageCtaType"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n,a=t.thread,i=t.threadSnippet,l=t.txn,s=i.snippetParams,u=o("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet({snippetContactIDs:s.contactIDs,snippetMentionJIDs:(n=s.mentionJIDs)!=null?n:[],snippetParams:s.strings,snippetSenderContactId:i.snippetSenderContactId,snippetType:i.snippetType});u==null&&r("FBLogger")("messenger_web").warn("[updateMWLSThreadSnippet] null snippet is calculated for a thread, snippetType: %s, contactsIDs is null: %s, snippetParams is null: %s",i.snippetType,s.contactIDs==null,s.strings==null);var c=i.snippetSenderContactId!=null?(e||(e=o("I64"))).of_string(i.snippetSenderContactId):(e||(e=o("I64"))).zero,d=r("getMAWLastMessageCtaType")(i.snippetType);yield l.threads.put(babelHelpers.extends({},a,{lastMessageCtaType:d,snippet:u,snippetSenderContactId:c}))}),u.apply(this,arguments)}l.updateMWLSThreadSnippet=s}),98);
__d("MAWUISnippetsCacheService",["FBLogger","I64","LSDatabaseSingleton","MAWChatJid","MAWJids","MAWMiActGetThreadLifecycleState__DO_NOT_USE","MAWUISnippetsMessagesMetadataMapObservable","Promise","ReStoreVaulting","WAJids","asyncToGeneratorRuntime","promiseDone","updateMWLSThreadSnippet"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(function(){function t(){this.namespace="snippets",this.$1=new(o("MAWUISnippetsMessagesMetadataMapObservable")).MAWUISnippetsMessagesMetadataMapObservable}var a=t.prototype;return a.onCacheChange=function(a,l){r("promiseDone")((u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(t){return t.runInTransaction(function(t){return(e||(e=n("Promise"))).all(a.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e[0],r=e[1],a=o("WAJids").unsafeCoerceToChatJid(n),i=yield o("MAWChatJid").toThreadMaybe(t,a);if(i==null){yield m(t,a);return}var s=r.value.snippet,u=babelHelpers.extends({},s.snippetParams,{strings:s.snippetParams.strings.map(function(e){return o("ReStoreVaulting").maybeVault(e)})});return o("updateMWLSThreadSnippet").updateMWLSThreadSnippet({thread:i,threadSnippet:babelHelpers.extends({},s,{snippetParams:u}),txn:t}).then(function(){_(i.threadKey,l,r)})});return function(t){return e.apply(this,arguments)}})()))},"readwrite",void 0,void 0,i.id+":47")}))},a.getNewestIncomingMessagesMetadata=function(t){return this.$1.get(t)},t})(),d="[SnippetsCacheService][UI]";function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByJid(e,o("MAWJids").convertChatJidToIntJid(t),"MAWUISnippetsCacheService");r("FBLogger")("MAWCacheService").mustfix(d+" Missing LSDBThread when updating snippet. jid: %s, thread state: %s",t,n.type)}),p.apply(this,arguments)}function _(e,t,n){r("FBLogger")("MAWCacheService").info(d+" Updated thread snippet. threadKey: %s, source: %s, msgId: %s, reactionId: %s, ack level %s",(s||(s=o("I64"))).to_string(e),t,n.value.snippetMsgId,n.value.snippetReactionId,n.value.snippetMsgAckLevel)}var f=new c;function g(){return f}l.getMAWUISnippetsCacheService=g}),98);
__d("MAWUICacheServiceRegistry",["MAWUISnippetsCacheService"],(function(t,n,r,o,a,i,l){"use strict";var e={snippets:o("MAWUISnippetsCacheService").getMAWUISnippetsCacheService()};function s(){return e}l.getUICacheServiceRegistry=s}),98);
__d("MAWUICacheServices",["BroadcastChannelFallback","FBLogger","MAWBridgeSendAndReceive","MAWCacheServiceQPL","MAWCacheServiceUtils","MAWLoggerUtils","MAWUICacheServiceRegistry","MAWUICacheServicesBase","asyncToGeneratorRuntime","promiseDone","shallowArrayEqual"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new(o("MAWUICacheServicesBase")).MAWUICacheServicesBase(o("MAWUICacheServiceRegistry").getUICacheServiceRegistry()),this.$2=o("MAWCacheServiceUtils").getMAWCacheServiceBroadcastChannel(),this.$3()}var t=e.prototype;return t.$3=function(){var e=this,t=function(n){var t,o,a,i,l,s;if(typeof n=="object"&&n!=null&&typeof n.data=="object"&&n.data!==null&&typeof((t=n.data)==null?void 0:t.namespace)=="string"&&((o=n.data)==null?void 0:o.namespace)!==null&&typeof((a=n.data)==null?void 0:a.source)=="string"&&((i=n.data)==null?void 0:i.source)!==null&&typeof((l=n.data)==null?void 0:l.cache)=="object"&&((s=n.data)==null?void 0:s.cache)!==null&&Array.isArray(n.data.cache)){var u,c,d=n.data.namespace,m=n.data.cache,p=n.data.source,_;typeof((u=n.data)==null?void 0:u.instanceKey)=="number"&&((c=n.data)==null?void 0:c.instanceKey)!==null?(_=n.data.instanceKey,p==="realtime-update"&&r("MAWCacheServiceQPL").registerInstanceKeyInUI(_),r("MAWCacheServiceQPL").addPointQPL(_,"broadcasting_to_ui_end",p)):r("FBLogger")("MAWCacheService").info("Invalid instance key received via broadcast channel."),e.$1.updateInMemoryCacheAndTriggerCallback(d,m,p,_)}else throw r("FBLogger")("messenger_web").mustfixThrow("Invalid payload received via broadcast channel.")};this.$2==null?o("BroadcastChannelFallback").registerBroadcastChannelFallbackListener(o("MAWCacheServiceUtils").MAW_CACHE_SERVICE_BROADCAST_CHANNEL,t):this.$2.onmessage=t},t.resetInMemoryCache=function(t,n){this.$1.resetInMemoryCache(t,n)},t.checkExistingCacheOrGetFromScratchAndNotifyListenersFor=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=this,a=Array.from(new Set(t)),i=o("MAWLoggerUtils").getInstanceKey();r("MAWCacheServiceQPL").startQPL(i,e),r("MAWCacheServiceQPL").addAnnotationsQPL(i,{string:{instanceKey:i.toString()},string_array:{allKeys:r("MAWCacheServiceQPL").redactKeysForNonEmployee(a)}});var l=this.$1.checkInMemoryCacheAndTriggerCallback(e,a,i);if(l.length===0){r("FBLogger")("MAWUICacheServices").info("All keys are in memory cache. Namespace: %s",e);return}var s=yield this.$1.checkPersistedCacheAndTriggerCallback(e,l,i).catch(function(t){return r("FBLogger")("MAWCacheService").catching(t).mustfix("Failed to read from persisted cache in UI.",e),r("MAWCacheServiceQPL").addPointQPL(i,"read_from_persisted_cache_failed"),l});if(r("shallowArrayEqual")(l,s)?this.$1.QPLMetadata.set(i,"all-from-scratch"):(r("FBLogger")("MAWUICacheServices").info("Sending low priority bridge call to invalidate cache for keys: %s",l.join(", ")),r("MAWCacheServiceQPL").addPointQPL(i,"invalidating_cache"),r("MAWCacheServiceQPL").addAnnotationsQPL(i,{string_array:{keysToInvalidateCacheFor:r("MAWCacheServiceQPL").redactKeysForNonEmployee(l)}}),r("promiseDone")(o("MAWBridgeSendAndReceive").sendAndReceive("backend","computeCachePayloadFromScratch",{instanceKey:i,isLowPriority:!0,keys:l,namespace:e}).catch(function(t){r("MAWCacheServiceQPL").addPointQPL(i,"invalidating_cache_failed"),r("FBLogger")("MAWCacheService").catching(t).mustfix("Failed to invalidate potential outdated persisted cache.",e)}))),r("MAWCacheServiceQPL").addAnnotationsQPL(i,{int:{memoryHitRate:Math.floor((a.length-l.length)/a.length*100),persistedHitRate:Math.floor((l.length-s.length)/l.length*100)}}),s.length===0){r("FBLogger")("MAWUICacheServices").info("All keys are in persisted cache. Namespace: %s",e);return}r("FBLogger")("MAWUICacheServices").info("Sending bridge call to calculate cache from scratch for keys: %s",s.join(", ")),r("MAWCacheServiceQPL").addPointQPL(i,"sending_bridge_call_to_compute_from_scratch"),r("MAWCacheServiceQPL").addAnnotationsQPL(i,{string_array:{keysToBeCalculatedFromScratch:r("MAWCacheServiceQPL").redactKeysForNonEmployee(s)}}),yield o("MAWBridgeSendAndReceive").sendAndReceive("backend","computeCachePayloadFromScratch",{instanceKey:i,isLowPriority:!1,keys:s,namespace:e}).catch(function(t){r("MAWCacheServiceQPL").endFailureQPL(i,"sending_bridge_call_to_compute_from_scratch_failed"),r("MAWCacheServiceQPL").addAnnotationsQPL(i,{string:{error:t.message}}),n.$1.QPLMetadata.delete(i),r("FBLogger")("MAWCacheService").catching(t).mustfix("Failed to compute cache from scratch for",e)})});function t(t,n){return e.apply(this,arguments)}return t})(),t.getFromScratchSkippingCacheAndNotifyListenersFor=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=this,a,i=Array.from(new Set(t)),l=o("MAWLoggerUtils").getInstanceKey();(a=r("MAWCacheServiceQPL")).startQPL(l,e),a.addAnnotationsQPL(l,{string:{instanceKey:l.toString()},string_array:{allKeys:a.redactKeysForNonEmployee(i)}}),this.$1.QPLMetadata.set(l,"all-from-scratch"),a.addPointQPL(l,"sending_bridge_call_to_compute_from_scratch_skipping_cache"),yield o("MAWBridgeSendAndReceive").sendAndReceive("backend","computeCachePayloadFromScratch",{instanceKey:l,isLowPriority:!1,keys:i,namespace:e}).catch(function(t){r("MAWCacheServiceQPL").endFailureQPL(l,"sending_bridge_call_to_compute_from_scratch_failed"),r("MAWCacheServiceQPL").addAnnotationsQPL(l,{string:{error:t.message}}),n.$1.QPLMetadata.delete(l),r("FBLogger")("MAWCacheService").catching(t).mustfix("Failed to compute cache from scratch for",e)})});function t(t,n){return e.apply(this,arguments)}return t})(),e})(),s=null,u=function(){return s==null&&(s=new e),s};l.getMAWUICacheServices=u}),98);
__d("MpsOverBridge",["MAWBridgeSendAndReceive"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){this.loadMessage=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessage",e)},this.loadMessages=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessages",e)},this.batchLoadMessages=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsBatchLoadMessages",e)},this.batchLoadMessage=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsBatchLoadMessage",e)},this.debugDbDump=function(){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsDebugDbDump")},this.copMps={loadBatchMsgsIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadBatchMsgsIntoMaw",t)},loadMoreMsgsIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadMoreMsgsIntoMaw",t)},loadMsgIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadMsgIntoMaw",t)}}},s;function u(){return s==null&&(s=new e),s}l.mps=u}),98);
__d("MWEncryptedBackupsInitializeRestore",["EBGetLatestChatJids","EBSetRestoreStatusForInitialRestore","ExecutionEnvironment","FBLogger","LSRequestId","MAWBridge","MAWBridgeSendAndReceive","MAWEBRestoreTrackingUtils","MAWMpsGating","MAWUICacheServices","MpsOverBridge","MpsTypes","Promise","asyncToGeneratorRuntime","getErrorSafe","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=20;function d(e){var t=r("LSRequestId").generate();return o("MAWMpsGating").isFullMpsEnabled()?m(e,t,_,"FULL_MPS"):m(e,t,f,"MPS")}function m(e,t,n,r){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i){r("FBLogger")("messenger_web").INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Initializing restore with ",""])),i),g(i);try{o("MAWEBRestoreTrackingUtils").markEBRestoreInitial({querySource:"GQL_MAIN_THREAD",traceId:n});var l=yield o("EBGetLatestChatJids").getLatestChatJids(t,50);if(l.success===!1){o("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,(u||(u=r("ExecutionEnvironment"))).isInWorker,"latestChatJidsResultOrError: "+r("getErrorSafe")(l.error).message);return}if(yield o("EBSetRestoreStatusForInitialRestore").setRestoreStatusForInitialRestore(l.value,t),o("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()||r("gkx")("2792")){var s=o("MAWUICacheServices").getMAWUICacheServices();r("promiseDone")(s.getFromScratchSkippingCacheAndNotifyListenersFor("snippets",l.value.map(o("MpsTypes").toThreadId)))}yield a(l.value),o("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(n)}catch(e){throw o("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,(u||(u=r("ExecutionEnvironment"))).isInWorker,"initialize_restore_failed: "+r("getErrorSafe")(e).message),e}finally{yield o("EBSetRestoreStatusForInitialRestore").resetClientRestoreStatus(t)}}),p.apply(this,arguments)}function _(e){return(s||(s=n("Promise"))).all(e.map(function(e){return o("MpsOverBridge").mps().loadMessages({debug:{purpose:"InitializeRestore"},direction:"desc",from:[o("MpsTypes").toTimestamp(Number.MAX_SAFE_INTEGER),void 0],numMessages:c,threadId:o("MpsTypes").toThreadId(e)})})).then(function(){})}function f(e){return o("MAWBridgeSendAndReceive").sendAndReceive("backend","maw_load_msgs_by_chat_jids_into_maw",{actionType:"pre-load",config:e.map(function(e){return{chatJid:e,direction:"before",includeLowerBoundMsg:!0,lowerBoundSortOrderMs:Date.now(),numMsgs:c}})})}function g(e){o("MAWBridge").getBridge().fireAndForget("backend","logInitRestoreMethodForDebugging",{method:e})}l.initializeRestore=d}),98);
__d("MWEncryptedBackupsInitializeRestoreDeferred",["MWChatEncryptedBackupsQPLEvents","QPLUserFlow","WALogger","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MWEncryptedBackupsInitializeRestore").__setRef("MWEncryptedBackupsInitializeRestoreDeferred");function u(t){var n=t.db,a=t.onFailure,i=t.onSuccess;s.onReady(function(t){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_init_restore_sproc"),r("promiseDone")(t.initializeRestore(n),i,function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Error initializing restore: ",""])),t),a==null||a("failed_to_initialize_restore")})})}l.encryptedBackupsInitializeRestoreDeferred=u}),98);
__d("WASmaxInAbPropsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInAbPropsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","feature-not-implemented");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",501);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFeatureNotImplementedMixin=e}),98);
__d("WASmaxInAbPropsNoRetryErrors",["WAResultOrError","WASmaxInAbPropsIQErrorBadRequestMixin","WASmaxInAbPropsIQErrorFeatureNotImplementedMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInAbPropsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorFeatureNotImplemented"],[t,n])}l.parseNoRetryErrors=e}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry",["WAResultOrError","WASmaxInAbPropsIQErrorResponseMixin","WASmaxInAbPropsNoRetryErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInAbPropsNoRetryErrors").parseNoRetryErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorNoRetryErrors:i.value})):i}l.parseGetExperimentConfigResponseErrorNoRetry=e}),98);
__d("WASmaxInAbPropsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","internal-server-error");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",500);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorInternalServerErrorMixin=e}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry",["WAResultOrError","WASmaxInAbPropsIQErrorInternalServerErrorMixin","WASmaxInAbPropsIQErrorResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInAbPropsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(r.value);if(!a.success)return a;var i=o("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({errorIQErrorInternalServerErrorMixin:a.value},i.value)):i}l.parseGetExperimentConfigResponseErrorRetry=e}),98);
__d("WASmaxInAbPropsExperimentConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"prop");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"config_code",1,void 0);if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"config_value");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"config_expo_key",0,void 0);return a.success?o("WAResultOrError").makeResult({configCode:n.value,configValue:r.value,configExpoKey:a.value}):a}l.parseExperimentConfigMixin=e}),98);
__d("WASmaxInAbPropsSamplingConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"prop");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"event_code",1,void 0);if(!n.success)return n;var r=o("WASmaxParseUtils").attrIntRange(e,"sampling_weight",-1e4,1e4);return r.success?o("WAResultOrError").makeResult({eventCode:n.value,samplingWeight:r.value}):r}l.parseSamplingConfigMixin=e}),98);
__d("WASmaxInAbPropsConfigs",["WAResultOrError","WASmaxInAbPropsExperimentConfigMixin","WASmaxInAbPropsSamplingConfigMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInAbPropsExperimentConfigMixin").parseExperimentConfigMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"ExperimentConfig",value:t.value});var n=o("WASmaxInAbPropsSamplingConfigMixin").parseSamplingConfigMixin(e);return n.success?o("WAResultOrError").makeResult({name:"SamplingConfig",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["ExperimentConfig","SamplingConfig"],[t,n])}l.parseConfigs=e}),98);
__d("WASmaxInAbPropsEnums",[],(function(t,n,r,o,a,i){var e={false:"false",true:"true"};i.ENUM_FALSE_TRUE=e}),66);
__d("WASmaxInAbPropsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseSuccess",["WAResultOrError","WASmaxInAbPropsConfigs","WASmaxInAbPropsEnums","WASmaxInAbPropsIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"prop");if(!t.success)return t;var n=o("WASmaxInAbPropsConfigs").parseConfigs(e);return n.success?o("WAResultOrError").makeResult({configs:n.value}):n}function s(e){var t=o("WASmaxParseUtils").assertTag(e,"erid");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytesRange(e,1,100);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function u(t,n){var r=o("WASmaxParseUtils").assertTag(t,"iq");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t,"props");if(!a.success)return a;var i=o("WASmaxParseUtils").optionalChildWithTag(t,"erid",s);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,a.value,"protocol","1");if(!l.success)return l;var u=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,a.value,"ab_key");if(!u.success)return u;var c=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,a.value,"hash");if(!c.success)return c;var d=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,a.value,"refresh",0,void 0);if(!d.success)return d;var m=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,a.value,"refresh_id",0,void 0);if(!m.success)return m;var p=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrStringEnum,a.value,"delta_update",o("WASmaxInAbPropsEnums").ENUM_FALSE_TRUE);if(!p.success)return p;var _=o("WASmaxInAbPropsIQResultResponseMixin").parseIQResultResponseMixin(t,n);if(!_.success)return _;var f=o("WASmaxParseUtils").mapChildrenWithTag(a.value,"prop",0,1/0,e);return f.success?o("WAResultOrError").makeResult(babelHelpers.extends({propsProtocol:l.value,propsAbKey:u.value,propsHash:c.value,propsRefresh:d.value,propsRefreshId:m.value,propsDeltaUpdate:p.value},_.value,{erid:i.value,propsProp:f.value})):f}l.parseGetExperimentConfigResponseSuccessPropsProp=e,l.parseGetExperimentConfigResponseSuccessErid=s,l.parseGetExperimentConfigResponseSuccess=u}),98);
__d("WASmaxOutAbPropsBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"get"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutAbPropsGetExperimentConfigRequest",["WASmaxAttrs","WASmaxJsx","WASmaxOutAbPropsBaseIQGetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.propsHash,n=e.propsRefreshId,r=o("WASmaxOutAbPropsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{xmlns:"abt",to:o("WAWap").S_WHATSAPP_NET},o("WASmaxJsx").smax("props",{protocol:"1",hash:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t),refresh_id:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,n)})));return r}l.makeGetExperimentConfigRequest=e}),98);
__d("WASmaxAbPropsGetExperimentConfigRPC",["WAComms","WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry","WASmaxInAbPropsGetExperimentConfigResponseErrorRetry","WASmaxInAbPropsGetExperimentConfigResponseSuccess","WASmaxOutAbPropsGetExperimentConfigRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutAbPropsGetExperimentConfigRequest").makeGetExperimentConfigRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInAbPropsGetExperimentConfigResponseSuccess").parseGetExperimentConfigResponseSuccess(r,n);if(a.success)return{name:"GetExperimentConfigResponseSuccess",value:a.value};var i=o("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry").parseGetExperimentConfigResponseErrorNoRetry(r,n);if(i.success)return{name:"GetExperimentConfigResponseErrorNoRetry",value:i.value};var l=o("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry").parseGetExperimentConfigResponseErrorRetry(r,n);if(l.success)return{name:"GetExperimentConfigResponseErrorRetry",value:l.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("GetExperimentConfig",{Success:a,ErrorNoRetry:i,ErrorRetry:l}))}),s.apply(this,arguments)}l.sendGetExperimentConfigRPC=e}),98);
__d("WAGetAbPropsProtocol",["WALogger","WAResultOrError","WASmaxAbPropsGetExperimentConfigRPC","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield o("WASmaxAbPropsGetExperimentConfigRPC").sendGetExperimentConfigRPC(t);if(n.name==="GetExperimentConfigResponseSuccess"){var r=n.value,a=r.propsAbKey,i=r.propsHash,l=r.propsRefresh,s=r.propsRefreshId,u=r.propsProp,d=r.erid,m=r.propsDeltaUpdate,p=c(u),_=p.newProps,f=p.samplingConfigs;return o("WAResultOrError").makeResult({abKey:a,hash:i,refresh:l,refreshId:s,props:_,samplingConfigs:f,erid:d==null?void 0:d.elementValue,isDeltaUpdate:m==="true"})}return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getAbPropsProtocol failed ",""])),n.value),o("WAResultOrError").makeError()}),u.apply(this,arguments)}function c(e){var t=[],n=[];return e.forEach(function(e){var r=e.configs;if(r.name==="ExperimentConfig"){var o;t.push({configCode:r.value.configCode,configValue:r.value.configValue,configExpoKey:(o=r.value.configExpoKey)==null?void 0:o.toString()})}else r.name==="SamplingConfig"&&n.push({eventCode:r.value.eventCode,samplingWeight:r.value.samplingWeight})}),{newProps:t,samplingConfigs:n}}l.getAbPropsProtocol=s}),98);
__d("WAAbPropsSync",["WAAbProps","WAAbPropsHelpers","WAGetAbPropsProtocol","WALogger","WAPromiseManagement","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("WAPromiseManagement").cacheWhilePending(function(){return"abProps"},m);function m(e){var t=e.sendHash,n=t===void 0?!0:t,r=e.eventFlow;return r==null||r.addPoint("sync_ab_props",{bool:{sendHash:n}}),n==null||n===!1?_(null,r):o("WAAbProps").getHash().then(function(e){return _(e,r)})}var p=m;function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){n==null||n.addPoint("fetch_ab_props");var r=yield o("WAGetAbPropsProtocol").getAbPropsProtocol({propsHash:t});if(!r.success)o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["fetchAbProps failed"])));else{var a=r.value,i=a.abKey,l=a.hash,u=a.refresh,c=a.props,d=o("WAAbPropsHelpers").parseAbProps(o("WAAbProps").getConfig(),c);n==null||n.addPoint("save_ab_props");var m=yield g(i,l,u,d);m.success===!1&&(m.error,o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["syncAbProps: detected no hash"]))))}var p=yield o("WAAbProps").getRefreshSecs();return{seconds:p}}),f.apply(this,arguments)}function g(e,t,n,r){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=yield o("WAAbProps").getAbProps(),i={abKey:e!=null?e:a.abKey,hash:t!=null?t:a.hash,refresh:o("WAAbPropsHelpers").maybeUpdateRefresh(n),lastSyncTime:o("WATimeUtils").unixTime(),propValues:a.propValues,propExpoKeys:a.propExpoKeys,internalExpoKeys:a.internalExpoKeys,expoKeyStr:a.expoKeyStr};if(t==null)return yield o("WAAbProps").setAbProps(i),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WAAbProps.update: detected no hash"]))),o("WAResultOrError").makeError("noHash");o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["WAAbProps.update: updating ab configs"])));var l=r.values,s=r.expoKeys,d=o("WAAbPropsHelpers").maybeUpdatePropValues(l,a.propValues,o("WAAbProps").getConfig()),m=o("WAAbPropsHelpers").maybeUpdateExpoKeys(s,a.propExpoKeys,o("WAAbProps").getConfig()),p=m.propExpoKeys,_=m.expoKeysToDelete,f,g,h=o("WAAbPropsHelpers").maybeUpdateInternalExpoKeys(_,a.internalExpoKeys);return h!=null&&(f=h.internalExpoKeys,g=h.expoKeyStr),yield o("WAAbProps").setAbProps(babelHelpers.extends({},i,{propValues:d,propExpoKeys:p,internalExpoKeys:f,expoKeyStr:g})),o("WAResultOrError").makeResult()}),h.apply(this,arguments)}l.syncAbProps=d,l.syncAbPropsDebug=p}),98);
__d("WASmaxInDevicesFetchSelfResponseError",["WAResultOrError","WASmaxInDevicesIQErrorResponseMixin","WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInDevicesIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup").parseRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup:i.value})):i}l.parseFetchSelfResponseError=e}),98);
__d("WASmaxInDevicesDeviceInfoMixin",["WAResultOrError","WASmaxInDevicesIdentityKeyMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"platform");if(!t.success)return t;var n=o("WASmaxParseUtils").contentString(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function s(e){var t=o("WASmaxParseUtils").assertTag(e,"manufacturer");if(!t.success)return t;var n=o("WASmaxParseUtils").contentString(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function u(e){var t=o("WASmaxParseUtils").assertTag(e,"model");if(!t.success)return t;var n=o("WASmaxParseUtils").contentString(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function c(e){var t=o("WASmaxParseUtils").assertTag(e,"seen");if(!t.success)return t;var n=o("WASmaxParseUtils").contentInt(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function d(e){var t=o("WASmaxParseUtils").assertTag(e,"creation");if(!t.success)return t;var n=o("WASmaxParseUtils").contentInt(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function m(e){var t=o("WASmaxParseUtils").assertTag(e,"ip");if(!t.success)return t;var n=o("WASmaxParseUtils").contentString(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function p(e){var t=o("WASmaxParseUtils").assertTag(e,"location");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"latitude");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"longitude");if(!r.success)return r;var a=o("WASmaxParseUtils").contentString(e);return a.success?o("WAResultOrError").makeResult({latitude:n.value,longitude:r.value,elementValue:a.value}):a}function _(t){var n=o("WASmaxParseUtils").assertTag(t,"device");if(!n.success)return n;var r=o("WASmaxParseUtils").optionalChildWithTag(t,"platform",e);if(!r.success)return r;var a=o("WASmaxParseUtils").optionalChildWithTag(t,"manufacturer",s);if(!a.success)return a;var i=o("WASmaxParseUtils").optionalChildWithTag(t,"model",u);if(!i.success)return i;var l=o("WASmaxParseUtils").optionalChildWithTag(t,"seen",c);if(!l.success)return l;var _=o("WASmaxParseUtils").optionalChildWithTag(t,"creation",d);if(!_.success)return _;var f=o("WASmaxParseUtils").optionalChildWithTag(t,"ip",m);if(!f.success)return f;var g=o("WASmaxParseUtils").optionalChildWithTag(t,"location",p);if(!g.success)return g;var h=o("WASmaxParseUtils").attrIntRange(t,"id",1,999);if(!h.success)return h;var y=o("WASmaxInDevicesIdentityKeyMixin").parseIdentityKeyMixin(t);return y.success?o("WAResultOrError").makeResult(babelHelpers.extends({id:h.value},y.value,{platform:r.value,manufacturer:a.value,model:i.value,seen:l.value,creation:_.value,ip:f.value,location:g.value})):y}l.parseDeviceInfoPlatform=e,l.parseDeviceInfoManufacturer=s,l.parseDeviceInfoModel=u,l.parseDeviceInfoSeen=c,l.parseDeviceInfoCreation=d,l.parseDeviceInfoIp=m,l.parseDeviceInfoLocation=p,l.parseDeviceInfoMixin=_}),98);
__d("WASmaxInDevicesFetchSelfResponseSuccess",["WAResultOrError","WASmaxInDevicesDeviceInfoMixin","WASmaxInDevicesIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"device");if(!t.success)return t;var n=o("WASmaxInDevicesDeviceInfoMixin").parseDeviceInfoMixin(e);return n.success,n}function s(t,n){var r=o("WASmaxParseUtils").assertTag(t,"iq");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t,"self");if(!a.success)return a;var i=o("WASmaxInDevicesIQResultResponseMixin").parseIQResultResponseMixin(t,n);if(!i.success)return i;var l=o("WASmaxParseUtils").mapChildrenWithTag(a.value,"device",1,25,e);return l.success?o("WAResultOrError").makeResult(babelHelpers.extends({},i.value,{selfDevice:l.value})):l}l.parseFetchSelfResponseSuccessSelfDevice=e,l.parseFetchSelfResponseSuccess=s}),98);
__d("WASmaxOutDevicesFetchSelfRequest",["WASmaxJsx","WASmaxOutDevicesBaseIQGetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxOutDevicesBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{to:o("WAWap").S_WHATSAPP_NET,xmlns:"fbid:devices"},o("WASmaxJsx").smax("self",null)));return e}l.makeFetchSelfRequest=e}),98);
__d("WASmaxDevicesFetchSelfRPC",["WAComms","WASmaxInDevicesFetchSelfResponseError","WASmaxInDevicesFetchSelfResponseSuccess","WASmaxOutDevicesFetchSelfRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutDevicesFetchSelfRequest").makeFetchSelfRequest(),n=yield o("WAComms").sendSmaxStanza(t,e),r=o("WASmaxInDevicesFetchSelfResponseSuccess").parseFetchSelfResponseSuccess(n,t);if(r.success)return{name:"FetchSelfResponseSuccess",value:r.value};var a=o("WASmaxInDevicesFetchSelfResponseError").parseFetchSelfResponseError(n,t);if(a.success)return{name:"FetchSelfResponseError",value:a.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("FetchSelf",{Success:r,Error:a}))}),s.apply(this,arguments)}l.sendFetchSelfRPC=e}),98);
__d("WAGetCurrentUserDeviceList",["WAAssertUnreachable","WAGlobals","WAJids","WALogger","WAPersistedJobManager","WASignalKeys","WASmaxDevicesFetchSelfRPC","WATimeUtils","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){if(t.isCurrentDevice&&n.isCurrentDevice)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Two devices were detected as isCurrentDevice in getCurrentUserDeviceList"]))),0;if(t.isCurrentDevice)return-1;if(n.isCurrentDevice)return 1;if(t.lastSeen!=null&&n.lastSeen==null)return-1;if(t.lastSeen==null&&n.lastSeen!=null)return 1;if(t.lastSeen!=null&&n.lastSeen!=null){var r=t.lastSeen,a=n.lastSeen;return a.getTime()-r.getTime()}return 0}function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WASmaxDevicesFetchSelfRPC").sendFetchSelfRPC();switch(t.name){case"FetchSelfResponseError":{var n=t.value.errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup;switch(n.name){case"RetryableIQError":{var a=n.value.backoff;throw a!=null?new(o("WAPersistedJobManager")).RetryOnBackoff({algo:{delay:a,type:"constant"},jitter:0}):new(o("WAPersistedJobManager")).RetryOnBackoff({algo:{first:o("WATimeUtils").HOUR_MILLISECONDS/60,type:"exponential"},jitter:.1})}default:{n.name;var i=n.value.code;throw r("err")("Failed with an error code "+i)}}}case"FetchSelfResponseSuccess":{var l=o("WAJids").extractDeviceId(o("WAGlobals").getMyDeviceJid());return t.value.selfDevice.map(function(e){var t,n,r,a,i,s=e.creation,u=e.elementValue,c=e.id,d=e.ip,m=e.location,p=e.manufacturer,_=e.model,f=e.platform,g=e.seen;return{creationTime:s==null?null:o("WATimeUtils").toDate(o("WATimeUtils").castToUnixTime(s.elementValue)),id:o("WAJids").interpretAsDeviceId(c),identityKey:o("WASignalKeys").serializeIdentity(u),ipAddress:(t=d==null?void 0:d.elementValue)!=null?t:null,isCurrentDevice:c===l,lastSeen:g==null?null:o("WATimeUtils").toDate(o("WATimeUtils").castToUnixTime(g.elementValue)),latitude:m==null?null:parseFloat(m.latitude),location:(n=m==null?void 0:m.elementValue)!=null?n:null,longitude:m==null?null:parseFloat(m.longitude),manufacturer:(r=p==null?void 0:p.elementValue)!=null?r:null,model:(a=_==null?void 0:_.elementValue)!=null?a:null,platform:(i=f==null?void 0:f.elementValue)!=null?i:null}}).sort(s)}default:return r("WAAssertUnreachable")(t.name)}}),c.apply(this,arguments)}l.getCurrentUserDeviceList=u}),98);
__d("WAPublishAppDataProtocol",["FBLogger","WABridge","WAEncUserMsg","WAGetCurrentUserDeviceInfoApi","WAGlobals","WAOdsEnums","WASmaxAppdataPublishPeerRPC","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WATagsLogger").TAGS(["sendAppDataFanout"]);function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a=n.messagePayload,i=n.identities,l=n.externalId,c=i.get(o("WAGlobals").getMyUserJid());if(c==null)throw r("FBLogger")("wmi").mustfixThrow("Missing my user identities");var d=Array.from(c.entries()).map(function(e){var t=e[0],n=e[1];return{identity:n,jid:t}}),m=[{devicesInfo:d,user:o("WAGlobals").getMyUserJid()}],p=yield o("WAGlobals").getWaOneQueue().enqueue(function(e){var t=e.cryptoManager;return o("WAEncUserMsg").encryptUserMsg(m,{messageBytes:a.messageBytes,type:"appdata"},{cryptoManager:t})},{operationType:"encrypt",flush:!0}),_=p.phash,f=!1,g=[];p.participants!=null&&p.participants.forEach(function(e){e.type==="pkmsg"&&(f=!0),g.push({toJid:e.to,encTypeIndividualMixinArgs:{encType:e.type,encElementValue:e.ciphertext},encVersionFutureproofMixinArgs:{encV:parseInt(e.v,10)}})});var h={appdataTo:o("WAGlobals").getMyUserJid(),toArgs:g},y={peerPeerFanout:h},C=void 0;if(f){var b=yield o("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceInfo(),v=b==null?void 0:b.identityKey;if(v==null)throw u.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch current device public identity key"]))),r("FBLogger")("wmi").mustfixThrow("No public identity key");C={deviceIdentityElementValue:v}}var S={appdataDeviceListCheck:"true"},R={appdataId:l,peerMsgTypesArgs:y,deviceIdentityMixinArgs:C,withDeviceListCheckMixinArgs:S},L=yield o("WASmaxAppdataPublishPeerRPC").sendPeerRPC(R);switch(L.name){case"PeerResponseSuccess":{var E,k=(E=L.value.deviceListStaleMixin)==null?void 0:E.phash;return k!=null&&_!=null&&k!==_?(u.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Got phash mismatch on appdata, local[","] server[","]"])),_,k),o("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:o("WAOdsEnums").Entity.PHASH_MISMATCH,key:"appdata"}),{type:"success",ts:o("WATimeUtils").castToUnixTime(L.value.t),phash:{type:"mismatch",local:_,server:k},count:null,reportingMeta:null}):{type:"success",ts:o("WATimeUtils").castToUnixTime(L.value.t),phash:{type:"ok"},count:null,reportingMeta:null}}default:throw L.name,r("FBLogger")("wmi").mustfixThrow("Failed to send appdata %s",L.value.error)}}),d.apply(this,arguments)}l.publishAppData=c}),98);
__d("WASaveReceiptApi",["MAWTransactionMode","WADbTransactor","WAMsg"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WADbTransactor").makeSignalTransactor({receipts:o("MAWTransactionMode").READWRITE},"saveReceipt",function(e){return(function(t){return e.receipts.put({msgId:t.id.externalId.toString(),permittedIdentitiesPerDevice:t.permittedIdentitiesPerDevice,recipientDevices:t.recipientDevices,waMsgId:o("WAMsg").craftWAMsgIdString(t.id)}).then(function(){})})});l.saveReceipt=e}),98);
__d("WAPublishMessage",["FBLogger","Promise","WAGenReportingMeta","WAGlobals","WAJids","WALoadReceiptApi","WALogger","WAMsg","WASaveReceiptApi","WASendMsgInternal","WASentBytesCache","WATimeUtils","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.identities,r=e.messagePayload,a={author:r.protocolMsgId.author,chat:r.protocolMsgId.chat,externalId:r.protocolMsgId.externalId},i=yield o("WALoadReceiptApi").loadReceipt(a);if(i.success)return i.value;var l=new Map;for(var s of n){var u=s[0],c=s[1];for(var d of c){var m=d[0],p=d[1];m!==o("WAGlobals").getMyDeviceJid()&&l.set(m,{pubKey:p})}}var _=new Set,f={permittedIdentitiesPerDevice:l,recipientDevices:_,id:a};return t.addPoint("save_receipts_start"),yield o("WASaveReceiptApi").saveReceipt(f),t.addPoint("save_receipts_end"),f}),d.apply(this,arguments)}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=t.messagePayload,l=t.identities,s=t.sendIdentity,d=s===void 0?!1:s;a.addPoint("prepare_receipt_start");var m=yield c({messagePayload:i,identities:l},a);a.addPoint("prepare_receipt_end"),a.addPoint("calculate_recipients_start");var p=i.frankingKey,g=i.frankingVersion,h=i.messageBytes,y=i.backupDirective,C=i.messageType,b=i.protocolMsgId,v=_(m.permittedIdentitiesPerDevice),S=C.type==="text"&&C.invitedParticipantUserJid!=null?v.filter(function(e){return e.user===C.invitedParticipantUserJid||e.user===o("WAGlobals").getMyUserJid()}):v;a.addPoint("calculate_recipients_end",{int:{recipientsCount:S.length}});var R=C.type==="text"&&C.invitedParticipantUserJid!=null?C.invitedParticipantUserJid:b.chat,L=b.chat===o("WAGlobals").getMyUserJid();if(S.length===0&&!L)throw r("FBLogger")("wmi").mustfixThrow("Trying to send a message with no recipients");if(S.length===0&&L)return{serverResponse:{type:"success",ts:o("WATimeUtils").unixTime(),phash:{type:"ok"},count:null,reportingMeta:null},encryption:{type:"user",messageTo:o("WAGlobals").getMyUserJid(),participants:[],phash:""}};var E=d?yield o("WAGlobals").getWaOneQueue().enqueue(function(e){var t=e.cryptoManager;return f(t)},{operationType:"get_my_device_identity",flush:!1,afterInit:!0}):null,k=yield C.isRevoked===!0?(u||(u=n("Promise"))).resolve(null):o("WAGenReportingMeta").genReportingMeta(h.bytes,p,g),I=yield o("WASendMsgInternal").sendMessageV2({type:"chat",messageBytes:h,chat:R,deviceIdentity:E,messageType:C,protocolMsgId:b,externalId:b.externalId,recipients:S,reportingMeta:k,backupDirective:y},a),T=I.serverResponse;return T.type==="success"&&(yield o("WASentBytesCache").sentBytesCache().saveSentBytes({ts:T.ts,frankingKey:p,frankingVersion:g,messageBytes:h,backupDirective:y,messageType:C,protocolMsgId:b,waMsgId:o("WAMsg").craftWAMsgIdString({author:b.author,chat:b.chat,externalId:b.externalId})}).catch(function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg failed to save sent bytes to cache: ",""])),t)})),I}),p.apply(this,arguments)}function _(e){var t=new Map;return e.forEach(function(e,n){var r=e.pubKey,a=o("WAJids").extractUserJid(n),i={identity:r,jid:n},l=t.get(a)||[];l.push(i),t.set(a,l)}),Array.from(t,function(e){var t=e[0],n=e[1];return{devicesInfo:n,user:t}})}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{var t=yield e.storage.loadIdentities(o("WAGlobals").getMyUserJid()),n=t.get(o("WAGlobals").getMyDeviceJid());if(n!=null)return n;throw r("err")("missing-identity")}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error loading current device identity ",""])),e)}}),g.apply(this,arguments)}l.publishMessage=m}),98);
__d("WASmaxInDevicesIQErrorBadRequestOrItemNotFoundMixinGroup",["WAResultOrError","WASmaxInDevicesIQErrorBadRequestMixin","WASmaxInDevicesIQErrorItemNotFoundMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInDevicesIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInDevicesIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorItemNotFound"],[t,n])}l.parseIQErrorBadRequestOrItemNotFoundMixinGroup=e}),98);
__d("WASmaxInDevicesNonRetryableRemoveDeviceIQErrorMixin",["WAResultOrError","WASmaxInDevicesIQErrorBadRequestOrItemNotFoundMixinGroup","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxInDevicesIQErrorBadRequestOrItemNotFoundMixinGroup").parseIQErrorBadRequestOrItemNotFoundMixinGroup(e);return n.success?o("WAResultOrError").makeResult({iQErrorBadRequestOrItemNotFoundMixinGroup:n.value}):n}l.parseNonRetryableRemoveDeviceIQErrorMixin=e}),98);
__d("WASmaxInDevicesRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup",["WAResultOrError","WASmaxInDevicesNonRetryableRemoveDeviceIQErrorMixin","WASmaxInDevicesRetryableIQErrorMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInDevicesRetryableIQErrorMixin").parseRetryableIQErrorMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"RetryableIQError",value:t.value});var n=o("WASmaxInDevicesNonRetryableRemoveDeviceIQErrorMixin").parseNonRetryableRemoveDeviceIQErrorMixin(e);return n.success?o("WAResultOrError").makeResult({name:"NonRetryableRemoveDeviceIQError",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["RetryableIQError","NonRetryableRemoveDeviceIQError"],[t,n])}l.parseRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup=e}),98);
__d("WASmaxInDevicesRemoveResponseError",["WAResultOrError","WASmaxInDevicesIQErrorResponseMixin","WASmaxInDevicesRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInDevicesIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInDevicesRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup").parseRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup:i.value})):i}l.parseRemoveResponseError=e}),98);
__d("WASmaxInDevicesRemoveResponseSuccess",["WASmaxInDevicesIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxInDevicesIQResultResponseMixin").parseIQResultResponseMixin(e,t);return r.success,r}l.parseRemoveResponseSuccess=e}),98);
__d("WASmaxOutDevicesKeyDataMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anyElementValue,n=o("WASmaxJsx").smax("smax$any",null,t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeKeyDataMixin=s}),98);
__d("WASmaxOutDevicesIdentityKeyMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutDevicesKeyDataMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxJsx").smax("smax$any",null,o("WASmaxOutDevicesKeyDataMixin").mergeKeyDataMixin(o("WASmaxJsx").smax("identity",null),e));return t}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIdentityKeyMixin=s}),98);
__d("WASmaxOutDevicesRemoveRequest",["WASmaxJsx","WASmaxOutDevicesBaseIQSetRequestMixin","WASmaxOutDevicesIdentityKeyMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.removeId,n=e.identityKeyMixinArgs,r=o("WASmaxOutDevicesBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(o("WASmaxJsx").smax("iq",{to:o("WAWap").S_WHATSAPP_NET,xmlns:"fbid:devices"},o("WASmaxOutDevicesIdentityKeyMixin").mergeIdentityKeyMixin(o("WASmaxJsx").smax("remove",{id:o("WAWap").INT(t)}),n)));return r}l.makeRemoveRequest=e}),98);
__d("WASmaxDevicesRemoveRPC",["WAComms","WASmaxInDevicesRemoveResponseError","WASmaxInDevicesRemoveResponseSuccess","WASmaxOutDevicesRemoveRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutDevicesRemoveRequest").makeRemoveRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInDevicesRemoveResponseSuccess").parseRemoveResponseSuccess(r,n);if(a.success)return{name:"RemoveResponseSuccess",value:a.value};var i=o("WASmaxInDevicesRemoveResponseError").parseRemoveResponseError(r,n);if(i.success)return{name:"RemoveResponseError",value:i.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("Remove",{Success:a,Error:i}))}),s.apply(this,arguments)}l.sendRemoveRPC=e}),98);
__d("WARemoveDevice",["WALogger","WAPersistedJobManager","WAPushSafeTypes","WAResultOrError","WASignalOther","WASmaxDevicesRemoveRPC","WATimeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=o("WAPushSafeTypes").unsafeNotNullable(n),a=r.deviceId,i=r.identity;o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["removeDevice called for device "," and identity ",""])),a,i);var l=o("WASignalOther").sliceBytes(i,1,32),u=yield o("WASmaxDevicesRemoveRPC").sendRemoveRPC({removeId:a,identityKeyMixinArgs:{anyElementValue:l}});if(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["removeDevice result for ",": "," "])),a,u),u.name==="RemoveResponseSuccess")return o("WAResultOrError").makeResult();u.name;var c=u.value.errorRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup;if(c.name!=="RetryableIQError")return o("WAResultOrError").makeError();c.name;var d=c.value.backoff;throw d!=null?new(o("WAPersistedJobManager")).RetryOnBackoff({algo:{type:"constant",delay:d},jitter:0}):new(o("WAPersistedJobManager")).RetryOnBackoff({algo:{type:"exponential",first:o("WATimeUtils").HOUR_MILLISECONDS/60},jitter:.1})}),c.apply(this,arguments)}l.removeDevice=u}),98);
__d("WARemoveCurrentDevice",["WAGetCurrentUserDeviceInfoApi","WAGlobals","WALogger","WARemoveDevice","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["removeCurrentDevice called for current device"])));var n=yield o("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceInfo();if(n==null)return o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["There is no stored user info, it was already deleted or this job was called twice, possibly from another tab"]))),o("WAResultOrError").makeResult();var r=n.deviceId,a=n.identityKey,i=yield o("WARemoveDevice").removeDevice(t,{deviceId:r,identity:a});return i.success&&(yield o("WAGlobals").getDependencies().clearSignalAndTempStores()),o("WAResultOrError").makeResult()});return function(n){return t.apply(this,arguments)}})();l.removeCurrentDevice=u}),98);
__d("WASendAppDataFanoutProtocol",["WAAsMessageApplication","WABridge","WAConvertAppData","WAEncUserMsg","WAErrorMessage","WAGetCurrentUserDeviceInfoApi","WAGlobals","WAMsgApplication.pb","WAOdsEnums","WAResultOrError","WASmaxAppdataPublishPeerRPC","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=o("WATagsLogger").TAGS(["sendAppDataFanout"]),f=24;function g(t,n){var r=n.contents,a=n.externalId,i=n.permittedIdentitiesPerDevice,l=n.checkPhash,s=l===void 0?"checkPhash":l;return h(r,a,i,s).catch(function(t){var n=o("WAErrorMessage").maybeGetMessageFromError(t);return _.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to send appdata to devices with error: ",""])),n),o("WAResultOrError").makeError("runtime-error")})}function h(e,t,n,r){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){r===void 0&&(r="checkPhash"),_.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Sending appdata, externalId: ",""])),t);var a=o("WAConvertAppData").convertAppData(e),i={bytes:o("WAAsMessageApplication").castToMessageApplicationBytes(o("encodeProtobuf").encodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,a).readByteArrayView()),version:"v3"},l=[],g=Array.from(n.entries()).map(function(e){var t=e[0],n=e[1];return{identity:n.pubKey,jid:t}}),h=f;g.length>h&&(_.WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Attempting to send an appData stanza to "," devices"])),g.length),_.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Attempting to send an appData stanza to more than the allowed "," devices"])),h),g=g.slice(0,h));var y=[{devicesInfo:g,user:o("WAGlobals").getMyUserJid()}],C=yield o("WAGlobals").getWaOneQueue().enqueue(function(e){var t=e.cryptoManager;return o("WAEncUserMsg").encryptUserMsg(y,{messageBytes:i,type:"appdata"},{cryptoManager:t})},{operationType:"encrypt",flush:!0}),b=C.phash,v=!1;C.participants!=null&&C.participants.forEach(function(e){e.type==="pkmsg"&&(v=!0),l.push({toJid:e.to,encTypeIndividualMixinArgs:{encType:e.type,encElementValue:e.ciphertext},encVersionFutureproofMixinArgs:{encV:parseInt(e.v,10)}})});var S={appdataTo:o("WAGlobals").getMyUserJid(),toArgs:l},R={peerPeerFanout:S},L=void 0;if(v){var E=yield o("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceInfo(),k=E==null?void 0:E.identityKey;if(k==null)return _.ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch current device public identity key"]))),o("WAResultOrError").makeError("no-public-identity");L={deviceIdentityElementValue:k}}var I={appdataDeviceListCheck:r==="checkPhash"?"true":"false"},T={appdataId:t,peerMsgTypesArgs:R,deviceIdentityMixinArgs:L,withDeviceListCheckMixinArgs:I},D=yield o("WASmaxAppdataPublishPeerRPC").sendPeerRPC(T);switch(D.name){case"PeerResponseSuccess":{var x,$=(x=D.value.deviceListStaleMixin)==null?void 0:x.phash;return $!=null&&b!=null&&$!==b?(_.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Got phash mismatch on appdata, local[","] server[","]"])),b,$),o("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:o("WAOdsEnums").Entity.PHASH_MISMATCH,key:"appdata"}),o("WAResultOrError").makeResult({phashMismatch:!0,serverTs:o("WATimeUtils").castToUnixTime(D.value.t)})):o("WAResultOrError").makeResult({phashMismatch:!1,serverTs:o("WATimeUtils").castToUnixTime(D.value.t)})}default:return D.name,_.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Failed to send appdata. Error: ",""])),D.value.error),o("WAResultOrError").makeError("ack-failure")}}),y.apply(this,arguments)}l.MAX_APPDATA_RECIPIENTS=f,l.sendAppDataToDevicesProtocol=g}),98);
__d("WASendMsgUtilV2",["Promise","WADevicesState","WAGenReportingMeta","WAGlobals","WAJids","WALoadReceiptApi","WALogger","WAMsg","WAResultOrError","WASaveReceiptApi","WASendMsgInternal","WASentBytesCache","WATimeUtils","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_;function f(e){return(_||(_=n("Promise"))).resolve()}function g(e,t){return o("WADevicesState").getDevicesState().waitForUserDevices(Array.from(new Set([e,o("WAGlobals").getMyUserJid()])),"GetDevicesBeforeSend: "+t)}function h(t,r){var a=r.chatJid,i=r.reason;return o("WAJids").switchOnChatJidType(a,{group:function(t){return f(t)},interopUser:function(t){return g(t,i)},lidUser:function(t){return g(t,i)},msgrUser:function(t){return g(t,i)},phoneUser:function(t){return g(t,i)}}).catch(function(t){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error during get devices before sending: ",""])),t),(_||(_=n("Promise"))).resolve()})}function y(e,t){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.messagePayload,r=e.loadThreadParticipants,a={author:n.protocolMsgId.author,chat:n.protocolMsgId.chat,externalId:n.protocolMsgId.externalId},i=yield o("WALoadReceiptApi").loadReceipt(a);if(i.success)return i;t.addPoint("get_devices_before_send_start"),yield h(void 0,{chatJid:n.protocolMsgId.chat,reason:"prepareReceipt"}),t.addPoint("get_devices_before_send_end");var l=yield r(n.protocolMsgId.chat);t.addPoint("get_identities_start");var u=yield o("WAGlobals").getWaOneQueue().enqueue(function(e){var t=e.cryptoManager;return t.storage.bulkLoadIdentities(l)},{flush:!1,afterInit:!0,operationType:"prepare_receipt_load_identities"}),c=[];if(u.size===0)c=[].concat(l);else for(var d of u){var m=d[0],p=d[1];p.size===0&&c.push(m)}c.length>0&&(yield o("WADevicesState").getDevicesState().waitForUserDevices(c,"GetDevicesBeforeSend: prepareReceipt",!0),u=yield o("WAGlobals").getWaOneQueue().enqueue(function(e){var t=e.cryptoManager;return t.storage.bulkLoadIdentities(l)},{afterInit:!0,flush:!1,operationType:"prepare_receipt_load_identities"}));var _=new Map;for(var f of u){var g=f[0],y=f[1];for(var C of y){var b=C[0],v=C[1];b!==o("WAGlobals").getMyDeviceJid()&&_.set(b,{pubKey:v})}}t.addPoint("get_identities_end");var S=new Set,R={permittedIdentitiesPerDevice:_,recipientDevices:S,id:a};return t.addPoint("save_receipts_start"),yield o("WASaveReceiptApi").saveReceipt(R).catch(function(e){return t.addPoint("save_receipts_fail"),o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to save receipt for message with error ",""])),e),o("WAResultOrError").makeError("missing-receipt")}),t.addPoint("save_receipts_end"),o("WAResultOrError").makeResult(R)}),C.apply(this,arguments)}function b(e,t,n){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){var a=t.messagePayload,i=t.loadThreadParticipants,l=t.sendIdentity,s=l===void 0?!1:l,p=t.isInstamadillo,f=p===void 0?!1:p;r.addPoint("prepare_receipt_start");var g=yield y({messagePayload:a,loadThreadParticipants:i},r);if(g.success===!1)return r.addPoint("prepare_receipt_fail"),o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Trying to send a message that does not have a receipt in db"]))),o("WAResultOrError").makeError({type:"missing-receipt"});r.addPoint("prepare_receipt_end");var h=g.value,C=a.frankingKey,b=a.frankingVersion,v=a.messageBytes,L=a.backupDirective,E=a.messageType,k=a.protocolMsgId,I=S(h.permittedIdentitiesPerDevice),T=E.type==="text"&&E.invitedParticipantUserJid!=null?I.filter(function(e){return e.user===E.invitedParticipantUserJid||e.user===o("WAGlobals").getMyUserJid()}):I;r.addPoint("recipients-calculated",{int:{recipientsCount:T.length},string:{msgType:E.type}});var D=E.type==="text"&&E.invitedParticipantUserJid!=null?E.invitedParticipantUserJid:k.chat,x=k.chat===o("WAGlobals").getMyUserJid();if(T.length===0&&!x)return o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Trying to send a message with no recipients"]))),o("WAResultOrError").makeError({type:"no-recipients",isRetriable:!1});if(T.length===0&&x)return o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Trying to send a message with no recipients, but it is a self thread"]))),o("WAResultOrError").makeResult({baseKey:null,reportingMeta:null,serverTs:o("WATimeUtils").unixTime()});var $=s?yield o("WAGlobals").getWaOneQueue().enqueue(function(e){var t=e.cryptoManager;return R(t)},{operationType:"get_my_device_identity",flush:!1,afterInit:!0}):null,P=yield E.isRevoked===!0?(_||(_=n("Promise"))).resolve(null):o("WAGenReportingMeta").genReportingMeta(v.bytes,C,b);return o("WASendMsgInternal").sendMessage({type:"chat",messageBytes:v,chat:D,deviceIdentity:$,messageType:E,protocolMsgId:k,externalId:k.externalId,recipients:T,reportingMeta:P,backupDirective:L},r,f).then(function(e){return e.success?o("WASentBytesCache").sentBytesCache().saveSentBytes({ts:e.value.serverTs,frankingKey:C,frankingVersion:b,messageBytes:v,backupDirective:L,messageType:E,protocolMsgId:k,waMsgId:o("WAMsg").craftWAMsgIdString({author:k.author,chat:k.chat,externalId:k.externalId})}).catch(function(e){o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg failed to save sent bytes to cache: ",""])),e)}).then(function(){return e}):e})}),v.apply(this,arguments)}function S(e){var t=new Map;return e.forEach(function(e,n){var r=e.pubKey,a=o("WAJids").extractUserJid(n),i={identity:r,jid:n},l=t.get(a)||[];l.push(i),t.set(a,l)}),Array.from(t,function(e){var t=e[0],n=e[1];return{devicesInfo:n,user:t}})}function R(e){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{var t=yield e.storage.loadIdentities(o("WAGlobals").getMyUserJid()),n=t.get(o("WAGlobals").getMyDeviceJid());if(n!=null)return n;throw r("err")("missing-identity")}catch(e){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Error loading current device identity ",""])),e)}}),L.apply(this,arguments)}l.getDevicesBeforeSend=h,l.sendChatMessage=b}),98);
__d("WASetClockSkewApi",["WASetMetaApi"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){var e=t.clockSkew;return o("WASetMetaApi").setMeta({clockSkew:e})};l.setClockSkew=e}),98);
__d("WASendPing",["WAComms","WALogger","WASetClockSkewApi","WATimeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendPing: sending"]))),o("WAComms").sendPing()}function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.clockSkew;o("WATimeUtils").setClockSkew(n),yield o("WASetClockSkewApi").setClockSkew({clockSkew:n})}),c.apply(this,arguments)}l.sendPing=s,l.updateClockSkew=u}),98);
__d("WASyncAbProps",["WAAbPropsSync","WALogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=n.sendHash;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Syncing ABProps"]))),yield o("WAAbPropsSync").syncAbProps({sendHash:r,eventFlow:t!=null?t:void 0})}),u.apply(this,arguments)}l.syncAbProps=s}),98);/*FB_PKG_DELIM*/
__d("EBFormatUtils",["I64","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){if(t!=null)return(e||(e=o("I64"))).min(t,e.of_float(o("WATimeUtils").millisTime()));switch(n){case"before":return(e||(e=o("I64"))).of_float(o("WATimeUtils").millisTime());case"after":return(e||(e=o("I64"))).zero;default:return(e||(e=o("I64"))).max_int}}function u(e,t){switch(t){case"before":return[e,0];case"after":return[0,e];default:return[Math.ceil(e/2),Math.ceil(e/2)]}}l.adjustTs=s,l.adjustCount=u}),98);
__d("EBMessageMetadataQueryQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9456956994433373"}),null);
__d("EBMessageMetadataQueryQuery.graphql",["EBMessageMetadataQueryQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"data"}],t={alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"data",variableName:"data"}],concreteType:"XFBTDeanonMessagesResponse",kind:"LinkedField",name:"deanon_messages_metadata",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"offline_threading_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sort_order_ms",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"EBMessageMetadataQueryQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[t],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"EBMessageMetadataQueryQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("EBMessageMetadataQueryQuery_facebookRelayOperation"),metadata:{},name:"EBMessageMetadataQueryQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("EBMessageRangeQueryUtils",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=Math.pow(2,48)-1;function s(e){var t=Number(e);return isNaN(t)?e:u(t).toString()}function u(t){if(t<0)return 0;if(t<=e)return t;var n=o("WATimeUtils").millisTime()+6e4;return n}l.safeTimestampMsString=s,l.safeTimestampMsNumber=u}),98);
__d("XFBLSEncryptedBackupsMessagesRangeQueryDirection.facebook",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["AFTER","BEFORE"]),l=e;i.default=l}),66);
__d("EBMessageMetadataQuery",["EBAPIQPLPoints","EBAPIWorkerCheck","EBCreateGraphQLFetchFnUnified","EBMessageMetadataQueryQuery.graphql","EBMessageRangeQueryUtils","FBLogger","I64","LSDatabaseSingleton","QPLUserFlow","ReQL","WAHashStringToNumber","WAJids","WAResultOrError","XPlatRelayEnvironment","asyncToGeneratorRuntime","getErrorSafe","gkx","qpl","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=r("gkx")("10665"),d=e!==void 0?e:e=n("EBMessageMetadataQueryQuery.graphql"),m=new Map;function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(m.has(e))return m.get(e);var t=yield(s||(s=o("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue(),n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.mi_act_mapping_table.index("jid")).getKeyRange((u||(u=o("I64"))).of_string(e)));if((n==null?void 0:n.serverThreadKey)!=null)return m.set(e,(u||(u=o("I64"))).to_float(n.serverThreadKey)),u.to_float(n.serverThreadKey)}),_.apply(this,arguments)}var f=0;function g(e){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.direction,n=e.fetchPolicy,a=e.includeAnonymizedMessages,i=a===void 0?!1:a,l=e.instanceKey,s=e.networkCacheConfig,u=e.numberOfMessages,m=e.referenceTimestamp,_=m===void 0?null:m,g=e.threadId;if(o("EBAPIWorkerCheck").runningInWorker())return o("WAResultOrError").makeError("unsupported-context");if(!c&&!r("gkx")("16464"))return o("WAResultOrError").makeError("unsupported-mailbox");var h=l!=null?o("WAHashStringToNumber").hashStringToNumber(l):++f;try{var y,C;r("QPLUserFlow").start(r("qpl")._(521476771,"2454"),{annotations:{int:{number_of_messages:u}},instanceKey:h});var b=o("XPlatRelayEnvironment").getRelayEnvironment(),v=t==="after"?"AFTER":"BEFORE";r("QPLUserFlow").addPoint(r("qpl")._(521476771,"2454"),o("EBAPIQPLPoints").EBMessageMetadataQPLPoints.GRAPHQL_QUERY_START,{instanceKey:h});var S=yield p(g),R=yield o("relay-runtime").fetchQuery(b,d,{data:{act_thread_id:g,direction:v,include_anonymized_messages:i,reference_timestamp:_==null?_:o("EBMessageRangeQueryUtils").safeTimestampMsNumber(_),requested_messages:u,server_thread_key:S}},{fetchPolicy:n!=null?n:void 0,networkCacheConfig:s!=null?s:void 0}).toPromise();r("QPLUserFlow").addPoint(r("qpl")._(521476771,"2454"),o("EBAPIQPLPoints").EBMessageMetadataQPLPoints.GRAPHQL_QUERY_END,{instanceKey:h});var L=(y=R==null||(C=R.viewer)==null||(C=C.encrypted_backup)==null||(C=C.mailbox)==null?void 0:C.deanon_messages_metadata)!=null?y:[],E=L.map(function(e){var t=e.offline_threading_id,n=e.sort_order_ms;return{offlineThreadingId:t,sortOrderMs:n}});return r("QPLUserFlow").endSuccess(r("qpl")._(521476771,"2454"),{instanceKey:h}),o("WAResultOrError").makeResult({instanceKey:l,messages:E})}catch(e){var k=r("getErrorSafe")(e);return r("FBLogger")("wmi_eb").catching(k).mustfix("Error querying messaging metadata from EBMessageMetadataQuery"),r("QPLUserFlow").endFailure(r("qpl")._(521476771,"2454"),"error",{error:k,instanceKey:h}),o("WAResultOrError").DEPRECATED_makeError("error",k)}}),h.apply(this,arguments)}function y(e){var t=e.chatJid,n=e.direction,a=e.numberOfMessages,i=e.referenceTimestamp;return C({chatJid:t,direction:n,numberOfMessages:a,referenceTimestamp:i}).catch(function(e){var t=r("getErrorSafe")(e);return r("FBLogger")("wmi_eb").catching(t).mustfix("Error querying messaging metadata from EBMessageMetadataQuery"),o("WAResultOrError").makeError("runtime-error")})}function C(e){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n,a=e.chatJid,i=e.direction,l=e.numberOfMessages,s=e.referenceTimestamp;if(!c&&!r("gkx")("16464"))return o("WAResultOrError").makeError("unsupported-mailbox");var u=o("WAJids").threadIdForChatJid(a),m=yield o("EBCreateGraphQLFetchFnUnified").createGraphQlFetchFnUnified(),p=yield m(d,{data:{act_thread_id:u,direction:v(i),include_anonymized_messages:!1,reference_timestamp:s==null?s:o("EBMessageRangeQueryUtils").safeTimestampMsNumber(s),requested_messages:l}}),_=(t=p==null||(n=p.viewer)==null||(n=n.encrypted_backup)==null||(n=n.mailbox)==null||(n=n.deanon_messages_metadata)==null?void 0:n.map(function(e){var t=e.offline_threading_id,n=e.sort_order_ms;return{offlineThreadingId:t,sortOrderMs:n}}))!=null?t:[];return o("WAResultOrError").makeResult(_)}),b.apply(this,arguments)}function v(e){switch(e){case"before":return"BEFORE";case"after":return"AFTER"}}l.messageMetadataQueryForMainThreadMAWDeanon=g,l.messageMetadataQuery=y}),98);
__d("IGDAWBundleResource",["IGDAWMainWebWorkerResource"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("IGDAWMainWebWorkerResource")}),98);
__d("IGDBundleResource",["cr:3823"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:3823")}),98);
__d("LSComputeParticipantCapabilities",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.filter(t.db.table(14).fetch([[[e[1],r[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,r[0])}).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[!1,!1],r[1]=n[0],r[2]=n[1],n):(t=i.item,o=[t.isAdmin==null?!1:t.isAdmin,t.isModerator],r[1]=o[0],r[2]=o[1])})},function(n){return t.filter(t.db.table(14).fetch([[[e[1],e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[0])}).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[!1,!1],r[4]=n[0],r[5]=n[1],n):(t=i.item,o=[t.isAdmin==null?!1:t.isAdmin,t.isModerator],r[4]=o[0],r[5]=o[1])})},function(n){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,1073741823]),t.i64.cast([0,0]),!1],r[7]=o[0],r[8]=o[1],r[9]=o[2],o):(n=l.item,a=[n.capabilities==null?t.i64.cast([0,1073741823]):n.capabilities,n.contactTypeExact==null?t.i64.cast([0,0]):n.contactTypeExact,n.isManagedByViewer==null?!1:n.isManagedByViewer],r[7]=a[0],r[8]=a[1],r[9]=a[2])})},function(e){return r[12]=t.i64.eq(r[8],t.i64.cast([0,4]))?r[9]?t.i64.cast([0,2612119]):t.i64.or_(t.i64.cast([0,2612119]),t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,3])))):r[7],t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[11]=t[0],t})},function(o){return r[13]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,20]))),r[15]=r[1]&&!r[4]&&t.i64.neq(r[11],e[0])||t.i64.eq(t.i64.and_(r[12],r[13]),t.i64.cast([0,0]))?r[12]:t.i64.sub(r[12],r[13]),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[14]=t[0],t})},function(o){return r[16]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,22]))),r[19]=r[4]&&r[1]&&t.i64.neq(r[14],e[0])||t.i64.eq(t.i64.and_(r[15],r[16]),t.i64.cast([0,0]))?r[15]:t.i64.sub(r[15],r[16]),r[2]?r[17]=!(r[4]||r[5]):r[17]=!0,t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[18]=t[0],t})},function(n){return r[20]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,21]))),o[0]=(r[1]||r[2])&&r[17]&&t.i64.neq(e[0],r[18])||t.i64.eq(t.i64.and_(r[19],r[20]),t.i64.cast([0,0]))?r[19]:t.i64.sub(r[19],r[20])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxComputeParticipantCapabilitiesStoredProcedure",e.__tables__=["participants","contacts"],a.exports=e}),null);
__d("LSAddParticipantIdToGroupThread",["LSComputeParticipantCapabilities"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.storedProcedure(n("LSComputeParticipantCapabilities"),e[1],e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.filter(t.db.table(14).fetch([[[e[0],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[1])&&t.i64.gt(n.authorityLevel,e[9])}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(14).put({threadKey:e[0],contactId:e[1],readWatermarkTimestampMs:e[2],readActionTimestampMs:e[3],deliveredWatermarkTimestampMs:e[4],nickname:e[5],normalizedSearchTerms:e[10],isAdmin:e[6],isSuperAdmin:e[13],subscribeSource:e[7],authorityLevel:e[9],participantCapabilities:r[0],groupParticipantJoinState:e[11],isModerator:e[12],threadRoles:e[14]}):0})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxAddParticipantIdToGroupThreadStoredProcedure",e.__tables__=["participants"],a.exports=e}),null);
__d("LSCheckAuthoritativeMessageExists",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.filter(t.db.table(12).fetch([[[e[1]]],"optimistic"]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.offlineThreadingId===e[1]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}).next().then(function(e,t){var r=e.done,o=e.value;return r?n[0]=!1:(t=o.item,n[0]=!0)})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxCheckAuthoritativeMessageExistsStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSCheckIfAuthoritativeThreadMissingMiActMapping",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r("gkx")("4792")?t.sequence([function(r){return t.db.table(173).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?t.sequence([function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[3]=!1:(r=a.item,n[3]=t.i64.eq(r.authorityLevel,t.i64.cast([0,80])))})},function(e){return n[1]=n[3]}]):(o=i.item,n[1]=!1)})},function(e){return n[0]=n[1]}]):t.resolve(n[0]=!1)},function(e){return o[0]=n[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCheckIfAuthoritativeThreadMissingMiActMappingStoredProcedure",e.__tables__=["mi_act_mapping_table","threads"];var s=e;l.default=s}),98);
__d("LSClearMessagePlaceholderRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(13).fetch([[[e[0],t.i64.cast([0,0])]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.minMessageId===e[1]&&t.i64.eq(t.i64.cast([0,0]),n.minTimestampMs)&&t.i64.eq(e[2],n.maxTimestampMs)}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxClearMessagePlaceholderRangeStoredProcedure",e.__tables__=["messages_ranges_v2__generated"],a.exports=e}),null);
__d("LSClearPinnedMessages",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(205).fetch([[[e[0]]]]),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxClearPinnedMessagesStoredProcedure",e.__tables__=["msg_pinned_messages_v2"],a.exports=e}),null);
__d("getChatJidForLSDBJid",["I64","LSMessagingThreadTypeUtil","ReQL","WAJids","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(n));if(a!=null){var i=(e||(e=o("I64"))).to_string(r);return o("LSMessagingThreadTypeUtil").isGroup(a.threadType)?o("WAJids").toGroupJid(i):o("WAJids").toMsgrUserJid(i)}}),u.apply(this,arguments)}l.getMaybeChatJidForLSDBJid=s}),98);
__d("LSShimCompleteThreadCutover.nop",["I64","MAWBridgeFireAndForget","ReQL","asyncToGeneratorRuntime","getChatJidForLSDBJid"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i){var l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.cutover_threads).getKeyRange(a));if(l!=null){var s=l.showOpenMessageHistory===!1;if(s)return[(e||(e=o("I64"))).one];var u=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.mi_act_mapping_table.index("jid")).getKeyRange(l.armadilloThreadId));if(u!=null){var c=yield o("getChatJidForLSDBJid").getMaybeChatJidForLSDBJid(t,u.serverThreadKey,u.jid);return c==null?[(e||(e=o("I64"))).one]:(o("MAWBridgeFireAndForget").fireAndForget("backend","insertAdminMessageInCutoverThreads",{openThreadId:(e||(e=o("I64"))).to_string(a),threadJid:c,traceId:i}),[e.zero])}return[(e||(e=o("I64"))).one]}return[(e||(e=o("I64"))).one]});function r(e,n,r,o,a){return t.apply(this,arguments)}return r})();s.__nop_name__="LSShimCompleteThreadCutover",l.default=s}),98);
__d("LSCompleteThreadCutover",["LSShimCompleteThreadCutover.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.nativeOperation(n("LSShimCompleteThreadCutover.nop"),e[0],e[1],e[2]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCompleteThreadCutoverStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSCreateOfflineThreadingID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return n[0]=t.i64.random(),r[0]=t.i64.and_(t.i64.or_(t.i64.lsl_(e[0],t.i64.to_int32(t.i64.cast([0,22]))),t.i64.and_(n[0],t.i64.cast([0,4194303]))),t.i64.cast([2147483647,4294967295])),t.resolve(r)}e.__sproc_name__="LSMailboxCreateOfflineThreadingIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDatascriptEvaluatorMaybeEagerly",["LSEagerlyLoadOnMessenger","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorMaybeEagerly");function s(){return o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(e).load()}l.default=s}),98);
__d("LSDeleteAllCommunityChannelCategories",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(182).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(9).fetch([[[t.i64.cast([0,20])]],"threadTypeLastActivityTimestampMs"]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteAllCommunityChannelCategoriesStoredProcedure",e.__tables__=["cm_category_list","threads"],a.exports=e}),null);
__d("LSDeleteAllCommunityFolders",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(162).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(9).fetch([[[t.i64.cast([0,17])]],"threadTypeLastActivityTimestampMs"]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteAllCommunityFoldersStoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSDeleteBanner",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(118).fetch([[[e[1],e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.bannerId,e[0])}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSInThreadBannerDeleteBannerStoredProcedure",e.__tables__=["in_thread_banner"],a.exports=e}),null);
__d("LSDeleteBannersByIds",["LSArrayGetObjectAt"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.sequence([function(o){return r[1]=t.createArray(),r[2]=t.i64.of_int32(e[1].length),t.i64.gt(r[2],t.i64.cast([0,0]))?t.loopAsync(r[2],function(o){return r[4]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[4]).then(function(e){var t;return t=e,r[5]=t[0],r[6]=t[1],t})},function(e){return r[7]=(r[1].push(t.i64.to_string(r[5])),r[1])}])}):t.resolve()},function(e){return r[3]=r[1].join(","),r[0]=r[3]}])},function(n){return t.forEach(t.filter(t.db.table(118).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&e[1].some(function(e){return t.i64.eq(n.bannerId,e)})}),function(e){return e.delete()})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSInThreadBannerDeleteBannersByIdsStoredProcedure",e.__tables__=["in_thread_banner"],a.exports=e}),null);
__d("LSDeleteExistingMessageRanges",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(13).fetch([[[e[0]]]]),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteExistingMessageRangesStoredProcedure",e.__tables__=["messages_ranges_v2__generated"],a.exports=e}),null);
__d("LSDeleteRowRichStatusCustomAudience",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSOmnistoreSettingsDeleteRowRichStatusCustomAudienceStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteThenInsertAvatarFeatureConfig",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSContactDeleteThenInsertAvatarFeatureConfigStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteThenInsertBotProfileInfoV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(299).put({botId:e[0],isCreatedByViewer:e[1],description:e[4],tintColor:e[2],shortDescription:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSContactDeleteThenInsertBotProfileInfoV2StoredProcedure",e.__tables__=["bot_profile_info_v2"],a.exports=e}),null);
__d("LSDeleteThenInsertCmChannelList",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(167).put({communityId:e[0],threadId:e[1],categoryId:e[2],channelPrivacy:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmChannelListStoredProcedure",e.__tables__=["cm_channel_list"],a.exports=e}),null);
__d("LSDeleteThenInsertCmCommunityList",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(166).put({communityId:e[0]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmCommunityListStoredProcedure",e.__tables__=["cm_community_list"],a.exports=e}),null);
__d("LSDeleteThenInsertCommunityFolder",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(162).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.folderId,e[0])&&t.i64.gt(t.i64.cast([0,80]),e[54])}).next().then(function(n){var r=n.done,o=n.value;return r?t.db.table(162).put({folderId:e[0],fbGroupId:e[1],name:e[2],memberCount:e[4],description:e[3],pictureUrl:e[5],pictureUrlFallback:e[6],pictureUrlExpirationTimestampMs:e[7],joiningChannelTaskId:e[8],afterJoiningOpenChannelId:e[10],capabilities:e[11],capabilities2:e[12],capabilities3:e[13],notificationSetting:e[14],notificationMutedUntil:e[15],sendsBlockedUntil:e[17],isHidden:e[18],hasSeenDisablingAlert:e[19],inviteLink:e[21],communityType:e[22],directInviteLink:e[23],enableState:e[24],takedownState:e[25],fbGroupType:e[28],threadCount:e[29],disableTimestamp:e[32],readTimestampMs:e[33],inviteStatus:e[37],blockedFromCommunityMemberCount:e[40],categoryCount:e[41],snippetText:e[42],coverPicUrl:e[43],coverPicUrlFallback:e[44],coverPicUrlExpirationTimestampMs:e[45],invitedThreadId:e[47],fbGroupUserParticipationApprovalStatus:e[48],ccAdminAssistRegistrationStatus:e[49],pauseStatus:e[50],isMember:e[51],latestThreadId:e[52],latestThreadActivityTimestampMs:e[53]}):0})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertCommunityFolderStoredProcedure",e.__tables__=["community_folders"],a.exports=e}),null);
__d("LSDeleteThenInsertCommunityUnjoinedThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[1]=e[12]==null?t.i64.cast([0,19]):e[12],n[2]="community",n[3]=t.i64.cast([0,0])==null?t.i64.cast([0,0]):t.i64.cast([0,0]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).put({threadKey:e[0],parentThreadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[2],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:e[7],lastReadWatermarkTimestampMs:e[8],muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26]}):(o=s.item,n[4]=o.lastActivityTimestampMs,n[6]=o.parentThreadKey,n[5]=o.disappearingThreadKey,n[7]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[4],e[7])&&t.i64.neq(n[5],void 0)?(t.i64.eq(e[1],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[6],t.i64.cast([0,0]))?(a=[n[6],o.folderName],n[8]=a[0],n[9]=a[1]):(i=[e[1],n[2]],n[8]=i[0],n[9]=i[1]),t.db.table(9).put({threadKey:e[0],parentThreadKey:n[8],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[9],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:n[4],lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26],disappearingThreadKey:n[5],isDisappearingMode:n[7]})):t.db.table(9).put({threadKey:e[0],parentThreadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[2],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:e[7],lastReadWatermarkTimestampMs:e[8],muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26],disappearingThreadKey:n[5],isDisappearingMode:n[7]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertCommunityUnjoinedThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSMinosVerifySingleEpoch.nop",["EBMinosInterfaceTypes","EBMinosQplFlow","I64","Promise","WAGetSafeQPLError","gkx","qex","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("EBMinosVerifySingleEpoch").__setRef("LSMinosVerifySingleEpoch.nop"),c=function(a,i,l,c,d,m,p,_,f){if(!(r("qex")._("208")===!0||r("gkx")("17219")))return(s||(s=n("Promise"))).resolve([!1]);var t=o("EBMinosQplFlow").startMinosVerifySingleEpochQpl({entryPoint:"verify-single-epoch-native-op"});try{var g,h=(g=o("EBMinosInterfaceTypes")).unsafeCastToBase64StringIntToEpochNumber(l),y=g.unsafeCastToMailboxAuthPK(p),C=g.unsafeCastToMailboxEncryptionPK(m),b=g.unsafeCastToMailboxSigningPK(d),v=g.unsafeCastToUserFbId((e||(e=o("I64"))).to_string(c)),S=o("EBMinosInterfaceTypes").unsafeCastToEpochSelfSig(f),R=_!=null?o("EBMinosInterfaceTypes").unsafeCastToEpochHead(_):void 0;return u.load().then(function(e){return e.minosVerifySingleEpoch(h,v,b,C,y,R,S,t)})}catch(e){return t.endFailWithError("runtime-error",o("WAGetSafeQPLError").getSafeQPLErrorMessage(e)),(s||(s=n("Promise"))).resolve([!1])}};c.__nop_name__="LSMinosVerifySingleEpoch",l.default=c}),98);
__d("LSSetThreadImageURL",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({threadPictureUrl:e[1]===""?void 0:e[1],threadPictureUrlFallback:e[2],threadPictureUrlExpirationTimestampMs:e[3],isCustomThreadPicture:e[4],shouldRoundThreadPicture:e[5]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetThreadImageURLStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSWriteMinosPublicKey.nop",["EBMinosInterfaceTypes","EBMinosQplFlow","I64","Promise","WALongInt","WATimeUtils","cr:12274","gkx","promiseDone","qex","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("EBWriteMinosMailboxKeysToCache").__setRef("LSWriteMinosPublicKey.nop"),c=function(a,i,l,c,d,m,p,_,f,g,h,y){if(!(r("qex")._("208")||r("gkx")("17219"))||p==null)return(s||(s=n("Promise"))).resolve();var t=o("EBMinosQplFlow").startMinosWritePublicKeysQpl();return n("cr:12274")!=null&&t.addAnnotations({bool:{isBackendSetupInProgress:n("cr:12274").isBackendSetupInProgress(),isBackendSetupSuccessful:n("cr:12274").isBackendSetupSuccessful()}}),c==null||d==null||m==null||_==null?(t.endFailWithError("missing_required_values"),(s||(s=n("Promise"))).resolve()):(t.addPoint("mailbox_to_cache_deferred_load_start"),r("promiseDone")(u.load().then(function(n){var r;return t.addPoint("mailbox_to_cache_deferred_load_end"),n.writeMinosMailboxKeysToCache({contactId:(r=o("EBMinosInterfaceTypes")).unsafeCastToUserFbId((e||(e=o("I64"))).to_string(l)),encryptionPublicKey:o("EBMinosInterfaceTypes").unsafeCastToMailboxEncryptionPK(m),epochAnonId:o("EBMinosInterfaceTypes").unsafeCastToBase64StringIntToEpochNumber(c),epochHead:o("EBMinosInterfaceTypes").unsafeCastToEpochHead(p),epochHeadCreationTime:o("EBMinosInterfaceTypes").unsafeCastToEpochCreationTime(o("WATimeUtils").castLongIntToUnixTime(o("WALongInt").decimalStringToLongInt(e.to_string(d)))),publicKeyFbid:o("EBMinosInterfaceTypes").unsafeCastToMailboxFbId(o("WALongInt").decimalStringToLongInt(e.to_string(_))),qplFlow:t})})),(s||(s=n("Promise"))).resolve())};c.__nop_name__="LSWriteMinosPublicKey",l.default=c}),98);
__d("LSDeleteThenInsertContact",["LSBase64Decode.nop","LSMinosVerifySingleEpoch.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","LSSetThreadImageURL","LSWriteMinosPublicKey.nop","gkx","qex"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(a){return t.sequence([function(r){return e[50]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[50]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[0]=o[25]}]):t.resolve(o[0]=void 0)},function(r){return e[52]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[52]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[1]=o[25]}]):t.resolve(o[1]=void 0)},function(r){return e[53]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[53]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[2]=o[25]}]):t.resolve(o[2]=void 0)},function(r){return e[55]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[55]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[3]=o[25]}]):t.resolve(o[3]=void 0)},function(r){return e[56]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[56]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[4]=o[25]}]):t.resolve(o[4]=void 0)},function(r){return e[57]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[57]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[5]=o[25]}]):t.resolve(o[5]=void 0)},function(r){return e[58]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[58]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[6]=o[25]}]):t.resolve(o[6]=void 0)},function(e){return o[21]="LSContactDeleteThenInsertContactStoredProcedure",o[7]=t.i64.random(),o[8]=t.i64.to_string(o[7]),o[8]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,1021650676]),o[8],!0,void 0):t.resolve()},function(e){return o[8]!==void 0&&o[21]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"MinosPublicKeyClientUtils",o[21]):t.resolve()},function(a){var i,l,s;return o[22]=(function(e){return e==null?void 0:e})(r("qex")._("201")),o[22]!==void 0?o[9]=o[22]:o[9]=!1,o[9]&&r("gkx")("16269")?t.sequence([function(r){return t.blobs.eq(o[2],void 0)&&t.blobs.eq(o[1],void 0)&&t.i64.eq(e[51],void 0)&&t.i64.eq(e[54],void 0)&&t.blobs.eq(o[3],void 0)&&t.blobs.eq(o[4],void 0)&&t.blobs.eq(o[5],void 0)&&t.blobs.eq(o[0],void 0)?t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_minos_keys_null"):t.resolve()},function(t){var n;return n=[o[0],o[2],o[1],e[51],e[54],o[3],o[4],o[5],o[6]],o[25]=n[0],o[26]=n[1],o[27]=n[2],o[28]=n[3],o[29]=n[4],o[30]=n[5],o[31]=n[6],o[32]=n[7],o[33]=n[8],n}]):t.sequence([function(r){return t.blobs.neq(o[2],void 0)?t.sequence([function(r){return t.blobs.neq(o[4],void 0)?t.sequence([function(r){return t.blobs.neq(o[3],void 0)?t.sequence([function(r){return t.blobs.neq(o[0],void 0)?t.sequence([function(r){return t.blobs.neq(o[5],void 0)?t.sequence([function(r){return t.nativeOperation(n("LSMinosVerifySingleEpoch.nop"),o[2],e[0],o[3],o[0],o[4],o[6],o[5]).then(function(e){var t;return t=e,o[48]=t[0],t})},function(r){return o[48]?o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_native_op_success"):t.resolve():t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_native_op_failure"):t.resolve()},function(r){return o[49]=["MinosPublicKeyClientUtils",".",["Key verification failed for contact id: ","",t.i64.to_string(e[0])].join("")].join(""),o[8]!==void 0&&o[49]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"error",o[49]):t.resolve()},function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[8],!1):t.resolve()}])},function(e){return o[47]=o[48]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Epoch Signature Self"):t.resolve()},function(e){return o[47]=!1}])},function(e){return o[46]=o[47]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Encryption Public Key"):t.resolve()},function(e){return o[46]=!1}])},function(e){return o[45]=o[46]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Signing Public Key"):t.resolve()},function(e){return o[45]=!1}])},function(e){return o[44]=o[45]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Auth Public Key"):t.resolve()},function(e){return o[44]=!1}])},function(e){return o[34]=o[44]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Epoch Anon ID"):t.resolve()},function(e){return o[34]=!1}])},function(r){var a;return o[34]?t.resolve((a=[o[0],o[2],o[1],e[51],e[54],o[3],o[4],o[5],o[6]],o[35]=a[0],o[36]=a[1],o[37]=a[2],o[38]=a[3],o[39]=a[4],o[40]=a[5],o[41]=a[6],o[42]=a[7],o[43]=a[8],a)):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_epoch_verify_return_existing_contact_minos_keys_due_to_failure"):t.resolve()},function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: verification failed"):t.resolve()},function(n){var r,a,i;return o[44]=t.createArray(),o[57]=(o[44].push(e[0]),o[44]),o[45]=new t.Map,o[46]=o[45].get(e[0]),o[46]?o[47]=!1:o[47]=!0,o[47]?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],o[48]=a[0],o[49]=a[1],o[50]=a[2],o[51]=a[3],o[52]=a[4],o[53]=a[5],o[54]=a[6],o[55]=a[7],o[56]=a[8]):(o[57]=o[46].get("mailbox_encryption_public_key"),o[58]=o[46].get("epoch_anon_id"),o[59]=o[46].get("epoch_head"),o[60]=o[46].get("epoch_head_creation_time"),o[61]=o[46].get("minos_mailbox_public_keys_fbid"),r=[o[57],o[58],o[59],o[60],o[61],void 0,void 0,void 0,void 0],o[48]=r[0],o[49]=r[1],o[50]=r[2],o[51]=r[3],o[52]=r[4],o[53]=r[5],o[54]=r[6],o[55]=r[7],o[56]=r[8]),i=[o[48],o[49],o[50],o[51],o[52],o[53],o[54],o[55],o[56]],o[35]=i[0],o[36]=i[1],o[37]=i[2],o[38]=i[3],o[39]=i[4],o[40]=i[5],o[41]=i[6],o[42]=i[7],o[43]=i[8]}])},function(e){var t;return t=[o[35],o[36],o[37],o[38],o[39],o[40],o[41],o[42],o[43]],o[25]=t[0],o[26]=t[1],o[27]=t[2],o[28]=t[3],o[29]=t[4],o[30]=t[5],o[31]=t[6],o[32]=t[7],o[33]=t[8],t}])},function(e){var t;return t=[o[25],o[26],o[27],o[28],o[29],o[30],o[31],o[32],o[33]],o[10]=t[0],o[11]=t[1],o[12]=t[2],o[13]=t[3],o[14]=t[4],o[15]=t[5],o[16]=t[6],o[17]=t[7],o[18]=t[8],t}]):t.resolve((o[25]=t.createArray(),o[38]=(o[25].push(e[0]),o[25]),o[26]=new t.Map,o[27]=o[26].get(e[0]),o[27]?o[28]=!1:o[28]=!0,o[28]?(l=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],o[29]=l[0],o[30]=l[1],o[31]=l[2],o[32]=l[3],o[33]=l[4],o[34]=l[5],o[35]=l[6],o[36]=l[7],o[37]=l[8]):(o[38]=o[27].get("mailbox_encryption_public_key"),o[39]=o[27].get("epoch_anon_id"),o[40]=o[27].get("epoch_head"),o[41]=o[27].get("epoch_head_creation_time"),o[42]=o[27].get("minos_mailbox_public_keys_fbid"),i=[o[38],o[39],o[40],o[41],o[42],void 0,void 0,void 0,void 0],o[29]=i[0],o[30]=i[1],o[31]=i[2],o[32]=i[3],o[33]=i[4],o[34]=i[5],o[35]=i[6],o[36]=i[7],o[37]=i[8]),s=[o[29],o[30],o[31],o[32],o[33],o[34],o[35],o[36],o[37]],o[10]=s[0],o[11]=s[1],o[12]=s[2],o[13]=s[3],o[14]=s[4],o[15]=s[5],o[16]=s[6],o[17]=s[7],o[18]=s[8]))},function(a){return o[23]=(function(e){return e==null?void 0:e})(r("qex")._("201")),o[23]!==void 0?o[19]=o[23]:o[19]=!1,o[19]&&r("gkx")("16269"),o[24]=(function(e){return e==null?void 0:e})(r("qex")._("201")),o[24]!==void 0?o[20]=o[24]:o[20]=!1,o[20]&&r("gkx")("16269")?t.nativeOperation(n("LSWriteMinosPublicKey.nop"),e[0],o[11],o[13],o[10],o[12],o[14],o[17],o[16],o[15],o[18]):t.resolve()},function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[8],!0):t.resolve()},function(n){return t.i64.eq(e[23],t.i64.cast([0,39423]))?o[25]=t.i64.cast([0,1]):(t.i64.eq(e[23],t.i64.cast([0,14342874]))?o[26]=t.i64.cast([0,2]):o[26]=void 0,o[25]=o[26]),t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))&&t.i64.gt(n.authorityLevel,e[21])}).next().then(function(n){var r=n.done,a=n.value;return r?t.db.table(7).put({id:e[0],profilePictureUrl:e[2],profilePictureFallbackUrl:e[3],profilePictureUrlExpirationTimestampMs:e[4],profilePictureLargeUrl:e[5],profilePictureLargeFallbackUrl:e[6],profilePictureLargeUrlExpirationTimestampMs:e[7],name:e[9],secondaryName:e[41],normalizedNameForSearch:e[10],normalizedSearchTerms:e[33],isMessengerUser:e[11],isMemorialized:e[12],isManagedByViewer:e[35],blockedByViewerStatus:e[14],rank:e[17],firstName:e[18],contactType:e[19],contactTypeExact:e[20],authorityLevel:e[21],messengerCallLogThirdPartyId:e[22],profileRingColor:e[23],requiresMultiway:e[24],blockedSinceTimestampMs:e[25],fbUnblockedSinceTimestampMs:e[48],canViewerMessage:e[26],profileRingColorExpirationTimestampMs:e[27],phoneNumber:e[28],emailAddress:e[29],workCompanyId:e[30],workCompanyName:e[31],workJobTitle:e[32],deviceContactId:e[34],workForeignEntityType:e[36],capabilities:e[37],capabilities2:e[38],profileRingState:o[25],contactViewerRelationship:e[39],gender:e[40],username:e[43],contactReachabilityStatusType:e[44],friendshipStatus:e[45],restrictionType:e[46],waConnectStatus:e[47],isEmployee:!1,pageType:e[49]}):0})},function(r){return t.storedProcedure(n("LSSetThreadImageURL"),e[0],e[2],e[3],e[4],!1,!0)}])},function(e){return t.resolve(a)}])}e.__sproc_name__="LSContactDeleteThenInsertContactStoredProcedure",e.__tables__=["contacts"];var s=e;l.default=s}),98);
__d("LSDeleteThenInsertMessageRequest",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(34).put({threadKey:e[0],messageRequestStatus:e[2]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertMessageRequestStoredProcedure",e.__tables__=["message_requests"],a.exports=e}),null);
__d("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(175).put({id:e[0],globalMuteUntil:e[1],showMessagePreview:e[4],isSoundOn:e[7],groupNotificationSetting:e[8],oneToOneNotificationSetting:e[9],replyReminderSetting:e[10],messageReminderDisabled:e[12],messageSound:e[13],ringtoneSound:e[14],newFriendBumpDisabledSetting:e[15],globalMuteMessageUntil:e[2],globalMuteCallUntil:e[3],includeInSwitchAccountBadges:e[11],dismissNfbThreadsCount:e[16],mutePageAccountMessageReminder:e[17]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertNotificationsSettingsGraphQLSnapshotStoredProcedure",e.__tables__=["notification_settings"],a.exports=e}),null);
__d("LSDeleteThenInsertRankingRequest",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(135).put({scoreType:e[0],requestId:e[1]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSRankingDeleteThenInsertRankingRequestStoredProcedure",e.__tables__=["ranking_requests"],a.exports=e}),null);
__d("LSDeleteThenInsertRankingScore",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(134).put({contactId:e[0],scoreType:e[1],contactType:e[2],score:e[3],scoreIndex:e[4]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSRankingDeleteThenInsertRankingScoreStoredProcedure",e.__tables__=["ranking_scores"],a.exports=e}),null);
__d("LSDeleteThenInsertThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[7]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).put({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[29],parentThreadKey:e[35],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteCallsExpireTimeMs:e[15],groupNotificationSettings:e[16],isAdminSnippet:e[17],snippetSenderContactId:e[18],snippetText:e[20],snippetStringHash:e[21],snippetStringArgument1:e[22],snippetAttribution:e[23],snippetAttributionStringHash:e[24],disappearingSettingTtl:e[25],disappearingSettingUpdatedTs:e[26],disappearingSettingUpdatedBy:e[27],cannotReplyReason:e[30],customEmoji:e[31],customEmojiImageUrl:e[32],outgoingBubbleColor:e[33],themeFbid:e[34],nullstateDescriptionText1:e[36],nullstateDescriptionType1:e[37],nullstateDescriptionText2:e[38],nullstateDescriptionType2:e[39],nullstateDescriptionText3:e[40],nullstateDescriptionType3:e[41],snippetHasEmoji:e[42],hasPersistentMenu:e[43],disableComposerInput:e[44],cannotUnsendReason:e[45],viewedPluginKey:e[46],viewedPluginContext:e[47],clientThreadKey:e[48],capabilities:e[49],shouldRoundThreadPicture:e[50],proactiveWarningDismissTime:e[51],isCustomThreadPicture:e[52],otidOfFirstMessage:e[53],normalizedSearchTerms:e[54],additionalThreadContext:e[55],disappearingThreadKey:e[56],isDisappearingMode:e[57],disappearingModeInitiator:e[58],unreadDisappearingMessageCount:e[59],lastMessageCtaId:e[61],lastMessageCtaType:e[62],consistentThreadFbid:e[63],threadDescription:e[64],unsendLimitMs:e[65],syncGroup:e[66],threadInvitesEnabled:e[67],threadInviteLink:e[68],numUnreadSubthreads:e[69],subthreadCount:e[70],threadInvitesEnabledV2:e[71],joinRequestApprovalSetting:e[72],pendingJoinRequestsCount:e[73],eventStartTimestampMs:e[74],eventEndTimestampMs:e[75],takedownState:e[76],memberCount:e[77],admodCount:e[78],secondaryParentThreadKey:e[79],igFolder:e[80],inviterId:e[81],threadTags:e[82],readReceiptsDisabledV2:e[83],threadStatus:e[84],threadSubtype:e[85],pauseThreadTimestamp:e[86],metadata:e[87],syncSource:e[88]}):(o=s.item,n[1]=o.lastActivityTimestampMs,n[3]=o.parentThreadKey,n[2]=o.disappearingThreadKey,n[4]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[1],e[0])&&t.i64.neq(n[2],void 0)?(t.i64.eq(e[35],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[3],t.i64.cast([0,0]))?(a=[n[3],o.folderName],n[5]=a[0],n[6]=a[1]):(i=[e[35],e[10]],n[5]=i[0],n[6]=i[1]),t.db.table(9).put({threadKey:e[7],lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:n[6],ongoingCallState:e[29],parentThreadKey:n[5],lastActivityTimestampMs:n[1],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteCallsExpireTimeMs:e[15],groupNotificationSettings:e[16],isAdminSnippet:e[17],snippetSenderContactId:e[18],snippetText:e[20],snippetStringHash:e[21],snippetStringArgument1:e[22],snippetAttribution:e[23],snippetAttributionStringHash:e[24],disappearingSettingTtl:e[25],disappearingSettingUpdatedTs:e[26],disappearingSettingUpdatedBy:e[27],cannotReplyReason:e[30],customEmoji:e[31],customEmojiImageUrl:e[32],outgoingBubbleColor:e[33],themeFbid:e[34],nullstateDescriptionText1:e[36],nullstateDescriptionType1:e[37],nullstateDescriptionText2:e[38],nullstateDescriptionType2:e[39],nullstateDescriptionText3:e[40],nullstateDescriptionType3:e[41],snippetHasEmoji:e[42],hasPersistentMenu:e[43],disableComposerInput:e[44],cannotUnsendReason:e[45],viewedPluginKey:e[46],viewedPluginContext:e[47],clientThreadKey:e[48],capabilities:e[49],shouldRoundThreadPicture:e[50],proactiveWarningDismissTime:e[51],isCustomThreadPicture:e[52],otidOfFirstMessage:e[53],normalizedSearchTerms:e[54],additionalThreadContext:e[55],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[58],unreadDisappearingMessageCount:e[59],lastMessageCtaId:e[61],lastMessageCtaType:e[62],consistentThreadFbid:e[63],threadDescription:e[64],unsendLimitMs:e[65],syncGroup:e[66],threadInvitesEnabled:e[67],threadInviteLink:e[68],numUnreadSubthreads:e[69],subthreadCount:e[70],threadInvitesEnabledV2:e[71],joinRequestApprovalSetting:e[72],pendingJoinRequestsCount:e[73],eventStartTimestampMs:e[74],eventEndTimestampMs:e[75],takedownState:e[76],memberCount:e[77],admodCount:e[78],secondaryParentThreadKey:e[79],igFolder:e[80],inviterId:e[81],threadTags:e[82],readReceiptsDisabledV2:e[83],threadStatus:e[84],threadSubtype:e[85],pauseThreadTimestamp:e[86],metadata:e[87],syncSource:e[88]})):t.db.table(9).put({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[29],parentThreadKey:e[35],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteCallsExpireTimeMs:e[15],groupNotificationSettings:e[16],isAdminSnippet:e[17],snippetSenderContactId:e[18],snippetText:e[20],snippetStringHash:e[21],snippetStringArgument1:e[22],snippetAttribution:e[23],snippetAttributionStringHash:e[24],disappearingSettingTtl:e[25],disappearingSettingUpdatedTs:e[26],disappearingSettingUpdatedBy:e[27],cannotReplyReason:e[30],customEmoji:e[31],customEmojiImageUrl:e[32],outgoingBubbleColor:e[33],themeFbid:e[34],nullstateDescriptionText1:e[36],nullstateDescriptionType1:e[37],nullstateDescriptionText2:e[38],nullstateDescriptionType2:e[39],nullstateDescriptionText3:e[40],nullstateDescriptionType3:e[41],snippetHasEmoji:e[42],hasPersistentMenu:e[43],disableComposerInput:e[44],cannotUnsendReason:e[45],viewedPluginKey:e[46],viewedPluginContext:e[47],clientThreadKey:e[48],capabilities:e[49],shouldRoundThreadPicture:e[50],proactiveWarningDismissTime:e[51],isCustomThreadPicture:e[52],otidOfFirstMessage:e[53],normalizedSearchTerms:e[54],additionalThreadContext:e[55],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[58],unreadDisappearingMessageCount:e[59],lastMessageCtaId:e[61],lastMessageCtaType:e[62],consistentThreadFbid:e[63],threadDescription:e[64],unsendLimitMs:e[65],syncGroup:e[66],threadInvitesEnabled:e[67],threadInviteLink:e[68],numUnreadSubthreads:e[69],subthreadCount:e[70],threadInvitesEnabledV2:e[71],joinRequestApprovalSetting:e[72],pendingJoinRequestsCount:e[73],eventStartTimestampMs:e[74],eventEndTimestampMs:e[75],takedownState:e[76],memberCount:e[77],admodCount:e[78],secondaryParentThreadKey:e[79],igFolder:e[80],inviterId:e[81],threadTags:e[82],readReceiptsDisabledV2:e[83],threadStatus:e[84],threadSubtype:e[85],pauseThreadTimestamp:e[86],metadata:e[87],syncSource:e[88]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSFlushSyncTrace",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(153).fetch(),function(n){return t.i64.eq(n.traceType,t.i64.cast([0,2]))&&n.contextOne===e[1]&&n.contextThree===e[0]}),function(e){var t=e.update,n=e.item;return t({shouldFlush:!0})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSDataTraceFlushSyncTraceStoredProcedure",e.__tables__=["data_trace_meta"],a.exports=e}),null);
__d("LSExecuteFinallyBlockForSyncTransaction",["LSFlushSyncTrace"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(3).fetch([[["",e[1]]]]),function(n){return n.taskQueueName===""&&t.i64.eq(n.syncDatabaseId,e[1])&&t.i64.eq(n.epochId,e[2])}),function(n){var r=n.update,o=n.item;return r({epochId:!e[0]&&t.i64.eq(o.failureCount,t.i64.cast([-1,4294967295]))?o.epochId:void 0,failureCount:t.i64.eq(o.failureCount,t.i64.cast([-1,4294967295]))?t.i64.cast([0,0]):t.i64.add(o.failureCount,t.i64.cast([0,1]))})})},function(e){return t.resolve()}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreExecuteFinallyBlockForSyncTransactionStoredProcedure",e.__tables__=["network_requests"],a.exports=e}),null);
__d("LSExecuteFirstBlockForSyncTransaction",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSLogEventAnnotate.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return t.resolve()},function(o){return t.filter(t.db.table(3).fetch([[["",e[0]]]]),function(n){return n.taskQueueName===""&&t.i64.eq(n.syncDatabaseId,e[0])&&t.i64.eq(n.epochId,e[1])}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return t.db.table(3).fetch([[["",e[0]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[2]=void 0:(t=o.item,r[2]=t.epochId)})},function(o){return r[4]=",",(function(e){t.logger(e).mustfix(e)})(["epoch mismatch",r[4]," db_type=",r[4],t.i64.to_string(e[0]),r[4]," previous_cursor=",r[4],e[2]==null?"null":e[2],r[4]," next_cursor=",r[4],e[3],r[4]," server_epoch_id=",r[4],t.i64.to_string(e[1]),r[4]," client_epoch_id=",r[4],r[2]==null?"null":r[2]].join("")),r[5]=new t.Map,r[5].set("database_id",e[0]),r[5].set("epoch_id",e[1]),r[5].set("sync_status",e[4]),r[5].set("next_cursor",e[3]),r[5].set("error_msg","epoch mismatch"),e[9]?r[6]=!1:r[6]=!0,r[6]?t.resolve():(r[8]=e[9].keys(),r[9]=t.i64.of_int32(r[8].length),t.i64.gt(r[9],t.i64.cast([0,0]))?t.loopAsync(r[9],function(o){return r[10]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[8],r[10]).then(function(e){var t;return t=e,r[11]=t[0],r[12]=t[1],t})},function(t){return r[13]=e[9].get(r[11]),r[5].set(r[11],r[13])}])}):t.resolve())},function(e){return t.nativeOperation(n("LSLogEventAnnotate.nop"),t.i64.cast([0,16]),t.i64.cast([0,35]),t.i64.cast([0,0]),r[5])},function(e){return r[7]=!1,r[0]=r[7]}]):(a=l.item,t.sequence([function(o){return t.filter(t.db.table(1).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.groupId,e[0])&&n.currentCursor===e[2]}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return t.db.table(3).fetch([[["",e[0]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[4]=void 0:(t=o.item,r[4]=t.epochId)})},function(o){return r[6]=",",(function(e){t.logger(e).mustfix(e)})(["cursor mismatch",r[6]," db_type=",r[6],t.i64.to_string(e[0]),r[6]," previous_cursor=",r[6],e[2]==null?"null":e[2],r[6]," next_cursor=",r[6],e[3],r[6]," server_epoch_id=",r[6],t.i64.to_string(e[1]),r[6]," client_epoch_id=",r[6],r[4]==null?"null":r[4]].join("")),r[7]=new t.Map,r[7].set("database_id",e[0]),r[7].set("epoch_id",e[1]),r[7].set("sync_status",e[4]),r[7].set("next_cursor",e[3]),r[7].set("error_msg","cursor mismatch"),e[9]?r[8]=!1:r[8]=!0,r[8]?t.resolve():(r[10]=e[9].keys(),r[11]=t.i64.of_int32(r[10].length),t.i64.gt(r[11],t.i64.cast([0,0]))?t.loopAsync(r[11],function(o){return r[12]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[10],r[12]).then(function(e){var t;return t=e,r[13]=t[0],r[14]=t[1],t})},function(t){return r[15]=e[9].get(r[13]),r[7].set(r[13],r[15])}])}):t.resolve())},function(e){return t.nativeOperation(n("LSLogEventAnnotate.nop"),t.i64.cast([0,16]),t.i64.cast([0,35]),t.i64.cast([0,0]),r[7])},function(e){return r[9]=!1,r[2]=r[9]}]):(a=l.item,t.sequence([function(n){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(n){var o=n.update,a=n.item;return o({currentCursor:e[3],syncStatus:e[4],sendSyncParams:e[5],minTimeToSyncTimestampMs:t.i64.eq(e[6],t.i64.cast([0,0]))?t.i64.cast([0,0]):t.i64.add(r[4],e[6]),canIgnoreTimestamp:e[7],syncChannel:e[8],lastSyncCompletedTimestampMs:r[5]})})},function(n){return t.forEach(t.db.table(3).fetch([[["",e[0]]]]),function(e){var n=e.update,r=e.item;return n({failureCount:t.i64.cast([-1,4294967295])})})},function(o){return r[6]=new t.Map,r[6].set("database_id",e[0]),r[6].set("epoch_id",e[1]),r[6].set("sync_status",e[4]),r[6].set("next_cursor",e[3]),e[9]?r[7]=!1:r[7]=!0,r[7]?t.resolve():(r[9]=e[9].keys(),r[10]=t.i64.of_int32(r[9].length),t.i64.gt(r[10],t.i64.cast([0,0]))?t.loopAsync(r[10],function(o){return r[11]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[9],r[11]).then(function(e){var t;return t=e,r[12]=t[0],r[13]=t[1],t})},function(t){return r[14]=e[9].get(r[12]),r[6].set(r[12],r[14])}])}):t.resolve())},function(e){return t.nativeOperation(n("LSLogEventAnnotate.nop"),t.i64.cast([0,16]),t.i64.cast([0,35]),t.i64.cast([0,0]),r[6])},function(e){return r[8]=!0,r[2]=r[8]}]))})},function(e){return r[0]=r[2]}]))})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreExecuteFirstBlockForSyncTransactionStoredProcedure",e.__tables__=["data_trace_meta","network_requests","sync_groups"],a.exports=e}),null);
__d("MAWDeanonDataCheck",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=t;return n||(r=t+1),e.length>=r}i.hasEnoughDeanonData=e}),66);
__d("MAWEBMsgsWithSameSortOrderFix",["MAWMessagesCompare","MAWMessagesDirection","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n;if(t==null)return e;var o=(n=r("qex")._("23"))!=null?n:0;return e+o}function s(e){var t=e.direction,n=e.includeReferenceExternalId,a=e.msgCount,i=e.referenceExternalId,l=e.sourceMsgs;if(!r("qex")._("18"))return l;var s=d(l,t),p=o("MAWMessagesCompare").getSortComparisonFunctionForDirection(s),_=l.toSorted(p),f=_.findIndex(function(e){return e.externalId===i});if(m({fetchDirection:t,msgsDirection:s}))return f=u({includeReferenceExternalId:n,referenceMsgIndex:f}),_.slice(f,f+a);f=c({includeReferenceExternalId:n,msgsCount:_.length,referenceMsgIndex:f});var g=Math.max(0,f-a+1);return _.slice(g,f+1)}function u(e){var t=e.includeReferenceExternalId,n=e.referenceMsgIndex;return n===-1?0:t?n:n+1}function c(e){var t=e.includeReferenceExternalId,n=e.msgsCount,r=e.referenceMsgIndex;return r===-1?n-1:t?r:r-1}function d(e,t){var n,r,a=(n=e.find(function(e){return e.sortOrderMs!=null}))==null?void 0:n.sortOrderMs,i=(r=e.findLast(function(e){return e.sortOrderMs!=null}))==null?void 0:r.sortOrderMs;return a==null||i==null?o("MAWMessagesDirection").translateMawDirectionToMwpDirection(t):a>=i?"desc":"asc"}function m(e){var t=e.fetchDirection,n=e.msgsDirection;return t==="before"&&n==="desc"||t==="after"&&n==="asc"}l.overFetchEBMsgsIfNeeded=e,l.fixEBMessagesPagination=s}),98);
__d("MAWEBDeanonFetch",["EBMessageMetadataQuery","FBLogger","MAWEBMsgsWithSameSortOrderFix","WAJids","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.chatJid,n=e.count,a=e.direction,i=e.includeReferenceTimestamp,l=e.referenceExternalId,s=e.referenceTimestampMs,u=e.sortFn;try{var c=o("MAWEBMsgsWithSameSortOrderFix").overFetchEBMsgsIfNeeded(n,l),d=yield o("EBMessageMetadataQuery").messageMetadataQueryForMainThreadMAWDeanon({direction:a,includeAnonymizedMessages:!1,numberOfMessages:c,referenceTimestamp:s,threadId:o("WAJids").threadIdForChatJid(t)});if(d.success===!1)return o("WAResultOrError").DEPRECATED_makeError("error",d.payload);var m=d.value.messages,p=m.reduce(function(e,t){var n=t.offlineThreadingId,r=t.sortOrderMs;if(n==null||r==null)return e;var o=Number(r);return i!==!0&&o===s||e.push({externalId:n,msgType:"unknown-deanon",sortOrderMs:o}),e},[]),_=o("MAWEBMsgsWithSameSortOrderFix").fixEBMessagesPagination({direction:a,includeReferenceExternalId:i,msgCount:n,referenceExternalId:l,sourceMsgs:p}),f=u==null?_:_.sort(u);return o("WAResultOrError").makeResult(f)}catch(e){var g=r("getErrorSafe")(e);return r("FBLogger")("messenger_web_missing_messages").catching(g).mustfix("Deanon GraphQL fails with error"),o("WAResultOrError").DEPRECATED_makeError("request-error",g)}}),s.apply(this,arguments)}l.fetchMessagesMetadataFromEBDeanon=e}),98);
__d("MAWFetchExternalIdUsingCache",["FBLogger","LSDatabaseSingleton","MAWBridgeSendAndReceive","MAWDbMsg","WAStanzaUtils","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(e==="")return null;var t=p(e);if(t!=null)return t;if(t=yield d(e),t!=null)return _(e,t),t;try{var n=o("MAWDbMsg").toMsgId(e);if(n==null)return r("FBLogger")("messenger_web").warn("[MAWFetchProtocolMessageIdUsingCache] failed fetch external id, invalid msgId %s",e),null;var a=yield o("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:n});return(a==null?void 0:a.externalId)==null?(r("FBLogger")("messenger_web").warn("[MAWFetchProtocolMessageIdUsingCache] external id for msgId %s not found",e),null):(_(e,a.externalId),a.externalId)}catch(e){var i=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(i).mustfix("[MAWFetchProtocolMessageIdUsingCache] getProtocolMsgIdByMsgId bridge call failed"),i}}),c.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton,r=yield n.tables.messages.index("messageId").get(t);return r!=null?o("WAStanzaUtils").toStanzaId(r.offlineThreadingId):null}),m.apply(this,arguments)}function p(e){return s.get(e)}function _(e,t){return e===""?!1:(s.set(e,t),!0)}l.fetchExternalIdUsingCache=u,l.populateExternalIdCache=_}),98);
__d("MAWMessagesPaginationUtils",["FBLogger","MAWFetchExternalIdUsingCache","MAWMessagesDirection","Promise","WAStanzaUtils","asyncToGeneratorRuntime","qex"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=o("MAWMessagesDirection").getRangeMsgIdForDirection(e,t);return c(n)}function u(e){r("qex")._("18")&&e.forEach(function(e){return o("MAWFetchExternalIdUsingCache").populateExternalIdCache(e.msgId.toString(),o("WAStanzaUtils").toStanzaId(e.externalId))})}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(e==null||e===""||!r("qex")._("18"))return null;var t=yield o("MAWFetchExternalIdUsingCache").fetchExternalIdUsingCache(e);return t==null&&r("FBLogger")("messenger_web").mustfix("[MAWMessagesPaginationUtils] getExternalIdByMsgId for msgId: %s returned null",e),t}),d.apply(this,arguments)}function m(t,r,o){return t===r?(e||(e=n("Promise"))).resolve(o):p(r)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!r("qex")._("18"))return{maxExternalId:null,minExternalId:null};var t=yield c(e.minMessageId),n=yield c(e.maxMessageId);return{maxExternalId:n==null?void 0:n.toString(),minExternalId:t==null?void 0:t.toString()}}),_.apply(this,arguments)}l.getRangeExternalIdForDirection=s,l.populateExternalIdCache=u,l.getExternalIdByMsgId=c,l.getMessagesRangesV2ExternalIdsIfChanged=m,l.getMessagesRangesV2ExternalIds=p}),98);
__d("MAWFetchEBDeanonMessagesMetadata",["DateConsts","EBFormatUtils","FBLogger","I64","MAWEBDeanonFetch","MAWMessagesDirection","MAWMessagesPaginationUtils","Promise","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=100,c="timeout",d=10*o("DateConsts").MS_PER_SEC;function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.chatJid,i=t.direction,l=t.includeReferenceTimestamp,m=t.logger,p=t.range,_=t.sortFn;r("FBLogger")("messenger_web").info("EBMessageRangeDataSource: Issuing fetch request to EB Deanon API"),m==null||m.markQPLPoint("eb_fetch_deanon_start");var f=o("MAWMessagesDirection").translateMwpDirectionToMawDirection(i),g=(s||(s=o("I64"))).to_float(o("EBFormatUtils").adjustTs(o("MAWMessagesDirection").getI64RangeTimestampForDirection(i,p),f)),h=yield o("MAWMessagesPaginationUtils").getRangeExternalIdForDirection(i,p);return(e||(e=n("Promise"))).race([o("MAWEBDeanonFetch").fetchMessagesMetadataFromEBDeanon({chatJid:a,count:u,direction:f,includeReferenceTimestamp:l,referenceExternalId:h,referenceTimestampMs:g,sortFn:_}),new e(function(e){return window.setTimeout(function(){return e(o("WAResultOrError").makeError(c))},d)})]).then(function(e){return m==null||m.markQPLPoint("eb_fetch_deanon_end"),e})}),p.apply(this,arguments)}l.fetchEBDeanonMessagesMetadata=m}),98);
__d("MAWSubscribeToLSTruncateMetadataThreads",["I64","Int64Hooks","MAWMiActMappingTableAPI","gkx","promiseDone","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t,n){return r("gkx")("9855")?o("MAWMiActMappingTableAPI").subscribeToMappingDeletion(t,n):function(){}};function u(t,n){var a=r("useAsyncReStore")();o("Int64Hooks").useEffectInt64(function(){if(r("gkx")("9855")){var i=a.then(function(r){return s(r,function(r,a){(e||(e=o("I64"))).equal(a,t)&&n()})});return function(){r("promiseDone")(i,function(e){return e()})}}},[t,a,n])}l.subscribeToLSTruncateMetadataThreads=s,l.useLSTruncateMetadataThread=u}),98);
__d("MAWFetchDeanonMetadataUsingCache",["I64","MAWDeanonDataCheck","MAWFetchEBDeanonMessagesMetadata","MAWMessagesCompare","MAWMessagesDirection","MAWSubscribeToLSTruncateMetadataThreads","WAJids","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("WATagsLogger").TAGS(["MAWFetchDeanonMetadataUsingCache"]),d=new Map,m=r("justknobx")._("3763"),p=new Map,_=null;function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.chatJid,n=e.db,r=e.direction,a=e.isFirstPage,i=e.logger,l=e.pageSize,u=e.range,d=e.sortFn;y(n);var m=h(t,r,i,u);if(m!=null&&(i==null||i.addQPLAnnotations({bool:{is_first_page:a},int:{deanon_cached_data_size:m==null?void 0:m.length}}),o("MAWDeanonDataCheck").hasEnoughDeanonData(m,l,a)))return c.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Using cached Deanon messages metadata for comparison to local data"]))),i==null||i.addQPLAnnotations({bool:{is_deanon_cached_data_used:!0}}),o("WAResultOrError").makeResult(m);var p=yield o("MAWFetchEBDeanonMessagesMetadata").fetchEBDeanonMessagesMetadata({chatJid:t,direction:r,includeReferenceTimestamp:!a,logger:i,range:u,sortFn:d});return p.success===!0&&(i==null||i.addQPLAnnotations({bool:{is_deanon_data_fetched:!0}}),b(t,r,i,p.value,u)),p}),g.apply(this,arguments)}function h(e,t,n,r){var a;n==null||n.markQPLPoint("deanon_cache_fetch_start"),S(e,t);var i=(a=d.get(o("WAJids").threadIdForChatJid(e)))==null?void 0:a.get(t);if(i==null)return null;var l=o("MAWMessagesDirection").getI64RangeTimestampForDirection(t,r),s=(u||(u=o("I64"))).ge(l,i.minTimestampMs)&&(u||(u=o("I64"))).le(l,i.maxTimestampMs);if(!s)return null;var c=o("MAWMessagesDirection").switchOnMWPMessagesDirection(t,{asc:i.msgsMetadata.findIndex(function(e){return(u||(u=o("I64"))).ge(u.of_float(e.sortOrderMs),l)}),desc:i.msgsMetadata.findIndex(function(e){return(u||(u=o("I64"))).le(u.of_float(e.sortOrderMs),l)})}),m=i.msgsMetadata.slice(c);return n==null||n.markQPLPoint("deanon_cache_fetch_end"),m}function y(e){_==null&&(_=o("MAWSubscribeToLSTruncateMetadataThreads").subscribeToLSTruncateMetadataThreads(e,function(e,t){var n=(u||(u=o("I64"))).to_string(e);d.delete(n),p.delete(n)}))}function C(e,t,n,r){var a,i=o("WAJids").threadIdForChatJid(e),l=(a=d.get(i))!=null?a:new Map;l.set(t,{maxTimestampMs:r.max,minTimestampMs:r.min,msgsMetadata:n}),d.set(i,l)}function b(e,t,n,r,a){if(r.length!==0){n==null||n.markQPLPoint("deanon_cache_replace_start");var i=(u||(u=o("I64"))).of_float(r[r.length-1].sortOrderMs),l=o("MAWMessagesDirection").switchOnMWPMessagesDirection(t,{asc:{max:i,min:a.maxTimestampMs},desc:{max:a.minTimestampMs,min:i}});C(e,t,r,l),n==null||n.markQPLPoint("deanon_cache_replace_end")}}function v(e,t){if(t.length!==0){for(var n=[].concat(t).sort(o("MAWMessagesCompare").getSortComparisonFunctionForDirection("desc")),r=0,a=n.length-1;r<a&&n[r].sortOrderMs===n[r+1].sortOrderMs;)r++;if(r!==a){var i=(u||(u=o("I64"))).of_float(n[a].sortOrderMs);p.set(u.to_string(e),{insertTime:Date.now(),minTimestampMs:i,msgsMetadata:n.slice(r)})}}}function S(t,n){var r=R(t,n);r!=null&&(c.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Using init-sync deanon data for ",""])),t),C(t,n,r.msgsMetadata,{max:(u||(u=o("I64"))).max_int,min:r.minTimestampMs}),p.delete(o("WAJids").threadIdForChatJid(t)))}function R(e,t){if(t==="desc"){var n=Date.now(),r=p.get(o("WAJids").threadIdForChatJid(e));if(!(r!=null&&n-r.insertTime>m))return r}}l.MAWFetchDeanonMetadataUsingCache=f,l.fetchDeanonDataFromCache=h,l.initDeanonCacheDescForThread=v}),98);
__d("LSFillDeanonCacheForE2EEThread.nop",["I64","LSShape","LSSynchronousPromise","LSVec","MAWFetchDeanonMetadataUsingCache","PromiseOrValue","ReQL","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n,a,i,l){if(!r("gkx")("15959"))return o("LSSynchronousPromise").makeSynchronousPromise();var t=r("LSVec").toArray(l).map(function(t){var n=o("LSShape").toRecord(t),r=n.offline_threading_id,a=n.sort_order_ms;return{externalId:r,msgType:"unknown-deanon",sortOrderMs:(e||(e=o("I64"))).to_float(a)}}),u=o("ReQL").fromTableAscending(n.mi_act_mapping_table).getKeyRange(i).iterator(new WeakMap);return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise((s||(s=o("PromiseOrValue"))).map(u.next(),function(e){var n;((n=e.value)==null?void 0:n[1].jid)!=null&&o("MAWFetchDeanonMetadataUsingCache").initDeanonCacheDescForThread(e.value[1].jid,t)}))};u.__nop_name__="LSFillDeanonCacheForE2EEThread",l.default=u}),98);
__d("LSFillDeanonCacheForE2EEThread",["LSFillDeanonCacheForE2EEThread.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.nativeOperation(n("LSFillDeanonCacheForE2EEThread.nop"),e[0],e[1])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxFillDeanonCacheForE2EEThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSGetFirstAvailableAttachmentCTAID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.db.table(19).fetchDesc().next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=t.i64.cast([0,1]):(r=a.item,n[0]=t.i64.add(r.ctaId,t.i64.cast([0,1])))})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxGetFirstAvailableAttachmentCTAIDStoredProcedure",e.__tables__=["attachment_ctas"],a.exports=e}),null);
__d("LSShimHybridThreadDeleteByThreadKey.nop",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){});function t(t,n,r){return e.apply(this,arguments)}return t})();e.__nop_name__="LSShimHybridThreadDeleteByThreadKey",i.default=e}),66);
__d("LSHybridThreadDelete",["LSShimHybridThreadDeleteByThreadKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.nativeOperation(n("LSShimHybridThreadDeleteByThreadKey.nop"),e[0])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxHybridThreadDeleteStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSInsertAttachmentCta",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(19).add({ctaId:e[0],attachmentFbid:e[1],attachmentIndex:e[2],threadKey:e[3],messageId:e[5],title:e[6],type_:e[7],platformToken:e[8],actionUrl:e[9],nativeUrl:e[10],urlWebviewType:e[11],actionContentBlob:e[12],enableExtensions:e[13],extensionHeightType:e[14],targetId:e[15]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertAttachmentCtaStoredProcedure",e.__tables__=["attachment_ctas"],a.exports=e}),null);
__d("LSInsertAttachmentItem",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(18).add({attachmentFbid:e[0],attachmentIndex:e[1],threadKey:e[2],messageId:e[4],defaultActionEnableExtensions:e[31],originalPageSenderId:e[7],titleText:e[8],subtitleText:e[9],bodyText:e[12],playableUrl:e[13],playableUrlFallback:e[14],playableUrlExpirationTimestampMs:e[15],playableUrlMimeType:e[16],dashManifest:e[17],previewUrl:e[18],previewUrlFallback:e[19],previewUrlExpirationTimestampMs:e[20],previewUrlMimeType:e[21],previewWidth:e[22],previewHeight:e[23],imageUrl:e[24],defaultCtaId:e[25],defaultCtaTitle:e[26],defaultCtaType:e[27],defaultButtonType:e[29],defaultActionUrl:e[30],defaultWebviewHeightRatio:e[33],attachmentCta1Id:e[35],cta1Title:e[36],cta1IconType:e[37],cta1Type:e[38],attachmentCta2Id:e[40],cta2Title:e[41],cta2IconType:e[42],cta2Type:e[43],attachmentCta3Id:e[45],cta3Title:e[46],cta3IconType:e[47],cta3Type:e[48],faviconUrl:e[49],faviconUrlFallback:e[50],faviconUrlExpirationTimestampMs:e[51],previewUrlLarge:e[52]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertAttachmentItemStoredProcedure",e.__tables__=["attachment_items"],a.exports=e}),null);
__d("LSInsertBlobAttachment",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(16).fetch([[[e[27],e[32],e[34]]]]),function(n){return t.i64.eq(n.threadKey,e[27])&&t.i64.eq(t.i64.cast([0,0]),e[28])&&n.messageId===e[32]&&n.attachmentFbid===e[34]&&t.i64.lt(n.authorityLevel,e[48])&&(t.i64.eq(n.attachmentType,t.i64.cast([0,2]))||t.i64.eq(n.attachmentType,t.i64.cast([0,3]))||t.i64.eq(n.attachmentType,t.i64.cast([0,4]))||t.i64.eq(n.attachmentType,t.i64.cast([0,5]))||t.i64.eq(n.attachmentType,t.i64.cast([0,6]))||t.i64.eq(n.attachmentType,t.i64.cast([0,10]))||t.i64.eq(n.attachmentType,t.i64.cast([0,14]))||t.i64.eq(n.attachmentType,t.i64.cast([0,15])))&&t.i64.eq(n.ephemeralMediaState,void 0)&&n.isSharable===!1}),function(e){return e.delete()})},function(n){return t.db.table(16).add({threadKey:e[27],messageId:e[32],attachmentFbid:e[34],filename:e[0],filesize:e[1],hasMedia:e[2],isSharable:!1,playableUrl:e[3],playableUrlFallback:e[4],playableUrlExpirationTimestampMs:e[5],playableUrlMimeType:e[6],dashManifest:e[7],previewUrl:e[8],previewUrlFallback:e[9],previewUrlExpirationTimestampMs:e[10],previewUrlMimeType:e[11],miniPreview:e[13],previewWidth:e[14],previewHeight:e[15],attributionAppId:e[16],attributionAppName:e[17],attributionAppIcon:e[18],attributionAppIconFallback:e[19],attributionAppIconUrlExpirationTimestampMs:e[20],localPlayableUrl:e[21],playableDurationMs:e[22],attachmentIndex:e[23],accessibilitySummaryText:e[24],isPreviewImage:e[25],originalFileHash:e[26],attachmentType:e[29],timestampMs:e[31],offlineAttachmentId:e[33],hasXma:e[35],xmaLayoutType:e[36],xmasTemplateType:e[37],titleText:e[38],subtitleText:e[39],descriptionText:e[40],sourceText:e[41],faviconUrlExpirationTimestampMs:e[42],isBorderless:e[44],previewUrlLarge:e[45],samplingFrequencyHz:e[46],waveformData:e[47],authorityLevel:e[48]})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertBlobAttachmentStoredProcedure",e.__tables__=["attachments"],a.exports=e}),null);
__d("LSInsertNewMessageRange",["LSClearMessagePlaceholderRange"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(r){return t.storedProcedure(n("LSClearMessagePlaceholderRange"),e[0],e[9],t.i64.cast([0,0]))},function(n){return t.filter(t.db.table(13).fetch([[[e[0],{lte:e[5]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.minTimestampMs,e[5])&&t.i64.ge(n.maxTimestampMs,e[5])}).next().then(function(t,n){var o,a,i=t.done,l=t.value;return i?(o=[e[1],e[3],e[7]],r[0]=o[0],r[1]=o[1],r[2]=o[2],o):(n=l.item,a=[n.minTimestampMs,n.minMessageId,n.hasMoreBefore],r[0]=a[0],r[1]=a[1],r[2]=a[2])})},function(n){return t.filter(t.db.table(13).fetch([[[e[0],{lte:e[6]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.minTimestampMs,e[6])&&t.i64.ge(n.maxTimestampMs,e[6])}).next().then(function(t,n){var o,a,i=t.done,l=t.value;return i?(o=[e[2],e[4],e[8]],r[4]=o[0],r[5]=o[1],r[6]=o[2],o):(n=l.item,a=[n.maxTimestampMs,n.maxMessageId,n.hasMoreAfter],r[4]=a[0],r[5]=a[1],r[6]=a[2])})},function(n){return t.forEach(t.filter(t.db.table(13).fetch([[[e[0],{lte:e[6]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.ge(e[6],n.minTimestampMs)&&t.i64.le(e[5],n.maxTimestampMs)}),function(e){return e.delete()})},function(n){return t.db.table(13).put({threadKey:e[0],minTimestampMs:r[0],minMessageId:r[1],maxTimestampMs:r[4],maxMessageId:r[5],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:r[2],hasMoreAfter:r[6]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxInsertNewMessageRangeStoredProcedure",e.__tables__=["messages_ranges_v2__generated"],a.exports=e}),null);
__d("LSIssueFetchThreadCapabilitiesTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSMailboxIssueFetchThreadCapabilitiesTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueInsertPersistentMenuItemsForThreadTask",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_key",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"insert_persistent_menu_items",t.i64.cast([0,117]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSOmnistoreSettingsIssueInsertPersistentMenuItemsForThreadTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSMarkThreadReadV2",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,0]):(n=a.item,r[0]=n.lastActivityTimestampMs)})},function(o){return t.i64.gt(r[0],e[1])?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.count(t.filter(t.db.table(12).fetch([[[e[0],{gt:e[1]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.senderId,r[2])&&t.i64.gt(n.timestampMs,e[1])})).then(function(e){return r[3]=e})},function(n){return t.count(t.db.table(12).fetch([[[e[0],{gt:e[1]}]]])).then(function(e){return r[4]=e})},function(n){return t.i64.eq(r[3],r[4])&&t.i64.gt(r[4],t.i64.cast([0,0]))?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){var t=e.update,n=e.item;return t({lastReadWatermarkTimestampMs:n.lastActivityTimestampMs})}):t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.gt(e[1],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})})}]):t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.gt(e[1],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMarkThreadReadV2StoredProcedure",e.__tables__=["threads","messages"],a.exports=e}),null);
__d("LSReplaceOptimisticReaction",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(8).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[2]&&t.i64.eq(n.actorId,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.le(n.authorityLevel,t.i64.cast([0,20]))}),function(e){var n=e.update,r=e.item;return n({authorityLevel:t.i64.cast([0,60])})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxReplaceOptimisticReactionStoredProcedure",e.__tables__=["reactions"],a.exports=e}),null);
__d("LSSetForwardScore",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}),function(t){var n=t.update,r=t.item;return n({forwardScore:e[3]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetForwardScoreStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSSetMessageDisplayedContentTypes",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return t.db.table(16).fetch([[[e[0],e[1]]]]).next().then(function(e,t){var r,o,a=e.done,i=e.value;return a?(r=[void 0,void 0],n[0]=r[0],n[1]=r[1],r):(t=i.item,o=[t.attachmentType,t.xmaLayoutType],n[0]=o[0],n[1]=o[1])})},function(r){return t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),void 0,void 0],n[3]=o[0],n[4]=o[1],n[5]=o[2],o):(r=l.item,a=[r.replySourceTypeV2,r.replySourceId,r.text],n[3]=a[0],n[4]=a[1],n[5]=a[2])})},function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,t){var r=e.done,o=e.value;return r?n[7]=void 0:(t=o.item,n[7]=t.customEmoji)})},function(r){return t.i64.eq(n[0],t.i64.cast([0,6]))?n[9]=t.i64.cast([0,64]):(t.i64.eq(n[0],t.i64.cast([0,5]))?n[16]=t.i64.cast([0,4]):(t.i64.eq(n[0],t.i64.cast([0,3]))?n[17]=t.i64.cast([0,16384]):(t.i64.eq(n[0],t.i64.cast([0,2]))?n[18]=t.i64.cast([0,2]):(t.i64.eq(n[0],t.i64.cast([0,4]))?n[19]=t.i64.cast([0,2]):n[19]=e[5]?t.i64.cast([0,4096]):t.i64.cast([0,0]),n[18]=n[19]),n[17]=n[18]),n[16]=n[17]),n[9]=n[16]),n[10]=n[5]!==void 0&&n[5]!==""&&n[5]!==n[7]?t.i64.or_(n[9],t.i64.cast([0,1])):n[9],n[11]=n[7]!==void 0&&n[7]===n[5]?t.i64.or_(n[10],t.i64.cast([0,128])):n[10],n[12]=t.i64.eq(n[0],t.i64.cast([0,7]))?t.i64.or_(n[11],t.i64.cast([0,8])):n[11],n[13]=t.i64.eq(n[1],t.i64.cast([0,0]))?t.i64.or_(n[12],t.i64.cast([0,1024])):t.i64.eq(n[1],t.i64.cast([0,1]))?t.i64.or_(n[12],t.i64.cast([0,2048])):n[12],n[14]=t.i64.eq(n[3],t.i64.cast([0,2]))&&n[4]!==void 0?t.i64.or_(n[13],t.i64.cast([0,512])):n[13],n[15]=n[5]!==void 0&&n[5]!==""&&n[5]!==n[7]&&t.i64.eq(n[3],t.i64.cast([0,5]))?t.i64.or_(n[14],t.i64.cast([0,512])):n[14],t.forEach(t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}),function(r){var o=r.update,a=r.item;return o({displayedContentTypes:e[4]?t.i64.cast([0,32]):t.i64.eq(n[3],t.i64.cast([0,3]))?t.i64.or_(n[15],t.i64.cast([0,8192])):n[15]})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetMessageDisplayedContentTypesStoredProcedure",e.__tables__=["attachments","messages","threads"],a.exports=e}),null);
__d("LSGroupRoomTruncate",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(63).fetch(),function(e){return t.i64.neq(e.groupRoomType,void 0)&&t.i64.neq(e.groupRoomType,t.i64.cast([0,5]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesGroupRoomTruncateStoredProcedure",e.__tables__=["rooms"],a.exports=e}),null);
__d("LSUpdateOrInsertThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[7]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).add({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[32],parentThreadKey:e[38],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:e[59],isDisappearingMode:e[60],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111]}):(o=s.item,n[1]=o.lastActivityTimestampMs,n[3]=o.parentThreadKey,n[2]=o.disappearingThreadKey,n[4]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[1],e[0])&&t.i64.neq(n[2],void 0)?(t.i64.eq(e[38],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[3],t.i64.cast([0,0]))?(a=[n[3],o.folderName],n[5]=a[0],n[6]=a[1]):(i=[e[38],e[10]],n[5]=i[0],n[6]=i[1]),t.forEach(t.db.table(9).fetch([[[e[7]]]]),function(t){var r=t.update,a=t.item;return r({lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:n[6],ongoingCallState:e[32],parentThreadKey:n[5],lastActivityTimestampMs:n[1],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})})):t.forEach(t.db.table(9).fetch([[[e[7]]]]),function(t){var r=t.update,o=t.item;return r({lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[32],parentThreadKey:e[38],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSPopulateCommunityFolderData",["LSDeleteThenInsertCommunityFolder","LSUpdateOrInsertThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(r){return t.storedProcedure(n("LSDeleteThenInsertCommunityFolder"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],void 0,void 0,void 0,e[11],e[12],e[13],e[14],e[15],void 0,e[16],e[17],e[18],void 0,e[19],e[20],e[21],e[22],e[23],void 0,void 0,e[24],e[26],void 0,void 0,e[25],e[37],void 0,void 0,t.i64.cast([0,0]),e[29],void 0,t.i64.cast([0,1]),e[28],e[27],e[30],e[31],e[32],e[33],void 0,e[34],e[35],e[36],e[38],e[39],void 0,void 0,t.i64.cast([0,80]))},function(r){return t.storedProcedure(n("LSUpdateOrInsertThread"),e[8],e[9],e[10],e[2],e[5],void 0,t.i64.cast([0,80]),e[0],t.i64.cast([0,0]),t.i64.cast([0,17]),"community",e[6],e[7],t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,t.i64.cast([-1,4294967282]),void 0,void 0,void 0,void 0,void 0,void 0,!1,!1,!1,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),void 0,void 0,!1,void 0,void 0,void 0,void 0,!1,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,void 0,t.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,!1,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,e[40],void 0,void 0,void 0,!1,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0)}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxPopulateCommunityFolderDataStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSRemoveTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?0:(o=i.item,t.forEach(t.db.table(2).fetch([[[o.queueName,{lte:e[0]}]],"queueNameTaskId"]),function(e){var r=e.item;return t.sequence([function(e){return n[0]=r.taskDispatchPriority,t.forEach(t.filter(t.db.table(2).fetch([[[r.taskId]]]),function(e){return t.i64.eq(e.taskId,r.taskId)&&e.queueName===r.queueName}),function(e){return e.delete()})},function(e){return t.i64.eq(n[0],t.i64.cast([0,1e3]))||t.i64.eq(n[0],t.i64.cast([0,2e3]))?n[1]=t.i64.cast([0,734739218]):n[1]=t.i64.cast([0,734737036])}])}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreRemoveTaskStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSRoomTruncate",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(63).fetch(),function(e){return t.i64.eq(e.groupRoomType,void 0)||t.i64.eq(e.groupRoomType,t.i64.cast([0,5]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesRoomTruncateStoredProcedure",e.__tables__=["rooms"],a.exports=e}),null);
__d("LSSetRegionHint",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({regionHint:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreSetRegionHintStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSTaskExists",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(e,t){var r=e.done,o=e.value;return r?n[0]=!1:(t=o.item,n[0]=!0)})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreTaskExistsStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSTruncateCommunityListTable",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.db.table(166).fetch(),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsTruncateCommunityListTableStoredProcedure",e.__tables__=["cm_community_list"],a.exports=e}),null);
__d("LSTruncateNotificationSettings",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.db.table(175).fetch(),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsTruncateNotificationSettingsStoredProcedure",e.__tables__=["notification_settings"],a.exports=e}),null);
__d("LSUpdateLastSyncCompletedTimestampMsToNow",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(e){var t=e.update,r=e.item;return t({lastSyncCompletedTimestampMs:n[0]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateLastSyncCompletedTimestampMsToNowStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSUpsertGradientColor",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(117).put({themeFbid:e[0],gradientIndex:e[1],color:e[2],type_:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSThreadThemeUpsertGradientColorStoredProcedure",e.__tables__=["gradient_colors"],a.exports=e}),null);
__d("LSUpsertSequenceId",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.i64.neq(e[1],void 0)?r[1]=e[1]:r[1]=r[0],t.db.table(25).put({id:r[1],lastAppliedMailboxSequenceId:e[0]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpsertSequenceIdStoredProcedure",e.__tables__=["mailbox_metadata"],a.exports=e}),null);
__d("LSUpsertTheme",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.i64.neq(e[12],void 0)?n[0]=e[12]:n[0]=e[0],t.db.table(116).put({fbid:e[0],themeIdx:e[1],fallbackColor:e[2],reverseGradiantsForRadial:e[3],accessibilityLabel:e[4],iconUrl:e[5],iconUrlFallback:e[6],backgroundUrl:e[8],description:e[9],isDeprecated:e[11],normalThemeId:n[0],appColorMode:e[13],titlebarBackgroundColor:e[14],titlebarButtonTintColor:e[15],titlebarTextColor:e[16],titlebarAttributionTextColor:e[17],composerTintColor:e[18],composerUnselectedTintColor:e[19],composerInputTextPlaceholderColor:e[20],composerInputBackgroundColor:e[21],composerInputBorderColor:e[22],composerInputBorderWidth:e[23],composerBackgroundColor:e[24],messageTextColor:e[25],messageBorderColor:e[26],messageBorderWidth:e[27],incomingMessageTextColor:e[28],incomingMessageBorderColor:e[29],incomingMessageBorderWidth:e[30],deliveryReceiptColor:e[31],tertiaryTextColor:e[32],primaryButtonBackgroundColor:e[33],hotLikeColor:e[34],reactionPillBackgroundColor:e[35],secondaryTextColor:e[36],quotedIncomingMessageBubbleColor:e[37],cornerRadius:e[38],blurredComposerBackgroundColor:e[39],composerSecondaryButtonColor:e[40],composerPlaceholderTextColor:e[41]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSThreadThemeUpsertThemeStoredProcedure",e.__tables__=["thread_themes"],a.exports=e}),null);
__d("LSStaticDependencies",["LSDeleteAllCommunityChannelCategories","LSDeleteAllCommunityFolders","LSDeleteThenInsertCmCommunityList","LSDeleteThenInsertContact","LSDeleteThenInsertMessageRequest","LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot","LSDeleteThenInsertThread","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSGroupRoomTruncate","LSPopulateCommunityFolderData","LSRemoveTask","LSReplaceOptimisticReaction","LSRoomTruncate","LSSetRegionHint","LSTaskExists","LSTruncateCommunityListTable","LSTruncateNotificationSettings","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpsertGradientColor","LSUpsertSequenceId","LSUpsertTheme","LSVerifyContactRowExists"],(function(t,n,r,o,a,i,l){"use strict";var e={deleteAllCommunityChannelCategories:r("LSDeleteAllCommunityChannelCategories"),deleteAllCommunityFolders:r("LSDeleteAllCommunityFolders"),deleteThenInsertCmCommunityList:r("LSDeleteThenInsertCmCommunityList"),deleteThenInsertContact:r("LSDeleteThenInsertContact"),deleteThenInsertMessageRequest:r("LSDeleteThenInsertMessageRequest"),deleteThenInsertNotificationsSettingsGraphQLSnapshot:r("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot"),deleteThenInsertThread:r("LSDeleteThenInsertThread"),executeFinallyBlockForSyncTransaction:r("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:r("LSExecuteFirstBlockForSyncTransaction"),groupRoomTruncate:r("LSGroupRoomTruncate"),populateCommunityFolderData:r("LSPopulateCommunityFolderData"),removeTask:r("LSRemoveTask"),replaceOptimisticReaction:r("LSReplaceOptimisticReaction"),roomTruncate:r("LSRoomTruncate"),setRegionHint:r("LSSetRegionHint"),taskExists:r("LSTaskExists"),truncateCommunityListTable:r("LSTruncateCommunityListTable"),truncateNotificationSettings:r("LSTruncateNotificationSettings"),updateLastSyncCompletedTimestampMsToNow:r("LSUpdateLastSyncCompletedTimestampMsToNow"),upsertGradientColor:r("LSUpsertGradientColor"),upsertSequenceId:r("LSUpsertSequenceId"),upsertTheme:r("LSUpsertTheme"),verifyContactRowExists:r("LSVerifyContactRowExists")},s=e;l.default=s}),98);
__d("LSStoreProjectConfiguration",["LSBase64Decode.nop","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSBase64Decode.nop"),e[4]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.blobs.neq(r[0],void 0)?t.db.table(307).put({configId:e[1],projectName:e[0],cipherSuite:e[5],publicKey:r[0],maxEvals:e[2],redemptionLimit:e[3],expirationTimestampMs:e[6],tokenPollFrequencyMs:e[7],maxClientTokenPoolSize:e[8]}):((function(e){t.logger(e).info(e)})("issuing retry for project configurations task since public key was null"),r[1]=new t.Map,r[1].set("project_name",e[0]),r[2]=r[1].get("project_name"),r[3]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTask"),["acs_credentials","_",r[2]].join(""),t.i64.cast([0,351]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0])))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsStoreProjectConfigurationStoredProcedure",e.__tables__=["secure_acs_configurations"],a.exports=e}),null);
__d("LSSyncBumpThreadDataToClient",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.ge(e[1],n.lastActivityTimestampMs)}).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(o){return t.i64.eq(a.parentThreadKey,t.i64.cast([-1,4294967286]))&&t.i64.eq(e[2],t.i64.cast([0,2]))?(r[0]=new t.Map,r[0].set("thread_fbid",e[0]),r[0].set("force_upsert",!1),r[0].set("use_open_messenger_transport",!1),r[0].set("sync_group",t.i64.cast([0,95])),r[0].set("metadata_only",!1),r[0].set("preview_only",!1),r[1]=r[0].get("thread_fbid"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,209]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1]})})},function(n){return t.i64.eq(e[2],t.i64.cast([0,1]))?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.i64.eq(e[2],t.i64.cast([0,2]))?t.resolve(0):t.i64.eq(e[2],t.i64.cast([0,3]))?t.i64.ge(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.resolve():t.resolve(0)}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxSyncBumpThreadDataToClientStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSTransportHybridParticipantUpdateReceipts",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTransportHybridParticipantUpdateReceiptsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTriggerReenrollementFromOptOutDelta",["LSArrayGetObjectAt","LSDeleteAndReenrollDeviceState","LSIsEncryptionVersionSecure"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r[16]=a[16],r[17]=a[17],a):(o=l.item,t.sequence([function(e){return r[26]=o.backupTenancy,r[25]=o.encryptionVersion,r[21]=void 0,t.i64.neq(r[21],void 0)?t.resolve(r[22]=r[21]):t.sequence([function(e){return r[27]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return r[28]&&(r[37]=(r[27].push(t.i64.cast([0,0])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]&&(r[37]=(r[27].push(t.i64.cast([0,2])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[30]=t[0],t})},function(e){return r[30]&&(r[37]=(r[27].push(t.i64.cast([0,3])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return r[31]&&(r[37]=(r[27].push(t.i64.cast([0,4])),r[27])),r[32]=t.createArray(),r[33]=t.i64.of_int32(r[27].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[37]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[27],r[37]).then(function(e){var t;return t=e,r[38]=t[0],r[39]=t[1],t})},function(e){return r[40]=(r[32].push(r[38]),r[32])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[37]=t.createArray(),r[38]=t.i64.of_int32(r[32].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[40]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[32],r[40]).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return r[43]=(r[37].push(t.i64.to_string(r[41])),r[37])}])}):t.resolve()},function(e){return r[39]=r[37].join(","),r[34]=r[39]}])},function(e){return r[32].some(function(e){return t.i64.eq(r[25],e)})?r[35]=r[25]:r[35]=void 0,t.i64.neq(r[35],void 0)?r[36]=r[35]:r[36]=void 0,r[22]=r[36]}])},function(e){var n;return t.i64.neq(r[22],void 0)?r[23]=r[22]:r[23]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[24]=r[26]:r[24]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[23],r[24],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r[16]=n[16],r[17]=n[17]}]))})},function(o){return r[19]=!1,r[20]=t.i64.of_int32(e[1].length),t.i64.gt(r[20],t.i64.cast([0,0]))?t.loopAsync(r[20],function(o){return r[21]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[21]).then(function(e){var t;return t=e,r[22]=t[0],r[23]=t[1],t})},function(e){return r[19]=r[19]||t.i64.eq(r[22],r[1])}])}):t.resolve()},function(o){return r[19]&&t.i64.eq(e[0],r[0])&&t.i64.neq(r[1],void 0)?t.storedProcedure(n("LSDeleteAndReenrollDeviceState"),r[1],t.i64.cast([0,6])):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTriggerReenrollementFromOptOutDeltaStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSTruncateMetadataThreads.nop",["I64","LSIntEnum","Promise","ReQL","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){if(r("gkx")("9855")){for(var i=t.mi_act_mapping_table.keys(new WeakMap);;){var l,c=yield i.next();if(c.done)break;yield(l=t.mi_act_mapping_table).delete.apply(l,c.value)}for(var d=o("ReQL").fromTableAscending(t.threads).filter(function(e){return e.syncGroup!=null&&(s||(s=o("I64"))).equal(e.syncGroup,(u||(u=o("LSIntEnum"))).ofNumber(95))}).iterator(new WeakMap);;){var m,p=yield d.next();if(p.done)break;yield(m=t.threads).delete.apply(m,p.value[0])}}return(e||(e=n("Promise"))).resolve()});function a(e,n){return t.apply(this,arguments)}return a})();c.__nop_name__="LSTruncateMetadataThreads",l.default=c}),98);
__d("LSTruncateMetadataThreads",["LSTruncateMetadataThreads.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.nativeOperation(n("LSTruncateMetadataThreads.nop"))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTruncateMetadataThreadsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTruncateThreadRangeTablesForSyncGroup",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.i64.eq(e[0],t.i64.cast([0,1]))?t.forEach(t.filter(t.db.table(10).fetch(),function(e){return t.i64.eq(t.i64.cast([0,1])==null?t.i64.cast([0,1]):t.i64.cast([0,1]),t.i64.cast([0,1]))}),function(e){return e.delete()}):t.i64.eq(e[0],t.i64.cast([0,95]))?t.forEach(t.filter(t.db.table(10).fetch([[[t.i64.cast([0,0])],[t.i64.cast([-1,4294967295])]]]),function(e){return t.i64.eq(t.i64.cast([0,1])==null?t.i64.cast([0,1]):t.i64.cast([0,1]),t.i64.cast([0,1]))&&(t.i64.eq(e.parentThreadKey,t.i64.cast([0,0]))||t.i64.eq(e.parentThreadKey,t.i64.cast([-1,4294967295])))}),function(e){return e.delete()}):t.resolve(0)},function(n){return t.i64.eq(e[0],t.i64.cast([0,1]))?t.forEach(t.filter(t.db.table(247).fetch(),function(e){return t.i64.eq(e.syncGroup==null?t.i64.cast([0,1]):e.syncGroup,t.i64.cast([0,1]))}),function(e){return e.delete()}):t.resolve()},function(n){return t.forEach(t.db.table(198).fetch([[[e[0]]]]),function(e){return e.delete()})},function(n){return t.forEach(t.db.table(220).fetch([[[e[0]]]]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTruncateThreadRangeTablesForSyncGroupStoredProcedure",e.__tables__=["threads_ranges_v2__generated","filtered_threads_ranges_v3__generated","inbox_threads_ranges","sync_group_threads_ranges"],a.exports=e}),null);
__d("LSTruncateTablesForSyncGroup",["LSTruncateThreadRangeTablesForSyncGroup"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(9).fetch(),function(n){return(t.i64.eq(n.syncGroup,e[0])||t.i64.eq(n.syncGroup,void 0)&&t.i64.eq(t.i64.cast([0,1]),e[0]))&&![t.i64.cast([0,17]),t.i64.cast([0,18]),t.i64.cast([0,19]),t.i64.cast([0,20]),t.i64.cast([0,21]),t.i64.cast([0,22]),t.i64.cast([0,23]),t.i64.cast([0,24]),t.i64.cast([0,25]),t.i64.cast([0,26]),t.i64.cast([0,27]),t.i64.cast([0,28])].some(function(e){return t.i64.eq(n.threadType,e)})}),function(e){return e.delete()})},function(r){return t.storedProcedure(n("LSTruncateThreadRangeTablesForSyncGroup"),e[0])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxTruncateTablesForSyncGroupStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateAttachmentItemCtaAtIndex",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.i64.eq(e[5],t.i64.cast([0,0]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({defaultCtaId:e[2],defaultCtaTitle:e[3],defaultCtaType:e[4]})}):t.i64.eq(e[5],t.i64.cast([0,1]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta1Id:e[2],cta1Title:e[3],cta1Type:e[4],cta1IconType:void 0})}):t.i64.eq(e[5],t.i64.cast([0,2]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta2Id:e[2],cta2Title:e[3],cta2Type:e[4],cta2IconType:void 0})}):t.i64.eq(e[5],t.i64.cast([0,3]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta3Id:e[2],cta3Title:e[3],cta3Type:e[4],cta3IconType:void 0})}):t.resolve((function(e){t.logger(e).warn(e)})("Unexpected CTA index"))},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateAttachmentItemCtaAtIndexStoredProcedure",e.__tables__=["attachment_items"],a.exports=e}),null);
__d("LSUpdateCommunityThreadStaleState",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&([t.i64.cast([0,23]),t.i64.cast([0,21]),t.i64.cast([0,18]),t.i64.cast([0,26]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)})||t.i64.eq(n.threadType,t.i64.cast([0,152])))}).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.db.table(294).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(294).add({threadKey:e[0],threadQueueSequenceId:t.i64.cast([0,0]),isStale:e[1]}):(r=a.item,t.forEach(t.db.table(294).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({isStale:e[1]})}))}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateCommunityThreadStaleStateStoredProcedure",e.__tables__=["threads","community_thread_sync_info"],a.exports=e}),null);
__d("LSUpdateOrInsertCommunitySurfaceRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(253).put({surfaceType:e[0],communityKey:e[1],isLoadingAfter:!1,hasMoreAfter:e[2],nextPageCursor:e[4]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertCommunitySurfaceRangeStoredProcedure",e.__tables__=["community_surface_ranges"],a.exports=e}),null);
__d("LSUpdateOrInsertOhaiGatewayKeyConfigs",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(313).put({keyId:e[0],publicKey:e[1],kemId:e[2],kdfId:e[3],aeadId:e[4],expirationDate:e[5],lastUpdatedTime:e[6]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOhaiUpdateOrInsertOhaiGatewayKeyConfigsStoredProcedure",e.__tables__=["ohai_gateway_key_configs"],a.exports=e}),null);
__d("LSUpdateReadReceipt",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[1],e[2]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[2])&&t.i64.lt(n.readWatermarkTimestampMs,e[0])}),function(n){var r=n.update,o=n.item;return r({readWatermarkTimestampMs:e[0],readActionTimestampMs:t.i64.gt(e[3],t.i64.cast([0,0]))?e[3]:o.readActionTimestampMs})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateReadReceiptStoredProcedure",e.__tables__=["participants"],a.exports=e}),null);
__d("LSUpdateThreadActivityStatus",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(o){return r[2]=new t.Map,r[2].set("thread_fbid",e[0]),r[2].set("force_upsert",!1),r[2].set("use_open_messenger_transport",!1),r[2].set("sync_group",t.i64.cast([0,104])),r[2].set("metadata_only",!1),r[2].set("preview_only",!1),r[3]=r[2].get("thread_fbid"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[3]),t.i64.cast([0,209]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(o){return r[5]=t.createArray(),r[8]=(r[5].push(e[0]),r[5]),r[6]=new t.Map,r[6].set("number_of_threads",t.i64.cast([0,1])),r[6].set("event_type","issue_tpq_for_verify_threads_activity_status"),r[6].set("thread_ids",r[5]),r[7]=t.toJSON(r[6]),t.storedProcedure(n("LSIssueNewTask"),"log_community_resnapshot_event",t.i64.cast([0,576]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return r[0]=t.i64.cast([0,2])}]):(a=l.item,t.sequence([function(n){return t.i64.lt(a.lastActivityTimestampMs,e[1])?t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1],snippet:e[2]})})},function(e){return r[2]=t.i64.cast([0,1])}]):t.resolve(r[2]=t.i64.cast([0,0]))},function(e){return r[0]=r[2]}]))})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadActivityStatusStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSShimGetServerThreadKeyFromJIDV2.nop",["ReQL","RetUtil","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.mi_act_mapping_table.index("jid")).getKeyRange(n));return o("RetUtil").getNullableRetResult(r==null?void 0:r.serverThreadKey)});function t(t,n,r){return e.apply(this,arguments)}return t})();e.__nop_name__="LSShimGetServerThreadKeyFromJIDV2",l.default=e}),98);
__d("LSReplaceOptimisticThread",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return t.sequence([function(o){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.authorityLevel,t.i64.cast([0,20]))}),function(n){var r=n.update,o=n.item;return r({threadKey:e[1],authorityLevel:t.i64.cast([0,40])})}):(a=l.item,t.i64.le(a.authorityLevel,t.i64.cast([0,40]))?(r("gkx")("14697")?n[2]=!1:n[2]=!0,n[1]=n[2]):n[1]=!0,n[1]?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){return e.delete()}):t.resolve())})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxReplaceOptimisticThreadStoredProcedure",e.__tables__=["threads"];var s=e;l.default=s}),98);
__d("LSUpdateOptimisticContextThreadKeys",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(32).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])}),function(t){var n=t.update,r=t.item;return n({threadKey:e[1]})})},function(n){return t.forEach(t.filter(t.db.table(31).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])}),function(t){var n=t.update,r=t.item;return n({threadKey:e[1]})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateOptimisticContextThreadKeysStoredProcedure",e.__tables__=["threads_optimistic_context","messages_optimistic_context"],a.exports=e}),null);
__d("LSUpdateTaskQueueName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(t){var n=t.update,r=t.item;return n({queueName:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateTaskQueueNameStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpdateTaskValue",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(t){var n=t.update,r=t.item;return n({taskValue:r.taskValue.split(e[1]).join(e[2])})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateTaskValueStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpdateThreadAuthorityAndMapping",["LSHybridThreadDelete","LSIssueNewTask","LSReplaceOptimisticThread","LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateOptimisticContextThreadKeys","LSUpdateTaskQueueName","LSUpdateTaskValue"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSShimGetServerThreadKeyFromJIDV2.nop"),e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[1]=!1:(t=o.item,r[1]=!0)})},function(n){return t.filter(t.db.table(9).fetch(),function(n){return t.i64.eq(n.threadKey,e[2])}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=!1:(t=o.item,r[3]=!0)})},function(o){return r[5]=t.i64.neq(r[0],void 0),r[7]=t.i64.eq(r[0],e[2])&&r[5],!r[7]&&!(t.i64.eq(r[0],e[1])&&r[5])&&r[5]&&(function(e){t.logger(e).mustfix(e)})("The mi_act_mapping row did not correspond to either the authoritative or optimistic thread key."),t.i64.neq(e[2],void 0)?r[6]=e[2]:r[6]=t.i64.cast([0,0]),r[5]?r[7]?t.sequence([function(o){return r[1]?t.sequence([function(n){return t.db.table(173).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[8]=void 0:(t=o.item,r[8]=t.jid)})},function(o){return r[10]=new t.Map,r[10].set("authoritative_thread_key",e[1]),r[10].set("jid_authoritative_mapped",r[8]),r[10].set("jid_optimistic_mapped",e[0]),r[10].set("optimistic_thread_key",e[2]),r[11]=t.toJSON(r[10]),t.storedProcedure(n("LSIssueNewTask"),"e2ee_log_incorrect_occam_mapping",t.i64.cast([0,160033]),r[11],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(r){return t.storedProcedure(n("LSHybridThreadDelete"),e[1])}]):t.resolve()},function(e){return t.i64.neq(r[6],void 0)?t.forEach(t.db.table(9).fetch([[[r[6]]]]),function(e){var t=e.update,n=e.item;return t({clientThreadKey:r[6]})}):t.resolve()},function(o){return t.storedProcedure(n("LSReplaceOptimisticThread"),r[6],e[1])},function(o){return t.storedProcedure(n("LSUpdateOptimisticContextThreadKeys"),r[6],e[1])}]):r[3]?t.storedProcedure(n("LSHybridThreadDelete"),r[6]):t.resolve():r[3]?r[1]?t.storedProcedure(n("LSHybridThreadDelete"),r[6]):t.sequence([function(e){return t.i64.neq(r[6],void 0)?t.forEach(t.db.table(9).fetch([[[r[6]]]]),function(e){var t=e.update,n=e.item;return t({clientThreadKey:r[6]})}):t.resolve()},function(o){return t.storedProcedure(n("LSReplaceOptimisticThread"),r[6],e[1])},function(o){return t.storedProcedure(n("LSUpdateOptimisticContextThreadKeys"),r[6],e[1])}]):t.resolve()},function(o){return r[3]?t.sequence([function(o){return r[9]=t.i64.to_string(r[6]),r[8]=t.i64.to_string(e[1]),t.storedProcedure(n("LSUpdateTaskQueueName"),r[9],r[8])},function(e){return t.storedProcedure(n("LSUpdateTaskValue"),r[8],r[9],r[8])}]):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingStoredProcedure",e.__tables__=["threads","mi_act_mapping_table"],a.exports=e}),null);
__d("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID",["LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateThreadAuthorityAndMapping"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSShimGetServerThreadKeyFromJIDV2.nop"),e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.i64.neq(r[0],e[1])?r[1]=r[0]:r[1]=void 0,t.storedProcedure(n("LSUpdateThreadAuthorityAndMapping"),e[0],e[1],r[1])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingWithOTIDFromJIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSOnSendMessageFailure.nop",["MWChatInteraction","Promise","err","justknobx","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("sendToSentQPLLogger").__setRef("LSOnSendMessageFailure.nop");function u(t,o,a,i){if(!r("justknobx")._("1414")||a==null)return(e||(e=n("Promise"))).resolve();var l=c(a);return l==null||r("promiseDone")(s.load().then(function(e){return e.markSendToSentFail(l,"send_message_server_error",r("err")("send_message_server_error: %s",i))})),(e||(e=n("Promise"))).resolve()}function c(e){var t=o("MWChatInteraction").get(o("MWChatInteraction").s2sKey(e));return t==null?null:Number(t)}u.__nop_name__="LSOnSendMessageFailure",l.default=u}),98);
__d("LSMarkOptimisticMessageFailed",["LSOnSendMessageFailure.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return e[2]===!0?r[0]=t.i64.cast([0,5]):r[0]=t.i64.cast([0,4]),e[2]===!0?r[1]=t.i64.cast([0,5]):r[1]=t.i64.cast([0,4]),e[2]===!0?r[2]=t.i64.cast([0,5]):r[2]=t.i64.cast([0,4]),t.nativeOperation(n("LSOnSendMessageFailure.nop"),e[0],e[1])},function(n){return t.forEach(t.filter(t.db.table(12).fetch([[[e[0]]],"optimistic"]),function(n){return n.offlineThreadingId===e[0]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,20]))}),function(e){var t=e.update,n=e.item;return t({sendStatus:r[0],sendStatusV2:r[1]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMarkOptimisticMessageFailedStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSMarkOptimisticMessageFailedStoredProcedure",["LSMarkOptimisticMessageFailed","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSMarkOptimisticMessageFailed"),a.optimisticMid,a.errorMessage,a.isRetryable);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWMarkMessageSendAsFailedLSDB",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o,a,l,s){var u;return(u=l==null?void 0:l.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield r("LSMarkOptimisticMessageFailedStoredProcedure")(r("LSFactory")(e),{errorMessage:a,isRetryable:s,optimisticMid:t})});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":29"))!=null?u:(e||(e=n("Promise"))).resolve()}l.markMessageSendAsFailed=s}),98);
__d("MAWThreadUtils",["LSIntEnum","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return e.threads.where("jid").equals(t).modify(n)}function u(t){var n=o("WAJids").switchOnMsgrChatJidType(t,{group:function(){return(e||(e=o("LSIntEnum"))).ofNumber(16)},user:function(){return(e||(e=o("LSIntEnum"))).ofNumber(15)}});return n}l.updateThreadWithJid=s,l.getLSThreadTypeFromJid=u}),98);
__d("MAWCommonSetupBridge",["BroadcastChannelFallback","BrowserLockManager","CurrentAppID","CurrentUser","FBLogger","I64","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadAttributionType","MAWBridge","MAWChatJid","MAWCrossWorkerPortal","MAWCurrentUser","MAWDbMedia","MAWInit","MAWJobActionsV2","MAWMIC","MAWReportSendMessageSuccessResult","MAWThreadCutover","MAWThreadUtils","MWLogSend","ODS","Promise","QPLEvent","QPLUserFlow","WACrossWorkerPortal","WADevToolMessageChannel","WADevToolsBridge","WAExceededStorageQuota","WAJids","cr:2691","gkx","justknobx","pageID","performanceAbsoluteNow","promiseDone","requireDeferred","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=r("requireDeferred")("MAWMainThreadLogger").__setRef("MAWCommonSetupBridge"),g=new Set([25312111,25311870]),h=new Map,y=new Map([[(_=o("MAWDbMedia")).MEDIA_TYPE.IMAGE,8],[_.MEDIA_TYPE.VIDEO,10],[_.MEDIA_TYPE.GIF,6],[_.MEDIA_TYPE.STICKER,4],[_.MEDIA_TYPE.PTT,11],[_.MEDIA_TYPE.DOCUMENT_FILE,9]]),C=new Set([25312150,25313100,1056840931,25299294]),b=function(){return(p||(p=r("performanceAbsoluteNow")))()-Date.now()},v=b();function S(e,t,n){return(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return o("MAWThreadCutover").isCutoverSecureThreadFromChatJid(a,e).then(function(e){r("QPLUserFlow").addAnnotations(t,{bool:{is_cutover:e}},{instanceKey:n})})})}var R=/[^a-zA-Z0-9._-]/g,L=/[.]+/g,E=/[\s_.-]+/g;function k(e){return e.replace(E,".").replace(R,"").replace(L,".")}var I={broadcastChannelFallback:function(t){var e=t.event,n=t.namespace;o("BroadcastChannelFallback").handleBroadcastChannelFallbackMessage(n,e)},handleMessageSendResult:function(t){t.success&&o("MAWReportSendMessageSuccessResult").reportSendMessageSuccessResult(t.report)},log:function(t){var e=t.logLevel,n=t.logString,r=t.tags,a=r.length>0,i=""+(o("CurrentAppID").getAppID()||"unknown");switch(e){case"count":(u||(u=o("ODS"))).bumpEntityKey(3185,k("e2ee."+(a?r.join("."):n)),k("count."+(a?n+"."+i:i)),1),f.onReadyImmediately(function(e){var t=e.count;return t(n,r)});return;case"log":f.onReadyImmediately(function(e){var t=e.info;return t(n,r)});return;case"warn":f.onReadyImmediately(function(e){var t=e.warn;return t(n,r)});return;case"logRestricted":f.onReadyImmediately(function(e){var t=e.logRestricted;return t(n,r)});return;case"debug":break;case"error":break;default:break}},logError:function(t){var e=t.entriesToReport,n=t.framesToPop,r=t.logString,o=t.message,a=t.stack,i=t.tags;f.onReadyImmediately(function(t){var l=t.logError;return l(r,i,o,a,n,e)})},odsBumpEntityKey:function(t){var e=t.amount,n=t.entity,r=t.key;(u||(u=o("ODS"))).bumpEntityKey(3185,n,r+"."+(o("CurrentAppID").getAppID()||"unknown"),e)},onJobFinished:function(t){switch(t.type==="createGroup"&&t.originalArgs.key!=null&&o("MAWJobActionsV2").recentFinishedJobsCache.set(t.originalArgs.key,t.result),t.type){case"sendAppData":{var e,n=t.originalArgs,a=t.result;(e=n.args.contents.actions)==null||e.forEach(function(e){var t=e.messageAction;t==null||t.type!=="delete_for_me"||a.type!=="not_sent"||h.set(a.appDataExternalId,{chatJid:t.protocolMsgId.chat,externalId:t.protocolMsgId.externalId,type:"deleteMsgForMe"})});break}}if(t.type==="sendWrittenAppData"){var i=t.originalArgs.appDataExternalId,l=h.get(i);if(h.delete(i),l!=null&&l.type==="deleteMsgForMe"&&t.result.type==="success"){var u=l.chatJid,m=l.externalId,p=o("MAWThreadUtils").getLSThreadTypeFromJid(u);r("promiseDone")((s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(e){r("promiseDone")(o("MAWChatJid").toThreadKey(e.tables,u,"MAWCommonSetupBridge::sendWrittenAppData").then(function(t){o("MWLogSend").log(e,{actor:(c||(c=o("I64"))).of_string(o("MAWCurrentUser").getID()),attachmentFbids:[],attachmentType:25,backend:1,hasReply:!1,messagingThreadId:c.to_string(t),offlineThreadingId:m,sendType:3,source:(d||(d=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").UNKNOWN),threadKey:t,threadType:p})}))}))}}},qplEvent:function(a){var t,i=a.action,l=a.annotations,s=a.debugInfo,u=a.error,c=a.event,d=a.instanceKey,p=a.performanceAndDateSkew,_=a.timeoutInMs,f=a.timestamp;if(!(!r("CurrentUser").isEmployee()&&g.has((m||(m=o("QPLEvent"))).getMarkerId(c)))){var h=d||0,y=l==null||(t=l.string)==null?void 0:t.jid,R=y!=null?o("WAJids").validateChatJid(y):void 0,L=C.has((m||(m=o("QPLEvent"))).getMarkerId(c))&&R!=null?S(R,c,h):(e||(e=n("Promise"))).resolve(),E=f!=null&&p!=null&&r("gkx")("8334")?f+p-v+b():f;switch(i.type){case"start":r("QPLUserFlow").start(c,{annotations:babelHelpers.extends({},l||{},{bool:babelHelpers.extends({},(l==null?void 0:l.bool)||{},{isArmadilloPublicLaunchUser:r("gkx")("23405"),isDev:0,isGifSearchEnbled:!0,isLockApiSupported:r("BrowserLockManager")!=null,isRestoreDBEnabled:r("gkx")("23906"),isTlcPublicUser:o("MAWCurrentUser").isTlcPublicUser(),s_pdb:r("gkx")("8483"),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()})}),instanceKey:h,timeoutInMs:_,timestamp:E});break;case"success":{r("QPLUserFlow").addAnnotations(c,{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:h}),L.finally(function(){r("QPLUserFlow").endSuccess(c,{annotations:l,instanceKey:h,timestamp:E})});break}case"cancel":{r("QPLUserFlow").addAnnotations(c,{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:h}),L.finally(function(){r("QPLUserFlow").endCancel(c,{annotations:l,cancelReason:i.cancelReason,instanceKey:h,timestamp:E})});break}case"point":l&&r("QPLUserFlow").addAnnotations(c,l,{instanceKey:h}),(m||(m=o("QPLEvent"))).getMarkerId(c)===1056839232?o("MAWMIC").addPoint(i.name,E):r("QPLUserFlow").addPoint(c,i.name,{instanceKey:h,timestamp:E});break;case"annotations":r("QPLUserFlow").addAnnotations(c,l!=null?l:{},{instanceKey:h});break;case"failure":r("QPLUserFlow").addAnnotations(c,{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{failureReason:i.name}},{instanceKey:h}),L.finally(function(){r("QPLUserFlow").endFailure(c,i.name,{annotations:l,instanceKey:h,timestamp:E})});break;case"error":r("QPLUserFlow").markError(c,i.name,{debugInfo:s,error:u,instanceKey:h});break;default:throw r("FBLogger")("messenger_web").mustfixThrow("Bridge sends unreachable qplEvent action type")}}}},T=function(t,n){return t.push(n),t},D=function(t){var e=t.customizeEventHandlers,a=t.worker;o("MAWInit").MAWInit.logPoint("bridge_setup_start");var i=o("MAWBridge").getBridge();i.setHandlers("event",babelHelpers.extends({},I,e));var l=o("MAWCrossWorkerPortal").getOrCreateCrossWorkerPortal(i,["backend","kt","mps","waapi","ebsmapi"],T,{bridgeBatcherMaxTokens:Number.MAX_SAFE_INTEGER,portalCacheSize:r("justknobx")._("3092")});if(l.setPort(a),r("gkx")("3282")){var s=o("WADevToolsBridge").getDevToolBridge(),u=new MessageChannel,c=o("WACrossWorkerPortal").attachPortal(s,["backend"],T,r("pageID")),d=o("WACrossWorkerPortal").attachPortal(s,["devtool","mawDbDevTool"],T,r("pageID"));o("WADevToolMessageChannel").onCreateNewChannel(function(e){c.setPort(e.port1)}),d.setPort(u.port1),n("cr:2691")==null||n("cr:2691").connectAddonPort(u.port2),l.addListener(function(e,t){return s.fireAndForget("devtool","bridgeMessage",{direction:t==="outgoing"?"toWorker":"toMain",msg:e,ts:Date.now()},!0)})}return o("MAWMIC").addPoint("bridge_setup_done"),o("MAWInit").MAWInit.logPoint("bridge_setup_end"),i};l.MEDIA_TYPE_TO_ATTACHMENT_TYPE=y,l.initBridge=D}),98);
__d("MAWGetAttachmentTypeForSendWrittenMsg",["MAWCommonSetupBridge"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a,i,l,s){if(a)return 43;if(e==="revokeMsg")return 26;if(i!=null)return i;if(n)return 3;if(r&&l===!1||s===!0)return 13;var u=t!=null?o("MAWCommonSetupBridge").MEDIA_TYPE_TO_ATTACHMENT_TYPE.get(t):null;return u!=null?u:0}l.getAttachmentTypeForSendWrittenMsg=e}),98);
__d("MAWReportSendMessageSuccessResult",["BrowserLockManager","I64","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadAttributionType","MAWChatJid","MAWCurrentUser","MAWFrontendMediaUtils","MAWGetAttachmentTypeForSendWrittenMsg","MAWThreadUtils","MAWVault","MAWXMAUtils","MWLogSend","MultipleTabsLogger","URLMatcher","asyncToGeneratorRuntime","getErrorSafe","justknobx","promiseDone","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{var n=yield o("MAWChatJid").toThreadKey(e.tables,t,"MAWCommonSetupBridge::sendWrittenMsg");return n}catch(e){throw r("getErrorSafe")(e)}}),d.apply(this,arguments)}function m(t,a){var i,l=t.externalId,d=null,m=!1,p=!1;switch(t.messageType){case"editMsg":m=!0;break;case"revokeMsg":l=t.referencedExternalId;break;case"sendMsg":p=t.specialTextSize!=null;break;case"reactionMsg":d=t.reaction!=null?20:27;break;case"bumpMsg":break;case"noteReplyMsg":break;case"sendPoll":break;case"fixMe":return;default:t.messageType}var _=null;t.fileType!=null&&(_=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(t.fileType).mediaType);var f=t.xmaMessageType!=null,g=t.quote!=null||o("MAWXMAUtils").isXMAStoryReply(t.xmaMessageType),h=r("URLMatcher").match(o("MAWVault").unvault((i=t.content)!=null?i:"")),y=h!=null&&h.length>0,C=o("MAWGetAttachmentTypeForSendWrittenMsg").getAttachmentTypeForSendWrittenMsg(t.messageType,_,p,f,m,d,g,y),b=o("MAWThreadUtils").getLSThreadTypeFromJid(t.chatJid);r("promiseDone")((e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n,i=(t==null?void 0:t.source)!=null?t.source:(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").UNKNOWN),d=yield c(e,t.chatJid);o("MWLogSend").log(e,{actor:(u||(u=o("I64"))).of_string(o("MAWCurrentUser").getID()),attachmentFbids:[],attachmentType:C,backend:1,hasReply:g,initatingSource:t==null?void 0:t.initiatingSource,messageSendDataclass:a,messagingThreadId:u.to_string(d),msgTtl:(n=t.ephemeralSetting)==null?void 0:n.ephemeralExpirationInSec,offlineThreadingId:l,sendType:1,source:i,threadKey:d,threadType:b,waGroupJid:void 0})});return function(t){return e.apply(this,arguments)}})()))}function p(e){r("justknobx")._("154")&&o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()&&r("BrowserLockManager")!=null&&!o("MultipleTabsLogger").hasUniqueLock()||m(e)}l.reportSendMessageSuccessResultFn=m,l.reportSendMessageSuccessResult=p}),98);
__d("MAWMessageSendReporter",["FBLogger","MAWMarkMessageSendAsFailedLSDB","MAWReportSendMessageSuccessResult","MAWSetupWorkerAuxStateForLogging","MWLogSendToSentFailedError","QPLUserFlow","WAGetSafeQPLError","asyncToGeneratorRuntime","getErrorSafe","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,o){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i){var l=n.qplEventType,s=n.qplInstanceKey;try{var c=yield t;if(c==null)return;if(c.success)c.value!=null?o("MAWReportSendMessageSuccessResult").reportSendMessageSuccessResultFn(c.value,i):r("QPLUserFlow").addPoint(l,"no-op",{instanceKey:s}),r("QPLUserFlow").endSuccess(l,{instanceKey:s});else{var d,m,p,_=c.error.isRetriable===!0;r("MWLogSendToSentFailedError")({qplEventType:l,qplInstanceKey:s},c.error.type,void 0,c.error.errorCode,c.error.applicationErrorCode),r("QPLUserFlow").endFailure(l,c.error.type,{annotations:{bool:{isRetriable:(d=c.error.isRetriable)!=null?d:!1,workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{errorCode:(m=c.error.errorCode)!=null?m:0},string:{details:(p=c.error.details)!=null?p:""},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:s}),u(e,_,a)}}catch(t){var f=r("getErrorSafe")(t);if(r("MWLogSendToSentFailedError")({qplEventType:l,qplInstanceKey:s},"runtime-failure",f),r("QPLUserFlow").endFailure(l,"runtime-failure",{annotations:{bool:{workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{errorDescription:o("WAGetSafeQPLError").getSafeQPLErrorMessage(f)},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:s}),u(e,!1,a,f),r("FBLogger")("messenger_web").catching(f).mustfix("MAWMessageSendReporter"),r("justknobx")._("4010")&&typeof f=="object"){var g=String(f==null?void 0:f.message),h=String(f==null?void 0:f.messageParams),y=String(f==null?void 0:f.stack);r("FBLogger")("messenger_web").mustfix("Failed to send, e: %s. error params: %s. call stack: %s",g,h,y)}}}),s.apply(this,arguments)}function u(e,t,n,a){if(e!=null){var i=e.chatJid,l=e.externalId;r("promiseDone")(o("MAWMarkMessageSendAsFailedLSDB").markMessageSendAsFailed(l,i,o("WAGetSafeQPLError").getSafeQPLErrorMessage(a),n,t))}}l.MAWMessageSendReporter=e}),98);
__d("isOfflineThreadingId",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).to_string(e.max_int).length;function u(t){return(e||(e=o("I64"))).to_string(t).length===s}l.default=u}),98);
__d("MAWMiActOnActThreadReadyInstrumentation",["QPLUserFlow","Random","WAHashStringToNumber","isOfflineThreadingId","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WAHashStringToNumber").hashStringToNumber(e+Math.round(o("Random").random()*1e4)+1e4)}function s(e,t,n,o){r("QPLUserFlow").start(r("qpl")._(1056846543,"1530"),{annotations:{bool:{is_otid:r("isOfflineThreadingId")(n)},string:{apiName:o,description:t}},instanceKey:e})}function u(e,t){r("QPLUserFlow").addPoint(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}function c(e,t){r("QPLUserFlow").addAnnotations(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}function d(e){r("QPLUserFlow").endSuccess(r("qpl")._(1056846543,"1530"),{instanceKey:e})}function m(e,t){r("QPLUserFlow").endFailure(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}l.getOnActThreadReadyInstanceKey=e,l.startQPL=s,l.addPointQPL=u,l.addAnnotationsQPL=c,l.endSuccessQPL=d,l.endFailureQPL=m}),98);
__d("LSVerifyE2EEMetadataThreadExistsV2",["LSCheckIfAuthoritativeThreadMissingMiActMapping","LSCreateOfflineThreadingID","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){var o;return t.i64.neq(e[1],void 0)?t.sequence([function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(t,n){var o,a,i=t.done,l=t.value;return i?(o=[void 0,void 0],r[3]=o[0],r[4]=o[1],o):(n=l.item,a=[e[1],n.authorityLevel],r[3]=a[0],r[4]=a[1])})},function(e){var t;return t=[r[3],r[4]],r[0]=t[0],r[1]=t[1],t}]):t.resolve((o=[void 0,void 0],r[0]=o[0],r[1]=o[1],o))},function(o){return t.i64.neq(r[0],void 0)?t.sequence([function(o){return t.i64.neq(r[1],void 0)?t.sequence([function(e){return t.storedProcedure(n("LSCheckIfAuthoritativeThreadMissingMiActMapping"),r[0]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(n){return t.i64.gt(e[2],r[1])?t.forEach(t.db.table(9).fetch([[[r[0]]]]),function(t){var n=t.update,r=t.item;return n({authorityLevel:e[2]})}):t.resolve()},function(o){return r[3]||t.i64.gt(e[2],r[1])?(r[4]=new t.Map,r[4].set("thread_fbid",r[0]),r[4].set("force_upsert",!1),r[4].set("use_open_messenger_transport",!1),r[4].set("sync_group",t.i64.cast([0,95])),r[4].set("metadata_only",!1),r[4].set("preview_only",!1),r[5]=r[4].get("thread_fbid"),r[6]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[5]),t.i64.cast([0,209]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()}]):t.resolve()},function(e){return r[2]=r[0]}]):t.sequence([function(o){return t.i64.neq(e[1],void 0)?t.sequence([function(o){return t.i64.neq(e[2],t.i64.cast([0,20]))?(r[11]=new t.Map,r[11].set("thread_fbid",e[1]),r[11].set("force_upsert",!1),r[11].set("use_open_messenger_transport",!1),r[11].set("sync_group",t.i64.cast([0,95])),r[11].set("metadata_only",!1),r[11].set("preview_only",!1),r[12]=r[11].get("thread_fbid"),r[13]=t.toJSON(r[11]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[12]),t.i64.cast([0,209]),r[13],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(t){return r[3]=e[1]}]):t.sequence([function(e){return r[11]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[11]).then(function(e){var t;return t=e,r[12]=t[0],t})},function(e){return r[3]=r[12]}])},function(n){var o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v;return t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))?(o=["inbox",t.i64.cast([0,0])],r[4]=o[0],r[5]=o[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,1]))?(a=["pending",t.i64.cast([-1,4294967295])],r[11]=a[0],r[12]=a[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,2]))?(i=["other",t.i64.cast([-1,4294967294])],r[13]=i[0],r[14]=i[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,3]))?(l=["spam",t.i64.cast([-1,4294967293])],r[15]=l[0],r[16]=l[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,5]))?(s=["hidden",t.i64.cast([-1,4294967292])],r[17]=s[0],r[18]=s[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,4]))?(u=["archived",t.i64.cast([-1,4294967286])],r[19]=u[0],r[20]=u[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,15]))?(c=["restricted",t.i64.cast([-1,4294967281])],r[21]=c[0],r[22]=c[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,19]))?(d=["interop",t.i64.cast([-1,4294967277])],r[23]=d[0],r[24]=d[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,29]))?(m=["interop_pending",t.i64.cast([-1,4294967267])],r[25]=m[0],r[26]=m[1]):(p=["inbox",t.i64.cast([0,0])],r[25]=p[0],r[26]=p[1]),_=[r[25],r[26]],r[23]=_[0],r[24]=_[1]),f=[r[23],r[24]],r[21]=f[0],r[22]=f[1]),g=[r[21],r[22]],r[19]=g[0],r[20]=g[1]),h=[r[19],r[20]],r[17]=h[0],r[18]=h[1]),y=[r[17],r[18]],r[15]=y[0],r[16]=y[1]),C=[r[15],r[16]],r[13]=C[0],r[14]=C[1]),b=[r[13],r[14]],r[11]=b[0],r[12]=b[1]),v=[r[11],r[12]],r[4]=v[0],r[5]=v[1]),r[6]=t.i64.cast([0,1083495711]),r[7]=t.i64.cast([0,1024]),r[8]=t.i64.cast([0,0]),r[9]=t.i64.cast([0,0]),r[10]=t.i64.cast([0,134217728]),t.forEach(t.filter(t.db.table(9).fetch([[[r[3]]]]),function(n){return t.i64.eq(n.threadKey,r[3])&&t.i64.lt(n.authorityLevel,e[2])}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:r[3],mailboxType:t.i64.cast([0,4096]),threadType:e[0],folderName:r[4],lastActivityTimestampMs:t.i64.cast([-1,4294967295]),lastReadWatermarkTimestampMs:t.i64.cast([-1,4294967295]),removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),parentThreadKey:r[5],authorityLevel:e[2],capabilities:r[6],capabilities2:r[7],capabilities3:r[8],capabilities4:r[9],capabilities5:r[10],unsendLimitMs:t.i64.cast([-1,4294967295]),syncGroup:t.i64.cast([0,95]),isHidden:!0,clientThreadKey:r[3]})},function(e){return r[2]=r[3]}])},function(e){return o[0]=r[2]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxVerifyE2EEMetadataThreadExistsV2StoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure",["LSSynchronousPromise","LSVerifyE2EEMetadataThreadExistsV2","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyE2EEMetadataThreadExistsV2"),a.threadType,a.threadKey,a.authorityLevel);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWVerifyThreadExistsUtils",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","isOfflineThreadingId"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Map,c=6e4,d=1e4;function m(e){if(u.size>d){r("FBLogger")("messenger_web").mustfix("MAWVerifyThreadExistsUtils: requestedThreadKeys size exceeded limit");return}u.has(e)&&(window.clearTimeout(u.get(e)),u.delete(e)),u.set(e,window.setTimeout(function(){u.delete(e)},c))}function p(e){return u.has(e)}function _(t,n,a){var i=n.threadKey;return i!=null&&m((e||(e=o("I64"))).to_string(i)),i!=null&&r("isOfflineThreadingId")(i)&&(e||(e=o("I64"))).equal(n.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))&&r("FBLogger")("messenger_web").warn("MAWVerifyThreadExistsUtils: runVerifyThreadExistsSproc called with offline thread key - callsite: %s",a),r("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(t,n)}l.isThreadRequested=p,l.runVerifyThreadExistsSproc=_}),98);
__d("MAWMiActOnActThreadReadyQueue",["ExecutionEnvironment","I64","LSPlatformLsInitLog","MAWInit","MAWMIC","MAWMiActOnActThreadReadyInstrumentation","MAWThreadMappingQPL","MAWVerifyThreadExistsUtils","MWChatInteraction","MWFBLogger","asyncToGeneratorRuntime","clearTimeout","getErrorSafe","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("MWFBLogger").MWLogger().tags(["MiActMapping","UIActions","ThreadReady"]),p=new Map,_=3e4;function f(t,n,a,i,l,s){var u;if((d||(d=r("ExecutionEnvironment"))).isInBrowser){o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(s,"enqueue_by_thread_key_start");var f=(c||(c=o("I64"))).to_string(t),g=(u=p.get(f))!=null?u:[],h=r("setTimeout")(function(){var n=o("MWChatInteraction").getInteractionTraceForThreadKey((c||(c=o("I64"))).to_string(t));n==null||n.addMarkerPoint("timeout_when_waiting_for_act_thread","AppTiming"),n==null||n.addAnnotation("callsite_waiting_for_act_thread",i),n==null||n.addAnnotation("initial_thread_state",l),n==null||n.addAnnotationBoolean("is_mi_thread_requested",o("MAWVerifyThreadExistsUtils").isThreadRequested(f)),o("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(s,{bool:{during_mic:o("MAWMIC").duringMIC(),is_thread_requested:o("MAWVerifyThreadExistsUtils").isThreadRequested(f),ls_sync_has_ended:o("LSPlatformLsInitLog").LsSync.hasEnded(),maw_init_completed:o("MAWInit").MAWInitState.isCompleted()}}),o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(s,"enqueue_by_thread_key_timeout"),m.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Took longer than "," ms to execute: "," in threadState: "," for threadKey: ",", onActThreadReady"])),_,i,l,f),a(l)},_);g.push({callback:n,description:i,telemetryInstanceKey:s,threadState:l,timeoutId:h}),p.set(f,g)}}function g(e,t,n,r){var a,i,l,s;if(!(e==null&&t==null)){var u=e!=null?t!=null?"both":"clientThreadKey":"authoritativeThreadKey",c=e==null?0:(a=(i=p.get(e))==null?void 0:i.length)!=null?a:0,d=t==null?0:(l=(s=p.get(t))==null?void 0:s.length)!=null?l:0;o("MAWThreadMappingQPL").addAnnotations({int:{authorativeThreadKeyCallbacksNum:d,clientThreadKeyCallbacksNum:c},string:{flushBasedOnKey:u,flushReason:r}},n),o("MAWThreadMappingQPL").addPoint("flush_awaiting_callbacks",n)}}function h(e,t,n,r){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=(c||(c=o("I64"))).to_string(e),l=p.get(i);if(!(l==null||l.length===0)){for(;l.length!==0;){var d=l.shift();if(d!=null){var _=d.callback,f=d.description,g=d.telemetryInstanceKey,h=d.threadState,y=d.timeoutId;o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(g,"enqueue_by_thread_key_end"),o("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(g,{string:{caller_identifier:n,processed_based_on_key:a}});try{m.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Executing queued "," for threadKey: ",""])),f,i),o("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(g),yield _(e,t),r("clearTimeout")(y)}catch(e){r("clearTimeout")(y),o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(g,"process_queue_on_act_thread_ready_failure"),m.catching(r("getErrorSafe")(e)).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error executing callback on ACT thread ready: ",", original threadState: ",", threadKey: ",""])),f,h,i)}}}p.delete(i)}}),y.apply(this,arguments)}l.enqueueByThreadKey=f,l.logOnFlushQueue=g,l.processQueueOnActThreadReady=h}),98);
__d("MAWMiActOnActThreadReadyWithoutValidator",["I64","MAWMiActGetThreadLifecycleState__DO_NOT_USE","MAWMiActOnActThreadReadyInstrumentation","MAWMiActOnActThreadReadyQueue","MAWMiActThreadLifecycleState__DO_NOT_USE","MWFBLogger","Promise","asyncToGeneratorRuntime","emptyFunction","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["Occam","MiActMapping"]);function m(e,t,n,r,o,a){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i,l,u){var m=o("MAWMiActOnActThreadReadyInstrumentation").getOnActThreadReadyInstanceKey(a);o("MAWMiActOnActThreadReadyInstrumentation").startQPL(m,a,n,"onActThreadReady"),o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(m,"get_thread_lifecycle_state_by_thread_key_start");var p=u||(yield o("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByThreadKey(t,n,a));switch(o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(m,"get_thread_lifecycle_state_by_thread_key_end"),o("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(m,{string:{threadState:p.type}}),p.type){case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:return d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Executing thread action: ",", threadState: ",", threadKey: "," on act thread ready"])),a,p.type,(c||(c=o("I64"))).to_string(n)),o("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(m),i(n,p.jid);case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.THREAD_KEY_ONLY:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:return d.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Enqueue by thread key: ",", threadState: ",", threadKey: "," on act thread ready"])),a,p.type,(c||(c=o("I64"))).to_string(n)),o("MAWMiActOnActThreadReadyQueue").enqueueByThreadKey(n,i,l!=null?l:r("emptyFunction"),a,p.type,m);case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:throw o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(m,"jid_missing_mi_or_mapping_state"),d.mustfixThrow("Unhandled onActThreadReady for threadKey:%s, thread action: %s",(c||(c=o("I64"))).to_string(n),a);default:throw p.type,d.mustfixThrow(" Unreachable miActThreadState.type: %s",p.type)}}),p.apply(this,arguments)}function _(e,t,o){return new(u||(u=n("Promise")))(function(a,i){m(e,t,o,function(e,t){return a({chatJid:t,serverThreadKey:e}),(u||(u=n("Promise"))).resolve()},function(e){return i(r("err")("Timed out waiting for ACT thread to be ready in %s. Thread state: %s",o,e))}).catch(function(){return i()})})}l.onActThreadReadyWithoutValidator=m,l.waitForACTThreadReadyWithoutValidator=_}),98);
__d("MAWMiActOnActThreadReady",["MAWMIC","MAWMiActGetThreadLifecycleState__DO_NOT_USE","MAWMiActOnActThreadReadyWithoutValidator","Promise","asyncToGeneratorRuntime","cr:7542","err","promiseDone","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r,o){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,a,i){var l=yield o("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByThreadKey(e,t,r),s=l.type,u=(function(){var o=n("asyncToGeneratorRuntime").asyncToGenerator(function*(o,i){return n("cr:7542")&&(yield n("cr:7542").load().then(function(n){var o=n.validateActThreadReady;return o({chatJid:i,description:r,initialMappingStateType:s,tables:e,threadKey:t})})),a==null?void 0:a(o,i)});return function(t,n){return o.apply(this,arguments)}})();return o("MAWMiActOnActThreadReadyWithoutValidator").onActThreadReadyWithoutValidator(e,t,r,u,i,l)}),u.apply(this,arguments)}function c(t,a,i,l){return new(e||(e=n("Promise")))(function(u,c){s(t,a,i,function(t,r){return u({chatJid:r,serverThreadKey:t}),(e||(e=n("Promise"))).resolve()},function(e){c(r("err")("Timed out waiting for ACT thread to be ready in %s. Thread state: %s",i,e)),r("promiseDone")(o("MAWMIC").getState().then(function(e){l!=null&&o("sendToSentQPLLogger").addSendToSentAnnotations(l,{string:{mic_state:e}})}))}).catch(function(){return c()})})}l.onActThreadReady=s,l.waitForACTThreadReady=c}),98);
__d("LSUpdateDisappearingSettingInClientThreadsTable.nop",["I64","LSMessagingThreadAttributionType","MAWBridgeFireAndForget","MAWBridgeSendAndReceive","MAWCurrentUser","MAWEphemeralMsgAutoResetSystemId","MAWJids","MAWMessageSendReporter","MAWMiActOnActThreadReady","Promise","ReQL","WATimeUtils","asyncToGeneratorRuntime","promiseDone","qpl","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i){var l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(i));if(l!=null)return o("MAWMiActOnActThreadReady").onActThreadReady(t,i,"LSUpdateDisappearingSettingInClientThreadsTable.nop",function(t,a){var i,u,c={ephemeralExpirationInSec:(s||(s=o("I64"))).to_int32((i=l.disappearingSettingTtl)!=null?i:(s||(s=o("I64"))).zero),ephemeralLastUpdatedOrSetTimestamp:o("WATimeUtils").castMilliSecondsToUnixTime(s.to_float((u=l.disappearingSettingUpdatedTs)!=null?u:(s||(s=o("I64"))).zero))};if(o("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingCache",{jid:a,settings:c}),l.disappearingSettingUpdatedBy!=null){var d=(s||(s=o("I64"))).to_string(l.disappearingSettingUpdatedBy),m=d===r("MAWEphemeralMsgAutoResetSystemId");if(d===o("MAWCurrentUser").getID()||m){var p=function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("backend","setEphemeralSettingsFromFrontend",{chatJid:a,ephemeralExpirationInSec:c.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:c.ephemeralLastUpdatedOrSetTimestamp,isEphemeralSettingReset:m,s2sInstanceKey:t})},_=o("sendToSentQPLLogger").markSendToSentStartWithAnnotation(l,{isEphemeralSetting:!0},r("LSMessagingThreadAttributionType").UNKNOWN);r("promiseDone")(o("MAWMessageSendReporter").MAWMessageSendReporter(null,p(_),{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:_}))}else o("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingsFromMI",{author:o("MAWJids").toUserJid(d),chatJid:a,ephemeralExpirationInSec:c.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:c.ephemeralLastUpdatedOrSetTimestamp,fromWAI:!1,isEphemeralSettingReset:!1,serverTs:c.ephemeralLastUpdatedOrSetTimestamp})}return(e||(e=n("Promise"))).resolve()})});function a(e,n,r){return t.apply(this,arguments)}return a})();u.__nop_name__="LSInsertAdminMessageInClientMessages",l.default=u}),98);
__d("LSUpdateThreadDisappearingSetting",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSUpdateDisappearingSettingInClientThreadsTable.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("ephemerality_type",void 0),t.i64.neq(e[1],void 0)?r[1]=t.i64.to_string(e[1]):r[1]=void 0,r[0].set("ephemeral_options_duration_in_sec",r[1]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,o){var a=e.done,i=e.value;return a?r[2]=void 0:(o=i.item,t.sequence([function(e){return r[8]=o.metadata,r[8]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[8]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return r[10]=new t.Map,r[11]=r[9].keys(),r[12]=t.i64.of_int32(r[11].length),t.i64.gt(r[12],t.i64.cast([0,0]))?t.loopAsync(r[12],function(e){return r[13]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[11],r[13]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],t})},function(e){return r[16]=r[9].get(r[14]),r[10].set(r[14],r[16])}])}):t.resolve()},function(e){return r[7]=r[10]}]):t.resolve((r[9]=new t.Map,r[7]=r[9]))},function(e){return r[2]=r[7]}]))})},function(n){return r[2]?r[4]=!1:r[4]=!0,r[4]||r[2].set("message_ephemerality_setting",r[0]),r[2]?r[5]=!1:r[5]=!0,r[5]?r[6]=void 0:(r[7]=t.toJSON(r[2]),r[6]=r[7]),t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.syncGroup,t.i64.cast([0,95]))}),function(t){var n=t.update,o=t.item;return n({disappearingSettingTtl:e[1],disappearingSettingUpdatedTs:e[2],disappearingSettingUpdatedBy:e[3],metadata:r[6]})})},function(r){return t.nativeOperation(n("LSUpdateDisappearingSettingInClientThreadsTable.nop"),e[0])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadDisappearingSettingStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateThreadNullState",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({threadPictureUrl:e[1],threadPictureUrlFallback:e[2],threadPictureUrlExpirationTimestampMs:e[3],nullstateDescriptionText1:e[5],nullstateDescriptionType1:e[10],nullstateDescriptionText2:e[6],nullstateDescriptionType2:e[11],nullstateDescriptionText3:e[7],nullstateDescriptionType3:e[12],capabilities:e[15],threadName:e[16],threadSubtype:e[4]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateThreadNullStateStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateThreadsRangesV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(n){return t.forEach(t.db.table(10).fetch([[[e[1]]]]),function(e){return e.delete()})},function(r){var o;return n[8]=t.i64.gt(e[2],t.i64.cast([0,1]))&&t.i64.gt(e[3],t.i64.cast([-2147483648,0])),e[0]==="inbox"&&t.i64.eq(e[1],t.i64.cast([0,0]))&&t.i64.eq(e[4],t.i64.cast([0,1]))?t.sequence([function(r){return n[9]=e[2],n[10]=e[3],n[11]=!1,n[12]=n[8],t.forEach(t.db.table(198).fetch(),function(e){var r=e.item;return n[13]=r.minLastActivityTimestampMs,n[15]=r.minThreadKey,n[14]=t.i64.lt(n[9]==null?n[13]:n[9],n[13]),n[9]=n[14]?n[13]:n[9],n[10]=n[14]?n[15]:n[10],n[11]=n[11]||r.isLoadingBefore,n[12]=n[12]||t.i64.gt(n[13],t.i64.cast([0,1]))&&t.i64.gt(n[15],t.i64.cast([-2147483648,0]))})},function(e){var t;return t=[n[9],n[10],n[11],n[12]],n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],t}]):t.resolve((o=[e[2],e[3],!1,n[8]],n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],o))},function(r){var o;return t.i64.eq(e[4],t.i64.cast([0,1]))?t.sequence([function(r){return n[9]=n[0],n[10]=n[1],n[11]=n[2],n[12]=n[3],t.forEach(t.filter(t.db.table(220).fetch(),function(n){return t.i64.eq(n.parentThreadKey,e[1])}),function(e){var r=e.item;return n[13]=r.minLastActivityTimestampMs,n[15]=r.minThreadKey,n[14]=t.i64.lt(n[9]==null?n[13]:n[9],n[13]),n[9]=n[14]?n[13]:n[9],n[10]=n[14]?n[15]:n[10],n[11]=n[11]||r.isLoadingBefore,n[12]=n[12]||t.i64.gt(n[13],t.i64.cast([0,1]))&&t.i64.gt(n[15],t.i64.cast([-2147483648,0]))})},function(e){var t;return t=[n[9],n[10],n[11],n[12]],n[4]=t[0],n[5]=t[1],n[6]=t[2],n[7]=t[3],t}]):t.resolve((o=[n[0],n[1],n[2],n[3]],n[4]=o[0],n[5]=o[1],n[6]=o[2],n[7]=o[3],o))},function(r){return t.db.table(10).add({parentThreadKey:e[1],minThreadKey:n[5]==null?t.i64.cast([-2147483648,0]):n[5],minLastActivityTimestampMs:n[4]==null?t.i64.cast([0,1]):n[4],maxLastActivityTimestampMs:t.i64.cast([0,1]),maxThreadKey:t.i64.cast([-2147483648,0]),isLoadingBefore:n[6],isLoadingAfter:!1,hasMoreBefore:n[7],hasMoreAfter:!1})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateThreadsRangesV2StoredProcedure",e.__tables__=["threads_ranges_v2__generated","inbox_threads_ranges","sync_group_threads_ranges"],a.exports=e}),null);
__d("LSUpsertContextualProfileV1",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.i64.eq(e[5],t.i64.cast([0,0]))?n[0]=void 0:n[0]=e[5],t.db.table(216).put({ownerId:e[0],associatedEntityId:e[1],profilePictureUrl:e[2],profilePictureFallbackUrl:e[4],profilePictureUrlExpirationTimestampMs:n[0],profileName:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSContactUpsertContextualProfileV1StoredProcedure",e.__tables__=["contextual_profile_v1"],a.exports=e}),null);
__d("LSUpsertFolderSeenTimestamp",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.i64.gt(e[1],t.i64.cast([0,0]))?t.db.table(35).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(35).add({parentThreadKey:e[0],lastSeenRequestTimestampMs:e[1]}):(r=a.item,t.i64.lt(r.lastSeenRequestTimestampMs,e[1])?t.forEach(t.db.table(35).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastSeenRequestTimestampMs:e[1]})}):t.resolve())}):t.resolve()},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertFolderSeenTimestampStoredProcedure",e.__tables__=["folder_metadata"],a.exports=e}),null);
__d("LSUpsertMessage",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(12).fetch([[[e[9]]],"optimistic"]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(12).add({threadKey:e[3],timestampMs:e[5],messageId:e[8],offlineThreadingId:e[9],authorityLevel:e[2],primarySortKey:e[6],senderId:e[10],isAdminMessage:e[12],sendStatus:e[15],sendStatusV2:e[16],text:e[0],subscriptErrorMessage:e[1],secondarySortKey:e[7],stickerId:e[11],messageRenderingType:e[13],isUnsent:e[17],unsentTimestampMs:e[18],mentionOffsets:e[19],mentionLengths:e[20],mentionIds:e[21],mentionTypes:e[22],replySourceId:e[23],replySourceType:e[24],replySourceTypeV2:e[25],replyStatus:e[26],replySnippet:e[27],replyMessageText:e[28],replyToUserId:e[29],replyMediaExpirationTimestampMs:e[30],replyMediaUrl:e[31],replyMediaPreviewWidth:e[33],replyMediaPreviewHeight:e[34],replyMediaUrlMimeType:e[35],replyMediaUrlFallback:e[36],replyCtaId:e[37],replyCtaTitle:e[38],replyAttachmentType:e[39],replyAttachmentId:e[40],replyAttachmentExtra:e[41],replyType:e[42],isForwarded:e[43],forwardScore:e[44],hasQuickReplies:e[45],adminMsgCtaId:e[46],adminMsgCtaTitle:e[47],adminMsgCtaType:e[48],cannotUnsendReason:e[49],textHasLinks:e[50],viewFlags:e[51],displayedContentTypes:e[52],viewedPluginKey:e[53],viewedPluginContext:e[54],quickReplyType:e[55],hotEmojiSize:e[56],platformXmdEncoded:e[57],sendAttributionXmd:e[58],replySourceTimestampMs:e[59],ephemeralDurationInSec:e[60],msUntilExpirationTs:e[61],ephemeralExpirationTs:e[62],takedownState:e[63],isCollapsed:e[64],subthreadKey:e[65],botResponseId:e[66],metadataDataclass:e[67],editCount:e[68],isPaidPartnership:e[69],messageHiddenState:e[70],adminSignatureName:e[71],adminSignatureProfileUrl:e[72],adminSignatureCreatorType:e[73],replyMessageHiddenState:e[74],translatedText:e[75],textDialect:e[76],translatedTextDialect:e[77],scheduledTimestamp:e[78],isVideoQuickSend:e[79],subthreadParentMessageId:e[80],isExclusiveToSubthread:e[81]}):(r=a.item,t.i64.le(r.authorityLevel,e[2])?t.db.table(12).put({threadKey:e[3],timestampMs:e[5],messageId:e[8],offlineThreadingId:e[9],authorityLevel:e[2],primarySortKey:r.primarySortKey,senderId:e[10],isAdminMessage:e[12],sendStatus:e[15],sendStatusV2:e[16],text:e[0],subscriptErrorMessage:e[1],secondarySortKey:r.secondarySortKey,stickerId:e[11],messageRenderingType:e[13],isUnsent:e[17],unsentTimestampMs:e[18],mentionOffsets:e[19],mentionLengths:e[20],mentionIds:e[21],mentionTypes:e[22],replySourceId:e[23],replySourceType:e[24],replySourceTypeV2:e[25],replyStatus:e[26],replySnippet:e[27],replyMessageText:e[28],replyToUserId:e[29],replyMediaExpirationTimestampMs:e[30],replyMediaUrl:e[31],replyMediaPreviewWidth:e[33],replyMediaPreviewHeight:e[34],replyMediaUrlMimeType:e[35],replyMediaUrlFallback:e[36],replyCtaId:e[37],replyCtaTitle:e[38],replyAttachmentType:e[39],replyAttachmentId:e[40],replyAttachmentExtra:e[41],replyType:e[42],isForwarded:e[43],forwardScore:e[44],hasQuickReplies:e[45],adminMsgCtaId:e[46],adminMsgCtaTitle:e[47],adminMsgCtaType:e[48],cannotUnsendReason:e[49],textHasLinks:e[50],viewFlags:e[51],displayedContentTypes:e[52],viewedPluginKey:e[53],viewedPluginContext:e[54],quickReplyType:e[55],hotEmojiSize:e[56],platformXmdEncoded:e[57],sendAttributionXmd:e[58],replySourceTimestampMs:e[59],ephemeralDurationInSec:e[60],msUntilExpirationTs:e[61],ephemeralExpirationTs:e[62],takedownState:e[63],isCollapsed:e[64],subthreadKey:e[65],botResponseId:e[66],metadataDataclass:e[67],editCount:e[68],isPaidPartnership:e[69],messageHiddenState:e[70],adminSignatureName:e[71],adminSignatureProfileUrl:e[72],adminSignatureCreatorType:e[73],replyMessageHiddenState:e[74],translatedText:e[75],textDialect:e[76],translatedTextDialect:e[77],scheduledTimestamp:e[78],isVideoQuickSend:e[79],subthreadParentMessageId:e[80],isExclusiveToSubthread:e[81]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertMessageStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSUpsertReaction",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(8).put({threadKey:e[0],messageId:e[2],actorId:e[3],timestampMs:e[1],reaction:e[4],authorityLevel:e[5],reactionCreationTimestampMs:e[6]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertReactionStoredProcedure",e.__tables__=["reactions"],a.exports=e}),null);
__d("LSVoprfComputeSharedSecret.nop",["Promise","XPlatReactVoprf","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i){var l=yield o("XPlatReactVoprf").loadXPlatReactVoprf(),s=l.voprfInstance,u=s.voprfInfo,c=s.voprfWasm;try{var d=c.clientFinalize(u,new Uint8Array(a),new Uint8Array(i));return(e||(e=n("Promise"))).resolve([d.finalEvaluation.buffer])}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(s)}});function r(e,n,r,o){return t.apply(this,arguments)}return r})();s.__nop_name__="LSVoprfComputeSharedSecret",l.default=s}),98);
__d("LSVoprfUnblind.nop",["Promise","XPlatReactVoprf","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i,l,s,u,c){var d=yield o("XPlatReactVoprf").loadXPlatReactVoprf(),m=d.voprfInstance,p=m.voprfInfo,_=m.voprfWasm;try{var f=_.verifiableUnblind(p,new Uint8Array(u),new Uint8Array(c),new Uint8Array(i),new Uint8Array(s),new Uint8Array(l),new Uint8Array(a),!0);return(e||(e=n("Promise"))).resolve([f.unblindedElement.buffer])}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(m)}});function r(e,n,r,o,a,i,l,s){return t.apply(this,arguments)}return r})();s.__nop_name__="LSVoprfUnblind",l.default=s}),98);
__d("LSVerifyAndSaveNewCredentials",["LSArrayGetObjectAt","LSBase64Decode.nop","LSRemoveBlindedTokens","LSVoprfComputeSharedSecret.nop","LSVoprfUnblind.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(307).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?(r[1]=t.createArray(),r[2]=(r[1].push("No valid config found when saving signed credentials for project: "),r[1]),r[3]=(r[1].push("unknown"),r[1]),r[4]=t.toJSON(r[1]),(function(e){t.logger(e).mustfix(e)})(r[4])):(a=l.item,t.sequence([function(o){return r[1]=t.i64.of_int32(e[1].length),t.i64.gt(r[1],t.i64.cast([0,0]))?t.loopAsync(r[1],function(o){return r[2]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[2]).then(function(e){var t;return t=e,r[3]=t[0],r[4]=t[1],t})},function(e){return r[5]=r[3].get("token_id"),t.db.table(308).fetch([[[r[5]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.blob(""),t.blob(""),t.blob("")],r[6]=o[0],r[7]=o[1],r[8]=o[2],o):(n=l.item,a=[n.nonce,n.blindedNonce,n.blindingFactor],r[6]=a[0],r[7]=a[1],r[8]=a[2])})},function(e){return t.forEach(t.db.table(308).fetch([[[r[5]]]]),function(e){return e.delete()})},function(e){return r[10]=r[3].get("signed_nonce"),t.nativeOperation(n("LSBase64Decode.nop"),r[10]).then(function(e){var t;return t=e,r[11]=t[0],t})},function(e){return r[12]=r[3].get("proof_c"),t.nativeOperation(n("LSBase64Decode.nop"),r[12]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return r[14]=r[3].get("proof_s"),t.nativeOperation(n("LSBase64Decode.nop"),r[14]).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.nativeOperation(n("LSVoprfUnblind.nop"),a.publicKey,r[8],r[7],r[11]==null?t.blob(""):r[11],r[13]==null?t.blob(""):r[13],r[15]==null?t.blob(""):r[15]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return t.blobs.neq(r[16],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSVoprfComputeSharedSecret.nop"),r[6],r[16]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(n){return t.blobs.neq(r[17],void 0)?t.db.table(309).add({tokenId:r[5],configId:e[0],nonce:r[6],redeemLimit:a.redemptionLimit,sharedSecret:r[17]}):t.resolve()}]):t.resolve()}])}):t.resolve()},function(r){return t.storedProcedure(n("LSRemoveBlindedTokens"),e[0])}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsVerifyAndSaveNewCredentialsStoredProcedure",e.__tables__=["secure_acs_configurations","secure_acs_blinded_tokens","secure_acs_tokens"],a.exports=e}),null);
__d("LSVerifyCommunityFolderExistsV2",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return e[1]?t.resolve(r[0]=e[1]):t.sequence([function(n){return t.db.table(162).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[1]=!0:(n=a.item,t.sequence([function(e){return t.db.table(9).fetch([[[n.folderId]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=!0:(t=o.item,r[3]=!1)})},function(e){return r[1]=r[3]}]))})},function(e){return r[0]=r[1]}])},function(o){return r[0]?(r[1]=new t.Map,r[1].set("folder_id",e[0]),r[2]=r[1].get("folder_id"),r[3]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),t.i64.to_string(r[2]),t.i64.cast([0,813]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyCommunityFolderExistsV2StoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSWriteThreadCapabilities",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?0:(o=i.item,n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({capabilities:e[1],capabilities2:e[2],capabilities3:e[3],capabilities4:e[4],capabilities5:e[5]})}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxWriteThreadCapabilitiesStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSExpandedStaticDependencies",["LSAddParticipantIdToGroupThread","LSCheckAuthoritativeMessageExists","LSClearPinnedMessages","LSCompleteThreadCutover","LSDeleteBanner","LSDeleteBannersByIds","LSDeleteExistingMessageRanges","LSDeleteRowRichStatusCustomAudience","LSDeleteThenInsertAvatarFeatureConfig","LSDeleteThenInsertBotProfileInfoV2","LSDeleteThenInsertCmChannelList","LSDeleteThenInsertCommunityUnjoinedThread","LSDeleteThenInsertRankingRequest","LSDeleteThenInsertRankingScore","LSFillDeanonCacheForE2EEThread","LSGetFirstAvailableAttachmentCTAID","LSHybridThreadDelete","LSInsertAttachmentCta","LSInsertAttachmentItem","LSInsertBlobAttachment","LSInsertNewMessageRange","LSIssueFetchThreadCapabilitiesTask","LSIssueInsertPersistentMenuItemsForThreadTask","LSIssueNextSync","LSMailboxTaskCompletionApiOnTaskCompletion","LSMarkThreadReadV2","LSReplaceOptimisticReaction","LSSetForwardScore","LSSetMessageDisplayedContentTypes","LSStaticDependencies","LSStoreProjectConfiguration","LSSyncBumpThreadDataToClient","LSTransportHybridParticipantUpdateReceipts","LSTriggerReenrollementFromOptOutDelta","LSTruncateMetadataThreads","LSTruncateTablesForSyncGroup","LSUpdateAttachmentItemCtaAtIndex","LSUpdateCommunityThreadStaleState","LSUpdateOrInsertCommunitySurfaceRange","LSUpdateOrInsertOhaiGatewayKeyConfigs","LSUpdateOrInsertThread","LSUpdateReadReceipt","LSUpdateThreadActivityStatus","LSUpdateThreadAuthorityAndMappingWithOTIDFromJID","LSUpdateThreadDisappearingSetting","LSUpdateThreadNullState","LSUpdateThreadsRangesV2","LSUpsertContextualProfileV1","LSUpsertFolderSeenTimestamp","LSUpsertInboxThreadsRange","LSUpsertMessage","LSUpsertReaction","LSUpsertSyncGroupThreadsRange","LSVerifyAndSaveNewCredentials","LSVerifyCommunityFolderExistsV2","LSVerifyE2EEMetadataThreadExistsV2","LSWriteThreadCapabilities"],(function(t,n,r,o,a,i,l){"use strict";var e=babelHelpers.extends({},r("LSStaticDependencies"),{LSVerifyCommunityFolderExistsV2:r("LSVerifyCommunityFolderExistsV2"),addParticipantIdToGroupThread:r("LSAddParticipantIdToGroupThread"),checkAuthoritativeMessageExists:r("LSCheckAuthoritativeMessageExists"),clearPinnedMessages:r("LSClearPinnedMessages"),completeThreadCutover:r("LSCompleteThreadCutover"),deleteBanner:r("LSDeleteBanner"),deleteBannersByIds:r("LSDeleteBannersByIds"),deleteExistingMessageRanges:r("LSDeleteExistingMessageRanges"),deleteRowRichStatusCustomAudience:r("LSDeleteRowRichStatusCustomAudience"),deleteThenInsertAvatarFeatureConfig:r("LSDeleteThenInsertAvatarFeatureConfig"),deleteThenInsertBotProfileInfoV2:r("LSDeleteThenInsertBotProfileInfoV2"),deleteThenInsertCmChannelList:r("LSDeleteThenInsertCmChannelList"),deleteThenInsertCommunityUnjoinedThread:r("LSDeleteThenInsertCommunityUnjoinedThread"),deleteThenInsertRankingRequest:r("LSDeleteThenInsertRankingRequest"),deleteThenInsertRankingScore:r("LSDeleteThenInsertRankingScore"),fillDeanonCacheForE2EEThread:r("LSFillDeanonCacheForE2EEThread"),getFirstAvailableAttachmentCTAID:r("LSGetFirstAvailableAttachmentCTAID"),hybridThreadDelete:r("LSHybridThreadDelete"),insertAttachmentCta:r("LSInsertAttachmentCta"),insertAttachmentItem:r("LSInsertAttachmentItem"),insertBlobAttachment:r("LSInsertBlobAttachment"),insertNewMessageRange:r("LSInsertNewMessageRange"),issueFetchThreadCapabilitiesTask:r("LSIssueFetchThreadCapabilitiesTask"),issueInsertPersistentMenuItemsForThreadTask:r("LSIssueInsertPersistentMenuItemsForThreadTask"),issueNextSync:r("LSIssueNextSync"),mailboxTaskCompletionApiOnTaskCompletion:r("LSMailboxTaskCompletionApiOnTaskCompletion"),markThreadReadV2:r("LSMarkThreadReadV2"),replaceOptimisticReaction:r("LSReplaceOptimisticReaction"),setForwardScore:r("LSSetForwardScore"),setMessageDisplayedContentTypes:r("LSSetMessageDisplayedContentTypes"),storeProjectConfiguration:r("LSStoreProjectConfiguration"),syncBumpThreadDataToClient:r("LSSyncBumpThreadDataToClient"),transportHybridParticipantUpdateReceipts:r("LSTransportHybridParticipantUpdateReceipts"),triggerReenrollementFromOptOutDelta:r("LSTriggerReenrollementFromOptOutDelta"),truncateMetadataThreads:r("LSTruncateMetadataThreads"),truncateTablesForSyncGroup:r("LSTruncateTablesForSyncGroup"),updateAttachmentItemCtaAtIndex:r("LSUpdateAttachmentItemCtaAtIndex"),updateCommunityThreadStaleState:r("LSUpdateCommunityThreadStaleState"),updateOrInsertCommunitySurfaceRange:r("LSUpdateOrInsertCommunitySurfaceRange"),updateOrInsertOhaiGatewayKeyConfigs:r("LSUpdateOrInsertOhaiGatewayKeyConfigs"),updateOrInsertThread:r("LSUpdateOrInsertThread"),updateReadReceipt:r("LSUpdateReadReceipt"),updateThreadActivityStatus:r("LSUpdateThreadActivityStatus"),updateThreadAuthorityAndMappingWithOTIDFromJID:r("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID"),updateThreadDisappearingSetting:r("LSUpdateThreadDisappearingSetting"),updateThreadNullState:r("LSUpdateThreadNullState"),updateThreadsRangesV2:r("LSUpdateThreadsRangesV2"),upsertContextualProfileV1:r("LSUpsertContextualProfileV1"),upsertFolderSeenTimestamp:r("LSUpsertFolderSeenTimestamp"),upsertInboxThreadsRange:r("LSUpsertInboxThreadsRange"),upsertMessage:r("LSUpsertMessage"),upsertReaction:r("LSUpsertReaction"),upsertSyncGroupThreadsRange:r("LSUpsertSyncGroupThreadsRange"),verifyAndSaveNewCredentials:r("LSVerifyAndSaveNewCredentials"),verifyE2EEMetadataThreadExistsV2:r("LSVerifyE2EEMetadataThreadExistsV2"),writeThreadCapabilities:r("LSWriteThreadCapabilities")}),s=e;l.default=s}),98);
__d("MWPExecuteTaskBridge",["FBLogger","QuickPerformanceLogger","cr:6551"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o,a){var i=o.event,l=o.taskID;if((e||(e=r("QuickPerformanceLogger"))).markerPoint(i,"execute_task_through_bridge",{instanceKey:l}),n("cr:6551")==null||n("cr:6551")[a]==null)throw(e||(e=r("QuickPerformanceLogger"))).markerPoint(i,"handler_not_found",{instanceKey:l}),r("FBLogger")("messenger_web").mustfixThrow("[LS] No bridge task handler found for %s",a);return e.markerPoint(i,"bridge_api_call",{instanceKey:l}),n("cr:6551")[a](t,o)}l.executeTask=s}),98);
__d("MWPHandleNativeTaskBatched",["FBLogger","I64","LSHandleTaskSendSuccessForQueue2","LSJson","LSShape","LSSyncStoredProcedureUtils","LSVec","MWPExecuteTaskBridge","Promise","QuickPerformanceLogger","asyncToGeneratorRuntime","getErrorSafe","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=new Set;function d(e){try{var t=e.payload!==""?o("LSJson").parse(e.payload):"";return t}catch(t){throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("[LS] parseLSTaskReqType: Error parsing native task payload for queue: %s, falling back to null payload",e.queue_name)}}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,l){if(c.has((u||(u=o("I64"))).to_string(a.task_id)))return r("FBLogger")("messenger_web").warn("[LS] MWPHAndleNativeTask: Task is already being processed, skipping"),(s||(s=n("Promise"))).resolve();c.add((u||(u=o("I64"))).to_string(a.task_id));var m=u.to_float(a.task_id),p=r("qpl")._(164763515,"1216");if((e||(e=r("QuickPerformanceLogger"))).markerStart(p,m),a.label==null)return r("FBLogger")("messenger_web").warn("[LS] MWPHandleNativeTask: Cannot find a handler for task if task label is empty"),(e||(e=r("QuickPerformanceLogger"))).markerPoint(p,"null_task_label",{instanceKey:m}),e.markerEnd(p,3,m),c.delete((u||(u=o("I64"))).to_string(a.task_id)),t.runInTransaction(function(e){return e.pending_tasks.delete(a.task_id)},"readwrite",void 0,void 0,i.id+":82");var _;try{(e||(e=r("QuickPerformanceLogger"))).markerPoint(p,"parse_task",{instanceKey:m}),_=d(a)}catch(t){(e||(e=r("QuickPerformanceLogger"))).markerPoint(p,"parse_task_failed",{instanceKey:m}),r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)),c.delete((u||(u=o("I64"))).to_string(a.task_id));return}var f=a.label;e.markerAnnotate(p,{string:{source:"MWPHandleNativeTaskBatched_handleTask",taskName:f}},{instanceKey:m});try{(e||(e=r("QuickPerformanceLogger"))).markerPoint(p,"task_execute",{instanceKey:m}),yield o("MWPExecuteTaskBridge").executeTask(_,{actorID:l,event:p,source:"MWPHandleNativeTaskBatched_handleTask",taskID:(u||(u=o("I64"))).to_float(a.task_id)},f),yield t.runInTransaction(function(e){return e.pending_tasks.delete(a.task_id)},"readwrite",void 0,void 0,i.id+":131"),e.markerEnd(p,2,m)}catch(l){yield t.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield e.pending_tasks.get(a.task_id);if(t!=null)return o("LSSyncStoredProcedureUtils").incrementPendingTaskFailureCount(e,t)});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":142"),(e||(e=r("QuickPerformanceLogger"))).markerPoint(p,"task_execute_failed",{instanceKey:m}),e.markerEnd(p,3,m),r("FBLogger")("messenger_web").catching(r("getErrorSafe")(l)).mustfix("Error handling native task for %s.",a.label)}c.delete(u.to_string(a.task_id))}),p.apply(this,arguments)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a){var l=t.network_payload,c=t.queue_name;if(l==null)return r("FBLogger")("messenger_web").warn("[LS] MWPHAndleNativeTask: network_payload is empty, there's nothing to handle"),(s||(s=n("Promise"))).resolve();var d=o("LSShape").toRecord(l),p=r("LSVec").toArray(d.tasks).map(function(e){return o("LSShape").toRecord(e)}),_=p.map(function(t){return m(e,t,a)});try{yield(s||(s=n("Promise"))).all(_),yield e.runInTransaction(function(e){return r("LSHandleTaskSendSuccessForQueue2")(e,c)},"readwrite",void 0,void 0,i.id+":185")}catch(t){r("FBLogger")("messenger_web").warn("[LS] MWPHAndleNativeTask: tasks network_payload is empty, there's nothing to handle",c);try{yield e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(e,c,(u||(u=o("I64"))).neg_one),yield o("LSSyncStoredProcedureUtils").closeEpoch(e,c,u.neg_one)});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":195")}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("[LS] Error bumping failure cound for task")}}}),f.apply(this,arguments)}var g={handleLSWork:_};l.default=g}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/yKsQCAUqcFZ/
 */
__d("dexie-4.0.1",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){(function(t,n){typeof e=="object"&&typeof l!="undefined"?l.exports=n():(t=typeof globalThis!="undefined"?globalThis:t||self,t.Dexie=n())})(this,(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function n(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r.apply(this,arguments)};function o(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var a=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:t,i=Object.keys,l=Array.isArray;typeof Promise!="undefined"&&!a.Promise&&(a.Promise=Promise);function s(e,t){return typeof t!="object"||i(t).forEach(function(n){e[n]=t[n]}),e}var u=Object.getPrototypeOf,c={}.hasOwnProperty;function d(e,t){return c.call(e,t)}function m(e,t){typeof t=="function"&&(t=t(u(e))),(typeof Reflect=="undefined"?i:Reflect.ownKeys)(t).forEach(function(n){_(e,n,t[n])})}var p=Object.defineProperty;function _(e,t,n,r){p(e,t,s(n&&d(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),_(e.prototype,"constructor",e),{extend:m.bind(null,e.prototype)}}}}var g=Object.getOwnPropertyDescriptor;function h(e,t){var n=g(e,t),r;return n||(r=u(e))&&h(r,t)}var y=[].slice;function C(e,t,n){return y.call(e,t,n)}function b(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function S(e){a.setImmediate?setImmediate(e):setTimeout(e,0)}function R(e,t){return e.reduce(function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e},{})}function L(e,t){if(typeof t=="string"&&d(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,o=t.length;r<o;++r){var a=L(e,t[r]);n.push(a)}return n}var i=t.indexOf(".");if(i!==-1){var l=e[t.substr(0,i)];return l==null?void 0:L(l,t.substr(i+1))}}function E(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){v(typeof n!="string"&&"length"in n);for(var r=0,o=t.length;r<o;++r)E(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var i=t.substr(0,a),s=t.substr(a+1);if(s==="")n===void 0?l(e)&&!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=n;else{var u=e[i];(!u||!d(e,i))&&(u=e[i]={}),E(u,s,n)}}else n===void 0?l(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function k(e,t){typeof t=="string"?E(e,t,void 0):"length"in t&&[].map.call(t,function(t){E(e,t,void 0)})}function I(e){var t={};for(var n in e)d(e,n)&&(t[n]=e[n]);return t}var T=[].concat;function D(e){return T.apply([],e)}var x="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return a[e]}),$=new Set(x.map(function(e){return a[e]}));function P(e){var t={};for(var n in e)if(d(e,n)){var r=e[n];t[n]=!r||typeof r!="object"||$.has(r.constructor)?r:P(r)}return t}function N(e){for(var t in e)if(d(e,t))return!1;return!0}var M=null;function w(e){M=new WeakMap;var t=A(e);return M=null,t}function A(e){if(!e||typeof e!="object")return e;var t=M.get(e);if(t)return t;if(l(e)){t=[],M.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(A(e[n]))}else if($.has(e.constructor))t=e;else{var o=u(e);t=o===Object.prototype?{}:Object.create(o),M.set(e,t);for(var a in e)d(e,a)&&(t[a]=A(e[a]))}return t}var F={}.toString;function O(e){return F.call(e).slice(8,-1)}var B=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",W=typeof B=="symbol"?function(e){var t;return e!=null&&(t=e[B])&&t.apply(e)}:function(){return null};function q(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var U={};function V(e){var t,n,r,o;if(arguments.length===1){if(l(e))return e.slice();if(this===U&&typeof e=="string")return[e];if(o=W(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var H=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},G=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],j=G.concat(z),K={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Q(e,t){this.name=e,this.message=t}f(Q).from(Error).extend({toString:function(){return this.name+": "+this.message}});function X(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function Y(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=X(e,t)}f(Y).from(Q);function J(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=X(e,this.failures)}f(J).from(Q);var Z=j.reduce(function(e,t){return e[t]=t+"Error",e},{}),ee=Q,te=j.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?typeof e=="string"?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):typeof e=="object"&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=K[t]||n,this.inner=null)}return f(r).from(ee),e[t]=r,e},{});te.Syntax=SyntaxError,te.Type=TypeError,te.Range=RangeError;var ne=z.reduce(function(e,t){return e[t+"Error"]=te[t],e},{});function re(e,t){if(!e||e instanceof Q||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ne[e.name])return e;var n=new ne[e.name](t||e.message,e);return"stack"in e&&_(n,"stack",{get:function(){return this.inner.stack}}),n}var oe=j.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=te[t]),e},{});oe.ModifyError=Y,oe.DexieError=Q,oe.BulkError=J;function ae(){}function ie(e){return e}function le(e,t){return e==null||e===ie?t:function(n){return t(e(n))}}function se(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ue(e,t){return e===ae?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?se(r,this.onsuccess):r),o&&(this.onerror=this.onerror?se(o,this.onerror):o),a!==void 0?a:n}}function ce(e,t){return e===ae?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?se(n,this.onsuccess):n),r&&(this.onerror=this.onerror?se(r,this.onerror):r)}}function de(e,t){return e===ae?t:function(n){var r=e.apply(this,arguments);s(n,r);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?se(o,this.onsuccess):o),a&&(this.onerror=this.onerror?se(a,this.onerror):a),r===void 0?i===void 0?void 0:i:s(r,i)}}function me(e,t){return e===ae?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function pe(e,t){return e===ae?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var _e=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function fe(e,t){_e=e}var ge={},he=100,ye=typeof Promise=="undefined"?[]:(function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,u(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,u(t),e]})(),Ce=ye[0],be=ye[1],ve=ye[2],Se=be&&be.then,Re=Ce&&Ce.constructor,Le=!!ve;function Ee(){queueMicrotask(Ge)}var ke=function(e,t){Me.push([e,t]),Te&&(Ee(),Te=!1)},Ie=!0,Te=!0,De=[],xe=[],$e=ie,Pe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ae,pgp:!1,env:{},finalize:ae},Ne=Pe,Me=[],we=0,Ae=[];function Fe(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=Ne;if(typeof e!="function"){if(e!==ge)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&qe(this,this._value);return}this._state=null,this._value=null,++t.ref,We(this,e)}var Oe={get:function(){var e=Ne,t=ot;function n(n,r){var o=this,a=!e.global&&(e!==Ne||t!==ot),i=a&&!st(),l=new Fe(function(t,l){Ve(o,new Be(ft(n,e,a,i),ft(r,e,a,i),t,l,e))});return this._consoleTask&&(l._consoleTask=this._consoleTask),l}return n.prototype=ge,n},set:function(e){_(this,"then",e&&e.prototype===ge?Oe:{get:function(){return e},set:Oe.set})}};m(Fe.prototype,{then:Oe,_then:function(e,t){Ve(this,new Be(null,null,e,t,Ne))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(e){return e instanceof t?n(e):Je(e)}):this.then(null,function(e){return e&&e.name===t?n(e):Je(e)})},finally:function(e){return this.then(function(t){return Fe.resolve(e()).then(function(){return t})},function(t){return Fe.resolve(e()).then(function(){return Je(t)})})},timeout:function(e,t){var n=this;return e<1/0?new Fe(function(r,o){var a=setTimeout(function(){return o(new te.Timeout(t))},e);n.then(r,o).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol!="undefined"&&Symbol.toStringTag&&_(Fe.prototype,Symbol.toStringTag,"Dexie.Promise"),Pe.env=pt();function Be(e,t,n,r,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=o}m(Fe,{all:function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(o,a){return Fe.resolve(o).then(function(n){e[a]=n,--r||t(e)},n)})})},resolve:function(e){if(e instanceof Fe)return e;if(e&&typeof e.then=="function")return new Fe(function(t,n){e.then(t,n)});var t=new Fe(ge,!0,e);return t},reject:Je,race:function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t,n){e.map(function(e){return Fe.resolve(e).then(t,n)})})},PSD:{get:function(){return Ne},set:function(e){return Ne=e}},totalEchoes:{get:function(){return ot}},newPSD:it,usePSD:_t,scheduler:{get:function(){return ke},set:function(e){ke=e}},rejectionMapper:{get:function(){return $e},set:function(e){$e=e}},follow:function(e,t){return new Fe(function(n,r){return it(function(t,n){var r=Ne;r.unhandleds=[],r.onunhandled=n,r.finalize=se(function(){var e=this;Qe(function(){e.unhandleds.length===0?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}}),Re&&(Re.allSettled&&_(Fe,"allSettled",function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,o){return Fe.resolve(e).then(function(e){return r[o]={status:"fulfilled",value:e}},function(e){return r[o]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),Re.any&&typeof AggregateError!="undefined"&&_(Fe,"any",function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(e,a){return Fe.resolve(e).then(function(e){return t(e)},function(e){o[a]=e,--r||n(new AggregateError(o))})})})}));function We(e,t){try{t(function(t){if(e._state===null){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ze();t&&typeof t.then=="function"?We(e,function(e,n){t instanceof Fe?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,Ue(e)),n&&je()}},qe.bind(null,e))}catch(t){qe(e,t)}}function qe(e,t){if(xe.push(t),e._state===null){var n=e._lib&&ze();t=$e(t),e._state=!1,e._value=t,Xe(e),Ue(e),n&&je()}}function Ue(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ve(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),we===0&&(++we,ke(function(){--we===0&&Ke()},[]))}function Ve(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++we,ke(He,[n,e,t])}function He(e,t,n){try{var r,o=t._value;!t._state&&xe.length&&(xe=[]),r=_e&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),!t._state&&xe.indexOf(o)===-1&&Ye(t),n.resolve(r)}catch(e){n.reject(e)}finally{--we===0&&Ke(),--n.psd.ref||n.psd.finalize()}}function Ge(){_t(Pe,function(){ze()&&je()})}function ze(){var e=Ie;return Ie=!1,Te=!1,e}function je(){var e,t,n;do for(;Me.length>0;)for(e=Me,Me=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Me.length>0);Ie=!0,Te=!0}function Ke(){var e=De;De=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Ae.slice(0),n=t.length;n;)t[--n]()}function Qe(e){function t(){e(),Ae.splice(Ae.indexOf(t),1)}Ae.push(t),++we,ke(function(){--we===0&&Ke()},[])}function Xe(e){De.some(function(t){return t._value===e._value})||De.push(e)}function Ye(e){for(var t=De.length;t;)if(De[--t]._value===e._value){De.splice(t,1);return}}function Je(e){return new Fe(ge,!1,e)}function Ze(e,t){var n=Ne;return function(){var r=ze(),o=Ne;try{return mt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{mt(o,!1),r&&je()}}}var et={awaits:0,echoes:0,id:0},tt=0,nt=[],rt=0,ot=0,at=0;function it(e,t,n,r){var o=Ne,a=Object.create(o);a.parent=o,a.ref=0,a.global=!1,a.id=++at,Pe.env,a.env=Le?{Promise:Fe,PromiseProp:{value:Fe,configurable:!0,writable:!0},all:Fe.all,race:Fe.race,allSettled:Fe.allSettled,any:Fe.any,resolve:Fe.resolve,reject:Fe.reject}:{},t&&s(a,t),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var i=_t(a,e,n,r);return a.ref===0&&a.finalize(),i}function lt(){return et.id||(et.id=++tt),++et.awaits,et.echoes+=he,et.id}function st(){return et.awaits?(--et.awaits===0&&(et.id=0),et.echoes=et.awaits*he,!0):!1}(""+Se).indexOf("[native code]")===-1&&(lt=st=ae);function ut(e){return et.echoes&&e&&e.constructor===Re?(lt(),e.then(function(e){return st(),e},function(e){return st(),ht(e)})):e}function ct(e){++ot,(!et.echoes||--et.echoes===0)&&(et.echoes=et.awaits=et.id=0),nt.push(Ne),mt(e,!0)}function dt(){var e=nt[nt.length-1];nt.pop(),mt(e,!1)}function mt(e,t){var n=Ne;if((t?et.echoes&&(!rt++||e!==Ne):rt&&(!--rt||e!==Ne))&&queueMicrotask(t?ct.bind(null,e):dt),e!==Ne&&(Ne=e,n===Pe&&(Pe.env=pt()),Le)){var r=Pe.env.Promise,o=e.env;(n.global||e.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function pt(){var e=a.Promise;return Le?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function _t(e,t,n,r,o){var a=Ne;try{return mt(e,!0),t(n,r,o)}finally{mt(a,!1)}}function ft(e,t,n,r){return typeof e!="function"?e:function(){var o=Ne;n&&lt(),mt(t,!0);try{return e.apply(this,arguments)}finally{mt(o,!1),r&&queueMicrotask(st)}}}function gt(e){Promise===Re&&et.echoes===0?rt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var ht=Fe.reject;function yt(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!Ne.letThrough&&!e._vip){if(e._state.openComplete)return ht(new te.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return ht(new te.DatabaseClosed);e.open().catch(ae)}return e._state.dbReadyPromise.then(function(){return yt(e,t,n,r)})}else{var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Z.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(e.close({disableAutoOpen:!1}),e.open().then(function(){return yt(e,t,n,r)})):ht(o)}return o._promise(t,function(e,t){return it(function(){return Ne.trans=o,r(e,t,o)})}).then(function(e){if(t==="readwrite")try{o.idbtrans.commit()}catch(e){}return t==="readonly"?e:o._completion.then(function(){return e})})}}var Ct="4.0.1",bt="\uFFFF",vt=-1/0,St="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Rt="String expected.",Lt=[],Et="__dbnames",kt="readonly",It="readwrite";function Tt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Dt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=w(t),delete t[e]),t}:function(e){return e}}function $t(){throw te.Type()}function Pt(e,t){try{var n=wt(e),r=wt(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Mt(At(e),At(t));case"Array":return Nt(e,t)}}catch(e){}return NaN}function Nt(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,a=0;a<o;++a){var i=Pt(e[a],t[a]);if(i!==0)return i}return n===r?0:n<r?-1:1}function Mt(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,a=0;a<o;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function wt(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=O(e);return n==="ArrayBuffer"?"binary":n}function At(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ft=(function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Ne.trans,o=this.name,a=_e&&typeof console!="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function i(e,n,r){if(!r.schema[o])throw new te.NotFound("Table "+o+" not part of transaction");return t(r.idbtrans,r)}var l=ze();try{var s=r&&r.db._novip===this.db._novip?r===Ne.trans?r._promise(e,i,n):it(function(){return r._promise(e,i,n)},{trans:r,transless:Ne.transless||Ne}):yt(this.db,e,[this.name],i);return a&&(s._consoleTask=a,s=s.catch(function(e){return console.trace(e),ht(e)})),s}finally{l&&je()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?ht(new te.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},e.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(l(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=i(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})){for(var n=0;n<t.length;++n)if(t.indexOf(e.keyPath[n])===-1)return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==bt){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}!n&&_e&&"The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]");var o=this.schema.idxByName,a=this.db._deps.indexedDB;function s(e,t){return a.cmp(e,t)===0}var u=t.reduce(function(t,n){var r=t[0],a=t[1],i=o[n],u=e[n];return[r||i,r||!i?Tt(a,i&&i.multi?function(e){var t=L(e,n);return l(t)&&t.some(function(e){return s(u,e)})}:function(e){return s(u,L(e,n))}):a]},[null,null]),c=u[0],d=u[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(d):n?this.filter(d):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,l(e)?"[".concat(e.join("+"),"]"):e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){var t=this,r=t.db,o=t.name;this.schema.mappedClass=e,e.prototype instanceof $t&&(e=(function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),t.prototype.table=function(){return o},t})(e));for(var a=new Set,i=e.prototype;i;i=u(i))Object.getOwnPropertyNames(i).forEach(function(e){return a.add(e)});var l=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(!a.has(r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),e},e.prototype.defineClass=function(){function e(e){s(this,e)}return this.mapToClass(e)},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,a=r.keyPath,i=e;return a&&o&&(i=xt(a)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:t!=null?[t]:null,values:[i]})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):e.lastResult}).then(function(t){if(a)try{E(e,a,t)}catch(e){}return t})},e.prototype.update=function(e,t){if(typeof e=="object"&&!l(e)){var n=L(e,this.schema.primKey.keyPath);return n===void 0?ht(new te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}else return this.where(":id").equals(e).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,a=r.keyPath,i=e;return a&&o&&(i=xt(a)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[i],keys:t!=null?[t]:null})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):e.lastResult}).then(function(t){if(a)try{E(e,a,t)}catch(e){}return t})},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):void 0})},e.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Dt})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):void 0})},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},e.prototype.bulkAdd=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0;n=n||(o?void 0:t);var a=n?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=r.schema.primKey,i=n.auto,l=n.keyPath;if(l&&o)throw new te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,u=l&&i?e.map(xt(l)):e;return r.core.mutate({trans:t,type:"add",keys:o,values:u,wantResults:a}).then(function(e){var t=e.numFailures,n=e.results,o=e.lastResult,i=e.failures,l=a?n:o;if(t===0)return l;throw new J("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),i)})})},e.prototype.bulkPut=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0;n=n||(o?void 0:t);var a=n?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=r.schema.primKey,i=n.auto,l=n.keyPath;if(l&&o)throw new te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,u=l&&i?e.map(xt(l)):e;return r.core.mutate({trans:t,type:"put",keys:o,values:u,wantResults:a}).then(function(e){var t=e.numFailures,n=e.results,o=e.lastResult,i=e.failures,l=a?n:o;if(t===0)return l;throw new J("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),i)})})},e.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),o=e.map(function(e){return e.changes}),a=[];return this._trans("readwrite",function(i){return n.getMany({trans:i,keys:r,cache:"clone"}).then(function(l){var s=[],u=[];e.forEach(function(e,n){var r=e.key,o=e.changes,i=l[n];if(i){for(var c=0,d=Object.keys(o);c<d.length;c++){var m=d[c],p=o[m];if(m===t.schema.primKey.keyPath){if(Pt(p,r)!==0)throw new te.Constraint("Cannot update primary key in bulkUpdate()")}else E(i,m,p)}a.push(n),s.push(r),u.push(i)}});var c=s.length;return n.mutate({trans:i,type:"put",keys:s,values:u,updates:{keys:r,changeSpecs:o}}).then(function(e){var n=e.numFailures,r=e.failures;if(n===0)return c;for(var o=0,i=Object.keys(r);o<i.length;o++){var l=i[o],s=a[Number(l)];if(s!=null){var u=r[l];delete r[l],r[s]=u}}throw new J("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(c," operations failed"),r)})})})},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e})}).then(function(e){var r=e.numFailures,o=e.lastResult,a=e.failures;if(r===0)return o;throw new J("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),a)})},e})();function Ot(e){var t={},n=function(n,r){if(r){for(var o=arguments.length,a=new Array(o-1);--o;)a[o-1]=arguments[o];return t[n].subscribe.apply(null,a),e}else if(typeof n=="string")return t[n]};n.addEventType=a;for(var r=1,o=arguments.length;r<o;++r)a(arguments[r]);return n;function a(e,r,o){if(typeof e=="object")return s(e);r||(r=me),o||(o=ae);var a={subscribers:[],fire:o,subscribe:function(e){a.subscribers.indexOf(e)===-1&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter(function(t){return t!==e}),a.fire=a.subscribers.reduce(r,o)}};return t[e]=n[e]=a,a}function s(e){i(e).forEach(function(t){var n=e[t];if(l(n))a(t,e[t][0],e[t][1]);else if(n==="asap")var r=a(t,ie,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){S(function(){e.apply(null,t)})})});else throw new te.InvalidArgument("Invalid event config")})}}function Bt(e,t){return f(t).from({prototype:e}),t}function Wt(e){return Bt(Ft.prototype,function(n,r,o){this.db=e,this._tx=o,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Ot(null,{creating:[ue,ae],reading:[le,ie],updating:[de,ae],deleting:[ce,ae]})})}function qt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ut(e,t){e.filter=Tt(e.filter,t)}function Vt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Tt(r(),t())}:t,e.justLimit=n&&!r}function Ht(e,t){e.isMatch=Tt(e.isMatch,t)}function Gt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new te.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function zt(e,t,n){var r=Gt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function jt(e,t,n,r){var o=e.replayFilter?Tt(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},i=function(e,n,r){if(!o||o(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})){var i=n.primaryKey,l=""+i;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(i)),d(a,l)||(a[l]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(i,n),Kt(zt(e,r,n),e.algorithm,i,!e.keysOnly&&e.valueMapper)])}else return Kt(zt(e,r,n),Tt(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function Kt(e,t,n,r){var o=r?function(e,t,o){return n(r(e),t,o)}:n,a=Ze(o);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};(!t||t(e,function(e){return n=e},function(t){e.stop(t),n=ae},function(t){e.fail(t),n=ae}))&&a(e.value,e,function(e){return n=e}),n()})})}var Qt=Symbol(),Xt=(function(){function e(e){Object.assign(this,e)}return e.prototype.execute=function(e){var t,n=(t=this.replacePrefix)===null||t===void 0?void 0:t[0];return n&&typeof e=="string"&&e.startsWith(n)?this.replacePrefix[1]+e.substring(n.length):e},e})(),Yt=(function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Tt(t.algorithm,e)},e.prototype._iterate=function(e,t){return jt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return jt(t,e,n,t.table.core)})},e.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(qt(n,!0))return r.count({trans:e,query:{index:Gt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var o=0;return jt(n,function(){return++o,!1},e,r).then(function(){return o})}).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],o=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var i=this._ctx.dir==="next"?1:-1;function l(e,t){var n=a(e,o),r=a(t,o);return n<r?-i:n>r?i:0}return this.toArray(function(e){return e.sort(l)}).then(t)},e.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if(n.dir==="next"&&qt(n,!0)&&n.limit>0){var r=n.valueMapper,o=Gt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then(function(e){var t=e.result;return r?t.map(r):t})}else{var a=[];return jt(n,function(e){return a.push(e)},e,n.table.core).then(function(){return a})}},e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,qt(t)?Vt(t,function(){var t=e;return function(e,n){return t===0?!0:t===1?(--t,!1):(n(function(){e.advance(t),t=0}),!1)}}):Vt(t,function(){var t=e;return function(){return--t<0}}),this)},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Vt(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},e.prototype.until=function(e,t){return Ut(this._ctx,function(n,r,o){return e(n.value)?(r(o),t):!0}),this},e.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return Ut(this._ctx,function(t){return e(t.value)}),Ht(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&qt(t,!0)&&t.limit>0)return this._read(function(e){var n=Gt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){var t=e.result;return t}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ut(this._ctx,function(e){var t=e.primaryKey.toString(),r=d(n,t);return n[t]=!0,!r}),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var o;if(typeof e=="function")o=e;else{var a=i(e),l=a.length;o=function(t){for(var n=!1,r=0;r<l;++r){var o=a[r],i=e[o],s=L(t,o);i instanceof Xt?(E(t,o,i.execute(s)),n=!0):s!==i&&(E(t,o,i),n=!0)}return n}}var s=n.table.core,u=s.schema.primaryKey,c=u.outbound,d=u.extractKey,m=t.db._options.modifyChunkSize||200,p=[],_=0,f=[],g=function(e,t){var n=t.failures,r=t.numFailures;_+=e-r;for(var o=0,a=i(n);o<a.length;o++){var l=a[o];p.push(n[l])}};return t.clone().primaryKeys().then(function(t){var a=function(i){var l=Math.min(m,t.length-i);return s.getMany({trans:r,keys:t.slice(i,i+l),cache:"immutable"}).then(function(u){for(var p=[],_=[],f=c?[]:null,h=[],y=0;y<l;++y){var C=u[y],b={value:w(C),primKey:t[i+y]};o.call(b,b.value,b)!==!1&&(b.value==null?h.push(t[i+y]):!c&&Pt(d(C),d(b.value))!==0?(h.push(t[i+y]),p.push(b.value)):(_.push(b.value),c&&f.push(t[i+y])))}var v=qt(n)&&n.limit===1/0&&(typeof e!="function"||e===Jt)&&{index:n.index,range:n.range};return Promise.resolve(p.length>0&&s.mutate({trans:r,type:"add",values:p}).then(function(e){for(var t in e.failures)h.splice(parseInt(t),1);g(p.length,e)})).then(function(){return(_.length>0||v&&typeof e=="object")&&s.mutate({trans:r,type:"put",keys:f,values:_,criteria:v,changeSpec:typeof e!="function"&&e}).then(function(e){return g(_.length,e)})}).then(function(){return(h.length>0||v&&e===Jt)&&s.mutate({trans:r,type:"delete",keys:h,criteria:v}).then(function(e){return g(h.length,e)})}).then(function(){return t.length>i+l&&a(i+m)})})};return a(0).then(function(){if(p.length>0)throw new Y("Error modifying one or more objects",p,_,f);return t.length})})})},e.prototype.delete=function(){var e=this._ctx,t=e.range;return qt(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then(function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new Y("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-r);return t-r})})}):this.modify(Jt)},e})(),Jt=function(e,t){return t.value=null};function Zt(e){return Bt(Yt.prototype,function(n,r){this.db=e;var t=Dt,o=null;if(r)try{t=r()}catch(e){o=e}var a=n._ctx,i=a.table,l=i.hook.reading.fire;this._ctx={table:i,index:a.index,isPrimKey:!a.index||i.schema.primKey.keyPath&&a.index===i.schema.primKey.name,range:t,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:l!==ie?l:null}})}function en(e,t){return e<t?-1:e===t?0:1}function tn(e,t){return e>t?-1:e===t?0:1}function nn(e,t,n){var r=e instanceof dn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function rn(e){return new e.Collection(e,function(){return cn("")}).limit(0)}function on(e){return e==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function an(e){return e==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function ln(e,t,n,r,o,a){for(var i=Math.min(e.length,r.length),l=-1,s=0;s<i;++s){var u=t[s];if(u!==r[s])return o(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):o(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;o(e[s],u)<0&&(l=s)}return i<r.length&&a==="next"?e+n.substr(e.length):i<e.length&&a==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function sn(e,t,n,r){var o,a,i,l,s,u,c,d=n.length;if(!n.every(function(e){return typeof e=="string"}))return nn(e,Rt);function m(e){o=on(e),a=an(e),i=e==="next"?en:tn;var t=n.map(function(e){return{lower:a(e),upper:o(e)}}).sort(function(e,t){return i(e.lower,t.lower)});l=t.map(function(e){return e.upper}),s=t.map(function(e){return e.lower}),u=e,c=e==="next"?"":r}m("next");var p=new e.Collection(e,function(){return un(l[0],s[d-1]+r)});p._ondirectionchange=function(e){m(e)};var _=0;return p._addAlgorithm(function(e,n,r){var o=e.key;if(typeof o!="string")return!1;var m=a(o);if(t(m,s,_))return!0;for(var p=null,f=_;f<d;++f){var g=ln(o,m,l[f],s[f],i,u);g===null&&p===null?_=f+1:(p===null||i(p,g)>0)&&(p=g)}return n(p!==null?function(){e.continue(p+c)}:r),!1}),p}function un(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function cn(e){return{type:1,lower:e,upper:e}}var dn=(function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return this._cmp(e,t)>0||this._cmp(e,t)===0&&(n||r)&&!(n&&r)?rn(this):new this.Collection(this,function(){return un(e,t,!n,!r)})}catch(e){return nn(this,St)}},e.prototype.equals=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return cn(e)})},e.prototype.above=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(e,void 0,!0)})},e.prototype.aboveOrEqual=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(e,void 0,!1)})},e.prototype.below=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(void 0,e,!1,!0)})},e.prototype.belowOrEqual=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(void 0,e)})},e.prototype.startsWith=function(e){return typeof e!="string"?nn(this,Rt):this.between(e,e+bt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):sn(this,function(e,t){return e.indexOf(t[0])===0},[e],bt)},e.prototype.equalsIgnoreCase=function(e){return sn(this,function(e,t){return e===t[0]},[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=V.apply(U,arguments);return e.length===0?rn(this):sn(this,function(e,t){return t.indexOf(e)!==-1},e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=V.apply(U,arguments);return e.length===0?rn(this):sn(this,function(e,t){return t.some(function(t){return e.indexOf(t)===0})},e,bt)},e.prototype.anyOf=function(){var e=this,t=V.apply(U,arguments),n=this._cmp;try{t.sort(n)}catch(e){return nn(this,St)}if(t.length===0)return rn(this);var r=new this.Collection(this,function(){return un(t[0],t[t.length-1])});r._ondirectionchange=function(r){n=r==="next"?e._ascending:e._descending,t.sort(n)};var o=0;return r._addAlgorithm(function(e,r,a){for(var i=e.key;n(i,t[o])>0;)if(++o,o===t.length)return r(a),!1;return n(i,t[o])===0?!0:(r(function(){e.continue(t[o])}),!1)}),r},e.prototype.notEqual=function(e){return this.inAnyRange([[vt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=V.apply(U,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return nn(this,St)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[vt,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,o=this._ascending,a=this._descending,i=this._min,l=this._max;if(e.length===0)return rn(this);if(!e.every(function(e){return e[0]!==void 0&&e[1]!==void 0&&o(e[0],e[1])<=0}))return nn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",te.InvalidArgument);var s=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;function c(e,t){for(var n=0,o=e.length;n<o;++n){var a=e[n];if(r(t[0],a[1])<0&&r(t[1],a[0])>0){a[0]=i(a[0],t[0]),a[1]=l(a[1],t[1]);break}}return n===o&&e.push(t),e}var d=o;function m(e,t){return d(e[0],t[0])}var p;try{p=e.reduce(c,[]),p.sort(m)}catch(e){return nn(this,St)}var _=0,f=u?function(e){return o(e,p[_][1])>0}:function(e){return o(e,p[_][1])>=0},g=s?function(e){return a(e,p[_][0])>0}:function(e){return a(e,p[_][0])>=0};function h(e){return!f(e)&&!g(e)}var y=f,C=new this.Collection(this,function(){return un(p[0][0],p[p.length-1][1],!s,!u)});return C._ondirectionchange=function(e){e==="next"?(y=f,d=o):(y=g,d=a),p.sort(m)},C._addAlgorithm(function(e,t,r){for(var a=e.key;y(a);)if(++_,_===p.length)return t(r),!1;return h(a)?!0:(n._cmp(a,p[_][1])===0||n._cmp(a,p[_][0])===0||t(function(){d===o?e.continue(p[_][0]):e.continue(p[_][1])}),!1)}),C},e.prototype.startsWithAnyOf=function(){var e=V.apply(U,arguments);return e.every(function(e){return typeof e=="string"})?e.length===0?rn(this):this.inAnyRange(e.map(function(e){return[e,e+bt]})):nn(this,"startsWithAnyOf() only works with strings")},e})();function mn(e){return Bt(dn.prototype,function(n,r,o){if(this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:o},this._cmp=this._ascending=Pt,this._descending=function(e,t){return Pt(t,e)},this._max=function(e,t){return Pt(e,t)>0?e:t},this._min=function(e,t){return Pt(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new te.MissingAPI})}function pn(e){return Ze(function(t){return _n(t),e(t.target.error),!1})}function _n(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var fn="storagemutated",gn="x-storagemutated-1",hn=Ot(null,fn),yn=(function(){function e(){}return e.prototype._lock=function(){return v(!Ne.global),++this._reculock,this._reculock===1&&!Ne.global&&(Ne.lockOwnerFor=this),this},e.prototype._unlock=function(){if(v(!Ne.global),--this._reculock===0)for(Ne.global||(Ne.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{_t(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new te.DatabaseClosed(r);case"MissingAPIError":throw new te.MissingAPI(r.message,r);default:throw new te.OpenFailed(r)}if(!this.active)throw new te.TransactionInactive;return v(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=Ze(function(n){_n(n),t._reject(e.error)}),e.onabort=Ze(function(n){_n(n),t.active&&t._reject(new te.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Ze(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&hn.storagemutated.fire(e.mutatedParts)}),this},e.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return ht(new te.ReadOnly("Transaction is readonly"));if(!this.active)return ht(new te.TransactionInactive);if(this._locked())return new Fe(function(o,a){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,a)},Ne])});if(n)return it(function(){var e=new Fe(function(e,n){r._lock();var o=t(e,n,r);o&&o.then&&o.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var o=new Fe(function(e,n){var o=t(e,n,r);o&&o.then&&o.then(e,n)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Fe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return n});else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);(function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)})()}var o=t._waitingFor;return new Fe(function(e,r){n.then(function(n){return t._waitingQueue.push(Ze(e.bind(null,n)))},function(e){return t._waitingQueue.push(Ze(r.bind(null,e)))}).finally(function(){t._waitingFor===o&&(t._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new te.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(d(t,e))return t[e];var n=this.schema[e];if(!n)throw new te.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e})();function Cn(e){return Bt(yn.prototype,function(n,r,o,a,i){var t=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Ot(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Fe(function(e,n){t._resolve=e,t._reject=n}),this._completion.then(function(){t.active=!1,t.on.complete.fire()},function(e){var n=t.active;return t.active=!1,t.on.error.fire(e),t.parent?t.parent._reject(e):n&&t.idbtrans&&t.idbtrans.abort(),ht(e)})})}function bn(e,t,n,r,o,a,i){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:a,src:(n&&!i?"&":"")+(r?"*":"")+(o?"++":"")+vn(t)}}function vn(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Sn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:R(n,function(e){return[e.name,e]})}}function Rn(e){return e.length===1?e[0]:e}var Ln=function(e){try{return e.only([[]]),Ln=function(){return[[]]},[[]]}catch(e){return Ln=function(){return bt},bt}};function En(e){return e==null?function(){}:typeof e=="string"?kn(e):function(t){return L(t,e)}}function kn(e){var t=e.split(".");return t.length===1?function(t){return t[e]}:function(t){return L(t,e)}}function In(e){return[].slice.call(e)}var Tn=0;function Dn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function xn(e,t,n){function r(e,t){var n=In(e.objectStoreNames);return{schema:{name:e.name,tables:n.map(function(e){return t.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=l(t),o=t==null,a={},i={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:En(t)},indexes:In(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry,o=e.keyPath,i=l(o),s={name:t,compound:i,keyPath:o,unique:n,multiEntry:r,extractKey:En(o)};return a[Dn(o)]=s,s}),getIndexByKeyPath:function(e){return a[Dn(e)]}};return a[":id"]=i.primaryKey,t!=null&&(a[Dn(t)]=i.primaryKey),i})},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(e){if(e.type===3)return null;if(e.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,o=e.lowerOpen,a=e.upperOpen,i=n===void 0?r===void 0?null:t.upperBound(r,!!a):r===void 0?t.lowerBound(n,!!o):t.bound(n,r,!!o,!!a);return i}function a(e){var t=e.name;function n(e){var n=e.trans,r=e.type,a=e.keys,i=e.values,l=e.range;return new Promise(function(e,s){e=Ze(e);var u=n.objectStore(t),c=u.keyPath==null,d=r==="put"||r==="add";if(!d&&r!=="delete"&&r!=="deleteRange")throw new Error("Invalid operation type: "+r);var m=(a||i||{length:1}).length;if(a&&i&&a.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(m===0)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var p,_=[],f=[],g=0,h=function(e){++g,_n(e)};if(r==="deleteRange"){if(l.type===4)return e({numFailures:g,failures:f,results:[],lastResult:void 0});l.type===3?_.push(p=u.clear()):_.push(p=u.delete(o(l)))}else{var y=d?c?[i,a]:[i,null]:[a,null],C=y[0],b=y[1];if(d)for(var v=0;v<m;++v)_.push(p=b&&b[v]!==void 0?u[r](C[v],b[v]):u[r](C[v])),p.onerror=h;else for(var v=0;v<m;++v)_.push(p=u[r](C[v])),p.onerror=h}var S=function(t){var n=t.target.result;_.forEach(function(e,t){return e.error!=null&&(f[t]=e.error)}),e({numFailures:g,failures:f,results:r==="delete"?a:_.map(function(e){return e.result}),lastResult:n})};p.onerror=function(e){h(e),S(e)},p.onsuccess=S})}function r(e){var n=e.trans,r=e.values,a=e.query,i=e.reverse,l=e.unique;return new Promise(function(e,s){e=Ze(e);var u=a.index,c=a.range,d=n.objectStore(t),m=u.isPrimaryKey?d:d.index(u.name),p=i?l?"prevunique":"prev":l?"nextunique":"next",_=r||!("openKeyCursor"in m)?m.openCursor(o(c),p):m.openKeyCursor(o(c),p);_.onerror=pn(s),_.onsuccess=Ze(function(t){var r=_.result;if(!r){e(null);return}r.___id=++Tn,r.done=!1;var o=r.continue.bind(r),a=r.continuePrimaryKey;a&&(a=a.bind(r));var i=r.advance.bind(r),l=function(){throw new Error("Cursor not started")},u=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=l,r.fail=Ze(s),r.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},r.start=function(e){var t=new Promise(function(e,t){e=Ze(e),_.onerror=pn(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=u,e(t)}}),n=function(){if(_.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return _.onsuccess=Ze(function(e){_.onsuccess=n,n()}),r.continue=o,r.continuePrimaryKey=a,r.advance=i,n(),t},e(r)},s)})}function a(e){return function(n){return new Promise(function(r,a){r=Ze(r);var i=n.trans,l=n.values,s=n.limit,u=n.query,c=s===1/0?void 0:s,d=u.index,m=u.range,p=i.objectStore(t),_=d.isPrimaryKey?p:p.index(d.name),f=o(m);if(s===0)return r({result:[]});if(e){var g=l?_.getAll(f,c):_.getAllKeys(f,c);g.onsuccess=function(e){return r({result:e.target.result})},g.onerror=pn(a)}else{var h=0,y=l||!("openKeyCursor"in _)?_.openCursor(f):_.openKeyCursor(f),C=[];y.onsuccess=function(e){var t=y.result;if(!t)return r({result:C});if(C.push(l?t.value:t.primaryKey),++h===s)return r({result:C});t.continue()},y.onerror=pn(a)}})}}return{name:t,schema:e,mutate:n,getMany:function(e){var n=e.trans,r=e.keys;return new Promise(function(e,o){e=Ze(e);for(var a=n.objectStore(t),i=r.length,l=new Array(i),s=0,u=0,c,d=function(t){var n=t.target;(l[n._pos]=n.result)!=null,++u===s&&e(l)},m=pn(o),p=0;p<i;++p){var _=r[p];_!=null&&(c=a.get(r[p]),c._pos=p,c.onsuccess=d,c.onerror=m,++s)}s===0&&e(l)})},get:function(e){var n=e.trans,r=e.key;return new Promise(function(e,o){e=Ze(e);var a=n.objectStore(t),i=a.get(r);i.onsuccess=function(t){return e(t.target.result)},i.onerror=pn(o)})},query:a(u),openCursor:r,count:function(e){var n=e.query,r=e.trans,a=n.index,i=n.range;return new Promise(function(e,n){var l=r.objectStore(t),s=a.isPrimaryKey?l:l.index(a.name),u=o(i),c=u?s.count(u):s.count();c.onsuccess=Ze(function(t){return e(t.target.result)}),c.onerror=pn(n)})}}}var i=r(e,n),s=i.schema,u=i.hasGetAll,c=s.tables.map(function(e){return a(e)}),d={};return c.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){var t=d[e];if(!t)throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Ln(t),schema:s}}function $n(e,t){return t.reduce(function(e,t){var n=t.create;return r(r({},e),n(e))},e)}function Pn(e,t,n,r){var o=n.IDBKeyRange;n.indexedDB;var a=$n(xn(t,o,r),e.dbcore);return{dbcore:a}}function Nn(e,t){var n=t.db,r=Pn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function Mn(e,t,n,r){n.forEach(function(n){var o=r[n];t.forEach(function(t){var r=h(t,n);(!r||"value"in r&&r.value===void 0)&&(t===e.Transaction.prototype||t instanceof e.Transaction?_(t,n,{get:function(){return this.table(n)},set:function(e){p(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,o))})})}function wn(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function An(e,t){return e._cfg.version-t._cfg.version}function Fn(e,t,n,r){var o=e._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=Sn("$meta",Xn("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,o);a.create(n),a._completion.catch(r);var l=a._reject.bind(a),s=Ne.transless||Ne;it(function(){if(Ne.trans=a,Ne.transless=s,t===0)i(o).forEach(function(e){Un(n,e,o[e].primKey,o[e].indexes)}),Nn(e,n),Fe.follow(function(){return e.on.populate.fire(a)}).catch(l);else return Nn(e,n),Bn(e,a,t).then(function(t){return Wn(e,t,a,n)}).catch(l)})}function On(e,t){Vn(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=zn(e,e.idbdb,t);Qn(e,e._dbSchema,t);for(var r=qn(n,e._dbSchema),o=function(e){if(e.change.length||e.recreate)return"Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key."),{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(t){_e&&"Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src),Gn(n,t)})},a=0,i=r.change;a<i.length;a++){var l=i[a],s=o(l);if(typeof s=="object")return s.value}}function Bn(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(e){return e!=null?e:n}):Fe.resolve(n)}function Wn(e,t,n,r){var o=[],a=e._versions,l=e._dbSchema=zn(e,e.idbdb,r),s=a.filter(function(e){return e._cfg.version>=t});if(s.length===0)return Fe.resolve();s.forEach(function(a){o.push(function(){var o=l,s=a._cfg.dbschema;Qn(e,o,r),Qn(e,s,r),l=e._dbSchema=s;var u=qn(o,s);u.add.forEach(function(e){Un(r,e[0],e[1].primKey,e[1].indexes)}),u.change.forEach(function(e){if(e.recreate)throw new te.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach(function(e){return Gn(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),Gn(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=a._cfg.contentUpgrade;if(c&&a._cfg.version>t){Nn(e,r),n._memoizedTables={};var d=I(s);u.del.forEach(function(e){d[e]=o[e]}),wn(e,[e.Transaction.prototype]),Mn(e,[e.Transaction.prototype],i(d),d),n.schema=d;var m=H(c);m&&lt();var p,_=Fe.follow(function(){if(p=c(n),p&&m){var e=st.bind(null,null);p.then(e,e)}});return p&&typeof p.then=="function"?Fe.resolve(p):_.then(function(){return p})}}),o.push(function(t){var r=a._cfg.dbschema;Hn(r,t),wn(e,[e.Transaction.prototype]),Mn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),o.push(function(t){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===a._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(e){return e!=="$meta"})):t.objectStore("$meta").put(a._cfg.version,"version"))})});function u(){return o.length?Fe.resolve(o.shift()(n.idbtrans)).then(u):Fe.resolve()}return u().then(function(){Vn(l,r)})}function qn(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],a=t[r];if(!o)n.add.push([r,a]);else{var i={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||o.primKey.auto!==a.primKey.auto)i.recreate=!0,n.change.push(i);else{var l=o.idxByName,s=a.idxByName,u=void 0;for(u in l)s[u]||i.del.push(u);for(u in s){var c=l[u],d=s[u];c?c.src!==d.src&&i.change.push(d):i.add.push(d)}(i.del.length>0||i.add.length>0||i.change.length>0)&&n.change.push(i)}}}return n}function Un(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return Gn(o,e)}),o}function Vn(e,t){i(e).forEach(function(n){t.db.objectStoreNames.contains(n)||Un(t,n,e[n].primKey,e[n].indexes)})}function Hn(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Gn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function zn(e,t,n){var r={},o=C(t.objectStoreNames,0);return o.forEach(function(e){for(var t=n.objectStore(e),o=t.keyPath,a=bn(vn(o),o||"",!0,!1,!!t.autoIncrement,o&&typeof o!="string",!0),i=[],l=0;l<t.indexNames.length;++l){var s=t.index(t.indexNames[l]);o=s.keyPath;var u=bn(s.name,o,!!s.unique,!!s.multiEntry,!1,o&&typeof o!="string",!1);i.push(u)}r[e]=Sn(e,a,i)}),r}function jn(e,t,n){e.verno=t.version/10;var r=e._dbSchema=zn(e,t,n);e._storeNames=C(t.objectStoreNames,0),Mn(e,[e._allTables],i(r),r)}function Kn(e,t){var n=zn(e,e.idbdb,t),r=qn(n,e._dbSchema);return!(r.add.length||r.change.some(function(e){return e.add.length||e.change.length}))}function Qn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var i=r[o],l=n.objectStore(i);e._hasGetAll="getAll"in l;for(var s=0;s<l.indexNames.length;++s){var u=l.indexNames[s],c=l.index(u).keyPath,d=typeof c=="string"?c:"["+C(c).join("+")+"]";if(t[i]){var m=t[i].idxByName[d];m&&(m.name=u,delete t[i].idxByName[d],t[i].idxByName[u]=m)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Xn(e){return e.split(",").map(function(e,t){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return bn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),l(r),t===0)})}var Yn=(function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){i(e).forEach(function(n){if(e[n]!==null){var r=Xn(e[n]),o=r.shift();if(o.unique=!0,o.multi)throw new te.Schema("Primary key cannot be multi-valued");r.forEach(function(e){if(e.auto)throw new te.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new te.Schema("Index must have a name and cannot be an empty string")}),t[n]=Sn(n,o,r)}})},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e;var n=t._versions,r={},o={};return n.forEach(function(e){s(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)}),t._dbSchema=o,wn(t,[t._allTables,t,t.Transaction.prototype]),Mn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(o),o),t._storeNames=i(o),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=pe(this._cfg.contentUpgrade||ae,e),this},e})();function Jn(e){return Bt(Yn.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new eo(Et,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function er(e){return e&&typeof e.databases=="function"}function tr(e){var t=e.indexedDB,n=e.IDBKeyRange;return er(t)?Promise.resolve(t.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==Et})}):Zn(t,n).toCollection().primaryKeys()}function nr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!er(n)&&t!==Et&&Zn(n,r).put({name:t}).catch(ae)}function rr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!er(n)&&t!==Et&&Zn(n,r).delete(t).catch(ae)}function or(e){return it(function(){return Ne.letThrough=!0,e()})}function ar(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)})}var ir;function lr(e){return!("from"in e)}var sr=function(e,t){if(this)s(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new sr;return e&&"d"in e&&s(n,e),n}};m(sr.prototype,(ir={add:function(e){return cr(this,e),this},addKey:function(e){return ur(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return ur(t,e,e)}),this}},ir[B]=function(){return mr(this)},ir));function ur(e,t,n){var r=Pt(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(lr(e))return s(e,{from:t,to:n,d:1});var o=e.l,a=e.r;if(Pt(n,e.from)<0)return o?ur(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},pr(e);if(Pt(t,e.to)>0)return a?ur(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},pr(e);Pt(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),Pt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var i=!e.r;o&&!e.l&&cr(e,o),a&&i&&cr(e,a)}}function cr(e,t){function n(e,t){var r=t.from,o=t.to,a=t.l,i=t.r;ur(e,r,o),a&&n(e,a),i&&n(e,i)}lr(t)||n(e,t)}function dr(e,t){var n=mr(t),r=n.next();if(r.done)return!1;for(var o=r.value,a=mr(e),i=a.next(o.from),l=i.value;!r.done&&!i.done;){if(Pt(l.from,o.to)<=0&&Pt(l.to,o.from)>=0)return!0;Pt(o.from,l.from)<0?o=(r=n.next(l.from)).value:l=(i=a.next(o.from)).value}return!1}function mr(e){var t=lr(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Pt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Pt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function pr(e){var t,n,o=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=o>1?"r":o<-1?"l":"";if(a){var i=a==="r"?"l":"r",l=r({},e),s=e[a];e.from=s.from,e.to=s.to,e[a]=s[a],l[a]=s[i],e[i]=l,l.d=_r(l)}e.d=_r(e)}function _r(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function fr(e,t){return i(t).forEach(function(n){e[n]?cr(e[n],t[n]):e[n]=P(t[n])}),e}function gr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&dr(t[n],e[n])})}var hr={},yr={},Cr=!1;function br(e,t){fr(yr,e),Cr||(Cr=!0,setTimeout(function(){Cr=!1;var e=yr;yr={},vr(e,!1)},0))}function vr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,o=Object.values(hr);r<o.length;r++){var a=o[r];Sr(a,e,n,t)}else for(var i in e){var l=/^idb\:\/\/(.*)\/(.*)\//.exec(i);if(l){var s=l[1],u=l[2],a=hr["idb://".concat(s,"/").concat(u)];a&&Sr(a,e,n,t)}}n.forEach(function(e){return e()})}function Sr(e,t,n,r){for(var o=[],a=0,i=Object.entries(e.queries.query);a<i.length;a++){for(var l=i[a],s=l[0],u=l[1],c=[],d=0,m=u;d<m.length;d++){var p=m[d];gr(t,p.obsSet)?p.subscribers.forEach(function(e){return n.add(e)}):r&&c.push(p)}r&&o.push([s,c])}if(r)for(var _=0,f=o;_<f.length;_++){var g=f[_],s=g[0],c=g[1];e.queries.query[s]=c}}function Rr(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ht(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,o=Math.round(e.verno*10),a=!1;function i(){if(t.openCanceller!==r)throw new te.DatabaseClosed("db.open() was cancelled")}var l=t.dbReadyResolve,s=null,u=!1,c=function(){return new Fe(function(r,l){if(i(),!n)throw new te.MissingAPI;var d=e.name,m=t.autoSchema||!o?n.open(d):n.open(d,o);if(!m)throw new te.MissingAPI;m.onerror=pn(l),m.onblocked=Ze(e._fireOnBlocked),m.onupgradeneeded=Ze(function(r){if(s=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=_n,s.abort(),m.result.close();var o=n.deleteDatabase(d);o.onsuccess=o.onerror=Ze(function(){l(new te.NoSuchDatabase("Database ".concat(d," doesnt exist")))})}else{s.onerror=pn(l);var i=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;u=i<1,e.idbdb=m.result,a&&On(e,s),Fn(e,i/10,s,l)}},l),m.onsuccess=Ze(function(){s=null;var n=e.idbdb=m.result,i=C(n.objectStoreNames);if(i.length>0)try{var l=n.transaction(Rn(i),"readonly");if(t.autoSchema)jn(e,n,l);else if(Qn(e,e._dbSchema,l),!Kn(e,l)&&!a)return n.close(),o=n.version+1,a=!0,r(c());Nn(e,l)}catch(e){}Lt.push(e),n.onversionchange=Ze(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),n.onclose=Ze(function(t){e.on("close").fire(t)}),u&&nr(e._deps,d),r()},l)}).catch(function(e){switch(e==null?void 0:e.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,c();break;case"VersionError":if(o>0)return o=0,c();break}return Fe.reject(e)})};return Fe.race([r,(typeof navigator=="undefined"?Fe.resolve():ar()).then(c)]).then(function(){return i(),t.onReadyBeingFired=[],Fe.resolve(or(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(pe,ae);return t.onReadyBeingFired=[],Fe.resolve(or(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{s&&s.abort()}catch(e){}return r===t.openCanceller&&e._close(),ht(n)}).finally(function(){t.openComplete=!0,l()}).then(function(){if(u){var t={};e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new sr(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new sr(-1/0,[[[]]])}),hn(fn).fire(t),vr(t,!0)}return e})}function Lr(e){var t=function(t){return e.next(t)},n=function(t){return e.throw(t)},r=a(t),o=a(n);function a(e){return function(t){var n=e(t),a=n.value;return n.done?a:!a||typeof a.then!="function"?l(a)?Promise.all(a).then(r,o):r(a):a.then(r,o)}}return a(t)()}function Er(e,t,n){var r=arguments.length;if(r<2)throw new te.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var a=D(o);return[e,a,n]}function kr(e,t,n,r,o){return Fe.resolve().then(function(){var a=Ne.transless||Ne,i=e._createTransaction(t,n,e._dbSchema,r);i.explicit=!0;var l={trans:i,transless:a};if(r)i.idbtrans=r.idbtrans;else try{i.create(),i.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(r){return r.name===Z.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(e.close({disableAutoOpen:!1}),e.open().then(function(){return kr(e,t,n,null,o)})):ht(r)}var s=H(o);s&&lt();var u,c=Fe.follow(function(){if(u=o.call(i,i),u)if(s){var e=st.bind(null,null);u.then(e,e)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=Lr(u))},l);return(u&&typeof u.then=="function"?Fe.resolve(u).then(function(e){return i.active?e:ht(new te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return u})).then(function(e){return r&&i._resolve(),i._completion.then(function(){return e})}).catch(function(e){return i._reject(e),ht(e)})})}function Ir(e,t,n){for(var r=l(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}function Tr(e){return r(r({},e),{table:function(t){var n=e.table(t),o=n.schema,a={},i=[];function l(e,t,n){var o=Dn(e),s=a[o]=a[o]||[],u=e==null?0:typeof e=="string"?1:e.length,c=t>0,d=r(r({},n),{name:c?"".concat(o,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:c,keyTail:t,keyLength:u,extractKey:En(e),unique:!c&&n.unique});if(s.push(d),d.isPrimaryKey||i.push(d),u>1){var m=u===2?e[0]:e.slice(0,u-1);l(m,t+1,n)}return s.sort(function(e,t){return e.keyTail-t.keyTail}),d}var s=l(o.primaryKey.keyPath,0,o.primaryKey);a[":id"]=[s];for(var u=0,c=o.indexes;u<c.length;u++){var d=c[u];l(d.keyPath,0,d)}function m(e){var t=a[Dn(e)];return t&&t[0]}function p(t,n){return{type:t.type===1?2:t.type,lower:Ir(t.lower,t.lowerOpen?e.MAX_KEY:e.MIN_KEY,n),lowerOpen:!0,upper:Ir(t.upper,t.upperOpen?e.MIN_KEY:e.MAX_KEY,n),upperOpen:!0}}function _(e){var t=e.query.index;return t.isVirtual?r(r({},e),{query:{index:t.lowLevelIndex,range:p(e.query.range,t.keyTail)}}):e}var f=r(r({},n),{schema:r(r({},o),{primaryKey:s,indexes:i,getIndexByKeyPath:m}),count:function(e){return n.count(_(e))},query:function(e){return n.query(_(e))},openCursor:function(t){var r=t.query.index,o=r.keyTail,a=r.isVirtual,i=r.keyLength;if(!a)return n.openCursor(t);function l(n){function r(r){r!=null?n.continue(Ir(r,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,o)):n.continue()}var a=Object.create(n,{continue:{value:r},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Ir(t,e.MAX_KEY,o),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return i===1?e[0]:e.slice(0,i)}},value:{get:function(){return n.value}}});return a}return n.openCursor(_(t)).then(function(e){return e&&l(e)})}});return f}})}var Dr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Tr};function xr(e,t,n,r){return n=n||{},r=r||"",i(e).forEach(function(o){if(!d(t,o))n[r+o]=void 0;else{var a=e[o],i=t[o];if(typeof a=="object"&&typeof i=="object"&&a&&i){var l=O(a),s=O(i);l!==s?n[r+o]=t[o]:l==="Object"?xr(a,i,n,r+o+"."):a!==i&&(n[r+o]=t[o])}else a!==i&&(n[r+o]=t[o])}}),i(t).forEach(function(o){d(e,o)||(n[r+o]=t[o])}),n}function $r(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Pr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),a=n.schema.primaryKey,i=r(r({},n),{mutate:function(e){var i=Ne.trans,l=i.table(t).hook,s=l.deleting,u=l.creating,c=l.updating;switch(e.type){case"add":if(u.fire===ae)break;return i._promise("readwrite",function(){return m(e)},!0);case"put":if(u.fire===ae&&c.fire===ae)break;return i._promise("readwrite",function(){return m(e)},!0);case"delete":if(s.fire===ae)break;return i._promise("readwrite",function(){return m(e)},!0);case"deleteRange":if(s.fire===ae)break;return i._promise("readwrite",function(){return p(e)},!0)}return n.mutate(e);function m(e){var t=Ne.trans,i=e.keys||$r(a,e);if(!i)throw new Error("Keys missing");return e=e.type==="add"||e.type==="put"?r(r({},e),{keys:i}):r({},e),e.type!=="delete"&&(e.values=o([],e.values,!0)),e.keys&&(e.keys=o([],e.keys,!0)),Nr(n,e,i).then(function(r){var o=i.map(function(n,o){var i=r[o],l={onerror:null,onsuccess:null};if(e.type==="delete")s.fire.call(l,n,i,t);else if(e.type==="add"||i===void 0){var m=u.fire.call(l,n,e.values[o],t);n==null&&m!=null&&(n=m,e.keys[o]=n,a.outbound||E(e.values[o],a.keyPath,n))}else{var p=xr(i,e.values[o]),_=c.fire.call(l,p,n,i,t);if(_){var f=e.values[o];Object.keys(_).forEach(function(e){d(f,e)?f[e]=_[e]:E(f,e,_[e])})}}return l});return n.mutate(e).then(function(t){for(var n=t.failures,a=t.results,l=t.numFailures,s=t.lastResult,u=0;u<i.length;++u){var c=a?a[u]:i[u],d=o[u];c==null?d.onerror&&d.onerror(n[u]):d.onsuccess&&d.onsuccess(e.type==="put"&&r[u]?e.values[u]:c)}return{failures:n,results:a,numFailures:l,lastResult:s}}).catch(function(e){return o.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}function p(e){return _(e.trans,e.range,1e4)}function _(e,t,o){return n.query({trans:e,values:!1,query:{index:a,range:t},limit:o}).then(function(n){var a=n.result;return m({type:"delete",keys:a,trans:e}).then(function(n){return n.numFailures>0?Promise.reject(n.failures[0]):a.length<o?{failures:[],numFailures:0,lastResult:void 0}:_(e,r(r({},t),{lower:a[a.length-1],lowerOpen:!0}),o)})})}}});return i}})}};function Nr(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Mr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],o=0,a=0;o<t.keys.length&&a<e.length;++o)Pt(t.keys[o],e[a])===0&&(r.push(n?w(t.values[o]):t.values[o]),++a);return r.length===e.length?r:null}catch(e){return null}}var wr={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return r(r({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=Mr(e.keys,e.trans._cache,e.cache==="clone");return t?Fe.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:e.cache==="clone"?w(t):t},t})},mutate:function(e){return e.type!=="add"&&(e.trans._cache=null),n.mutate(e)}})}}}};function Ar(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Fr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Or={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new sr(e.MIN_KEY,e.MAX_KEY);return r(r({},e),{transaction:function(t,n,r){if(Ne.subscr&&n!=="readonly")throw new te.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return e.transaction(t,n,r)},table:function(o){var a=e.table(o),s=a.schema,u=s.primaryKey,c=u.extractKey,d=u.outbound,m=r(r({},a),{mutate:function(e){var r=e.trans,i=e.mutatedParts||(e.mutatedParts={}),c=function(e){var n="idb://".concat(t,"/").concat(o,"/").concat(e);return i[n]||(i[n]=new sr)},d=c(""),m=c(":dels"),p=e.type,_=e.type==="deleteRange"?[e.range]:e.type==="delete"?[e.keys]:e.values.length<50?[$r(u,e).filter(function(e){return e}),e.values]:[],f=_[0],g=_[1],h=e.trans._cache;if(l(f)){d.addKeys(f);var y=p==="delete"||f.length===g.length?Mr(f,h):null;y||m.addKeys(f),(y||g)&&Br(c,s,y,g)}else if(f){var C={from:f.lower,to:f.upper};m.add(C),d.add(C)}else d.add(n),m.add(n),s.indexes.forEach(function(e){return c(e.name).add(n)});return a.mutate(e).then(function(t){return f&&(e.type==="add"||e.type==="put")&&d.addKeys(t.results),r.mutatedParts=fr(r.mutatedParts||{},i),t})}}),p=function(t){var n,r,o=t.query,a=o.index,i=o.range;return[a,new sr((n=i.lower)!==null&&n!==void 0?n:e.MIN_KEY,(r=i.upper)!==null&&r!==void 0?r:e.MAX_KEY)]},_={get:function(e){return[u,new sr(e.key)]},getMany:function(e){return[u,new sr().addKeys(e.keys)]},count:p,query:p,openCursor:p};return i(_).forEach(function(e){m[e]=function(i){var l=Ne.subscr,s=!!l,u=Ar(Ne,a)&&Fr(e,i),m=u?i.obsSet={}:l;if(s){var p=function(e){var n="idb://".concat(t,"/").concat(o,"/").concat(e);return m[n]||(m[n]=new sr)},f=p(""),g=p(":dels"),h=_[e](i),y=h[0],C=h[1];if(e==="query"&&y.isPrimaryKey&&!i.values?g.add(C):p(y.name||"").add(C),!y.isPrimaryKey)if(e==="count")g.add(n);else{var b=e==="query"&&d&&i.values&&a.query(r(r({},i),{values:!1}));return a[e].apply(this,arguments).then(function(t){if(e==="query"){if(d&&i.values)return b.then(function(e){var n=e.result;return f.addKeys(n),t});var n=i.values?t.result.map(c):t.result;i.values?f.addKeys(n):g.addKeys(n)}else if(e==="openCursor"){var r=t,o=i.values;return r&&Object.create(r,{key:{get:function(){return g.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return g.addKey(e),e}},value:{get:function(){return o&&f.addKey(r.primaryKey),r.value}}})}return t})}}return a[e].apply(this,arguments)}}),m}})}};function Br(e,t,n,r){function o(t){var o=e(t.name||"");function a(e){return e!=null?t.extractKey(e):null}var i=function(e){return t.multiEntry&&l(e)?e.forEach(function(e){return o.addKey(e)}):o.addKey(e)};(n||r).forEach(function(e,t){var o=n&&a(n[t]),l=r&&a(r[t]);Pt(o,l)!==0&&(o!=null&&i(o),l!=null&&i(l))})}t.indexes.forEach(o)}function Wr(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var o=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===o)return null;var a=r({},t);return l(a.keys)&&(a.keys=a.keys.filter(function(e,t){return!(t in n.failures)})),"values"in a&&l(a.values)&&(a.values=a.values.filter(function(e,t){return!(t in n.failures)})),a}function qr(e,t){return t.lower===void 0?!0:t.lowerOpen?Pt(e,t.lower)>0:Pt(e,t.lower)>=0}function Ur(e,t){return t.upper===void 0?!0:t.upperOpen?Pt(e,t.upper)<0:Pt(e,t.upper)<=0}function Vr(e,t){return qr(e,t)&&Ur(e,t)}function Hr(e,t,n,r,o,a){if(!n||n.length===0)return e;var i=t.query.index,s=i.multiEntry,u=t.query.range,c=r.schema.primaryKey,d=c.extractKey,m=i.extractKey,p=(i.lowLevelIndex||i).extractKey,_=n.reduce(function(e,n){var r=e,o=n.type==="add"||n.type==="put"?n.values.filter(function(e){var t=m(e);return s&&l(t)?t.some(function(e){return Vr(e,u)}):Vr(t,u)}).map(function(e){return e=w(e),a&&Object.freeze(e),e}):[];switch(n.type){case"add":r=e.concat(t.values?o:o.map(function(e){return d(e)}));break;case"put":var i=new sr().addKeys(n.values.map(function(e){return d(e)}));r=e.filter(function(e){var n=t.values?d(e):e;return!dr(new sr(n),i)}).concat(t.values?o:o.map(function(e){return d(e)}));break;case"delete":var c=new sr().addKeys(n.keys);r=e.filter(function(e){var n=t.values?d(e):e;return!dr(new sr(n),c)});break;case"deleteRange":var p=n.range;r=e.filter(function(e){return!Vr(d(e),p)});break}return r},e);return _===e?e:(_.sort(function(e,t){return Pt(p(e),p(t))||Pt(d(e),d(t))}),t.limit&&t.limit<1/0&&(_.length>t.limit?_.length=t.limit:e.length===t.limit&&_.length<t.limit&&(o.dirty=!0)),a?Object.freeze(_):_)}function Gr(e,t){return Pt(e.lower,t.lower)===0&&Pt(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function zr(e,t,n,r){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var o=Pt(e,t);if(o===0){if(n&&r)return 0;if(n)return 1;if(r)return-1}return o}function jr(e,t,n,r){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var o=Pt(e,t);if(o===0){if(n&&r)return 0;if(n)return-1;if(r)return 1}return o}function Kr(e,t){return zr(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&jr(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function Qr(e,t,n,r){var o=hr["idb://".concat(e,"/").concat(t)];if(!o)return[];var a=o.queries[n];if(!a)return[null,!1,o,null];var i=r.query?r.query.index.name:null,l=a[i||""];if(!l)return[null,!1,o,null];switch(n){case"query":var s=l.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Gr(e.req.query.range,r.query.range)});if(s)return[s,!0,o,l];var u=l.find(function(e){var t="limit"in e.req?e.req.limit:1/0;return t>=r.limit&&(r.values?e.req.values:!0)&&Kr(e.req.query.range,r.query.range)});return[u,!1,o,l];case"count":var c=l.find(function(e){return Gr(e.req.query.range,r.query.range)});return[c,!!c,o,l]}}function Xr(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&Yr(e,t)})}function Yr(e,t){setTimeout(function(){e.subscribers.size===0&&q(t,e)},3e3)}var Jr={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=r(r({},e),{transaction:function(n,r,o){var a=e.transaction(n,r,o);if(r==="readwrite"){var i=new AbortController,l=i.signal,s=function(o){return function(){if(i.abort(),r==="readwrite"){for(var l=new Set,s=0,u=n;s<u.length;s++){var c=u[s],d=hr["idb://".concat(t,"/").concat(c)];if(d){var m=e.table(c),p=d.optimisticOps.filter(function(e){return e.trans===a});if(a._explicit&&o&&a.mutatedParts)for(var _=0,f=Object.values(d.queries.query);_<f.length;_++)for(var g=f[_],h=0,y=g.slice();h<y.length;h++){var C=y[h];gr(C.obsSet,a.mutatedParts)&&(q(g,C),C.subscribers.forEach(function(e){return l.add(e)}))}else if(p.length>0){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==a});for(var b=0,v=Object.values(d.queries.query);b<v.length;b++)for(var g=v[b],S=0,R=g.slice();S<R.length;S++){var C=R[S];if(C.res!=null&&a.mutatedParts)if(o&&!C.dirty){var L=Object.isFrozen(C.res),E=Hr(C.res,C.req,p,m,C,L);C.dirty?(q(g,C),C.subscribers.forEach(function(e){return l.add(e)})):E!==C.res&&(C.res=E,C.promise=Fe.resolve({result:E}))}else C.dirty&&q(g,C),C.subscribers.forEach(function(e){return l.add(e)})}}}}l.forEach(function(e){return e()})}}};a.addEventListener("abort",s(!1),{signal:l}),a.addEventListener("error",s(!1),{signal:l}),a.addEventListener("complete",s(!0),{signal:l})}return a},table:function(n){var o=e.table(n),a=o.schema.primaryKey,i=r(r({},o),{mutate:function(e){var i=Ne.trans;if(a.outbound||i.db._options.cache==="disabled"||i.explicit)return o.mutate(e);var l=hr["idb://".concat(t,"/").concat(n)];if(!l)return o.mutate(e);var s=o.mutate(e);return(e.type==="add"||e.type==="put")&&(e.values.length>=50||$r(a,e).some(function(e){return e==null}))?s.then(function(t){var n=r(r({},e),{values:e.values.map(function(e,n){var o,i=!((o=a.keyPath)===null||o===void 0)&&o.includes(".")?w(e):r({},e);return E(i,a.keyPath,t.results[n]),i})}),o=Wr(l,n,t);l.optimisticOps.push(o),queueMicrotask(function(){return e.mutatedParts&&br(e.mutatedParts)})}):(l.optimisticOps.push(e),e.mutatedParts&&br(e.mutatedParts),s.then(function(t){if(t.numFailures>0){q(l.optimisticOps,e);var n=Wr(l,e,t);n&&l.optimisticOps.push(n),e.mutatedParts&&br(e.mutatedParts)}}),s.catch(function(){q(l.optimisticOps,e),e.mutatedParts&&br(e.mutatedParts)})),s},query:function(e){var r;if(!Ar(Ne,o)||!Fr("query",e))return o.query(e);var a=((r=Ne.trans)===null||r===void 0?void 0:r.db._options.cache)==="immutable",i=Ne,l=i.requery,s=i.signal,u=Qr(t,n,"query",e),c=u[0],d=u[1],m=u[2],p=u[3];if(c&&d)c.obsSet=e.obsSet;else{var _=o.query(e).then(function(e){var t=e.result;if(c&&(c.res=t),a){for(var n=0,r=t.length;n<r;++n)Object.freeze(t[n]);Object.freeze(t)}else e.result=w(t);return e}).catch(function(e){return p&&c&&q(p,c),Promise.reject(e)});c={obsSet:e.obsSet,promise:_,subscribers:new Set,type:"query",req:e,dirty:!1},p?p.push(c):(p=[c],m||(m=hr["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),m.queries.query[e.query.index.name||""]=p)}return Xr(c,p,l,s),c.promise.then(function(t){return{result:Hr(t.result,e,m==null?void 0:m.optimisticOps,o,c,a)}})}});return i}});return n}};function Zr(e,t){return new Proxy(e,{get:function(e,n,r){return n==="db"?t:Reflect.get(e,n,r)}})}var eo=(function(){function e(t,n){var o=this;this._middlewares={},this.verno=0;var a=e.dependencies;this._options=n=r({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var i=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ae,dbReadyPromise:null,cancelOpen:ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};l.dbReadyPromise=new Fe(function(e){l.dbReadyResolve=e}),l.openCanceller=new Fe(function(e,t){l.cancelOpen=t}),this._state=l,this.name=t,this.on=Ot(this,"populate","blocked","versionchange","close",{ready:[pe,ae]}),this.on.ready.subscribe=b(this.on.ready.subscribe,function(t){return function(n,r){e.vip(function(){var e=o._state;if(e.openComplete)e.dbOpenError||Fe.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var a=o;r||t(function e(){a.on.ready.unsubscribe(n),a.on.ready.unsubscribe(e)})}})}}),this.Collection=Zt(this),this.Table=Wt(this),this.Transaction=Cn(this),this.Version=Jn(this),this.WhereClause=mn(this),this.on("versionchange",function(e){e.newVersion>0?"Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade."):"Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request."),o.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?"Dexie.delete('".concat(o.name,"') was blocked"):"Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(e.oldVersion/10)}),this._maxKey=Ln(n.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new o.Transaction(e,t,n,o._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(e){o.on("blocked").fire(e),Lt.filter(function(e){return e.name===o.name&&e!==o&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(wr),this.use(Jr),this.use(Or),this.use(Dr),this.use(Pr);var s=new Proxy(this,{get:function(e,t,n){if(t==="_vip")return!0;if(t==="table")return function(e){return Zr(o.table(e),s)};var r=Reflect.get(e,t,n);return r instanceof Ft?Zr(r,s):t==="tables"?r.map(function(e){return Zr(e,s)}):t==="_createTransaction"?function(){var e=r.apply(this,arguments);return Zr(e,s)}:r}});this.vip=s,i.forEach(function(e){return e(o)})}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new te.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(An),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?e():new Fe(function(e,n){if(t._state.openComplete)return n(new te.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen){n(new te.DatabaseClosed);return}t.open().catch(ae)}t._state.dbReadyPromise.then(e,n)}).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,o=e.name;o&&this.unuse({stack:t,name:o});var a=this._middlewares[t]||(this._middlewares[t]=[]);return a.push({stack:t,create:n,level:r==null?10:r,name:o}),a.sort(function(e,t){return e.level-t.level}),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:n?e.name!==n:!1})),this},e.prototype.open=function(){var e=this;return _t(Pe,function(){return Rr(e)})},e.prototype._close=function(){var e=this._state,t=Lt.indexOf(this);if(t>=0&&Lt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Fe(function(t){e.dbReadyResolve=t}),e.openCanceller=new Fe(function(t,n){e.cancelOpen=n}))},e.prototype.close=function(e){var t=e===void 0?{disableAutoOpen:!0}:e,n=t.disableAutoOpen,r=this._state;n?(r.isBeingOpened&&r.cancelOpen(new te.DatabaseClosed),this._close(),r.autoOpen=!1,r.dbOpenError=new te.DatabaseClosed):(this._close(),r.autoOpen=this._options.autoOpen||r.isBeingOpened,r.openComplete=!1,r.dbOpenError=null)},e.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=arguments.length>0&&typeof arguments[0]!="object",r=this._state;return new Fe(function(o,a){var i=function(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Ze(function(){rr(t._deps,t.name),o()}),n.onerror=pn(a),n.onblocked=t._fireOnBlocked};if(n)throw new te.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(i):i()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return i(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=Er.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,o=Ne.trans;(!o||o.db!==this||e.indexOf("!")!==-1)&&(o=null);var a=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var i,l;try{if(l=t.map(function(e){var t=e instanceof r.Table?e.name:e;if(typeof t!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}),e=="r"||e===kt)i=kt;else if(e=="rw"||e==It)i=It;else throw new te.InvalidArgument("Invalid transaction mode: "+e);if(o){if(o.mode===kt&&i===It)if(a)o=null;else throw new te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&l.forEach(function(e){if(o&&o.storeNames.indexOf(e)===-1)if(a)o=null;else throw new te.SubTransaction("Table "+e+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,function(t,n){n(e)}):ht(e)}var s=kr.bind(null,this,i,l,o,n);return o?o._promise(i,s,"lock"):Ne.trans?_t(Ne.transless,function(){return r._whenReady(s)}):this._whenReady(s)},e.prototype.table=function(e){if(!d(this._allTables,e))throw new te.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},e})(),to=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",no=(function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,n){return this._subscribe(!e||typeof e=="function"?{next:e,error:t,complete:n}:e)},e.prototype[to]=function(){return this},e})(),ro;try{ro={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch(e){ro={indexedDB:null,IDBKeyRange:null}}function oo(e){var t=!1,n,r=new no(function(r){var o=H(e);function a(t){var n=ze();try{o&&lt();var r=it(e,t);return o&&(r=r.finally(st)),r}finally{n&&je()}}var i=!1,l,s={},u={},c={get closed(){return i},unsubscribe:function(){i||(i=!0,l&&l.abort(),d&&hn.storagemutated.unsubscribe(_))}};r.start&&r.start(c);var d=!1,m=function(){return gt(f)};function p(){return gr(u,s)}var _=function(e){fr(s,e),p()&&m()},f=function(){if(!(i||!ro.indexedDB)){s={};var o={};l&&l.abort(),l=new AbortController;var c={subscr:o,signal:l.signal,requery:m,querier:e,trans:null},p=a(c);Promise.resolve(p).then(function(e){t=!0,n=e,!(i||c.signal.aborted)&&(s={},u=o,!N(u)&&!d&&(hn(fn,_),d=!0),gt(function(){return!i&&r.next&&r.next(e)}))},function(e){t=!1,["DatabaseClosedError","AbortError"].includes(e==null?void 0:e.name)||i||gt(function(){i||r.error&&r.error(e)})})}};return setTimeout(m,0),c});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var ao=eo;m(ao,r(r({},oe),{delete:function(e){var t=new ao(e,{addons:[]});return t.delete()},exists:function(e){return new ao(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return tr(ao.dependencies).then(e)}catch(e){return ht(new te.MissingAPI)}},defineClass:function(){function e(e){s(this,e)}return e},ignoreTransaction:function(e){return Ne.trans?_t(Ne.transless,e):e()},vip:or,async:function(e){return function(){try{var t=Lr(e.apply(this,arguments));return!t||typeof t.then!="function"?Fe.resolve(t):t}catch(e){return ht(e)}}},spawn:function(e,t,n){try{var r=Lr(e.apply(n,t||[]));return!r||typeof r.then!="function"?Fe.resolve(r):r}catch(e){return ht(e)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(e,t){var n=Fe.resolve(typeof e=="function"?ao.ignoreTransaction(e):e).timeout(t||6e4);return Ne.trans?Ne.trans.waitFor(n):n},Promise:Fe,debug:{get:function(){return _e},set:function(e){fe(e)}},derive:f,extend:s,props:m,override:b,Events:Ot,on:hn,liveQuery:oo,extendObservabilitySet:fr,getByKeyPath:L,setByKeyPath:E,delByKeyPath:k,shallowClone:I,deepClone:w,getObjectDiff:xr,cmp:Pt,asap:S,minKey:vt,addons:[],connections:Lt,errnames:Z,dependencies:ro,cache:hr,semVer:Ct,version:Ct.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),ao.maxKey=Ln(ao.dependencies.IDBKeyRange),typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(hn(fn,function(e){if(!lo){var t;t=new CustomEvent(gn,{detail:e}),lo=!0,dispatchEvent(t),lo=!1}}),addEventListener(gn,function(e){var t=e.detail;lo||io(t)}));function io(e){var t=lo;try{lo=!0,hn.storagemutated.fire(e),vr(e,!0)}finally{lo=t}}var lo=!1,so,uo=function(){};typeof BroadcastChannel!="undefined"&&(uo=function(){so=new BroadcastChannel(gn),so.onmessage=function(e){return e.data&&io(e.data)}},uo(),typeof so.unref=="function"&&so.unref(),hn(fn,function(e){lo||so.postMessage(e)})),typeof addEventListener!="undefined"&&(addEventListener("pagehide",function(e){if(!eo.disableBfCache&&e.persisted){so==null||so.close();for(var t=0,n=Lt;t<n.length;t++){var r=n[t];r.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!eo.disableBfCache&&e.persisted&&(uo(),io({all:new sr(-1/0,[[]])}))}));function co(e,t){return new Xt({replacePrefix:[e,t]})}Fe.rejectionMapper=re,fe(_e);var mo=Object.freeze({__proto__:null,Dexie:eo,liveQuery:oo,Entity:$t,cmp:Pt,PropModSymbol:Qt,PropModification:Xt,replacePrefix:co,default:eo,RangeSet:sr,mergeRanges:cr,rangesOverlap:dr});return r(eo,mo,{default:eo}),eo}))}var u=!1;function c(){return u||(u=!0,s()),l.exports}function d(e){switch(e){case void 0:return c()}}a.exports=d}),null);
__d("dexie_maw-next",["dexie-4.0.1"],(function(t,n,r,o,a,i){a.exports=n("dexie-4.0.1")()}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("minisearch-3.0.2",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){(function(t,n){typeof e=="object"&&typeof l!="undefined"?l.exports=n():(t=typeof globalThis!="undefined"?globalThis:t||self,t.MiniSearch=n())})(this,(function(){var e=function(){return e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},e.apply(this,arguments)};function t(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a}function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e}var o="ENTRIES",a="KEYS",i="VALUES",l="",s=(function(){function e(e,t){var n=e._tree,r=Object.keys(n);this.set=e,this._type=t,this._path=r.length>0?[{node:n,keys:r}]:[]}return e.prototype.next=function(){var e=this.dive();return this.backtrack(),e},e.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var e=u(this._path),t=e.node,n=e.keys;return u(n)===l?{done:!1,value:this.result()}:(this._path.push({node:t[u(n)],keys:Object.keys(t[u(n)])}),this.dive())},e.prototype.backtrack=function(){this._path.length!==0&&(u(this._path).keys.pop(),!(u(this._path).keys.length>0)&&(this._path.pop(),this.backtrack()))},e.prototype.key=function(){return this.set._prefix+this._path.map(function(e){var t=e.keys;return u(t)}).filter(function(e){return e!==l}).join("")},e.prototype.value=function(){return u(this._path).node[l]},e.prototype.result=function(){return this._type===i?this.value():this._type===a?this.key():[this.key(),this.value()]},e.prototype[Symbol.iterator]=function(){return this},e})(),u=function(e){return e[e.length-1]},c=0,d=1,m=2,p=3,_=function(e,t,r){for(var o=[{distance:0,i:0,key:"",node:e}],a={},i=[],s=function(){var e=o.pop(),s=e.node,u=e.distance,c=e.key,d=e.i,m=e.edit;Object.keys(s).forEach(function(e){if(e===l){var p=u+(t.length-d),_=n(a[c]||[null,1/0],2),g=_[1];p<=r&&p<g&&(a[c]=[s[e],p])}else f(t,e,r-u,d,m,i).forEach(function(t){var n=t.distance,r=t.i,a=t.edit;o.push({node:s[e],distance:u+n,key:c+e,i:r,edit:a})})})};o.length>0;)s();return a},f=function(e,t,n,r,o,a){a.push({distance:0,ia:r,ib:0,edit:o});for(var i=[];a.length>0;){var l=a.pop(),s=l.distance,u=l.ia,_=l.ib,f=l.edit;if(_===t.length){i.push({distance:s,i:u,edit:f});continue}if(e[u]===t[_])a.push({distance:s,ia:u+1,ib:_+1,edit:c});else{if(s>=n)continue;f!==m&&a.push({distance:s+1,ia:u,ib:_+1,edit:p}),u<e.length&&(f!==p&&a.push({distance:s+1,ia:u+1,ib:_,edit:m}),f!==p&&f!==m&&a.push({distance:s+1,ia:u+1,ib:_+1,edit:d}))}}return i},g=(function(){function e(e,t){e===void 0&&(e={}),t===void 0&&(t=""),this._tree=e,this._prefix=t}return e.prototype.atPrefix=function(t){var r;if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");var o=n(h(this._tree,t.slice(this._prefix.length)),2),a=o[0],i=o[1];if(a===void 0){var s=n(L(i),2),u=s[0],c=s[1],d=Object.keys(u).find(function(e){return e!==l&&e.startsWith(c)});if(d!==void 0)return new e((r={},r[d.slice(c.length)]=u[d],r),t)}return new e(a||{},t)},e.prototype.clear=function(){delete this._size,this._tree={}},e.prototype.delete=function(e){return delete this._size,v(this._tree,e)},e.prototype.entries=function(){return new s(this,o)},e.prototype.forEach=function(e){var r,o;try{for(var a=t(this),i=a.next();!i.done;i=a.next()){var l=n(i.value,2),s=l[0],u=l[1];e(s,u,this)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}},e.prototype.fuzzyGet=function(e,t){return _(this._tree,e,t)},e.prototype.get=function(e){var t=y(this._tree,e);return t!==void 0?t[l]:void 0},e.prototype.has=function(e){var t=y(this._tree,e);return t!==void 0&&t.hasOwnProperty(l)},e.prototype.keys=function(){return new s(this,a)},e.prototype.set=function(e,t){if(typeof e!="string")throw new Error("key must be a string");delete this._size;var n=C(this._tree,e);return n[l]=t,this},Object.defineProperty(e.prototype,"size",{get:function(){var e=this;return this._size?this._size:(this._size=0,this.forEach(function(){e._size+=1}),this._size)},enumerable:!1,configurable:!0}),e.prototype.update=function(e,t){if(typeof e!="string")throw new Error("key must be a string");delete this._size;var n=C(this._tree,e);return n[l]=t(n[l]),this},e.prototype.values=function(){return new s(this,i)},e.prototype[Symbol.iterator]=function(){return this.entries()},e.from=function(r){var o,a,i=new e;try{for(var l=t(r),s=l.next();!s.done;s=l.next()){var u=n(s.value,2),c=u[0],d=u[1];i.set(c,d)}}catch(e){o={error:e}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return i},e.fromObject=function(t){return e.from(Object.entries(t))},e})(),h=function(e,t,n){if(n===void 0&&(n=[]),t.length===0||e==null)return[e,n];var r=Object.keys(e).find(function(e){return e!==l&&t.startsWith(e)});return r===void 0?(n.push([e,t]),h(void 0,"",n)):(n.push([e,r]),h(e[r],t.slice(r.length),n))},y=function(e,t){if(t.length===0||e==null)return e;var n=Object.keys(e).find(function(e){return e!==l&&t.startsWith(e)});if(n!==void 0)return y(e[n],t.slice(n.length))},C=function(e,t){var n;if(t.length===0||e==null)return e;var r=Object.keys(e).find(function(e){return e!==l&&t.startsWith(e)});if(r===void 0){var o=Object.keys(e).find(function(e){return e!==l&&e.startsWith(t[0])});if(o===void 0)e[t]={};else{var a=b(t,o);return e[a]=(n={},n[o.slice(a.length)]=e[o],n),delete e[o],C(e[a],t.slice(a.length))}return e[t]}return C(e[r],t.slice(r.length))},b=function(e,t,n,r,o){return n===void 0&&(n=0),r===void 0&&(r=Math.min(e.length,t.length)),o===void 0&&(o=""),n>=r||e[n]!==t[n]?o:b(e,t,n+1,r,o+e[n])},v=function(e,t){var r=n(h(e,t),2),o=r[0],a=r[1];if(o!==void 0){delete o[l];var i=Object.keys(o);i.length===0&&S(a),i.length===1&&R(a,i[0],o[i[0]])}},S=function(e){if(e.length!==0){var t=n(L(e),2),r=t[0],o=t[1];delete r[o],Object.keys(r).length===0&&S(e.slice(0,-1))}},R=function(e,t,r){if(e.length!==0){var o=n(L(e),2),a=o[0],i=o[1];a[i+t]=r,delete a[i]}},L=function(e){return e[e.length-1]},E,k="or",I="and",T=(function(){function t(t){if((t==null?void 0:t.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');this._options=e(e(e({},w),t),{searchOptions:e(e({},A),t.searchOptions||{})}),this._index=new g,this._documentCount=0,this._documentIds={},this._fieldIds={},this._fieldLength={},this._averageFieldLength={},this._nextId=0,this._storedFields={},this.addFields(this._options.fields)}return t.prototype.add=function(e){var t=this,n=this._options,r=n.extractField,o=n.tokenize,a=n.processTerm,i=n.fields,l=n.idField,s=r(e,l);if(s==null)throw new Error('MiniSearch: document does not have ID field "'+l+'"');var u=this.addDocumentId(s);this.saveStoredFields(u,e),i.forEach(function(n){var i=r(e,n);if(i!=null){var l=o(i.toString(),n);t.addFieldLength(u,t._fieldIds[n],t.documentCount-1,l.length),l.forEach(function(e){var r=a(e,n);r&&t.addTerm(t._fieldIds[n],u,r)})}})},t.prototype.addAll=function(e){var t=this;e.forEach(function(e){return t.add(e)})},t.prototype.addAllAsync=function(e,t){var n=this;t===void 0&&(t={});var r=t.chunkSize,o=r===void 0?10:r,a={chunk:[],promise:Promise.resolve()},i=e.reduce(function(e,t,r){var a=e.chunk,i=e.promise;return a.push(t),(r+1)%o===0?{chunk:[],promise:i.then(function(){return new Promise(function(e){return setTimeout(e,0)})}).then(function(){return n.addAll(a)})}:{chunk:a,promise:i}},a),l=i.chunk,s=i.promise;return s.then(function(){return n.addAll(l)})},t.prototype.remove=function(e){var t=this,r=this._options,o=r.tokenize,a=r.processTerm,i=r.extractField,l=r.fields,s=r.idField,u=i(e,s);if(u==null)throw new Error('MiniSearch: document does not have ID field "'+s+'"');var c=n(Object.entries(this._documentIds).find(function(e){var t=n(e,2);t[0];var r=t[1];return u===r})||[],1),d=c[0];if(d==null)throw new Error("MiniSearch: cannot remove document with ID "+u+": it is not in the index");l.forEach(function(n){var r=i(e,n);if(r!=null){var l=o(r.toString(),n);l.forEach(function(e){var r=a(e,n);r&&t.removeTerm(t._fieldIds[n],d,r)})}}),delete this._storedFields[d],delete this._documentIds[d],this._documentCount-=1},t.prototype.removeAll=function(e){var t=this;if(e)e.forEach(function(e){return t.remove(e)});else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new g,this._documentCount=0,this._documentIds={},this._fieldLength={},this._averageFieldLength={},this._storedFields={},this._nextId=0}},t.prototype.search=function(t,r){var o=this;r===void 0&&(r={});var a=this._options,i=a.tokenize,l=a.processTerm,s=a.searchOptions,u=e(e({tokenize:i,processTerm:l},s),r),c=u.tokenize,d=u.processTerm,m=c(t).map(function(e){return d(e)}).filter(function(e){return!!e}),p=m.map(N(u)),_=p.map(function(e){return o.executeQuery(e,u)}),f=this.combineResults(_,u.combineWith);return Object.entries(f).reduce(function(e,t){var r=n(t,2),a=r[0],i=r[1],l=i.score,s=i.match,c=i.terms,d={id:o._documentIds[a],terms:M(c),score:l,match:s};return Object.assign(d,o._storedFields[a]),(u.filter==null||u.filter(d))&&e.push(d),e},[]).sort(function(e,t){var n=e.score,r=t.score;return n<r?1:-1})},t.prototype.autoSuggest=function(t,r){r===void 0&&(r={}),r=e(e({},F),r);var o=this.search(t,r).reduce(function(e,t){var n=t.score,r=t.terms,o=r.join(" ");return e[o]==null?e[o]={score:n,terms:r,count:1}:(e[o].score+=n,e[o].count+=1),e},{});return Object.entries(o).map(function(e){var t=n(e,2),r=t[0],o=t[1],a=o.score,i=o.terms,l=o.count;return{suggestion:r,terms:i,score:a/l}}).sort(function(e,t){var n=e.score,r=t.score;return n<r?1:-1})},Object.defineProperty(t.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),t.loadJSON=function(e,n){if(n==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return t.loadJS(JSON.parse(e),n)},t.getDefault=function(e){if(w.hasOwnProperty(e))return D(w,e);throw new Error('MiniSearch: unknown option "'+e+'"')},t.loadJS=function(e,n){var r=e.index,o=e.documentCount,a=e.nextId,i=e.documentIds,l=e.fieldIds,s=e.fieldLength,u=e.averageFieldLength,c=e.storedFields,d=new t(n);return d._index=new g(r._tree,r._prefix),d._documentCount=o,d._nextId=a,d._documentIds=i,d._fieldIds=l,d._fieldLength=s,d._averageFieldLength=u,d._fieldIds=l,d._storedFields=c||{},d},t.prototype.executeQuery=function(t,r){var o=this,a=e(e({},this._options.searchOptions),r),i=(a.fields||this._options.fields).reduce(function(t,n){var r;return e(e({},t),(r={},r[n]=D(t,n)||1,r))},a.boost||{}),l=a.boostDocument,s=a.weights,u=e(e({},A.weights),s),c=u.fuzzy,d=u.prefix,m=this.termResults(t.term,i,l,this._index.get(t.term));if(!t.fuzzy&&!t.prefix)return m;var p=[m];if(t.prefix&&this._index.atPrefix(t.term).forEach(function(e,n){var r=.3*(e.length-t.term.length)/e.length;p.push(o.termResults(e,i,l,n,d,r))}),t.fuzzy){var _=t.fuzzy===!0?.2:t.fuzzy,f=_<1?Math.round(t.term.length*_):_;Object.entries(this._index.fuzzyGet(t.term,f)).forEach(function(e){var t=n(e,2),r=t[0],a=n(t[1],2),s=a[0],u=a[1],d=u/r.length;p.push(o.termResults(r,i,l,s,c,d))})}return p.reduce(x[k],{})},t.prototype.combineResults=function(e,t){if(t===void 0&&(t=k),e.length===0)return{};var n=t.toLowerCase();return e.reduce(x[n],null)||{}},t.prototype.toJSON=function(){return{index:this._index,documentCount:this._documentCount,nextId:this._nextId,documentIds:this._documentIds,fieldIds:this._fieldIds,fieldLength:this._fieldLength,averageFieldLength:this._averageFieldLength,storedFields:this._storedFields}},t.prototype.termResults=function(e,t,r,o,a,i){var l=this;return i===void 0&&(i=0),o==null?{}:Object.entries(t).reduce(function(t,a){var s=n(a,2),u=s[0],c=s[1],d=l._fieldIds[u],m=o[d]||{ds:{}},p=m.df,_=m.ds;return Object.entries(_).forEach(function(o){var a=n(o,2),s=a[0],m=a[1],_=r?r(l._documentIds[s],e):1;if(_){var f=l._fieldLength[s][d]/l._averageFieldLength[d];t[s]=t[s]||{score:0,match:{},terms:[]},t[s].terms.push(e),t[s].match[e]=D(t[s].match,e)||[],t[s].score+=_*P(m,p,l._documentCount,f,c,i),t[s].match[e].push(u)}}),t},{})},t.prototype.addTerm=function(t,n,r){this._index.update(r,function(r){var o;r=r||{};var a=r[t]||{df:0,ds:{}};return a.ds[n]==null&&(a.df+=1),a.ds[n]=(a.ds[n]||0)+1,e(e({},r),(o={},o[t]=a,o))})},t.prototype.removeTerm=function(t,n,r){var o=this;if(!this._index.has(r)){this.warnDocumentChanged(n,t,r);return}this._index.update(r,function(a){var i,l=a[t];if(l==null||l.ds[n]==null)return o.warnDocumentChanged(n,t,r),a;if(l.ds[n]<=1){if(l.df<=1)return delete a[t],a;l.df-=1}return l.ds[n]<=1?(delete l.ds[n],a):(l.ds[n]-=1,e(e({},a),(i={},i[t]=l,i)))}),Object.keys(this._index.get(r)).length===0&&this._index.delete(r)},t.prototype.warnDocumentChanged=function(e,t,r){if(!(console==null||console.warn==null)){var o=Object.entries(this._fieldIds).find(function(e){var r=n(e,2);r[0];var o=r[1];return o===t})[0];""+this._documentIds[e]+r+o}},t.prototype.addDocumentId=function(e){var t=this._nextId.toString(36);return this._documentIds[t]=e,this._documentCount+=1,this._nextId+=1,t},t.prototype.addFields=function(e){var t=this;e.forEach(function(e,n){t._fieldIds[e]=n})},t.prototype.addFieldLength=function(e,t,n,r){this._averageFieldLength[t]=this._averageFieldLength[t]||0;var o=this._averageFieldLength[t]*n+r;this._fieldLength[e]=this._fieldLength[e]||{},this._fieldLength[e][t]=r,this._averageFieldLength[t]=o/(n+1)},t.prototype.saveStoredFields=function(e,t){var n=this,r=this._options,o=r.storeFields,a=r.extractField;o==null||o.length===0||(this._storedFields[e]=this._storedFields[e]||{},o.forEach(function(r){var o=a(t,r);o!==void 0&&(n._storedFields[e][r]=o)}))},t})(),D=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},x=(E={},E[k]=function(e,t){return Object.entries(t).reduce(function(e,t){var o,a=n(t,2),i=a[0],l=a[1],s=l.score,u=l.match,c=l.terms;return e[i]==null?e[i]={score:s,match:u,terms:c}:(e[i].score+=s,e[i].score*=1.5,(o=e[i].terms).push.apply(o,r(c)),Object.assign(e[i].match,u)),e},e||{})},E[I]=function(t,o){return t==null?o:Object.entries(o).reduce(function(o,a){var i=n(a,2),l=i[0],s=i[1],u=s.score,c=s.match,d=s.terms;return t[l]===void 0||(o[l]=o[l]||{},o[l].score=t[l].score+u,o[l].match=e(e({},t[l].match),c),o[l].terms=r(t[l].terms,d)),o},{})},E),$=function(e,t,n){return e*Math.log(n/t)},P=function(e,t,n,r,o,a){var i=o/(1+.333*o*a);return i*$(e,t,n)/r},N=function(e){return function(t,n,r){var o=typeof e.fuzzy=="function"?e.fuzzy(t,n,r):e.fuzzy||!1,a=typeof e.prefix=="function"?e.prefix(t,n,r):e.prefix===!0;return{term:t,fuzzy:o,prefix:a}}},M=function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},w={idField:"id",extractField:function(e,t){return e[t]},tokenize:function(e,t){return e.split(O)},processTerm:function(e,t){return e.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},A={combineWith:k,prefix:!1,fuzzy:!1,boost:{},weights:{fuzzy:.9,prefix:.75}},F={prefix:function(e,t,n){return t===n.length-1}},O=new RegExp("[\\n\\r -#%-*,-/:;?@[-\\]_{}\\u00A0\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u1680\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2000-\\u200A\\u2010-\\u2029\\u202F-\\u2043\\u2045-\\u2051\\u2053-\\u205F\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u3000-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]+","u");return T}))}var u=!1;function c(){return u||(u=!0,s()),l.exports}function d(e){switch(e){case void 0:return c()}}a.exports=d}),null);
__d("minisearch",["minisearch-3.0.2"],(function(t,n,r,o,a,i){a.exports=n("minisearch-3.0.2")()}),null);/*FB_PKG_DELIM*/
__d("EmojiRendererData",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){}return e.isEmoji=function(t){return t>983041||t<35?!1:t===35||t===42||t>=48&&t<=57||t===169||t===174||t===8205||t===8252||t===8265||t===8419||t===8482||t===8505||t>=8596&&t<=8601||t>=8617&&t<=8618||t>=8986&&t<=8987||t===9e3||t===9167||t>=9193&&t<=9203||t>=9208&&t<=9210||t===9410||t>=9642&&t<=9643||t===9654||t===9664||t>=9723&&t<=9726||t>=9728&&t<=9732||t===9742||t===9745||t>=9748&&t<=9749||t===9752||t===9760||t>=9762&&t<=9763||t===9766||t===9770||t>=9774&&t<=9775||t>=9784&&t<=9786||t===9792||t===9794||t>=9800&&t<=9811||t>=9823&&t<=9824||t===9827||t>=9829&&t<=9830||t===9832||t===9851||t>=9854&&t<=9855||t>=9874&&t<=9879||t===9881||t>=9883&&t<=9884||t>=9888&&t<=9889||t===9895||t>=9898&&t<=9899||t>=9904&&t<=9905||t>=9917&&t<=9918||t>=9924&&t<=9925||t===9928||t>=9934&&t<=9935||t===9937||t>=9939&&t<=9940||t>=9961&&t<=9962||t>=9968&&t<=9973||t>=9975&&t<=9976||t===9978||t===9981||t===9986||t===9989||t>=9992&&t<=9993||t===9999||t===10002||t===10004||t===10006||t===10013||t===10017||t===10024||t>=10035&&t<=10036||t===10052||t===10055||t===10060||t===10062||t>=10067&&t<=10069||t===10071||t>=10083&&t<=10084||t>=10133&&t<=10135||t===10145||t===10160||t===10175||t>=10548&&t<=10549||t>=11013&&t<=11015||t>=11035&&t<=11036||t===11088||t===11093||t===12336||t===12349||t===12951||t===12953||t===126980||t===127183||t>=127344&&t<=127345||t>=127358&&t<=127359||t===127374||t>=127377&&t<=127386||t>=127462&&t<=127487||t>=127489&&t<=127490||t===127514||t===127535||t>=127538&&t<=127546||t>=127568&&t<=127569||t>=127744&&t<=127777||t>=127780&&t<=127876||t>=127878&&t<=127891||t>=127894&&t<=127895||t>=127897&&t<=127899||t>=127902&&t<=127937||t>=127941&&t<=127942||t>=127944&&t<=127945||t>=127949&&t<=127984||t>=127987&&t<=127989||t>=127991&&t<=127994||t>=128e3&&t<=128065||t>=128068&&t<=128069||t>=128081&&t<=128101||t>=128121&&t<=128123||t>=128125&&t<=128128||t===128132||t>=128136&&t<=128142||t===128144||t>=128146&&t<=128169||t>=128171&&t<=128253||t>=128255&&t<=128317||t>=128329&&t<=128334||t>=128336&&t<=128359||t>=128367&&t<=128368||t===128371||t>=128374&&t<=128377||t===128391||t>=128394&&t<=128397||t>=128420&&t<=128421||t===128424||t>=128433&&t<=128434||t===128444||t>=128450&&t<=128452||t>=128465&&t<=128467||t>=128476&&t<=128478||t===128481||t===128483||t===128488||t===128495||t===128499||t>=128506&&t<=128580||t>=128584&&t<=128586||t>=128640&&t<=128674||t>=128676&&t<=128691||t>=128695&&t<=128703||t>=128705&&t<=128709||t===128715||t>=128717&&t<=128722||t>=128725&&t<=128727||t>=128732&&t<=128741||t===128745||t>=128747&&t<=128748||t===128752||t>=128755&&t<=128764||t>=128992&&t<=129003||t===129008||t>=129293&&t<=129294||t>=129296&&t<=129303||t>=129312&&t<=129317||t>=129319&&t<=129327||t===129338||t>=129343&&t<=129349||t>=129351&&t<=129398||t>=129400&&t<=129460||t===129463||t===129466||t>=129468&&t<=129484||t===129488||t>=129502&&t<=129535||t>=129648&&t<=129660||t>=129664&&t<=129673||t>=129679&&t<=129730||t===129734||t>=129742&&t<=129756||t>=129759&&t<=129769||t>=917536&&t<=917631||t>=983040&&t<=983041},e.isEmojiModifier=function(t){return t>127999||t<127995?!1:t>=127995&&t<=127999},e.isEmojiModifierBase=function(t){return t>129784||t<9757?!1:t===9757||t===9977||t>=9994&&t<=9997||t===127877||t>=127938&&t<=127940||t===127943||t>=127946&&t<=127948||t>=128066&&t<=128067||t>=128070&&t<=128080||t>=128102&&t<=128120||t===128124||t>=128129&&t<=128131||t>=128133&&t<=128135||t===128143||t===128145||t===128170||t>=128372&&t<=128373||t===128378||t===128400||t>=128405&&t<=128406||t>=128581&&t<=128583||t>=128587&&t<=128591||t===128675||t>=128692&&t<=128694||t===128704||t===128716||t===129292||t===129295||t>=129304&&t<=129311||t===129318||t>=129328&&t<=129337||t>=129340&&t<=129342||t===129399||t>=129461&&t<=129462||t>=129464&&t<=129465||t===129467||t>=129485&&t<=129487||t>=129489&&t<=129501||t>=129731&&t<=129733||t>=129776&&t<=129784},e.isEmojiVariationSelector=function(t){return t===65039},e.isNonSpacingCombiningMark=function(t){return t>8419||t<8416?!1:t===8416||t===8419},e.isRegionalIndicator=function(t){return t>127487||t<127462?!1:t>=127462&&t<=127487},e.isTagSpec=function(t){return t>917630||t<917536?!1:t>=917536&&t<=917568||t>=917595&&t<=917630},e.isTagTerm=function(t){return t===917631},e.isText=function(t){return t>8419||t<35?!1:t===35||t===42||t>=48&&t<=57||t===8419},e.isTextVariationSelector=function(t){return t===65038},e.isDefaultTextPresentation=function(t){return t>917631||t<35?!1:t===35||t===42||t>=48&&t<=57||t===169||t===174||t===8205||t===8252||t===8265||t===8419||t===8482||t===8505||t>=8596&&t<=8597||t>=8617&&t<=8618||t===9e3||t===9167||t>=9197&&t<=9199||t>=9201&&t<=9202||t>=9208&&t<=9210||t===9410||t===9654||t===9664||t>=9730&&t<=9732||t===9745||t===9752||t===9760||t>=9762&&t<=9763||t===9766||t===9770||t>=9774&&t<=9775||t>=9784&&t<=9785||t===9792||t===9794||t===9823||t===9851||t===9854||t===9874||t>=9876&&t<=9879||t===9881||t>=9883&&t<=9884||t===9895||t>=9904&&t<=9905||t===9928||t===9935||t===9937||t===9939||t===9961||t>=9968&&t<=9969||t===9972||t>=9975&&t<=9977||t===9997||t===9999||t===10002||t===10004||t===10013||t===10017||t===10052||t===10055||t===10083||t===12336||t>=127344&&t<=127345||t>=127358&&t<=127359||t===127777||t>=127780&&t<=127788||t===127798||t===127869||t>=127894&&t<=127895||t>=127897&&t<=127899||t>=127902&&t<=127903||t>=127947&&t<=127950||t>=127956&&t<=127967||t===127987||t===127989||t===127991||t===128063||t===128065||t===128253||t>=128329&&t<=128330||t>=128367&&t<=128368||t>=128371&&t<=128377||t===128391||t>=128394&&t<=128397||t===128400||t===128421||t===128424||t>=128433&&t<=128434||t===128444||t>=128450&&t<=128452||t>=128465&&t<=128467||t>=128476&&t<=128478||t===128481||t===128483||t===128488||t===128495||t===128499||t===128506||t===128715||t>=128717&&t<=128719||t>=128736&&t<=128741||t===128745||t===128752||t===128755||t>=917536&&t<=917631},e.isSymbol=function(t){return t>8482||t<169?!1:t===169||t===174||t===8482},e.isZWJ=function(t){return t===8205},e})();a.exports=e}),null);
__d("UnicodeUtils",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";var e=55296,u=56319,c=56320,d=57343,m=/[\uD800-\uDFFF]/;function p(t){return e<=t&&t<=d}function _(t,n){if(0<=n&&n<t.length||s(0,1346,n,t.length),n+1===t.length)return!1;var r=t.charCodeAt(n),o=t.charCodeAt(n+1);return e<=r&&r<=u&&c<=o&&o<=d}function f(e){return m.test(e)}function g(e,t){var n=p(e.charCodeAt(t));return n?2:1}function h(e){if(!f(e))return e.length;for(var t=0,n=0;n<e.length;n+=g(e,n))t++;return t}function y(e,t){return b(e,t,t+1)}function C(e,t,n){var r=t||0,o=n===void 0?1/0:n||0;if(!f(e))return e.substr(r,o);var a=e.length;if(a<=0||r>a||o<=0)return"";var i=0;if(r>0){for(;r>0&&i<a;r--)i+=g(e,i);if(i>=a)return""}else if(t<0){for(i=a;r<0&&0<i;r++)i-=g(e,i-1);i<0&&(i=0)}var l=a;if(o<a)for(l=i;o>0&&l<a;o--)l+=g(e,l);return e.substring(i,l)}function b(e,t,n){var r=t||0,o=n===void 0?1/0:n||0;r<0&&(r=0),o<0&&(o=0);var a=Math.abs(o-r);return r=r<o?r:o,C(e,r,a)}function v(e){for(var t=[],n=0;n<e.length;n+=g(e,n))t.push(e.codePointAt(n));return t}l.isCodeUnitInSurrogateRange=p,l.isSurrogatePair=_,l.hasSurrogateUnit=f,l.getUTF16Length=g,l.strlen=h,l.charAt=y,l.substr=C,l.substring=b,l.getCodePoints=v}),98);
__d("EmojiRenderer",["EmojiRendererData","UnicodeUtils"],(function(t,n,r,o,a,i,l){var e,s,u=0,c=1,d=2,m=3,p=4,_=5,f=6,g=7,h=8,y=9,C=10,b=11;function v(e){var t=e[0];if(t===void 0)return!1;var n=e.length,o=e[n-1];if(o){var a=o.charCodeAt(0);if((s||(s=r("EmojiRendererData"))).isTagSpec(a))return!1}if(t=t.charCodeAt(0),(s||(s=r("EmojiRendererData"))).isSymbol(t)&&n<2)return!1;if((s||(s=r("EmojiRendererData"))).isText(t)){if(n===1)return!1;if(e.length==2)return(s||(s=r("EmojiRendererData"))).isNonSpacingCombiningMark(e[1].charCodeAt(0));var i=1;for((s||(s=r("EmojiRendererData"))).isEmojiVariationSelector(e[i].charCodeAt(0))&&i++;i<e.length;){if(!(s||(s=r("EmojiRendererData"))).isNonSpacingCombiningMark(e[i].charCodeAt(0)))return!1;i++}return!0}return!0}function S(t,n){for(var a=null,i=[],l=h,S=0,R=t.length;S<R;){var L=t.codePointAt(S),E=(e||(e=o("UnicodeUtils"))).getUTF16Length(t,S),k=t.substr(S,E);switch(l){case y:(s||(s=r("EmojiRendererData"))).isRegionalIndicator(L)?l=m:l=h;break;case p:if((s||(s=r("EmojiRendererData"))).isEmojiModifier(L)){l=_;break}case u:(s||(s=r("EmojiRendererData"))).isZWJ(L)?l=g:(s||(s=r("EmojiRendererData"))).isEmojiVariationSelector(L)?l=d:(s||(s=r("EmojiRendererData"))).isTextVariationSelector(L)?l=b:(s||(s=r("EmojiRendererData"))).isNonSpacingCombiningMark(L)?l=c:(s||(s=r("EmojiRendererData"))).isTagSpec(L)?l=f:l=h;break;case c:case d:if((s||(s=r("EmojiRendererData"))).isNonSpacingCombiningMark(L))break;case m:case _:(s||(s=r("EmojiRendererData"))).isZWJ(L)?l=g:(s||(s=r("EmojiRendererData"))).isTagSpec(L)?l=f:l=h;break;case f:(s||(s=r("EmojiRendererData"))).isTagSpec(L)||(s||(s=r("EmojiRendererData"))).isTagTerm(L)?l=f:l=h;break;case g:(s||(s=r("EmojiRendererData"))).isRegionalIndicator(L)?l=y:(s||(s=r("EmojiRendererData"))).isEmojiModifierBase(L)?l=p:(s||(s=r("EmojiRendererData"))).isEmoji(L)?l=u:l=h;break;case C:(s||(s=r("EmojiRendererData"))).isNonSpacingCombiningMark(L)?l=c:(s||(s=r("EmojiRendererData"))).isEmojiVariationSelector(L)?l=d:l=h;break;default:l=h;break}if(l===h){if((s||(s=r("EmojiRendererData"))).isRegionalIndicator(L)?l=y:(s||(s=r("EmojiRendererData"))).isEmojiModifierBase(L)?l=p:(s||(s=r("EmojiRendererData"))).isText(L)?l=C:(s||(s=r("EmojiRendererData"))).isEmoji(L)&&(l=u),l!==h){if(a!==null&&v(a.emoji)&&i.push(a),n!==null&&n===i.length){a=null;break}a={emoji:[k],length:E,offset:S}}}else a!==null&&(a.emoji.push(k),a.length+=E);S+=E}return a!==null&&v(a.emoji)&&i.push(a),i}function R(e,t,n){var r=S(e),o=[],a=0;return r.forEach(function(n){var r=n.offset;r>a&&o.push(e.substr(a,r-a));var i=t(n.emoji);i!=null&&o.push(i),a=r+n.length}),o.push(e.substr(a,e.length-a)),o}function L(e){return S(e,1).length===1}function E(e){return S(e).length}l.parse=S,l.render=R,l.containsEmoji=L,l.countEmoji=E}),98);
__d("EmoticonsList",[],(function(t,n,r,o,a,i){a.exports={emotes:{"O:)":"angel","O:-)":"angel","0:)":"angel","0:-)":"angel","'-_-":"coldsweat",":3":"colonthree","o.O":"confused",O_O:"confused",o_o:"confused","0_0":"confused","O.o":"confused_rev",":'(":"cry",":'-(":"cry","3:)":"devil","3:-)":"devil",":dog:":"dog","-3-":"flushkiss",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",")=":"frown",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp","=D":"grin",":-D":"grin",":D":"grin",">:(":"grumpy",">:-(":"grumpy","<3":"heart","&lt;3":"heart","^_^":"kiki","^~^":"kiki",":*":"kiss",":-*":"kiss","(y)":"like",":like:":"like","(Y)":"like",T_T:"loudly_crying","T-T":"loudly_crying",ToT:"loudly_crying","T.T":"loudly_crying",":-|":"neutral",":|":"neutral",":v":"pacman",":V":"pacman",'<(")':"penguin",">_<":"persevere",">.<":"persevere",":poop:":"poop",":|]":"robot","(^^^)":"shark",":)":"smile",":-)":"smile",":]":"smile","(:":"smile","=)":"smilingface","(=":"smilingface","-_-":"squint","B|":"sunglasses","8-|":"sunglasses","8|":"sunglasses","B-|":"sunglasses","B-)":"sunglasses","8-)":"sunglasses","8)":"sunglasses","(n)":"thumbsdown","(N)":"thumbsdown",":+1:":"thumbsup",":thumbsup:":"thumbsup",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue",":trans:":"transflag",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",";)":"wink",";-)":"wink",";*":"winkkiss",";-*":"winkkiss",";-P":"winktongue",";P":"winktongue",";-p":"winktongue",";p":"winktongue",":cheese:":"cheesewedge",":eyes:":"eyes",":peek:":"eyes",":clown:":"clown"},symbols:{angel:"O:)",coldsweat:"'-_-",colonthree:":3",confused:"o.O",confused_rev:"O.o",cry:":'(",devil:"3:)",dog:":dog:",flushkiss:"-3-",frown:":(",gasp:":o",grin:"=D",grumpy:">:(",heart:"<3",kiki:"^_^",kiss:":*",like:"(y)",loudly_crying:"T_T",neutral:":-|",pacman:":v",penguin:'<(")',persevere:">_<",poop:":poop:",robot:":|]",shark:"(^^^)",smile:":)",smilingface:"=)",squint:"-_-",sunglasses:"B|",thumbsdown:"(n)",thumbsup:":+1:",tongue:":P",transflag:":trans:",unsure:":/",upset:">:o",wink:";)",winkkiss:";*",winktongue:";-P",cheesewedge:":cheese:",eyes:":eyes:",clown:":clown:"},emoji:{angel:"1f607",coldsweat:"1f613",colonthree:"FACE_WITH_COLON_THREE",confused:"1f633",confused_rev:"1f633",cry:"1f622",devil:"1f608",dog:"1f436",flushkiss:"1f61a",frown:"1f641",gasp:"1f62e",grin:"1f603",grumpy:"1f620",heart:"2764",kiki:"1f60a",kiss:"1f618",like:"LIKE",loudly_crying:"1f62d",neutral:"1f610",pacman:"PACMAN",penguin:"1f427",persevere:"1f623",poop:"1f4a9",robot:"1f916",shark:"1f988",smile:"1f642",smilingface:"1f60a",squint:"1f611",sunglasses:"1f60e",thumbsdown:"1f44e",thumbsup:"1f44d",tongue:"1f61b",transflag:"1f3f3_fe0f_200d_26a7_fe0f",unsure:"1f615",upset:"1f620",wink:"1f609",winkkiss:"1f618",winktongue:"1f61c",cheesewedge:"1f9c0",eyes:"1f440",clown:"1f921"},regexp:/(^|[\s\'\".\(])(O:\)(?!\))|O:\-\)(?!\))|0:\)(?!\))|0:\-\)(?!\))|\'\-_\-|:3|o\.O|O_O|o_o|0_0|O\.o|:\'\(|:\'\-\(|3:\)(?!\))|3:\-\)(?!\))|:dog:|\-3\-|:\(|:\-\(|:\[|=\(|\)=|:o|:\-O|:O|:\-o|=D|:\-D|:D|>:\(|>:\-\(|<3|&lt;3|\^_\^|\^~\^|:\*|:\-\*|\(y\)(?!\))|:like:|\(Y\)(?!\))|T_T|T\-T|ToT|T\.T|:\-\||:\||:v|:V|<\(\"\)(?!\))|>_<|>\.<|:poop:|:\|\]|\(\^\^\^\)(?!\))|:\)(?!\))|:\-\)(?!\))|:\]|\(:|=\)(?!\))|\(=|\-_\-|B\||8\-\||8\||B\-\||B\-\)(?!\))|8\-\)(?!\))|8\)(?!\))|\(n\)(?!\))|\(N\)(?!\))|:\+1:|:thumbsup:|:P|:\-P|:\-p|:p|=P|:trans:|:\/|:\-\/|:\\|:\-\\|=\/|=\\|>:o|>:O|>:\-O|>:\-o|;\)(?!\))|;\-\)(?!\))|;\*|;\-\*|;\-P|;P|;\-p|;p|:cheese:|:eyes:|:peek:|:clown:)([\s\'\".,!?\)]|<br>|$)/,noncapturingRegexp:/(?:^|[\s\'\".\(])(O:\)(?!\))|O:\-\)(?!\))|0:\)(?!\))|0:\-\)(?!\))|\'\-_\-|:3|o\.O|O_O|o_o|0_0|O\.o|:\'\(|:\'\-\(|3:\)(?!\))|3:\-\)(?!\))|:dog:|\-3\-|:\(|:\-\(|:\[|=\(|\)=|:o|:\-O|:O|:\-o|=D|:\-D|:D|>:\(|>:\-\(|<3|&lt;3|\^_\^|\^~\^|:\*|:\-\*|\(y\)(?!\))|:like:|\(Y\)(?!\))|T_T|T\-T|ToT|T\.T|:\-\||:\||:v|:V|<\(\"\)(?!\))|>_<|>\.<|:poop:|:\|\]|\(\^\^\^\)(?!\))|:\)(?!\))|:\-\)(?!\))|:\]|\(:|=\)(?!\))|\(=|\-_\-|B\||8\-\||8\||B\-\||B\-\)(?!\))|8\-\)(?!\))|8\)(?!\))|\(n\)(?!\))|\(N\)(?!\))|:\+1:|:thumbsup:|:P|:\-P|:\-p|:p|=P|:trans:|:\/|:\-\/|:\\|:\-\\|=\/|=\\|>:o|>:O|>:\-O|>:\-o|;\)(?!\))|;\-\)(?!\))|;\*|;\-\*|;\-P|;P|;\-p|;p|:cheese:|:eyes:|:peek:|:clown:)(?:[\s\'\".,!?\)]|<br>|$)/}}),null);
__d("EmoticonRenderer",["EmoticonsList"],(function(t,n,r,o,a,i,l){"use strict";var e=["LIKE","PACMAN","FACE_WITH_COLON_THREE"];function s(t){for(var n=[],r=new RegExp(o("EmoticonsList").regexp),a=0,i=t.match(r);i!==null;){var l=i[1],s=i[2].split(""),u=o("EmoticonsList").emotes[i[2]],c=o("EmoticonsList").emoji[u];n.push({chars:s,isCustom:e.includes(c),key:c,offset:a+i.index+l.length}),a+=i.index+i[0].length,i=t.slice(a).match(r)}return n}function u(e,t,n){var r=s(e),o=[],a=0;return r.forEach(function(r){var i=r.offset;i>a&&o.push(e.substr(a,i-a)),r.isCustom?o.push(n(r.key,r.chars)):o.push(t(r.key)),a=i+r.chars.length}),o.push(e.substr(a,e.length-a)),o}l.parse=s,l.render=u}),98);
__d("LSAppendDataTraceAddonStoredProcedure",["LSAppendDataTraceAddon","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSAppendDataTraceAddon"),a.dataTraceId,a.checkPointId,a.syncChannel,a.errorMessage,a.tags);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSContactGender",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});i.default=e}),66);
__d("LSContactIdType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});i.default=e}),66);
__d("LSContactUserBlockAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({MN_UNBLOCK:0,MN_BLOCK:1,FB_UNBLOCK:2,FB_BLOCK:3});i.default=e}),66);
__d("LSContactWorkForeignEntityType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});i.default=e}),66);
__d("LSHotEmojiSize",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});i.default=e}),66);
__d("LSQplAnnotateInt.nop",["EBMarkerIdToQPLEvent","I64","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u,c,d){try{var t,m=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),p=o("WAHashStringToNumber").hashStringToNumber(u);return r("QPLUserFlow").addAnnotations(m,{int:(t={},t[c]=(s||(s=o("I64"))).to_int32(d),t)},{instanceKey:p}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};u.__nop_name__="LSQplAnnotateInt",l.default=u}),98);
__d("LSRequestId",["uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="0123456789abcdef",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function u(){for(var t=r("uuidv4")().replace(/[^0-9a-f]/gi,""),n=0,o=["#"];n<33;){var a=e.indexOf(t.charAt(n))<<8,i=e.indexOf(t.charAt(n+1))<<4,l=e.indexOf(t.charAt(n+2)),u=l|(i|a),c=u>>6;o.push(s.charAt(c)),o.push(s.charAt(u&63)),n+=3}return o.join("")}var c={generate:u};l.default=c}),98);
__d("LSVerifyContactRowExistsStoredProcedure",["LSSynchronousPromise","LSVerifyContactRowExists","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyContactRowExists"),a.id,a.contactIdType,a.profilePictureUrl,a.name,a.contactType,a.profilePictureFallbackUrl,a.profilePictureUrlExpirationTimestampMs,a.urlExpirationTimestampMs,a.normalizedNameForSearch,a.isMemorialized,a.isBlocked,a.blockedByViewerStatus,a.canViewerMessage,a.isSelf,a.authorityLevel,a.capabilities,a.capabilities2,a.workForeignEntityType,a.gender,a.contactViewerRelationship,a.secondaryName,a.firstName,a.friendshipStatus);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWAdminMsgType",[],(function(t,n,r,o,a,i){"use strict";var e="currentUserAddedDevice",l="participantAddedDevice",s="currentUserRemovedDevice",u="participantRemovedDevice",c="currentUserUpdatedDevice",d="participantUpdatedDevice",m="participantAddedYou",p="participantAddedYouAndOneUser",_="participantAddedYouAndMoreThanOneUsers",f="unknowUserAddedYou",g="unknowUserAddedYouAndOneUser",h="unknowUserAddedYouAndMoreThanOneUser",y="unknownUserAddedOneUser",C="unknownUserAddedTwoUser",b="unknownUserAddedMoreThanTwoUser",v="participantAddedOneUser",S="participantAddedTwoUser",R="participantAddedMoreThanTwoUser",L="currentUserRemovedOneParticipant",E="currentUserRemovedTwoParticipant",k="currentUserRemovedMoreThanTwoParticipant",I="currentUserAddedOneParticipant",T="currentUserAddedTwoParticipant",D="currentUserAddedMoreThanTwoParticipant",x="participantRemovedYou",$="participantRemovedYouAndOneUser",P="participantRemovedYouAndMoreThanOneUsers",N="unknowUserRemovedYou",M="unknowUserRemovedYouAndOneUser",w="unknowUserRemovedYouAndMoreThanOneUser",A="unknownUserRemovedOneUser",F="unknownUserRemovedTwoUser",O="unknownUserRemovedMoreThanTwoUser",B="participantRemovedOneUser",W="participantRemovedTwoUser",q="participantRemovedMoreThanTwoUser",U="participantLeftGroup",V="currentUserLeftGroup",H="participantCustomizeParticipantNickname",G="participantClearParticipantNickname",z="participantCustomizeCurrentUserNickname",j="currentUserSetOwnNickname",K="currentUserClearOwnNickname",Q="currentUserClearParticipantNickname",X="participantSetOwnNickname",Y="participantClearOwnNickname",J="participantClearCurrentUserNickname",Z="currentUserCustomizeNickname",ee="currentUserNamedGroup",te="unkonwnUserNamedGroup",ne="participantNamedGroup",re="currentUserCustomizeHotlike",oe="participantCustomizeHotlike",ae="currentUserCustomizeTheme",ie="currentUserCustomizeAITheme",le="currentUserCustomizePhoto",se="participantCustomizeTheme",ue="participantCustomizeAITheme",ce="participantCustomizePhoto",de="currentUserSetAddModeAdminOnly",me="currentUserSetAddModeAllMembers",pe="participantSetAddModeAdminOnly",_e="participantSetAddModeAllMembers",fe="serverSetAddModeAdminOnly",ge="serverSetAddModeAllMembers",he="currentUserPinnedMessage",ye="currentUserUnpinnedMessage",Ce="participantPinnedMessage",be="participantUnpinnedMessage",ve="currentUserLimitSharingDisabled",Se="currentUserLimitSharingEnabled",Re="participantLimitSharingDisabled",Le="participantLimitSharingEnabled",Ee="cutoverThreadAdminMessage",ke="cutoverIGDThreadAdminMessage",Ie="cutoverRollbackAdminMessage",Te="dualThreadCutoverAdminMessage",De="dualThreadCutoverAdminMessageSelfThread",xe="dualThreadCutoverAdminMessageWithOtherUserName",$e="dualThreadCutoverAdminMessageOtherUserNameUnknown",Pe="e2eeThreadDescription",Ne="e2eeThreadUKOSAAdminMessage",Me="debugMsg",we="reachabilityError",Ae="twoUsersConnected",Fe="twoUsersConnectedOneMSplit",Oe="CurrentUserCreatedPoll",Be="ParticipantCreatedPoll",We="CurrentUserAddedPollOption",qe="ParticipantAddedPollOption",Ue="CurrentUserAddedMultiplePollOptions",Ve="ParticipantAddedMultiplePollOptions",He="CurrentUserAddedPollVote",Ge="ParticipantAddedPollVote",ze="CurrentUserAddedMultiplePollVotes",je="ParticipantAddedMultiplePollVotes",Ke="CurrentUserRemovedPollVote",Qe="ParticipantRemovedPollVote",Xe="CurrentUserRemovedMultiplePollVotes",Ye="ParticipantRemovedMultiplePollVotes",Je="CurrentUserMixedPollUpdate",Ze="ParticipantMixedPollUpdate",et="CurrentUserChangedPollVote",tt="ParticipantChangedPollVote",nt="CurrentUserChangedMultiplePollVotes",rt="ParticipantChangedMultiplePollVotes",ot="PollUnsentUpdate",at={CURRENT_USER_ADDED_DEVICE:e,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:D,CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:Ue,CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:ze,CURRENT_USER_ADDED_ONE_PARTICIPANT:I,CURRENT_USER_ADDED_POLL_OPTION:We,CURRENT_USER_ADDED_POLL_VOTE:He,CURRENT_USER_ADDED_TWO_PARTICIPANTS:T,CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:nt,CURRENT_USER_CHANGED_POLL_VOTE:et,CURRENT_USER_CLEAR_OWN_NICKNAME:K,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:Q,CURRENT_USER_CREATED_POLL:Oe,CURRENT_USER_CUSTOMIZE_AI_THEME:ie,CURRENT_USER_CUSTOMIZE_HOTLIKE:re,CURRENT_USER_CUSTOMIZE_NICKNAME:Z,CURRENT_USER_CUSTOMIZE_PHOTO:le,CURRENT_USER_CUSTOMIZE_THEME:ae,CURRENT_USER_LEFT_GROUP:V,CURRENT_USER_LIMIT_SHARING_DISABLED:ve,CURRENT_USER_LIMIT_SHARING_ENABLED:Se,CURRENT_USER_MIXED_POLL_UPDATE:Je,CURRENT_USER_NAMED_GROUP:ee,CURRENT_USER_PINNED_MESSAGE:he,CURRENT_USER_REMOVED_DEVICE:s,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:k,CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:Xe,CURRENT_USER_REMOVED_ONE_PARTICIPANT:L,CURRENT_USER_REMOVED_POLL_VOTE:Ke,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:E,CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:de,CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:me,CURRENT_USER_SET_OWN_NICKNAME:j,CURRENT_USER_UNPINNED_MESSAGE:ye,CURRENT_USER_UPDATED_DEVICE:c,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:ke,CUTOVER_ROLLBACK_ADMIN_MESSAGE:Ie,CUTOVER_THREAD_ADMIN_MESSAGE:Ee,DEBUG_MSG:Me,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:Te,E2EE_THREAD_DESCRIPTION:Pe,E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:Ne,PARTICIPANT_ADDED_DEVICE:l,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:R,PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:Ve,PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:je,PARTICIPANT_ADDED_ONE_USER:v,PARTICIPANT_ADDED_POLL_OPTION:qe,PARTICIPANT_ADDED_POLL_VOTE:Ge,PARTICIPANT_ADDED_TWO_USER:S,PARTICIPANT_ADDED_YOU:m,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:_,PARTICIPANT_ADDED_YOU_AND_ONE_USER:p,PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:rt,PARTICIPANT_CHANGED_POLL_VOTE:tt,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:J,PARTICIPANT_CLEAR_OWN_NICKNAME:Y,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:G,PARTICIPANT_CREATED_POLL:Be,PARTICIPANT_CUSTOMIZE_AI_THEME:ue,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:z,PARTICIPANT_CUSTOMIZE_HOTLIKE:oe,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:H,PARTICIPANT_CUSTOMIZE_PHOTO:ce,PARTICIPANT_CUSTOMIZE_THEME:se,PARTICIPANT_LEFT_GROUP:U,PARTICIPANT_LIMIT_SHARING_DISABLED:Re,PARTICIPANT_LIMIT_SHARING_ENABLED:Le,PARTICIPANT_MIXED_POLL_UPDATE:Ze,PARTICIPANT_NAMED_GROUP:ne,PARTICIPANT_PINNED_MESSAGE:Ce,PARTICIPANT_REMOVED_DEVICE:u,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:q,PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:Ye,PARTICIPANT_REMOVED_ONE_USER:B,PARTICIPANT_REMOVED_POLL_VOTE:Qe,PARTICIPANT_REMOVED_TWO_USER:W,PARTICIPANT_REMOVED_YOU:x,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:P,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:$,PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:pe,PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:_e,PARTICIPANT_SET_OWN_NICKNAME:X,PARTICIPANT_UNPINNED_MESSAGE:be,PARTICIPANT_UPDATED_DEVICE:d,POLL_UNSENT_UPDATE:ot,REACHABILITY_ERROR:we,SERVER_SET_ADD_MODE_ADMIN_ONLY:fe,SERVER_SET_ADD_MODE_ALL_MEMBERS:ge,TWO_USERS_CONNECTED:Ae,TWO_USERS_CONNECTED_ONE_MSPLIT:Fe,UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:b,UNKNOWN_USER_ADDED_ONE_USER:y,UNKNOWN_USER_ADDED_TWO_USER:C,UNKNOWN_USER_ADDED_YOU:f,UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:h,UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:g,UNKNOWN_USER_NAMED_GROUP:te,UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:O,UNKNOWN_USER_REMOVED_ONE_USER:A,UNKNOWN_USER_REMOVED_TWO_USER:F,UNKNOWN_USER_REMOVED_YOU:N,UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:w,UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:M};i.CURRENT_USER_ADDED_DEVICE=e,i.CURRENT_USER_PINNED_MESSAGE=he,i.CURRENT_USER_UNPINNED_MESSAGE=ye,i.PARTICIPANT_PINNED_MESSAGE=Ce,i.PARTICIPANT_UNPINNED_MESSAGE=be,i.CURRENT_USER_LIMIT_SHARING_DISABLED=ve,i.CURRENT_USER_LIMIT_SHARING_ENABLED=Se,i.PARTICIPANT_LIMIT_SHARING_DISABLED=Re,i.PARTICIPANT_LIMIT_SHARING_ENABLED=Le,i.CUTOVER_THREAD_ADMIN_MESSAGE=Ee,i.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=ke,i.CUTOVER_ROLLBACK_ADMIN_MESSAGE=Ie,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=Te,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD=De,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME=xe,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN=$e,i.E2EE_THREAD_DESCRIPTION=Pe,i.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE=Ne,i.CURRENT_USER_CREATED_POLL=Oe,i.PARTICIPANT_CREATED_POLL=Be,i.CURRENT_USER_ADDED_POLL_OPTION=We,i.PARTICIPANT_ADDED_POLL_OPTION=qe,i.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS=Ue,i.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS=Ve,i.CURRENT_USER_ADDED_POLL_VOTE=He,i.PARTICIPANT_ADDED_POLL_VOTE=Ge,i.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES=ze,i.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES=je,i.CURRENT_USER_REMOVED_POLL_VOTE=Ke,i.PARTICIPANT_REMOVED_POLL_VOTE=Qe,i.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES=Xe,i.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES=Ye,i.CURRENT_USER_MIXED_POLL_UPDATE=Je,i.PARTICIPANT_MIXED_POLL_UPDATE=Ze,i.CURRENT_USER_CHANGED_POLL_VOTE=et,i.PARTICIPANT_CHANGED_POLL_VOTE=tt,i.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES=nt,i.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES=rt,i.POLL_UNSENT_UPDATE=ot,i.ADMIN_MSG_TYPE=at}),66);
__d("MAWAnimatedImageThumbnailStore",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var n;return(n=e.get(t))!=null?n:null}function s(t,n){e.set(t,n)}i.getThumbnailSpec=l,i.setThumbnailSpec=s}),66);
__d("MAWBlockUtils",["I64","LSContactUserBlockAction","LSIntEnum","LSThreadBitOffset","ReQL","asyncToGeneratorRuntime","promiseDone","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback,m=[0,31,35,55,56,58,24,25,19,85],p=[0,31,35,55,56,58,24,25,19,85,8,22],_=[35,19,85,56,24,25];function f(){var t=(e||(e=r("useReStore")))();return d(function(e,a){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.participants).getKeyRange(e));if(n!=null){var l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n.threadKey).filter(function(e){return(s||(s=o("I64"))).equal(e.threadType,(u||(u=o("LSIntEnum"))).ofNumber(15))}));if(l!=null){var c=(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactUserBlockAction").MN_BLOCK))?o("LSThreadBitOffset").clear(m,l.capabilities,l.capabilities2,l.capabilities3,l.capabilities4,l.capabilities5):(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactUserBlockAction").FB_BLOCK))?o("LSThreadBitOffset").clear(p,l.capabilities,l.capabilities2,l.capabilities3,l.capabilities4,l.capabilities5):o("LSThreadBitOffset").set(_,l.capabilities,l.capabilities2,l.capabilities3,l.capabilities4,l.capabilities5),d=c[0],f=c[1];yield t.runInTransaction(function(e){var t=babelHelpers.extends({},l,{capabilities:d,capabilities2:f});return e.threads.put(t)},"readwrite",void 0,void 0,i.id+":137")}}})())},[t])}l.clearedMnBlockCapabilities=m,l.clearedFbBlockCapabilities=p,l.useChangeThreadBlockCapabilities=f}),98);
__d("MAWMessageRequestUtil",["I64","LSContactBitOffset","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){if(t==="pending"||t==="other")return o("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is "+t+", contactViewerRelationship is "+(e||(e=o("I64"))).to_string(a.contactViewerRelationship)),!0;var i=o("LSContactBitOffset").hasWithDefault(64,a,!0);return t==="inbox"&&(e||(e=o("I64"))).equal(a.contactViewerRelationship,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactViewerRelationship").NOT_CONTACT))&&!i?(n&&o("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is inbox, contactViewerRelationship is "+(e||(e=o("I64"))).to_string(a.contactViewerRelationship)+", isViewerUnconnected is false, hasActivity is true"),n):!1}function c(e){return e==="pending"||e==="other"}function d(e){return o("LSMessagingThreadTypeUtil").isOneToOne(e.threadType)?c(e.folderName):!1}function m(t,n){return n!=null?u(t.folderName,(e||(e=o("I64"))).gt(t.lastActivityTimestampMs,e.zero),n[1]):!1}function p(e,t){return o("LSMessagingThreadTypeUtil").isOneToOne(e.threadType)?m(e,t):!1}function _(e){return o("LSMessagingThreadTypeUtil").isGroup(e.threadType)?c(e.folderName):!1}var f=[8,18,19,34,24,25,122],g=[21,48];l.isMessageRequestV2=u,l.isOneOnOneMessageRequest=d,l.isOneOnOneMessageRequestV2=p,l.isGroupMessageRequest=_,l.disabledThreadCapabilitiesForIncomingRequest=f,l.enabledThreadCapabilitiesForIncomingRequest=g}),98);
__d("clearedMAWMnRestrictCapabilities",[],(function(t,n,r,o,a,i){"use strict";var e=[0,31,35,55,56,58,24,25,35,19],l=e;i.default=l}),66);
__d("MAWUpdateLSThreadCapabilities",["fbt","I64","LSBitOffset","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBlockUtils","MAWCurrentUser","MAWMessageRequestUtil","Promise","ReQL","asyncToGeneratorRuntime","clearedMAWMnRestrictCapabilities","emptyFunction"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=o("MAWCurrentUser").getID(),m=(c||(c=o("I64"))).of_string(d);function p(t,a){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(a)).then(function(r){if(r==null)return(e||(e=n("Promise"))).resolve();var a=o("LSBitOffset").set((u||(u=o("LSIntEnum"))).ofNumber(27),r.capabilities),i=babelHelpers.extends({},r,{capabilities:a});return t.threads.put(i)}).then(r("emptyFunction"))}function _(t,a){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(a)).then(function(r){if(r==null)return(e||(e=n("Promise"))).resolve();var a=o("LSBitOffset").clear((u||(u=o("LSIntEnum"))).ofNumber(27),r.capabilities),i=babelHelpers.extends({},r,{capabilities:a});return t.threads.put(i)}).then(r("emptyFunction"))}function f(t,a){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(a)).then(function(r){if(r==null)return(e||(e=n("Promise"))).resolve([void 0,void 0]);var i=o("ReQL").firstAsync(o("LSMessagingThreadTypeUtil").isOneToOne(r.threadType)?o("ReQL").mergeJoin(o("ReQL").fromTableAscending(t.participants).getKeyRange(a),o("ReQL").fromTableAscending(t.contacts)).filter(function(e){var t=e[1];return!(c||(c=o("I64"))).equal(t.id,m)}).map(function(e){var t=e[1];return t}):o("ReQL").empty());return(e||(e=n("Promise"))).all([e.resolve(r),i])}).then(function(a){var i=a[0];if(i==null)return(e||(e=n("Promise"))).resolve();var l=a[1];if(l==null)return(e||(e=n("Promise"))).resolve();var s=(c||(c=o("I64"))).equal(l.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED)),d=c.equal(l.blockedByViewerStatus,u.ofNumber(r("LSContactBlockedByViewerStatus").FULLY_BLOCKED)),m=o("LSContactBitOffset").has(66,l),p=d?o("LSThreadBitOffset").clear(o("MAWBlockUtils").clearedFbBlockCapabilities,i.capabilities,i.capabilities2,i.capabilities3,i.capabilities4,i.capabilities5):s?o("LSThreadBitOffset").clear(o("MAWBlockUtils").clearedMnBlockCapabilities,i.capabilities,i.capabilities2,i.capabilities3,i.capabilities4,i.capabilities5):m?o("LSThreadBitOffset").clear(r("clearedMAWMnRestrictCapabilities"),i.capabilities,i.capabilities2,i.capabilities3,i.capabilities4,i.capabilities5):[i.capabilities,i.capabilities2,i.capabilities3,i.capabilities4,i.capabilities5],_=p[0],f=p[1],g=p[2],h=p[3],y=p[4];return t.threads.put(babelHelpers.extends({},i,{capabilities:_,capabilities2:f,capabilities3:g,capabilities4:h,capabilities5:y})).then(r("emptyFunction"))})}function g(e,t){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=t.threads,i=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(a).getKeyRange(r));if(i==null)return(e||(e=n("Promise"))).resolve();var l=o("LSThreadBitOffset").set.apply(o("LSThreadBitOffset"),[o("MAWMessageRequestUtil").disabledThreadCapabilitiesForIncomingRequest].concat(o("LSThreadBitOffset").clear(o("MAWMessageRequestUtil").enabledThreadCapabilitiesForIncomingRequest,i.capabilities,i.capabilities2,i.capabilities3,i.capabilities4,i.capabilities5))),s=l[0],u=l[1],c=l[2],d=l[3],m=l[4];yield a.put(babelHelpers.extends({},i,{additionalThreadContext:void 0,capabilities:s,capabilities2:u,capabilities3:c,capabilities4:d,capabilities5:m}))}),h.apply(this,arguments)}function y(e,t,n){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t));if(r!=null){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.contacts,["name"]).getKeyRange(n));if(a!=null){var i=s._(/*BTDS*/"{Inviter Name} convidou voc\u00ea para participar",[s._param("Inviter Name",a.name)]).toString(),l=o("LSThreadBitOffset").set([105],r.capabilities,r.capabilities2,r.capabilities3,r.capabilities4,r.capabilities5),u=l[0],c=l[1],d=l[2],m=l[3],p=l[4];yield e.threads.put(babelHelpers.extends({},r,{capabilities:u,capabilities2:c,capabilities3:d,capabilities4:m,capabilities5:p,snippet:i}))}}}),C.apply(this,arguments)}function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t));if(r!=null){var a=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.group_invites).getKeyRange(t)),i=o("LSThreadBitOffset").clear([105],r.capabilities,r.capabilities2,r.capabilities3,r.capabilities4,r.capabilities5),l=i[0],s=i[1],u=i[2],c=i[3],d=i[4];yield e.threads.put(babelHelpers.extends({},r,{capabilities:l,capabilities2:s,capabilities3:u,capabilities4:c,capabilities5:d,snippet:void 0})),yield a.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield e.group_invites.delete(t.threadKey,t.inviterId,t.inviteeId)});return function(e){return t.apply(this,arguments)}})())}}),v.apply(this,arguments)}l.enableAddMembersTxn=p,l.disableAddMembersTxn=_,l.disableBlockerCapabilitiesTxn=f,l.updateNonMessageRequestThreadTxn=g,l.setGroupInviteTxn=y,l.clearGroupInviteTxn=b}),226);
__d("uniqueArray",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(t,n){var r=n!=null?n:e,o=[],a=new Set;return t.forEach(function(e){var t=r(e);a.has(t)||(a.add(t),o.push(e))}),o}i.default=l}),66);
__d("MAWBridgeParticipantsUpdatedHandler",["fbt","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MAWCurrentUser","MAWJids","MAWMiActMappingTableAPI","MAWUpdateLSThreadCapabilities","Promise","asyncToGeneratorRuntime","uniqueArray"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=o("MAWCurrentUser").getID(),m=(c||(c=o("I64"))).of_string(d);function p(e,t){var n=t.map(function(e){var t=e.chatJid,n=e.type,r=e.userJid;return babelHelpers.extends({chatJid:t},E(n),{userJid:r})});return f(e,n)}function _(e,t){var n=t.participants.map(function(e){return{chatJid:e.threadJid,isAdmin:e.isAdmin,isInvited:e.isInvited,isSuperAdmin:e.isSuperAdmin,userJid:o("MAWJids").toUserJid(e.fbid)}});return f(e,n)}function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=yield C(t,r);yield(e||(e=n("Promise"))).all(a.map(function(r){var a=r.mawParticipant,i=r.threadKey,l=o("MAWJids").convertChatJidToIntJid(a.userJid);return[t.participants.get(i,l).then(function(r){var o=R(r,a,i);return r!=null?t.participants.put(o):(e||(e=n("Promise"))).all([t.participants.add(o),h(t,l)])}),v(t,l,i,a.isAdmin)]}).flat(1/0))}),g.apply(this,arguments)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){yield r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(e),{authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:u.ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:u.ofNumber(r("LSContactIdType").FBID),contactType:u.ofNumber(r("LSContactType").USER),contactViewerRelationship:u.ofNumber(r("LSContactViewerRelationship").UNKNOWN),gender:u.ofNumber(r("LSContactGender").UNKNOWN),id:t,isBlocked:!1,isMemorialized:!1,isSelf:d===(c||(c=o("I64"))).to_string(t),workForeignEntityType:u.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN)})}),y.apply(this,arguments)}function C(e,t){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=r("uniqueArray")(a.map(function(e){return e.chatJid})),l=new Map;return yield(e||(e=n("Promise"))).all(i.map(function(e){return o("MAWMiActMappingTableAPI").getThreadKeyForChatJid(t,e).then(function(t){return t!=null&&l.set(e,t)})})),a.map(function(e){var t=l.get(e.chatJid);return t==null?null:{mawParticipant:e,threadKey:t}}).filter(Boolean)}),b.apply(this,arguments)}function v(e,t,n,r){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){yield o("MAWUpdateLSThreadCapabilities").disableBlockerCapabilitiesTxn(e,n),(c||(c=o("I64"))).equal(m,t)&&(r?yield o("MAWUpdateLSThreadCapabilities").enableAddMembersTxn(e,n):yield o("MAWUpdateLSThreadCapabilities").disableAddMembersTxn(e,n))}),S.apply(this,arguments)}function R(e,t,n){return e==null?babelHelpers.extends({},L(t),{authorityLevel:(c||(c=o("I64"))).zero,contactId:o("MAWJids").convertChatJidToIntJid(t.userJid),deliveredWatermarkTimestampMs:c.zero,isSuperAdmin:t.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:c.zero,readWatermarkTimestampMs:c.zero,threadKey:n,threadRoles:c.zero}):babelHelpers.extends({},e,L(t))}function L(e){return{groupParticipantJoinState:e.isInvited?(u||(u=o("LSIntEnum"))).ofNumber(r("LSGroupParticipantJoinState").INVITED):(u||(u=o("LSIntEnum"))).ofNumber(r("LSGroupParticipantJoinState").MEMBER),isAdmin:e.isAdmin,isModerator:!1,subscribeSource:e.isSuperAdmin?s._(/*BTDS*/"Criador do grupo").toString():void 0}}function E(e){return{isAdmin:e==="superadmin"||e==="admin",isInvited:e==="invitedParticipant",isSuperAdmin:e==="superadmin"}}l.callFromMainThread=p,l.call=_,l.mawToLsParticipantTypeConversion=E}),226);
__d("MAWCacheServiceDB",["FBLogger","MAWCurrentUser","MAWIndexedDbMetadata","MAWWormOdsLogger","MessengerWebInitData","Promise","WAHex","Worm","WormDump","WormEAR","WormIDbDriver","asyncToGeneratorRuntime","getErrorSafe","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s={autoIncrement:!0,indexes:{key:{fields:["key"],unique:!0}},primaryKey:"id",secure:!0},u={messageComposerDrafts:s,snippets:s},c=null,d=function(t,n,a){var e="maw_cache_service",i=new(o("WormEAR")).WormEAR(a,e,n),l=new(o("WormIDbDriver")).WormIDbDriver(t,e,a,i,o("MAWWormOdsLogger").wormOdsWorkerLogger,{onTransactionError:p});return new(o("Worm")).WormDatabase(l,r("qpl")._(1056840657,"2716"))};function m(){return c!==null||(c=new(e||(e=n("Promise")))((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{var n=d(o("MAWIndexedDbMetadata").MAWcacheServiceDbName(o("MAWCurrentUser").getID()),o("WAHex").parseHex(r("MessengerWebInitData").accountKeyV2),u);yield n.init(),e(n)}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(a).mustfix("Failed to create cache service DB"),c=null,t(a)}});return function(t,n){return e.apply(this,arguments)}})())),c}function p(e){if(e instanceof o("WormEAR").DecryptionError){var t=e;r("FBLogger")("MAWCacheService").mustfix("EAR decryption error in store: %s. Attempting to delete the store:",t.store),r("promiseDone")(m().then(function(e){return e.runInTransaction([t.store],"readwrite",function(e){return e.stores[t.store].clear()},"delete-corrupted-entity")}).then(function(){r("FBLogger")("MAWCacheService").info("Successfully deleted corrupted store %s",t.store)}).catch(function(e){var n=r("getErrorSafe")(e);r("FBLogger")("MAWCacheService").catching(n).mustfix("Failed to delete corrupted store %s, err: %s",t.store,n.message)}))}}function _(e){return e.map(function(e){var t=e[0],n=e[1];return n})}function f(){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield m();return e.dump({snippets:{customFields:{id:o("WormDump").wormNonSensitiveField,key:o("WormDump").wormNonSensitiveField,timestamp:o("WormDump").wormNonSensitiveField,value:function(t){var e;return{snippet:(e=o("WormDump")).wormRedact(t.snippet),snippetMsgAckLevel:e.wormNonSensitiveField(t.snippetMsgAckLevel),snippetMsgId:e.wormNonSensitiveField(t.snippetMsgId),snippetNewestIncomingMsgs:e.wormNonSensitiveField(t.snippetNewestIncomingMsgs),snippetReactionId:e.wormRedact(t.snippetReactionId)}}}}})}),g.apply(this,arguments)}l.getOrSetupMAWCacheDB=m,l.convertCacheValueToDBRawValue=_,l.getDbDump=f}),98);
__d("MAWCacheServiceQPL",["ExecutionEnvironment","MAWCurrentUser","MAWQplProxy","QPLUserFlow","performanceAbsoluteNow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Set,c=new Set,d=3e3,m=r("qpl")._(1056836703,"2955");function p(t,n){var a=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(a){if(c.has(t))return;f(t),o("MAWQplProxy").startQplUserFlow(m,{},{callBridgeWithTimestamp:!0,providedInstanceKey:t})}else{if(u.has(t))return;_(t),r("QPLUserFlow").start(m,{annotations:{string:{service:n}},instanceKey:t})}}function _(e){u.add(e)}function f(e){c.add(e)}function g(t,n,a){var i=b(a),l=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(l){if(!c.has(t))return;o("MAWQplProxy").sendQplPointThroughBridge(m,"worker@"+i+n,{instanceKey:t},!0)}else{if(!u.has(t))return;var p=(s||(s=r("performanceAbsoluteNow")))();a==="realtime-update"?window.setTimeout(function(){r("QPLUserFlow").addPoint(m,"ui@"+n,{instanceKey:t,timestamp:p})},d):r("QPLUserFlow").addPoint(m,"ui@"+n,{instanceKey:t})}}function h(t,n){var a=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(a){if(!c.has(t))return;o("MAWQplProxy").sendQPLAnnotationsThroughBridge(m,n,t)}else{if(!u.has(t))return;r("QPLUserFlow").addAnnotations(m,n,{instanceKey:t})}}function y(t){var n=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(n){if(!c.has(t))return;c.delete(t),o("MAWQplProxy").sendQPLSuccessThroughBridge(m,{},t,!0)}else{if(!u.has(t))return;var a=(s||(s=r("performanceAbsoluteNow")))();window.setTimeout(function(){u.delete(t),r("QPLUserFlow").endSuccess(m,{instanceKey:t,timestamp:a})},d)}}function C(t,n,a){var i=b(a),l=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(l){if(!c.has(t))return;o("MAWQplProxy").sendQPLFailThroughBridge(m,"worker@"+i+n,{},t,!0)}else{if(!u.has(t))return;var p=(s||(s=r("performanceAbsoluteNow")))();window.setTimeout(function(){u.delete(t),r("QPLUserFlow").endFailure(m,"ui@"+n,{instanceKey:t,timestamp:p})},d),u.delete(t)}}function b(e){return e?e.replace(/-/g,"_")+"_":""}function v(e){return o("MAWCurrentUser").isEmployee()||o("MAWCurrentUser").isTestUser()?e:void 0}var S={addAnnotationsQPL:h,addPointQPL:g,endFailureQPL:C,endSuccessQPL:y,redactKeysForNonEmployee:v,registerInstanceKeyInUI:_,registerInstanceKeyInWorker:f,startQPL:p};l.default=S}),98);
__d("MAWCacheServiceUtils",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e="maw_cache_service_broadcast",s=typeof window!="undefined"?window:self,u=function(){return s.BroadcastChannel?new s.BroadcastChannel(e):(r("FBLogger")("messenger_e2ee_web").warn("BroadcastChannel is not supported in this browser"),null)},c={concurrency:1,maxTaskLimit:1,maxThrottleMs:500};function d(e){return"maw-cache-service-"+e}function m(e,t){var n=new Set,r=[];return e.forEach(function(e){var o=t(e);if(n.has(o)){r.push(e);return}n.add(o)}),r}l.MAW_CACHE_SERVICE_BROADCAST_CHANNEL=e,l.globalScope=s,l.getMAWCacheServiceBroadcastChannel=u,l.SCHEDULER_CONFIG=c,l.getSchedulerName=d,l.findDuplicates=m}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=300,u=600,c=900,d=1800,m=Math.imul((e=o("WATimeUtils")).HOUR_SECONDS,6),p=Math.imul(e.HOUR_SECONDS,12),_=Math.imul(e.DAY_SECONDS,14),f=1e3,g=5,h=10,y=30,C=60,b=m;l.fiveMinutesInSeconds=s,l.tenMinutesInSeconds=u,l.fifteenMinutesInSeconds=c,l.thirtyMinutesInSeconds=d,l.oneHourInSeconds=e.HOUR_SECONDS,l.sixHoursInSeconds=m,l.twelveHoursInSeconds=p,l.oneDayInSeconds=e.DAY_SECONDS,l.ephemeralMaxDelectionWindowForUnseenMessage=_,l.msPerSec=f,l.fiveSeconds=g,l.tenSeconds=h,l.thirtySeconds=y,l.oneMinuteInSeconds=C,l.ephemeralReportingWindowInSeconds=b}),98);
__d("MAWFetchXMABlob",["FBLogger","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var o=t.descriptionForLogging,a=t.url,i=t.xmaContentType;return a==null||a===""?(e||(e=n("Promise"))).resolve():window.fetch(a).then(function(e){return e.blob()}).catch(function(t){return r("FBLogger")("messenger_web_sharing").mustfix("Error fetching url in xma share from %s, with XMA content type %s and error %s",o,i,t),(e||(e=n("Promise"))).resolve()})}l.fetchBlob=s}),98);
__d("MAWFolderTypes",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=10,d=15,m={ARCHIVED:c,INBOX:e,OTHER:s,PENDING:l,RESTRICTED:d,SPAM:u};i.INBOX=e,i.PENDING=l,i.OTHER=s,i.SPAM=u,i.ARCHIVED=c,i.RESTRICTED=d,i.FOLDER_ID=m}),66);
__d("MAWMediaPreProcessQpl",["MAWSendQplToServer","Random","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof self.BigInt=="function",s=r("justknobx")._("3427")*1e3;function u(t,n){var a=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),i=o("MAWSendQplToServer").startQplUserFlow(r("qpl")._(1056840460,"718"),{bool:{has_big_int_support:e},string:{preprocess_type:t}},a,s);return n&&i.addAnnotations({int:{input_file_size:n.size},string:{mimetype:n.type}}),babelHelpers.extends({},i,{flowDetails:{event:r("qpl")._(1056840460,"718"),instanceKey:a}})}l.startMediaPreProcessQpl=u}),98);
__d("WABlobToArrayBuffer",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return"arrayBuffer"in t&&typeof t.arrayBuffer=="function"?t.arrayBuffer():new(e||(e=n("Promise")))(function(e,n){var o=new FileReader;o.onload=function(){var t=o.result;t instanceof ArrayBuffer?e(t):n(r("err")("blobToArrayBuffer got error because result is not ArrayBuffer: "+typeof t))},o.onerror=function(){var e;n((e=o.error)!=null?e:r("err")("blobToArrayBuffer got unknown error"))},o.readAsArrayBuffer(t)})}l.blobToArrayBuffer=s}),98);
__d("WABlobToImage",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){var r;return new(e||(e=n("Promise")))(function(e,n){r=new Image;var o=URL.createObjectURL(t),a=function(){return URL.revokeObjectURL(o)};r.onload=function(){e({image:r,releaseImageMemory:a})},r.onerror=function(){a(),n("loadBlobToImage error")},r.src=o})}i.blobToImage=l}),66);
__d("WACalculateBoundOutputSize",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t!=null?l(e.width,e.height,t.width,t.height):{outputWidth:e.width,outputHeight:e.height}}function l(e,t,n,r){var o=e,a=t;return e>t?e>n&&(a*=n/o,o=n):a>r&&(o*=r/a,a=r),{outputWidth:Math.round(Math.max(o,1)),outputHeight:Math.round(Math.max(a,1))}}i.calculateBoundOutputSize=e}),66);
__d("WADecodeImage",["WABlobToImage","WACalculateBoundOutputSize","WATagsLogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WATagsLogger").TAGS(["decodeImage"]),c=typeof self.createImageBitmap=="function"&&typeof self.OffscreenCanvas=="function",d=c?m:_;function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){u.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start decoding image without DOM: ",""])),t.name);var r=yield self.createImageBitmap(t),a=r.width,i=r.height,l=o("WACalculateBoundOutputSize").calculateBoundOutputSize({width:a,height:i},n),s=l.outputWidth,c=l.outputHeight,d=new self.OffscreenCanvas(s,c),m=g({canvas:d,inputWidth:a,inputHeight:i,outputWidth:s,outputHeight:c,image:r});return m}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){u.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["start decoding image with DOM: ",""])),e.name);var n=yield o("WABlobToImage").blobToImage(e),r=n.image,a=n.releaseImageMemory,i=r.width,l=r.height,c=o("WACalculateBoundOutputSize").calculateBoundOutputSize({width:i,height:l},t),d=c.outputWidth,m=c.outputHeight,p=document.createElement("canvas"),_=g({canvas:p,inputWidth:i,inputHeight:l,outputWidth:d,outputHeight:m,image:r});return a(),_}),f.apply(this,arguments)}function g(e){var t=e.canvas,n=e.image,r=e.inputWidth,o=e.inputHeight,a=e.outputWidth,i=e.outputHeight;t.width=a,t.height=i;var l=t.getContext("2d");l.fillStyle="rgb(255,255,255)",l.fillRect(0,0,t.width,t.height),l.drawImage(n,0,0,r,o,0,0,a,i);var s=l.getImageData(0,0,a,i);return s}l.canDecodeWithoutDOM=c,l.decodeImage=d,l.decodeImageWithoutDOM=m,l.decodeImageWithDOM=_}),98);
__d("WAByteArray",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=t,r=new Uint8Array(e),o=e-1;o>=0;o--)r[o]=n&255,n>>>=8;return r}function l(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}function s(e,t){if(!e||!t)return!1;var n=new Uint8Array(e),r=new Uint8Array(t),o=n.length,a=r.length;if(o!==a)return!1;for(var i=0;i<o;i++)if(n[i]!==r[i])return!1;return!0}i.intToBytes=e,i.uint8ArrayToBuffer=l,i.compareArrayBuffer=s}),66);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a,i){var t=null,l=new(e||(e=n("Promise")))(function(e,n){t=setTimeout(function(){n(new(o("WACustomError")).TimeoutError(i)),clearTimeout(t)},a)});return e.race([r,l]).finally(function(){clearTimeout(t)})};l.promiseTimeout=s}),98);
__d("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/static_resources/webworker_v1/init_script/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("WorkerBundleResource",["TrustedTypesWebWorkerScriptURLPolicy","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","getWorkerInitScriptSPINParams","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,o,a,i=(n=t==null?void 0:t.logImportScriptsErrors)!=null?n:!1,l=(o=t==null?void 0:t.name)!=null?o:e.name,u=new window.URL(e.url,window.location.href).href;if(u==null){var c=new Error("Can't start up worker without a resource url.");throw c.stack,c}for(var d=r("nullthrows")((a=r("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(r("getWorkerInitScriptSPINParams")()))==null||(a=a.addQueryParams(s()))==null?void 0:a.toString()),m=new Worker(r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(d),{name:l}),p=arguments.length,_=new Array(p>2?p-2:0),f=2;f<p;f++)_[f-2]=arguments[f];return m.postMessage({bundleUrl:u,initArgs:_,isDev:!1,resource:e,logImportScriptsErrors:i,type:"sr-init"}),m}function s(){var e=new URLSearchParams(window.location.search),t=new Map;return e.forEach(function(e,n){["gk_enable","gk_enable[]","gk_disable","gk_disable[]"].includes(n)&&t.set(n,e)}),t}l.createDedicatedWebWorker=e}),98);
__d("WAMediaWasmWorkerClient",["FBLogger","Promise","QPLUserFlow","WAByteArray","WACustomError","WAMediaWasmWorkerResource","WAPromiseTimeout","WAResultOrError","WorkerBundleResource","WorkerClient","WorkerMessagePort","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x=o("WorkerBundleResource").createDedicatedWebWorker(r("WAMediaWasmWorkerResource")),$="media_platform",P=function(){return r("FBLogger")($).tags(["WAMediaWasmWorkerClient"])},N=new(o("WorkerMessagePort")).WorkerSyncedMessagePort(x,"WAMediaWasmWorker");o("WorkerClient").init(N),P().DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["initiated."]))),N.addMessageListener("log",function(e){var t=e.logType,n=e.message;switch(t){case"dev":P().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["from worker: ",""])),n);break;case"error":P().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["worker error: ",""])),n);break;default:}}),N.addMessageListener("qpl",function(e){M(e)});function M(e){var t=e.event,n=e.action;switch(n.type){case"point":{r("QPLUserFlow").addPoint(t,n.pointName,{instanceKey:n.instanceKey});break}case"annotations":{r("QPLUserFlow").addAnnotations(t,n.annotations,{instanceKey:n.instanceKey});break}default:P().MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Unknown QPL action type from worker: ",""])),n.type)}}function w(e){var t=e.input,n=e.eventFlow;return H({operation:"webpCheck",input:o("WAByteArray").uint8ArrayToBuffer(t)},n)}function A(e){var t=e.input,n=e.eventFlow;return P().INFO(d||(d=babelHelpers.taggedTemplateLiteralLoose(["mp4RepairMuxInWorker processing video"]))),H({operation:"mp4RepairMux",input:o("WAByteArray").uint8ArrayToBuffer(t)},n)}function F(e){return O.apply(this,arguments)}function O(){return O=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.input,n=e.forceTranscode,r=e.supportsHevc,a=e.eventFlow;P().INFO(_||(_=babelHelpers.taggedTemplateLiteralLoose(["transcodeToMp4InWorker processing video"])));var i=V();P().INFO(f||(f=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),i);var l=yield z();if(!l.success)return o("WAResultOrError").makeError(l.error);var s=l.value,u=s.onMessageOnce("transcodeToMp4Response",function(e){return e.requestId===i}),c=o("WAByteArray").uint8ArrayToBuffer(t),d=c?[c]:void 0;s.postMessage({input:c,requestId:i,forceTranscode:n,supportsHevc:r,type:"transcodeToMp4Request",qplData:a.flowDetails},d),a==null||a.addPoint("sent_request_to_media_worker_start");var m=yield u,p=m.output;return P().INFO(g||(g=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),i,p.success),p.success?(a==null||a.addPoint("sent_request_to_media_worker_end"),p):(a==null||a.addPoint("sent_request_to_media_worker_end"),a==null||a.addAnnotations({string:{errorMessage:p.error.errorMessage}}),o("WAResultOrError").makeError(p.error.errorType))}),O.apply(this,arguments)}function B(e){var t=e.imageData,n=e.quality,r=e.useHdScanConfig,a=e.eventFlow;return H({operation:"progressiveJpegEncode",input:o("WAByteArray").uint8ArrayToBuffer(t.data),height:t.height,width:t.width,quality:n,useHdScanConfig:r},a)}function W(e){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.file,n=e.quality,r=e.useHdScanConfig,o=e.eventFlow,a=e.maxOutputResolution,i=yield t.arrayBuffer();return H({operation:"progressiveJpegEncodeWithFile",input:i,fileName:t.name,fileType:t.type,quality:n,useHdScanConfig:r,maxOutputWidth:a==null?void 0:a.width,maxOutputHeight:a==null?void 0:a.height},o)}),q.apply(this,arguments)}function U(e){P().INFO(m||(m=babelHelpers.taggedTemplateLiteralLoose(["start prewarming media wasm worker, operation: ",""])),e),N.postMessage({type:"prewarm",operation:e})}var V=(function(){var e=0;return function(){return++e}})();function H(e,t){return G.apply(this,arguments)}function G(){return G=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=V();P().INFO(h||(h=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),n);var r=yield z(t);if(!r.success)return r;var a=r.value,i=a.onMessageOnce("mediaOperationResponse",function(e){return e.requestId===n}),l=e.input?[e.input]:void 0;a.postMessage(babelHelpers.extends({},e,{requestId:n,type:"mediaOperationRequest"}),l),t==null||t.addPoint("sent_request_to_media_worker_start");var s=yield i,u=s.output;return u.success?(P().INFO(y||(y=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),n),t==null||t.addPoint("sent_request_to_media_worker_end",{bool:{isOpfsSyncSupported:u.value.isOpfsSyncSupported}}),o("WAResultOrError").makeResult(u.value.bytes)):(P().MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),n,u.error.errorMessage),t==null||t.addPoint("sent_request_to_media_worker_fail"),o("WAResultOrError").makeError(u.error.errorType))}),G.apply(this,arguments)}function z(e){e==null||e.addPoint("get_connected_worker_port_start");var t=3e4;return o("WAPromiseTimeout").promiseTimeout(N.fullyConnected,t).then(function(t){return e==null||e.addPoint("get_connected_worker_port_end"),o("WAResultOrError").makeResult(t)}).catch(function(t){return e==null||e.addPoint("get_connected_worker_port_fail",{string:{workerPortFailure:t instanceof o("WACustomError").TimeoutError?"timeout":"runtime-error"}}),t instanceof o("WACustomError").TimeoutError?o("WAResultOrError").makeError("worker-connection-timeout"):(P().MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["worker-connection-runtime-error: ",""])),t),o("WAResultOrError").makeError("worker-connection-runtime-error"))})}function j(e){return K.apply(this,arguments)}function K(){return K=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,r,a=e.file,i=e.maxDimension,l=e.thumbnailBlobByteSizeLimitBytes,s=e.thumbnailQualityPercentageWhenAboveByteSizeLimit,u=V();P().INFO(b||(b=babelHelpers.taggedTemplateLiteralLoose(["sending input to worker, requestId: ",""])),u);var c=yield z();if(!c.success)return c;var d=c.value,m=d.onMessageOnce("mediaGenerateImageThumbnailResponse",function(e){return e.requestId===u}),p=yield a.arrayBuffer(),_=p?[p]:void 0;d.postMessage({input:p,fileName:a.name,fileType:a.type,maxDimension:i,requestId:u,thumbnailBlobByteSizeLimitBytes:l,thumbnailQualityPercentageWhenAboveByteSizeLimit:s,type:"mediaGenerateImageThumbnailRequest"},_);var f=yield m;return P().INFO(v||(v=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),u,f.output.success),f.output.success?o("WAResultOrError").makeResult(f.output.value):(P().MUSTFIX(S||(S=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),u,(t=f.output.error)==null?void 0:t.errorMessage),(D||(D=n("Promise"))).reject((r=f.output.error)==null?void 0:r.errorMessage))}),K.apply(this,arguments)}function Q(e,t){return X.apply(this,arguments)}function X(){return X=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){P().INFO(R||(R=babelHelpers.taggedTemplateLiteralLoose(["start media storage shadow test"])));var n=V(),r=yield z();if(!r.success)return o("WAResultOrError").makeError({errorName:"port-init",errorMessage:r.error});var a=r.value,i=a.onMessageOnce("mediaStorageShadowTestResponse",function(e){return e.requestId===n});a.postMessage({input:e,requestId:n,storageType:t,type:"mediaStorageShadowTestRequest"});var l=yield i,s=l.output;return s.success?(P().INFO(L||(L=babelHelpers.taggedTemplateLiteralLoose(["received storage results from worker, requestId: ",""])),n),o("WAResultOrError").makeResult(s.value)):(P().MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["media storage test failed for storageType: ",", error: ",""])),t,s.error.errorMessage),o("WAResultOrError").makeError({errorName:s.error.errorName,errorMessage:s.error.errorMessage}))}),X.apply(this,arguments)}function Y(e){return J.apply(this,arguments)}function J(){return J=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.mediaType,n=e.rawMimeType,r=e.input,a=e.eventFlow,i=V();P().INFO(k||(k=babelHelpers.taggedTemplateLiteralLoose(["start kaleidoscope classifiy in worker, requestId: ",""])),i);var l=yield z(a);if(!l.success)return l;var s=l.value,u=s.onMessageOnce("kaleidoscopeClassifyResponse",function(e){return e.requestId===i});s.postMessage({mediaType:t,rawMimeType:n,input:r,requestId:i,type:"kaleidoscopeClassifyRequest"}),a==null||a.addPoint("sent_request_to_media_worker_start");var c=yield u,d=c.output;return d.success?(P().INFO(I||(I=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),i),a==null||a.addPoint("sent_request_to_media_worker_end"),d):(P().MUSTFIX(T||(T=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscope classifiy error: ",", requestId: ",","])),d.error,i),a==null||a.addPoint("sent_request_to_media_worker_fail"),o("WAResultOrError").makeError(d.error))}),J.apply(this,arguments)}l.webpCheckInWorker=w,l.mp4RepairMuxInWorker=A,l.transcodeToMp4InWorker=F,l.progressiveJpegEncodeInWorker=B,l.progressiveJpegEncodeInWorkerWithFile=W,l.prewarmMediaWasmWorker=U,l.getConnectedWorkerPortWithTimeout=z,l.generateImageThumbnailInWorker=j,l.runMediaStorageShadowTestWasmWorker=Q,l.kaleidoscopeClassifyInWorker=Y}),98);
__d("UFICommentFileInputAcceptValues.experimental",["cr:27633"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:27633")}),98);
__d("cometIsMimeTypeForMedia",["FBLogger","UFICommentFileInputAcceptValues.experimental"],(function(t,n,r,o,a,i,l){"use strict";var e={file:null,photo:null,video:null},s={"image/gif":"video","image/webp":"video"};function u(e){return e.split(",").map(function(e){return e.trim()}).map(function(e){return e.replace(/\/\*$/,"/")})}function c(t,n,o){e[t]==null&&(e[t]=u(o));var a=e[t];if(a==null)throw r("FBLogger")("ufi2").mustfixThrow("CometIsMimeTypeForMedia prefixes can't be null");var i=s[n];return i!=null?i===t:a.some(function(e){return n.startsWith(e)})}function d(e){return c("photo",e,r("UFICommentFileInputAcceptValues.experimental").photos)}function m(e){return c("video",e,r("UFICommentFileInputAcceptValues.experimental").videos)}function p(e){return c("file",e,r("UFICommentFileInputAcceptValues.experimental").files)}l.mimeTypeAcceptStringToArray=u,l.isMimeTypeForPhoto=d,l.isMimeTypeForVideo=m,l.isMimeTypeForFile=p}),98);
__d("MAWImagePreProcess",["MAWGetImageSpec","MAWImageUtils","MAWMediaPreProcessQpl","MWFBLogger","Promise","WABlobToArrayBuffer","WACustomError","WADecodeImage","WAMediaWasmWorkerClient","WAPromiseTimeout","WAResultOrError","asyncToGeneratorRuntime","cometIsMimeTypeForMedia","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=12e4,g=o("MWFBLogger").MWMediaLogger().tags(["ImagePreProcess"]),h=85,y=["image/heic"];function C(e,t,a,i){var l;i===!0?l={height:r("justknobx")._("187"),width:r("justknobx")._("187")}:l={height:r("justknobx")._("2144"),width:r("justknobx")._("2144")};var s;t?s=e.type==="image/webp"?(_||(_=n("Promise"))).resolve(e):L(e,"image/webp",t,a,l):s=e.type==="image/gif"?(_||(_=n("Promise"))).resolve(e):L(e,"image/jpeg",!1,a,l);var u=e.type==="image/gif";return u?s.then(function(e){return(_||(_=n("Promise"))).all([o("MAWGetImageSpec").getImageSpec(e),e])}).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=n[0],a=n[1];return{file:a,imageSpec:r,plaintext:yield o("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:null,type:R(e,t)}});return function(e){return r.apply(this,arguments)}})()):s.then(function(t){return(_||(_=n("Promise"))).all([x(e,r("justknobx")._("2033")),o("MAWGetImageSpec").getImageSpec(t),t])}).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){var a=r[0],i=r[1],l=r[2];return(_||(_=n("Promise"))).resolve({file:l,imageSpec:i,plaintext:yield o("WABlobToArrayBuffer").blobToArrayBuffer(l),thumbnailUrlAndSpec:a,type:R(e,t)})});return function(e){return r.apply(this,arguments)}})())}function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){var a=t.URL.createObjectURL(e),i=n===!0?r("justknobx")._("2545"):r("justknobx")._("2033"),l=yield o("MAWImageUtils").urlToThumbnailSpec(a,i),s={height:l.height,width:l.width};return{file:e,imageSpec:s,thumbnailSpec:l,type:R(e,n),url:a}}),v.apply(this,arguments)}function S(e,t){return o("MAWGetImageSpec").getImageSpec(e).then(function(r){return(_||(_=n("Promise"))).resolve({file:e,imageSpec:r,stickerReceiverFetchId:t,type:"sticker"})})}function R(e,t){return t===!0?"sticker":e.type==="image/gif"?"animated_image":"image"}function L(e,t,n,r,o){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,a,i){g.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["start image transcode ",""])),e.name);var l=o("MAWMediaPreProcessQpl").startMediaPreProcessQpl("image",e);l.addAnnotations({int:{total_number_of_files:a!=null?a:1},string:{targetMimetype:t}});var s=function(){return I(e,t,h,r,i).then(function(e){return e.success?e.value:(_||(_=n("Promise"))).reject("runtime-error")}).catch(function(e){return g.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Error while transcoding image through browser api: ",""])),String(e)),l.addPoint("native_encode_failure",{string:{native_encode_error:e.toString()}}),null})},u=t==="image/jpeg"?yield o("WAPromiseTimeout").promiseTimeout(T(e,h,l,i).then(function(e){return e.success?e.value:(_||(_=n("Promise"))).reject(e.error)}),f).catch(function(e){return e instanceof o("WACustomError").TimeoutError?l.addPoint("mozjpeg_encode_timeout"):l.addPoint("mozjpeg_encode_failure",{string:{mozjpeg_encode_error:e.toString()}}),s()}):yield s();if(u==null)throw l.endFail("unable_to_transcode_image"),g.mustfixThrow("unable to transcode image");return l.endSuccess({int:{compressed_file_size:u.size}}),u}),E.apply(this,arguments)}function k(e,n){var r=t.URL.createObjectURL(e);return o("MAWImageUtils").urlToThumbnail(r,n)}function I(n,r,a,i,l){g.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start image transcoding through browser api"])));var u=t.URL.createObjectURL(n),c=n.name;return o("MAWImageUtils").urlToFile(u,r,a,i,l).then(function(e){var t=e.blob;return g.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["finished image transcoding through browser api: "," bytes"])),t.size),o("WAResultOrError").makeResult(new File([t],c,{type:r}))})}function T(e,t,n,r){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){g.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["start process image through wasm, file name: ",""])),e.name),o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode"),n.addPoint("prewarm_worker_started");var a;if(o("WADecodeImage").canDecodeWithoutDOM&&(a=yield o("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorkerWithFile({eventFlow:n,file:e,maxOutputResolution:r,quality:t,useHdScanConfig:!0})),a==null||!a.success&&a.error==="decode-image-error"){var i=yield o("WADecodeImage").decodeImageWithDOM(e,r).catch(function(e){throw n.addPoint("image_decode_failure"),e});n.addPoint("image_decode_success"),a=yield o("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorker({eventFlow:n,imageData:i,quality:t,useHdScanConfig:!0})}return a.success?(n.addPoint("pjpeg_encode_success"),g.DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["finished jpeg transcoding through mozjpeg: "," bytes"])),a.value.byteLength),o("WAResultOrError").makeResult(new File([a.value],e.name,{type:"image/jpeg"}))):a}),D.apply(this,arguments)}function x(e,a){var i=(function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=t.URL.createObjectURL(e),r=yield o("MAWImageUtils").urlToThumbnail(n,a);return t.URL.revokeObjectURL(n),r});return function(){return r.apply(this,arguments)}})();if(!o("WADecodeImage").canDecodeWithoutDOM)return i();var l=r("justknobx")._("2338")*1024,s=r("justknobx")._("2340");return o("WAPromiseTimeout").promiseTimeout(o("WAMediaWasmWorkerClient").generateImageThumbnailInWorker({file:e,maxDimension:a,thumbnailBlobByteSizeLimitBytes:l,thumbnailQualityPercentageWhenAboveByteSizeLimit:s}).then(function(e){if(!e.success)throw g.mustfixThrow("urlToFileInWorker error: "+e.error);return{height:e.value.height,jpegThumbnail:e.value.blob,width:e.value.width}}).catch(function(e){throw g.catching(e).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error while processing url to thumbnail in worker"]))),e}),f).catch(function(e){return i()})}function $(e){return e==="image/gif"||e==="image/webp"?!0:o("cometIsMimeTypeForMedia").isMimeTypeForPhoto(e)?!y.includes(e):!1}l.imagePreprocess=C,l.optimisticImagePreprocess=b,l.stickerPreprocess=S,l.getJpegThumbnailInfo=k,l.generateImageThumbnailInWorkerWithFallback=x,l.isSupportedImageFileType=$}),98);
__d("WAWebDataUrlToBlob",["err"],(function(t,n,r,o,a,i,l){var e=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;function s(t){var n=t.match(e);if(!n)throw r("err")("invalid data URI");var o=n[2]?n[1]:"text/plain"+(n[3]||";charset=US-ASCII"),a=!!n[4],i=t.slice(n[0].length),l;a?l=atob(i):l=decodeURIComponent(i);for(var s=new ArrayBuffer(l.length),u=new Uint8Array(s),c=0;c<l.length;c+=1)u[c]=l.charCodeAt(c);return new Blob([u],{type:o})}l.dataURLtoBlob=s}),98);
__d("MAWImageUtils",["FBLogger","MAWAnimatedImageThumbnailStore","MAWDbMedia","MAWFrontendMediaUtils","MAWImagePreProcess","MWPBumpEntityKey","Promise","WABlobToArrayBuffer","WACalculateBoundOutputSize","WAWebDataUrlToBlob","err","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s="image/jpeg",u=100,c=r("justknobx")._("2338")*1024,d=r("justknobx")._("2340"),m=r("justknobx")._("2545");function p(t,o){o===void 0&&(o=!0);var a;return new(e||(e=n("Promise")))(function(e,n){a=new Image;var i=/^(?:data|blob):/.test(t);o&&!i&&a.setAttribute("crossOrigin","anonymous"),a.onload=e,a.onabort=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Error loading image from provided URL"))},a.onerror=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Wrong blob type"))},a.src=t}).then(function(){return a})}function _(t){return window.fetch(t,{cache:"no-store",method:"GET",mode:"cors"}).then(function(e){if(!e.ok)throw r("FBLogger")("messenger_web").mustfixThrow("Failed to fetch image: %s %s",e.status,e.statusText);return e.blob()}).then(function(t){return new(e||(e=n("Promise")))(function(e,n){var o=new FileReader;o.onloadend=function(){var t=new Image;t.onload=function(){e(t)},t.onerror=function(){n(function(){throw r("FBLogger")("messenger_web").mustfixThrow("Error loading image from blob data")})},typeof o.result=="string"?t.src=o.result:n(r("err")("FileReader result is not a string"))},o.onerror=function(){n(r("err")("Error reading blob as data URL"))},o.readAsDataURL(t)})}).catch(function(e){throw r("FBLogger")("messenger_web").mustfixThrow("Failed to load image from URL: %s, %s",t,String(e))})}function f(t,r,a,i){if(a===void 0&&(a=!1),t.toBlob)return new(e||(e=n("Promise")))(function(e){var n=i==null?void 0:i/100;t.toBlob(e,r,n)}).then(function(o){var i=c,l=d/100;return a&&o.size>=i?new(e||(e=n("Promise")))(function(e){t.toBlob(e,r,l)}):o});var l;o("MWPBumpEntityKey").bumpEntityKey("maw","data_url_to_blob");var s=(l=o("WAWebDataUrlToBlob").dataURLtoBlob)!=null?l:window.dataURLtoBlob;return(e||(e=n("Promise"))).resolve(s(t.toDataURL(r))).then(function(o){var i=c,l=d/100;return a&&o.size>=i?(e||(e=n("Promise"))).resolve(s(t.toDataURL(r,l))):o})}function g(t,a,i,l,s,u){u===void 0&&(u=!1);var c=u?_(t):p(t);return c.then(function(e){var t=e.naturalWidth,n=e.naturalHeight,r=o("WACalculateBoundOutputSize").calculateBoundOutputSize({height:n,width:t},s),u=r.outputHeight,c=r.outputWidth,d=document.createElement("canvas");d.width=c,d.height=u;var m=d.getContext("2d");return l!==!0&&b(d),m.drawImage(e,0,0,t,n,0,0,c,u),f(d,a,!1,i).then(function(e){return{blob:e,height:u,width:c}})}).catch(function(t){return(e||(e=n("Promise"))).reject(t!=null?t:r("err")("Error loading image from URL"))})}function h(e,t){return p(e).then(function(e){var n=document.createElement("canvas"),r=e.naturalWidth,a=e.naturalHeight,i=n.getContext("2d"),l=v(a,r,t);n.width=l.width,n.height=l.height;var u=n.width,c=n.height;return C(n),i.drawImage(e,0,0,u,c),f(n,s,!0).then(function(e){return o("WABlobToArrayBuffer").blobToArrayBuffer(e).then(function(e){return{height:c,jpegThumbnail:e,width:u}})})})}function y(e,t){return p(e).then(function(e){var n=v(e.naturalHeight,e.naturalWidth,t);return{height:n.height,width:n.width}})}function C(e){var t=e.getContext("2d");t.fillStyle="rgb(247,247,247)",t.fillRect(0,0,e.width,e.height)}function b(e){var t=e.getContext("2d");t.fillStyle="rgb(255,255,255)",t.fillRect(0,0,e.width,e.height)}function v(e,t,n){var r=t!=null?t:n,o=e!=null?e:n;return r>o?r>n&&(o*=n/r,r=n):o>n&&(r*=n/o,o=n),{height:Math.round(Math.max(o,1)),width:Math.round(Math.max(r,1))}}function S(e){return p(e).then(function(e){return{height:e.naturalHeight,width:e.naturalWidth}})}function R(t,a,i,l){l===void 0&&(l=!1);var s=o("MAWAnimatedImageThumbnailStore").getThumbnailSpec(t);if(s)return(e||(e=n("Promise"))).resolve(s);var u=g(t,"image/gif",void 0,void 0,void 0,l);return u==null?null:u.then(function(e){var n=new File([e.blob],"gif",{type:"image/gif"});return o("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(n,Math.max(i!=null?i:e.width,a!=null?a:e.height)).then(function(e){return o("MAWAnimatedImageThumbnailStore").setThumbnailSpec(t,e),e})}).catch(function(e){throw r("FBLogger")("messenger_web_media").mustfixThrow("Failed while generating thumbnail for GIF. URL: ",t,e)})}function L(t){var r=t==null?void 0:t.file,a=t==null?void 0:t.width,i=t==null?void 0:t.height;if(r==null||a==null||i==null)return(e||(e=n("Promise"))).resolve(t);var l=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(r.type,!0),s=l.mediaType;return s!==o("MAWDbMedia").MEDIA_TYPE.GIF?(e||(e=n("Promise"))).resolve(t):o("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(r,Math.max(a,i)).then(function(e){var t=new File([e.jpegThumbnail],"secure_threads_xma_preview_thumbnail",{type:"image/jpeg"});return{file:t,height:e.height,width:e.width}})}l.TYPE_JPEG=s,l.IMG_THUMB_MAX_EDGE=u,l.STICKER_THUMBNAIL_MAX_SIZE=m,l.canvasToBlob=f,l.urlToFile=g,l.urlToThumbnail=h,l.urlToThumbnailSpec=y,l.boundHeightWidth=v,l.urlToImageSpec=S,l.generateGIFThumbnail=R,l.generatePreviewBlobForShare=L}),98);
__d("MAWGetImageSpec",["MAWImageUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,n){var r=t.URL.createObjectURL(e);return o("MAWImageUtils").urlToFile(r,n!=null?n:e.type).then(function(e){var t=e.height,n=e.width;return{height:t,width:n}})}function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=t.URL.createObjectURL(e),r=yield o("MAWImageUtils").urlToImageSpec(n);return t.URL.revokeObjectURL(n),r}),u.apply(this,arguments)}l.getImageSpec_DEPRECATED=e,l.getImageSpec=s}),98);
__d("MAWIsFbProfileDirectoryItemXmaEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15740")}l.isFbProfileDirectoryItemXmaEnabled=e}),98);
__d("MAWJobDefinitions",["MAWExternalId"],(function(t,n,r,o,a,i,l){"use strict";var e=["s2sInstanceKey","s2sUserFlowQPLEvent"],s=["scheduleConfig"];function u(e){return e}function c(e){return e}var d={acceptGroupInvite:function(t,n,r,o,a,i){var e=_(i);return{args:{chatJid:t,inviteCode:o,invitedParticipantUserId:r,inviteExpirationTs:a,inviterUserId:n},scheduleConfig:e!=null?e:void 0,type:"acceptGroupInvite"}},addGroupParticipants:function(t,n,r,o){var e=_(o);return{args:{group:t,s2sInstanceKey:r,users:n},scheduleConfig:e!=null?e:void 0,type:"addGroupParticipants"}},deleteMsgsForMe:function(t,n){var e=_(n);return{args:{msgIds:t},scheduleConfig:e!=null?e:void 0,type:"deleteMsgsForMe"}},demoteGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"demoteGroupParticipants"}},downloadAndHandleMedia:function(t,n,r,o,a,i,l,s){var e=_(s);return{args:{downloadType:a,hash:n,metricInstanceKeys:l,msgType:o,protocolMsgId:t,qplEntryPoint:r},scheduleConfig:e!=null?e:void 0,type:"downloadAndHandleMedia"}},forwardMsg:function(n,r,a,i,l,s,u){var t=_(u),c=a!=null?a:{},d=c.s2sInstanceKey,m=c.s2sUserFlowQPLEvent,p=babelHelpers.objectWithoutPropertiesLoose(c,e);return{args:{args:p,chatJid:n,ephemeralSetting:i,externalId:l!=null?l:o("MAWExternalId").generateExternalId(),isFirstMsg:s,protocolMsgId:r,s2sInstanceKey:d},scheduleConfig:t!=null?t:void 0,type:"forwardMsg"}},getSpams:function(t){var e=_(t);return{args:void 0,scheduleConfig:e!=null?e:void 0,type:"getSpams"}},handleFutureproofMsg:function(t){var e=_(t);return{args:{},scheduleConfig:e!=null?e:void 0,type:"handleFutureproofMsg"}},handleSpamMsg:function(t){var e=_(t);return{args:void 0,scheduleConfig:e!=null?e:void 0,type:"handleSpamMsg"}},igdReportUserSpam:function(t,n){var e=t.chatJid,r=t.context,o=t.frxParams,a=t.frxTags,i=t.msgs,l=t.reportedMessageId,s=t.spamFlow,u=t.userJid,c=_(n);return{args:{chatJid:e,context:r,frxParams:o,frxTags:a,msgs:i,reportedMessageId:l,spamFlow:s,userJid:u},scheduleConfig:c!=null?c:void 0,type:"igdReportUserSpam"}},igdSendMsg:function(t,n){var e=t.actorID,r=t.taskID,o=_(n);return{args:{actorID:e,taskID:r},scheduleConfig:o!=null?o:void 0,type:"igdSendMsg"}},leaveGroups:function(t,n){var e=_(n);return{args:{groups:t},scheduleConfig:e!=null?e:void 0,type:"leaveGroups"}},markThreadAsRead:function(t,n,r,o,a,i){var e=_(i);return{args:{chatJid:t,isBlocked:r,isReadReceiptsDisabled:a,isRestricted:o,relationship:n},scheduleConfig:e!=null?e:void 0,type:"markThreadAsRead"}},promoteGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"promoteGroupParticipants"}},removeGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"removeGroupParticipants"}},reportUserSpam:function(t,n,r,o,a,i,l,s,u,c){var e=_(u);return{args:{chatJid:r,context:i,frxParams:l,frxTags:a,isIgd:o,openMsgs:c,reportedMessageId:s,spamFlow:n,userJid:t},scheduleConfig:e!=null?e:void 0,type:"reportUserSpam"}},resendWrittenAppData:function(t,n){var e=_(n);return{args:{appDataExternalId:t},scheduleConfig:e!=null?e:void 0,type:"resendWrittenAppData"}},restoreMessagesFromEncryptedBackups:function(t,n,r,o,a,i,l,s,u,c,d,m,p,f,g){var e=_(p);return{args:{deanonApiPayload:f,hasMoreAfter:a,hasMoreBefore:o,instanceKey:c,isMediaGalleryRestore:g,isPointQuery:i,messages:r,minMsgId:l,optimisticMsgs:d,startSortKey:u,taskSource:m,threadId:n,traceId:s,transportKey:t},scheduleConfig:e!=null?e:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreProtobufsFromEncryptedBackups:function(t,n,r,o,a,i,l,s,u,c,d,m,p,f,g,h){var e=_(m);return{args:{chatJid:h,deanonApiPayload:f,echoMessages:t,hasMoreAfter:i,hasMoreBefore:a,instanceKey:d,isMediaGalleryRestore:g,isPointQuery:l,messages:o,minMsgId:s,referenceTimestamp:c,requestId:u,taskSource:p,threadId:r,transportKey:n},scheduleConfig:e!=null?e:void 0,type:"restoreProtobufsFromEncryptedBackups"}},revokeMsgs:function(t,n){var e=_(n);return{args:t,scheduleConfig:e!=null?e:void 0,type:"revokeMsgs"}},sendAppData:function(t,n,r){var e=_(r);return{args:{args:t,externalId:n!=null?n:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendAppData"}},sendBumpMsg:function(t,n,r,a){var e=_(a);return{args:{args:n,chatJid:t,externalId:r!=null?r:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendBumpMsg"}},sendGroupInviteMsg:function(t,n,r){var e=_(r);return{args:{args:t,externalId:n!=null?n:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendGroupInviteMsg"}},sendMediaMsg:function(t,n,r,a,i,l,s,u,c,d,m,p,f,g,h,y,C,b,v,S,R,L){var e=_(C);return{args:{args:{duration:c,ephemeralSetting:m,filename:v,height:l,isFirstMsg:h,isForwarded:g,isPtt:d,jpegThumbnail:a,jpegThumbnailHeight:u,jpegThumbnailWidth:s,mediaGroupMetadata:L,offlineAttachmentId:S,openMessageOtid:f,quote:p,s2sInstanceKey:r,source:b,width:i},attachmentType:R,chatJid:t,externalId:y!=null?y:o("MAWExternalId").generateExternalId(),file:n},scheduleConfig:e!=null?e:void 0,type:"sendMediaMsg"}},sendMediaMsgV2:function(t,n,r,a,i,l,s,u,c,d,m,p,f,g,h,y,C,b,v,S,R,L,E){var e=_(C);return{args:{args:{duration:c,ephemeralSetting:m,filename:v,height:l,isFirstMsg:h,isForwarded:g,isPtt:d,jpegThumbnail:a,jpegThumbnailHeight:u,jpegThumbnailWidth:s,mediaGroupMetadata:E,offlineAttachmentId:S,openMessageOtid:f,quote:p,s2sInstanceKey:R,source:b,width:i},attachmentType:L,chatJid:t,externalId:y!=null?y:o("MAWExternalId").generateExternalId(),mimeType:n,plaintext:r},scheduleConfig:e!=null?e:void 0,type:"sendMediaMsgV2"}},sendWrittenAppData:function(t,n){var e=_(n);return{args:{appDataExternalId:t},scheduleConfig:e!=null?e:void 0,type:"sendWrittenAppData"}},setGroupMemberAddMode:function(t,n,r){var e=_(r);return{args:{groupJid:t,memberAddMode:n},scheduleConfig:e!=null?e:void 0,type:"setGroupMemberAddMode"}},setGroupSubject:function(t,n,r){var e=_(r);return{args:{group:t,subject:n},scheduleConfig:e!=null?e:void 0,type:"setGroupSubject"}},startInstamadilloDYI:function(t,n){var e=_(n);return{args:{qplInstanceKey:t},scheduleConfig:e!=null?e:void 0,type:"startInstamadilloDYI"}},updateBackupEntFbidForMedia:function(t,n,r,o){var e=_(o);return{args:{backupEntFbid:n,deliveryObjectId:t,traceId:r},scheduleConfig:e!=null?e:void 0,type:"updateBackupEntFbidForMedia"}}};function m(e,t){return p(e,t)}function p(e,t){var n=t.scheduleConfig,r=babelHelpers.objectWithoutPropertiesLoose(t,s),a={args:{},scheduleConfig:n,type:e};return t.externalIdJob&&(a.args.externalId=o("MAWExternalId").generateExternalId()),a.args=babelHelpers.extends({},a.args,r),t.uniqueJob&&(a.uniqKey=e),a}function _(e){if(e!=null)return{jobId:e.jobId,maxTimeoutMs:e.maxTimeoutMs,priority:e.priority}}function f(e){return{otid:e.toplevelProtobuf.messageId,supplementalProtobufs:new Map(e.supplementalProtobufs.entries().map(function(e){var t=e[0],n=e[1];return[t,{decryptedProtobuf:n.payload,protobufTimestampMS:n.timestampMs}]})),tags:e.tags,toplevelProtobuf:{decryptedProtobuf:e.toplevelProtobuf.payload,protobufTimestampMS:e.toplevelProtobuf.timestampMs}}}l.toThreadJidPrimaryId=u,l.toEncodedEchoMessage=c,l.jobSerializers=d,l.createStartJobInfo=m,l.createStartJobInfoGeneric=p,l.serializeJobScheduledConfig=_,l.mpsMessageToEncryptedBackupsMessage=f}),98);
__d("MAWLocalizationType",["MAWAdminMsgType"],(function(t,n,r,o,a,i,l){"use strict";var e="emptySnippet",s="currentUserCreatedGroup",u="participantCreatedGroup",c="unknownUserCreatedGroup",d="currentUserGotPromoted",m="currentUserGotDemoted",p="participantGotPromoted",_="participantGotDemoted",f="participantPromotedYou",g="participantDemotedYou",h="currentUserPromotedParticipant",y="currentUserDemotedParticipant",C="participantDemotedParticipant",b="participantPromotedParticipant",v="participantSelfDemoted",S="currentUserSelfDemoted",R="currentUserSendText",L="currentUserSendImage",E="currentUserSendVideo",k="currentUserSendAudio",I="currentUserSendGif",T="currentUserSendSticker",D="participantSendText",x="participantSendTextInGroup",$="participantSendImage",P="participantSendVideo",N="participantSendAudio",M="participantSendGif",w="participantSendSticker",A="unavailableSnippet",F="messageUnavailableSnippet",O="unknownUserEphemeralSettingTurnedOnSeconds",B="unknownUserEphemeralSettingTurnedOnMinutes",W="unknownUserEphemeralSettingTurnedOnHours",q="unknownUserEphemeralSettingTurnedOnDays",U="youEphemeralSettingTurnedOnSeconds",V="youEphemeralSettingTurnedOnMinutes",H="youEphemeralSettingTurnedOnHours",G="youEphemeralSettingTurnedOnDays",z="participantEphemeralSettingTurnedOnSeconds",j="participantEphemeralSettingTurnedOnMinutes",K="participantEphemeralSettingTurnedOnHours",Q="participantEphemeralSettingTurnedOnDays",X="unknownUserEphemeralSettingChangeSeconds",Y="unknownUserEphemeralSettingChangeMinutes",J="unknownUserEphemeralSettingChangeHours",Z="unknownUserEphemeralSettingChangeDays",ee="youEphemeralSettingChangeSeconds",te="youEphemeralSettingChangeMinutes",ne="youEphemeralSettingChangeHours",re="youEphemeralSettingChangeDays",oe="participantEphemeralSettingChangeSeconds",ae="participantEphemeralSettingChangeMinutes",ie="participantEphemeralSettingChangeHours",le="participantEphemeralSettingChangeDays",se="unknownUserEphemeralSettingTurnedOff",ue="youEphemeralSettingTurnedOff",ce="participantEphemeralSettingTurnedOff",de="ephemeralSettingsAutoReset",me="currentUserUnsentMessage",pe="participantUnsentMessage",_e="participantReactMessage",fe="participantReactMessageInGroup",ge="unknownUserEphemeralTakeScreenshot",he="unknownUserEphemeralRecordScreen",ye="youEphemeralTakeScreenshot",Ce="youEphemeralRecordScreen",be="participantEphemeralTakeScreenshot",ve="participantEphemeralRecordScreen",Se="icdcAlertAdminMessage",Re="yourDeviceICDCAlertAdminMessage",Le="currentUserSendAttachment",Ee="participantSendAttachment",ke="currentUserSentPost",Ie="currentUserSentReel",Te="currentUserSentStory",De="currentUserSentEvent",xe="currentUserMentionedStoryIG",$e="currentUserReceivedStoryMentionIG",Pe="participantSentPost",Ne="participantSentReel",Me="participantSentStory",we="participantSentEvent",Ae="currentUserSentStoryHighlight",Fe="participantSentStoryHighlight",Oe="currentUserMissedAudioCall",Be="participantMissedAudioCall",We="currentUserMissedVideoCall",qe="participantMissedVideoCall",Ue="currentUserAudioCalled",Ve="participantAudioCalled",He="currentUserVideoCalled",Ge="participantVideoCalled",ze="currentUserStartedGroupAudioCall",je="participantStartedGroupAudioCall",Ke="currentUserStartedGroupVideoCall",Qe="participantStartedGroupVideoCall",Xe="currentUserBumpedOwnMessage",Ye="currentUserBumpedMessage",Je="participantBumpedOwnMessage",Ze="participantBumpedParticipantMessage",et="participantBumpedCurrentUserMessage",tt="userSendUnavailableMessage",nt="userSendEncryptedMessage",rt="currentUserSendUnrenderableMessage",ot="participantSendUnrenderableMessage",at="currentUserSendLocationFallback",it="participantSendLocation",lt="currentUserSendLiveLocationFallback",st="participantSendLiveLocation",ut="currentUserSendLocation",ct="participantSendLocation",dt="currentUserSendPollCreationFallback",mt="participantSendPollCreation",pt="currentUserSendContactShareFallback",_t="participantSendContactShareFallback",ft="currentUserSendContactShare",gt="participantSendContactShare",ht="currentUserSendAIContactShare",yt="participantSendAIContactShare",Ct="currentUserSendStoryMentionFallback",bt="currentUserSendStoryMention",vt="participantSendStoryMention",St="participantSendStoryMentionFallback",Rt="currentUserSendPostMentionFallback",Lt="participantSendPostMentionFallback",Et="currentUserSendMemoriesShare",kt="participantSendMemoriesShare",It="currentUserSendPostMention",Tt="participantSendPostMention",Dt="currentUserSendNoteMentionFallback",xt="participantSendNoteMentionFallback",$t="messengerMemoryEncryptedMessageFallback",Pt="rtcXMAMessageFallback",Nt="metaAISendMessageFallback",Mt="currentUserSendBumpMessageFallback",wt="participantSendBumpMessageFallback",At="participantSendBumpMessageOriginalUnavailable",Ft="currentUserSendStickerReceiverFetchMessageFallback",Ot="participantSendStickerReceiverFetchMessageFallback",Bt="viewOncePhotoMessageFallback",Wt="viewOnceVideoMessageFallback",qt="unavailableStory",Ut="currentUserLimitSharingDisabled",Vt="currentUserLimitSharingEnabled",Ht="participantLimitSharingDisabled",Gt="participantLimitSharingEnabled",zt="dualThreadCutoverAdminMessageOtherUserNameUnknown",jt="dualThreadCutoverAdminMessageSelfThread",Kt="dualThreadCutoverAdminMessageWithOtherUserName",Qt=babelHelpers.extends({},o("MAWAdminMsgType").ADMIN_MSG_TYPE,{CURRENT_USER_AUDIO_CALLED:Ue,CURRENT_USER_BUMPED_MESSAGE:Ye,CURRENT_USER_BUMPED_OWN_MESSAGE:Xe,CURRENT_USER_CREATED_GROUP:s,CURRENT_USER_DEMOTED_PARTICIPANT:y,CURRENT_USER_GOT_DEMOTED:m,CURRENT_USER_GOT_PROMOTED:d,CURRENT_USER_LIMIT_SHARING_DISABLED:Ut,CURRENT_USER_LIMIT_SHARING_ENABLED:Vt,CURRENT_USER_MENTIONED_STORY_IG:xe,CURRENT_USER_MISSED_AUDIO_CALL:Oe,CURRENT_USER_MISSED_VIDEO_CALL:We,CURRENT_USER_PROMOTED_PARTICIPANT:h,CURRENT_USER_RECEIVED_STORY_MENTION_IG:$e,CURRENT_USER_SELF_DEMOTED:S,CURRENT_USER_SEND_AI_CONTACT_SHARE:ht,CURRENT_USER_SEND_ATTACHMENT:Le,CURRENT_USER_SEND_AUDIO:k,CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:Mt,CURRENT_USER_SEND_CONTACT_SHARE:ft,CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:pt,CURRENT_USER_SEND_GIF:I,CURRENT_USER_SEND_IMAGE:L,CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK:lt,CURRENT_USER_SEND_LOCATION:ut,CURRENT_USER_SEND_LOCATION_FALLBACK:at,CURRENT_USER_SEND_MEMORIES_SHARE:Et,CURRENT_USER_SEND_NOTE_MENTION_FALLBACK:Dt,CURRENT_USER_SEND_POLL_CREATION_FALLBACK:dt,CURRENT_USER_SEND_POST_MENTION:It,CURRENT_USER_SEND_POST_MENTION_FALLBACK:Rt,CURRENT_USER_SEND_STICKER:T,CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Ft,CURRENT_USER_SEND_STORY_MENTION:bt,CURRENT_USER_SEND_STORY_MENTION_FALLBACK:Ct,CURRENT_USER_SEND_TEXT:R,CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:rt,CURRENT_USER_SEND_VIDEO:E,CURRENT_USER_SENT_EVENT:De,CURRENT_USER_SENT_POST:ke,CURRENT_USER_SENT_REEL:Ie,CURRENT_USER_SENT_STORY:Te,CURRENT_USER_SENT_STORY_HIGHLIGHT:Ae,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:ze,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:Ke,CURRENT_USER_UNSENT_MESSAGE:me,CURRENT_USER_VIDEO_CALLED:He,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:zt,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:jt,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:Kt,EMPTY_SNIPPET:e,EPHEMERAL_SETTINGS_AUTO_RESET:de,ICDC_ALERT_ADMIN_MESSAGE:Se,MESSAGE_UNAVAILABLE_SNIPPET:F,MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK:$t,META_AI_SEND_MESSAGE_FALLBACK:Nt,PARTICIPANT_AUDIO_CALLED:Ve,PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:et,PARTICIPANT_BUMPED_OWN_MESSAGE:Je,PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:Ze,PARTICIPANT_CREATED_GROUP:u,PARTICIPANT_DEMOTED_PARTICIPANT:C,PARTICIPANT_DEMOTED_YOU:g,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:ve,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:le,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:ie,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:ae,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:oe,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:ce,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:Q,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:K,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:j,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:z,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:be,PARTICIPANT_GOT_DEMOTED:_,PARTICIPANT_GOT_PROMOTED:p,PARTICIPANT_LIMIT_SHARING_DISABLED:Ht,PARTICIPANT_LIMIT_SHARING_ENABLED:Gt,PARTICIPANT_MISSED_AUDIO_CALL:Be,PARTICIPANT_MISSED_VIDEO_CALL:qe,PARTICIPANT_PROMOTED_PARTICIPANT:b,PARTICIPANT_PROMOTED_YOU:f,PARTICIPANT_REACT_MESSAGE:_e,PARTICIPANT_REACT_MESSAGE_IN_GROUP:fe,PARTICIPANT_SELF_DEMOTED:v,PARTICIPANT_SEND_AI_CONTACT_SHARE:yt,PARTICIPANT_SEND_ATTACHMENT:Ee,PARTICIPANT_SEND_AUDIO:N,PARTICIPANT_SEND_BUMP_MESSAGE:wt,PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK:At,PARTICIPANT_SEND_CONTACT_SHARE:gt,PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:_t,PARTICIPANT_SEND_GIF:M,PARTICIPANT_SEND_IMAGE:$,PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK:st,PARTICIPANT_SEND_LOCATION:ct,PARTICIPANT_SEND_LOCATION_FALLBACK:it,PARTICIPANT_SEND_MEMORIES_SHARE:kt,PARTICIPANT_SEND_NOTE_MENTION_FALLBACK:xt,PARTICIPANT_SEND_POLL_CREATION_FALLBACK:mt,PARTICIPANT_SEND_POST_MENTION:Tt,PARTICIPANT_SEND_POST_MENTION_FALLBACK:Lt,PARTICIPANT_SEND_STICKER:w,PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Ot,PARTICIPANT_SEND_STORY_MENTION:vt,PARTICIPANT_SEND_STORY_MENTION_FALLBACK:St,PARTICIPANT_SEND_TEXT:D,PARTICIPANT_SEND_TEXT_IN_GROUP:x,PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:ot,PARTICIPANT_SEND_VIDEO:P,PARTICIPANT_SENT_EVENT:we,PARTICIPANT_SENT_POST:Pe,PARTICIPANT_SENT_REEL:Ne,PARTICIPANT_SENT_STORY:Me,PARTICIPANT_SENT_STORY_HIGHLIGHT:Fe,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:je,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:Qe,PARTICIPANT_UNSENT_MESSAGE:pe,PARTICIPANT_VIDEO_CALLED:Ge,RTC_XMA_FALLBACK:Pt,UNAVAILABLE_SNIPPET:A,UNAVAILABLE_STORY:qt,UNKNOWN_USER_CREATED_GROUP:c,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:he,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:Z,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:J,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:Y,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:X,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:se,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:q,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:W,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:B,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:O,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:ge,USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:nt,USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:tt,VIEW_ONCE_PHOTO_MESSAGE:Bt,VIEW_ONCE_VIDEO_MESSAGE:Wt,YOU_EPHEMERAL_RECORD_SCREEN:Ce,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:re,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:ne,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:te,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:ee,YOU_EPHEMERAL_SETTING_TURNED_OFF:ue,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:G,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:H,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:V,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:U,YOU_EPHEMERAL_TAKE_SCREENSHOT:ye,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:Re});l.CURRENT_USER_CREATED_GROUP=s,l.CURRENT_USER_SEND_TEXT=R,l.CURRENT_USER_SEND_IMAGE=L,l.CURRENT_USER_SEND_VIDEO=E,l.CURRENT_USER_SEND_AUDIO=k,l.CURRENT_USER_SEND_GIF=I,l.CURRENT_USER_SEND_STICKER=T,l.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=O,l.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=ge,l.CURRENT_USER_SEND_ATTACHMENT=Le,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN=zt,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD=jt,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME=Kt,l.LOCALIZATION_TYPE=Qt}),98);
__d("MAWMediaDownloadStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["DOWNLOADING","SUCCESS","NOT_MANUAL_RETRYABLE_FAILURE","MANUAL_RETRYABLE_FAILURE","MISSING_FILE","RETRYING","AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE"]),l=e;i.default=l}),66);
__d("MAWMpsMigrationStatus",["ExecutionEnvironment","FBLogger","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(){return r("justknobx")._("5255")?!0:c==null?(r("FBLogger")("wmi").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsMigrationStatus is not initialised, main thread: ",""])),(u||(u=r("ExecutionEnvironment"))).isInMainThread),!1):c}function m(e){r("FBLogger")("wmi").DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsMigrationStatus is ",""])),e),c=e}l.isMigrated=d,l.setStatus=m}),98);
__d("MAWMpsGating",["MAWMpsMigrationStatus","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("10465")}function s(){return r("gkx")("19024")}function u(){return o("MAWMpsMigrationStatus").isMigrated()&&(e()||r("gkx")("17181"))}function c(){return e()||r("gkx")("17846")}function d(){return r("gkx")("17946")}function m(){return u()&&r("gkx")("19368")}function p(){return u()&&r("gkx")("19318")}l.isFullMpsEnabled=e,l.isMpsSpamReports=s,l.isMpsMessageRendering=u,l.isMpsSnippetsCacheServiceEnabled=c,l.isEBMessageProbeEnabled=d,l.isFileGalleryEBTaggingEnabled=m,l.isMediaGalleryEnabled=p}),98);
__d("MAWSharedProtocolQueueConst",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});i.OfflineConsumerStatus=e}),66);
__d("MAWOfflineQueueStatus",["FBLogger","MAWSharedProtocolQueueConst"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=!1;function u(t,n){e.set(t,n),e.size>5e3&&r("FBLogger")("wmi_eb").warn("Offline queue status map size (%s) is too large",e.size)}function c(t){return e.get(t)}function d(){e=new Map,s=!1}function m(){return s}function p(){s=!0}function _(e,t){var n=Object.keys(e);n.map(function(e){u(e,t)})}function f(e){return c(e)===o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}function g(){return Array.from(e.entries()).filter(function(e){var t=e[0],n=e[1];return n!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete&&n!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed}).map(function(e){var t=e[0];return t})}l.setOfflineQueueStatus=u,l.getOfflineQueueStatus=c,l.resetOfflineQueueState=d,l.isOfflineQueueComplete=m,l.markOfflineQueueComplete=p,l.markThreadWithOfflineQueueStatus=_,l.isOfflineQueueDoneForThread=f,l.getAllThreadsWithOfflineQueueIncomplete=g}),98);
__d("MAWParseXMAFBConfig",["FBLogger","MAWIsFbProfileDirectoryItemXmaEnabled","WAArmadilloXMA.pb","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set([(e=o("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH]);function u(e){var t=e.fbTargetType,n=e.silentExposure;if(t!=null&&s.has(t))return!0;var a=n!=null?n:!1;switch(t){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return a?r("gkx")("9338"):r("gkx")("9339");case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return o("MAWIsFbProfileDirectoryItemXmaEnabled").isFbProfileDirectoryItemXmaEnabled();default:return r("FBLogger")("maw_db").mustfix("MAWParseXMAFBConfig encountered an unknown unsupported XMA type: %s",String(t)),!1}}l.FB_FULLY_SUPPORTED_TARGET_TYPES=s,l.isFBSupportedTargetType=u}),98);
__d("MAWSubscribeToContactNames",["fbt","$InternalEnum","Env","MAWLocalizationType","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=n("$InternalEnum").Mirrored(["FIRST_NAME","FULL_NAME"]),c=[o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP],d=(e||(e=r("Env"))).isMessengerDotComOnComet?"Messenger":r("gkx")("22979")?"Instagram":"Facebook";function m(){return s._(/*BTDS*/"Usu\u00e1rio do {Platform Name}",[s._param("Platform Name",d)]).toString()}function p(e,t){var n;return(n=e.get(t))!=null?n:m()}function _(e){return c.includes(e)?u.FULL_NAME:u.FIRST_NAME}l.ContactNameMode=u,l.getUnknownUser=m,l.getContactNameFromLookup=p,l.getContactNameModeFromLocalizationType=_}),226);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("I64"))).of_float(t*1e3)}function u(e){var t=Number(e);return t<=o("WATimeUtils").MAX_INT&&t!==-1e3&&t!==0}function c(t){return u(t)?(Number(t)!==-1&&r("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(t)),s(t)):(e||(e=o("I64"))).of_float(t)}function d(e,t){var n=Date.now(),r=n-t*24*60*60*1e3,a=o("WATimeUtils").castMilliSecondsToUnixTime(r);return e>=a}function m(e){if(e!=null)return u(e)?(Number(e)!==-1&&r("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(e)),o("WATimeUtils").castToMillisTime(e*1e3)):e}var p=(e||(e=o("I64"))).of_string("9999999999999"),_=Number.MAX_VALUE;l.toTimestamp=s,l.millisTimeToTimestamp=c,l.isTimestampNewerThanXDays=d,l.ensureValidMillisTime=m,l.MAX_TIMESTAMP_MS=p,l.MAX_TIMESTAMP=_,l.MIN_TIMESTAMP_MS=e.zero}),98);
__d("MAWUICacheServicesBase",["FBLogger","MAWCacheServiceDB","MAWCacheServiceQPL","MAWMpsGating","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=["id"],s;function u(e){return o("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()?e+"_mps_reactive":e}var c=(function(){function t(e){this.$1=new Map,this.QPLMetadata=new Map,this.$2=e}var a=t.prototype;return a.resetInMemoryCache=function(t,n){var e=this.$1.get(t);e!=null&&(r("FBLogger")("MAWUICacheServices").info("Reset in memory cache. Namespace: %s",t),n.forEach(function(t){e.delete(t)}))},a.updateInMemoryCacheAndTriggerCallback=function(t,n,o,a,i){this.$3(t,n);var e=this.$2[t];e!=null&&(a!=null&&(r("MAWCacheServiceQPL").addPointQPL(a,"triggering_callback",o),(o==="cache-invalidation"||o==="realtime-update"||o==="from-scratch"&&this.QPLMetadata.get(a)==="all-from-scratch"||o==="in-memory"&&i===!0)&&(r("MAWCacheServiceQPL").endSuccessQPL(a),this.QPLMetadata.delete(a))),e.onCacheChange(n,o))},a.checkInMemoryCacheAndTriggerCallback=function(t,n,o){var e=this,a=[],i=[];n.forEach(function(n){var r=e.$4(t,n);r==null?a.push(n):i.push([n,r])});var l=a.length===0;return l&&o!=null&&r("MAWCacheServiceQPL").addPointQPL(o,"all_in_memory"),i.length>0&&this.updateInMemoryCacheAndTriggerCallback(t,i,"in-memory",o,l),a},a.checkPersistedCacheAndTriggerCallback=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i){var l=yield o("MAWCacheServiceDB").getOrSetupMAWCacheDB(),c=yield l.runInTransaction([t],"readonly",function(e){return(s||(s=n("Promise"))).all(a.map(function(n){return e.stores[t].getByIndex("key",[u(n)])}))},"read_from_persisted_"+t),d=[],m=[];return c.forEach(function(t,n){if(t==null)d.push(a[n]);else{var r=t.id,o=babelHelpers.objectWithoutPropertiesLoose(t,e);m.push([a[n],o])}}),i!=null&&r("MAWCacheServiceQPL").addAnnotationsQPL(i,{int:{numPersistedHit:m.length,numPersistedMiss:d.length}}),d.length===0&&i!=null&&r("MAWCacheServiceQPL").addPointQPL(i,"all_in_persisted"),m.length>0&&this.updateInMemoryCacheAndTriggerCallback(t,m,"persisted",i),d});function a(e,n,r){return t.apply(this,arguments)}return a})(),a.$3=function(t,n){var e,r=(e=this.$1.get(t))!=null?e:new Map;n.forEach(function(e){var t=e[0],n=e[1];r.set(t,n)}),this.$1.set(t,r)},a.$4=function(t,n){var e=this.$1.get(t);if(e==null)return null;var r;return(r=e.get(n))!=null?r:null},t})();l.adjustCacheKey=u,l.MAWUICacheServicesBase=c}),98);
__d("UFICommentFileInputAcceptValuesJSModuleWrapper",["UFICommentFileInputAcceptValues"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("UFICommentFileInputAcceptValues")}),98);
__d("WADbContact",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3;i.NON_CONTACT=e,i.ONE_WAY_CONTACT=l,i.REVERSED_ONE_WAY_CONTACT=s,i.TWO_WAY_CONTACT=u}),66);
__d("WAHashUtils",["WABase64"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function s(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function u(e){return e}function c(e){return e}function d(e){return""+e.slice(0,3)}l.toPlaintextHash=e,l.toCiphertextHash=s,l.stringToPlaintextHash=u,l.toHashedPlaintextHash=c,l.sanitisePlaintextHash=d}),98);
__d("WAIsOgg",[],(function(t,n,r,o,a,i){"use strict";function e(e){return!(e.length<4||e[0]!==79||e[1]!==103||e[2]!==103||e[3]!==83)}i.isOgg=e}),66);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"}),l=1,s=e.LOW,u=10*1e3;i.JOB_PRIORITY=e,i.DEFAULT_CONCURRENCY=l,i.DEFAULT_JOB_PRIORITY=s,i.DEFAULT_JOB_TIMEOUT_MS=u}),66);
__d("WAOpusRecorderWorkerClient",["WAWebOpusRecorderWorkerResource","WorkerBundleResource"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=o("WorkerBundleResource").createDedicatedWebWorker(r("WAWebOpusRecorderWorkerResource")),this.$1.onmessage=e!=null?e:null}var t=e.prototype;return t.getWorker=function(){return this.$1},t.postMessage=function(t,n){var e={type:"message",message:t};this.$1.postMessage(e,n)},t.addEventListener=function(t,n){this.$1.addEventListener(t,n)},t.removeEventListener=function(t,n){this.$1.addEventListener(t,n)},e})();function s(){return new e}function u(t){return new e(t)}l.WAOpusRecorderWorkerClient=e,l.getOpusEncoderWorker=s,l.getOpusDecoderWorker=u}),98);
__d("WAOpusRecorderPlayer",["Promise","WABinary","WABlobToArrayBuffer","WALogger","WAOpusRecorderWorkerClient"],(function(t,n,r,o,a,i,l){var e,s,u,c,d="audio/wav",m,p=0;function _(){return p++,m||(m=new window.AudioContext),m}function f(){if(p--,p===0&&m){try{m.close().catch(function(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close async error: ",""])),t).devConsole(t)})}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close sync error: ",""])),e).devConsole(e)}m=void 0}}var g=(function(){function e(e){this.oggBlob=e}var t=e.prototype;return t.generateBlob=function(){return this.oggBlobToWAVBlob(this.oggBlob,1)},t.oggBlobToWAVBlob=function(t,r){var e=this;r===void 0&&(r=2);var a=r;return new(c||(c=n("Promise")))(function(n){var r=function(r){if(r.data==null){for(var t=function(t){l.forEach(function(e){for(var n=e[t]||e[0],r=0;r<n.length;r++)s.push(n[r])})},o=0;o<a;o++)t(o);var i=e.encodeWAV(s,c,a),u=new Blob([i.readByteArrayView()],{type:d});f(),n(u)}else l.push(r.data),a=l[0].length},i=o("WAOpusRecorderWorkerClient").getOpusDecoderWorker(r),l=[],s=[],c=_(),m={outputBufferSampleRate:c.sampleRate,bufferLength:4096};i.postMessage({command:"decode-init",config:m}),o("WABlobToArrayBuffer").blobToArrayBuffer(t).then(function(e){i.postMessage({command:"decode",pages:new Uint8Array(e)}),i.postMessage({command:"decode-done"})}).catch(function(e){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Player::oggBlobToWAVBlob error: ",""])),e).devConsole(e)})})},t.encodeWAV=function(t,n,r){var e=new(o("WABinary")).Binary(void 0,!0);e.ensureCapacity(44+t.length*2),e.writeString("RIFF"),e.writeUint32(36+t.length*2),e.writeString("WAVE"),e.writeString("fmt "),e.writeUint32(16),e.writeUint16(1),e.writeUint16(r),e.writeUint32(n.sampleRate),e.writeUint32(n.sampleRate*r*2),e.writeUint16(r*2),e.writeUint16(16),e.writeString("data"),e.writeUint32(t.length*2);for(var a=0;a<t.length;a++){var i=Math.max(-1,Math.min(t[a],1));i*=i>0?32767:32768,e.writeInt16(Math.floor(i))}return e},e})();l.default=g}),98);
__d("WAMaybeTranscodeOggOpusToWavForPlayback",["FBLogger","WABlobToArrayBuffer","WAIsOgg","WAOpusRecorderPlayer","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=function(){return r("FBLogger")("wmi").tags(["audio"])},m=r("justknobx")._("4988"),p=new Audio().canPlayType("audio/ogg"),_=p==="probably"||p==="maybe";function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){if(_)return d().DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback supported no need to transcode"]))),t;if(d().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback is not supported. Start transcoding"]))),t.size>m)return d().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["blob size too large"]))),t;var n=yield o("WABlobToArrayBuffer").blobToArrayBuffer(t);if(!o("WAIsOgg").isOgg(new Uint8Array(n)))return d().DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["blob is not Ogg, skip transcode"]))),t;var a=new(r("WAOpusRecorderPlayer"))(t);return a.generateBlob()}),g.apply(this,arguments)}l.isOggPlaybackSupported=_,l.maybeTranscodeOggOpusToWavForPlayback=f}),98);
__d("WAMediaQplHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e==null||e<0||e>1e3*1024*1024?"invalid_size":e===0?"size equal to 0KB":e<=1*1024?"size lower than 1 KB":e<=50*1024?"size between 1 KB and 50 KB":e<=100*1024?"size between 50 KB and 100 KB":e<=500*1024?"size between 100 KB and 500 KB":e<=1*1024*1024?"size between 500 KB and 1 MB":e<=2*1024*1024?"size between 1 MB and 2 MB":e<=5*1024*1024?"size between 2 MB and 5 MB":e<=10*1024*1024?"size between 5 MB and 10 MB":e<=20*1024*1024?"size between 10 MB and 20 MB":e<=25*1024*1024?"size between 20 MB and 25 MB":e<=30*1024*1024?"size between 25 MB and 30 MB":e<=50*1024*1024?"size between 30 MB and 50 MB":e<=75*1024*1024?"size between 50 MB and 75 MB":e<=100*1024*1024?"size between 75 MB and 100 MB":"size above 100 MB"}i.convertIntegerSizeToStringBucket=e}),66);
__d("WorkerSchedulerError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,"Task execution exceeds timeout "+t+":"+n)||this,r.name="WorkerSchedulerTimeoutError",r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.WorkerSchedulerTimeoutError=e}),66);
__d("WorkerSchedulerPriority",[],(function(t,n,r,o,a,i){"use strict";var e=2,l=1,s=0;i.BACKGROUND_PRIORITY=e,i.REGULAR_PRIORITY=l,i.BLOCKING_PRIORITY=s}),66);
__d("WorkerScheduler",["$InternalEnum","Promise","QPLFlow","QuickPerformanceLogger","WAGetSafeQPLError","WAResolvable","WAShiftTimer","WATagsLogger","WATimeUtils","WorkerSchedulerError","WorkerSchedulerPriority","err","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v=o("WATagsLogger").TAGS(["WorkerScheduler"]),S=0,R=100,L=3e4,E=10,k=6e4,I=n("$InternalEnum")({CREATED:0,SCHEDULED:1,RUNNING:2,COMPLETED:3,CANCELLED:-3,FAILED:-2,STUCK:-1}),T=(function(){function t(e,t){var n;this.$3=!1,this.$4=new Map,this.$5=new Map,this.$6=new Map,this.$7=[new Set,new Set,new Set],this.$8=[new(n=o("WAResolvable")).Resolvable,new n.Resolvable,new n.Resolvable],this.$9=new n.Resolvable,this.$1=e,this.config=t,this.$2=v.TAGS([e])}var a=t.prototype;return a.waitUntilEndReached=function(){return this.$9.promise},a.waitUntilBlockingEnded=function(){return this.$8[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].promise},a.waitUntilRegularEnded=function(){return this.$8[o("WorkerSchedulerPriority").REGULAR_PRIORITY].promise},a.waitUntilBackgroundEnded=function(){return this.$8[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].promise},a.getDebugState=function(){var e=this,t=Date.now();return{activeTasks:Array.from(this.$6.entries()).map(function(n){var r=n[0],o=n[1],a=e.$5.get(r);return!a||a.startTime==null?null:{executionTimeMs:t-a.startTime,priority:o,task:a.name,waitTimeMs:t-a.scheduledTime}}).filter(Boolean),pendingTasksByPriority:this.$7.map(function(n){var r=[];return n.forEach(function(n){var o=e.$5.get(n);o&&r.push({task:o.name,waitTimeMs:t-o.scheduledTime})}),r})}},a.$10=function(){if(this.$6.size<this.config.maxTaskLimit){var e=this.pendingTasksTick({increaseCounter:!1,lowestTier:this.$3?o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:o("WorkerSchedulerPriority").BLOCKING_PRIORITY,tasksToPick:1,tickDelta:0}),t=e.candidates,n=x.getHighestActivePriority();t.length>0&&this.maybeStartTask(t[0].id,n)}},a.runTask=function(t){return this.task(t).run()},a.task=function(t){var e,n=this.$1+":"+t.name+":"+S++,r=(e=t.priority)!=null?e:o("WorkerSchedulerPriority").REGULAR_PRIORITY,a=this.$11(n,{annotations:t.annotations,customFlags:t.customFlags,eventSamplingRate:t.eventSamplingRate,fn:t.fn,name:t.name,priority:r});return this.$4.set(n,a),a.publicApi},a.$12=function(t){var e=this.$4.get(t);return e==null?(b||(b=n("Promise"))).reject(r("err")("Cannot run task from Scheduler:"+this.$1+" Task was already cancelled")):(e.publicApi.status=I.SCHEDULED,this.$5.set(t,e),this.$7[e.priority].add(t),this.$13(e.priority),e.metric.addPoint("schedule_start"),x.scheduleTimerIfNeeded(),this.$10(),e.resolvable.promise)},a.$11=function(n,r){var t,a,i,l=this,s=new(o("WAResolvable")).Resolvable,u=o("QPLFlow").startQplFlowWithCoinflip($,r.eventSamplingRate!=null?r.eventSamplingRate:this.config.defaultSamplingRate,{annotations:{bool:babelHelpers.extends({},(t=r.annotations)==null?void 0:t.bool,r.customFlags),int:babelHelpers.extends({},(a=r.annotations)==null?void 0:a.int,{originalPriority:r.priority}),string:babelHelpers.extends({},(i=r.annotations)==null?void 0:i.string,{name:r.name,scheduler:this.$1,workerID:self!=null&&"worker_id"in self?self.worker_id:void 0})}}),c={fn:r.fn,id:n,loggingParams:{},maxTickDelta:0,metric:u,name:r.name,priority:r.priority,publicApi:{cancel:function(){return c.publicApi.status!==I.CREATED&&c.publicApi.status!==I.SCHEDULED?!1:(l.$14(n,I.CANCELLED),l.$4.delete(n))},id:n,name:r.name,promise:s.promise,promote:function(n){return l.$2.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Promoting "," from "," to ",""])),c.id,c.priority,n),(c.publicApi.status===I.CREATED||c.publicApi.status===I.SCHEDULED)&&c.priority>n?(l.$15(c,n),!0):!1},run:function(){return l.$12(n)},status:I.CREATED},resolvable:s,scheduledTime:Date.now(),startTime:null,tickCounter:0,waitCounter:0};return c},a.$14=function(t,n){var e=this.$5.get(t),r=e==null?void 0:e.publicApi.status;if(!(e==null||r===I.COMPLETED||r===I.FAILED||r===I.STUCK)){this.$5.delete(t),this.$6.delete(t),e.publicApi.status=n;var a=[this.$7[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").REGULAR_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].size===0];this.$6.forEach(function(e){a[e]=!1}),a[o("WorkerSchedulerPriority").BLOCKING_PRIORITY]&&a[o("WorkerSchedulerPriority").REGULAR_PRIORITY]&&a[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY]&&this.$9.resolve();for(var i=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;i<=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY;i++)a[i]&&this.$8[i].resolve()}},a.maybeStartTask=function(t,n){var e=this.$5.get(t);if(e==null){this.$2.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Task without corresponding record: Task: ",", Scheduler: ",""])),t,this.$1);return}if(n==null||this.$3===!0)return this.$16(e);if(!(n<e.priority))return this.$16(e)},a.$16=function(t){var e=this;this.$7[t.priority].delete(t.id),this.$6.set(t.id,t.priority),this.$2.TAGS([t.name]).LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Started: ",""])),t.id),t.startTime=Date.now(),t.publicApi.status=I.RUNNING,t.metric.addPoint("schedule_end",{int:{priorityTier:t.priority,waitTicks:t.waitCounter}}),t.metric.addPoint("run_start",{int:{startPriority:t.priority}});var r;try{r=t.fn({metric:t.metric})}catch(e){r=(b||(b=n("Promise"))).reject(e)}this.config.warnTaskLimit!=null&&this.$6.size>=this.config.warnTaskLimit&&this.$6.entries().forEach(function(t){var n=t[0],r=t[1],o=e.$5.get(n);o!=null&&o.metric.addAnnotations({bool:{exceedsWarnLimit:!0}})}),r.then(function(n){t.resolvable.resolve(n),e.$2.TAGS([t.name]).LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Completed: ",""])),t.id),t.metric.addPoint("run_end",{int:{executionTicks:t.tickCounter}}),e.$14(t.id,I.COMPLETED),t.metric.endSuccess({int:{maxTickDeltaMs:t.maxTickDelta}}),e.$10()}).catch(function(n){t.resolvable.reject(n),e.$2.TAGS([t.name]).WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed: ",""])),t.id),t.metric.addPoint("run_fail"),e.$2.TAGS([t.name]).ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Debug params: "," failed: ",""])),t.loggingParams,n),e.$14(t.id,I.FAILED),t.metric.endFail("runtime",{int:{maxTickDeltaMs:t.maxTickDelta},string:{jsError:o("WAGetSafeQPLError").getSafeQPLErrorMessage(n)}}),e.$10()})},a.$13=function(t){for(var e=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;e<=t;e++)this.$8[e].resolveWasCalled()&&(this.$8[e]=new(o("WAResolvable")).Resolvable);this.$9.resolveWasCalled()&&(this.$9=new(o("WAResolvable")).Resolvable)},a.getHighestActivePriority=function(){var e=this,t=null;return this.$6.forEach(function(n,r){var o=e.$5.get(r);if(o==null){v.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),r,e.$1),e.$6.delete(r);return}(t==null||t>o.priority)&&(t=o.priority)}),t},a.activeTasksTick=function(t){var e=this,n=null;return this.$6.forEach(function(r,a){var i=e.$5.get(a);if(i==null){v.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),a,e.$1),e.$6.delete(a);return}i.tickCounter++,i.maxTickDelta=Math.max(t,i.maxTickDelta),(n==null||n>i.priority)&&(n=i.priority),i.tickCounter>e.config.ticksToTimeout&&i.publicApi.status===I.RUNNING&&(v.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Possibly stuck: ",""])),i.name),e.$14(i.id,I.STUCK),e.config.shouldContinueAfterTimeout||i.resolvable.reject(new(o("WorkerSchedulerError")).WorkerSchedulerTimeoutError(e.$1,i.id)),i.metric.endCancel(113,{int:{maxTickDeltaMs:i.maxTickDelta}}))}),n},a.$15=function(t,n){function e(){switch(r){case o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:return o("WorkerSchedulerPriority").REGULAR_PRIORITY;case o("WorkerSchedulerPriority").REGULAR_PRIORITY:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY;default:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY}}var r=t.priority,a=n!=null?n:e();a!==r&&(t.metric.addPoint("promote_to_"+a),this.$7[r].delete(t.id),t.priority=a,this.$7[a].add(t.id))},a.pendingTasksTick=function(t){for(var e=this,n=t.increaseCounter,r=t.lowestTier,a=t.tasksToPick,i=t.tickDelta,l=[],s=!0,u=function(r){s&&(s=e.$7[r].size===0),e.$7[r].forEach(function(t){var s=e.$5.get(t);if(s==null){v.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Pending task without corresponding record: Task: ",", Scheduler: ",""])),t,e.$1),e.$7[r].delete(t);return}n&&(s.waitCounter++,s.maxTickDelta=Math.max(i,s.maxTickDelta),s.priority>o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=e.config.throttleTicks&&e.$15(s),s.priority===o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=x.maxWaitTicksMultiplierForFinalPromotion*e.config.throttleTicks&&(v.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Promoting task ",":"," to blocking priority"])),e.$1,s.name),e.$15(s))),!(l.length>=a)&&(e.$6.size+l.length>=e.config.maxTaskLimit||l.push(s))})},c=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;c<=r;c++)u(c);return{candidates:l.map(function(e){return{id:e.id,priority:e.priority}}),isEmpty:s}},a.TEST_ONLY_ignore_delays=function(){this.$3=!0},t})(),D=(function(){function e(){var e=this;this.$1=new Map,this.tickFrequencyMs=R,this.maxThrottleMs=k,this.maxWaitTicksMultiplierForFinalPromotion=E,this.$2=null,this.$3=new(o("WAShiftTimer")).ShiftTimer(function(){var t=!1;try{var n,r=o("WATimeUtils").performanceAbsoluteNow();t=e.$4(r-((n=e.$2)!=null?n:r))}catch(e){v.ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Scheduler fatal: ",""])),e)}finally{t===!1?(e.$2=o("WATimeUtils").performanceAbsoluteNow(),e.$3.onOrBefore(e.tickFrequencyMs)):e.$2=null}}),this.$5=new Map}var t=e.prototype;return t.getHighestActivePriority=function(){var e=null;return this.$5.forEach(function(t){var n=t.getHighestActivePriority();e!=null&&n!=null&&e<n&&(e=n),e==null&&n!=null&&(e=n)}),e},t.$4=function(t){var e,n=!0,r=null;this.$5.forEach(function(e){var n=e.activeTasksTick(t);r!=null&&n!=null&&r<n&&(r=n),r==null&&n!=null&&(r=n)});var a=[[],[],[]];this.$5.forEach(function(e){var r=e.pendingTasksTick({increaseCounter:!0,lowestTier:o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,tasksToPick:e.config.concurrency,tickDelta:t}),i=r.candidates,l=r.isEmpty;n&&(n=l),i.forEach(function(t){a[t.priority].push({id:t.id,scheduler:e})})});var i=(e=a.find(function(e){return e.length>0}))!=null?e:[];for(var l of i){var s=l.id,u=l.scheduler;u.maybeStartTask(s,r)}return n},t.scheduleTimerIfNeeded=function(){this.$3.onOrBefore(this.tickFrequencyMs)},t.newScheduler=function(t,n){var e=this.$5.get(t);return e||(e=new T(t,n),this.$5.set(t,e),e)},t.TEST_ONLY_reset=function(){this.$5=new Map,this.$1=new Map},e})(),x=new D,$=r("qpl")._(1056838280,"1566");function P(e,t){var n,r,o,a,i;return x.newScheduler(e,{concurrency:(n=t.concurrency)!=null?n:1,defaultSamplingRate:(r=t.defaultSamplingRate)!=null?r:1e4,maxTaskLimit:t.maxTaskLimit,shouldContinueAfterTimeout:(o=t.shouldContinueAfterTimeout)!=null?o:!1,throttleTicks:Math.round(((a=t.maxThrottleMs)!=null?a:x.maxThrottleMs)/x.tickFrequencyMs),ticksToTimeout:Math.round(((i=t.timeoutMs)!=null?i:L)/x.tickFrequencyMs),warnTaskLimit:t.warnTaskLimit})}function N(e){e.tickFrequencyMs!=null&&(x.tickFrequencyMs=e.tickFrequencyMs),e.maxThrottleMs!=null&&(x.maxThrottleMs=e.maxThrottleMs),e.maxWaitTicksMultiplierForFinalPromotion!=null&&(x.maxWaitTicksMultiplierForFinalPromotion=e.maxWaitTicksMultiplierForFinalPromotion),e.qplEventType!=null&&($=e.qplEventType),(C||(C=r("QuickPerformanceLogger"))).setAlwaysOnSampleRate($,1)}function M(){x.TEST_ONLY_reset()}l.BACKGROUND_PRIORITY=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,l.BLOCKING_PRIORITY=o("WorkerSchedulerPriority").BLOCKING_PRIORITY,l.REGULAR_PRIORITY=o("WorkerSchedulerPriority").REGULAR_PRIORITY,l.SchedulerExecutionState=I,l.makeScheduler=P,l.configWorkerScheduler=N,l.TEST_ONLY_reset=M}),98);
__d("WormMemoryDriver",["Promise","WAResolvable","WormStoreFunctions","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=0;function u(){return s+=1,s}function c(){s=0}var d=(function(){function t(t){this.$2={},this.$3=(e||(e=n("Promise"))).resolve(),this.$1=t;for(var r of Object.keys(t))this.$2[r]=new Map}var r=t.prototype;return r.getSchema=function(){return this.$1},r.getDbAlias=function(){},r.runInTransaction=function(t,r,a,i){var e=this,l=new(o("WAResolvable")).Resolvable;return this.$3=this.$3.then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n={};for(var o of Object.keys(e.$1))n[o]=new Map(e.$2[o]);var i=t.reduce(function(t,r){var o;return babelHelpers.extends({},t,(o={},o[r]=new m(n[r],e.$1[r]),o))},{}),s={abort:function(){},commit:function(){return l.promise.then(function(){})},stores:i},u=yield a(s);r==="readwrite"&&(e.$2=n),l.resolve(u)})).catch(function(e){l.reject(e)}),l.promise},r.close=function(){},r.init=function(r){return(e||(e=n("Promise"))).resolve({isNewDb:!0,isUpgraded:!1})},t})(),m=(function(){function t(t,o){var a=this;this.readIndexRange=function(t,o,i){var l=a.$2.indexes;if(l==null)throw r("err")("No indexes found");var s=l[t];if(s==null)throw r("err")("Index not found");var u=Array.from(a.$1.values());if(o!=null){var c,d,m,p;u=_(u,(c=(d=o.lessThan)!=null?d:o.lessThanOrEqual)!=null?c:o.only,o.lessThanOrEqual!=null||o.only!=null,(m=(p=o.greaterThan)!=null?p:o.greaterThanOrEqual)!=null?m:o.only,o.greaterThanOrEqual!=null||o.only!=null,s)}return(e||(e=n("Promise"))).resolve(a.$4(u,i,t))},this.$1=t,this.$2=o}var a=t.prototype;return a.bulkAdd=function(o){var t=this;for(var a of o){if(this.$2.autoIncrement===!0&&a[this.$2.primaryKey]===void 0&&(a[this.$2.primaryKey]=u()),this.$1.has(a[this.$2.primaryKey]))throw r("err")("Item with key already exists");this.$3(a),this.$1.set(a[this.$2.primaryKey],a)}return(e||(e=n("Promise"))).resolve(o.map(function(e){return e[t.$2.primaryKey]}))},a.bulkPut=function(r){for(var t of r)this.$3(t),this.$1.set(t[this.$2.primaryKey],t);return(e||(e=n("Promise"))).resolve()},a.$3=function(t){var e=this,n=this.$2.indexes;if(n!=null){for(var o of Object.values(n))if(!(typeof o!="object"||o==null)){var a=o.fields,i=o.unique;if(i!==!1){var l=a.map(function(e){return t[e]}).join(":"),s=function(o){if(o[e.$2.primaryKey]===t[e.$2.primaryKey])return 1;var n=a.map(function(e){return o[e]}).join(":");if(l===n)throw r("err")("ConstraintError")};for(var u of this.$1.values())s(u)}}}},a.bulkGet=function(r){var t=this;return(e||(e=n("Promise"))).resolve(r.map(function(e){return t.$1.get(e)}))},a.get=function(r){return(e||(e=n("Promise"))).resolve(this.$1.get(r))},a.getByIndex=function(t,n,r){return o("WormStoreFunctions").getByIndex(this,t,n,r)},a.readByKeyRange=function(r,o){var t,a,i=p(Array.from(this.$1.values()),(t=r.lessThan)!=null?t:r.lessThanOrEqual,r.lessThanOrEqual!=null,(a=r.greaterThan)!=null?a:r.greaterThanOrEqual,r.greaterThanOrEqual!=null,this.$2.primaryKey);return(e||(e=n("Promise"))).resolve(this.$4(i,o))},a.bulkDelete=function(r){for(var t of r)this.$1.delete(t);return(e||(e=n("Promise"))).resolve()},a.delete=function(r){return this.$1.delete(r),(e||(e=n("Promise"))).resolve()},a.bulkUpsert=function(t,n){return o("WormStoreFunctions").bulkUpsert(this,this.$2,t,n)},a.readKeysByIndexRange=function(t,n,r){var e=this;return this.readIndexRange(t,n,r).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},a.getIndexRangeIterator=function(t,n,r,a){return o("WormStoreFunctions").getIndexRangeIterator(this.readIndexRange,this.$2,t,n,r,a)},a.$4=function(t,n,r){var e=t;return(n==null?void 0:n.filter)!=null&&(e=e.filter(n.filter)),(n==null?void 0:n.order)!=null&&r!=null&&(e=e.sort(function(e,t){var o=e[r],a=t[r];return o===a?0:n.order==="desc"?a>o?1:-1:o>a?1:-1})),(n==null?void 0:n.limit)!=null&&(e=e.slice(0,n.limit)),e},a.readIndex=function(o,a,i){var t=this.$2.indexes;if(t==null)throw r("err")("No indexes found");var l=t[o];if(l==null)throw r("err")("Index not found");var s=Array.from(this.$1.values());return a!=null&&(s=s.filter(function(e){for(var t=0;t<l.fields.length;t++)if(e[l.fields[t]]!==a[t])return!1;return!0})),(e||(e=n("Promise"))).resolve(this.$4(s,i,o))},a.readIndexAnyOf=function(o,a,i){var t=this.$2.indexes;if(t==null)throw r("err")("No indexes found");var l=t[o];if(l==null)throw r("err")("Index not found");if(a.length===0)return(e||(e=n("Promise"))).resolve([]);var s=Array.from(this.$1.values());return s=s.filter(function(e){return a.some(function(t){for(var n=0;n<l.fields.length;n++)if(t[n]!==void 0&&e[l.fields[n]]!==t[n])return!1;return!0})}),(e||(e=n("Promise"))).resolve(this.$4(s,i,o))},a.readIndexKeys=function(t,n,r){var e=this;return this.readIndex(t,n,r).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},a.readAll=function(r){var t=this,o=Array.from(this.$1.values());return(r==null?void 0:r.filter)!=null&&(o=o.filter(r.filter)),(r==null?void 0:r.order)!=null&&(o=o.sort(function(e,n){var o=e[t.$2.primaryKey],a=n[t.$2.primaryKey];return o===a?0:r.order==="desc"?a>o?1:-1:o>a?1:-1})),(r==null?void 0:r.limit)!=null&&(o=o.slice(0,r.limit)),(e||(e=n("Promise"))).resolve(o)},a.readKeys=function(t){var e=this;return this.readAll(t).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},a.clear=function(){return this.$1.clear(),(e||(e=n("Promise"))).resolve()},a.count=function(){return(e||(e=n("Promise"))).resolve(this.$1.size)},t})();function p(e,t,n,r,o,a){return e.filter(function(e){return!(r!=null&&r>e[a]||t!=null&&t<e[a]||t!=null&&n===!1&&e[a]===t||r!=null&&o===!1&&e[a]===r)})}function _(e,t,n,r,o,a){return e.filter(function(e){for(var i=0;i<a.fields.length;i++)if(r!=null&&r[i]>e[a.fields[i]]||t!=null&&t[i]<e[a.fields[i]]||i===a.fields.length-1&&(t!=null&&n===!1&&e[a.fields[i]]===t[i]||r!=null&&o===!1&&e[a.fields[i]]===r[i]))return!1;return!0})}l.TEST_ONLY_resetPK=c,l.WormMemoryDriver=d,l.WormMemoryStore=m}),98);
__d("isGroupInvitesEnabled",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("125")===!0}l.default=e}),98);/*FB_PKG_DELIM*/
__d("ArmadilloDataTraceCheckPoint",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("63"),u=e.of_string("65"),c=e.of_string("98"),d=e.of_string("504"),m=e.of_string("1000"),p=e.of_string("1001"),_=e.of_string("1204"),f=e.of_string("1210"),g=e.of_string("1224"),h=e.of_string("1234"),y=e.of_string("1225"),C=e.of_string("2220");l.traceGroupMessage=s,l.armadilloActMessageSend=u,l.traceCreated=c,l.richMediaMediaSendAttachmentType=d,l.traceTextMessage=m,l.traceMediaMessage=p,l.advancedCryptoMEMSendTaskComplete=_,l.deliveryReceiptReceived=f,l.advancedCryptoMEMEncryptionDeviceCount=g,l.advancedCryptoGroupDualSend=h,l.advancedCryptoDualSend=y,l.armadilloTlcControlOpenThread=C}),98);
__d("LSAddMessengerContact",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("contact_id",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"add_messenger_contact",t.i64.cast([0,308]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSContactAddMessengerContactStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSAddMessengerContactStoredProcedure",["LSAddMessengerContact","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSAddMessengerContact"),a.contactId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSDeleteThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),void 0],n[0]=o[0],n[1]=o[1],o):(r=l.item,a=[r.parentThreadKey,r.disappearingThreadKey],n[0]=a[0],n[1]=a[1])})},function(e){return t.count(t.db.table(9).fetch([[[n[0]]],"parentThreadKeyLastActivityTimestampMs"])).then(function(e){return n[3]=e})},function(r){return e[1]&&t.i64.neq(n[0],t.i64.cast([0,0]))&&t.i64.eq(n[3],t.i64.cast([0,1]))?t.sequence([function(r){return t.forEach(t.db.table(9).fetch([[[e[0]],[n[0]]]]),function(e){return e.delete()})},function(e){return t.i64.neq(n[1],void 0),0}]):t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){return e.delete()})},function(e){return t.i64.neq(n[1],void 0),0}])}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSGetThreadDataFromTam.nop",["I64","LSMessagingThreadTypeUtil","LSResult","LSShape","LSVec","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){var i=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.threads).filter(function(e){var t=e.threadType;return o("LSMessagingThreadTypeUtil").isArmadilloSecure(t)}).take((e||(e=o("I64"))).to_int32(a))),l=i.map(function(t,n){var r=t.lastActivityTimestampMs,a=t.lastReadWatermarkTimestampMs,i=t.threadKey,l=t.threadType;return o("LSShape").ofRecord({client_thread_pk:i,display_timestamp_ms:r,is_group_thread:o("LSMessagingThreadTypeUtil").isGroup(l),last_activity_timestamp_ms:r,last_read_watermark_timestamp_ms:a,server_thread_key:i,sort_order:(e||(e=o("I64"))).of_int32(n)})});return r("LSResult")(r("LSVec").ofArray(l))});function a(e,n,r){return t.apply(this,arguments)}return a})();s.__nop_name__="LSGetThreadDataFromTam",l.default=s}),98);
__d("LSGroupPollEventType",[],(function(t,n,r,o,a,i){var e=Object.freeze({QUESTION_CREATION:1,ADD_OPTION:2,ADD_UNVOTED_OPTION:3,UPDATE_VOTE:4,MULTIPLE_UPDATES:5,QUESTION_CLOSED:6,QUESTION_BUMPED:7,QUESTION_DELETION_SUCCESS:8,QUESTION_DELETION_FAILURE:9});i.default=e}),66);
__d("LSInstagramE2EEEligibility",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:-1,INELIGIBLE:0,ELIGIBLE:1,REQUIRED:2,DUAL_SEND_ELIGIBLE:3,GROUPS_ELIGIBLE:4});i.default=e}),66);
__d("LSIssueNewErrorStoredProcedure",["LSIssueNewError","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueNewError"),a.taskId,a.errorCode,a.errorTitleText,a.errorBodyText,a.errorExtraData,a.presentationStyle);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSMessageSearchType",[],(function(t,n,r,o,a,i){var e=Object.freeze({THREAD:1,MESSAGE:2});i.default=e}),66);
__d("LSMessageUnsendabilityStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({CAN_UNSEND:0,DENY_LOG_MESSAGE:1,DENY_TOMBSTONE_MESSAGE:2,DENY_FOR_NON_SENDER:3,DENY_P2P_PAYMENT:4,DENY_STORY_REACTION:5,DENY_BLOB_ATTACHMENT:6,DENY_MESSAGE_NOT_FOUND:7,DENY_MESSAGE_INSTAGRAM_DIRECT_WRITE_RESTRICTION:8});i.default=e}),66);
__d("LSMoveThreadToArchivedFolder",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){var n=e.update,r=e.item;return n({folderName:"",parentThreadKey:t.i64.cast([-1,4294967286]),capabilities2:t.i64.or_(r.capabilities2,t.i64.cast([0,2]))})}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxMoveThreadToArchivedFolderStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticAcceptMessageRequest",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(n){return r[1]=a.threadSubtype,t.i64.eq(r[1],t.i64.cast([0,75]))?r[0]="interop":r[0]="inbox",t.i64.eq(r[1],t.i64.cast([0,75]))?r[2]=t.i64.cast([-1,4294967277]):r[2]=t.i64.cast([0,0]),t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(n){var o=n.update,i=n.item;return o({folderName:r[0],parentThreadKey:r[2],igFolder:e[1],capabilities:t.i64.and_(a.capabilities,t.i64.cast([-1,4292870143]))})})},function(n){return t.db.table(173).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?0:(n=a.item,r[7]=n.clientThreadPk,t.db.table(276).fetch([[[r[7]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?0:(n=a.item,t.i64.eq(r[2],t.i64.cast([-1,4294967277]))?r[8]=t.i64.cast([0,19]):r[8]=t.i64.cast([0,0]),t.forEach(t.db.table(276).fetch([[[r[7]]]]),function(e){var t=e.update,n=e.item;return t({folderType:r[8]})}))}))})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[3]=t.i64.cast([0,1]):(n=a.item,r[8]=n.syncGroup,t.i64.neq(r[8],void 0)?r[7]=r[8]:r[7]=t.i64.cast([0,1]),r[3]=r[7])})},function(o){return r[5]=new t.Map,r[5].set("thread_key",e[0]),r[5].set("sync_group",r[3]),r[5].set("ig_folder",e[1]),r[6]=t.toJSON(r[5]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"message_request",t.i64.cast([0,66]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticAcceptMessageRequestStoredProcedure",e.__tables__=["threads","mi_act_mapping_table","client_threads"],a.exports=e}),null);
__d("LSOptimisticAcceptMessageRequestStoredProcedure",["LSOptimisticAcceptMessageRequest","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticAcceptMessageRequest"),a.threadKey,a.igFolder);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticRemoveThread",["LSDeleteThread","LSIssueNewTaskAndGetTaskID","LSMoveThreadToArchivedFolder"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[4]=n.syncGroup,t.i64.neq(r[4],void 0)?r[3]=r[4]:r[3]=t.i64.cast([0,1]),r[0]=r[3])})},function(r){return[t.i64.cast([0,1]),t.i64.cast([0,2])].some(function(n){return t.i64.eq(e[1],n)})?t.storedProcedure(n("LSMoveThreadToArchivedFolder"),e[0]):t.storedProcedure(n("LSDeleteThread"),e[0],!1)},function(o){return t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),t.i64.to_string(e[0]),t.i64.cast([0,146]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),r[0],void 0,t.i64.cast([0,0]),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.db.table(32).add({taskId:r[2],threadKey:e[0],removeType:e[1],syncGroup:r[0]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticRemoveThreadStoredProcedure",e.__tables__=["threads","threads_optimistic_context"],a.exports=e}),null);
__d("LSOptimisticRemoveThreadStoredProcedure",["LSOptimisticRemoveThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticRemoveThread"),a.threadKey,a.removeType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSPollQuestionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CHOOSE_MULTIPLE:0,MOST_LIKELY_TO:1,NON_POLL:2});i.default=e}),66);
__d("LSScheduleOccamThreadsIntegrityChecker",["LSGetCursor","LSGetThreadDataFromTam.nop","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.storedProcedure(n("LSGetCursor"),t.i64.cast([0,95])).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return r[1]=t.createArray(),r[2]=t.createArray(),t.i64.neq(e[1],void 0)?r[3]=e[1]:r[3]=t.i64.cast([0,20]),t.forEach(t.db.table(220).fetch([[[t.i64.cast([0,95]),t.i64.cast([0,0])]]]),function(e){var n=e.item;return r[10]=n.minLastActivityTimestampMs,r[9]=new t.Map,r[9].set("has_more_before",n.hasMoreBefore),r[9].set("is_loading_before",n.isLoadingBefore),r[9].set("min_last_activity_timestamp_ms",r[10]),r[9].set("min_thread_key",n.minThreadKey),r[9].set("parent_thread_key",t.i64.cast([0,0])),r[11]=(r[2].push(r[9]),r[2]),t.forEach(t.islc(t.filter(t.db.table(9).fetch([[[{gte:r[10]}]],"lastActivityTimestampMs"]),function(e){return t.i64.ge(e.lastActivityTimestampMs,r[10])&&t.i64.eq(e.syncGroup,t.i64.cast([0,95]))&&t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(r[3])),function(e){var n=e.item;return r[11]=new t.Map,r[11].set("authority_level",n.authorityLevel),r[11].set("folder_name",n.folderName),r[11].set("last_activity_timestamp_ms",n.lastActivityTimestampMs),r[11].set("last_read_watermark_timestamp_ms",n.lastReadWatermarkTimestampMs),r[11].set("thread_key",n.threadKey),r[12]=(r[1].push(r[11]),r[1])})})},function(e){return r[4]=t.createArray(),t.nativeOperation(n("LSGetThreadDataFromTam.nop"),r[3]).then(function(e){var t;return t=e,r[5]=t[0],t})},function(e){return r[6]=t.createArray(),r[7]=new t.Map,r[7].set("cursor",r[0]),r[7].set("mi_act_mapping_columns_for_integrity_check",r[6]),r[7].set("occam_threads_columns_for_integrity_check",r[1]),r[7].set("threads_ranges_columns_for_integrity_check",r[2]),r[7].set("tam_threads_columns_for_integrity_check",r[5]),r[8]=t.toJSON(r[7]),t.storedProcedure(n("LSIssueNewTask"),"occam-threads-integrity-check",t.i64.cast([0,701]),r[8],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxScheduleOccamThreadsIntegrityCheckerStoredProcedure",e.__tables__=["sync_group_threads_ranges","threads"],a.exports=e}),null);
__d("LSSearchRequestStatusType",[],(function(t,n,r,o,a,i){var e=Object.freeze({PENDING:1,COMPLETE:2,FAILED:3});i.default=e}),66);
__d("LSThreadRemoveType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DELETE_THREAD:0,ARCHIVE_THREAD:1,IGNORE_THREAD:2});i.default=e}),66);
__d("LSTransportKey",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADVANCED_CRYPTO:"AdvancedCrypto",CARRIER_MESSAGING:"CarrierMessaging",FB_BROKER:"FBBroker",FB_LEGACY_BROKER:"FBLegacyBroker",TAM:"TAM",WHATS_APP:"WhatsApp",INSTAMADILLO:"Instamadillo",ENCRYPTED_BACKUPS:"EncryptedBackups",CLIENT_CONTACTS_PLACEHOLDER:"",ENCRYPTED_BACKUPS_MEDIA:"EncryptedBackupsMedia"});i.default=e}),66);
__d("MAWAbPropsClient",["WAAbPropsToUI"],(function(t,n,r,o,a,i,l){"use strict";var e={contents:o("WAAbPropsToUI").prepareAbPropsForUI()};function s(t){e.contents=t}function u(){return e.contents}l.rewrite=s,l.getAbProps=u}),98);
__d("MAWLocalizationEphemeralSettingSetAdminMsg",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET}l.isEphemeralSettingSetAdminMsg=e}),98);
__d("MAWAdminMsgCTA",["fbt","I64","MAWAdminMsgTypesGrouped","MAWLocalizationEphemeralSettingSetAdminMsg","MAWLocalizationType","MAWMsgType","MAWTimeUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=new Set([(c=o("MAWLocalizationType")).LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL,c.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE,c.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE,c.LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE,c.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE,c.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION,c.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION]),m=new Set([c.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,c.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME,c.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,c.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME]),p=s._(/*BTDS*/"Alterar").toString(),_=s._(/*BTDS*/"Ver tudo").toString(),f=s._(/*BTDS*/"Saiba mais").toString(),g=s._(/*BTDS*/"Saiba mais").toString(),h=s._(/*BTDS*/"tomar algumas medidas.").toString(),y=s._(/*BTDS*/"Ir para outra conversa").toString(),C=s._(/*BTDS*/"Ver conversa arquivada").toString(),b=s._(/*BTDS*/"Ver enquete").toString(),v=s._(/*BTDS*/"Alterar").toString();function S(e){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("ReQL").firstAsync(o("ReQL").fromTableDescending(e.admin_message_ctas.index("ctaId")));return t!=null?(u||(u=o("I64"))).add(t.ctaId,(u||(u=o("I64"))).one):(u||(u=o("I64"))).zero}),R.apply(this,arguments)}function L(e,t,n){var r=[t,n];return o("ReQL").firstAsync(o("ReQL").fromTableDescending(e.admin_message_ctas).bounds({gte:r,lte:r}))}function E(e,t,n){if(e==null)return{showAdChoiceIcon:!1};if(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:p};if(d.has(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:t,targetTitle:n,title:b};if(m.has(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:v};switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:f};case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:y};case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:C};case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:_};case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return{actionUrl:"https://www.messenger.com/help/1145318292241859/?helpref=uk_lm",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:h};case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return{actionUrl:"https://www.facebook.com/help/messenger-app/2016594885417423?ref=ipl",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:g};default:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0}}}function k(e){if(e!=null){if(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(e))return"admin_msg_armadillo_ephemeral_change_duration";if(d.has(e))return"admin_msg_poll_details";if(m.has(e))return"admin_msg_change_theme";switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:return"admin_msg_thread_level_cutover";case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return"admin_msg_e2ee_thread";case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return"admin_msg_e2ee_uk_osa";case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return"admin_msg_cutover_rollback";case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return"admin_msg_dual_thread_cutover";case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return"admin_msg_view_pin_msgs_v2";case o("MAWLocalizationType").LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE:return"admin_msg_icdc";case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return"admin_msg_change_thread_limit_sharing_permission"}}}function I(e,t,n,r,o){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a){yield e.admin_message_ctas.add({actionContentBlob:a.actionContentBlob,actionUrl:a.actionUrl,adClientToken:a.adClientToken,adHelpUrl:a.adHelpUrl,adminMessageNicknameParticipantId:a.adminMessageNicknameParticipantId,adPreferenceUrl:a.adPreferenceUrl,ctaId:t,messageId:r.msgId,showAdChoiceIcon:a.showAdChoiceIcon,targetId:a.targetId,targetTitle:a.targetTitle,threadKey:n,timestampMs:o("MAWTimeUtils").toTimestamp(r.ts),title:a.title})}),T.apply(this,arguments)}function D(e,t,n){return x.apply(this,arguments)}function x(){return x=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,o){var a=yield(e||(e=n("Promise"))).all([L(t,r,o.msgId),S(t)]),i=a[0],l=a[1];if(i!=null)return{ctaId:i.ctaId,ctaType:k(o.adminType),title:i.title};var s=P(o.adminType,o),u=N(o.adminType,o),c=E(o.adminType,s,u);return yield I(t,l,r,o,c),{ctaId:l,ctaType:k(o.adminType),title:c.title}}),x.apply(this,arguments)}function $(t,r,a){var i=a.adminType;return i!=null&&(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(i)||i===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||i===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE||i===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||i===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE||i===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||i===o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE||i===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE||i===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE||i===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE||i===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE||i===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED||i===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED||i===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED||i===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED||i!=null&&d.has(i)||i!=null&&m.has(i)||o("MAWAdminMsgTypesGrouped").dualThreadCutoverAdminMsgs.includes(i))?D(t,r,a):(e||(e=n("Promise"))).resolve()}function P(e,t){if(e!=null){if(t.type_===o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE)return(u||(u=o("I64"))).of_string(t.externalId);if(d.has(e)&&t.pollStanzaId!=null)return(u||(u=o("I64"))).of_string(t.pollStanzaId)}}function N(e,t){if(e!=null&&d.has(e))return t.adminContent==null||t.adminContent.length===0?void 0:t.adminContent[t.adminContent.length-1]}l.getAdminMsgCTAContentByAdminType=E,l.getCtaTypeByAdminType=k,l.getAdminMsgCtaStep=$}),226);
__d("MAWBridgeBuildAdminMsg",["MAWAdminMsg","MAWAdminMsgNormalized","MAWSubscribeToContactNames","MAWThreadCustomizationUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==null?void 0:e.replace(/\$/g,"$$$$")}function s(t,n,r){r===void 0&&(r=0);var a=o("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(n,t),i=a.contactIds,l=a.contents,s=o("MAWThreadCustomizationUtils").nicknameOnlyForFirstParticipantChecking(n),u=o("MAWThreadCustomizationUtils").skipNicknameCheck(n);if(r===1){var c=o("MAWSubscribeToContactNames").getContactNameModeFromLocalizationType(n);return o("MAWAdminMsg").buildLocalizedString(l.map(e),i.map(function(e,t){return s&&t>0||u?c===o("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$CONTACT_FIRST_NAME("+e+")":"$CONTACT_FULL_NAME("+e+")":c===o("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$PARTICIPANT_FIRST_NAME("+e+")":"$PARTICIPANT_FULL_NAME("+e+")"}),n)}return o("MAWAdminMsg").buildLocalizedString(l,i,n)}l.buildAdminMsgText=s}),98);
__d("MAWBridgeMsgUtils",["LSTransportKey"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=Object.keys(r("LSTransportKey")).find(function(t){return r("LSTransportKey")[t]===e});return t?r("LSTransportKey")[t]:"WhatsApp"}l.convertStringToLSTransportKeyType=e}),98);
__d("MAWReplyBuilder_Forward",["LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l){"use strict";var e,s={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){},buildReplyType:function(t){},buildReplyUserId:function(t){}};l.MAWReplyBuilder_Forward=s}),98);
__d("MAWReplyBuilder_HighlightsTabPostReply",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return""},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"Voc\u00ea respondeu \u00e0 publica\u00e7\u00e3o dessa pessoa").toString():s._(/*BTDS*/"{name} respondeu ao seu post",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.replyToUserId!=null?(u||(u=o("I64"))).of_string(t.replyToUserId):void 0}};l.MAWReplyBuilder_HighlightsTabPostReply=c}),226);
__d("MAWReplyBuilder_LightweightStatus",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(n){return n.replyMediaExpirationTimestampMs!=null?(e||(e=o("I64"))).of_float(n.replyMediaExpirationTimestampMs):void 0},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return t.noteContent},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"Voc\u00ea respondeu \u00e0 nota dessa pessoa").toString():s._(/*BTDS*/"{name} respondeu \u00e0 sua nota",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS)},buildReplySourceTypeV2:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){},buildReplyType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(n){return n.replyToUserId!=null?(e||(e=o("I64"))).of_string(n.replyToUserId):void 0}};l.MAWReplyBuilder_LightweightStatus=c}),226);
__d("MAWBumpMessageMsgReplySnippet",["getMAWLocalizedBumpMsgReplySnippet"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.isAuthorMe,n=e.recipientName,o=e.replySenderIsMe,a=e.replySenderIsRecipient,i=e.senderName,l="participantBumpedParticipantMessage";return t&&o?l="currentUserBumpedOwnMessage":t?l="currentUserBumpedMessage":o?l="participantBumpedCurrentUserMessage":a&&(l="participantBumpedOwnMessage"),r("getMAWLocalizedBumpMsgReplySnippet")(l,i,n)}l.buildBumpMessageReplySnippet=e}),98);
__d("MAWReplyBuilder_Message",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWImageUtils","MAWMpsGating","MessagingAttachmentType","getErrorSafe"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){return d(t)},buildReplyAttachmentPlaintextHash:function(t){return p(t)},buildReplyAttachmentType:function(t){return y(t)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){return _(t)},buildReplyMediaPreviewWidth:function(t){return f(t)},buildReplyMessageText:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.text},buildReplySnippet:function(t,n,r){return C(t,n,r)},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplyStatus:function(t){return b(t)},buildReplyTimestampMs:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.timestampMs},buildReplyType:function(n){return n.isBumpMsg?(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP):(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.senderId}};function d(t){var n=t.replyToLSAttachment;if(n!=null&&(n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)||n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)&&n.receiverFetchId!=null)){var a=n.attachmentFbid;try{return(u||(u=o("I64"))).of_string(a)}catch(e){var i=r("getErrorSafe")(e);r("FBLogger")("messenger_e2ee_web").mustfix("[MAWMsgReply] getReplyAttachmentIdFromReplyContent: Error converting attachmentFbid, %s, to a big int for msg, %s. Attachment of type, %s, is likely using plaintexthash as id, please review types requiring attachment id: %s",a,n.messageId,(u||(u=o("I64"))).to_string(n.attachmentType),i.message)}}}var m=new Set([(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER),e.ofNumber(r("MessagingAttachmentType").IMAGE),e.ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE),e.ofNumber(r("MessagingAttachmentType").VIDEO),e.ofNumber(r("MessagingAttachmentType").AUDIO),e.ofNumber(r("MessagingAttachmentType").FILE)]);function p(e){var t=e.replyToLSAttachment;if(t!=null&&m.has(t.attachmentType))return t.attachmentFbid}function _(t){var n=t.replyToLSAttachment;if(n!=null)return n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)?g(t).replyHeight:n.previewHeight}function f(t){var n=t.replyToLSAttachment;if(n!=null)return n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)?g(t).replyWidth:n.previewWidth}function g(e){var t,n=(t=e.replyToLSAttachment)!=null?t:{},r=n.previewHeight,a=n.previewWidth;if(r==null||a==null)return{replyHeight:void 0,replyWidth:void 0};var i=o("MAWImageUtils").boundHeightWidth((u||(u=o("I64"))).to_int32(r),u.to_int32(a),96*.8),l=i.height,s=i.width;return{replyHeight:u.of_int32(l),replyWidth:u.of_int32(s)}}function h(e){var t,n=(t=e.replyToLSMessage)==null?void 0:t.text;return n!=null&&n!==""}function y(t){var n=t.replyToLSAttachment;if(n!=null)switch(n.attachmentType){case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA):return h(t)?void 0:(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").XMA);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}function C(e,t,n){var r=e.replyToLSMessage;if(!(r==null&&!o("MAWMpsGating").isMpsMessageRendering())){var a=t===n,i="$PARTICIPANT_FIRST_NAME("+t+")";if(r==null||r.isUnsent===!0)return a?s._(/*BTDS*/"Voc\u00ea respondeu a uma mensagem removida").toString():s._(/*BTDS*/"{name} respondeu a uma mensagem removida",[s._param("name",i)]).toString();var l=r.senderId,c=(u||(u=o("I64"))).to_string(l)===n,d=t===u.to_string(l),m="$PARTICIPANT_FIRST_NAME("+u.to_string(l)+")";if(e.isBumpMsg){var p=o("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:a,recipientName:m,replySenderIsMe:c,replySenderIsRecipient:d,senderName:i});return p==null?void 0:p.toString()}return a&&c?s._(/*BTDS*/"Voc\u00ea respondeu \u00e0 sua pr\u00f3pria mensagem").toString():d?s._(/*BTDS*/"{other} respondeu a si mesmo(a)",[s._param("other",i)]).toString():a?s._(/*BTDS*/"Voc\u00ea respondeu a {other_name}",[s._param("other_name",m)]).toString():c?s._(/*BTDS*/"{other_name} respondeu a voc\u00ea",[s._param("other_name",i)]).toString():s._(/*BTDS*/"{other} respondeu a {other_name}",[s._param("other",i),s._param("other_name",m)]).toString()}}function b(t){var n=t.replyToLSMessage;if(n==null)return o("MAWMpsGating").isMpsMessageRendering()?(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED):void 0;var a=t.replyToLSAttachment;if(n.isUnsent===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED);if(n.isExpired===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").EXPIRED);if(n.isAdminMessage===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID);switch(n.displayedContentTypes){case(e||(e=o("LSIntEnum"))).ofNumber(256):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED);case(e||(e=o("LSIntEnum"))).ofNumber(1):case(e||(e=o("LSIntEnum"))).ofNumber(4):case(e||(e=o("LSIntEnum"))).ofNumber(32):case(e||(e=o("LSIntEnum"))).ofNumber(64):case(e||(e=o("LSIntEnum"))).ofNumber(1024):case(e||(e=o("LSIntEnum"))).ofNumber(536870912):case(e||(e=o("LSIntEnum"))).ofNumber(4096):case(e||(e=o("LSIntEnum"))).ofNumber(16384):case(e||(e=o("LSIntEnum"))).ofNumber(134217728):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID);case(e||(e=o("LSIntEnum"))).ofNumber(2):{if(a!=null)switch(a.attachmentType){case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID)}return}case(e||(e=o("LSIntEnum"))).ofNumber(65536):case(e||(e=o("LSIntEnum"))).ofNumber(131072):case(e||(e=o("LSIntEnum"))).ofNumber(262144):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE);case(e||(e=o("LSIntEnum"))).ofNumber(32768):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").UNKNOWN);default:return}}l.MAWReplyBuilder_Message=c}),226);
__d("MAWReplyBuilder_PostMention",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWPostMentionXMASnippetFbt"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return""},buildReplySnippet:function(t,n,a){var e=t.mentionedUserId;if(e==null){r("FBLogger")("messenger_e2ee_web").mustfix("Error building reply snippet without recipient ID");return}var i="$PARTICIPANT_FIRST_NAME("+e+")",l=n===a,s=l?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(i):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(i);return s.toString()},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_POST_MENTION)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(s||(s=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.mentionedUserId!=null?(s||(s=o("I64"))).of_string(t.mentionedUserId):void 0}};l.MAWReplyBuilder_PostMention=u}),98);
__d("MAWReplyBuilder_ProducerStoryReply",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWMsgType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(n){return n.storyMediaId!=null?(e||(e=o("I64"))).of_float(n.storyMediaId):void 0},buildReplyAttachmentPlaintextHash:function(t){var e;return(e=t.storyMediaPlaintextHash)!=null?e:void 0},buildReplyAttachmentType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"Voc\u00ea respondeu ao seu story").toString():s._(/*BTDS*/"{name} respondeu ao story",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.storyUrl},buildReplySourceType:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplySourceTypeV2:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY)},buildReplyStatus:function(t){return t.storyMsgType===o("MAWMsgType").MSG_TYPE.IMAGE?(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID):void 0},buildReplyTimestampMs:function(n){return n.timestampMs!=null?(e||(e=o("I64"))).of_float(n.timestampMs):void 0},buildReplyType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(n){return(e||(e=o("I64"))).of_string(n.storyOwnerId)}};l.MAWReplyBuilder_ProducerStoryReply=c}),226);
__d("MAWReplyBuilder_Story",["fbt","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){var e;return(e=t.storyMediaPlaintextHash)!=null?e:void 0},buildReplyAttachmentType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){var e=t.storyOwnerId===r,o=n===r,a="$PARTICIPANT_FIRST_NAME("+n+")",i="$PARTICIPANT_FIRST_NAME("+t.storyOwnerId+")";return e?o?s._(/*BTDS*/"Voc\u00ea respondeu ao seu story").toString():s._(/*BTDS*/"{name} respondeu ao seu story",[s._param("name",a)]).toString():o?s._(/*BTDS*/"Voc\u00ea respondeu ao story de {name}",[s._param("name",i)]).toString():void 0},buildReplySourceId:function(t){return t.storyUrl},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(t){},buildReplyUserId:function(t){return(u||(u=o("I64"))).of_string(t.storyOwnerId)}};l.MAWReplyBuilder_StoryReply=c}),226);
__d("MAWReplyBuilder_StoryMention",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,o){var e=t.mentionedUserId;if(e==null){r("FBLogger")("messenger_e2ee_web").mustfix("Error building reply snippet without recipient ID");return}var a="$PARTICIPANT_FIRST_NAME("+e+")",i=n===o;return i?s._(/*BTDS*/"Voc\u00ea mencionou {name} no seu story",[s._param("name",a)]).toString():s._(/*BTDS*/"Mencionou voc\u00ea no pr\u00f3prio story").toString()},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_MENTION)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.mentionedUserId!=null?(u||(u=o("I64"))).of_string(t.mentionedUserId):void 0}};l.MAWReplyBuilder_StoryMention=c}),226);
__d("MAWReplyBuilder",["MAWReplyBuilder_Forward","MAWReplyBuilder_HighlightsTabPostReply","MAWReplyBuilder_LightweightStatus","MAWReplyBuilder_Message","MAWReplyBuilder_PostMention","MAWReplyBuilder_ProducerStoryReply","MAWReplyBuilder_Story","MAWReplyBuilder_StoryMention"],(function(t,n,r,o,a,i,l){"use strict";var e={FB_POST_MENTION:o("MAWReplyBuilder_PostMention").MAWReplyBuilder_PostMention,FB_PRODUCER_STORY_REPLY:o("MAWReplyBuilder_ProducerStoryReply").MAWReplyBuilder_ProducerStoryReply,FB_STORY_MENTION:o("MAWReplyBuilder_StoryMention").MAWReplyBuilder_StoryMention,FORWARD:o("MAWReplyBuilder_Forward").MAWReplyBuilder_Forward,HIGHLIGHTS_TAB_POST_REPLY:o("MAWReplyBuilder_HighlightsTabPostReply").MAWReplyBuilder_HighlightsTabPostReply,LIGHTWEIGHT_STATUS:o("MAWReplyBuilder_LightweightStatus").MAWReplyBuilder_LightweightStatus,MESSAGE:o("MAWReplyBuilder_Message").MAWReplyBuilder_Message,STORY:o("MAWReplyBuilder_Story").MAWReplyBuilder_StoryReply};function s(t){return e[t]}function u(e){var t=s(e.replyType);return t.buildReplyUserId(e)}l.getReplyBuilder=s,l.getReplyUserIdNew=u}),98);
__d("MAWMsgReply",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","MAWMsg","MAWMsgType","MAWReplyBuilder","MsgrWebGating","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return e.replySourceId!=null}function c(e,t,n,a,i){o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&n!=null&&n!==(t!=null?t:"")&&r("FBLogger")("messenger_e2ee_web").warn("[MAWMsgReply][%s][%s] LS derived reply field generated does not match the legacy derived version for msg, %s. Expected: %s, Actual: %s",i,e,a,t,n)}function d(t){var n=m(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyUserId(r);return c("getReplyUserId",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function m(t){var n=t.replyToUserId;return n==null?void 0:(e||(e=o("I64"))).of_string(n)}function p(t){var n=_(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplySourceTypeV2();return c("getReplySourceTypeV2",n!=null?(e||(e=o("I64"))).to_string(n):void 0,(e||(e=o("I64"))).to_string(a),t.msgId,t.type_),a}}function _(e){var t=e.isFBPostMention,n=e.isFBStoryMention,a=e.isForwarded,i=e.isMsgHighlightsTabFriendUpdatesReply,l=e.isNoteReply,c=e.isStoryProducerReply,d=e.isStoryReply,m=e.isStoryShare,p=e.replyMediaExpirationTimestampMs,_=u(e);if(t===!0)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_POST_MENTION);if(a)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD);if(m!=null&&m)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(n!=null&&n)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_MENTION);if(i!=null&&i)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(p!=null&&p<o("WATimeUtils").unixTime()&&l!==!0)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").EXPIRED_STORY);if(_)return d!=null&&d?c!=null&&c?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY):l===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)}function f(t){var n=g(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplySourceType();return c("getReplySourceType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,(e||(e=o("I64"))).to_string(a),t.msgId,t.type_),a}}function g(e){var t=u(e),n=e.isMsgHighlightsTabFriendUpdatesReply,a=e.isNoteReply,i=e.isStoryReply,l=e.isStoryShare;if(l!=null&&l)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(n!=null&&n)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(t)return i!=null&&i?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY):a===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)}function h(e){var t=y(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplySourceId(n);return n.replyType!=="FB_STORY_MENTION"&&n.replyType!=="FB_POST_MENTION"&&c("getReplySourceId",t,r,e.msgId,e.type_),r}}function y(e){if(e.replySourceId!=null)return e.replySourceId}function C(t){var n=b(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyTimestampMs(r);return c("getReplyTimestampMs",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function b(t){if(t.replySourceTimestampMs!=null)return(e||(e=o("I64"))).of_float(t.replySourceTimestampMs)}function v(e){var t=S(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplyMessageText(n);return c("getReplyMessageText",t,r,e.msgId,e.type_),r}}function S(e){if(e.replySourceId!=null)return e.replyMessageText}function R(e){if(e.replySourceId!=null)return e.replyMentionedJids}function L(t){var n=E(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyType(r);return c("getReplyType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function E(e){return e.type_===o("MAWMsg").bumpExistingMessage?(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP):u(e)?(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR):void 0}function k(e){return e.replySourceId==null?!1:I(e.replyStatusType)}function I(e){switch(e){case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;default:return!1}}function T(e){return e.replyStatusType==="XMA"&&e.replyMessageText!=null}function D(t){var n=x(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaPreviewHeight(r);return c("getReplyMediaPreviewHeight",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function x(t){if(k(t))return t.replyMediaPreviewHeight!=null?(e||(e=o("I64"))).of_int32(t.replyMediaPreviewHeight):void 0}function $(t){var n=P(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaPreviewWidth(r);return c("getReplyMediaPreviewWidth",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function P(t){if(k(t))return t.replyMediaPreviewWidth!=null?(e||(e=o("I64"))).of_int32(t.replyMediaPreviewWidth):void 0}function N(t){var n=M(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyAttachmentType(r);return c("getReplyAttachmentType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function M(e){var t=e.replyStatusType;if(t!=null){var n=t==="Raven",a=k(e)||n;if(a)switch(t){case"Gif":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF);case"Ptt":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case"Sticker":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case"Video":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO);case"Image":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO);case"XMA":return e.isIGXMAPostShare===!0||e.isIGXMAStoryShare===!0||e.isStoryHighlightShare===!0||e.isPostPrivateReply===!0||e.isMsgHighlightsTabFriendUpdatesReply===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").FEED_POST):T(e)?void 0:(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").XMA);case"DocumentFile":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case"ReceiverFetch":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case"Raven":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}}function w(t){var n=A(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyAttachmentId(r);return c("getReplyAttachmentId",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function A(t){var n=t.replyMediaId,r=t.replyXMAId;if(k(t)&&n!=null)return r!=null?void 0:(e||(e=o("I64"))).of_float(n);if(!(n!=null||r==null)&&!(r!=null&&T(t)))return(e||(e=o("I64"))).of_int32(r)}function F(e){var t=O(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplyAttachmentPlaintextHash(n);return c("getReplyAttachmentPlaintextHash",t,r,e.msgId,e.type_),r}}function O(e){var t=e.replyPlaintextHash;if(k(e)&&t!=null)return""+t}function B(t){var n=W(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaExpirationTimestampMs(r);return c("getReplyMediaExpirationTimestampMs",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function W(t){var n=t.isNoteReply,r=t.isStoryReply,a=t.replyMediaExpirationTimestampMs,i=t.replyMessageText,l=t.replyStatusType;if(n===!0)return a!=null?(e||(e=o("I64"))).of_float(a):void 0;var s=N(t),u=w(t);if(l!=null&&l==="XMA"&&s==null){if(u!=null)return;if(i==null)return(e||(e=o("I64"))).zero}if(!(u!=null||!(r!=null&&r)))return(e||(e=o("I64"))).zero}l.assertIfQuotedV2=c,l.getReplyUserId=d,l.getReplySourceTypeV2=p,l.getReplySourceType=f,l.getReplySourceId=h,l.getReplyTimestampMs=C,l.getReplyMessageText=v,l.getReplyMentionedJids=R,l.getReplyType=L,l.getReplyMediaPreviewHeight=D,l.getReplyMediaPreviewWidth=$,l.getReplyAttachmentType=N,l.getReplyAttachmentTypeLegacy=M,l.getReplyAttachmentId=w,l.getReplyAttachmentPlaintextHash=F,l.getReplyMediaExpirationTimestampMs=B}),98);
__d("MAWMsgReplyStatus",["I64","LSIntEnum","LSReplyMessageStatus","MAWMsgReply","MAWMsgType","MAWReplyBuilder","MsgrWebGating"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch(e){case o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case o("MAWMsgType").MSG_TYPE.REVOKED:return r("LSReplyMessageStatus").DELETED;case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return r("LSReplyMessageStatus").VALID;case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:return r("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE;case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return r("LSReplyMessageStatus").UNKNOWN;case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return r("LSReplyMessageStatus").EXPIRED;default:return}}function c(t){var n=d(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyStatus(r);return o("MAWMsgReply").assertIfQuotedV2("getLSReplyMessageStatus",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function d(e){var t=u(e.replyStatusType);if(t!=null)return(s||(s=o("LSIntEnum"))).ofNumber(t)}l.getReplyMessageStatus=u,l.getLSReplyMessageStatus=c}),98);
__d("MAWMsgReplySnippet",["fbt","FBLogger","I64","LSIntEnum","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWCurrentUser","MAWMpsGating","MAWMsgReply","MAWMsgReplyStatus","MAWMsgType","MAWPostMentionXMASnippetFbt","MAWReplyBuilder","MsgrWebGating","ODS"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(t){var n=t.isAuthorMe,a=t.isBumpMsg,i=a===void 0?!1:a,l=t.isDeletedMsg,c=t.isFBPostMention,d=c===void 0?!1:c,m=t.isFBStoryMention,p=m===void 0?!1:m,_=t.isIGStoryMention,f=_===void 0?!1:_,g=t.isIGXMAStoryShare,h=g===void 0?!1:g,y=t.isMsgHighlightsTabFriendUpdatesReply,C=y===void 0?!1:y,b=t.isNoteReply,v=b===void 0?!1:b,S=t.isPostPrivateReply,R=S===void 0?!1:S,L=t.isStoryHighlightShare,E=L===void 0?!1:L,k=t.isStoryProducerReply,I=t.isStoryReaction,T=I===void 0?!1:I,D=t.isStoryReply,x=D===void 0?!1:D,$=t.isStoryShare,P=$===void 0?!1:$,N=t.recipientName,M=t.replyAttachmentType,w=t.replySenderIsMe,A=w===void 0?!1:w,F=t.replySenderIsRecipient,O=F===void 0?!1:F,B=t.senderName;switch(!0){case d:return n?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(N):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(B);case i:return o("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:n,recipientName:N,replySenderIsMe:A,replySenderIsRecipient:O,senderName:B});case E:return s._(/*BTDS*/"Sent a story highlight");case(h&&M!=null&&(e||(e=o("I64"))).equal(M,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").FEED_POST))):return s._(/*BTDS*/"Sent a story");case(n&&l):return s._(/*BTDS*/"Voc\u00ea respondeu a uma mensagem removida");case(n&&P):return s._(/*BTDS*/"Voc\u00ea compartilhou um story");case(n&&T):return s._(/*BTDS*/"You reacted to their story");case(n&&f):return N!=null?s._(/*BTDS*/"Voc\u00ea mencionou \u0040{name} no seu story",[s._param("name",N)]):s._(/*BTDS*/"Voc\u00ea mencionou um participante no seu story");case(n&&p):return N!=null?s._(/*BTDS*/"Voc\u00ea mencionou {name} no seu story",[s._param("name",N)]):s._(/*BTDS*/"Voc\u00ea mencionou um participante no seu story");case f:case p:return s._(/*BTDS*/"Mencionou voc\u00ea no pr\u00f3prio story");case(!n&&C):return s._(/*BTDS*/"{name} respondeu ao seu post",[s._param("name",B)]);case(n&&C):return s._(/*BTDS*/"Voc\u00ea respondeu \u00e0 publica\u00e7\u00e3o dessa pessoa");case(n&&R):return N!=null?s._(/*BTDS*/"Voc\u00ea respondeu ao post de {name}",[s._param("name",N)]):s._(/*BTDS*/"Voc\u00ea respondeu ao post de um participante");case R:return s._(/*BTDS*/"{name} respondeu ao seu post",[s._param("name",B)]);case(!n&&v):return s._(/*BTDS*/"{name} respondeu \u00e0 sua nota",[s._param("name",B)]);case(n&&v):return s._(/*BTDS*/"Voc\u00ea respondeu \u00e0 nota");case(n&&A):return s._(/*BTDS*/"Voc\u00ea respondeu \u00e0 sua pr\u00f3pria mensagem");case(n&&x):return k===!0?s._(/*BTDS*/"Voc\u00ea respondeu ao seu story"):N!=null?s._(/*BTDS*/"Voc\u00ea respondeu ao story de {name}",[s._param("name",N)]):s._(/*BTDS*/"Voc\u00ea respondeu ao story de um participante");case n:return N!=null?s._(/*BTDS*/"Voc\u00ea respondeu a {other_name}",[s._param("other_name",N)]):s._(/*BTDS*/"Voc\u00ea respondeu ao participante");case l:return s._(/*BTDS*/"{name} respondeu a uma mensagem removida",[s._param("name",B)]);case P:return s._(/*BTDS*/"{user} compartilhou um story",[s._param("user",B)]);case T:return s._(/*BTDS*/"Reacted to your story");case O:return s._(/*BTDS*/"{other} respondeu a si mesmo(a)",[s._param("other",B)]);case(A&&x):return k===!0?s._(/*BTDS*/"{name} respondeu ao story",[s._param("name",B)]):s._(/*BTDS*/"{name} respondeu ao seu story",[s._param("name",B)]);case A:return s._(/*BTDS*/"{other_name} respondeu a voc\u00ea",[s._param("other_name",B)]);default:return N!=null?s._(/*BTDS*/"{other} respondeu a {other_name}",[s._param("other",B),s._param("other_name",N)]):s._(/*BTDS*/"{other} respondeu ao participante",[s._param("other",B)])}}function m(t,n,r,a,i){if(a===void 0&&(a=!1),(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(25))){var l=t?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(r):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(i);return l==null?void 0:l.toString()}if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(22)))return t?r!=null?s._(/*BTDS*/"Voc\u00ea mencionou {name} no seu story",[s._param("name",r)]).toString():s._(/*BTDS*/"Voc\u00ea mencionou um participante no seu story").toString():s._(/*BTDS*/"Mencionou voc\u00ea no pr\u00f3prio story").toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(14)))return t?s._(/*BTDS*/"Voc\u00ea respondeu \u00e0 publica\u00e7\u00e3o dessa pessoa").toString():s._(/*BTDS*/"{name} respondeu ao seu post",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(13)))return t?r!=null?s._(/*BTDS*/"Voc\u00ea respondeu ao post de {name}",[s._param("name",r)]).toString():s._(/*BTDS*/"Voc\u00ea respondeu ao post de um participante").toString():s._(/*BTDS*/"{name} respondeu ao seu post",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(18)))return t?s._(/*BTDS*/"Voc\u00ea respondeu \u00e0 nota").toString():s._(/*BTDS*/"{name} respondeu \u00e0 sua nota",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(24))){var c=(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(24));if(t)return c?s._(/*BTDS*/"Voc\u00ea respondeu ao seu story").toString():r!=null?s._(/*BTDS*/"Voc\u00ea respondeu ao story de {name}",[s._param("name",r)]).toString():s._(/*BTDS*/"Voc\u00ea respondeu ao story de um participante").toString();if(a)return c?s._(/*BTDS*/"{name} respondeu ao story",[s._param("name",i)]).toString():s._(/*BTDS*/"{name} respondeu ao seu story",[s._param("name",i)]).toString()}if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(12)))return t?s._(/*BTDS*/"You reacted to their story").toString():s._(/*BTDS*/"Reacted to your story").toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(4)))return t?s._(/*BTDS*/"Voc\u00ea compartilhou um story").toString():s._(/*BTDS*/"{user} compartilhou um story",[s._param("user",i)]).toString()}function p(t,n,a,i){var l=t.senderId,s=(e||(e=o("I64"))).to_string(t.senderId)===a,u=n===a;if(l==null||n==null)throw r("FBLogger")("messenger_e2ee_web").mustfix("Error getting reply snippet without replyToUserId or / and replying message sender");var c="$PARTICIPANT_FIRST_NAME("+e.to_string(l)+")",d="$PARTICIPANT_FIRST_NAME("+n+")",p=m(u,i,c,s,d);return p==null?void 0:p.toString()}function _(e){var t=f(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent,r=e.sender;if(n!=null){var a=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplySnippet(n,r,o("MAWCurrentUser").getID());return o("MAWMsgReply").assertIfQuotedV2("getReplySnippet",t,a,e.msgId,e.type_),a}}function f(e){var t;if(!o("MAWMpsGating").isMpsMessageRendering()){var n=e.isAuthorMe,a=e.isFBPostMention,i=a===void 0?!1:a,l=e.isFBStoryMention,s=l===void 0?!1:l,u=e.isIGStoryMention,m=u===void 0?!1:u,p=e.isIGXMAStoryShare,_=e.isMsgHighlightsTabFriendUpdatesReply,f=_===void 0?!1:_,g=e.isNoteReply,h=g===void 0?!1:g,y=e.isPostPrivateReply,C=y===void 0?!1:y,b=e.isStoryHighlightShare,v=b===void 0?!1:b,S=e.isStoryProducerReply,R=e.isStoryReaction,L=e.isStoryReply,E=e.isStoryShare,k=E===void 0?!1:E,I=e.replySenderIsMe,T=e.replySourceId,D=e.replyStatusType,x=e.replyToUserId,$=e.sender,P=e.type_,N=P===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE;if(!(T==null&&!L&&!k&&!m&&!s&&!v&&!h&&!i)){if(x==null||$==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error getting reply snippet without replyToUserId or sender");return(c||(c=o("ODS"))).bumpEntityKey(3185,"armadillo_reply","creating_reply_snippet"),(t=d({isAuthorMe:n,isBumpMsg:N,isDeletedMsg:o("MAWMsgReplyStatus").getReplyMessageStatus(D)===r("LSReplyMessageStatus").DELETED,isFBPostMention:i,isFBStoryMention:s,isIGStoryMention:m,isIGXMAStoryShare:p,isMsgHighlightsTabFriendUpdatesReply:f,isNoteReply:h,isPostPrivateReply:C,isStoryHighlightShare:v,isStoryProducerReply:S,isStoryReaction:R,isStoryReply:L,isStoryShare:k,recipientName:"$PARTICIPANT_FIRST_NAME("+x+")",replySenderIsMe:I,replySenderIsRecipient:$===x,senderName:"$PARTICIPANT_FIRST_NAME("+$+")"}))==null?void 0:t.toString()}}}l.buildLocalizedReplySnippetLegacy=d,l.getReplySnippetFromLSMessage=p,l.getReplySnippet=_}),226);
__d("MAWBridgeBuildMsg",["fbt","I64","LSAuthorityLevel","LSIntEnum","LSMessageUnsendabilityStatus","MAWAckLevel","MAWBridgeBuildAdminMsg","MAWBridgeBuildMsgMentions","MAWBridgeMsg","MAWBridgeMsgUtils","MAWJids","MAWMsg","MAWMsgReply","MAWMsgReplySnippet","MAWMsgReplyStatus","MAWMsgType","MAWTimeUtils","MAWVault","MWPBumpEntityKey","isMWBumpMessage"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).reduce(function(e,t){return[].concat(e,t)},[])}function d(e){return e!=null?o("MAWVault").unvault(e):void 0}function m(e){return e!=null?o("MAWVault").vault(e):void 0}function p(e){return babelHelpers.extends({},e,{replyMessageText:m(e.replyMessageText),text:m(e.text)})}function _(e){var t=o("MAWMsgReply").getReplyMessageText(e),n=e.adminContent,r=e.adminType,a=e.adminVersion,i=e.content,l=e.isAdminMessage,u=i;l&&n!=null&&r!=null&&(u=o("MAWBridgeBuildAdminMsg").buildAdminMsgText(n,r,a));var _=o("MAWMsgReplySnippet").getReplySnippet(e);e.type_===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE&&(u=m(e.replySourceId==null?"":_!=null?_:s._(/*BTDS*/"Subiu uma mensagem").toString()));var f=c(e.mentionedJids,o("MAWMsgReply").getReplyMentionedJids(e)),g=e.commands?e.commands:[];return f.length>0||g.length>0?p(o("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(d(u),f,d(t),g.length>0?g:void 0)):{replyMessageText:t,text:u}}function f(t){var n=t.ephemeralDurationInSec;return n!=null?(e||(e=o("I64"))).of_int32(n):void 0}function g(e,t,n,a){var i,l=r("isMWBumpMessage")(t==null?void 0:t.replyType)?t==null?void 0:t.replyMessageText:t==null?void 0:t.text,s=c(n,t==null||(i=t.mentionIds)==null?void 0:i.split(",").map(o("MAWJids").toUserJid)),u=a!=null?a:[];return s.length>0||u.length>0?p(o("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(d(e),s,d(l),u)):{replyMessageText:l,text:e}}function h(t,n){var a,i,l,s,c=_(t),d=t.type_===o("MAWMsg").unsent,m=o("MAWTimeUtils").toTimestamp(d&&(a=t.originalTs)!=null?a:t.ts);if(o("MAWMsgReply").getReplyAttachmentId(t)!=null&&o("MAWMsgReply").getReplyAttachmentPlaintextHash(t)==null){var p;o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","new_message_handler_for_reply_type_"+(e||(e=o("I64"))).to_float((p=o("MAWMsgReply").getReplyAttachmentType(t))!=null?p:(e||(e=o("I64"))).zero))}var g=o("MAWBridgeMsgUtils").convertStringToLSTransportKeyType(t.transportKey);return babelHelpers.extends({},c,{adminMsgCtaId:n==null?void 0:n.ctaId,adminMsgCtaTitle:n==null?void 0:n.title,adminMsgCtaType:n==null?void 0:n.ctaType,authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),cannotUnsendReason:d||!t.isAuthorMe?(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageUnsendabilityStatus").DENY_FOR_NON_SENDER):void 0,collapsibleId:t.collapsibleId!=null?(e||(e=o("I64"))).of_float(t.collapsibleId):void 0,displayedContentTypes:o("MAWMsg").getDisplayedContentTypes(t.type_,t.isForwarded,t.isExpiredXmaMsg,t.replySourceId!=null,t.unsupportedType,t.xmaMessageType),editCount:(e||(e=o("I64"))).of_int32((i=t.editCount)!=null?i:0),ephemeralDurationInSec:f(t),groupId:(l=t.groupId)!=null?l:void 0,groupIndex:t.groupIndex!=null?(e||(e=o("I64"))).of_float(t.groupIndex):void 0,groupSize:t.groupSize!=null?(e||(e=o("I64"))).of_float(t.groupSize):void 0,hotEmojiSize:o("MAWBridgeMsg").getSpecialTextSize(t),isCollapsed:(s=t.isCollapsed)!=null?s:!1,isUnsent:d,messageId:t.msgId,primarySortKey:e.of_float(t.sortOrderMs),replyAttachmentId:o("MAWMsgReply").getReplyAttachmentId(t),replyAttachmentPlaintextHash:o("MAWMsgReply").getReplyAttachmentPlaintextHash(t),replyAttachmentType:o("MAWMsgReply").getReplyAttachmentType(t),replyMediaExpirationTimestampMs:o("MAWMsgReply").getReplyMediaExpirationTimestampMs(t),replyMediaPreviewHeight:o("MAWMsgReply").getReplyMediaPreviewHeight(t),replyMediaPreviewWidth:o("MAWMsgReply").getReplyMediaPreviewWidth(t),replySnippet:o("MAWMsgReplySnippet").getReplySnippet(t),replySourceId:o("MAWMsgReply").getReplySourceId(t),replySourceTimestampMs:o("MAWMsgReply").getReplyTimestampMs(t),replySourceType:o("MAWMsgReply").getReplySourceType(t),replySourceTypeV2:o("MAWMsgReply").getReplySourceTypeV2(t),replyStatus:o("MAWMsgReplyStatus").getLSReplyMessageStatus(t),replyToUserId:o("MAWMsgReply").getReplyUserId(t),replyType:o("MAWMsgReply").getReplyType(t),sendStatus:o("MAWAckLevel").levelToMessagingSendStatus(t.ack),sendStatusV2:o("MAWAckLevel").levelToMessagingSendStatusV2(t.ack),timestampMs:m,transportKey:g,unsentTimestampMs:d?o("MAWTimeUtils").toTimestamp(t.ts):void 0})}l.getEphemeralDurationInSec=f,l.buildOptimisticMessage=g,l.buildNewAndUpdatedMessageSharedParams=h}),226);
__d("MAWBridgeDeleteMessagesHandler",["EntMessageReplyType","FBLogger","I64","LSIntEnum","MAWCurrentUser","MAWDbMsg","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMpsGating","MAWReplyBuilder","MAWTimeUtils","MsgrWebGating","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeDeleteMessagesHandler",(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,r){yield(u||(u=n("Promise"))).all(t.messages.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){var n=yield e.messages.index("messageId").get(t.msgId);n!=null&&(yield d({callbackTxn:e,messageId:n.messageId,threadKey:n.threadKey,timestampMs:n.timestampMs}),yield p(e,n))}else yield d({callbackTxn:e,messageId:t.msgId,threadKey:r,timestampMs:o("MAWTimeUtils").toTimestamp(t.ts)})});return function(e){return t.apply(this,arguments)}})()))});return function(t,n){return e.apply(this,arguments)}})())}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.callbackTxn,r=e.messageId,a=e.threadKey,i=e.timestampMs;if(yield t.messages.delete(a,i,r),o("MAWMpsGating").isMpsMessageRendering()){var l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(a,r));yield(u||(u=n("Promise"))).all(l.map(function(e){var r=[e.defaultCtaId,e.attachmentCta1Id,e.attachmentCta2Id,e.attachmentCta3Id].filter(Boolean),o=r.map(function(e){return t.attachment_ctas.delete(e)});return(u||(u=n("Promise"))).all(o).then(function(){return t.attachments.delete(e.threadKey,e.messageId,e.attachmentFbid)})}))}}),m.apply(this,arguments)}function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("replySourceIdMessageID")).getKeyRange(a.messageId)),l=o("MAWDbMsg").toMsgId(a.messageId);if(l==null){r("FBLogger")("messenger_e2ee_web").mustfix("[MAWBridgeDeleteMessagesHandler] Error extracting message id from message");return}yield(u||(u=n("Promise"))).all(i.map(function(n){var i={isBumpMsg:n.replyType===(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP),replyToLSMessage:babelHelpers.extends({},a,{isUnsent:!0}),replyToMsgId:l,replyType:"MESSAGE"},u=babelHelpers.extends({},n,{replyAttachmentId:void 0,replyAttachmentPlaintextHash:void 0,replyAttachmentType:void 0,replyMediaExpirationTimestampMs:void 0,replyMediaPreviewHeight:void 0,replyMediaPreviewWidth:void 0,replySnippet:o("MAWReplyBuilder").getReplyBuilder(i.replyType).buildReplySnippet(i,(s||(s=o("I64"))).to_string(n.senderId),o("MAWCurrentUser").getID()),replyStatus:o("MAWReplyBuilder").getReplyBuilder(i.replyType).buildReplyStatus(i)});return t.messages.put(u)}))}),_.apply(this,arguments)}l.call=c}),98);
__d("MAWBridgeDeleteReactionHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.chatJid,"MAWBridgeDeleteReactionHandler",function(t,r){return t.reactions.delete(r,n.messageId,(e||(e=o("I64"))).of_string(n.actorId))})}l.call=s}),98);
__d("MAWBridgeEditMsgHistoryAddedHandler",["FBLogger","I64","LSMessageSendStatus","MAWChatJid","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("optimistic")).getKeyRange(t));return n==null?void 0:n.messageId}),c.apply(this,arguments)}function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield u(e,t.originalMsgExternalId);if(a==null){r("FBLogger")("messenger_web_e2ee").warn("original message for edit msg history is not present in lsdb");return}var i={messageContent:t.msgContent.content,originalMessagePk:a,sendStatus:t.sendStatus!=null?(s||(s=o("I64"))).of_int32(t.sendStatus):(s||(s=o("I64"))).of_int32(r("LSMessageSendStatus").SERVER_RECEIVED),serverAdjustedEditTsMs:(s||(s=o("I64"))).of_int32(t.editTs),threadKey:n};return e.edit_message_history.put(i)}),m.apply(this,arguments)}function p(e,t,n,a,i){var l={messageContent:t.msgContent.content,originalMessagePk:i,pk:a,sendStatus:t.sendStatus!=null?(s||(s=o("I64"))).of_int32(t.sendStatus):(s||(s=o("I64"))).of_int32(r("LSMessageSendStatus").SERVER_RECEIVED),serverAdjustedEditTsMs:(s||(s=o("I64"))).of_int32(t.editTs),threadKey:n};return e.edit_message_history.put(l)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("MAWChatJid").toThreadKeyMaybe(e.tables,n.threadJid);if(r!=null){var a=n.editMsgHistoryId,i=n.originalMsgId,l=i==null||a==null?d(t,n,r):p(t,n,r,a,i);return l}}),f.apply(this,arguments)}function g(t,o,a){return(e||(e=n("Promise"))).all(a.map(function(e){return _(t,o,e)})).then(r("emptyFunction"))}l.call=g}),98);
__d("MAWBridgeHandleReceiverFetchXMA",["FBLogger","I64","LSIntEnum","LSXmaContentType","MAWBridgeXMAUtils","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){var i,l,u,c=n.contentRef,d=n.defaultPreviewMediaId,m=n.msgId,p=n.subtitleText,_=n.titleText,f=n.xmaId;if(m!=null){var g=(i=n==null||(l=n.defaultCTA)==null?void 0:l.actionUrl)!=null?i:n==null||(u=n.defaultCTA)==null?void 0:u.nativeUrl,h=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(a,m)),y=String(f),C=(e||(e=o("I64"))).zero,b;if(c!=null)try{var v=JSON.parse(c);v!=null&&(b=JSON.stringify(v))}catch(e){r("FBLogger")("messenger_web_sharing").mustfix("Failed to parse msg.contentRef as XmsgMsgrXmaContentRefDataclass")}else r("FBLogger")("messenger_web_sharing").mustfix("contentRef is empty for a MSG_RECEIVER_FETCH XMA");var S=yield o("MAWBridgeXMAUtils").addAttachmentCtas(t,n,a,m,y,{}),R=S.attachmentCta1Id,L=S.attachmentCta2Id,E=S.attachmentCta3Id,k=S.defaultCtaId,I={actionUrl:g!=null?g:void 0,attachmentCta1Id:R,attachmentCta2Id:L,attachmentCta3Id:E,attachmentFbid:y,attachmentIndex:e.zero,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),authorityLevel:e.zero,defaultCtaId:k,hasMedia:!1,hasXma:!0,hasXmaPreview:d!=null,isSharable:!0,messageId:m,receiverFetchId:b,subtitleText:p,threadKey:a,timestampMs:C,titleText:_,transportKey:"WhatsApp",xmaContentType:s.ofNumber(r("LSXmaContentType").MSG_RECEIVER_FETCH)};h!=null?yield t.attachments.upsert([h.threadKey,h.messageId,h.attachmentFbid],I):yield t.attachments.add(I)}}),c.apply(this,arguments)}l.call=u}),98);
__d("MAWBridgeInitOfflineQueueSyncCompleteHandler",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MessengerLogHistory").__setRef("MAWBridgeInitOfflineQueueSyncCompleteHandler");function s(){e.onReady(function(e){var t=e.getInstance("maw_setup");t.debug("Init Offline Queue Sync Complete")})}l.call=s}),98);
__d("MAWMessageExpirationStorage",["LSDatabaseSingleton","MAWBridgeDeleteMessagesHandler","Promise","ReQL","asyncToGeneratorRuntime","clearTimeout","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Map;function c(e,t,n){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){yield(s||(s=n("Promise"))).all(t.map(function(t){var n=t.ts,r=t.msgId,a={msgId:r,ts:n},i=t.threadJid,l=[a],s={messages:l,threadJid:i};return o("MAWBridgeDeleteMessagesHandler").call(e,s)})),u.delete(r)}),d.apply(this,arguments)}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){yield(s||(s=n("Promise"))).all(t.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(t.msgId));if(n!=null){var r=babelHelpers.extends({},n,{replyAttachmentPlaintextHash:void 0});yield e.messages.put(r)}});return function(e){return t.apply(this,arguments)}})())),u.delete(r)}),p.apply(this,arguments)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){yield(s||(s=n("Promise"))).all(t.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(t.msgId));if(n!=null){var r=babelHelpers.extends({},n,{replyMessageText:void 0});yield e.messages.put(r)}});return function(e){return t.apply(this,arguments)}})())),u.delete(r)}),f.apply(this,arguments)}function g(t,a,l,s){return r("setTimeout")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var l=yield(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;r("promiseDone")(l.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield s(e,t,a)});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":127"))}),l)}function h(e){var t=e.bridgeMsgStartCountdown,n=e.expirationEvent,o=t.countdownTs,a=t.millisecondsUntilCountdownTs,i=u.get(o),l;if(i==null)l=[t];else{r("clearTimeout")(i.timeoutId);var s=i.msgs.map(function(e){return e.msgId}).indexOf(t.msgId)===-1;s&&i.msgs.push(t),l=i.msgs}var c=g(l,o,a,n);u.set(o,{expirationTs:o,msgs:l,timeoutId:c})}function y(e){var t=e.msgId,n=u.get(e.countdownTs);if(n!=null){var r=n.msgs.map(function(e){return e.msgId}).indexOf(t);if(r>-1){n.msgs.splice(r,1);return}}}l.expirationDeletionEvent=c,l.expirationStoryReplyEvent=m,l.expirationNoteReplyEvent=_,l.setMessageForExpiration=h,l.clearMessageFromExpiration=y}),98);
__d("MAWBridgeMsgsStartCountdownHandler",["I64","MAWMessageExpirationStorage","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,r){return r.msgs.reduce(function(r,a){return r.then(function(){return o("MAWMessageExpirationStorage").setMessageForExpiration({bridgeMsgStartCountdown:a,expirationEvent:o("MAWMessageExpirationStorage").expirationDeletionEvent}),(s||(s=o("I64"))).of_int32(a.millisecondsUntilCountdownTs),o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,a.threadJid,"MAWBridgeMsgsStartCountdownHandler",function(t,r){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.messages).getKeyRange(r,o("MAWTimeUtils").toTimestamp(a.ts),a.msgId)).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){if(r==null)return(e||(e=n("Promise"))).resolve();var i=babelHelpers.extends({},r,{ephemeralExpirationTs:(s||(s=o("I64"))).of_float(a.countdownTs)});yield t.messages.put(i)});return function(e){return r.apply(this,arguments)}})())})})},(e||(e=n("Promise"))).resolve())}l.call=u}),98);
__d("MAWMedia",["LSIntEnum","MAWDbMedia","MessagingAttachmentType"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return t===o("MAWDbMedia").MEDIA_TYPE.IMAGE?n!=null?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):t===o("MAWDbMedia").MEDIA_TYPE.VIDEO?n!=null?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):t===o("MAWDbMedia").MEDIA_TYPE.PTT?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):t===o("MAWDbMedia").MEDIA_TYPE.GIF?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):t===o("MAWDbMedia").MEDIA_TYPE.STICKER?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):t===o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").NONE)}l.mediaTypeToMessageAttachmentType=s}),98);
__d("MAWBridgeNewMediaHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSThreadMediaGalleryGroup","MAWDbMedia","MAWMedia","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","WAMediaHdType","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t,n,a,i,l){var c,d,m,p,_,f,g,h=t.messagesSortOrderMs?(s||(s=o("I64"))).of_float(t.messagesSortOrderMs[n]):t.sortOrderMs!=null?(s||(s=o("I64"))).of_float(t.sortOrderMs):(s||(s=o("I64"))).of_float(t.ts*1e3);return{accessibilitySummaryText:t.accessibilitySummaryText,attachmentFbid:a,attachmentIndex:(c=e==null?void 0:e.attachmentIndex)!=null?c:(s||(s=o("I64"))).zero,attachmentType:(d=e==null?void 0:e.attachmentType)!=null?d:o("MAWMedia").mediaTypeToMessageAttachmentType(t.mediaType,t.ephemeralMediaViewMode),authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:t.ephemeralMediaState!=null?(s||(s=o("I64"))).of_int32(t.ephemeralMediaState):e==null?void 0:e.ephemeralMediaState,ephemeralMediaViewMode:t.ephemeralMediaViewMode!=null?(s||(s=o("I64"))).of_int32(t.ephemeralMediaViewMode):e==null?void 0:e.ephemeralMediaViewMode,filename:(m=(p=t.filenames!=null?t.filenames[n]:null)!=null?p:t.defaultFilename)!=null?m:e==null?void 0:e.filename,filesize:t.filesize==null?e==null?void 0:e.filesize:(s||(s=o("I64"))).of_int32(t.filesize),gifPlayback:t.gifPlayback,hasMedia:t.hasMedia,hasXma:!1,isHd:((_=t.hdTypes)==null?void 0:_[n])===o("WAMediaHdType").HD_TYPE_HQ_4K,isSharable:!1,messageId:n,offlineAttachmentId:i,playableDurationMs:t.duration==null?e==null?void 0:e.playableDurationMs:(s||(s=o("I64"))).of_int32(t.duration),previewHeight:t.previewHeight==null?e==null?void 0:e.previewHeight:(s||(s=o("I64"))).of_int32(t.previewHeight),previewHeightLarge:t.previewHeightLarge==null?e==null?void 0:e.previewHeightLarge:(s||(s=o("I64"))).of_int32(t.previewHeightLarge),previewWidth:t.previewWidth==null?e==null?void 0:e.previewWidth:(s||(s=o("I64"))).of_int32(t.previewWidth),previewWidthLarge:t.previewWidthLarge==null?e==null?void 0:e.previewWidthLarge:(s||(s=o("I64"))).of_int32(t.previewWidthLarge),threadKey:l,timestampMs:h,titleText:t.accessibilitySummaryText,transportKey:(f=t.transportKey)!=null?f:"WhatsApp",waveformData:(g=t.waveformData)!=null?g:e==null?void 0:e.waveformData}}function d(e,t){var n=t.hasPreviewMedia!=null;return{id:e,mainMediaStatus:t.hasMedia?(u||(u=o("LSIntEnum"))).ofNumber(1):(u||(u=o("LSIntEnum"))).ofNumber(4),mainMediaStatusDetails:"initial_media_download",previewMediaStatus:n?t.hasPreviewMedia===!0?(u||(u=o("LSIntEnum"))).ofNumber(1):(u||(u=o("LSIntEnum"))).ofNumber(4):void 0,previewMediaStatusDetails:n?"initial_media_download":void 0}}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a){var i=r.mediaId,l=r.msgIds,u=r.offlineAttachmentId,d=r.plaintextHash;yield _(t,r);var m=g(i,d),p=u!=null?u:m,f=!1,y=h(r),C=null;if(C=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments_ranges_v2__generated).getKeyRange(a).filter(function(e){return(s||(s=o("I64"))).equal(e.mediaGroup,y)})),yield(e||(e=n("Promise"))).all(l.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=t.attachments,i=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(n).getKeyRange(a,e)),l=c(i,r,e,m,p,a);if(r.skipShouldUpdateHasMore!==!0&&C!=null&&(s||(s=o("I64"))).le(l.timestampMs,C.minTimestampMs)&&(f=!0),i!=null){var u;return n.upsert([i.threadKey,i.messageId,i.attachmentFbid],babelHelpers.extends({},l,{transportKey:(u=i.transportKey)!=null?u:l.transportKey}))}else return n.add(l)});return function(t){return e.apply(this,arguments)}})())),C!=null&&C.hasMoreBefore!==!0&&f){var b=babelHelpers.extends({},C,{hasMoreBefore:!0});yield t.attachments_ranges_v2__generated.upsert([C.threadKey,C.mediaGroup,C.minTimestampMs],b)}}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.mediaId,a=t.plaintextHash;if(a==null){r("FBLogger")("messenger_web_media").mustfix("[NewMedia] No valid media plaintextHash found in reducer %s",n);return}var i=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.client_media_status).getKeyRange(a)),l=i!=null&&!(s||(s=o("I64"))).equal(i.mainMediaStatus,(u||(u=o("LSIntEnum"))).ofNumber(4));l||(yield e.client_media_status.add(d(a,t)))}),f.apply(this,arguments)}function g(e,t){return""+(t!=null?t:e.toString())}function h(e){switch(e.mediaType){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:case o("MAWDbMedia").MEDIA_TYPE.VIDEO:return(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS);case o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").FILES_ONLY);default:return(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS)}}function y(e,t){var n=t.threadJid;return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,n,"MAWBridgeNewMediaHandler",function(e,n){return m(e,t,n)})}l.getAttachmentFromBridgeMedia=c,l.callWithoutWaitingForAnything=m,l.getAttachmentID=g,l.call=y}),98);
__d("MAWMsgFetchLSReplyMsgAndAttachment",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWCurrentUser","MAWDbMsg","MAWMpsGating","MAWReplyBuilder","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.replyContent;if(n==null||n.replyType!=="MESSAGE"||n.replyToMsgId==null)return null;var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(n.replyToMsgId));a==null&&t._META_loaded_as_quoted_msg!==!0&&r("FBLogger")("messenger_e2ee_web").mustfix("[fetchReplyLocalViaLS] Reply snippet cannot be generated as original message is not in LSDB");var i;return a!=null&&(i=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(a.threadKey,a.messageId))),babelHelpers.extends({},t,{replyContent:babelHelpers.extends({},n,{replyToLSAttachment:i,replyToLSMessage:a})})}),d.apply(this,arguments)}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=o("MAWMpsGating").isMpsMessageRendering()?void 0:yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(a.threadKey,a.messageId)),l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("replySourceIdMessageID")).getKeyRange(a.messageId));yield(u||(u=n("Promise"))).all(l.map(function(n){var l=n.replySourceTypeV2,u=n.replyType;if(l==null||u==null){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Error getting reply snippet without replySourceTypeV2 and/or replyType");return}var c=o("MAWDbMsg").toMsgId(a.messageId);if(c==null){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Error extracting message id from replyToLSMessage");return}if(n.messageId===a.messageId){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Message replying to itself should not be updated");return}if(l===(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)){var d={isBumpMsg:n.replyType===(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP),replyToLSAttachment:i,replyToLSMessage:a,replyToMsgId:c,replyType:"MESSAGE"},m=o("MAWReplyBuilder").getReplyBuilder(d.replyType),p=i!=null?{replyAttachmentId:m.buildReplyAttachmentId(d),replyAttachmentPlaintextHash:m.buildReplyAttachmentPlaintextHash(d),replyAttachmentType:m.buildReplyAttachmentType(d),replyMediaPreviewHeight:m.buildReplyMediaPreviewHeight(d),replyMediaPreviewWidth:m.buildReplyMediaPreviewWidth(d)}:{},_=babelHelpers.extends({},n,p,{replyMessageText:m.buildReplyMessageText(d),replySnippet:m.buildReplySnippet(d,(s||(s=o("I64"))).to_string(n.senderId),o("MAWCurrentUser").getID()),replySourceTimestampMs:m.buildReplyTimestampMs(d),replyStatus:m.buildReplyStatus(d),replyToUserId:m.buildReplyUserId(d)});return t.messages.put(_)}}))}),p.apply(this,arguments)}l.fetchReplyLocalViaLS=c,l.updateMessagesReplyingToMsg=m}),98);
__d("MAWUpdateMsg",["MAWBridgeBuildMsg","MAWMsgFetchLSReplyMsgAndAttachment","MsgrWebGating","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=o("MAWBridgeBuildMsg").buildNewAndUpdatedMessageSharedParams(t,r),i=babelHelpers.extends({},n,a);yield e.messages.upsert([n.threadKey,n.timestampMs,n.messageId],i),o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&(yield o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,i))}),s.apply(this,arguments)}l.call=e}),98);
__d("MAWBridgeNewMsgHandler",["FBLogger","I64","LSIntEnum","LSMessageRenderingType","LSQuickReplyType","MAWAdminMsgCTA","MAWBridgeBuildMsg","MAWBridgeNewMediaHandler","MAWBridgeXMAUtils","MAWMpsGating","MAWMsgFetchLSReplyMsgAndAttachment","MAWThreadLoadingState","MAWUpdateMsg","MAWXMAUtils","MWPBumpEntityKey","MpsMessageToBridge","MpsOverBridge","MpsToBridgeMessageId","MpsTypes","MsgrWebGating","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t,n){return babelHelpers.extends({},o("MAWBridgeBuildMsg").buildNewAndUpdatedMessageSharedParams(t,n),{forwardScore:(s||(s=o("I64"))).of_float(t.forwardingScore),isAdminMessage:t.isAdminMessage,isForwarded:t.isForwarded,messageRenderingType:(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageRenderingType").DEFAULT),offlineThreadingId:t.externalId,quickReplyType:u.ofNumber(r("LSQuickReplyType").NONE),senderId:s.of_string(t.sender),threadKey:e,viewFlags:u.ofNumber(0)})}function d(e,t,n){var r=t.mediaId,a=t.offlineAttachmentId,i=t.plaintextHash,l=o("MAWBridgeNewMediaHandler").getAttachmentID(r,i),s=a!=null?a:l;return o("MAWBridgeNewMediaHandler").getAttachmentFromBridgeMedia(null,t,n,l,s,e)}function m(e,t,n,r){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){n.unsupportedType==="stickerReceiverFetchMessage"&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_msg_handler","sticker_receiver_fetch_fallback");var a=c(t,n,r),i=a.messageId,l=a.timestampMs;yield e.messages.upsert([t,l,i],a),o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&(yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages).getKeyRange(t,l,i)).then(function(t){if(t!=null)return o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,t)}))}),p.apply(this,arguments)}function _(e,t,n,r){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){n.unsupportedType==="stickerReceiverFetchMessage"&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_msg_handler","sticker_receiver_fetch_fallback");var a=c(t,n,r),i=yield e.messages.add(a),l=i[0],s=i[1],u=i[2];o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&(yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages).getKeyRange(t,s,u)).then(function(t){if(t!=null)return o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,t)}))}),f.apply(this,arguments)}function g(e,t){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.replyContent;if(n==null||n.replyType!=="MESSAGE")return t;var r=yield o("MpsOverBridge").mps().loadMessage({config:{shouldFetchSupplementals:!0,strategy:"local-first"},debug:{purpose:"reply-fetch-local"},messageId:o("MpsToBridgeMessageId").bridgeMsgIdToMps(n.replyToMsgId).messageId,threadId:o("MpsTypes").toThreadId(t.chatJid)}),a=r.value;if(a==null)return t;var i=o("MpsMessageToBridge").mpsFullMessagetoBridge(a),l=i==null?void 0:i.topLevel,s=i==null?void 0:i.supplementals;if(l!=null&&l.kind==="bridgeMsg"){var u=s==null?void 0:s.find(function(e){return e.kind==="bridgeMedia"||e.kind==="bridgeXMA"}),m=l.value.msgId,p=(function(t){if((typeof t=="object"&&t!==null||typeof t=="function")&&t.kind==="bridgeMedia"&&"value"in t){var r=t.value;return d(e,r,n.replyToMsgId)}if((typeof t=="object"&&t!==null||typeof t=="function")&&t.kind==="bridgeXMA"&&"value"in t){var a=t.value;return o("MAWBridgeXMAUtils").composeAttachmentXMA(a,e,String(a.xmaId),m,void 0,void 0,void 0,void 0,"MAWBridgeNewMsgHandler")}if(t!==void 0)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)})(u);return babelHelpers.extends({},t,{replyContent:babelHelpers.extends({},n,{replyToLSAttachment:p,replyToLSMessage:c(e,l.value,void 0)})})}return t}),h.apply(this,arguments)}function y(e,t,n){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r,a;if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var i=yield o("MAWMsgFetchLSReplyMsgAndAttachment").fetchReplyLocalViaLS(e,n);return i==null?n:o("MAWMpsGating").isMpsMessageRendering()&&((r=i.replyContent)==null?void 0:r.replyToLSAttachment)==null&&((a=i.replyContent)==null?void 0:a.replyToLSMessage)==null?g(t,n):i}),C.apply(this,arguments)}function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.messages.index("optimistic")).getKeyRange(r.externalId));return a!=null?(e||(e=n("Promise"))).resolve(a):o("MsgrWebGating").isQuotedMessagesInLsEnabled()?o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.messages.index("messageId")).getKeyRange(r.msgId)):(e||(e=n("Promise"))).resolve(null)}),v.apply(this,arguments)}function S(e,t,n){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield y(e,n,t);if(!o("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType)){if(a.isExpiredMsg===!0){r("FBLogger")("messenger_web").mustfix("Attempted to insert an expired message");return}var i=yield o("MAWAdminMsgCTA").getAdminMsgCtaStep(e,n,a);if(o("MAWMpsGating").isMpsMessageRendering())yield m(e,n,a,i);else{var l,u=yield b(e,a);u==null?yield _(e,n,a,i):yield o("MAWUpdateMsg").call(e,a,u,i),o("MAWMpsGating").isMpsMessageRendering()&&((l=a.editCount)!=null?l:0)>0&&(yield L(e,a))}if(a.collapsibleId!=null){var c=(s||(s=o("I64"))).of_float(a.collapsibleId),d=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.messages.index("collapsibleId")).getKeyRange(c));if(d.length>1){var p=d[0],f=d[1];(s||(s=o("I64"))).gt(p.timestampMs,f.timestampMs)?yield e.messages.put(babelHelpers.extends({},f,{isCollapsed:!0})):yield e.messages.put(babelHelpers.extends({},p,{isCollapsed:!0}))}}}}),R.apply(this,arguments)}function L(e,t){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("replySourceIdMessageID")).getKeyRange(r.msgId));yield(e||(e=n("Promise"))).all(a.map(function(e){var n=babelHelpers.extends({},e,{replyMessageText:r.content});return t.messages.put(n)}))}),E.apply(this,arguments)}function k(e,t){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(e,t.chatJid);n!=null&&(yield S(e,t,n))}),I.apply(this,arguments)}function T(e,t){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){yield(e||(e=n("Promise"))).all(r.map(function(e){return k(t,e)}))}),D.apply(this,arguments)}l.callWithoutWaitingForAnything=S,l.call=k,l.bulkCall=T}),98);
__d("MAWBridgePollUtils",["fbt","FBLogger","I64","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t){return t.toSorted(function(t,n){return t.numVotes!==n.numVotes?n.numVotes-t.numVotes:(e||(e=o("I64"))).equal(t.sortKeyVotingTimestamp,n.sortKeyVotingTimestamp)?(e||(e=o("I64"))).compare(t.sortKeyCreationTimestamp,n.sortKeyCreationTimestamp):(e||(e=o("I64"))).compare(n.sortKeyVotingTimestamp,t.sortKeyVotingTimestamp)})}function c(t){if(t===o("WAJids").AUTHOR_SYSTEM)throw r("FBLogger")("messenger_web").mustfixThrow("Not a valid author for poll vote");return t===o("WAJids").AUTHOR_ME?(e||(e=o("I64"))).of_string(o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())):(e||(e=o("I64"))).of_string(o("WAJids").userIdFromJid(t))}function d(e,t){switch(e.length){case 0:return s._(/*BTDS*/"{option_name}, nenhum voto",[s._param("option_name",t)]);case 1:return s._(/*BTDS*/"{option_name}, votada por {voter_name}",[s._param("option_name",t),s._param("voter_name",e[0])]);case 2:return s._(/*BTDS*/"{option_name}, votada por {first_voter_name}, {second_voter_name}",[s._param("option_name",t),s._param("first_voter_name",e[0]),s._param("second_voter_name",e[1])]);case 3:return s._(/*BTDS*/"{option_name}, votada por {first_voter_name}, {second_voter_name} e {third_voter_name}",[s._param("option_name",t),s._param("first_voter_name",e[0]),s._param("second_voter_name",e[1]),s._param("third_voter_name",e[2])]);default:return s._(/*BTDS*/"{option_name}, votada por {first_voter_name}, {second_voter_name} e outras {remaining_count} pessoas",[s._param("option_name",t),s._param("first_voter_name",e[0]),s._param("second_voter_name",e[1]),s._param("remaining_count",e.length-2)])}}l.sortPollXMAOptions=u,l.getContactIdForAuthor=c,l.getListItemAccessibilityText=d}),226);
__d("QuestionPollStage",[],(function(t,n,r,o,a,i){var e=Object.freeze({NOMINATING:0,VOTING:1,CLOSED:2});i.default=e}),66);
__d("MAWBridgeNewPollHandler",["fbt","FBLogger","I64","LSAuthorityLevel","LSGroupPollEventType","LSIntEnum","LSPollQuestionType","MAWBridgePollUtils","MAWDbPoll","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MNLSXMALayoutType","MNLSXMATemplateType","MessagingAttachmentType","Promise","QuestionPollStage","ReQL","WAJids","asyncToGeneratorRuntime","nullthrows"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=3;function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=t.contactIdForCurrentUser,a=t.dbPoll,i=t.latestUpdateMsgId,l=t.latestUpdateTimestampMs,s=t.transportKey,u=a.pollStanzaId,d=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments.index("idx_attachments_collapsible_id")).getKeyRange(n,(c||(c=o("I64"))).of_string(u)));d!=null&&(yield e.attachments.delete(d.threadKey,d.messageId,d.attachmentFbid)),yield f(e,a,n,i,l,r,s)}),p.apply(this,arguments)}function _(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.dbPoll.chatJid,"BridgeNewPollHandler",function(e,n){return m(e,t,n)})}function f(e,t,n,r,o,a,i){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,s,u,m){var p=a.latestSenderTimestampsMs,_=a.pollParticipantCount,f=a.pollStanzaId,g=(c||(c=o("I64"))).of_string(f),y=yield o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.polls).getKeyRange(g));y==null&&(yield C(t,g,l,s,i));var b=yield o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.poll_options_v2).getKeyRange(g)),S=new Map(a.pollOptions.entries().map(function(e){var t=e[0],n=e[1];return[o("MAWDbPoll").generateStableIdFromOptionHash(t,f).toString(),n]})),R=new Map;b.forEach(function(e){var t=(c||(c=o("I64"))).to_string(e.optionId);R.set(t,babelHelpers.extends({},R.get(t),{lsOption:e}))}),S.entries().forEach(function(e){var t=e[0],n=e[1];n.optionText!=null&&R.set(t,babelHelpers.extends({},R.get(t),{mawDbOption:n}))});var L=R.entries().toArray().sort(function(e,t){var n,o,a=e[0],i=e[1],l=i.lsOption,s=i.mawDbOption,u=t[0],c=t[1],d=c.lsOption,m=c.mawDbOption,p=r("nullthrows")((n=l==null?void 0:l.optionText)!=null?n:s==null?void 0:s.optionText),_=r("nullthrows")((o=d==null?void 0:d.optionText)!=null?o:m==null?void 0:m.optionText);return p.localeCompare(_)}),E=yield(e||(e=n("Promise"))).all(L.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){var a=e[0],i=e[1],l=i.lsOption,s=i.mawDbOption,d=(c||(c=o("I64"))).of_int32(n);if(l==null&&s==null)return null;var m=c.of_string(a);if(s==null){var f=r("nullthrows")(l),y=f.optionText;yield t.poll_options_v2.upsert([g,m],babelHelpers.extends({},r("nullthrows")(l),{sortKeyCreationTimestamp:d}));var C=yield o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.poll_votes_v2).getKeyRange(g,m,u));return{contactIds:[u],hasVoteFromCurrentUser:!0,numVotes:1,optionId:m,optionText:y,progressBarFilledPercentage:Math.floor(1/_*100),sortKeyCreationTimestamp:d,sortKeyVotingTimestamp:C!=null?C.timestampMs:(c||(c=o("I64"))).zero}}return h(t,g,m,r("nullthrows")(s.optionText),l,s,d,p,u,_)});return function(t,n){return e.apply(this,arguments)}})())).then(function(e){return e.filter(Boolean)}),k=E.some(function(e){return e.hasVoteFromCurrentUser}),I=o("MAWBridgePollUtils").sortPollXMAOptions(E).slice(0,d);yield v(t,a,i,l,s,I,k,m)}),g.apply(this,arguments)}function h(e,t,n,r,o,a,i,l,s,u){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,s,u,d,m,p,_){var f=u.voteAuthors,g=Array.from(f).map(function(e){var t=m.get(e);if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Missing latest sender timestamp for poll voter from dbPoll");return{contactId:o("MAWBridgePollUtils").getContactIdForAuthor(e),latestSenderTimestampMs:t}}),h=s!=null?yield o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.poll_votes_v2).getKeyRange(a,i)):[],y=h.find(function(e){return(c||(c=o("I64"))).equal(e.contactId,p)}),C=m.get(o("WAJids").AUTHOR_ME),b=y!=null&&(C==null||C<(c||(c=o("I64"))).to_float(y.timestampMs));yield(e||(e=n("Promise"))).all(h.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){(c||(c=o("I64"))).equal(e.contactId,p)&&b||(yield t.poll_votes_v2.delete(a,i,e.contactId))});return function(t){return e.apply(this,arguments)}})())),yield e.all(g.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e.contactId,r=e.latestSenderTimestampMs;yield t.poll_votes_v2.put({contactId:n,optionId:i,pollId:a,timestampMs:(c||(c=o("I64"))).of_float(r)})});return function(t){return e.apply(this,arguments)}})()));var v=(c||(c=o("I64"))).of_float(Math.max.apply(Math,g.map(function(e){return e.latestSenderTimestampMs}).concat([0]))),S=b?(c||(c=o("I64"))).max(r("nullthrows")(y==null?void 0:y.timestampMs),v):v,R=g.length+(b?1:0),L={optionId:i,optionText:l,pollId:a,sortKeyCreationTimestamp:d,sortKeyVotingTimestamp:S,voteCount:c.of_int32(R)};s!=null?yield t.poll_options_v2.upsert([a,i],L):yield t.poll_options_v2.add(L);var E=g.map(function(e){return e.contactId});return b&&E.push(p),{contactIds:E,hasVoteFromCurrentUser:b||g.find(function(e){return(c||(c=o("I64"))).equal(e.contactId,p)})!=null,numVotes:R,optionId:i,optionText:l,progressBarFilledPercentage:Math.floor(R/_*100),sortKeyCreationTimestamp:d,sortKeyVotingTimestamp:S}}),y.apply(this,arguments)}function C(e,t,n,r,o){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i){var l={authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),lastUpdateMessageEventType:u.ofNumber(r("LSGroupPollEventType").QUESTION_CREATION),lastUpdateMessageId:n,lastUpdateMessageTimestampMs:(c||(c=o("I64"))).of_float(a),pollId:t,pollStage:u.ofNumber(r("QuestionPollStage").VOTING),pollType:u.ofNumber(r("LSPollQuestionType").CHOOSE_MULTIPLE),threadKey:i};yield e.polls.put(l)}),b.apply(this,arguments)}function v(e,t,n,r,o,a,i,l){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,m,p,_,f){var g=a.pollStanzaId,h=a.title;if(p.length===0){r("FBLogger")("messenger_web").mustfix("Items length for poll XMA should be greater than 0");return}var y=yield o("ReQL").toArrayAsync(o("ReQL").mergeJoin(o("ReQL").fromTableAscending(t.participants,[]).getKeyRange(i),o("ReQL").fromTableAscending(t.contacts,["name","id","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"])).map(function(e){var t=e[0],n=e[1];return n}).filter(Boolean)),C=new Map(y.map(function(e){return[(c||(c=o("I64"))).to_string(e.id),e]})),b=p.map(function(e){var t=e.contactIds,n=e.optionId,r=e.optionText,a=e.progressBarFilledPercentage,i=t.reduce(function(e,t){var n,r,a=C.get((c||(c=o("I64"))).to_string(t));return e.contactUrlExpirations.push((a==null?void 0:a.profilePictureUrlExpirationTimestampMs)!=null?(c||(c=o("I64"))).to_string(a.profilePictureUrlExpirationTimestampMs):""),e.contactUrlFallbacks.push((n=a==null?void 0:a.profilePictureFallbackUrl)!=null?n:""),e.contactUrls.push((r=a==null?void 0:a.profilePictureUrl)!=null?r:""),(a==null?void 0:a.name)!=null&&e.contactNames.push(a.name),e},{contactNames:[],contactUrlExpirations:[],contactUrlFallbacks:[],contactUrls:[]}),l=i.contactNames,s=i.contactUrlExpirations,u=i.contactUrlFallbacks,d=i.contactUrls;return{listItemAccessibilityText:o("MAWBridgePollUtils").getListItemAccessibilityText(l,r).toString(),listItemContactUrlExpirationTimestampList:s.length>0?s.join(", "):void 0,listItemContactUrlFallbackList:u.length>0?u.join(", "):void 0,listItemContactUrlList:d.length>0?d.join(", "):void 0,listItemId:n,listItemProgressBarFilledPercentage:(c||(c=o("I64"))).of_int32(a),listItemTitleText:r,listItemTotalCount:c.of_int32(t.length)}}),v=(c||(c=o("I64"))).of_string(g),S=_?s._(/*BTDS*/"Mudar voto").toString():s._(/*BTDS*/"Votar").toString(),R={actionContentBlob:h,attachmentFbid:g,attachmentIndex:c.zero,ctaId:v,messageId:l,targetId:c.of_string(g),threadKey:i,title:S,type_:"xma_poll_details_card"},L={attachmentCta1Id:v,attachmentFbid:g,attachmentIndex:c.zero,cta1Title:S,cta1Type:"xma_poll_details_card",defaultActionEnableExtensions:!1,defaultCtaId:v,defaultCtaTitle:S,defaultCtaType:"xma_poll_details_card",faviconUrlExpirationTimestampMs:c.zero,messageId:l,threadKey:i},E={attachmentCta1Id:v,attachmentFbid:g,attachmentIndex:c.zero,attachmentType:(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),authorityLevel:u.ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),collapsibleId:c.of_string(g),cta1Title:S,cta1Type:"xma_poll_details_card",defaultCtaId:v,defaultCtaTitle:S,defaultCtaType:"xma_poll_details_card",hasMedia:!1,hasXma:!0,isSharable:!1,listItemsDescriptionText:h,listItemsId:c.of_string(g),messageId:l,threadKey:i,timestampMs:c.of_float(m),transportKey:f!=null?f:"WhatsApp",xmaLayoutType:u.ofNumber(r("MNLSXMALayoutType").XCENTER),xmasTemplateType:u.ofNumber(r("MNLSXMATemplateType").GENERIC_SHARE)},k=a.pollOptions.values().filter(function(e){return e.optionText!=null}).toArray().length,I=k>d?s._(/*BTDS*/"_j{\"*\":\"Mais {additional_option_count} op\\u00e7\\u00f5es\",\"_1\":\"Mais {additional_option_count} op\\u00e7\\u00e3o\"}",[s._plural(k-d),s._param("additional_option_count",k-d)]).toString():void 0,T=babelHelpers.extends({},E,{listItemAccessibilityText1:b[0].listItemAccessibilityText,listItemAccessibilityText2:b.length>1?b[1].listItemAccessibilityText:void 0,listItemAccessibilityText3:b.length>2?b[2].listItemAccessibilityText:void 0,listItemContactUrlExpirationTimestampList1:b[0].listItemContactUrlExpirationTimestampList,listItemContactUrlExpirationTimestampList2:b.length>1?b[1].listItemContactUrlExpirationTimestampList:void 0,listItemContactUrlExpirationTimestampList3:b.length>2?b[2].listItemContactUrlExpirationTimestampList:void 0,listItemContactUrlFallbackList1:b[0].listItemContactUrlFallbackList,listItemContactUrlFallbackList2:b.length>1?b[1].listItemContactUrlFallbackList:void 0,listItemContactUrlFallbackList3:b.length>2?b[2].listItemContactUrlFallbackList:void 0,listItemContactUrlList1:b[0].listItemContactUrlList,listItemContactUrlList2:b.length>1?b[1].listItemContactUrlList:void 0,listItemContactUrlList3:b.length>2?b[2].listItemContactUrlList:void 0,listItemId1:b[0].listItemId,listItemId2:b.length>1?b[1].listItemId:void 0,listItemId3:b.length>2?b[2].listItemId:void 0,listItemProgressBarFilledPercentage1:b[0].listItemProgressBarFilledPercentage,listItemProgressBarFilledPercentage2:b.length>1?b[1].listItemProgressBarFilledPercentage:void 0,listItemProgressBarFilledPercentage3:b.length>2?b[2].listItemProgressBarFilledPercentage:void 0,listItemsSecondaryDescriptionText:I,listItemTitleText1:p[0].optionText,listItemTitleText2:p.length>1?p[1].optionText:void 0,listItemTitleText3:p.length>2?p[2].optionText:void 0,listItemTotalCount1:b[0].listItemTotalCount,listItemTotalCount2:b.length>1?b[1].listItemTotalCount:void 0,listItemTotalCount3:b.length>2?b[2].listItemTotalCount:void 0});yield(e||(e=n("Promise"))).all([t.attachments.upsert([i,l,g],T),t.attachment_ctas.upsert([v],R),t.attachment_items.upsert([g,c.zero],L)])}),S.apply(this,arguments)}l.POLL_OPTIONS_THRESHOLD=d,l.call=_}),226);
__d("MAWBridgeNewReceiverFetchInfoHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMediaUrlUtils","MAWBridgeSendAndReceive","MAWImageUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMpsGating","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!o("MAWMpsGating").isMpsMessageRendering())return e;var t=yield o("MAWBridgeSendAndReceive").sendAndReceive("backend","getReceiverFetchInfo",{receiverFetchId:e.receiverFetchId});return babelHelpers.extends({},e,t)}),c.apply(this,arguments)}function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield u(t),a=r.msgId,i=r.receiverFetchId,l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(n,a)),s=_(r,n,l);yield e.attachments.upsert([n,a,i],s)}),m.apply(this,arguments)}function p(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"BridgeNewReceiverFetchInfoHandler",function(e,n){return d(e,t,n)})}function _(t,n,a){var i=t.accessibilitySummaryText,l=t.mimetype,u=t.msgId,c=t.previewHeight,d=t.previewUrl,m=t.previewUrlExpirationTimestampMs,p=t.previewWidth,_=t.ravenSettings,g=t.receiverFetchId,h=t.sortOrderMs,y=t.transportKey,C=t.type,b=f(C),v=o("MAWImageUtils").boundHeightWidth(c,p,o("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE),S=v.height,R=v.width,L=d!=null?d:a==null?void 0:a.previewUrl,E=m!=null?(e||(e=o("I64"))).of_float(m):a==null?void 0:a.previewUrlExpirationTimestampMs,k=o("LSMediaUrlUtils").hasValidReceiverFetchPreviewUrl(L,E);return{accessibilitySummaryText:i,attachmentFbid:g,attachmentIndex:(e||(e=o("I64"))).zero,attachmentType:b,authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:(_==null?void 0:_.ephemeralMediaState)!=null?(e||(e=o("I64"))).of_int32(_.ephemeralMediaState):void 0,ephemeralMediaViewMode:(_==null?void 0:_.ephemeralMediaViewMode)!=null?(e||(e=o("I64"))).of_int32(_.ephemeralMediaViewMode):void 0,hasMedia:k,hasXma:!1,isSharable:!1,messageId:u,previewHeight:e.of_int32(S),previewUrl:d!=null?d:a==null?void 0:a.previewUrl,previewUrlExpirationTimestampMs:m!=null?(e||(e=o("I64"))).of_float(m):a==null?void 0:a.previewUrlExpirationTimestampMs,previewUrlMimeType:l,previewWidth:e.of_int32(R),receiverFetchId:g,threadKey:n,timestampMs:e.of_float(h),transportKey:y!=null?y:"WhatsApp"}}function f(e){switch(e){case"sticker":return(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER);default:throw r("FBLogger")("messenger_web_media").mustfixThrow("Unsupported type for MAWBridgeNewReceiverFetchInfoHandler")}}l.call=p,l.composeAttachment=_}),98);
__d("MAWBridgeNewXMAHandler",["MAWBridgeHandleReceiverFetchXMA","MAWBridgeXMAUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","WAArmadilloXMA.pb","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=String(t.xmaId),a=t.msgId;if(a!=null){var i=t.targetType===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH;if(i)return o("MAWBridgeHandleReceiverFetchXMA").call(e,t,n);var l=yield o("MAWBridgeXMAUtils").getExistingAttachmentAndAttachmentCtas(e,n,a),s=l[0],u=l[1],c=yield o("MAWBridgeXMAUtils").addAttachmentCtas(e,t,n,a,r,u),d=c.attachmentCta1Id,m=c.attachmentCta2Id,p=c.attachmentCta3Id,_=c.defaultCtaId,f=o("MAWBridgeXMAUtils").composeAttachmentXMA(t,n,r,a,d,m,p,_,"MAWBridgeNewXMAHandler");s!=null?yield e.attachments.upsert([s.threadKey,s.messageId,s.attachmentFbid],f):yield e.attachments.add(f)}}),s.apply(this,arguments)}function u(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.threadJid,"MAWBridgeNewXMAHandler",function(t,r){return e(t,n,r)})}function c(e,t){return u(e,t)}l.callWithoutWaitingForAnything=e,l.call=c}),98);
__d("MAWBridgeReactionUpsertHandler",["I64","LSAuthorityLevel","LSIntEnum","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,i,l){return{actorId:(e||(e=o("I64"))).of_string(t),authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),messageId:a,reaction:l,reactionCreationTimestampMs:o("MAWTimeUtils").toTimestamp(i),threadKey:n,timestampMs:o("MAWTimeUtils").toTimestamp(i),transportKey:"WhatsApp"}}function c(t,n,r,a,i,l){return t.reactions.upsert([r,a,(e||(e=o("I64"))).of_string(n)],u(n,r,a,i,l))}function d(e,t,n,r,o,a){return c(e,t,n,r,o,a)}function m(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.chatJid,"MAWBridgeReactionUpsertHandler",function(e,n){return c(e,t.actorId,n,t.messageId,t.ts,t.reaction)})}l.composeReaction=u,l.attachmentMutationsOptimisticHandler=d,l.call=m}),98);
__d("MAWBridgeTraceRecordCheckpointHandler",["I64","LSAppendDataTraceAddonStoredProcedure","LSDatabaseSingleton","LSFactory","LSFlushDataTrace.nop"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=n.checkPointId,i=n.dataTraceId,l=n.errorMessage,s=n.tags;return r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(t),{checkPointId:a,dataTraceId:i,errorMessage:l,syncChannel:(e||(e=o("I64"))).neg_one,tags:s}).then(function(){if(n.shouldFlush)return r("LSFlushDataTrace.nop")(t,0,i)})}function c(e){return(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(t){return t.runInTransaction(function(t){return u(t,e)},"readwrite",void 0,void 0,i.id+":43")})}l.call=u,l.callWithoutTxn=c}),98);
__d("MAWIssueNewUserVisibleErrors",["fbt","$InternalEnum","LSDatabaseSingleton","LSFactory","LSIssueNewErrorStoredProcedure","LSRemoveErrorStoredProcedure","Promise","ReQL","asyncToGeneratorRuntime","gkx","promiseDone"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(e,t,n,a){r("promiseDone")((u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(o){return o.runInTransaction(function(o){return r("LSIssueNewErrorStoredProcedure")(r("LSFactory")(o),{errorBodyText:e!=null?e.toString():void 0,errorExtraData:a,errorTitleText:t.toString(),presentationStyle:String(n)})},"readwrite",void 0,void 0,i.id+":37")}))}function d(e,t){return e.runInTransaction(function(e){return r("LSRemoveErrorStoredProcedure")(r("LSFactory")(e),{errorId:t})},"readwrite",void 0,void 0,i.id+":56")}function m(){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton,r=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.user_visible_errors));yield(e||(e=n("Promise"))).all(r.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield d(t,e.errorId)});return function(t){return e.apply(this,arguments)}})()))})())}function p(t){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var r=yield(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton,a=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(r.tables.user_visible_errors));yield(e||(e=n("Promise"))).all(a.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){e.errorExtraData===t&&(yield d(r,e.errorId))});return function(t){return e.apply(this,arguments)}})()))})())}var _=n("$InternalEnum")({TOAST:"toast",BANNER:"banner"}),f=s._(/*BTDS*/"N\u00e3o foi poss\u00edvel carregar todas as conversas criptografadas de ponta a ponta"),g=s._(/*BTDS*/"Experimente atualizar a p\u00e1gina para ver."),h=s._(/*BTDS*/"Talvez voc\u00ea tenha que atualizar essa p\u00e1gina"),y=s._(/*BTDS*/"Pode haver problemas no envio ou recebimento de mensagens nesta p\u00e1gina. Atualize para recarregar suas conversas."),C=r("gkx")("4424")?s._(/*BTDS*/"Este navegador n\u00e3o \u00e9 compat\u00edvel"):s._(/*BTDS*/"Talvez seja necess\u00e1rio atualizar seu navegador"),b=r("gkx")("4424")?s._(/*BTDS*/"Algumas mensagens est\u00e3o faltando e certos recursos de mensagem n\u00e3o est\u00e3o dispon\u00edveis. Experimente usar outro navegador ou dispositivo m\u00f3vel."):s._(/*BTDS*/"Conversas criptografadas de ponta a ponta n\u00e3o aparecer\u00e3o neste navegador. Tente atualizar seu navegador ou use outro."),v=new Map([[f.toString(),f],[h.toString(),h]]),S=new Map([[g.toString(),g],[y.toString(),y]]);l.issueError=c,l.deleteUserVisibleError=d,l.deleteAllErrors=m,l.deleteUserVisibleErrorByJSErrorMessage=p,l.MAWUserVisibleErrorPresentationType=_,l.MAWGeneralErrorMsgTitle=f,l.MAWGeneralErrorMsgBody=g,l.MAWLegacyUserErrorMsgTitle=h,l.MAWLegacyUserErrorMsgBody=y,l.MAWUnsupportedIndexedDBErrorMsgTitle=C,l.MAWUnsupportedIndexedDBErrorMsg=b,l.errorMsgTitleToFbtMap=v,l.errorMsgBodyToFbtMap=S}),226);
__d("MAWOfflineQueueThreadStatus",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n){return Object.entries(t).filter(function(e){var t,r,o=e[0],a=e[1];return((t=n[o])==null?void 0:t.chatStatus)!==a.chatStatus||((r=n[o])==null?void 0:r.snippetStatus)!==a.snippetStatus})},l=function(t,n){return t.reduce(function(e,t){var n=t[0],r=t[1];return e[n]={chatStatus:r.chatStatus,snippetStatus:r.snippetStatus},e},n)};function s(t,n){var r=t!=null?e(t,n):null,o=r==null||r.length===0?n:l(r,babelHelpers.extends({},n));return o}i.calculateOfflineQueueThreadStatus=s}),66);
__d("MAWStateContext.react",["$InternalEnum","EncryptedBackupsDYITypes","FBLogger","MAWSharedProtocolQueueConst","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext,c=s.useContext,d=s.useEffect,m=s.useRef,p=s.useState,_=n("$InternalEnum")({NOT_STARTED:"not_started",IN_PROGRESS:"in_progress",READY:"ready"}),f={ebDYIState:o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.NotStarted,ebState:null,ephemeralSettings:{},isMAWDBinUILoaded:!1,mediaDownloadRetryCount:{},mediaDownloadStatus:{},messageLatencies:{},offlineQueueCount:0,offlineQueueProgressDownloaded:0,offlineQueueProgressProcessed:0,offlineQueueSyncState:o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing,offlineQueueThreadStatus:{},unArchivedSelfDeviceChangeAlerts:0,workerState:_.NOT_STARTED},g={state:f,subscriptions:new Set},h=u(function(){return g}),y=u(g),C=u(function(e){throw r("FBLogger")("messenger_web").mustfixThrow("MAW Dispatch not implemented")});function b(e){var t=c(h)(),n=t.state,r=t.subscriptions,o=p(function(){return e(n)}),a=o[0],i=o[1],l=m(a);return d(function(){var t=function(n){var t=e(n);t!==l.current&&(l.current=t,i(t))};return r.add(t),function(){r.delete(t)}},[r,e]),a}l.WorkerState=_,l.initialState=f,l.MAWNonRerenderingStateContext=h,l.MAWStateContext=y,l.MAWDispatchContext=C,l.useMAWSelector=b}),98);
__d("MWLSParticipant",["I64","LSContactBlockedByViewerStatus","LSContactGender","LSContactType","LSContactWorkForeignEntityType","LSIntEnum","LSMailboxType","MWLSContactTypeExactUtils","ReQL","getLSMediaContactProfilePictureUrl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={actual_name:"",blocked_by_viewer_status:(e||(e=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contact_id:(s||(s=o("I64"))).zero,contactType:e.ofNumber(r("LSContactType").UNKNOWN),delivered_watermark_timestamp_ms:s.zero,gender:e.ofNumber(r("LSContactGender").UNKNOWN),is_admin:!1,is_messenger_user:!1,mailbox_type:e.ofNumber(r("LSMailboxType").MESSENGER),name:"",nickname:void 0,profile_picture_url:"",rank:0,read_action_timestamp_ms:s.zero,read_watermark_timestamp_ms:s.zero,secondary_name:void 0,thread_key:s.zero,work_company_name:void 0,work_foreign_entity_info:e.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN),work_job_title:void 0};function c(t){var n,a,i=t[0],l=t[1],s=i.nickname,u=l.authorityLevel,c=l.blockedByViewerStatus,d=l.contactTypeExact,m=l.firstName,p=l.name,_=l.secondaryName,f=l.waConnectStatus;return{actual_name:p,authority_level:u,blocked_by_viewer_status:c,contact_id:i.contactId,contactType:l.contactType,delivered_watermark_timestamp_ms:i.deliveredWatermarkTimestampMs,gender:l.gender,is_admin:(n=i.isAdmin)!=null?n:!1,is_messenger_user:l.isMessengerUser,mailbox_type:(e||(e=o("LSIntEnum"))).ofNumber(r("LSMailboxType").MESSENGER),name:(a=s!=null?s:m)!=null?a:p,nickname:s,profile_picture_url:r("getLSMediaContactProfilePictureUrl")(l),rank:l.rank,read_action_timestamp_ms:i.readActionTimestampMs,read_watermark_timestamp_ms:i.readWatermarkTimestampMs,secondary_name:o("MWLSContactTypeExactUtils").isIgContact(d)?_:void 0,thread_key:i.threadKey,wa_connect_status:f,work_company_name:l.workCompanyName,work_foreign_entity_info:l.workForeignEntityType,work_job_title:l.workJobTitle}}function d(e,t,n){return o("ReQL").mergeJoin(o("ReQL").fromTableAscending(e.tables.participants).getKeyRange(n),t).map(c)}l.empty=u,l.projectOpen=c,l.getAllInOpenThread=d}),98);
__d("MWLSThreadTitle",["fbt","I64","LSMessagingThreadTypeUtil","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(e){return e.length>4?"("+e.length+") "+e.join(", "):e.join(", ")}function c(e){switch(e.length){case 0:return r("gkx")("22885")?"":s._(/*BTDS*/"Nenhum participante");case 1:return e[0];case 2:return s._(/*BTDS*/"{participant1} e {participant2}",[s._param("participant1",e[0]),s._param("participant2",e[1])]);case 3:return s._(/*BTDS*/"{participant1}, {participant2} e {participant3}",[s._param("participant1",e[0]),s._param("participant2",e[1]),s._param("participant3",e[2])]);default:return s._(/*BTDS*/"{participant1}, {participant2} e outros {others_count} participantes",[s._param("participant1",e[0]),s._param("participant2",e[1]),s._param("others_count",String(e.length-2))])}}function d(t,n,r,a,i,l,s){if(s===void 0&&(s=!1),t!=null)return t;var d=o("LSMessagingThreadTypeUtil").isGroup(a),m=r.filter(function(t){return!(e||(e=o("I64"))).equal(t.contact_id,n)});return d?s?u(m.map(i)):c(m.map(i)):r.length!==1?c(m.map(l)):l(r[0])}function m(e,t,n,r,o){return o===void 0&&(o=!1),d(e,t,n,r,function(e){var t=e.name,n=e.nickname;return n!=null?n:t},function(e){var t=e.actual_name,n=e.nickname;return n!=null?n:t},o).toString()}function p(e,t,n,r){return d(e,t,n,r,function(e){var t=e.actual_name;return t},function(e){var t=e.actual_name;return t}).toString()}function _(e,t,n,r){return d(e,t,n,r,function(e){var t=e.actual_name,n=e.secondary_name;return n!=null?n:t},function(e){var t=e.actual_name,n=e.secondary_name;return n!=null?n:t}).toString()}l.getDefaultThreadTitle=m,l.getThreadTitleWithFullName=p,l.getThreadTitleWithSecondaryNames=_}),226);
__d("MWSearchThreadUtils",["I64","LSIntEnum","LSMessageSearchType","MAWChatJid","MWLSParticipant","MWLSThreadTitle","Promise","ReQL","asyncToGeneratorRuntime","getLSMediaContactProfilePictureUrl","getLSMediaThreadPictureUrl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,a,i){var l=r("getLSMediaThreadPictureUrl")(t);if(l!=null)return(u||(u=n("Promise"))).resolve([l,void 0]);var s,c=(s=o("ReQL")).toArrayAsync(s.leftJoin(s.fromTableAscending(i.tables.participants,[]).getKeyRange(t.threadKey),s.fromTableAscending(i.tables.contacts)).map(function(e){var t=e[0],n=e[1];return n}).filter(Boolean)),d=c.then(function(t){var n=t.length===1&&(e||(e=o("I64"))).equal(t[0].id,a);return t.sort(function(e,t){return e.rank-t.rank}).filter(function(t){return(e||(e=o("I64"))).equal(t.id,a)?n:!0}).map(function(e){return r("getLSMediaContactProfilePictureUrl")(e)})}).then(function(e){var t=e[0];return t!=null?[t,e[1]]:["",void 0]});return d}function d(e,t){return o("ReQL").toArrayAsync(o("MWLSParticipant").getAllInOpenThread(t,o("ReQL").fromTableAscending(t.tables.contacts),e.threadKey))}function m(t,n,a,i,l){if((e||(e=o("I64"))).equal(l,(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))&&i!=null){var u,c=(u=a.find(function(e){return e.contact_id===i.id}))==null?void 0:u.nickname;return c!=null?c:i.name}return o("MWLSThreadTitle").getThreadTitleWithFullName(n.threadName,t,a,n.threadType)}function p(e,t,n,r){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=yield o("MAWChatJid").toThreadKeyMaybe(e.tables,t);return a==null?null:f(e,a,n,r)}),_.apply(this,arguments)}function f(e,t,n,r){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(t));return a==null?null:h(e,a,n,r)}),g.apply(this,arguments)}function h(e,t,n,r){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,o){var a=yield(u||(u=n("Promise"))).all([c(t,r,e),d(t,e)]),i=a[0],l=i[0],s=i[1],p=a[1],_=yield m(r,t,p,void 0,o);return{profilePicUrl:l,secondaryProfilePicUrl:s,threadDisplayName:_,threadKey:t.threadKey,threadType:t.threadType}}),y.apply(this,arguments)}l.getThreadPics=c,l.getThreadParticipants=d,l.getThreadDisplayName=m,l.getThreadDataForSearchResult=p,l.getThreadDataByThreadKey=f}),98);
__d("MWXSpinner.react",["fbt","CometScreenReaderText.react","cr:5028","cr:8931","react","react-strict-dom"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=function(t){return t<=12?12:t<=16?16:t<=24?24:32};function d(e){var t=e.color,a=e.size,i=e.xstyle,l=t==="disabled_DEPRECATED"?"dark":t;return n("cr:8931")!=null?u.jsxs(o("react-strict-dom").html.div,{children:[u.jsx(r("CometScreenReaderText.react"),{text:s._(/*BTDS*/"Carregando...")}),u.jsx(n("cr:8931"),{color:l,isDecorative:!0,size:a,xstyle:i})]}):n("cr:5028")!=null?u.jsx(n("cr:5028"),{color:l==="blue"?"blue":"grey",size:c(16),xstyle:i}):null}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("isInstamadilloDYI",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("665")===!0}l.default=e}),98);/*FB_PKG_DELIM*/
__d("BaseAspectRatioContainer.react",["FBLogger","react","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.aspectRatio,n=e.children,a=e.contentStyle,i=e.testid,l=e.xstyle;if(t<=0)throw r("FBLogger")("comet_ui").mustfixThrow("Aspect ratio must be a non-zero, positive number: %s",t);return s.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,style:[d.container,l,d.dynamicTop(t)],children:n!=null&&s.jsx(o("react-strict-dom").html.div,{style:[d.content,a],children:n})})}u.displayName=u.name+" [from "+i.id+"]";var c={paddingTop:"x1jm3axb",$$css:!0},d={container:{height:"xqtp20y",position:"x1n2onr6",width:"xh8yej3",$$css:!0},content:{alignItems:"x1qjc9v5",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"x1qhh985",borderInlineEndStyle:"x18b5jzi",borderInlineEndWidth:"x10w94by",borderInlineStartStyle:"x1t7ytsu",borderInlineStartWidth:"x14e42zd",borderTopStyle:"x13fuv20",borderTopWidth:"x972fbf",bottom:"x1ey2m1c",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,justifyContent:"x1qughib",marginBottom:"xat24cr",marginInlineEnd:"x14z9mp",marginInlineStart:"x1lziwak",marginTop:"xdj266r",minHeight:"x2lwn1j",minWidth:"xeuugli",paddingBottom:"x18d9i69",paddingInlineEnd:"xyri2b",paddingInlineStart:"x1c1uobl",paddingTop:"xexx8yu",position:"x10l6tqk",top:"x13vifvy",zIndex:"x1ja2u2z",$$css:!0},dynamicTop:function(t){return[c,{"--x-paddingTop":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(100/t+"%")}]}};l.default=u}),98);
__d("LSPlatformClientMaybeEagerly",["LSEagerlyLoadOnMessenger","cr:12301"],(function(t,n,r,o,a,i,l){"use strict";var e=o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(n("cr:12301"));l.default=e}),98);
__d("LSPlatformArmadilloUtils",["MAWMIC","MAWMICSchema","Promise","cr:6998","cr:7349","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("MAWThreadConsistencyLogger").__setRef("LSPlatformArmadilloUtils"),c=(e=n("cr:6998"))!=null?e:n("cr:7349"),d=[];function m(e){d.push(e)}function p(){if(c==null||c.completeSync(),u.load().then(function(e){return e.startMAWThreadConsistencyLogger()}),d.length===0){c==null||c.maybeEndOccamadilloThreadMapping();return}r("promiseDone")((s||(s=n("Promise"))).allSettled(d.map(function(e){return e()})),function(){return c==null?void 0:c.maybeEndOccamadilloThreadMapping()})}function _(){o("MAWMIC").addPoint("ls_init_end")}function f(){o("MAWMIC").addPoint("ls_init_start")}function g(){o("MAWMIC").addPoint("ls_sync_start")}function h(){o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.ls_sync_end)}function y(e){o("MAWMIC").fail("init_sync_failure",e)}l.executeOnThreadMappingEnd=m,l.occamadilloInitEnd=p,l.reportInitEnd=_,l.reportInitStart=f,l.reportSyncStart=g,l.reportSyncEnd=h,l.reportInitSyncFailure=y}),98);
__d("LSPlatformClientSingleton",[],(function(t,n,r,o,a,i){"use strict";var e={contents:void 0};function l(t){e.contents=t}i.saveInstance=l}),66);
__d("isRegisterArmadilloOnIgEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("26380")===!0}l.default=e}),98);
__d("maybeSetupMAWMainThreadLogger",["MessengerLogHistory","cr:6999","cr:7350","isArmadillo","isRegisterArmadilloOnIgEnabled"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("MessengerLogHistory").getInstance("client_init"),u=(e=n("cr:6999"))!=null?e:n("cr:7350"),c=function(){u!=null&&(r("isArmadillo")()||r("isRegisterArmadilloOnIgEnabled")())&&(s.debug("Starting MAW main thread logger setup..."),u.setupMainWaLogger(),s.debug("Starting MAW main thread logger setup success"))};l.maybeSetupMAWMainThreadLogger=c}),98);
__d("LSPlatformClientInstances",["ExecutionEnvironment","FBLogger","LSLocalize","LSPlatformArmadilloUtils","LSPlatformClientSingleton","LSPlatformLsInitLog","LSSuspense","MAWLoggerUtils","MAWMIC","MessengerLogHistory","PromiseAnnotate","asyncToGeneratorRuntime","cr:19622","getErrorSafe","maybeSetupMAWMainThreadLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;n("LSLocalize"),o("MAWLoggerUtils").initMessengerWebLogging();var c=o("MessengerLogHistory").getInstance("client_init"),d=(u||(u=r("LSSuspense"))).makeCollection(),m=!1;function p(t,a,i){o("MAWMIC").startMAWMICFlow(),m||(c.debug("[Occamadillo] Beginning hardcoded init sync"),m=!0,o("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger()),o("LSPlatformArmadilloUtils").reportInitStart();var l=function(t){var e=r("getErrorSafe")(t);throw c.debug("Initializing LSPlatformClient failed"),o("LSPlatformLsInitLog").fail("client_setup_failure",e),o("MAWMIC").fail("client_setup_failure",e),r("FBLogger")("messenger_web").catching(e).warn("[LS] LSPlatformClient initialization failure"),e};return(u||(u=r("LSSuspense"))).getFromCollection(d,t,function(){return(e||(e=o("PromiseAnnotate"))).setDisplayName(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("LSPlatformLsInitLog").addAnnotations({bool:{canUseDOM:(s||(s=r("ExecutionEnvironment"))).canUseDOM,fromReact:i==null?void 0:i.fromReact},string:{configAppId:t.appId,configPlatformName:t.platformName}}),c.debug("Messenger loading UI suspending");try{var e=n("cr:19622")!=null?yield n("cr:19622").maybeEvaluateInitSyncEagerly(t):!1;if(!(s||(s=r("ExecutionEnvironment"))).isInBrowser)return yield t.getDb();var u=a(t,{didEvaluateInitSyncEagerly:e}).then(function(e){return o("LSPlatformLsInitLog").addPoint("start_client"),e.start().then(function(){return c.debug("Initializing LSPlatformClient success"),o("LSPlatformClientSingleton").saveInstance(e),o("LSPlatformArmadilloUtils").reportInitEnd(),e.db})});return yield u}catch(e){l(e)}finally{c.debug("Messenger loading UI unsuspending")}})(),"InitLSPlatformClient")})}var _={getOrInit:p};l.default=_}),98);
__d("LSPlatformLogTooManyPendingTasksForS337085.react",["FBLogger","MWPBumpEntityKey","ReQL","clearTimeout","gkx","justknobx","promiseDone","react","setTimeout","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useRef,m=r("justknobx")._("1134"),p=r("justknobx")._("1135"),_=r("gkx")("24156");function f(){var t=(e||(e=r("useReStore")))(),n=d(null),a=d(!1);return c(function(){var e=t.tables.pending_tasks.subscribe(function(){r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.pending_tasks).take(m)),function(e){var t=e.length;if(t===m){if(n.current!=null)return;n.current=r("setTimeout")(function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","tasks_table_above_threshold"),a.current=!0,_&&r("FBLogger")("lsplatform_tasks","tasks_table_above_threshold").warn("pending tasks table is above threshold. It has %s tasks after %s ms",t,p)},p)}else r("clearTimeout")(n.current),a.current&&_&&r("FBLogger")("lsplatform_tasks","tasks_table_cleared").warn("pending tasks table is now cleared"),a.current=!1})});return function(){e()}},[t]),null}l.default=f}),98);
__d("LSPlatformClientProviderAddons.react",["CometPlaceholder.react","LSPlatformLogTooManyPendingTasksForS337085.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){return s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"LSPlatformClientProviderAddons",children:r("LSPlatformLogTooManyPendingTasksForS337085.react")!=null&&s.jsx(r("LSPlatformLogTooManyPendingTasksForS337085.react"),{})})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("LSPlatformErrorsCatcher.react",["MetaConfig","cr:7070","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t,o=e.children,a=e.fallback,i=d(null),l=i[0],s=i[1];c(function(){var e=n("cr:7070")&&n("cr:7070").subscribe(function(e){s(e)});return function(){e&&e()}},[]);var u=(t=n("cr:7070")==null?void 0:n("cr:7070").lastError())!=null?t:l;return r("MetaConfig")._("66")&&u!=null&&a!=null?a(u):o}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("MAWCondSetup.react",["cr:3921","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("gkx")("20836")?u.Fragment:(e=n("cr:3921"))!=null?e:u.Fragment,d=c;l.default=d}),98);
__d("MAWSetupWrapperOnce.react",["CometPlaceholder.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=s.createContext(!1);function d(e){var t=e.children,n=e.setupComponent,o=u(c);return o?t:s.jsxs(c.Provider,{value:!0,children:[t,s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MAWSetupWrapperOnce",children:n})]})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("MAWCondWrapper.react",["MAWCondSetup.react","MAWSetupWrapperOnce.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.children;return s.jsx(r("MAWSetupWrapperOnce.react"),{setupComponent:s.jsx(r("MAWCondSetup.react"),{}),children:t})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("LSPlatformClientProvider.react",["CometDOMOnlyBoundary.react","CometPlaceholder.react","LSPlatformClientInstances","LSPlatformClientProviderAddons.react","LSPlatformErrorsCatcher.react","LSSuspense","MAWCondWrapper.react","ReStoreProvider.react","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react"));function d(t,n){var o=(e||(e=r("LSSuspense"))).getOrSuspend(t);return r("LSPlatformClientInstances").getOrInit(o,n,{fromReact:!0})}function m(e){var t=e.children,n=e.config,r=e.loadLSPlatformClient,a=d(n,r);return a!=null?c.jsx((s||(s=o("ReStoreProvider.react"))).ReStoreProvider,{db:a,children:t}):t}m.displayName=m.name+" [from "+i.id+"]";function p(e){var t=e.children,n=e.config,o=e.errorFallback,a=e.loadLSPlatformClient,i=e.placeholder,l=c.jsx(r("LSPlatformErrorsCatcher.react"),{fallback:o,children:c.jsx(r("MAWCondWrapper.react"),{children:c.jsx(r("CometPlaceholder.react"),{fallback:i,name:"LSPlatformClientProvider.ClientProvider",children:c.jsxs(m,{config:n,loadLSPlatformClient:a,children:[c.jsx(r("LSPlatformClientProviderAddons.react"),{}),c.jsx(r("CometPlaceholder.react"),{fallback:i,name:"LSPlatformClientProvider.UISuspense",children:t})]})})})});return r("gkx")("12254")?c.jsx(r("CometDOMOnlyBoundary.react"),{children:l}):l}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("LSWaitForTierThree",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSPlatformMqttRealtimeTransport").__setRef("LSWaitForTierThree");function s(){return e.load().then(function(){})}l.default=s}),98);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.react",["LSPlatformClientMaybeEagerly","LSPlatformClientProvider.react","LSPlatformLsInitLog","LSWaitForTierThree","asyncToGeneratorRuntime","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){o("LSPlatformLsInitLog").addPoint("load_ls_platform_client");var n;return r("gkx")("20208")?n=yield r("LSWaitForTierThree")().then(function(){return r("LSPlatformClientMaybeEagerly").load()}):n=yield r("LSPlatformClientMaybeEagerly").load(),o("LSPlatformLsInitLog").addPoint("load_ls_platform_client_loaded"),n.make(e,t)}),c.apply(this,arguments)}function d(e){var t=e.children,n=e.config,o=e.errorFallback,a=e.placeholder;return s.jsx(r("LSPlatformClientProvider.react"),{config:n,errorFallback:o,loadLSPlatformClient:u,placeholder:a,children:t})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("LSCometSSRDatabase",["LSJSInMemoryStorage","LSMetadata"],(function(t,n,r,o,a,i,l){"use strict";var e=r("LSJSInMemoryStorage")(o("LSMetadata").schema);l.default=e}),98);
__d("LSClearEpochBeforeResumeSync",["Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return t.runInTransaction(function(t){var r;return(r=o("ReQL")).toArrayAsync(r.mergeJoin(r.fromTableAscending(t.sync_groups),r.fromTableAscending(t.network_requests).getKeyRange(""))).then(function(r){return(e||(e=n("Promise"))).all(r.map(function(e){var n=e[1];return t.network_requests.put({epochId:void 0,failureCount:n.failureCount,lastDelayedRequestTimestampMs:n.lastDelayedRequestTimestampMs,lastSentTimestampMs:n.lastSentTimestampMs,lastSyncRequestTimestampMs:n.lastSyncRequestTimestampMs,networkTaskIdentifier:n.networkTaskIdentifier,syncDatabaseId:n.syncDatabaseId,taskQueueName:n.taskQueueName})}))}).then(function(){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.network_requests).filter(function(e){return e.taskQueueName!==""})).then(function(r){return(e||(e=n("Promise"))).all(r.map(function(e){return t.network_requests.put({epochId:void 0,failureCount:e.failureCount,lastDelayedRequestTimestampMs:e.lastDelayedRequestTimestampMs,lastSentTimestampMs:e.lastSentTimestampMs,lastSyncRequestTimestampMs:e.lastSyncRequestTimestampMs,networkTaskIdentifier:e.networkTaskIdentifier,syncDatabaseId:e.syncDatabaseId,taskQueueName:e.taskQueueName})}))})})},"readwrite","ui",void 0,i.id+":17").then(function(){return(e||(e=n("Promise"))).resolve()})}l.call=s}),98);
__d("LSDatabaseAfterInitSyncSingleton",["Deferred","PromiseAnnotate"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(r("Deferred")),u=function(t){t.then(function(e){return s.resolve(e)})},c=(e||(e=o("PromiseAnnotate"))).setDisplayName(s.getPromise(),"LSDatabaseSingletonAfterInitSync"),d=function(){return s.isSettled()};l.resolveInitSync=u,l.LSDatabaseAfterInitSyncSingleton=c,l.isInitSyncResolved=d}),98);
__d("LSPlatformGraphQLTransport",["FBLogger","I64","LSDynamicDependencies","LSProgramTarget","MessengerLogHistory","Promise","asyncToGeneratorRuntime","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="LSPlatformGraphQLTransport.ServerError";function c(e,t,n,r,o,a){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,c,d){var m=o("MessengerLogHistory").getInstance("client_sync"),p=null;try{p=yield c(t,a,l,(s||(s=o("I64"))).to_int32(i),d)}catch(e){var _=r("FBLogger")("messenger_web");throw e instanceof Error&&(m.error("Error sending Graphql Request. Type: "+(s||(s=o("I64"))).to_string(i)+" Message: "+(e.message!=null?e.message:"None")),_=_.catching(e),_.debug("Relay or Graphql Server error in LSPlatformGraphqlTransport")),_.mustfixThrow(u)}var f=r("nullthrows")(p),g=f.dependencies,h=f.experiments,y=f.payload,C=f.target,b=r("nullthrows")(y),v=g==null?(e||(e=n("Promise"))).resolve():o("LSDynamicDependencies").downloadRelayDependencies(g),S=Array.from(r("LSProgramTarget").members()).find(function(e){return r("LSProgramTarget").getName(e)===C});return[v,b,h,S]}),d.apply(this,arguments)}l.ServerError=u,l.publish=c}),98);
__d("LSPlatformHardcodedInitSync",["CurrentMessengerUser","FBLogger","I64","IGDWebUtils","LSDatabaseAfterInitSyncSingleton","LSDatabaseProviderType","LSDict","LSIntEnum","LSJson","LSPlatformArmadilloUtils","LSPlatformGraphQLTransport","LSPlatformLsInitLog","LSSyncError","MWPBumpEntityKey","MetaConfig","Promise","QuickPerformanceLogger","ReQL","WAPromiseDelays","asyncToGeneratorRuntime","err","getErrorSafe","gkx","isArmadillo","isInstamadillo","isRegisterArmadilloOnIgEnabled","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=5,m=r("isArmadillo")()||r("isRegisterArmadilloOnIgEnabled")()&&!r("isInstamadillo")(),p=r("gkx")("20017")?r("gkx")("22843"):!0,_=!o("CurrentMessengerUser").isWorkUser()&&!o("IGDWebUtils").isOnInstagramWeb()?p:!1,f=[1,m?95:null,_?104:null].filter(Boolean);function g(e){return e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return(c||(c=n("Promise"))).all(f.map(function(t){return e.network_requests.put({epochId:void 0,failureCount:(s||(s=o("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:s.zero,lastSyncRequestTimestampMs:s.zero,networkTaskIdentifier:void 0,syncDatabaseId:(u||(u=o("LSIntEnum"))).ofNumber(t),taskQueueName:""})}))});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":76").then(function(){return(c||(c=n("Promise"))).resolve()})}function h(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.network_requests).getKeyRange("",(u||(u=o("LSIntEnum"))).ofNumber(t)))}function y(e){return e.runInTransaction(function(e){return(c||(c=n("Promise"))).all(f.map(function(t){return h(e,t).then(function(t){return t!=null?e.network_requests.put({epochId:(s||(s=o("I64"))).zero,failureCount:t.failureCount,lastDelayedRequestTimestampMs:t.lastDelayedRequestTimestampMs,lastSentTimestampMs:t.lastSentTimestampMs,lastSyncRequestTimestampMs:t.lastSyncRequestTimestampMs,networkTaskIdentifier:t.networkTaskIdentifier,syncDatabaseId:t.syncDatabaseId,taskQueueName:t.taskQueueName}):(c||(c=n("Promise"))).resolve()})})).then(function(){})},"readwrite","ui",void 0,i.id+":111")}function C(e){return o("LSDatabaseProviderType").isProviderPersisted(e)&&r("MetaConfig")._("76")?e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield h(e,1);t!=null&&(yield e.network_requests.put({epochId:void 0,failureCount:t.failureCount,lastDelayedRequestTimestampMs:t.lastDelayedRequestTimestampMs,lastSentTimestampMs:t.lastSentTimestampMs,lastSyncRequestTimestampMs:t.lastSyncRequestTimestampMs,networkTaskIdentifier:t.networkTaskIdentifier,syncDatabaseId:t.syncDatabaseId,taskQueueName:t.taskQueueName}))});return function(t){return e.apply(this,arguments)}})(),"readwrite","ui",void 0,i.id+":144"):(c||(c=n("Promise"))).resolve()}function b(t){o("CurrentMessengerUser").isWorkUser()&&(e||(e=r("QuickPerformanceLogger"))).markerPoint(r("qpl")._(1036588047,"310"),t)}function v(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.sync_groups).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(t)))}function S(e,t,n,a){return new(r("LSDict"))().set("database",(u||(u=o("LSIntEnum"))).ofNumber(e)).set("epoch_id",(s||(s=o("I64"))).zero).set("last_applied_cursor",n).set("sync_params",a!=null?a:"{}").set("version",s.of_string(t))}function R(e){var t=0,n=0,r=function(a){return n++,n===e&&o("LSPlatformLsInitLog").addPoint("gql_fetch_end"),t===0&&o("LSPlatformLsInitLog").addPoint("gql_deps_start"),a.then(function(){t===0&&(o("LSPlatformLsInitLog").addPoint("ls_sync_execute_start"),o("LSPlatformLsInitLog").LsSync.markStart()),t++,t===e&&o("LSPlatformLsInitLog").addPoint("gql_deps_end")})};return r}var L=function(){return[(c||(c=n("Promise"))).resolve(),"",void 0,void 0]},E=[],k=[];function I(e,t,n,r,o){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,p){p===void 0&&(p=0);try{var f=o("CurrentMessengerUser").isWorkUser();yield y(i);var h=[1,m?95:void 0,_?104:void 0],T=yield(c||(c=n("Promise"))).all(h.map(function(e){return e!=null?v(i,e):void 0})),D=T[0],x=T[1],$=T[2],P=D==null?void 0:D.currentCursor,N=x==null?void 0:x.currentCursor,M=$==null?void 0:$.currentCursor,w=S(1,t.schemaVersion,P,t.syncParams.mailbox),A=S(95,t.schemaVersion,N,t.syncParams.e2ee),F=S(104,t.schemaVersion,M,t.syncParams.communityExclusive),O={string:{mailboxSync:P!=null?"resume":"init"}};f&&(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(r("qpl")._(1036588047,"310"),O),o("LSPlatformLsInitLog").addPoint("ls_sync_start",O),o("LSPlatformArmadilloUtils").reportSyncStart(),o("LSPlatformLsInitLog").addPoint("gql_fetch_start"),b("start_contact"),b("start_mailbox");var B=R(1+(m?1:0)+(_?1:0)),W=p===0?void 0:{fetchPolicy:"network-only"},q=P!=null?(u||(u=o("LSIntEnum"))).ofNumber(2):(u||(u=o("LSIntEnum"))).ofNumber(1),U=o("LSPlatformGraphQLTransport").publish(l,0,q,o("LSJson").stringify(w),t.executeGraphQLLightSpeedRequest,W).then((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return b("mailbox_synced"),o("LSPlatformLsInitLog").addPoint("gql_mailbox_fetch_end"),yield B(e[0]),e});return function(t){return e.apply(this,arguments)}})()).catch(function(e){var t;return o("LSPlatformArmadilloUtils").reportInitSyncFailure(e),o("LSPlatformLsInitLog").addPoint("gql_mailbox_fetch_failed",{string:{gql_mailbox_fetch_fail_reason:(t=e.message)!=null?t:"unknown"}}),r("FBLogger")("messenger_web").catching(e).mustfix("Failed to sync mailbox"),L()});o("LSPlatformLsInitLog").addAnnotations({int:{mailbox_sync_request_type:(s||(s=o("I64"))).to_int32(q)}});var V=m?o("LSPlatformGraphQLTransport").publish(l,2,N!=null?(u||(u=o("LSIntEnum"))).ofNumber(2):(u||(u=o("LSIntEnum"))).ofNumber(1),o("LSJson").stringify(A),t.executeGraphQLLightSpeedRequest,W).then((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return o("LSPlatformLsInitLog").addPoint("gql_e2ee_fetch_end"),yield B(e[0]),e});return function(t){return e.apply(this,arguments)}})()).catch(function(e){var t;return o("LSPlatformArmadilloUtils").reportInitSyncFailure(e),o("LSPlatformLsInitLog").addPoint("gql_e2ee_fetch_failed",{string:{gql_e2ee_fetch_fail_reason:(t=e.message)!=null?t:"unknown"}}),r("FBLogger")("messenger_web").catching(e).mustfix("Failed to sync e2ee mailbox"),L()}):(c||(c=n("Promise"))).resolve(L()),H=_?o("LSPlatformGraphQLTransport").publish(l,3,M!=null?(u||(u=o("LSIntEnum"))).ofNumber(2):(u||(u=o("LSIntEnum"))).ofNumber(1),o("LSJson").stringify(F),t.executeGraphQLLightSpeedRequest).then((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return o("LSPlatformLsInitLog").addPoint("gql_cm_fetch_end"),yield B(e[0]),e});return function(t){return e.apply(this,arguments)}})()).catch(function(e){var t;return o("LSPlatformArmadilloUtils").reportInitSyncFailure(e),o("LSPlatformLsInitLog").addPoint("gql_cm_fetch_failed",{string:{gql_cm_fetch_fail_reason:(t=e.message)!=null?t:"unknown"}}),r("FBLogger")("messenger_web").catching(e).mustfix("Failed to sync Community Exclusive mailbox"),L()}):(c||(c=n("Promise"))).resolve(L()),G=yield c.all([U,V,H]);for(var z of G){var j=z[0],K=z[1],Q=z[2],X=z[3];K!==""&&(yield a({experiments:Q,priority:"ui",syncScript:K,target:X}))}var Y=[];r("gkx")("20016")&&(Y.push({name:"mailbox",syncError:o("LSSyncError").getLastSyncError(1)}),Y.push({name:"communityExclusive",syncError:o("LSSyncError").getLastSyncError(104)}),Y.push({name:"e2ee",syncError:o("LSSyncError").getLastSyncError(95)}));for(var J of Y){var Z,ee=(Z=J.syncError)==null?void 0:Z.get("error_msg");if(ee!=null)throw E.push(J.name),o("LSPlatformLsInitLog").addAnnotations({string_array:{failedGqlQuery:E}}),r("err")(String(ee))}P!=null&&(yield C(i)),o("LSPlatformLsInitLog").LsSync.markEnd(),b("sync_completed"),o("LSPlatformLsInitLog").addPoint("ls_sync_execute_end"),o("LSPlatformArmadilloUtils").reportSyncEnd(),o("LSPlatformLsInitLog").addPoint("ls_sync_end"),m&&o("LSPlatformArmadilloUtils").occamadilloInitEnd(),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_graphql","init_sync.success"),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_ls","init_sync.success"),o("LSDatabaseAfterInitSyncSingleton").resolveInitSync(c.resolve(i))}catch(e){var te,ne=r("getErrorSafe")(e);if(k.push((te=ne.message)!=null?te:"unknown"),p<=d&&r("gkx")("20017"))return o("LSPlatformLsInitLog").addPoint("ls_sync_retry_"+p,{int:{retryCount:p},string_array:{retryReasons:k}}),o("LSSyncError").clearSyncErrors(),o("WAPromiseDelays").delayMs(p*1e3).then(function(){return I(t,a,i,l,p+1)});o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_ls","init_sync.fail"),b("sync_failed"),o("LSPlatformLsInitLog").fail("init_sync_failure",ne);try{o("LSPlatformArmadilloUtils").reportInitSyncFailure(ne)}catch(e){}return r("FBLogger")("messenger_web").catching(ne).mustfix("Encountered an error while performining preloaded init sync request via graphql"),g(i)}}),T.apply(this,arguments)}l.sendHardcodedInitSync=I}),98);
__d("LSPlatformSyncSystemMaybeEagerly",["LSEagerlyLoadOnMessenger","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSPlatformSyncSystem").__setRef("LSPlatformSyncSystemMaybeEagerly");function s(){return o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(e).load()}l.default=s}),98);
__d("LSPlatformClientInit",["FBLogger","LSClearEpochBeforeResumeSync","LSDataTraceFlushDeferred","LSDatabaseAfterInitSyncSingleton","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSFactory","LSIntEnum","LSInternetConnectionState","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","LSPlatformSyncSystemMaybeEagerly","MessengerLogHistory","Promise","asyncToGeneratorRuntime","cr:3411","cr:5083","cr:6044","cr:7528","cr:8131","emptyFunction","getErrorSafe","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MessengerLogHistory").getInstance("client_init");function c(e){var t=r("emptyFunction");return n("cr:8131")!=null&&r("gkx")("23914")&&(t=n("cr:8131").listenForChangesToBackupState(e)),function(){t&&t()}}function d(e,t){var n=t==="Connected"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").CONNECTED):(s||(s=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").NOT_CONNECTED);u.debug("Platform client sync connection status: ",t),r("promiseDone")(e.runInTransaction(function(e){return r("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(r("LSFactory")(e),{internetConnectionState:n})},"readwrite",void 0,void 0,i.id+":77"),function(){u.debug("Platform client sync connection status set successfully")},function(e){throw u.error("Platform client sync connection status set failed: "+(e==null?void 0:e.message)),e})}function m(e,t,n,r,o,a){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,s,m){var p;u.debug("Platform client sync starting..."),(p=o("LSPlatformLsInitLog")).addPoint("onstart_callback"),l(),p.addPoint("onstart_callback_end"),u.debug("Getting datascript evaluator..."),p.addPoint("ds_eval_registration");var _=yield a.getEval();u.debug("Getting datascript evaluator success");var f;try{f=n("cr:3411")!=null?n("cr:3411").registerEval(_)()(t):_()(t)}catch(e){r("FBLogger")("ls_web_init").catching(r("getErrorSafe")(e)).mustfix("fail to register datascriptEvaluator"),f=_()(t)}o("LSPlatformLsInitLog").addPoint("ds_eval_registration_end"),u.debug("Clearing epoch before resume sync..."),m.didEvaluateInitSyncEagerly||(o("LSPlatformLsInitLog").addPoint("ls_clear_epoch"),yield o("LSClearEpochBeforeResumeSync").call(t),o("LSPlatformLsInitLog").addPoint("ls_clear_epoch_end"),u.debug("Clearing epoch before resume sync success"),o("LSPlatformLsInitLog").addPoint("create_client_end"),a.sendHardcodedInitSync&&(u.debug("Starting hard-coded init sync..."),yield o("LSPlatformHardcodedInitSync").sendHardcodedInitSync(a,f,t,i),u.debug("Starting hard-coded init sync success"))),o("LSDatabaseAfterInitSyncSingleton").resolveInitSync((e||(e=n("Promise"))).resolve(t)),u.debug("Starting realtime transport");var g=yield a.realtimeUnderylingTransport();o("LSPlatformLsInitLog").addPoint("realtime_underlying_transport_end");var h=yield n("cr:5083").load().then(function(e){var t=e.LSPlatformRealtimeTransport;return t(g,a.appId,i)});o("LSPlatformLsInitLog").addPoint("platform_realtime_transport_end"),u.debug("Starting task system");var y=yield e.all([n("cr:7528").load(),n("cr:6044").load()]).then(function(e){var n=e[0],r=e[1];return new n(t,new r(t,h,f,a.schemaVersion))});o("LSPlatformLsInitLog").addPoint("platform_task_system_end"),u.debug("Starting sync system");var C=null;r("promiseDone")(r("LSPlatformSyncSystemMaybeEagerly")(),function(e){C=e(t,h,f,a.schemaVersion,i,a.executeGraphQLLightSpeedRequest)}),u.debug("Starting backup state listeners");var b=c(t);o("LSPlatformLsInitLog").addPoint("init_listeners_backup_state_end");var v;return u.debug("Watching for expired traces"),r("promiseDone")(o("LSDataTraceFlushDeferred").watchForExpiredTraces(t).then(function(e){v=e})),u.debug("Subscribing to mqtt sync status change events"),h.onConnectionStatusChange(function(e){d(t,e)}),u.debug("Platform client sync starting sucess"),o("LSPlatformLsInitLog").endSuccess(),{cleanup:function(){var e;u.debug("Platform client sync cleaning up"),s(t),y==null||y.cleanup(),(e=C)==null||e.cleanup(),h.cleanup(),b(),v==null||v()},db:t}}),p.apply(this,arguments)}l.init=m}),98);
__d("LSPlatformClient",["ExecutionEnvironment","FBLogger","LSCometSSRDatabase","LSDatabaseProviderType","LSPlatformClientInit","LSPlatformDeviceId","LSPlatformLsInitLog","MAWMIC","MAWMICSchema","Promise","asyncToGeneratorRuntime","cr:10018","emptyFunction","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("emptyFunction").thatReturns((s||(s=n("Promise"))).resolve());function c(e,t,a){var i,l=(function(){var l=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=o("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");i=yield o("LSPlatformClientInit").init(e,t,n,r("emptyFunction"),r("emptyFunction"),a)});return function(){return l.apply(this,arguments)}})();return{cleanup:function(){var e;(e=i)==null||e.cleanup()},db:e,start:l}}function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a){if(n("cr:10018")==null)throw r("FBLogger")("messenger_web").mustfixThrow("LSPlatformClientWithLock is null for PDB enabled");var i=yield n("cr:10018").make(e,t,a);return i.isTabWithoutClient()===!0&&(o("MAWMIC").addPoint("ls_init_end"),o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_end),o("MAWMIC").addBoolAnnotation("LsInitSkipped",!0),o("LSPlatformLsInitLog").addPoint("no_ls_sync"),o("LSPlatformLsInitLog").endSuccess()),{cleanup:r("emptyFunction"),db:e,start:u}}),m.apply(this,arguments)}function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){if(o("LSPlatformLsInitLog").addPoint("make_client"),(e||(e=r("ExecutionEnvironment"))).canUseDOM){o("LSPlatformLsInitLog").addPoint("create_client_get_db");var i=yield t.getDb();if(o("LSPlatformLsInitLog").addPoint("create_client_start"),o("LSDatabaseProviderType").isProviderPersisted(i)&&n("cr:10018")!==null)try{return d(i,t,a)}catch(e){throw o("LSPlatformLsInitLog").addAnnotations({string:{client_for_pdb_error:r("getErrorSafe")(e).message}}),o("LSPlatformLsInitLog").fail("client_for_pdb_error"),e}return c(i,t,a)}return{cleanup:r("emptyFunction"),db:r("LSCometSSRDatabase"),start:u}}),_.apply(this,arguments)}l.make=p}),98);
__d("LSPlatformClientProviderWithImmediateLoadingStrategy.react",["LSPlatformClient","LSPlatformClientProvider.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.children,n=e.config,a=e.errorFallback,i=e.placeholder;return s.jsx(r("LSPlatformClientProvider.react"),{config:n,errorFallback:a,loadLSPlatformClient:o("LSPlatformClient").make,placeholder:i,children:t})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],t=[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request_for_igd",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",selections:t},params:{id:"29212911238354531",metadata:{},name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("LSPlatformGraphQLLightspeedRequestForIGD",["CometRelay","LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql","XPlatRelayEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r,a,i,l){return o("CometRelay").fetchQuery(o("XPlatRelayEnvironment").getRelayEnvironment(),e!==void 0?e:e=n("LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql"),{deviceId:t,requestId:r,requestPayload:a,requestType:i}).toPromise().then(function(e){return e==null?void 0:e.lightspeed_web_request_for_igd})}l.default=s}),98);
__d("LSPlatformInstagramConfig",["CurrentAppID","IGDOverLSMqttChannel","LSDatabaseSingleton","LSDatascriptEvaluatorMaybeDeferred","LSPlatformGraphQLLightspeedRequestForIGD","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSSuspense","LSVersion","Promise","getMWLSRegion"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("CurrentAppID").getAppID(),d=r("getMWLSRegion")(),m=c==null?"1217981644879628":c;function p(){return(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton}function _(e,t){return r("LSPlatformMqttRealtimeTransport")(r("LSVersion"),t,{getInstance:o("IGDOverLSMqttChannel").getInstance,shutdownAndClear:o("IGDOverLSMqttChannel").shutdownAndClear})}function f(){return r("LSDatascriptEvaluatorMaybeDeferred")()}var g={appId:m,executeGraphQLLightSpeedRequest:r("LSPlatformGraphQLLightspeedRequestForIGD"),getDb:p,getEval:f,platformName:"Instagram",realtimeUnderylingTransport:function(){return(s||(s=n("Promise"))).resolve(_)},region:d,schemaVersion:r("LSVersion"),sendHardcodedInitSync:!0,syncParams:r("LSPlatformMessengerSyncParams")},h=(e||(e=r("LSSuspense"))).makeWithValue(g);l.configEagerlyLoaded=h}),98);
__d("IGDPageSetup.react",["CometErrorBoundary.react","CometPlaceholder.react","CurrentUser","I64","IGDRouteProvider.react","LSPlatformClientProviderWithDeferredLoadingStrategy.react","LSPlatformClientProviderWithImmediateLoadingStrategy.react","LSPlatformInstagramConfig","MWLSThreadDisplayContext","MWPActor.react","cr:497","cr:7347","deferredLoadComponent","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s.Fragment,m=(e=n("cr:497"))!=null?e:n("cr:7347"),p=r("deferredLoadComponent")(r("requireDeferred")("IGDInboxErrorState.react").__setRef("IGDPageSetup.react")),_=function(t){if(!t)return function(e){return c.jsx(p,{error:e})}},f=(u||(u=o("I64"))).of_string(r("CurrentUser").getEIMU());function g(e){var t=o("react-compiler-runtime").c(15),n=e.children,a=e.disableRouteProvider,l=e.placeholder,s=e.shouldUseDeferredLoadingStrategy,u=e.threadDisplayType,p=a===void 0?!1:a,g=l===void 0?null:l,h=s===void 0?!1:s,y=r(h?"LSPlatformClientProviderWithDeferredLoadingStrategy.react":"LSPlatformClientProviderWithImmediateLoadingStrategy.react"),C=p?d:o("IGDRouteProvider.react").IGDRouteContextProvider,b;t[0]!==h?(b=_(h),t[0]=h,t[1]=b):b=t[1];var v;t[2]!==n?(v=m==null?n:c.jsx(m,{children:n}),t[2]=n,t[3]=v):v=t[3];var S;t[4]!==v||t[5]!==u?(S=c.jsx(o("MWLSThreadDisplayContext").MWLSThreadDisplayContextProvider,{value:u,children:v}),t[4]=v,t[5]=u,t[6]=S):S=t[6];var R;t[7]!==C||t[8]!==S?(R=c.jsx(o("MWPActor.react").MWPActorProvider,{actorId:f,children:c.jsx(C,{children:S})}),t[7]=C,t[8]=S,t[9]=R):R=t[9];var L;return t[10]!==y||t[11]!==g||t[12]!==b||t[13]!==R?(L=c.jsx(r("CometErrorBoundary.react"),{fallback:void 0,children:c.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:c.jsx(y,{config:o("LSPlatformInstagramConfig").configEagerlyLoaded,errorFallback:b,placeholder:g,children:R})})}),t[10]=y,t[11]=g,t[12]=b,t[13]=R,t[14]=L):L=t[14],L}l.default=g}),98);
__d("IGSignalingListenerDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("IgSignalingListener").__setRef("IGSignalingListenerDeferred"),s=e;l.default=s}),98);
__d("IGWebCallWindowControllerLoader",["FBLogger","JSResourceForInteraction","Promise","asyncToGeneratorRuntime","getErrorSafe","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("RTWebCallWindowOpener").__setRef("IGWebCallWindowControllerLoader"),u=r("requireDeferred")("ZenonCallWindowController").__setRef("IGWebCallWindowControllerLoader"),c=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),d=(function(){function t(e,t){this.$1=null,this.$2=e,this.$3=t}var o=t.prototype;return o.init=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var t=yield(e||(e=n("Promise"))).all([u.load(),s.load()]),o=t[0],a=t[1];this.$1=new o(this.$2,{callWindowInitializerResource:this.$3,callWindowOpener:new a,uriBuilderResource:r("JSResourceForInteraction")("IGCallUriBuilder").__setRef("IGWebCallWindowControllerLoader")})}catch(e){r("FBLogger")("rtc_www").catching(r("getErrorSafe")(e)).warn("Failed to initialize call window controller")}});function o(){return t.apply(this,arguments)}return o})(),o.initCall=function(t){if(this.$1)return this.$1.initCall(t);throw new c},t})();d.ResourceNotReadyError=c,l.default=d}),98);
__d("IGWebPreCallContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).createContext,u=s(null);l.default=u}),98);
__d("ZenonCallInviteModelLoader",["BaseEventEmitter","Promise","asyncToGeneratorRuntime","emptyFunction","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("ZenonCallInviteModel").__setRef("ZenonCallInviteModelLoader"),u=r("requireDeferred")("delegateZenonCallInviteModel").__setRef("ZenonCallInviteModelLoader"),c=(function(t){function o(e){var n;return n=t.call(this)||this,n.$ZenonCallInviteModelLoader$p_1=null,n.getCurrentInvite=function(){return null},n.startListening=function(e){this.$ZenonCallInviteModelLoader$p_1=e},n.stopListening=function(){this.$ZenonCallInviteModelLoader$p_1=null},n.dismiss=r("emptyFunction"),n.accept=r("emptyFunction"),n.decline=r("emptyFunction"),n.$ZenonCallInviteModelLoader$p_2=e,n}babelHelpers.inheritsLoose(o,t);var a=o.prototype;return a.init=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield(e||(e=n("Promise"))).all([s.load(),u.load()]),r=t[0],o=t[1],a=new r(this.$ZenonCallInviteModelLoader$p_2);o(this,a),this.$ZenonCallInviteModelLoader$p_1!==null&&a.startListening(this.$ZenonCallInviteModelLoader$p_1)});function r(){return t.apply(this,arguments)}return r})(),o})(r("BaseEventEmitter"));l.default=c}),98);
__d("ZenonIncomingRingSDK",["BaseEventEmitter","RTWebIncomingRingConfiguration","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("ZenonParentCallsManager").__setRef("ZenonIncomingRingSDK"),s=[1,2,15,16],u=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.$ZenonIncomingRingSDK$p_1=[],e.$ZenonIncomingRingSDK$p_2=[],babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.init=function(n){var t=this;this.$ZenonIncomingRingSDK$p_3=n,e.onReady(function(e){t.callsManager==null&&(t.callsManager=new e(n));var r=t.callsManager;for(r.addListener("unsupportedRing",function(e){return t.emit("unsupportedRing",e)}),r.addListener("incomingRing",function(e){var n;e.actorID!=null&&!((n=t.$ZenonIncomingRingSDK$p_3)!=null&&n.enableIncomingActorCalls)||t.emit("incomingRing",e)}),r.addListener("ringCancel",function(e){return t.emit("ringCancel",e)}),r.initListeners(t.$ZenonIncomingRingSDK$p_1);t.$ZenonIncomingRingSDK$p_2.length>0;){var o=t.$ZenonIncomingRingSDK$p_2.shift();r.startOutgoingCallIntent(o.nonce,o.callParams)}})},r.initListeners=function(t){var e=this.callsManager;if(e!=null)e.initListeners(t);else{var n;(n=this.$ZenonIncomingRingSDK$p_1).push.apply(n,t)}},r.removeListeners=function(t){var e=this;if(this.callsManager!=null)this.callsManager.removeListeners(t);else{var n=function(n){e.$ZenonIncomingRingSDK$p_1=e.$ZenonIncomingRingSDK$p_1.filter(function(e){return e!==n})};for(var r of t)n(r)}},r.isCallSupported=function(t){switch(t.type){case"thread":if(this.$ZenonIncomingRingSDK$p_3&&s.includes(t.threadType)){var e;return(e=o("RTWebIncomingRingConfiguration").isSupportedClient())!=null?e:!1}break;default:return!1}return!1},r.startCallIntent=function(t,n){this.callsManager?this.callsManager.startOutgoingCallIntent(t,n):this.$ZenonIncomingRingSDK$p_2.push({callParams:n,nonce:t})},n})(r("BaseEventEmitter"));l.default=u}),98);
__d("IGWebPreCallContextSingleton",["FBLogger","IGWebCallWindowControllerLoader","JSResource","ZenonCallInviteModelLoader","ZenonIncomingRingSDK","cr:27495","getErrorSafe","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=!1,s;function u(e){if(!r("gkx")("25307"))return null;if(s!=null)return s;try{var t=new(r("ZenonIncomingRingSDK"));return s={callInviteModel:new(r("ZenonCallInviteModelLoader"))(t),callWindowController:new(r("IGWebCallWindowControllerLoader"))(e,r("JSResource")("IGWebCallWindowInitializer").__setRef("IGWebPreCallContextSingleton")),incomingRingSDK:t},s}catch(e){return r("FBLogger")("rtc_www").catching(r("getErrorSafe")(e)).mustfix("Pre-call context initialization failed! This breaks all calling!"),null}}function c(t){return r("gkx")("25307")?(e||(e=!0,r("promiseDone")(s.callInviteModel.init()),r("promiseDone")(s.callWindowController.init()),s.incomingRingSDK.init({enableIncomingActorCalls:!1,relayEnvironment:t}),r("promiseDone")(n("cr:27495").load(),function(e){s.incomingRingSDK.initListeners([new e])})),s):null}l.create=u,l.init=c}),98);
__d("IGWebPreCallProvider.react",["CometRelay","IGWebPreCallContext","IGWebPreCallContextSingleton","react","react-compiler-runtime","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t=o("react-compiler-runtime").c(9),n=e.children,a=o("CometRelay").useRelayEnvironment(),i;t[0]!==a?(i=function(){return o("IGWebPreCallContextSingleton").create({relayEnvironment:a})},t[0]=a,t[1]=i):i=t[1];var l=r("useStable")(i),c,d;t[2]!==l||t[3]!==a?(c=function(){l&&(o("IGWebPreCallContextSingleton").init(a),l.callInviteModel.startListening({callsBlocked:!1}))},d=[l,a],t[2]=l,t[3]=a,t[4]=c,t[5]=d):(c=t[4],d=t[5]),u(c,d);var m;return t[6]!==n||t[7]!==l?(m=s.jsx(r("IGWebPreCallContext").Provider,{value:l,children:n}),t[6]=n,t[7]=l,t[8]=m):m=t[8],m}l.default=c}),98);
__d("LSBeginHandlingSyncForSyncGroup",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(1).fetch([[[e[0]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=void 0:(r=a.item,n[9]=new t.Map,n[9].set("group_id",r.groupId),n[9].set("current_cursor",r.currentCursor),n[9].set("sync_status",r.syncStatus),n[9].set("sync_params",r.syncParams),n[9].set("send_sync_params",r.sendSyncParams),n[9].set("min_time_to_sync_timestamp_ms",r.minTimeToSyncTimestampMs),n[9].set("can_ignore_timestamp",r.canIgnoreTimestamp),n[9].set("sync_channel",r.syncChannel),n[9].set("last_sync_request_timestamp_ms",r.lastSyncRequestTimestampMs),n[0]=n[9])})},function(r){var o;return n[0]?n[2]=!1:n[2]=!0,n[2]?t.resolve((o=[e[0],void 0,t.i64.cast([0,4]),void 0,!1],n[3]=o[0],n[4]=o[1],n[5]=o[2],n[6]=o[3],n[7]=o[4],o)):t.sequence([function(e){return n[9]=n[0].get("group_id"),t.filter(t.db.table(3).fetch(),function(e){return t.i64.neq(e.epochId,void 0)&&t.i64.eq(e.syncDatabaseId,n[9])}).next().then(function(e,t){var r=e.done,o=e.value;return r?n[10]=!1:(t=o.item,n[10]=!0)})},function(r){var o;return n[10]?t.resolve((n[17]=n[0].get("group_id"),o=[n[17],void 0,t.i64.cast([0,4]),void 0,!1],n[12]=o[0],n[13]=o[1],n[14]=o[2],n[15]=o[3],n[16]=o[4])):t.sequence([function(r){return n[17]=t.i64.of_float(Date.now()),n[18]=n[0].get("min_time_to_sync_timestamp_ms"),n[19]=n[0].get("last_sync_request_timestamp_ms"),n[20]=n[0].get("can_ignore_timestamp"),n[20]&&e[1]||t.i64.ge(n[17],n[18])?t.sequence([function(r){return e[1]?t.resolve(n[28]=t.i64.cast([0,0])):t.sequence([function(e){return n[29]=n[0].get("group_id"),t.db.table(3).fetch([[["",n[29]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[30]=t.i64.cast([0,0]):(r=a.item,n[30]=r.failureCount)})},function(e){return n[32]=t.i64.mul(t.i64.sub(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.lt(t.i64.cast([0,15]),n[30])?t.i64.cast([0,15]):n[30])),t.i64.cast([0,1])),t.i64.cast([0,500])),n[33]=t.i64.sub(t.i64.add(n[19]==null?t.i64.cast([0,0]):n[19],t.i64.lt(n[32],t.i64.cast([0,3e4]))?n[32]:t.i64.cast([0,3e4])),n[17]),n[28]=t.i64.gt(n[33],t.i64.cast([0,0]))?n[33]:t.i64.cast([0,0])}])},function(e){return n[21]=n[28]}]):t.resolve(n[21]=t.i64.sub(n[18],n[17]))},function(e){return n[22]=n[0].get("group_id"),t.i64.gt(n[21],t.i64.cast([0,0]))?t.sequence([function(e){return n[28]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(3).fetch(),function(e){return t.i64.eq(e.syncDatabaseId,n[22])}),function(e){var t=e.update,r=e.item;return t({lastDelayedRequestTimestampMs:n[28]})})},function(e){var r;return r=[n[22],n[21],t.i64.cast([0,3]),void 0,!1],n[23]=r[0],n[24]=r[1],n[25]=r[2],n[26]=r[3],n[27]=r[4],r}]):t.sequence([function(e){return n[28]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[n[22]]]]),function(e){var t=e.update,r=e.item;return t({lastSyncRequestTimestampMs:n[28]})})},function(e){return n[29]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(3).fetch(),function(e){return t.i64.eq(e.syncDatabaseId,n[22])}),function(e){var t=e.update,r=e.item;return t({lastSyncRequestTimestampMs:n[29]})})},function(e){return n[30]=n[0].get("group_id"),n[31]=t.i64.of_float(Date.now()),n[32]=t.i64.random(),n[45]=t.i64.and_(t.i64.or_(t.i64.lsl_(n[31],t.i64.to_int32(t.i64.cast([0,22]))),t.i64.and_(n[32],t.i64.cast([0,4194303]))),t.i64.cast([2147483647,4294967295])),t.db.table(3).fetch([[["",n[30]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?t.db.table(3).add({syncDatabaseId:n[30],taskQueueName:"",failureCount:t.i64.cast([0,0]),lastSentTimestampMs:t.i64.cast([0,0]),lastSyncRequestTimestampMs:t.i64.cast([0,0]),epochId:n[45]}):(r=a.item,t.forEach(t.db.table(3).fetch([[["",n[30]]]]),function(e){var t=e.update,r=e.item;return t({epochId:n[45]})}))})},function(e){return n[34]=n[0].get("group_id"),t.db.table(3).fetch([[["",n[34]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[35]=t.i64.cast([0,0]):(r=a.item,n[35]=r.failureCount)})},function(e){var r;return n[37]=n[0].get("send_sync_params"),n[38]=n[0].get("sync_params"),n[39]=n[0].get("current_cursor"),n[40]=new t.Map,n[40].set("database",n[34]),n[40].set("version",t.i64.cast([-1,4294967295])),n[40].set("epoch_id",n[45]),n[40].set("last_applied_cursor",n[39]),n[40].set("sync_params",n[37]?n[38]:void 0),n[40].set("failure_count",t.i64.gt(n[35],t.i64.cast([0,0]))?n[35]:void 0),n[41]=n[0].get("current_cursor"),n[41]===void 0?n[42]=t.i64.cast([0,1]):n[42]=t.i64.cast([0,2]),n[43]=new t.Map,n[43].set("type",n[42]),n[43].set("request_payload",n[40]),n[44]=n[0].get("sync_channel"),r=[n[30],void 0,t.i64.cast([0,1]),n[43],t.i64.eq(n[44],t.i64.cast([0,2]))],n[23]=r[0],n[24]=r[1],n[25]=r[2],n[26]=r[3],n[27]=r[4]}])},function(e){var t;return t=[n[23],n[24],n[25],n[26],n[27]],n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=t[3],n[16]=t[4],t}])},function(e){var t;return t=[n[12],n[13],n[14],n[15],n[16]],n[3]=t[0],n[4]=t[1],n[5]=t[2],n[6]=t[3],n[7]=t[4],t}])},function(e){return n[8]=new t.Map,n[8].set("sync_group_id",n[3]),n[8].set("next_sync_ms",n[4]),n[8].set("work_item_type",n[5]),n[8].set("network_payload",n[6]),n[8].set("skip_realtime_gateway",n[7]),r[0]=n[8]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreBeginHandlingSyncForSyncGroupStoredProcedure",e.__tables__=["sync_groups","network_requests"],a.exports=e}),null);
__d("LSBeginHandlingSync",["LSBeginHandlingSyncForSyncGroup"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.createArray(),t.forEach(t.db.table(1).fetch(),function(o){var a=o.item;return t.sequence([function(o){return t.storedProcedure(n("LSBeginHandlingSyncForSyncGroup"),a.groupId,e[0]).then(function(e){var t;return t=e,r[1]=t[0],t})},function(e){return r[2]=(r[0].push(r[1]),r[0])}])})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreBeginHandlingSyncStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSBeginHandlingSyncForSyncGroupStoredProcedure",["LSBeginHandlingSyncForSyncGroup","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBeginHandlingSyncForSyncGroup"),a.syncGroupId,a.ignoreSoftDelay);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSBeginHandlingSyncStoredProcedure",["LSBeginHandlingSync","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBeginHandlingSync"),a.ignoreSoftDelay);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSIssueNewFireAndForgetTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return n[1]=t.i64.to_string(e[1]),n[0]=t.i64.of_float(Date.now()),t.db.table(5).add({taskId:void 0,queueName:e[0],context:n[1],taskValue:e[2],enqueueTimestampMs:n[0]})},function(r){return t.filter(t.db.table(5).fetchDesc(),function(t){return t.queueName===e[0]&&t.context===n[1]&&t.taskValue===e[2]}).next().then(function(e,r){var o=e.done,a=e.value;return o?n[2]=t.i64.cast([-1,4294967295]):(r=a.item,n[2]=r.taskId)})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreIssueNewFireAndForgetTaskStoredProcedure",e.__tables__=["pending_fire_and_forget_tasks"],a.exports=e}),null);
__d("LSCheckThreadConsistency",["LSIssueNewFireAndForgetTask","LSIssueNewTask","gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(a){return r("gkx")("15730")?(o[0]=new t.Map,o[0].set("threads",e[0]),o[0].set("metadata",e[1]),o[1]=t.toJSON(o[0]),t.storedProcedure(n("LSIssueNewFireAndForgetTask"),"fire_forget",t.i64.cast([0,18]),o[1])):(o[0]=new t.Map,o[0].set("threads",e[0]),o[0].set("metadata",e[1]),o[1]=t.toJSON(o[0]),t.storedProcedure(n("LSIssueNewTask"),"check-thread-consistency",t.i64.cast([0,160019]),o[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0])))},function(e){return t.resolve(a)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCheckThreadConsistencyStoredProcedure",e.__tables__=[];var s=e;l.default=s}),98);
__d("LSCheckThreadConsistencyStoredProcedure",["LSCheckThreadConsistency","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSCheckThreadConsistency"),a.threads,a.metadata);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSPlatformEvaluateInitSyncEagerly",["ExecutionEnvironment","FBLogger","LSClearEpochBeforeResumeSync","LSDatabaseProviderType","LSPlatformDeviceId","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","asyncToGeneratorRuntime","cr:3411","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){o("LSPlatformLsInitLog").addPoint("ds_eval_registration");var a=yield t(),i;try{i=n("cr:3411")!=null?n("cr:3411").registerEval(a)()(e):a()(e)}catch(t){var l=r("getErrorSafe")(t);r("FBLogger")("ls_web_init").catching(l).mustfix("fail to register datascriptEvaluator"),i=a()(e)}return o("LSPlatformLsInitLog").addPoint("ds_eval_registration_end"),i});return function(n,r){return e.apply(this,arguments)}})();function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){if(!(e||(e=r("ExecutionEnvironment"))).canUseDOM||!t.sendHardcodedInitSync)return!1;var n=t.eagerEvaluatorForInitSync;if(n==null)return!1;var a=yield t.getDb();if(o("LSDatabaseProviderType").isProviderPersisted(a))return!1;o("LSPlatformLsInitLog").addPoint("evaluate_init_sync_start");var i=o("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral"),l=yield s(a,n);return yield o("LSClearEpochBeforeResumeSync").call(a),yield o("LSPlatformHardcodedInitSync").sendHardcodedInitSync(t,l,a,i),o("LSPlatformLsInitLog").addPoint("evaluate_init_sync_end"),!0}),c.apply(this,arguments)}l.getDatascriptEvaluator=s,l.maybeEvaluateInitSyncEagerly=u}),98);
__d("LSPlatformSyncSystem",["FBLogger","I64","LSBeginHandlingSyncForSyncGroupStoredProcedure","LSBeginHandlingSyncStoredProcedure","LSDatabaseProviderType","LSFactory","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformGraphQLTransport","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSShape","LSVec","MWPBumpEntityKey","MessengerLogHistory","Promise","ReQL","asyncToGeneratorRuntime","gkx","promiseDone","qex","throttle"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,a,l,c,d,m){var p=o("MessengerLogHistory").getInstance("client_sync"),_=new(r("LSPlatformServerResponseHandler"))(l),f=o("LSDatabaseProviderType").isProviderPersisted(t),g=function(r){return t.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.network_requests).getKeyRange("",r));t!=null&&(yield e.network_requests.put({epochId:void 0,failureCount:(s||(s=o("I64"))).add(t.failureCount,s.one),lastDelayedRequestTimestampMs:t.lastDelayedRequestTimestampMs,lastSentTimestampMs:t.lastSentTimestampMs,lastSyncRequestTimestampMs:t.lastSyncRequestTimestampMs,networkTaskIdentifier:t.networkTaskIdentifier,syncDatabaseId:t.syncDatabaseId,taskQueueName:t.taskQueueName}))});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":78")},h=new(r("LSPlatformRequestScheduler")),y=(function(){var i=n("asyncToGeneratorRuntime").asyncToGenerator(function*(i,p){var g=o("LSShape").toRecord(p),h=o("LSShape").toRecord(g.request_payload),y=g.type,C=r("LSPlatformRequestId").generate(),b=o("LSJson").stringify(o("LSShape").ofRecord({database:h.database,epoch_id:h.epoch_id,failure_count:h.failure_count,last_applied_cursor:h.last_applied_cursor,sync_params:h.sync_params,version:(s||(s=o("I64"))).of_string(c)})),v=(s||(s=o("I64"))).equal(i.sync_group_id,(u||(u=o("LSIntEnum"))).ofNumber(1))&&r("gkx")("26386")===!0;if(!v&&i.skip_realtime_gateway){var S=yield o("LSPlatformGraphQLTransport").publish(d,C,y,b,m),R=S[0],L=S[1],E=S[2],k=S[3],I={experiments:E,syncScript:L,target:k};return f?_.maybeEvalInOrderReceived(R,I):l(I)}else{var T=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange(i.sync_group_id)),D=(u||(u=o("LSIntEnum"))).ofNumber(2),x=(s||(s=o("I64"))).to_int32(h.database),$=o("LSMailboxInitialSyncCursor").dgwDisabledSyncGroups.split(",").includes(String(x)),P;T!=null&&(s||(s=o("I64"))).equal(T.syncChannel,D)?P=D:P=$?(u||(u=o("LSIntEnum"))).ofNumber(1):o("LSMailboxInitialSyncCursor").syncChannel;var N=r("qex")._("2071");if(T!=null&&N!=null&&N!=="default"){var M=(u||(u=o("LSIntEnum"))).unwrapIntEnum(y);if(M===1||M===2||M===5){var w=N+"."+(u||(u=o("LSIntEnum"))).toNumber(P)+"."+u.toNumber(y)+"."+u.toNumber(T.groupId);o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",w)}}return a.publish({databaseType:x,payload:b,queueName:void 0,requestId:C,syncChannel:P,type_:y}).then(function(){return(e||(e=n("Promise"))).resolve()})}});return function(t,n){return i.apply(this,arguments)}})(),C=function(l){var a=function(n){return t.runInTransaction(function(e){return r("LSBeginHandlingSyncForSyncGroupStoredProcedure")(r("LSFactory")(e),{ignoreSoftDelay:!1,syncGroupId:n})},"readwrite",void 0,void 0,i.id+":216").then(function(e){return C(e[0])})},c=function(t,n){h.schedule(function(){r("promiseDone")(a(t))},(s||(s=o("I64"))).to_string(t),s.to_float(n))},d=o("LSShape").toRecord(l),m=d.work_item_type;if((s||(s=o("I64"))).equal(m,(u||(u=o("LSIntEnum"))).ofNumber(1))||(s||(s=o("I64"))).equal(m,(u||(u=o("LSIntEnum"))).ofNumber(5))){var _=r("qex")._("2071");if(_!=null&&_!=="default"){var f=_+"."+(u||(u=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").syncChannel);o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",f)}var b=d.network_payload;return b!=null?y(d,b).catch(function(e){if(_!=null&&_!=="default"){var t=_+"."+(u||(u=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").syncChannel);o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",t+".exception"),e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout?o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",t+".exception.timeout"):e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",t+".exception.notconnected")}if(e.message===o("LSPlatformGraphQLTransport").ServerError)o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_graphql_error");else if(e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout||e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected)o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_timeout_or_disc"),p.debug("Publish timed out");else if(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_other_error"),e instanceof Error)r("FBLogger")("messenger_web").catching(e).mustfix("Encountered an JS error while publishing a LS sync request");else{var n="";try{n=JSON.stringify(e)}catch(e){}r("FBLogger")("messenger_web").mustfix("Encountered an JS error while publishing a LS sync request %s",n)}return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handleSyncFailure."+(u||(u=o("LSIntEnum"))).toNumber(o("LSShape").toRecord(b).type)+"."+u.toNumber(d.sync_group_id)),g(d.sync_group_id).then(function(){return a(d.sync_group_id)})}):(r("FBLogger")("ls_web_init").mustfix("Expected networkpayload for sync request but didn't get any"),(e||(e=n("Promise"))).resolve())}if(!(s||(s=o("I64"))).equal(m,(u||(u=o("LSIntEnum"))).ofNumber(3)))return(s||(s=o("I64"))).equal(m,(u||(u=o("LSIntEnum"))).ofNumber(4))||!(s||(s=o("I64"))).equal(m,(u||(u=o("LSIntEnum"))).ofNumber(2))||r("FBLogger")("ls_web_init").mustfix("Native handling for sync group not implemented yet"),(e||(e=n("Promise"))).resolve();var v=d.next_sync_ms;return v!=null?(c(d.sync_group_id,v),(e||(e=n("Promise"))).resolve()):(r("FBLogger")("ls_web_init").mustfix("Expected delay for delayed sync request but didn't get any"),(e||(e=n("Promise"))).resolve())},b=function(o){return(e||(e=n("Promise"))).all(r("LSVec").toArray(o[0]).map(function(e){return C(e)}))},v=function(){r("promiseDone")(t.runInTransaction(function(e){return r("LSBeginHandlingSyncStoredProcedure")(r("LSFactory")(e),{ignoreSoftDelay:!1})},"readwrite",void 0,void 0,i.id+":394").then(b))},S=r("throttle")(v,500),R=function(){return o("ReQL").fromTableAscending(t.tables.sync_groups).subscribe(function(){return S()})},L=function(){return a.subscribeToNonTaskResponses(function(e,t){var n=t.ex,a=t.payload,i={experiments:n,sp:t.sp,syncScript:a,target:t.target};r("promiseDone")(_.maybeEvalInOrderReceived(e,i),function(){return S()},function(e){if(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handle_sync_response_failure"),e instanceof Error)r("FBLogger")("messenger_web").catching(e).mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",f,e.message);else{var t="";try{t=JSON.stringify(e)}catch(e){}r("FBLogger")("messenger_web").mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",f,t)}})})},E=function(){return a.onReconnect(function(a){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","resume_sync_reconnect"),!(o("LSMailboxInitialSyncCursor").isWebApp&&a===1&&r("qex")._("2072")===!0&&r("qex")._("2080")===!0)&&(p.debug("Sync System reconnecting"),r("promiseDone")(t.runInTransaction((function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var i,l=yield(i=o("ReQL")).toArrayAsync(i.mergeJoin(i.fromTableAscending(t.tables.sync_groups),i.fromTableAscending(t.tables.network_requests).getKeyRange("")));return yield(e||(e=n("Promise"))).all(l.map(function(e){var t=e[1];return a.network_requests.put({epochId:void 0,failureCount:t.failureCount,lastDelayedRequestTimestampMs:t.lastDelayedRequestTimestampMs,lastSentTimestampMs:t.lastSentTimestampMs,lastSyncRequestTimestampMs:t.lastSyncRequestTimestampMs,networkTaskIdentifier:t.networkTaskIdentifier,syncDatabaseId:t.syncDatabaseId,taskQueueName:t.taskQueueName})})),r("LSBeginHandlingSyncStoredProcedure")(r("LSFactory")(a),{ignoreSoftDelay:!1})});return function(e){return a.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":488").then(b)))})},k=R(),I=L(),T=E();return S(),{cleanup:function(){k(),T(),I()}}}l.default=c}),98);
__d("MAWThreadConsistencyLogger",["FBLogger","I64","LSAuthorityLevel","LSCheckThreadConsistencyStoredProcedure","LSDatabaseSingleton","LSFactory","LSMessagingThreadTypeUtil","LSShape","LSVec","ODS","Promise","ReQL","WAArrayZip","asyncToGeneratorRuntime","clearInterval","gkx","justknobx","promiseDone","qex","setInterval"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=20,m=r("justknobx")._("3207"),p=!r("gkx")("5457"),_=!1,f=null;function g(){_||p||(_=!0,r("clearInterval")(f),f=r("setInterval")(function(){document.visibilityState==="visible"&&r("promiseDone")(h())},m*1e3))}function h(){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton;r("promiseDone")(t.runInTransaction((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){(c||(c=o("ODS"))).bumpEntityKey(3185,"maw_tc_metric","initiate_snapshot");var a=yield o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.threads.index("lastActivityTimestampMs")).filter(C).take(d));if(a.length===0){(c||(c=o("ODS"))).bumpEntityKey(3185,"maw_tc_metric","no_e2ee_threads_fetched_on_client");return}var i;r("qex")._("18")?i=yield(e||(e=n("Promise"))).all(a.map(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.messages.index("messageDisplayOrderOfflineThreadingId")).getKeyRange(e.threadKey))})):i=yield(e||(e=n("Promise"))).all(a.map(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.messages.index("messageDisplayOrder")).getKeyRange(e.threadKey))}));var l=o("WAArrayZip").zip(a,i).map(function(e){var t=e[0],n=e[1];return o("LSShape").ofRecord({is_last_activity_optimistic:b(n),last_activity_timestamp_ms:t.lastActivityTimestampMs,last_read_timestamp_ms:t.lastReadWatermarkTimestampMs,thread_key:t.threadKey})});return r("LSCheckThreadConsistencyStoredProcedure")(r("LSFactory")(t),{metadata:o("LSShape").ofRecord({client_snapshot_timestamp_ms:(u||(u=o("I64"))).of_float(Date.now()),session_timestamp_ms:u.of_int32(Math.round(window.performance.now()))}),threads:r("LSVec").ofArray(l)})});return function(e){return t.apply(this,arguments)}})(),"readonly",void 0,void 0,i.id+":59"),function(){return(c||(c=o("ODS"))).bumpEntityKey(3185,"maw_tc_metric","send_snapshot")},function(e){r("FBLogger")("maw_tc_metric").catching(e).warn("failed to send tc metric snapshot")})}),y.apply(this,arguments)}function C(e){return o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)&&e.folderName==="inbox"&&(u||(u=o("I64"))).to_int32(e.authorityLevel)>=r("LSAuthorityLevel").AUTHORITATIVE}function b(e){return e==null?!1:(u||(u=o("I64"))).to_int32(e.authorityLevel)<r("LSAuthorityLevel").AUTHORITATIVE}l.startMAWThreadConsistencyLogger=g,l.MAWThreadConsistencyLoggerTakeSnapshot=h}),98);
__d("polarisActivityUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=["comments","likes","relationships","usertags"];for(var n of t)if(n in e&&e[n]>0)return!0;return!1}i.hasUnreadCountsV2=e}),66);
__d("PolarisActivityStorySelectors",["polarisActivityUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.activityStories}function s(t){return e(t).error}function u(t){return e(t).loading}function c(t){return e(t).newStories}function d(t){return e(t).oldStories}function m(t){return e(t).followRequests}function p(t){return e(t).relationships}function _(t){return Object.keys(e(t).followRequests).length>0}function f(t){return e(t).suggestedUsers}function g(t){return e(t).partition}function h(t){return e(t).countsRequested}function y(t){return e(t).counts}function C(t){return o("polarisActivityUtils").hasUnreadCountsV2(e(t).counts)}function b(t){return e(t).showBanner}l.feedError=s,l.feedIsLoading=u,l.newStories=c,l.oldStories=d,l.followRequests=m,l.relationships=p,l.showFollowRequests=_,l.suggestedUsers=f,l.partition=g,l.countsIsLoading=h,l.unreadCounts=y,l.hasUnread=C,l.showBanner=b}),98);
__d("PolarisLiveCreationModalLazy.react",["CometPlaceholder.react","IGCoreModal.react","IGDSBox.react","IGDSSpinner.react","JSResourceForInteraction","PolarisSizing","lazyLoadComponent","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("lazyLoadComponent")(r("JSResourceForInteraction")("PolarisLiveCreationModal.react").__setRef("PolarisLiveCreationModalLazy.react"));function c(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(r("IGCoreModal.react"),{backdropColor:"dark",children:s.jsx(r("IGDSBox.react"),{alignItems:"center",height:112,justifyContent:"center",maxWidth:o("PolarisSizing").FEED_WIDTH_WIDE,position:"relative",width:"100%",children:s.jsx(r("IGDSSpinner.react"),{size:"medium"})})}),t[0]=n):n=t[0];var a;return t[1]!==e?(a=s.jsx(r("CometPlaceholder.react"),{fallback:n,name:i.id,children:s.jsx(u,babelHelpers.extends({},e))}),t[1]=e,t[2]=a):a=t[2],a}l.default=c}),98);
__d("PolarisMobilePostLoginUpsell.react",["fbt","ix","BaseModal.react","IGCoreImage.react","IGDSBox.react","IGDSButton.react","IGDSText.react","PolarisAppInstallStrings","qex","react","react-compiler-runtime","usePolarisOpenApp"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d={mobilePostLogin:{bottom:"x1ey2m1c",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,position:"xixxii4",top:"x13vifvy",$$css:!0}},m=s._(/*BTDS*/"Est\u00e1 dando um tempo no uso do app?"),p=s._(/*BTDS*/"Volte quando tiver os controles de notifica\u00e7\u00e3o e os limites de tempo de tela que funcionam para voc\u00ea."),_=s._(/*BTDS*/"Defina controles para sua experi\u00eancia no app"),f=s._(/*BTDS*/"Ajuste os limites de tempo de tela e os controles de notifica\u00e7\u00e3o para evitar distra\u00e7\u00f5es."),g=s._(/*BTDS*/"Tenha uma experi\u00eancia melhor no app"),h=s._(/*BTDS*/"Fa\u00e7a pausas com limites de tempo de tela e controles de notifica\u00e7\u00e3o. Dispon\u00edvel apenas no app.");function y(e){var t=o("react-compiler-runtime").c(12),n=e.handleContinueBrowserClick,a=r("usePolarisOpenApp")(),i;if(t[0]===Symbol.for("react.memo_cache_sentinel")){var l,y=(l=r("qex")._("4280"))!=null?l:"A";i=function(){return y==="A"?{description:p,title:m}:y==="B"?{description:f,title:_}:y==="C"?{description:h,title:g}:void 0},t[0]=i}else i=t[0];var C=i,b;t[1]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx(r("IGCoreImage.react"),{alt:"Instagram splash glyph Icon",src:{light:u("879111")}}),t[1]=b):b=t[1];var v;if(t[2]===Symbol.for("react.memo_cache_sentinel")){var S;v=c.jsx(r("IGDSText.react"),{color:"webAlwaysBlack",size:"headline1",textAlign:"center",weight:"semibold",zeroMargin:!0,children:(S=C())==null?void 0:S.title}),t[2]=v}else v=t[2];var R;if(t[3]===Symbol.for("react.memo_cache_sentinel")){var L;R=c.jsxs(r("IGDSBox.react"),{rowGap:2,children:[v,c.jsx(r("IGDSText.react"),{color:"webAlwaysBlack",textAlign:"center",zeroMargin:!0,children:(L=C())==null?void 0:L.description})]}),t[3]=R}else R=t[3];var E;t[4]!==a?(E=c.jsx(r("IGDSButton.react"),{fullWidth:!0,label:o("PolarisAppInstallStrings").OPEN_APP,onClick:function(){return a()},size:"large"}),t[4]=a,t[5]=E):E=t[5];var k;t[6]===Symbol.for("react.memo_cache_sentinel")?(k=s._(/*BTDS*/"Continuar no navegador"),t[6]=k):k=t[6];var I;t[7]!==n?(I=c.jsx(r("IGDSButton.react"),{display:"block",label:k,onClick:n,variant:"primary_link"}),t[7]=n,t[8]=I):I=t[8];var T;return t[9]!==E||t[10]!==I?(T=c.jsx(r("BaseModal.react"),{stackingBehavior:"above-everything",children:c.jsx(r("IGDSBox.react"),{alignItems:"center",color:"alwaysWhite",height:"100%",justifyContent:"center",width:"100%",xstyle:d.mobilePostLogin,children:c.jsxs(r("IGDSBox.react"),{alignItems:"center",rowGap:6,width:320,children:[b,R,c.jsxs(r("IGDSBox.react"),{rowGap:4,width:"100%",children:[E,I]})]})})}),t[9]=E,t[10]=I,t[11]=T):T=t[11],T}l.default=y}),226);
__d("PolarisSwitchAccountsModalLazy.react",["CometPlaceholder.react","IGCoreModal.react","IGDSBox.react","IGDSSpinner.react","JSResourceForInteraction","lazyLoadComponent","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("lazyLoadComponent")(r("JSResourceForInteraction")("PolarisSwitchAccountsModal.react").__setRef("PolarisSwitchAccountsModalLazy.react"));function c(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(r("IGCoreModal.react"),{children:s.jsx(r("IGDSBox.react"),{alignItems:"center",height:112,justifyContent:"center",position:"relative",width:"100%",children:s.jsx(r("IGDSSpinner.react"),{size:"medium"})})}),e[0]=t):t=e[0];var n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(r("CometPlaceholder.react"),{fallback:t,name:i.id,children:s.jsx(u,{})}),e[1]=n):n=e[1],n}l.default=c}),98);
__d("PolarisXESwitcherUtil",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("4847")===!0}function s(){return r("qex")._("4848")===!0}l.shouldEnableIGWebXMDSSwitcher=e,l.shouldEnableIGWebXMDSSwitcherTitle=s}),98);
__d("PolarisSwitchAccountsUtil",["$InternalEnum","IGDSBox.react","PolarisAuthFormCard.react","PolarisFBConnectHelpers","PolarisOneTapLoginStorage","PolarisReactRedux.react","react","react-compiler-runtime","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=n("$InternalEnum")({CURRENT:"current",ONE_TAP:"one_tap",FB_CONNECTED:"fb_connected",IG_CONNECTED:"ig_connected"}),c="accountSwitcherModal",d="XE_SWITCHER_ACCOUNT_EMPTY_ID";function m(){var e,t,n,a=o("react-compiler-runtime").c(9),i=r("usePolarisViewer")(),l=g(),s=l.fbConnectedUsers,c=l.igConnectedUsers,d=l.oneTapUserIds;if(!i){var m;return a[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],a[0]=m):m=a[0],m}var h=(e=i.id)!=null?e:"",y=(t=i.profilePictureUrl)!=null?t:"",C=(n=i.username)!=null?n:"";if(h===""||y===""||C===""){var b;return a[1]===Symbol.for("react.memo_cache_sentinel")?(b=[],a[1]=b):b=a[1],b}var v;if(a[2]!==y||a[3]!==h||a[4]!==C||a[5]!==s||a[6]!==c||a[7]!==d){var S,R,L,E={profilePicUrl:y,source:u.CURRENT,userId:h,username:C};v=[E];var k=o("PolarisOneTapLoginStorage").getLoginNonces(),I=s==null?void 0:s.map(_);(S=v).push.apply(S,I);var T=d==null?void 0:d.map(function(e){var t=k[e],n=t.profilePicUrl,r=t.username;return{profilePicUrl:n,source:u.ONE_TAP,userId:e,username:r}}).filter(function(e){return!f(e,I)});(R=v).push.apply(R,T);var D=c==null?void 0:c.map(p).filter(function(e){return!f(e,T)&&!f(e,I)});(L=v).push.apply(L,D),a[2]=y,a[3]=h,a[4]=C,a[5]=s,a[6]=c,a[7]=d,a[8]=v}else v=a[8];return v}function p(e){return{profilePicUrl:e.profilePictureUrl,source:u.IG_CONNECTED,userId:d,username:e.username}}function _(e){return{profilePicUrl:e.profilePictureUrl,source:u.FB_CONNECTED,userId:d,username:e.username}}function f(e,t){return t.some(function(t){return e.username===t.username})}function g(){var e,t,n,a,i=o("react-compiler-runtime").c(7),l=r("usePolarisViewer")(),s=(e=(t=o("PolarisReactRedux.react").useSelector(y))==null?void 0:t.filter(function(e){return e.username!==(l==null?void 0:l.username)&&o("PolarisFBConnectHelpers").isFBCUnique(e.username)}))!=null?e:[],u=(n=(a=o("PolarisReactRedux.react").useSelector(h))==null?void 0:a.filter(function(e){return e.username!==(l==null?void 0:l.username)&&o("PolarisFBConnectHelpers").isFBCUnique(e.username)&&(!s||!s.some(function(t){return t.username===e.username}))}))!=null?n:[],c;if(i[0]===Symbol.for("react.memo_cache_sentinel")){var d=o("PolarisOneTapLoginStorage").getLoginNonces();c=Object.keys(d),i[0]=c}else c=i[0];var m;i[1]!==(l==null?void 0:l.id)?(m=c.filter(function(e){return e!==(l==null?void 0:l.id)}),i[1]=l==null?void 0:l.id,i[2]=m):m=i[2];var p=m,_;return i[3]!==s||i[4]!==u||i[5]!==p?(_={fbConnectedUsers:s,igConnectedUsers:u,oneTapUserIds:p},i[3]=s,i[4]=u,i[5]=p,i[6]=_):_=i[6],_}function h(e){return e.fxSSO.igProfiles}function y(e){return e.fb.igProfiles}function C(){return s.jsx(r("IGDSBox.react"),{alignItems:"center",maxHeight:800,overflow:"auto",position:"relative",children:s.jsx(r("PolarisAuthFormCard.react"),{hideAppUpsells:!0,hideBorder:!0,pageIdentifier:c,style:"modal",useMobileFooterPadding:!1})})}C.displayName=C.name+" [from "+i.id+"]",l.XESwitcherAccountSource=u,l.XE_SWITCHER_ACCOUNT_EMPTY_ID=d,l.useXESwitcherIgAccounts=m,l.useIgSwitcherAccounts=g,l.getSwitcherLoginForm=C}),98);
__d("PolarisXESwitcherDialogQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24200373556213830"}),null);
__d("PolarisXESwitcherDialogQuery$Parameters",["PolarisXESwitcherDialogQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("PolarisXESwitcherDialogQuery_instagramRelayOperation"),metadata:{},name:"PolarisXESwitcherDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("PolarisXESwitcherDialog.entrypoint",["JSResourceForInteraction","PolarisXESwitcherDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{polarisXESwitcherDialogQuery:{parameters:r("PolarisXESwitcherDialogQuery$Parameters"),variables:{accounts:t.routeParams.accounts}}}}},root:r("JSResourceForInteraction")("PolarisXESwitcherDialog.react").__setRef("PolarisXESwitcherDialog.entrypoint")};l.default=e}),98);
__d("usePolarisXESwitcherDialog",["PolarisSwitchAccountsUtil","PolarisXESwitcherDialog.entrypoint","react","react-compiler-runtime","useCometEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=o("react-compiler-runtime").c(9),t=o("PolarisSwitchAccountsUtil").useXESwitcherIgAccounts(),n;e[0]!==t?(n=t.map(c),e[0]=t,e[1]=n):n=e[1];var a;e[2]!==n?(a={accounts:n},e[2]=n,e[3]=a):a=e[3];var i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i={},e[4]=i):i=e[4];var l;e[5]!==a?(l={routeParams:a,routeProps:i},e[5]=a,e[6]=l):l=e[6];var s=r("useCometEntryPointDialog")(r("PolarisXESwitcherDialog.entrypoint"),l),u=s[0],d;return e[7]!==u?(d=function(){return u({})},e[7]=u,e[8]=d):d=e[8],d}function c(e){return{badge_count_message:e.badgeCountMessage,profile_pic_url:e.profilePicUrl,user_id:e.userId,username:e.username}}l.default=u}),98);
__d("PolarisGlobalUIComponents.react",["CometErrorBoundary.react","CometPlaceholder.react","IGWebPreCallProvider.react","PolarisAppStoreLauncher.react","PolarisCallGatingHelpers","PolarisConfig","PolarisIsLiveProducerEnabled","PolarisIsLoggedIn","PolarisLiveCreationModalLazy.react","PolarisMobilePostLoginUpsell.react","PolarisOneTapLogin","PolarisQPConstants","PolarisReactRedux.react","PolarisSwitchAccountsModalLazy.react","PolarisToastWrapper.react","PolarisUA","PolarisXESwitcherUtil","cr:1609","cr:3106","cr:4779","cr:4839","cr:7274","cr:8738","cr:9681","polarisNavigationSelectors","qex","react","react-compiler-runtime","stylex","usePolarisXESwitcherDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useState,d={mobileToast:{marginBottom:"xx7atzb",$$css:!0}};function m(t){var a=o("react-compiler-runtime").c(32),l=t.hasMobileNavs,s=t.pageIdentifier,m=t.viewer,f=o("PolarisReactRedux.react").useSelector(o("polarisNavigationSelectors").getHideNavQueryParam),g=o("PolarisReactRedux.react").useSelector(_),h=g.isAccountSwitcherOpen,y=g.isLiveCreationModalOpen,C;a[0]===Symbol.for("react.memo_cache_sentinel")?(C=o("PolarisUA").isMobile()&&o("PolarisOneTapLogin").isCAASpiDialogEligible(),a[0]=C):C=a[0];var b=C,v=r("qex")._("4280"),S=v!==null&&v!=="",R=c(b&&S),L=R[0],E=R[1],k;a[1]!==y?(k=!o("PolarisUA").isMobile()&&y&&o("PolarisIsLiveProducerEnabled").isLiveProducerEnabled()?u.jsx(r("PolarisLiveCreationModalLazy.react"),{}):null,a[1]=y,a[2]=k):k=a[2];var I=k,T=null;if(b){if(n("cr:7274")){var D;a[3]===Symbol.for("react.memo_cache_sentinel")?(D=u.jsx(n("cr:7274"),{}),a[3]=D):D=a[3],T=D}else if(n("cr:8738")){var x;a[4]===Symbol.for("react.memo_cache_sentinel")?(x=u.jsx(n("cr:8738"),{}),a[4]=x):x=a[4],T=x}}var $;a[5]===Symbol.for("react.memo_cache_sentinel")?($=u.jsx("div",{children:u.jsx(r("PolarisSwitchAccountsModalLazy.react"),{})}),a[5]=$):$=a[5];var P=$,N=r("usePolarisXESwitcherDialog")(),M=l&&!!m&&d.mobileToast,w;a[6]!==M?(w=(e||(e=r("stylex")))(M),a[6]=M,a[7]=w):w=a[7];var A;a[8]!==w?(A=u.jsx(r("PolarisToastWrapper.react"),{className:w}),a[8]=w,a[9]=A):A=a[9];var F;a[10]===Symbol.for("react.memo_cache_sentinel")?(F=n("cr:9681")!=null&&u.jsx(n("cr:9681"),{slot:o("PolarisQPConstants").SLOTS.app_start}),a[10]=F):F=a[10];var O;a[11]!==L?(O=L?u.jsx(r("PolarisMobilePostLoginUpsell.react"),{handleContinueBrowserClick:function(){return E(!1)}}):T,a[11]=L,a[12]=O):O=a[12];var B;a[13]!==O?(B=u.jsx(r("CometErrorBoundary.react"),{fallback:p,children:O}),a[13]=O,a[14]=B):B=a[14];var W;a[15]!==h||a[16]!==N?(W=h&&o("PolarisIsLoggedIn").isLoggedIn()&&(o("PolarisXESwitcherUtil").shouldEnableIGWebXMDSSwitcher()?N():P),a[15]=h,a[16]=N,a[17]=W):W=a[17];var q;a[18]===Symbol.for("react.memo_cache_sentinel")?(q=u.jsx(r("CometErrorBoundary.react"),{children:n("cr:4779")!=null&&o("PolarisCallGatingHelpers").isIncomingCallEnabled()?u.jsx(r("IGWebPreCallProvider.react"),{children:u.jsx(n("cr:4779"),{})}):null}),a[18]=q):q=a[18];var U;a[19]===Symbol.for("react.memo_cache_sentinel")?(U=n("cr:3106")&&u.jsx(n("cr:3106"),{}),a[19]=U):U=a[19];var V;a[20]!==f||a[21]!==s||a[22]!==m?(V=!S&&o("PolarisConfig").probablyHasApp()&&!f&&n("cr:1609")&&u.jsx("div",{children:u.jsx(n("cr:1609"),{pageID:s,viewer:m})}),a[20]=f,a[21]=s,a[22]=m,a[23]=V):V=a[23];var H,G;a[24]===Symbol.for("react.memo_cache_sentinel")?(H=u.jsx(r("PolarisAppStoreLauncher.react"),{}),G=n("cr:4839")!=null?u.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:u.jsx(n("cr:4839"),{})}):null,a[24]=H,a[25]=G):(H=a[24],G=a[25]);var z;return a[26]!==I||a[27]!==W||a[28]!==V||a[29]!==A||a[30]!==B?(z=u.jsxs(u.Fragment,{children:[A,F,B,W,q,I,U,V,H,G]}),a[26]=I,a[27]=W,a[28]=V,a[29]=A,a[30]=B,a[31]=z):z=a[31],z}function p(){return u.jsx("div",{})}p.displayName=p.name+" [from "+i.id+"]";function _(e){return e.navigation}l.default=m}),98);
__d("PolarisNotificationBannerIcon.react",["fbt","$InternalEnum","IGDSBox.react","IGDSText.react","Locale","PolarisAssetManagerGlyphMapping","PolarisIGCoreIcon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=n("$InternalEnum")({COMMENTS:"comments",LIKES:"likes",RELATIONSHIPS:"relationships",USERTAGS:"usertags"});function d(e){switch(e){case c.COMMENTS:return{alt:s._(/*BTDS*/"Coment\u00e1rios"),icon:o("PolarisAssetManagerGlyphMapping").ICONS.COMMENT_FILLED_16_WHITE};case c.LIKES:return{alt:s._(/*BTDS*/"Curtir"),icon:o("PolarisAssetManagerGlyphMapping").ICONS.HEART_FILLED_16_WHITE};case c.RELATIONSHIPS:return{alt:s._(/*BTDS*/"Relacionamentos"),icon:o("PolarisAssetManagerGlyphMapping").ICONS.USER_FILLED_16_WHITE};case c.USERTAGS:return{alt:s._(/*BTDS*/"Tags de usu\u00e1rio"),icon:o("PolarisAssetManagerGlyphMapping").ICONS.TAG_UP_FILLED_16_WHITE}}}function m(e){var t=o("react-compiler-runtime").c(11),n=e.count,a=e.countType,i;t[0]!==a?(i=d(a),t[0]=a,t[1]=i):i=t[1];var l=i,s=l.alt,c=l.icon,m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m={className:"x6s0dn4 x78zum5 x1diwwjn x1n2onr6"},t[2]=m):m=t[2];var p;t[3]!==s||t[4]!==c?(p=u.jsx(r("PolarisIGCoreIcon.react"),{alt:s,icon:c}),t[3]=s,t[4]=c,t[5]=p):p=t[5];var _;t[6]!==n?(_=u.jsx(r("IGDSBox.react"),{alignItems:"center",marginStart:1,position:"relative",children:u.jsx(r("IGDSText.react"),{color:"webAlwaysWhite",size:"label",zeroMargin:!0,children:n})}),t[6]=n,t[7]=_):_=t[7];var f;return t[8]!==p||t[9]!==_?(f=u.jsxs("div",babelHelpers.extends({},m,{dir:r("Locale").isRTL()?"rtl":"ltr",children:[p,_]})),t[8]=p,t[9]=_,t[10]=f):f=t[10],f}l.CountBadgeType=c,l.PolarisNotificationBannerIcon=m}),226);
__d("PolarisNotificationsBannerV2_badgeCount.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisNotificationsBannerV2_badgeCount",selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null},{alias:null,args:null,concreteType:"XDTNotificationActivityBadgeCounts",kind:"LinkedField",name:"activity_badge_counts",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"comments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"likes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"relationships",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usertags",storageKey:null}],storageKey:null}],type:"XDTNotificationBadgeCount",abstractKey:null};a.exports=e}),null);
__d("PolarisNotificationsBannerV2.react",["CometRelay","PolarisDisappearingTooltip.react","PolarisNotificationBannerIcon.react","PolarisNotificationsBannerV2_badgeCount.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useMemo;function d(t){var a,i=o("react-compiler-runtime").c(23),l=t.align,s=t.autoHideAfter,c=t.badgeCount,d=t.children,m=t.onClick,p=t.onTooltipHide,_=t.position,f=o("CometRelay").useFragment(e!==void 0?e:e=n("PolarisNotificationsBannerV2_badgeCount.graphql"),c),g=f==null?void 0:f.activity_badge_counts,h=(a=f==null?void 0:f.total_count)!=null?a:0,y;e:{var C,b=(C=Object.keys(g).reduce(function(e,t){var n;return e+((n=g[t])!=null?n:0)},0))!=null?C:0;if(b===0){y=null;break e}var v;i[0]===Symbol.for("react.memo_cache_sentinel")?(v={className:"xuk3077 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 x1q0g3np x2lah0s xln7xf2 xk390pu xdj266r x14z9mp xat24cr x18xomjl xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x11njtxf"},i[0]=v):v=i[0];var S;i[1]!==g?(S=(g==null?void 0:g.comments)!=null&&g.comments!==0&&u.jsx(o("PolarisNotificationBannerIcon.react").PolarisNotificationBannerIcon,{count:g.comments,countType:o("PolarisNotificationBannerIcon.react").CountBadgeType.COMMENTS}),i[1]=g,i[2]=S):S=i[2];var R;i[3]!==g?(R=(g==null?void 0:g.likes)!=null&&g.likes!==0&&u.jsx(o("PolarisNotificationBannerIcon.react").PolarisNotificationBannerIcon,{count:g.likes,countType:o("PolarisNotificationBannerIcon.react").CountBadgeType.LIKES}),i[3]=g,i[4]=R):R=i[4];var L;i[5]!==g?(L=(g==null?void 0:g.relationships)!=null&&g.relationships!==0&&u.jsx(o("PolarisNotificationBannerIcon.react").PolarisNotificationBannerIcon,{count:g.relationships,countType:o("PolarisNotificationBannerIcon.react").CountBadgeType.RELATIONSHIPS}),i[5]=g,i[6]=L):L=i[6];var E;i[7]!==g?(E=(g==null?void 0:g.usertags)!=null&&g.usertags!==0&&u.jsx(o("PolarisNotificationBannerIcon.react").PolarisNotificationBannerIcon,{count:g.usertags,countType:o("PolarisNotificationBannerIcon.react").CountBadgeType.USERTAGS}),i[7]=g,i[8]=E):E=i[8];var k;i[9]!==S||i[10]!==R||i[11]!==L||i[12]!==E?(k=u.jsxs("div",babelHelpers.extends({},v,{children:[S,R,L,E]})),i[9]=S,i[10]=R,i[11]=L,i[12]=E,i[13]=k):k=i[13],y=k}var I=y,T;return i[14]!==l||i[15]!==s||i[16]!==d||i[17]!==I||i[18]!==m||i[19]!==p||i[20]!==_||i[21]!==h?(T=h>0&&I!=null?u.jsx(r("PolarisDisappearingTooltip.react"),{align:l,autoHideAfter:s,color:"red",disableTooltipHideOnDismount:!1,isActivity:!0,onClick:m,onTooltipHide:p,position:_,tooltip:I,children:d}):u.jsx(u.Fragment,{children:d}),i[14]=l,i[15]=s,i[16]=d,i[17]=I,i[18]=m,i[19]=p,i[20]=_,i[21]=h,i[22]=T):T=i[22],T}l.default=d}),98);
__d("usePolarisNotificationsNavItemQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"device_id"}],t=[{kind:"Variable",name:"device_id",variableName:"device_id"}],n={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"usePolarisNotificationsNavItemQuery",selections:[{alias:null,args:t,concreteType:"XDTNotificationBadgeResponse",kind:"LinkedField",name:"xdt_notification_badge",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTNotificationBadgeCount",kind:"LinkedField",name:"badge_count",plural:!1,selections:[n,{args:null,kind:"FragmentSpread",name:"PolarisNotificationsBannerV2_badgeCount"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"usePolarisNotificationsNavItemQuery",selections:[{alias:null,args:t,concreteType:"XDTNotificationBadgeResponse",kind:"LinkedField",name:"xdt_notification_badge",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTNotificationBadgeCount",kind:"LinkedField",name:"badge_count",plural:!1,selections:[n,{alias:null,args:null,concreteType:"XDTNotificationActivityBadgeCounts",kind:"LinkedField",name:"activity_badge_counts",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"comments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"likes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"relationships",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usertags",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"29759241103722430",metadata:{is_distillery:!0,root_field_name:["xdt_notification_badge"]},name:"usePolarisNotificationsNavItemQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("usePolarisNotificationsNavItemQuery",["CometRelay","PolarisConfig","usePolarisNotificationsNavItemQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("CometRelay").useLazyLoadQuery(e!==void 0?e:e=n("usePolarisNotificationsNavItemQuery.graphql"),{device_id:o("PolarisConfig").getDeviceId()});return t}var u=s;l.default=u}),98);
__d("PolarisNotificationsNavBadge.react",["PolarisActivityStorySelectors","PolarisNotificationsNavItemBadge.react","PolarisReactRedux.react","cr:10762","cr:10763","react","react-compiler-runtime","usePolarisNotificationsNavItemQuery"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t,a,i=o("react-compiler-runtime").c(10),l=e.onBadgeStateChange,c=r("usePolarisNotificationsNavItemQuery")(),d=c==null||(t=c.xdt_notification_badge)==null?void 0:t.badge_count,m=(a=d==null?void 0:d.total_count)!=null?a:0,p=n("cr:10763")(),_=o("PolarisReactRedux.react").useSelector(o("PolarisActivityStorySelectors").showBanner),f=m+p>0,g,h;i[0]!==f||i[1]!==l||i[2]!==_?(g=function(){return l(f||_)},h=[l,f,_],i[0]=f,i[1]=l,i[2]=_,i[3]=g,i[4]=h):(g=i[3],h=i[4]),u(g,h);var y;i[5]!==f?(y=f?s.jsx(r("PolarisNotificationsNavItemBadge.react"),{}):null,i[5]=f,i[6]=y):y=i[6];var C;i[7]===Symbol.for("react.memo_cache_sentinel")?(C=n("cr:10762")&&s.jsx(n("cr:10762"),{}),i[7]=C):C=i[7];var b;return i[8]!==y?(b=s.jsxs(s.Fragment,{children:[y,C]}),i[8]=y,i[9]=b):b=i[9],b}l.default=c}),98);
__d("PolarisNotificationsNavBannerWrapper.react",["PolarisIGCoreConstants","PolarisNavigationHelpers","PolarisNotificationsBannerV2.react","react","react-compiler-runtime","useMatchMedia","usePolarisNotificationsNavItemQuery"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t,n=o("react-compiler-runtime").c(6),a=e.children,i=e.onClick,l=e.onTooltipHide,u=r("usePolarisNotificationsNavItemQuery")(),c=u==null||(t=u.xdt_notification_badge)==null?void 0:t.badge_count,d=r("useMatchMedia")("(max-width: "+o("PolarisNavigationHelpers").BOTTOM_STYLING_MAX_WIDTH+"px)"),m;return n[0]!==c||n[1]!==a||n[2]!==d||n[3]!==i||n[4]!==l?(m=c==null?null:s.jsx(r("PolarisNotificationsBannerV2.react"),{align:d?"end":"middle",autoHideAfter:r("PolarisIGCoreConstants").TOOLTIP.AUTO_HIDE_MS,badgeCount:c,onClick:i,onTooltipHide:l,position:d?"below":"end",children:a}),n[0]=c,n[1]=a,n[2]=d,n[3]=i,n[4]=l,n[5]=m):m=n[5],m}l.default=u}),98);
__d("XMDSToast.react",["fbt","BaseToast.react","CDSThemeConfig","CometThemeInfraUtils","MetaBrandXFilled24Icon.react","XMDSIcon.react","XMDSIconButton.react","XMDSText.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={header:{marginBottom:"x1e56ztr",$$css:!0},link:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",wordBreak:"xdnwjd9",$$css:!0}},d={margin20:{marginBottom:"xieb3on",$$css:!0},margin32:{marginBottom:"x1iymm2a",$$css:!0},margin48:{marginBottom:"x13ihpsm",$$css:!0},margin64:{marginBottom:"x16bybu0",$$css:!0}},m={20:d.margin20,32:d.margin32,48:d.margin48,64:d.margin64};function p(e){var t=e.action,n=e.addOnStart,a=e.density,i=e.header,l=e.message,d=e.offsetFooter,p=e.onDismiss,_=e.ref,f=e.size,g=f===void 0?"full-width":f,h=e.testid,y=e.withoutCloseButton,C=y===void 0?!1:y;return u.jsx(r("BaseToast.react"),{action:t!=null?{label:t.label,labelRenderer:function(t){return u.jsx(r("XMDSText.react"),{color:"toastTextLink",textStyle:"body",xstyle:c.link,children:t})},onPress:function(n){t.onPress(n,t.dismissToastOnPress===!0?p:function(){})},testid:t.testid}:void 0,addOnStart:n,closeButton:!C&&u.jsx(r("XMDSIconButton.react"),{"aria-label":s._(/*BTDS*/"Fechar"),onPress:p,children:u.jsx(r("XMDSIcon.react"),{color:"toast-DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE",icon:r("MetaBrandXFilled24Icon.react"),size:24})}),density:a,message:function(t){var e=t.toastMessageId;return u.jsxs("div",{className:"x78zum5 xdt5ytf",id:e,children:[i!=null&&u.jsx(r("XMDSText.react"),{color:"toastText_DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE",textStyle:"bodyEmphasized",xstyle:c.header,children:i}),u.jsx(r("XMDSText.react"),{color:"toastText_DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE",textStyle:"body",children:l})]})},offsetStyles:d&&m[d],onDismiss:p,size:g,testid:void 0,themeConfigOverride:o("CometThemeInfraUtils").enableCometThemeInfraThemeInXMDSComponents()?void 0:r("CDSThemeConfig"),toastRef:_})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),226);
__d("ZenonCallWindowErrors",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonOpeningAnotherCallError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),l=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonConferenceNameMutationFailedError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),s=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonIncompleteControllerParamsError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonUnsupportedThreadTypeError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonCannotAcceptInviteError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),d=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonInviteNotFoundError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),m=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonUninitializedError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.OpeningAnotherCallError=e,i.ConferenceNameMutationFailedError=l,i.IncompleteControllerParamsError=s,i.UnsupportedThreadTypeError=u,i.CannotAcceptInviteError=c,i.InviteNotFoundError=d,i.UninitializedError=m}),66);
__d("ZenonPeerID",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";var e="MW_PEER_ID";function u(t){return t.length>0||s(0,33504),t==="MW_PEER_ID"?e:(isNaN(t)===!1||s(0,33551,t),t)}function c(t){return isNaN(t)||t===e?null:t}l.ZenonMWPeerID=e,l.convertStringToPeerID=u,l.convertPeerIDForLogging=c}),98);/*FB_PKG_DELIM*/
__d("InstamadilloReplyAttachmentId",["I64","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(n.threadKey,n.messageId));if(r!=null)return(e||(e=o("I64"))).of_string(r.attachmentFbid)}),u.apply(this,arguments)}l.getReplyAttachmentId=s}),98);
__d("InstamadilloReplyAttachmentType",["LSIntEnum","LSReplyMessageAttachmentType","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(e={},e[(u=r("MessagingAttachmentType")).STICKER]=(c=r("LSReplyMessageAttachmentType")).STICKER,e[u.SELFIE_STICKER]=c.STICKER,e[u.IMAGE]=c.PHOTO,e[u.ANIMATED_IMAGE]=c.GIF,e[u.VIDEO]=c.VIDEO,e[u.AUDIO]=c.AUDIO,e[u.XMA]=c.XMA,e[u.EPHEMERAL_IMAGE]=c.PERMANENT_RAVEN_PHOTO,e[u.EPHEMERAL_VIDEO]=c.PERMANENT_RAVEN_VIDEO,e[u.SOUND_BITE]=c.SOUND_BITE,e[u.POWER_UP]=c.POWER_UP,e[u.FILE]=c.OTHER,e[u.CATALOG_ITEM]=c.OTHER,e);function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(t.threadKey,t.messageId));if(!(n==null||n.length===0)){if(n.length>1)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").MULTIPHOTO);if(n.length===1)return _(n[0])}}),p.apply(this,arguments)}function _(e){var t=(s||(s=o("LSIntEnum"))).unwrapIntEnum(e.attachmentType),n=d[t];if(n!=null)return(s||(s=o("LSIntEnum"))).ofNumber(n)}l.getReplyAttachmentType=m}),98);
__d("InstamadilloReplySnippet",["CurrentMessengerUser","I64","LSMessagingThreadTypeUtil","PolarisDirectStrings"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=o("PolarisDirectStrings").REPLIED_TO;return e&&t?n=o("PolarisDirectStrings").YOU_REPLIED_TO_YOURSELF:t?n=o("PolarisDirectStrings").REPLIED_TO_YOU:e?n=o("PolarisDirectStrings").YOU_REPLIED:n=o("PolarisDirectStrings").REPLIED_TO_THEMSELVES,n.toString()}function u(e,t,n,r,a){var i=o("PolarisDirectStrings").userRepliedToUser(a,r);return t&&n?i=o("PolarisDirectStrings").YOU_REPLIED_TO_YOURSELF:n?i=o("PolarisDirectStrings").userRepliedToYou(a):t?i=o("PolarisDirectStrings").youRepliedToUser(r):e&&(i=o("PolarisDirectStrings").userRepliedToThemselves(a)),i.toString()}function c(t,n,r){var a=n.name,i=r.name,l=(e||(e=o("I64"))).of_string(o("CurrentMessengerUser").getIDorEIMU()),c=e.equal(n.id,r.id),d=e.equal(n.id,l),m=e.equal(r.id,l),p=o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType);return p?s(d,m):u(c,d,m,i,a)}l.getReplySnippet=c}),98);
__d("InstamadilloReplySourceTypeV2",["LSIntEnum","LSMessageReplySourceTypeV2","LSXmaContentType","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){switch(e){case r("LSXmaContentType").IG_STORY_PHOTO_SHARE:case r("LSXmaContentType").IG_STORY_VIDEO_SHARE:case r("LSXmaContentType").IG_STORY_PHOTO_MENTION:case r("LSXmaContentType").IG_STORY_VIDEO_MENTION:case r("LSXmaContentType").IG_STORY_PHOTO_HIGHLIGHT_SHARE:case r("LSXmaContentType").IG_STORY_VIDEO_HIGHLIGHT_SHARE:return!0;default:return!1}}function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a=r("LSMessageReplySourceTypeV2").MESSAGE,i=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(n.threadKey,n.messageId)),l=i;if((l==null?void 0:l.xmaContentType)!=null){var u=(e||(e=o("LSIntEnum"))).unwrapIntEnum(l.xmaContentType);s(u)&&(a=r("LSMessageReplySourceTypeV2").STORY),a=r("LSMessageReplySourceTypeV2").XMA}return(e||(e=o("LSIntEnum"))).ofNumber(a)}),c.apply(this,arguments)}l.getReplySourceTypeV2=u}),98);
__d("InstamadilloReplyStatus",["I64","LSIntEnum","LSReplyMessageStatus","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=t.isUnsent?r("LSReplyMessageStatus").DELETED:r("LSReplyMessageStatus").VALID;if(t.ephemeralExpirationTs!=null){var a=(e||(e=o("I64"))).to_int32(e.sub(t.ephemeralExpirationTs,e.of_float(o("WATimeUtils").unixTime())));a<=0&&(n=r("LSReplyMessageStatus").EXPIRED)}return(s||(s=o("LSIntEnum"))).ofNumber(n)}l.getReplyStatusType=u}),98);
__d("InstamadilloReplyMessageParams",["InstamadilloReplyAttachmentId","InstamadilloReplyAttachmentType","InstamadilloReplySnippet","InstamadilloReplySourceTypeV2","InstamadilloReplyStatus","LSIntEnum","LSMessageReplySourceType","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){return{replyMessageText:void 0,replySnippet:void 0,replySourceId:void 0,replySourceType:void 0,replySourceTypeV2:void 0,replyStatus:void 0,replyToUserId:void 0}}function c(e,t,n,r){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l){var u=yield(s||(s=n("Promise"))).all([l.threads.get(t),l.contacts.get(a),l.messages.index("messageId").get(i)]),c=u[0],d=u[1],m=u[2],p={replySourceId:i};if(d==null||c==null||m==null)return p;p.replySourceId=m.messageId,p.replySourceTimestampMs=m.timestampMs,p.replyToUserId=m.senderId,p.replyMessageText=m.text,p.replyStatus=o("InstamadilloReplyStatus").getReplyStatusType(m);var _=yield l.contacts.get(m.senderId);_!=null&&(p.replySnippet=o("InstamadilloReplySnippet").getReplySnippet(c,d,_)),p.replySourceType=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceType").MESSAGE);var f=yield s.all([o("InstamadilloReplySourceTypeV2").getReplySourceTypeV2(l,m),o("InstamadilloReplyAttachmentType").getReplyAttachmentType(l,m),o("InstamadilloReplyAttachmentId").getReplyAttachmentId(l,m)]),g=f[0],h=f[1],y=f[2];return p.replySourceTypeV2=g,p.replyAttachmentType=h,p.replyAttachmentId=y,p}),d.apply(this,arguments)}l.getEmptyReplyMessageParams=u,l.getReplyMessageParams=c}),98);
__d("InstamadilloMessageFactory",["FBLogger","I64","InstamadilloMessageIdUtils","InstamadilloReplyMessageParams","LSAuthorityLevel","LSBitFlag","LSIntEnum","LSMessageRenderingType","LSMessageReplySourceTypeV2","LSMessageSendStatus","LSMessageThreadUnsendabilityStatus","LSQuickReplyType","MAWAuthor","MAWJids","MessagingAttachmentType","WAJids","WALongInt","WATimeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){var t=e.externalId,n=o("WAJids").threadIdForChatJid(e.chat),r=o("MAWJids").convertChatJidToIntJid(e.chat),a=o("InstamadilloMessageIdUtils").toInstamadilloMessageId(n,t);return{messageId:a,threadKey:r}}function c(t,n,a,i){return{attachmentFbid:t,attachmentIndex:(e||(e=o("I64"))).zero,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").NONE),authorityLevel:e.of_int32(r("LSAuthorityLevel").AUTHORITATIVE),hasMedia:!0,hasXma:!1,isPreviewImage:!1,isSharable:!1,messageId:n,threadKey:a,timestampMs:i,transportKey:"Instamadillo",xmaLayoutType:e.zero,xmasTemplateType:e.zero}}function d(e,t){var n=u(e),r=n.messageId,o=n.threadKey;return c(e.externalId,r,o,t)}function m(e,t,n){var r=u(e),o=r.messageId,a=r.threadKey;return c(t,o,a,n)}function p(t){var n=u(t),r=n.messageId,a=n.threadKey,i={attachmentFbid:t.externalId,attachmentIndex:(e||(e=o("I64"))).zero,ctaId:e.zero,messageId:r,threadKey:a,title:""};return i}function _(t){var n=u(t),r=n.messageId,a=n.threadKey,i={attachmentFbid:t.externalId,attachmentIndex:(e||(e=o("I64"))).zero,defaultActionEnableExtensions:!1,messageId:r,threadKey:a};return i}function f(e,t,n,r){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i){var l=o("MAWAuthor").getAuthorUserJid(n.author);if(l==null)return r("FBLogger")("igd_web").warn("Skip createBaseInstamadilloMessage: a message cannot exist without an author");var s=n.externalId,c=(e||(e=o("I64"))).of_string(o("WAJids").userIdFromJid(l)),d=u(n),m=d.messageId,p=d.threadKey,_=yield h(t,{messageId:m,offlineThreadingId:s,senderId:c,threadKey:p,timestampMs:a},i);return _}),g.apply(this,arguments)}function h(e,t,n){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){var i,l,u,c,d=n.authorityLevel,m=n.messageId,p=n.offlineThreadingId,_=n.senderId,f=n.threadKey,g=n.timestampMs,h=yield t.threads.get(f),y=(i=h==null?void 0:h.cannotUnsendReason)!=null?i:(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageThreadUnsendabilityStatus").CAN_UNSEND),C={},b=a==null||(l=a.repliedToMessage)==null?void 0:l.repliedToMessageOtid;b!=null&&(C=yield o("InstamadilloReplyMessageParams").getReplyMessageParams(f,_,o("InstamadilloMessageIdUtils").toInstamadilloMessageId(f,b),t));var v=a==null||(u=a.forwardingParams)==null?void 0:u.forwardedThreadId,S=v!=null,R,L,E=!1;(a==null||(c=a.ephemeralityParams)==null?void 0:c.ephemeralDurationSec)!=null&&(g==null?E=!0:(R=o("WALongInt").maybeNumberOrThrowIfTooLarge(a.ephemeralityParams.ephemeralDurationSec),L=R!=null?o("WATimeUtils").futureUnixTime(R,o("WATimeUtils").castMilliSecondsToUnixTime((e||(e=o("I64"))).to_float(g))):void 0,E=L!=null&&L<o("WATimeUtils").unixTime()));var k=babelHelpers.extends({authorityLevel:d!=null?d:(e||(e=o("I64"))).of_int32(r("LSAuthorityLevel").AUTHORITATIVE),cannotUnsendReason:y,displayedContentTypes:o("LSBitFlag").empty,editCount:(e||(e=o("I64"))).zero,ephemeralDurationInSec:R!=null?(e||(e=o("I64"))).of_float(R):void 0,ephemeralExpirationTs:L!=null?(e||(e=o("I64"))).of_float(L):void 0,hasQuickReplies:b!=null,isAdminMessage:!1,isCollapsed:!1,isExpired:E,isForwarded:S,isUnsent:!1,messageId:m,messageRenderingType:e.of_int32(r("LSMessageRenderingType").DEFAULT),offlineThreadingId:p,primarySortKey:g,quickReplyType:e.of_int32(r("LSQuickReplyType").NONE),replyAttachmentType:void 0,replySourceTypeV2:S?(e||(e=o("I64"))).of_int32(r("LSMessageReplySourceTypeV2").FORWARD):void 0,replyStatus:void 0,secondarySortKey:void 0,senderId:_,sendStatus:e.of_int32(r("LSMessageSendStatus").SERVER_RECEIVED),sendStatusV2:e.of_int32(2),threadKey:f,timestampMs:g,transportKey:"Instamadillo",unsentTimestampMs:void 0,viewFlags:e.zero},C);return k}),y.apply(this,arguments)}l.getThreadAndMessageId=u,l.createBaseAttachmentWithProtocolMsgId=d,l.createBaseAttachmentWithMediaId=m,l.createBaseAttachmentCta=p,l.createBaseAttachmentItem=_,l.createBaseMessageForProtocolMsgId=f,l.createBaseMessage=h}),98);
__d("InstamadilloTextMessageUtils",["URLMatcher","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("isStringNullOrEmpty")(e)?!1:r("URLMatcher").match(e)!=null}l.textHasLinks=e}),98);
__d("LSBumpThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.i64.eq(e[1],t.i64.cast([0,1]))?t.forEach(t.db.table(9).fetch([[[e[2]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[0],lastActivityTimestampMs:e[0]})}):t.i64.eq(e[1],t.i64.cast([0,2]))?t.forEach(t.db.table(9).fetch([[[e[2]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[0]})}):t.i64.eq(e[1],t.i64.cast([0,3]))?t.db.table(9).fetch([[[e[2]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.i64.le(r.lastActivityTimestampMs,r.lastReadWatermarkTimestampMs)?t.forEach(t.db.table(9).fetch([[[e[2]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[0],lastActivityTimestampMs:e[0]})}):t.forEach(t.db.table(9).fetch([[[e[2]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[0]})}))}):t.resolve(0)},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxBumpThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSBumpThreadStoredProcedure",["LSBumpThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBumpThread"),a.bumpTimestampMs,a.readStateEffect,a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSFetchInstamadilloMessage",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSMailboxFetchInstamadilloMessageStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSUpdateLastActivityTimestamp",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateLastActivityTimestampStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateThreadSnippet",["LSGetThreadParticipantDisplayName","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.resolve((r[1]="",r[0]=r[1]===""?void 0:r[1]))},function(o){return r[0]!==void 0?t.sequence([function(e){return t.resolve(r[1]=t.i64.cast([0,0]))},function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,o=t.item;return n({snippet:r[0],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:e[2],snippetSenderContactId:e[3],snippetHasEmoji:e[4],viewedPluginKey:e[5],viewedPluginContext:e[6]})})}]):e[7]?t.sequence([function(o){return t.i64.neq(e[3],void 0)?t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[3]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(t){return e[1]!==void 0?(r[3]!==void 0?r[5]=[r[3],": ",e[1]].join(""):r[5]=e[1],r[4]=r[5]):r[4]=void 0,r[1]=r[4]}]):t.resolve(r[1]=e[1])},function(e){return t.resolve(r[2]=t.i64.cast([0,0]))},function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,o=t.item;return n({snippet:r[1],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:e[2],snippetSenderContactId:e[3],snippetHasEmoji:e[4],viewedPluginKey:e[5],viewedPluginContext:e[6]})})}]):t.sequence([function(e){return t.resolve(r[1]=t.i64.cast([0,0]))},function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({snippet:e[1],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:e[2],snippetSenderContactId:e[3],snippetHasEmoji:e[4],viewedPluginKey:e[5],viewedPluginContext:e[6]})})}])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadSnippetStoredProcedure",e.__tables__=["threads","contacts","messages"],a.exports=e}),null);
__d("LSUpdateThreadSnippetFromLastMessageV2",["LSGetThreadParticipantDisplayName","LSGetViewerFBID","LSLocalize","LSUpdateLastActivityTimestamp","LSUpdateThreadSnippet"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.count(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(e[0],n.threadKey)&&[t.i64.cast([0,18]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)})})).then(function(e){return r[0]=e})},function(o){return t.i64.eq(r[0],t.i64.cast([0,1]))===!0?t.filter(t.db.table(12).fetchDesc([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.isAdminMessage===!1&&n.isUnsent===!1}).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(e){return r[7]=a.text,r[5]=a.threadKey,r[9]=t.i64.cast([0,0]),r[10]=a.messageId,r[4]=a.senderId,r[8]=a.stickerId,r[3]=a.isAdminMessage,r[6]=a.messageHiddenState,r[1]=!0,r[3]||!r[1]?t.resolve(r[2]=r[7]==null?"":r[7]):t.sequence([function(e){return a.isUnsent?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[12]=t[0],t})},function(e){return t.i64.eq(r[12],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2987332812]),void 0).then(function(e){return r[17]=e})},function(e){return r[13]=r[17]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(e){return r[18]=t.createArray(),r[20]=(r[18].push(r[17]),r[18]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1530605193]),r[18]).then(function(e){return r[19]=e})},function(e){return r[13]=r[19]}])},function(e){return t.db.table(9).fetch([[[r[5]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[14]=!1:(n=a.item,r[14]=[t.i64.cast([0,23]),t.i64.cast([0,21]),t.i64.cast([0,18]),t.i64.cast([0,26]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)}))})},function(e){return r[14]?t.sequence([function(e){return t.filter(t.db.table(16).fetch([[[r[5],r[10]]]]),function(e){return t.i64.eq(e.threadKey,r[5])&&t.i64.eq(t.i64.cast([0,0]),r[9])&&e.messageId===r[10]}).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),void 0,void 0,void 0,void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2],r[20]=o[3],r[21]=o[4],o):(n=l.item,a=[n.attachmentType,n.attributionAppName,n.defaultCtaType,n.descriptionText,n.xmaContentType],r[17]=a[0],r[18]=a[1],r[19]=a[2],r[20]=a[3],r[21]=a[4])})},function(e){return r[20]!==void 0?r[23]=r[20]:r[23]=r[13],r[16]=r[23]}]):t.resolve(r[16]=r[13])},function(e){return r[11]=r[16]}]):t.sequence([function(e){return t.i64.eq(r[6],t.i64.cast([0,2]))?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2975370389]),void 0).then(function(e){return r[13]=e})},function(e){return r[12]=r[13]}]):t.sequence([function(e){return t.i64.eq(r[6],t.i64.cast([0,1]))?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3921131020]),void 0).then(function(e){return r[14]=e})},function(e){return r[13]=r[14]}]):t.sequence([function(e){return t.i64.eq(a.replyType,t.i64.cast([0,1]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.i64.eq(r[15],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1899892426]),void 0).then(function(e){return r[17]=e})},function(e){return r[16]=r[17]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(e){return r[18]=t.createArray(),r[20]=(r[18].push(r[17]),r[18]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3287869262]),r[18]).then(function(e){return r[19]=e})},function(e){return r[16]=r[19]}])},function(e){return r[14]=r[16]}]):t.sequence([function(e){return r[7]!==void 0&&r[7]!==""?t.sequence([function(e){return r[18]=r[7]==null?"":r[7],t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return t.i64.eq(r[16],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1890485478]),void 0).then(function(e){return r[19]=e})},function(e){return r[17]=[r[19],": ",r[18]].join("")}]):t.sequence([function(e){return t.db.table(9).fetch([[[r[5]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[19]=!1:(n=a.item,r[19]=t.i64.eq(n.threadType,t.i64.cast([0,2])))})},function(e){return t.db.table(9).fetch([[[r[5]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[21]=!1:(n=a.item,r[21]=[t.i64.cast([0,18]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)}))})},function(e){return r[19]||r[21]?t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return r[23]=[r[24],": ",r[18]].join("")}]):t.resolve(r[23]=r[18])},function(e){return r[17]=r[23]}])},function(e){return r[15]=r[17]}]):t.sequence([function(e){return t.i64.neq(r[8],void 0)&&[t.i64.cast([53057,267535043]),t.i64.cast([85970,924785702]),t.i64.cast([85970,1004785694]),t.i64.cast([85970,1044785690])].some(function(e){return t.i64.eq(r[8],e)})?t.sequence([function(e){return r[19]="\uDB80\uDC00",t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[17]=t[0],t})},function(e){return t.i64.eq(r[17],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1890485478]),void 0).then(function(e){return r[20]=e})},function(e){return r[18]=[r[20],": ",r[19]].join("")}]):t.sequence([function(e){return t.db.table(9).fetch([[[r[5]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[20]=!1:(n=a.item,r[20]=t.i64.eq(n.threadType,t.i64.cast([0,2])))})},function(e){return t.db.table(9).fetch([[[r[5]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[22]=!1:(n=a.item,r[22]=[t.i64.cast([0,18]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)}))})},function(e){return r[20]||r[22]?t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[25]=t[0],t})},function(e){return r[24]=[r[25],": ",r[19]].join("")}]):t.resolve(r[24]=r[19])},function(e){return r[18]=r[24]}])},function(e){return r[16]=r[18]}]):t.sequence([function(e){return t.i64.neq(r[8],void 0)?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){return t.i64.eq(r[18],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1299547062]),void 0).then(function(e){return r[20]=e})},function(e){return r[19]=r[20]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return r[21]=t.createArray(),r[23]=(r[21].push(r[20]),r[21]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3621454483]),r[21]).then(function(e){return r[22]=e})},function(e){return r[19]=r[22]}])},function(e){return r[17]=r[19]}]):t.sequence([function(e){return t.count(t.filter(t.db.table(16).fetch([[[r[5],r[10]]]]),function(e){return t.i64.eq(e.threadKey,r[5])&&t.i64.eq(t.i64.cast([0,0]),r[9])&&e.messageId===r[10]})).then(function(e){return r[18]=e})},function(e){return t.i64.eq(r[18],t.i64.cast([0,0]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return t.i64.eq(r[20],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[22]=e})},function(e){return r[21]=r[22]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[22]=t[0],t})},function(e){return r[23]=t.createArray(),r[25]=(r[23].push(r[22]),r[23]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[23]).then(function(e){return r[24]=e})},function(e){return r[21]=r[24]}])},function(e){return r[19]=r[21]}]):t.sequence([function(e){return t.i64.eq(r[18],t.i64.cast([0,1]))?t.sequence([function(e){return t.filter(t.db.table(16).fetch([[[r[5],r[10]]]]),function(e){return t.i64.eq(e.threadKey,r[5])&&t.i64.eq(t.i64.cast([0,0]),r[9])&&e.messageId===r[10]}).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),void 0,void 0,void 0,void 0],r[21]=o[0],r[22]=o[1],r[23]=o[2],r[24]=o[3],r[25]=o[4],o):(n=l.item,a=[n.attachmentType,n.attributionAppName,n.defaultCtaType,n.descriptionText,n.xmaContentType],r[21]=a[0],r[22]=a[1],r[23]=a[2],r[24]=a[3],r[25]=a[4])})},function(e){return r[27]=void 0,r[27]===void 0&&(t.i64.eq(r[21],t.i64.cast([0,1]))||t.i64.eq(r[21],t.i64.cast([0,15])))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1299547062]),void 0).then(function(e){return r[34]=e})},function(e){return r[33]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[34]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3621454483]),r[35]).then(function(e){return r[36]=e})},function(e){return r[33]=r[36]}])},function(e){return r[27]=r[33]}]):t.resolve()},function(e){return r[27]===void 0&&(t.i64.eq(r[21],t.i64.cast([0,2]))||t.i64.eq(r[21],t.i64.cast([0,8])))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2106510577]),void 0).then(function(e){return r[34]=e})},function(e){return r[33]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[34]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3960370133]),r[35]).then(function(e){return r[36]=e})},function(e){return r[33]=r[36]}])},function(e){return r[27]=r[33]}]):t.resolve()},function(e){return r[27]===void 0&&t.i64.eq(r[21],t.i64.cast([0,3]))?t.sequence([function(e){return r[22]!==void 0?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return t.i64.eq(r[33],r[4])?t.sequence([function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[22]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3798396796]),r[35]).then(function(e){return r[36]=e})},function(e){return r[34]=r[36]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[36]=t.createArray(),r[38]=(r[36].push(r[35]),r[36]),r[38]=(r[36].push(r[22]),r[36]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3388601579]),r[36]).then(function(e){return r[37]=e})},function(e){return r[34]=r[37]}])},function(e){return r[32]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return t.i64.eq(r[33],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1556712457]),void 0).then(function(e){return r[35]=e})},function(e){return r[34]=r[35]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[36]=t.createArray(),r[38]=(r[36].push(r[35]),r[36]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3601791933]),r[36]).then(function(e){return r[37]=e})},function(e){return r[34]=r[37]}])},function(e){return r[32]=r[34]}])},function(e){return r[27]=r[32]}]):t.resolve()},function(e){return r[27]===void 0&&(t.i64.eq(r[21],t.i64.cast([0,4]))||t.i64.eq(r[21],t.i64.cast([0,9])))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3759817031]),void 0).then(function(e){return r[34]=e})},function(e){return r[33]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[34]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2934729541]),r[35]).then(function(e){return r[36]=e})},function(e){return r[33]=r[36]}])},function(e){return r[27]=r[33]}]):t.resolve()},function(e){return r[27]===void 0&&t.i64.eq(r[21],t.i64.cast([0,5]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,392493418]),void 0).then(function(e){return r[34]=e})},function(e){return r[33]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[34]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,4085467454]),r[35]).then(function(e){return r[36]=e})},function(e){return r[33]=r[36]}])},function(e){return r[27]=r[33]}]):t.resolve()},function(e){return r[27]===void 0&&t.i64.eq(r[21],t.i64.cast([0,10]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2738683656]),void 0).then(function(e){return r[34]=e})},function(e){return r[33]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[34]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2996525642]),r[35]).then(function(e){return r[36]=e})},function(e){return r[33]=r[36]}])},function(e){return r[27]=r[33]}]):t.resolve()},function(e){return t.i64.neq(r[25],void 0)?r[28]=r[25]:(r[23]==="xma_live_location_sharing"?r[32]=t.i64.cast([0,7e3]):r[32]=void 0,r[28]=r[32]),t.i64.neq(r[28],void 0)?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[28],t.i64.cast([-1,4294967295]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return t.i64.eq(r[34],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[36]=e})},function(e){return r[35]=r[36]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[37]=t.createArray(),r[39]=(r[37].push(r[36]),r[37]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[37]).then(function(e){return r[38]=e})},function(e){return r[35]=r[38]}])},function(e){return r[33]=r[35]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,0]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return t.i64.eq(r[35],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[37]=e})},function(e){return r[36]=r[37]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return r[38]=t.createArray(),r[40]=(r[38].push(r[37]),r[38]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[38]).then(function(e){return r[39]=e})},function(e){return r[36]=r[39]}])},function(e){return r[34]=r[36]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1e3]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return t.i64.eq(r[36],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2326868239]),void 0).then(function(e){return r[38]=e})},function(e){return r[37]=r[38]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=t.createArray(),r[41]=(r[39].push(r[38]),r[39]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1001986796]),r[39]).then(function(e){return r[40]=e})},function(e){return r[37]=r[40]}])},function(e){return r[35]=r[37]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1001]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.i64.eq(r[37],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2326868239]),void 0).then(function(e){return r[39]=e})},function(e){return r[38]=r[39]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return r[40]=t.createArray(),r[42]=(r[40].push(r[39]),r[40]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1001986796]),r[40]).then(function(e){return r[41]=e})},function(e){return r[38]=r[41]}])},function(e){return r[36]=r[38]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1002]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return t.i64.eq(r[38],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285746939]),void 0).then(function(e){return r[40]=e})},function(e){return r[39]=r[40]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return r[41]=t.createArray(),r[43]=(r[41].push(r[40]),r[41]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3759448420]),r[41]).then(function(e){return r[42]=e})},function(e){return r[39]=r[42]}])},function(e){return r[37]=r[39]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1003]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return t.i64.eq(r[39],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3719716921]),void 0).then(function(e){return r[41]=e})},function(e){return r[40]=r[41]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return r[42]=t.createArray(),r[44]=(r[42].push(r[41]),r[42]),n("LSLocalize").localizeV2Async(t.i64.cast([0,284944921]),r[42]).then(function(e){return r[43]=e})},function(e){return r[40]=r[43]}])},function(e){return r[38]=r[40]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1004]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return t.i64.eq(r[40],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[42]=e})},function(e){return r[43]=t.createArray(),r[45]=(r[43].push(r[42]),r[43]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3322002377]),r[43]).then(function(e){return r[44]=e})},function(e){return r[41]=r[44]}]):t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2486550278]),void 0).then(function(e){return r[42]=e})},function(e){return r[41]=r[42]}])},function(e){return r[39]=r[41]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1005]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return t.i64.eq(r[41],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3557790945]),void 0).then(function(e){return r[43]=e})},function(e){return r[42]=r[43]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[44]=t.createArray(),r[46]=(r[44].push(r[43]),r[44]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3756846086]),r[44]).then(function(e){return r[45]=e})},function(e){return r[42]=r[45]}])},function(e){return r[40]=r[42]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1006]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[42]=t[0],t})},function(e){return t.i64.eq(r[42],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2326868239]),void 0).then(function(e){return r[44]=e})},function(e){return r[43]=r[44]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return r[45]=t.createArray(),r[47]=(r[45].push(r[44]),r[45]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1001986796]),r[45]).then(function(e){return r[46]=e})},function(e){return r[43]=r[46]}])},function(e){return r[41]=r[43]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1007]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return t.i64.eq(r[43],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3719716921]),void 0).then(function(e){return r[45]=e})},function(e){return r[44]=r[45]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return r[46]=t.createArray(),r[48]=(r[46].push(r[45]),r[46]),n("LSLocalize").localizeV2Async(t.i64.cast([0,284944921]),r[46]).then(function(e){return r[47]=e})},function(e){return r[44]=r[47]}])},function(e){return r[42]=r[44]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1008]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return t.i64.eq(r[44],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[46]=e})},function(e){return r[45]=r[46]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return r[47]=t.createArray(),r[49]=(r[47].push(r[46]),r[47]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[47]).then(function(e){return r[48]=e})},function(e){return r[45]=r[48]}])},function(e){return r[43]=r[45]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1009]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return t.i64.eq(r[45],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,780378803]),void 0).then(function(e){return r[47]=e})},function(e){return r[46]=r[47]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[48]=t.createArray(),r[50]=(r[48].push(r[47]),r[48]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3918212613]),r[48]).then(function(e){return r[49]=e})},function(e){return r[46]=r[49]}])},function(e){return r[44]=r[46]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1010]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return t.i64.eq(r[46],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3161890215]),void 0).then(function(e){return r[48]=e})},function(e){return r[47]=r[48]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return r[49]=t.createArray(),r[51]=(r[49].push(r[48]),r[49]),n("LSLocalize").localizeV2Async(t.i64.cast([0,863428456]),r[49]).then(function(e){return r[50]=e})},function(e){return r[47]=r[50]}])},function(e){return r[45]=r[47]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1011]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return t.i64.eq(r[47],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2716405471]),void 0).then(function(e){return r[49]=e})},function(e){return r[48]=r[49]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return r[50]=t.createArray(),r[52]=(r[50].push(r[49]),r[50]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3909474073]),r[50]).then(function(e){return r[51]=e})},function(e){return r[48]=r[51]}])},function(e){return r[46]=r[48]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1012]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return t.i64.eq(r[48],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1522141193]),void 0).then(function(e){return r[50]=e})},function(e){return r[49]=r[50]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[50]=t[0],t})},function(e){return r[51]=t.createArray(),r[53]=(r[51].push(r[50]),r[51]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2804766375]),r[51]).then(function(e){return r[52]=e})},function(e){return r[49]=r[52]}])},function(e){return r[47]=r[49]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1013]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return t.i64.eq(r[49],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1522141193]),void 0).then(function(e){return r[51]=e})},function(e){return r[50]=r[51]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[51]=t[0],t})},function(e){return r[52]=t.createArray(),r[54]=(r[52].push(r[51]),r[52]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2804766375]),r[52]).then(function(e){return r[53]=e})},function(e){return r[50]=r[53]}])},function(e){return r[48]=r[50]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1014]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[50]=t[0],t})},function(e){return t.i64.eq(r[50],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[52]=e})},function(e){return r[53]=t.createArray(),r[55]=(r[53].push(r[52]),r[53]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3322002377]),r[53]).then(function(e){return r[54]=e})},function(e){return r[51]=r[54]}]):t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2486550278]),void 0).then(function(e){return r[52]=e})},function(e){return r[51]=r[52]}])},function(e){return r[49]=r[51]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1015]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[51]=t[0],t})},function(e){return t.i64.eq(r[51],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[53]=e})},function(e){return r[52]=r[53]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return r[54]=t.createArray(),r[56]=(r[54].push(r[53]),r[54]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[54]).then(function(e){return r[55]=e})},function(e){return r[52]=r[55]}])},function(e){return r[50]=r[52]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1016]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[52]=t[0],t})},function(e){return t.i64.eq(r[52],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[54]=e})},function(e){return r[53]=r[54]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return r[55]=t.createArray(),r[57]=(r[55].push(r[54]),r[55]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[55]).then(function(e){return r[56]=e})},function(e){return r[53]=r[56]}])},function(e){return r[51]=r[53]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1017]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return t.i64.eq(r[53],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[55]=e})},function(e){return r[54]=r[55]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[55]=t[0],t})},function(e){return r[56]=t.createArray(),r[58]=(r[56].push(r[55]),r[56]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[56]).then(function(e){return r[57]=e})},function(e){return r[54]=r[57]}])},function(e){return r[52]=r[54]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1018]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return t.i64.eq(r[54],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[56]=e})},function(e){return r[55]=r[56]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return r[57]=t.createArray(),r[59]=(r[57].push(r[56]),r[57]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[57]).then(function(e){return r[58]=e})},function(e){return r[55]=r[58]}])},function(e){return r[53]=r[55]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1019]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[55]=t[0],t})},function(e){return t.i64.eq(r[55],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[57]=e})},function(e){return r[56]=r[57]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[57]=t[0],t})},function(e){return r[58]=t.createArray(),r[60]=(r[58].push(r[57]),r[58]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[58]).then(function(e){return r[59]=e})},function(e){return r[56]=r[59]}])},function(e){return r[54]=r[56]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1020]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return t.i64.eq(r[56],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[58]=e})},function(e){return r[57]=r[58]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[58]=t[0],t})},function(e){return r[59]=t.createArray(),r[61]=(r[59].push(r[58]),r[59]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[59]).then(function(e){return r[60]=e})},function(e){return r[57]=r[60]}])},function(e){return r[55]=r[57]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2e3]))?t.sequence([function(e){return t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[59]=t[0],t})},function(e){return t.i64.eq(r[59],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[61]=e})},function(e){return r[60]=r[61]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return r[62]=t.createArray(),r[64]=(r[62].push(r[61]),r[62]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[62]).then(function(e){return r[63]=e})},function(e){return r[60]=r[63]}])},function(e){return r[58]=r[60]}])},function(e){return r[57]=r[58]}])},function(e){return r[56]=r[57]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2001]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[58]=t[0],t})},function(e){return t.i64.eq(r[58],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285746939]),void 0).then(function(e){return r[60]=e})},function(e){return r[59]=r[60]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[60]=t[0],t})},function(e){return r[61]=t.createArray(),r[63]=(r[61].push(r[60]),r[61]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3759448420]),r[61]).then(function(e){return r[62]=e})},function(e){return r[59]=r[62]}])},function(e){return r[57]=r[59]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2002]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[59]=t[0],t})},function(e){return t.i64.eq(r[59],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3719716921]),void 0).then(function(e){return r[61]=e})},function(e){return r[60]=r[61]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return r[62]=t.createArray(),r[64]=(r[62].push(r[61]),r[62]),n("LSLocalize").localizeV2Async(t.i64.cast([0,284944921]),r[62]).then(function(e){return r[63]=e})},function(e){return r[60]=r[63]}])},function(e){return r[58]=r[60]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2003]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[60]=t[0],t})},function(e){return t.i64.eq(r[60],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[62]=e})},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[63]=t[0],t})},function(e){return t.i64.eq(r[63],r[4])?t.sequence([function(e){return r[65]=t.createArray(),r[67]=(r[65].push(r[62]),r[65]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1247108605]),r[65]).then(function(e){return r[66]=e})},function(e){return r[64]=r[66]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[65]=t[0],t})},function(e){return r[66]=t.createArray(),r[68]=(r[66].push(r[65]),r[66]),r[68]=(r[66].push(r[62]),r[66]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2966876020]),r[66]).then(function(e){return r[67]=e})},function(e){return r[64]=r[67]}])},function(e){return r[61]=r[64]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[62]=t[0],t})},function(e){return t.i64.eq(r[62],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1056933543]),void 0).then(function(e){return r[64]=e})},function(e){return r[63]=r[64]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[64]=t[0],t})},function(e){return r[65]=t.createArray(),r[67]=(r[65].push(r[64]),r[65]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1167688664]),r[65]).then(function(e){return r[66]=e})},function(e){return r[63]=r[66]}])},function(e){return r[61]=r[63]}])},function(e){return r[59]=r[61]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2004]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return t.i64.eq(r[61],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2326868239]),void 0).then(function(e){return r[63]=e})},function(e){return r[62]=r[63]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[63]=t[0],t})},function(e){return r[64]=t.createArray(),r[66]=(r[64].push(r[63]),r[64]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1001986796]),r[64]).then(function(e){return r[65]=e})},function(e){return r[62]=r[65]}])},function(e){return r[60]=r[62]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2005]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[62]=t[0],t})},function(e){return t.i64.eq(r[62],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,772459202]),void 0).then(function(e){return r[64]=e})},function(e){return r[63]=r[64]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[64]=t[0],t})},function(e){return r[65]=t.createArray(),r[67]=(r[65].push(r[64]),r[65]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3546068912]),r[65]).then(function(e){return r[66]=e})},function(e){return r[63]=r[66]}])},function(e){return r[61]=r[63]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2006]))?t.sequence([function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[64]=t[0],t})},function(e){return t.i64.eq(r[64],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2459540079]),void 0).then(function(e){return r[66]=e})},function(e){return r[65]=r[66]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[66]=t[0],t})},function(e){return r[67]=t.createArray(),r[69]=(r[67].push(r[66]),r[67]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1596311291]),r[67]).then(function(e){return r[68]=e})},function(e){return r[65]=r[68]}])},function(e){return r[63]=r[65]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[64]=t[0],t})},function(e){return t.i64.eq(r[64],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2253698324]),void 0).then(function(e){return r[66]=e})},function(e){return r[65]=r[66]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[66]=t[0],t})},function(e){return r[67]=t.createArray(),r[69]=(r[67].push(r[66]),r[67]),n("LSLocalize").localizeV2Async(t.i64.cast([0,4269602817]),r[67]).then(function(e){return r[68]=e})},function(e){return r[65]=r[68]}])},function(e){return r[63]=r[65]}])},function(e){return r[62]=r[63]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2007]))?t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[65]=t[0],t})},function(e){return t.i64.eq(r[65],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[67]=e})},function(e){return r[66]=r[67]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[67]=t[0],t})},function(e){return r[68]=t.createArray(),r[70]=(r[68].push(r[67]),r[68]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[68]).then(function(e){return r[69]=e})},function(e){return r[66]=r[69]}])},function(e){return r[64]=r[66]}])},function(e){return r[63]=r[64]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2008]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[65]=t[0],t})},function(e){return t.i64.eq(r[65],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[67]=e})},function(e){return r[66]=r[67]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[67]=t[0],t})},function(e){return r[68]=t.createArray(),r[70]=(r[68].push(r[67]),r[68]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[68]).then(function(e){return r[69]=e})},function(e){return r[66]=r[69]}])},function(e){return r[64]=r[66]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2009]))?t.sequence([function(e){return t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[68]=t[0],t})},function(e){return t.i64.eq(r[68],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[70]=e})},function(e){return r[69]=r[70]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[70]=t[0],t})},function(e){return r[71]=t.createArray(),r[73]=(r[71].push(r[70]),r[71]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[71]).then(function(e){return r[72]=e})},function(e){return r[69]=r[72]}])},function(e){return r[67]=r[69]}])},function(e){return r[66]=r[67]}])},function(e){return r[65]=r[66]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2010]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[67]=t[0],t})},function(e){return t.i64.eq(r[67],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[69]=e})},function(e){return r[68]=r[69]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[69]=t[0],t})},function(e){return r[70]=t.createArray(),r[72]=(r[70].push(r[69]),r[70]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[70]).then(function(e){return r[71]=e})},function(e){return r[68]=r[71]}])},function(e){return r[66]=r[68]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2011]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[68]=t[0],t})},function(e){return t.i64.eq(r[68],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[70]=e})},function(e){return r[69]=r[70]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[70]=t[0],t})},function(e){return r[71]=t.createArray(),r[73]=(r[71].push(r[70]),r[71]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[71]).then(function(e){return r[72]=e})},function(e){return r[69]=r[72]}])},function(e){return r[67]=r[69]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2012]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[69]=t[0],t})},function(e){return t.i64.eq(r[69],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[71]=e})},function(e){return r[70]=r[71]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[71]=t[0],t})},function(e){return r[72]=t.createArray(),r[74]=(r[72].push(r[71]),r[72]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[72]).then(function(e){return r[73]=e})},function(e){return r[70]=r[73]}])},function(e){return r[68]=r[70]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2013]))?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[70]=e})},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[71]=t[0],t})},function(e){return t.i64.eq(r[71],r[4])?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return t.i64.eq(r[73],r[4])?t.sequence([function(e){return r[75]=t.createArray(),r[77]=(r[75].push(r[70]),r[75]),n("LSLocalize").localizeV2Async(t.i64.cast([0,785694792]),r[75]).then(function(e){return r[76]=e})},function(e){return r[74]=r[76]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[75]=t[0],t})},function(e){return r[76]=t.createArray(),r[78]=(r[76].push(r[75]),r[76]),r[78]=(r[76].push(r[70]),r[76]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2625447567]),r[76]).then(function(e){return r[77]=e})},function(e){return r[74]=r[77]}])},function(e){return r[72]=r[74]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return t.i64.eq(r[73],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3982213805]),void 0).then(function(e){return r[75]=e})},function(e){return r[74]=r[75]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[75]=t[0],t})},function(e){return r[76]=t.createArray(),r[78]=(r[76].push(r[75]),r[76]),n("LSLocalize").localizeV2Async(t.i64.cast([0,464916028]),r[76]).then(function(e){return r[77]=e})},function(e){return r[74]=r[77]}])},function(e){return r[72]=r[74]}])},function(e){return r[69]=r[72]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2014]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[71]=t[0],t})},function(e){return t.i64.eq(r[71],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[73]=e})},function(e){return r[72]=r[73]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return r[74]=t.createArray(),r[76]=(r[74].push(r[73]),r[74]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[74]).then(function(e){return r[75]=e})},function(e){return r[72]=r[75]}])},function(e){return r[70]=r[72]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2015]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[72]=t[0],t})},function(e){return t.i64.eq(r[72],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[74]=e})},function(e){return r[73]=r[74]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[74]=t[0],t})},function(e){return r[75]=t.createArray(),r[77]=(r[75].push(r[74]),r[75]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[75]).then(function(e){return r[76]=e})},function(e){return r[73]=r[76]}])},function(e){return r[71]=r[73]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2016]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return t.i64.eq(r[73],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[75]=e})},function(e){return r[74]=r[75]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[75]=t[0],t})},function(e){return r[76]=t.createArray(),r[78]=(r[76].push(r[75]),r[76]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[76]).then(function(e){return r[77]=e})},function(e){return r[74]=r[77]}])},function(e){return r[72]=r[74]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2017]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[74]=t[0],t})},function(e){return t.i64.eq(r[74],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[76]=e})},function(e){return r[75]=r[76]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[76]=t[0],t})},function(e){return r[77]=t.createArray(),r[79]=(r[77].push(r[76]),r[77]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[77]).then(function(e){return r[78]=e})},function(e){return r[75]=r[78]}])},function(e){return r[73]=r[75]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3e3]))?t.sequence([function(e){return t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[77]=t[0],t})},function(e){return t.i64.eq(r[77],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[79]=e})},function(e){return r[78]=r[79]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[79]=t[0],t})},function(e){return r[80]=t.createArray(),r[82]=(r[80].push(r[79]),r[80]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[80]).then(function(e){return r[81]=e})},function(e){return r[78]=r[81]}])},function(e){return r[76]=r[78]}])},function(e){return r[75]=r[76]}])},function(e){return r[74]=r[75]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3001]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[76]=t[0],t})},function(e){return t.i64.eq(r[76],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[78]=e})},function(e){return r[77]=r[78]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[78]=t[0],t})},function(e){return r[79]=t.createArray(),r[81]=(r[79].push(r[78]),r[79]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[79]).then(function(e){return r[80]=e})},function(e){return r[77]=r[80]}])},function(e){return r[75]=r[77]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3002]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[77]=t[0],t})},function(e){return t.i64.eq(r[77],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2973334239]),void 0).then(function(e){return r[79]=e})},function(e){return r[78]=r[79]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[79]=t[0],t})},function(e){return r[80]=t.createArray(),r[82]=(r[80].push(r[79]),r[80]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3616471048]),r[80]).then(function(e){return r[81]=e})},function(e){return r[78]=r[81]}])},function(e){return r[76]=r[78]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3003]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[78]=t[0],t})},function(e){return t.i64.eq(r[78],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2973334239]),void 0).then(function(e){return r[80]=e})},function(e){return r[79]=r[80]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[80]=t[0],t})},function(e){return r[81]=t.createArray(),r[83]=(r[81].push(r[80]),r[81]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3616471048]),r[81]).then(function(e){return r[82]=e})},function(e){return r[79]=r[82]}])},function(e){return r[77]=r[79]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3004]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[79]=t[0],t})},function(e){return t.i64.eq(r[79],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[81]=e})},function(e){return r[80]=r[81]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[81]=t[0],t})},function(e){return r[82]=t.createArray(),r[84]=(r[82].push(r[81]),r[82]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[82]).then(function(e){return r[83]=e})},function(e){return r[80]=r[83]}])},function(e){return r[78]=r[80]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3005]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[80]=t[0],t})},function(e){return t.i64.eq(r[80],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[82]=e})},function(e){return r[81]=r[82]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[82]=t[0],t})},function(e){return r[83]=t.createArray(),r[85]=(r[83].push(r[82]),r[83]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[83]).then(function(e){return r[84]=e})},function(e){return r[81]=r[84]}])},function(e){return r[79]=r[81]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3006]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[81]=t[0],t})},function(e){return t.i64.eq(r[81],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[83]=e})},function(e){return r[82]=r[83]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[83]=t[0],t})},function(e){return r[84]=t.createArray(),r[86]=(r[84].push(r[83]),r[84]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[84]).then(function(e){return r[85]=e})},function(e){return r[82]=r[85]}])},function(e){return r[80]=r[82]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3007]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[82]=t[0],t})},function(e){return t.i64.eq(r[82],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[84]=e})},function(e){return r[83]=r[84]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[84]=t[0],t})},function(e){return r[85]=t.createArray(),r[87]=(r[85].push(r[84]),r[85]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[85]).then(function(e){return r[86]=e})},function(e){return r[83]=r[86]}])},function(e){return r[81]=r[83]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3008]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[83]=t[0],t})},function(e){return t.i64.eq(r[83],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[85]=e})},function(e){return r[84]=r[85]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[85]=t[0],t})},function(e){return r[86]=t.createArray(),r[88]=(r[86].push(r[85]),r[86]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[86]).then(function(e){return r[87]=e})},function(e){return r[84]=r[87]}])},function(e){return r[82]=r[84]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3009]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[84]=t[0],t})},function(e){return t.i64.eq(r[84],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[86]=e})},function(e){return r[85]=r[86]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[86]=t[0],t})},function(e){return r[87]=t.createArray(),r[89]=(r[87].push(r[86]),r[87]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[87]).then(function(e){return r[88]=e})},function(e){return r[85]=r[88]}])},function(e){return r[83]=r[85]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3010]))?t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[86]=t[0],t})},function(e){return t.i64.eq(r[86],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[88]=e})},function(e){return r[87]=r[88]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[88]=t[0],t})},function(e){return r[89]=t.createArray(),r[91]=(r[89].push(r[88]),r[89]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[89]).then(function(e){return r[90]=e})},function(e){return r[87]=r[90]}])},function(e){return r[85]=r[87]}])},function(e){return r[84]=r[85]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3011]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[86]=t[0],t})},function(e){return t.i64.eq(r[86],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[88]=e})},function(e){return r[87]=r[88]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[88]=t[0],t})},function(e){return r[89]=t.createArray(),r[91]=(r[89].push(r[88]),r[89]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[89]).then(function(e){return r[90]=e})},function(e){return r[87]=r[90]}])},function(e){return r[85]=r[87]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3012]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[87]=t[0],t})},function(e){return t.i64.eq(r[87],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[89]=e})},function(e){return r[88]=r[89]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[89]=t[0],t})},function(e){return r[90]=t.createArray(),r[92]=(r[90].push(r[89]),r[90]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[90]).then(function(e){return r[91]=e})},function(e){return r[88]=r[91]}])},function(e){return r[86]=r[88]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3013]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[88]=t[0],t})},function(e){return t.i64.eq(r[88],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[90]=e})},function(e){return r[89]=r[90]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[90]=t[0],t})},function(e){return r[91]=t.createArray(),r[93]=(r[91].push(r[90]),r[91]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[91]).then(function(e){return r[92]=e})},function(e){return r[89]=r[92]}])},function(e){return r[87]=r[89]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3014]))?t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[90]=t[0],t})},function(e){return t.i64.eq(r[90],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[92]=e})},function(e){return r[91]=r[92]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[92]=t[0],t})},function(e){return r[93]=t.createArray(),r[95]=(r[93].push(r[92]),r[93]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[93]).then(function(e){return r[94]=e})},function(e){return r[91]=r[94]}])},function(e){return r[89]=r[91]}])},function(e){return r[88]=r[89]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3015]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[90]=t[0],t})},function(e){return t.i64.eq(r[90],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3471188061]),void 0).then(function(e){return r[92]=e})},function(e){return r[91]=r[92]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[92]=t[0],t})},function(e){return r[93]=t.createArray(),r[95]=(r[93].push(r[92]),r[93]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2776822462]),r[93]).then(function(e){return r[94]=e})},function(e){return r[91]=r[94]}])},function(e){return r[89]=r[91]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3016]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[91]=t[0],t})},function(e){return t.i64.eq(r[91],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[93]=e})},function(e){return r[92]=r[93]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[93]=t[0],t})},function(e){return r[94]=t.createArray(),r[96]=(r[94].push(r[93]),r[94]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[94]).then(function(e){return r[95]=e})},function(e){return r[92]=r[95]}])},function(e){return r[90]=r[92]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3017]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[92]=t[0],t})},function(e){return t.i64.eq(r[92],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[94]=e})},function(e){return r[93]=r[94]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[94]=t[0],t})},function(e){return r[95]=t.createArray(),r[97]=(r[95].push(r[94]),r[95]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[95]).then(function(e){return r[96]=e})},function(e){return r[93]=r[96]}])},function(e){return r[91]=r[93]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3018]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[93]=t[0],t})},function(e){return t.i64.eq(r[93],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[95]=e})},function(e){return r[94]=r[95]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[95]=t[0],t})},function(e){return r[96]=t.createArray(),r[98]=(r[96].push(r[95]),r[96]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[96]).then(function(e){return r[97]=e})},function(e){return r[94]=r[97]}])},function(e){return r[92]=r[94]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3019]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[94]=t[0],t})},function(e){return t.i64.eq(r[94],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[96]=e})},function(e){return r[95]=r[96]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[96]=t[0],t})},function(e){return r[97]=t.createArray(),r[99]=(r[97].push(r[96]),r[97]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[97]).then(function(e){return r[98]=e})},function(e){return r[95]=r[98]}])},function(e){return r[93]=r[95]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3020]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[95]=t[0],t})},function(e){return t.i64.eq(r[95],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[97]=e})},function(e){return r[96]=r[97]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[97]=t[0],t})},function(e){return r[98]=t.createArray(),r[100]=(r[98].push(r[97]),r[98]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[98]).then(function(e){return r[99]=e})},function(e){return r[96]=r[99]}])},function(e){return r[94]=r[96]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3021]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[96]=t[0],t})},function(e){return t.i64.eq(r[96],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[98]=e})},function(e){return r[97]=r[98]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[98]=t[0],t})},function(e){return r[99]=t.createArray(),r[101]=(r[99].push(r[98]),r[99]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[99]).then(function(e){return r[100]=e})},function(e){return r[97]=r[100]}])},function(e){return r[95]=r[97]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3022]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[97]=t[0],t})},function(e){return t.i64.eq(r[97],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[99]=e})},function(e){return r[98]=r[99]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[99]=t[0],t})},function(e){return r[100]=t.createArray(),r[102]=(r[100].push(r[99]),r[100]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[100]).then(function(e){return r[101]=e})},function(e){return r[98]=r[101]}])},function(e){return r[96]=r[98]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3023]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[98]=t[0],t})},function(e){return t.i64.eq(r[98],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[100]=e})},function(e){return r[99]=r[100]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[100]=t[0],t})},function(e){return r[101]=t.createArray(),r[103]=(r[101].push(r[100]),r[101]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[101]).then(function(e){return r[102]=e})},function(e){return r[99]=r[102]}])},function(e){return r[97]=r[99]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3024]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[99]=t[0],t})},function(e){return t.i64.eq(r[99],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[101]=e})},function(e){return r[100]=r[101]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[101]=t[0],t})},function(e){return r[102]=t.createArray(),r[104]=(r[102].push(r[101]),r[102]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[102]).then(function(e){return r[103]=e})},function(e){return r[100]=r[103]}])},function(e){return r[98]=r[100]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3025]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[100]=t[0],t})},function(e){return t.i64.eq(r[100],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[102]=e})},function(e){return r[101]=r[102]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[102]=t[0],t})},function(e){return r[103]=t.createArray(),r[105]=(r[103].push(r[102]),r[103]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[103]).then(function(e){return r[104]=e})},function(e){return r[101]=r[104]}])},function(e){return r[99]=r[101]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3026]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[101]=t[0],t})},function(e){return t.i64.eq(r[101],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[103]=e})},function(e){return r[102]=r[103]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[103]=t[0],t})},function(e){return r[104]=t.createArray(),r[106]=(r[104].push(r[103]),r[104]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[104]).then(function(e){return r[105]=e})},function(e){return r[102]=r[105]}])},function(e){return r[100]=r[102]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3027]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[102]=t[0],t})},function(e){return t.i64.eq(r[102],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[104]=e})},function(e){return r[103]=r[104]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[104]=t[0],t})},function(e){return r[105]=t.createArray(),r[107]=(r[105].push(r[104]),r[105]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[105]).then(function(e){return r[106]=e})},function(e){return r[103]=r[106]}])},function(e){return r[101]=r[103]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3028]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[103]=t[0],t})},function(e){return t.i64.eq(r[103],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[105]=e})},function(e){return r[104]=r[105]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[105]=t[0],t})},function(e){return r[106]=t.createArray(),r[108]=(r[106].push(r[105]),r[106]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[106]).then(function(e){return r[107]=e})},function(e){return r[104]=r[107]}])},function(e){return r[102]=r[104]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3029]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[104]=t[0],t})},function(e){return t.i64.eq(r[104],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[106]=e})},function(e){return r[105]=r[106]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[106]=t[0],t})},function(e){return r[107]=t.createArray(),r[109]=(r[107].push(r[106]),r[107]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[107]).then(function(e){return r[108]=e})},function(e){return r[105]=r[108]}])},function(e){return r[103]=r[105]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3030]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[105]=t[0],t})},function(e){return t.i64.eq(r[105],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[107]=e})},function(e){return r[106]=r[107]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[107]=t[0],t})},function(e){return r[108]=t.createArray(),r[110]=(r[108].push(r[107]),r[108]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[108]).then(function(e){return r[109]=e})},function(e){return r[106]=r[109]}])},function(e){return r[104]=r[106]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3040]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[106]=t[0],t})},function(e){return t.i64.eq(r[106],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[108]=e})},function(e){return r[107]=r[108]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[108]=t[0],t})},function(e){return r[109]=t.createArray(),r[111]=(r[109].push(r[108]),r[109]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[109]).then(function(e){return r[110]=e})},function(e){return r[107]=r[110]}])},function(e){return r[105]=r[107]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3041]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[107]=t[0],t})},function(e){return t.i64.eq(r[107],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[109]=e})},function(e){return r[108]=r[109]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[109]=t[0],t})},function(e){return r[110]=t.createArray(),r[112]=(r[110].push(r[109]),r[110]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[110]).then(function(e){return r[111]=e})},function(e){return r[108]=r[111]}])},function(e){return r[106]=r[108]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3042]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[108]=t[0],t})},function(e){return t.i64.eq(r[108],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[110]=e})},function(e){return r[109]=r[110]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[110]=t[0],t})},function(e){return r[111]=t.createArray(),r[113]=(r[111].push(r[110]),r[111]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[111]).then(function(e){return r[112]=e})},function(e){return r[109]=r[112]}])},function(e){return r[107]=r[109]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3043]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[109]=t[0],t})},function(e){return t.i64.eq(r[109],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[111]=e})},function(e){return r[110]=r[111]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[111]=t[0],t})},function(e){return r[112]=t.createArray(),r[114]=(r[112].push(r[111]),r[112]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[112]).then(function(e){return r[113]=e})},function(e){return r[110]=r[113]}])},function(e){return r[108]=r[110]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3044]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[110]=t[0],t})},function(e){return t.i64.eq(r[110],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[112]=e})},function(e){return r[111]=r[112]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[112]=t[0],t})},function(e){return r[113]=t.createArray(),r[115]=(r[113].push(r[112]),r[113]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[113]).then(function(e){return r[114]=e})},function(e){return r[111]=r[114]}])},function(e){return r[109]=r[111]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3045]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[111]=t[0],t})},function(e){return t.i64.eq(r[111],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[113]=e})},function(e){return r[112]=r[113]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[113]=t[0],t})},function(e){return r[114]=t.createArray(),r[116]=(r[114].push(r[113]),r[114]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[114]).then(function(e){return r[115]=e})},function(e){return r[112]=r[115]}])},function(e){return r[110]=r[112]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3046]))?t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[113]=t[0],t})},function(e){return t.i64.eq(r[113],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[115]=e})},function(e){return r[114]=r[115]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[115]=t[0],t})},function(e){return r[116]=t.createArray(),r[118]=(r[116].push(r[115]),r[116]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[116]).then(function(e){return r[117]=e})},function(e){return r[114]=r[117]}])},function(e){return r[112]=r[114]}])},function(e){return r[111]=r[112]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3047]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[113]=t[0],t})},function(e){return t.i64.eq(r[113],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[115]=e})},function(e){return r[114]=r[115]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[115]=t[0],t})},function(e){return r[116]=t.createArray(),r[118]=(r[116].push(r[115]),r[116]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[116]).then(function(e){return r[117]=e})},function(e){return r[114]=r[117]}])},function(e){return r[112]=r[114]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3048]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[114]=t[0],t})},function(e){return t.i64.eq(r[114],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[116]=e})},function(e){return r[115]=r[116]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[116]=t[0],t})},function(e){return r[117]=t.createArray(),r[119]=(r[117].push(r[116]),r[117]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[117]).then(function(e){return r[118]=e})},function(e){return r[115]=r[118]}])},function(e){return r[113]=r[115]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3049]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[115]=t[0],t})},function(e){return t.i64.eq(r[115],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[117]=e})},function(e){return r[116]=r[117]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[117]=t[0],t})},function(e){return r[118]=t.createArray(),r[120]=(r[118].push(r[117]),r[118]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[118]).then(function(e){return r[119]=e})},function(e){return r[116]=r[119]}])},function(e){return r[114]=r[116]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3050]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[116]=t[0],t})},function(e){return t.i64.eq(r[116],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[118]=e})},function(e){return r[117]=r[118]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[118]=t[0],t})},function(e){return r[119]=t.createArray(),r[121]=(r[119].push(r[118]),r[119]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[119]).then(function(e){return r[120]=e})},function(e){return r[117]=r[120]}])},function(e){return r[115]=r[117]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4e3]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[117]=t[0],t})},function(e){return t.i64.eq(r[117],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[121]=e})},function(e){return r[118]=r[121]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[121]=t[0],t})},function(e){return r[118]=r[121]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[119]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1739999037]),void 0).then(function(e){return r[120]=e})},function(e){return r[116]=r[120]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4001]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[118]=t[0],t})},function(e){return t.i64.eq(r[118],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[122]=e})},function(e){return r[119]=r[122]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[122]=t[0],t})},function(e){return r[119]=r[122]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[120]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3373597599]),void 0).then(function(e){return r[121]=e})},function(e){return r[117]=r[121]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4002]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[119]=t[0],t})},function(e){return t.i64.eq(r[119],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[123]=e})},function(e){return r[120]=r[123]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[123]=t[0],t})},function(e){return r[120]=r[123]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[121]=t[0],t})},function(e){return t.i64.eq(r[121],r[4])?t.sequence([function(e){return r[123]=t.createArray(),r[125]=(r[123].push(r[120]),r[123]),n("LSLocalize").localizeV2Async(t.i64.cast([0,259473449]),r[123]).then(function(e){return r[124]=e})},function(e){return r[122]=r[124]}]):t.sequence([function(e){return r[123]=t.createArray(),r[125]=(r[123].push(r[120]),r[123]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1338912959]),r[123]).then(function(e){return r[124]=e})},function(e){return r[122]=r[124]}])},function(e){return r[118]=r[122]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4003]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[120]=t[0],t})},function(e){return t.i64.eq(r[120],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[124]=e})},function(e){return r[121]=r[124]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[124]=t[0],t})},function(e){return r[121]=r[124]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[122]=t[0],t})},function(e){return t.i64.eq(r[122],r[4])?t.sequence([function(e){return r[124]=t.createArray(),r[126]=(r[124].push(r[121]),r[124]),n("LSLocalize").localizeV2Async(t.i64.cast([0,812940701]),r[124]).then(function(e){return r[125]=e})},function(e){return r[123]=r[125]}]):t.sequence([function(e){return r[124]=t.createArray(),r[126]=(r[124].push(r[121]),r[124]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1099878966]),r[124]).then(function(e){return r[125]=e})},function(e){return r[123]=r[125]}])},function(e){return r[119]=r[123]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4004]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[121]=t[0],t})},function(e){return t.i64.eq(r[121],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[125]=e})},function(e){return r[122]=r[125]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[125]=t[0],t})},function(e){return r[122]=r[125]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[123]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3443782102]),void 0).then(function(e){return r[124]=e})},function(e){return r[120]=r[124]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4005]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[122]=t[0],t})},function(e){return t.i64.eq(r[122],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[126]=e})},function(e){return r[123]=r[126]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[126]=t[0],t})},function(e){return r[123]=r[126]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[124]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,618905030]),void 0).then(function(e){return r[125]=e})},function(e){return r[121]=r[125]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4006]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[123]=t[0],t})},function(e){return t.i64.eq(r[123],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[127]=e})},function(e){return r[124]=r[127]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[127]=t[0],t})},function(e){return r[124]=r[127]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[125]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2470414797]),void 0).then(function(e){return r[126]=e})},function(e){return r[122]=r[126]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4007]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[124]=t[0],t})},function(e){return t.i64.eq(r[124],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[128]=e})},function(e){return r[125]=r[128]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[128]=t[0],t})},function(e){return r[125]=r[128]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[126]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1306024833]),void 0).then(function(e){return r[127]=e})},function(e){return r[123]=r[127]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4008]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[125]=t[0],t})},function(e){return t.i64.eq(r[125],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[129]=e})},function(e){return r[126]=r[129]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[129]=t[0],t})},function(e){return r[126]=r[129]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[127]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3443782102]),void 0).then(function(e){return r[128]=e})},function(e){return r[124]=r[128]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4009]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[126]=t[0],t})},function(e){return t.i64.eq(r[126],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[130]=e})},function(e){return r[127]=r[130]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[130]=t[0],t})},function(e){return r[127]=r[130]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[128]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,618905030]),void 0).then(function(e){return r[129]=e})},function(e){return r[125]=r[129]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,5e3]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[127]=t[0],t})},function(e){return t.i64.eq(r[127],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[129]=e})},function(e){return r[128]=r[129]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[129]=t[0],t})},function(e){return r[130]=t.createArray(),r[132]=(r[130].push(r[129]),r[130]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[130]).then(function(e){return r[131]=e})},function(e){return r[128]=r[131]}])},function(e){return r[126]=r[128]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,6e3]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[128]=t[0],t})},function(e){return t.i64.eq(r[128],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[130]=e})},function(e){return r[129]=r[130]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[130]=t[0],t})},function(e){return r[131]=t.createArray(),r[133]=(r[131].push(r[130]),r[131]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[131]).then(function(e){return r[132]=e})},function(e){return r[129]=r[132]}])},function(e){return r[127]=r[129]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,7e3]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[129]=t[0],t})},function(e){return t.i64.eq(r[129],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2135145355]),void 0).then(function(e){return r[131]=e})},function(e){return r[130]=r[131]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[131]=t[0],t})},function(e){return r[132]=t.createArray(),r[134]=(r[132].push(r[131]),r[132]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3603511704]),r[132]).then(function(e){return r[133]=e})},function(e){return r[130]=r[133]}])},function(e){return r[128]=r[130]}]):t.resolve(r[128]=void 0)},function(e){return r[127]=r[128]}])},function(e){return r[126]=r[127]}])},function(e){return r[125]=r[126]}])},function(e){return r[124]=r[125]}])},function(e){return r[123]=r[124]}])},function(e){return r[122]=r[123]}])},function(e){return r[121]=r[122]}])},function(e){return r[120]=r[121]}])},function(e){return r[119]=r[120]}])},function(e){return r[118]=r[119]}])},function(e){return r[117]=r[118]}])},function(e){return r[116]=r[117]}])},function(e){return r[115]=r[116]}])},function(e){return r[114]=r[115]}])},function(e){return r[113]=r[114]}])},function(e){return r[112]=r[113]}])},function(e){return r[111]=r[112]}])},function(e){return r[110]=r[111]}])},function(e){return r[109]=r[110]}])},function(e){return r[108]=r[109]}])},function(e){return r[107]=r[108]}])},function(e){return r[106]=r[107]}])},function(e){return r[105]=r[106]}])},function(e){return r[104]=r[105]}])},function(e){return r[103]=r[104]}])},function(e){return r[102]=r[103]}])},function(e){return r[101]=r[102]}])},function(e){return r[100]=r[101]}])},function(e){return r[99]=r[100]}])},function(e){return r[98]=r[99]}])},function(e){return r[97]=r[98]}])},function(e){return r[96]=r[97]}])},function(e){return r[95]=r[96]}])},function(e){return r[94]=r[95]}])},function(e){return r[93]=r[94]}])},function(e){return r[92]=r[93]}])},function(e){return r[91]=r[92]}])},function(e){return r[90]=r[91]}])},function(e){return r[89]=r[90]}])},function(e){return r[88]=r[89]}])},function(e){return r[87]=r[88]}])},function(e){return r[86]=r[87]}])},function(e){return r[85]=r[86]}])},function(e){return r[84]=r[85]}])},function(e){return r[83]=r[84]}])},function(e){return r[82]=r[83]}])},function(e){return r[81]=r[82]}])},function(e){return r[80]=r[81]}])},function(e){return r[79]=r[80]}])},function(e){return r[78]=r[79]}])},function(e){return r[77]=r[78]}])},function(e){return r[76]=r[77]}])},function(e){return r[75]=r[76]}])},function(e){return r[74]=r[75]}])},function(e){return r[73]=r[74]}])},function(e){return r[72]=r[73]}])},function(e){return r[71]=r[72]}])},function(e){return r[70]=r[71]}])},function(e){return r[69]=r[70]}])},function(e){return r[68]=r[69]}])},function(e){return r[67]=r[68]}])},function(e){return r[66]=r[67]}])},function(e){return r[65]=r[66]}])},function(e){return r[64]=r[65]}])},function(e){return r[63]=r[64]}])},function(e){return r[62]=r[63]}])},function(e){return r[61]=r[62]}])},function(e){return r[60]=r[61]}])},function(e){return r[59]=r[60]}])},function(e){return r[58]=r[59]}])},function(e){return r[57]=r[58]}])},function(e){return r[56]=r[57]}])},function(e){return r[55]=r[56]}])},function(e){return r[54]=r[55]}])},function(e){return r[53]=r[54]}])},function(e){return r[52]=r[53]}])},function(e){return r[51]=r[52]}])},function(e){return r[50]=r[51]}])},function(e){return r[49]=r[50]}])},function(e){return r[48]=r[49]}])},function(e){return r[47]=r[48]}])},function(e){return r[46]=r[47]}])},function(e){return r[45]=r[46]}])},function(e){return r[44]=r[45]}])},function(e){return r[43]=r[44]}])},function(e){return r[42]=r[43]}])},function(e){return r[41]=r[42]}])},function(e){return r[40]=r[41]}])},function(e){return r[39]=r[40]}])},function(e){return r[38]=r[39]}])},function(e){return r[37]=r[38]}])},function(e){return r[36]=r[37]}])},function(e){return r[35]=r[36]}])},function(e){return r[34]=r[35]}])},function(e){return r[33]=r[34]}])},function(e){return r[29]=r[33]}]):t.resolve(r[29]=void 0)},function(e){return r[27]===void 0&&t.i64.eq(r[21],t.i64.cast([0,7]))&&r[29]!==void 0&&(r[27]=r[29]),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[30]=t[0],t})},function(e){return t.i64.eq(r[30],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[32]=e})},function(e){return r[31]=r[32]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[33]=t.createArray(),r[35]=(r[33].push(r[32]),r[33]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[33]).then(function(e){return r[34]=e})},function(e){return r[31]=r[34]}])},function(e){return r[20]=r[27]==null?r[31]:r[27]}]):t.sequence([function(e){return r[21]=!0,t.forEach(t.filter(t.db.table(16).fetch([[[r[5],r[10]]]]),function(e){return t.i64.eq(e.threadKey,r[5])&&t.i64.eq(t.i64.cast([0,0]),r[9])&&e.messageId===r[10]}),function(e){var n=e.item;return t.i64.eq(n.attachmentType,t.i64.cast([0,2]))?0:r[21]=!1})},function(e){return r[21]?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return t.i64.eq(r[23],r[4])?t.sequence([function(e){return r[25]=t.createArray(),r[27]=(r[25].push(r[18]),r[25]),n("LSLocalize").localizeV2Async(t.i64.cast([0,705614308]),r[25]).then(function(e){return r[26]=e})},function(e){return r[24]=r[26]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[25]=t[0],t})},function(e){return r[26]=t.createArray(),r[28]=(r[26].push(r[25]),r[26]),r[28]=(r[26].push(r[18]),r[26]),n("LSLocalize").localizeV2Async(t.i64.cast([0,313217698]),r[26]).then(function(e){return r[27]=e})},function(e){return r[24]=r[27]}])},function(e){return r[22]=r[24]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return t.i64.eq(r[23],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3558654267]),void 0).then(function(e){return r[25]=e})},function(e){return r[24]=r[25]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[25]=t[0],t})},function(e){return r[26]=t.createArray(),r[28]=(r[26].push(r[25]),r[26]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3422266740]),r[26]).then(function(e){return r[27]=e})},function(e){return r[24]=r[27]}])},function(e){return r[22]=r[24]}])},function(e){return r[20]=r[22]}])},function(e){return r[19]=r[20]}])},function(e){return r[17]=r[19]}])},function(e){return r[16]=r[17]}])},function(e){return r[15]=r[16]}])},function(e){return r[14]=r[15]}])},function(e){return r[13]=r[14]}])},function(e){return r[12]=r[13]}])},function(e){return r[11]=r[12]}])},function(e){return r[2]=r[11]}])},function(o){return t.storedProcedure(n("LSUpdateThreadSnippet"),e[0],r[2],r[3],r[4],t.like(r[2],"%\uDB80\uDC00%"),void 0,void 0,!1)},function(r){return t.storedProcedure(n("LSUpdateLastActivityTimestamp"),e[0],a.timestampMs)}]))}):t.db.table(12).fetchDesc([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(e){return r[7]=a.text,r[5]=a.threadKey,r[9]=t.i64.cast([0,0]),r[10]=a.messageId,r[4]=a.senderId,r[8]=a.stickerId,r[3]=a.isAdminMessage,r[6]=a.messageHiddenState,r[1]=!0,r[3]||!r[1]?t.resolve(r[2]=r[7]==null?"":r[7]):t.sequence([function(e){return a.isUnsent?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[12]=t[0],t})},function(e){return t.i64.eq(r[12],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2987332812]),void 0).then(function(e){return r[17]=e})},function(e){return r[13]=r[17]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(e){return r[18]=t.createArray(),r[20]=(r[18].push(r[17]),r[18]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1530605193]),r[18]).then(function(e){return r[19]=e})},function(e){return r[13]=r[19]}])},function(e){return t.db.table(9).fetch([[[r[5]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[14]=!1:(n=a.item,r[14]=[t.i64.cast([0,23]),t.i64.cast([0,21]),t.i64.cast([0,18]),t.i64.cast([0,26]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)}))})},function(e){return r[14]?t.sequence([function(e){return t.filter(t.db.table(16).fetch([[[r[5],r[10]]]]),function(e){return t.i64.eq(e.threadKey,r[5])&&t.i64.eq(t.i64.cast([0,0]),r[9])&&e.messageId===r[10]}).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),void 0,void 0,void 0,void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2],r[20]=o[3],r[21]=o[4],o):(n=l.item,a=[n.attachmentType,n.attributionAppName,n.defaultCtaType,n.descriptionText,n.xmaContentType],r[17]=a[0],r[18]=a[1],r[19]=a[2],r[20]=a[3],r[21]=a[4])})},function(e){return r[20]!==void 0?r[23]=r[20]:r[23]=r[13],r[16]=r[23]}]):t.resolve(r[16]=r[13])},function(e){return r[11]=r[16]}]):t.sequence([function(e){return t.i64.eq(r[6],t.i64.cast([0,2]))?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2975370389]),void 0).then(function(e){return r[13]=e})},function(e){return r[12]=r[13]}]):t.sequence([function(e){return t.i64.eq(r[6],t.i64.cast([0,1]))?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3921131020]),void 0).then(function(e){return r[14]=e})},function(e){return r[13]=r[14]}]):t.sequence([function(e){return t.i64.eq(a.replyType,t.i64.cast([0,1]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.i64.eq(r[15],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1899892426]),void 0).then(function(e){return r[17]=e})},function(e){return r[16]=r[17]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(e){return r[18]=t.createArray(),r[20]=(r[18].push(r[17]),r[18]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3287869262]),r[18]).then(function(e){return r[19]=e})},function(e){return r[16]=r[19]}])},function(e){return r[14]=r[16]}]):t.sequence([function(e){return r[7]!==void 0&&r[7]!==""?t.sequence([function(e){return r[18]=r[7]==null?"":r[7],t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return t.i64.eq(r[16],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1890485478]),void 0).then(function(e){return r[19]=e})},function(e){return r[17]=[r[19],": ",r[18]].join("")}]):t.sequence([function(e){return t.db.table(9).fetch([[[r[5]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[19]=!1:(n=a.item,r[19]=t.i64.eq(n.threadType,t.i64.cast([0,2])))})},function(e){return t.db.table(9).fetch([[[r[5]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[21]=!1:(n=a.item,r[21]=[t.i64.cast([0,18]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)}))})},function(e){return r[19]||r[21]?t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return r[23]=[r[24],": ",r[18]].join("")}]):t.resolve(r[23]=r[18])},function(e){return r[17]=r[23]}])},function(e){return r[15]=r[17]}]):t.sequence([function(e){return t.i64.neq(r[8],void 0)&&[t.i64.cast([53057,267535043]),t.i64.cast([85970,924785702]),t.i64.cast([85970,1004785694]),t.i64.cast([85970,1044785690])].some(function(e){return t.i64.eq(r[8],e)})?t.sequence([function(e){return r[19]="\uDB80\uDC00",t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[17]=t[0],t})},function(e){return t.i64.eq(r[17],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1890485478]),void 0).then(function(e){return r[20]=e})},function(e){return r[18]=[r[20],": ",r[19]].join("")}]):t.sequence([function(e){return t.db.table(9).fetch([[[r[5]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[20]=!1:(n=a.item,r[20]=t.i64.eq(n.threadType,t.i64.cast([0,2])))})},function(e){return t.db.table(9).fetch([[[r[5]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[22]=!1:(n=a.item,r[22]=[t.i64.cast([0,18]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)}))})},function(e){return r[20]||r[22]?t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[25]=t[0],t})},function(e){return r[24]=[r[25],": ",r[19]].join("")}]):t.resolve(r[24]=r[19])},function(e){return r[18]=r[24]}])},function(e){return r[16]=r[18]}]):t.sequence([function(e){return t.i64.neq(r[8],void 0)?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){return t.i64.eq(r[18],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1299547062]),void 0).then(function(e){return r[20]=e})},function(e){return r[19]=r[20]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return r[21]=t.createArray(),r[23]=(r[21].push(r[20]),r[21]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3621454483]),r[21]).then(function(e){return r[22]=e})},function(e){return r[19]=r[22]}])},function(e){return r[17]=r[19]}]):t.sequence([function(e){return t.count(t.filter(t.db.table(16).fetch([[[r[5],r[10]]]]),function(e){return t.i64.eq(e.threadKey,r[5])&&t.i64.eq(t.i64.cast([0,0]),r[9])&&e.messageId===r[10]})).then(function(e){return r[18]=e})},function(e){return t.i64.eq(r[18],t.i64.cast([0,0]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return t.i64.eq(r[20],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[22]=e})},function(e){return r[21]=r[22]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[22]=t[0],t})},function(e){return r[23]=t.createArray(),r[25]=(r[23].push(r[22]),r[23]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[23]).then(function(e){return r[24]=e})},function(e){return r[21]=r[24]}])},function(e){return r[19]=r[21]}]):t.sequence([function(e){return t.i64.eq(r[18],t.i64.cast([0,1]))?t.sequence([function(e){return t.filter(t.db.table(16).fetch([[[r[5],r[10]]]]),function(e){return t.i64.eq(e.threadKey,r[5])&&t.i64.eq(t.i64.cast([0,0]),r[9])&&e.messageId===r[10]}).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),void 0,void 0,void 0,void 0],r[21]=o[0],r[22]=o[1],r[23]=o[2],r[24]=o[3],r[25]=o[4],o):(n=l.item,a=[n.attachmentType,n.attributionAppName,n.defaultCtaType,n.descriptionText,n.xmaContentType],r[21]=a[0],r[22]=a[1],r[23]=a[2],r[24]=a[3],r[25]=a[4])})},function(e){return r[27]=void 0,r[27]===void 0&&(t.i64.eq(r[21],t.i64.cast([0,1]))||t.i64.eq(r[21],t.i64.cast([0,15])))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1299547062]),void 0).then(function(e){return r[34]=e})},function(e){return r[33]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[34]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3621454483]),r[35]).then(function(e){return r[36]=e})},function(e){return r[33]=r[36]}])},function(e){return r[27]=r[33]}]):t.resolve()},function(e){return r[27]===void 0&&(t.i64.eq(r[21],t.i64.cast([0,2]))||t.i64.eq(r[21],t.i64.cast([0,8])))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2106510577]),void 0).then(function(e){return r[34]=e})},function(e){return r[33]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[34]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3960370133]),r[35]).then(function(e){return r[36]=e})},function(e){return r[33]=r[36]}])},function(e){return r[27]=r[33]}]):t.resolve()},function(e){return r[27]===void 0&&t.i64.eq(r[21],t.i64.cast([0,3]))?t.sequence([function(e){return r[22]!==void 0?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return t.i64.eq(r[33],r[4])?t.sequence([function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[22]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3798396796]),r[35]).then(function(e){return r[36]=e})},function(e){return r[34]=r[36]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[36]=t.createArray(),r[38]=(r[36].push(r[35]),r[36]),r[38]=(r[36].push(r[22]),r[36]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3388601579]),r[36]).then(function(e){return r[37]=e})},function(e){return r[34]=r[37]}])},function(e){return r[32]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return t.i64.eq(r[33],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1556712457]),void 0).then(function(e){return r[35]=e})},function(e){return r[34]=r[35]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[36]=t.createArray(),r[38]=(r[36].push(r[35]),r[36]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3601791933]),r[36]).then(function(e){return r[37]=e})},function(e){return r[34]=r[37]}])},function(e){return r[32]=r[34]}])},function(e){return r[27]=r[32]}]):t.resolve()},function(e){return r[27]===void 0&&(t.i64.eq(r[21],t.i64.cast([0,4]))||t.i64.eq(r[21],t.i64.cast([0,9])))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3759817031]),void 0).then(function(e){return r[34]=e})},function(e){return r[33]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[34]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2934729541]),r[35]).then(function(e){return r[36]=e})},function(e){return r[33]=r[36]}])},function(e){return r[27]=r[33]}]):t.resolve()},function(e){return r[27]===void 0&&t.i64.eq(r[21],t.i64.cast([0,5]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,392493418]),void 0).then(function(e){return r[34]=e})},function(e){return r[33]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[34]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,4085467454]),r[35]).then(function(e){return r[36]=e})},function(e){return r[33]=r[36]}])},function(e){return r[27]=r[33]}]):t.resolve()},function(e){return r[27]===void 0&&t.i64.eq(r[21],t.i64.cast([0,10]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2738683656]),void 0).then(function(e){return r[34]=e})},function(e){return r[33]=r[34]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[34]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2996525642]),r[35]).then(function(e){return r[36]=e})},function(e){return r[33]=r[36]}])},function(e){return r[27]=r[33]}]):t.resolve()},function(e){return t.i64.neq(r[25],void 0)?r[28]=r[25]:(r[23]==="xma_live_location_sharing"?r[32]=t.i64.cast([0,7e3]):r[32]=void 0,r[28]=r[32]),t.i64.neq(r[28],void 0)?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return t.i64.eq(r[28],t.i64.cast([-1,4294967295]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return t.i64.eq(r[34],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[36]=e})},function(e){return r[35]=r[36]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[37]=t.createArray(),r[39]=(r[37].push(r[36]),r[37]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[37]).then(function(e){return r[38]=e})},function(e){return r[35]=r[38]}])},function(e){return r[33]=r[35]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,0]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return t.i64.eq(r[35],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[37]=e})},function(e){return r[36]=r[37]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return r[38]=t.createArray(),r[40]=(r[38].push(r[37]),r[38]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[38]).then(function(e){return r[39]=e})},function(e){return r[36]=r[39]}])},function(e){return r[34]=r[36]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1e3]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return t.i64.eq(r[36],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2326868239]),void 0).then(function(e){return r[38]=e})},function(e){return r[37]=r[38]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=t.createArray(),r[41]=(r[39].push(r[38]),r[39]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1001986796]),r[39]).then(function(e){return r[40]=e})},function(e){return r[37]=r[40]}])},function(e){return r[35]=r[37]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1001]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.i64.eq(r[37],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2326868239]),void 0).then(function(e){return r[39]=e})},function(e){return r[38]=r[39]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return r[40]=t.createArray(),r[42]=(r[40].push(r[39]),r[40]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1001986796]),r[40]).then(function(e){return r[41]=e})},function(e){return r[38]=r[41]}])},function(e){return r[36]=r[38]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1002]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return t.i64.eq(r[38],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285746939]),void 0).then(function(e){return r[40]=e})},function(e){return r[39]=r[40]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return r[41]=t.createArray(),r[43]=(r[41].push(r[40]),r[41]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3759448420]),r[41]).then(function(e){return r[42]=e})},function(e){return r[39]=r[42]}])},function(e){return r[37]=r[39]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1003]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return t.i64.eq(r[39],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3719716921]),void 0).then(function(e){return r[41]=e})},function(e){return r[40]=r[41]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return r[42]=t.createArray(),r[44]=(r[42].push(r[41]),r[42]),n("LSLocalize").localizeV2Async(t.i64.cast([0,284944921]),r[42]).then(function(e){return r[43]=e})},function(e){return r[40]=r[43]}])},function(e){return r[38]=r[40]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1004]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return t.i64.eq(r[40],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[42]=e})},function(e){return r[43]=t.createArray(),r[45]=(r[43].push(r[42]),r[43]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3322002377]),r[43]).then(function(e){return r[44]=e})},function(e){return r[41]=r[44]}]):t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2486550278]),void 0).then(function(e){return r[42]=e})},function(e){return r[41]=r[42]}])},function(e){return r[39]=r[41]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1005]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return t.i64.eq(r[41],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3557790945]),void 0).then(function(e){return r[43]=e})},function(e){return r[42]=r[43]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[44]=t.createArray(),r[46]=(r[44].push(r[43]),r[44]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3756846086]),r[44]).then(function(e){return r[45]=e})},function(e){return r[42]=r[45]}])},function(e){return r[40]=r[42]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1006]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[42]=t[0],t})},function(e){return t.i64.eq(r[42],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2326868239]),void 0).then(function(e){return r[44]=e})},function(e){return r[43]=r[44]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return r[45]=t.createArray(),r[47]=(r[45].push(r[44]),r[45]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1001986796]),r[45]).then(function(e){return r[46]=e})},function(e){return r[43]=r[46]}])},function(e){return r[41]=r[43]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1007]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return t.i64.eq(r[43],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3719716921]),void 0).then(function(e){return r[45]=e})},function(e){return r[44]=r[45]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return r[46]=t.createArray(),r[48]=(r[46].push(r[45]),r[46]),n("LSLocalize").localizeV2Async(t.i64.cast([0,284944921]),r[46]).then(function(e){return r[47]=e})},function(e){return r[44]=r[47]}])},function(e){return r[42]=r[44]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1008]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return t.i64.eq(r[44],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[46]=e})},function(e){return r[45]=r[46]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return r[47]=t.createArray(),r[49]=(r[47].push(r[46]),r[47]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[47]).then(function(e){return r[48]=e})},function(e){return r[45]=r[48]}])},function(e){return r[43]=r[45]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1009]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return t.i64.eq(r[45],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,780378803]),void 0).then(function(e){return r[47]=e})},function(e){return r[46]=r[47]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[48]=t.createArray(),r[50]=(r[48].push(r[47]),r[48]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3918212613]),r[48]).then(function(e){return r[49]=e})},function(e){return r[46]=r[49]}])},function(e){return r[44]=r[46]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1010]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return t.i64.eq(r[46],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3161890215]),void 0).then(function(e){return r[48]=e})},function(e){return r[47]=r[48]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return r[49]=t.createArray(),r[51]=(r[49].push(r[48]),r[49]),n("LSLocalize").localizeV2Async(t.i64.cast([0,863428456]),r[49]).then(function(e){return r[50]=e})},function(e){return r[47]=r[50]}])},function(e){return r[45]=r[47]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1011]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return t.i64.eq(r[47],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2716405471]),void 0).then(function(e){return r[49]=e})},function(e){return r[48]=r[49]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return r[50]=t.createArray(),r[52]=(r[50].push(r[49]),r[50]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3909474073]),r[50]).then(function(e){return r[51]=e})},function(e){return r[48]=r[51]}])},function(e){return r[46]=r[48]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1012]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return t.i64.eq(r[48],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1522141193]),void 0).then(function(e){return r[50]=e})},function(e){return r[49]=r[50]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[50]=t[0],t})},function(e){return r[51]=t.createArray(),r[53]=(r[51].push(r[50]),r[51]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2804766375]),r[51]).then(function(e){return r[52]=e})},function(e){return r[49]=r[52]}])},function(e){return r[47]=r[49]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1013]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return t.i64.eq(r[49],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1522141193]),void 0).then(function(e){return r[51]=e})},function(e){return r[50]=r[51]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[51]=t[0],t})},function(e){return r[52]=t.createArray(),r[54]=(r[52].push(r[51]),r[52]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2804766375]),r[52]).then(function(e){return r[53]=e})},function(e){return r[50]=r[53]}])},function(e){return r[48]=r[50]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1014]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[50]=t[0],t})},function(e){return t.i64.eq(r[50],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[52]=e})},function(e){return r[53]=t.createArray(),r[55]=(r[53].push(r[52]),r[53]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3322002377]),r[53]).then(function(e){return r[54]=e})},function(e){return r[51]=r[54]}]):t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2486550278]),void 0).then(function(e){return r[52]=e})},function(e){return r[51]=r[52]}])},function(e){return r[49]=r[51]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1015]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[51]=t[0],t})},function(e){return t.i64.eq(r[51],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[53]=e})},function(e){return r[52]=r[53]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return r[54]=t.createArray(),r[56]=(r[54].push(r[53]),r[54]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[54]).then(function(e){return r[55]=e})},function(e){return r[52]=r[55]}])},function(e){return r[50]=r[52]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1016]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[52]=t[0],t})},function(e){return t.i64.eq(r[52],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[54]=e})},function(e){return r[53]=r[54]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return r[55]=t.createArray(),r[57]=(r[55].push(r[54]),r[55]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[55]).then(function(e){return r[56]=e})},function(e){return r[53]=r[56]}])},function(e){return r[51]=r[53]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1017]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return t.i64.eq(r[53],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[55]=e})},function(e){return r[54]=r[55]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[55]=t[0],t})},function(e){return r[56]=t.createArray(),r[58]=(r[56].push(r[55]),r[56]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[56]).then(function(e){return r[57]=e})},function(e){return r[54]=r[57]}])},function(e){return r[52]=r[54]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1018]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return t.i64.eq(r[54],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[56]=e})},function(e){return r[55]=r[56]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return r[57]=t.createArray(),r[59]=(r[57].push(r[56]),r[57]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[57]).then(function(e){return r[58]=e})},function(e){return r[55]=r[58]}])},function(e){return r[53]=r[55]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1019]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[55]=t[0],t})},function(e){return t.i64.eq(r[55],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[57]=e})},function(e){return r[56]=r[57]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[57]=t[0],t})},function(e){return r[58]=t.createArray(),r[60]=(r[58].push(r[57]),r[58]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[58]).then(function(e){return r[59]=e})},function(e){return r[56]=r[59]}])},function(e){return r[54]=r[56]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1020]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return t.i64.eq(r[56],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[58]=e})},function(e){return r[57]=r[58]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[58]=t[0],t})},function(e){return r[59]=t.createArray(),r[61]=(r[59].push(r[58]),r[59]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[59]).then(function(e){return r[60]=e})},function(e){return r[57]=r[60]}])},function(e){return r[55]=r[57]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2e3]))?t.sequence([function(e){return t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[59]=t[0],t})},function(e){return t.i64.eq(r[59],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[61]=e})},function(e){return r[60]=r[61]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return r[62]=t.createArray(),r[64]=(r[62].push(r[61]),r[62]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[62]).then(function(e){return r[63]=e})},function(e){return r[60]=r[63]}])},function(e){return r[58]=r[60]}])},function(e){return r[57]=r[58]}])},function(e){return r[56]=r[57]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2001]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[58]=t[0],t})},function(e){return t.i64.eq(r[58],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285746939]),void 0).then(function(e){return r[60]=e})},function(e){return r[59]=r[60]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[60]=t[0],t})},function(e){return r[61]=t.createArray(),r[63]=(r[61].push(r[60]),r[61]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3759448420]),r[61]).then(function(e){return r[62]=e})},function(e){return r[59]=r[62]}])},function(e){return r[57]=r[59]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2002]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[59]=t[0],t})},function(e){return t.i64.eq(r[59],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3719716921]),void 0).then(function(e){return r[61]=e})},function(e){return r[60]=r[61]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return r[62]=t.createArray(),r[64]=(r[62].push(r[61]),r[62]),n("LSLocalize").localizeV2Async(t.i64.cast([0,284944921]),r[62]).then(function(e){return r[63]=e})},function(e){return r[60]=r[63]}])},function(e){return r[58]=r[60]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2003]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[60]=t[0],t})},function(e){return t.i64.eq(r[60],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[62]=e})},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[63]=t[0],t})},function(e){return t.i64.eq(r[63],r[4])?t.sequence([function(e){return r[65]=t.createArray(),r[67]=(r[65].push(r[62]),r[65]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1247108605]),r[65]).then(function(e){return r[66]=e})},function(e){return r[64]=r[66]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[65]=t[0],t})},function(e){return r[66]=t.createArray(),r[68]=(r[66].push(r[65]),r[66]),r[68]=(r[66].push(r[62]),r[66]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2966876020]),r[66]).then(function(e){return r[67]=e})},function(e){return r[64]=r[67]}])},function(e){return r[61]=r[64]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[62]=t[0],t})},function(e){return t.i64.eq(r[62],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1056933543]),void 0).then(function(e){return r[64]=e})},function(e){return r[63]=r[64]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[64]=t[0],t})},function(e){return r[65]=t.createArray(),r[67]=(r[65].push(r[64]),r[65]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1167688664]),r[65]).then(function(e){return r[66]=e})},function(e){return r[63]=r[66]}])},function(e){return r[61]=r[63]}])},function(e){return r[59]=r[61]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2004]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return t.i64.eq(r[61],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2326868239]),void 0).then(function(e){return r[63]=e})},function(e){return r[62]=r[63]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[63]=t[0],t})},function(e){return r[64]=t.createArray(),r[66]=(r[64].push(r[63]),r[64]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1001986796]),r[64]).then(function(e){return r[65]=e})},function(e){return r[62]=r[65]}])},function(e){return r[60]=r[62]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2005]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[62]=t[0],t})},function(e){return t.i64.eq(r[62],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,772459202]),void 0).then(function(e){return r[64]=e})},function(e){return r[63]=r[64]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[64]=t[0],t})},function(e){return r[65]=t.createArray(),r[67]=(r[65].push(r[64]),r[65]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3546068912]),r[65]).then(function(e){return r[66]=e})},function(e){return r[63]=r[66]}])},function(e){return r[61]=r[63]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2006]))?t.sequence([function(e){return t.i64.eq(r[32],r[4])?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[64]=t[0],t})},function(e){return t.i64.eq(r[64],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2459540079]),void 0).then(function(e){return r[66]=e})},function(e){return r[65]=r[66]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[66]=t[0],t})},function(e){return r[67]=t.createArray(),r[69]=(r[67].push(r[66]),r[67]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1596311291]),r[67]).then(function(e){return r[68]=e})},function(e){return r[65]=r[68]}])},function(e){return r[63]=r[65]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[64]=t[0],t})},function(e){return t.i64.eq(r[64],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2253698324]),void 0).then(function(e){return r[66]=e})},function(e){return r[65]=r[66]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[66]=t[0],t})},function(e){return r[67]=t.createArray(),r[69]=(r[67].push(r[66]),r[67]),n("LSLocalize").localizeV2Async(t.i64.cast([0,4269602817]),r[67]).then(function(e){return r[68]=e})},function(e){return r[65]=r[68]}])},function(e){return r[63]=r[65]}])},function(e){return r[62]=r[63]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2007]))?t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[65]=t[0],t})},function(e){return t.i64.eq(r[65],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[67]=e})},function(e){return r[66]=r[67]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[67]=t[0],t})},function(e){return r[68]=t.createArray(),r[70]=(r[68].push(r[67]),r[68]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[68]).then(function(e){return r[69]=e})},function(e){return r[66]=r[69]}])},function(e){return r[64]=r[66]}])},function(e){return r[63]=r[64]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2008]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[65]=t[0],t})},function(e){return t.i64.eq(r[65],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[67]=e})},function(e){return r[66]=r[67]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[67]=t[0],t})},function(e){return r[68]=t.createArray(),r[70]=(r[68].push(r[67]),r[68]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[68]).then(function(e){return r[69]=e})},function(e){return r[66]=r[69]}])},function(e){return r[64]=r[66]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2009]))?t.sequence([function(e){return t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[68]=t[0],t})},function(e){return t.i64.eq(r[68],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[70]=e})},function(e){return r[69]=r[70]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[70]=t[0],t})},function(e){return r[71]=t.createArray(),r[73]=(r[71].push(r[70]),r[71]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[71]).then(function(e){return r[72]=e})},function(e){return r[69]=r[72]}])},function(e){return r[67]=r[69]}])},function(e){return r[66]=r[67]}])},function(e){return r[65]=r[66]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2010]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[67]=t[0],t})},function(e){return t.i64.eq(r[67],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[69]=e})},function(e){return r[68]=r[69]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[69]=t[0],t})},function(e){return r[70]=t.createArray(),r[72]=(r[70].push(r[69]),r[70]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[70]).then(function(e){return r[71]=e})},function(e){return r[68]=r[71]}])},function(e){return r[66]=r[68]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2011]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[68]=t[0],t})},function(e){return t.i64.eq(r[68],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[70]=e})},function(e){return r[69]=r[70]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[70]=t[0],t})},function(e){return r[71]=t.createArray(),r[73]=(r[71].push(r[70]),r[71]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[71]).then(function(e){return r[72]=e})},function(e){return r[69]=r[72]}])},function(e){return r[67]=r[69]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2012]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[69]=t[0],t})},function(e){return t.i64.eq(r[69],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[71]=e})},function(e){return r[70]=r[71]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[71]=t[0],t})},function(e){return r[72]=t.createArray(),r[74]=(r[72].push(r[71]),r[72]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[72]).then(function(e){return r[73]=e})},function(e){return r[70]=r[73]}])},function(e){return r[68]=r[70]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2013]))?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[70]=e})},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[71]=t[0],t})},function(e){return t.i64.eq(r[71],r[4])?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return t.i64.eq(r[73],r[4])?t.sequence([function(e){return r[75]=t.createArray(),r[77]=(r[75].push(r[70]),r[75]),n("LSLocalize").localizeV2Async(t.i64.cast([0,785694792]),r[75]).then(function(e){return r[76]=e})},function(e){return r[74]=r[76]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[75]=t[0],t})},function(e){return r[76]=t.createArray(),r[78]=(r[76].push(r[75]),r[76]),r[78]=(r[76].push(r[70]),r[76]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2625447567]),r[76]).then(function(e){return r[77]=e})},function(e){return r[74]=r[77]}])},function(e){return r[72]=r[74]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return t.i64.eq(r[73],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3982213805]),void 0).then(function(e){return r[75]=e})},function(e){return r[74]=r[75]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[75]=t[0],t})},function(e){return r[76]=t.createArray(),r[78]=(r[76].push(r[75]),r[76]),n("LSLocalize").localizeV2Async(t.i64.cast([0,464916028]),r[76]).then(function(e){return r[77]=e})},function(e){return r[74]=r[77]}])},function(e){return r[72]=r[74]}])},function(e){return r[69]=r[72]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2014]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[71]=t[0],t})},function(e){return t.i64.eq(r[71],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[73]=e})},function(e){return r[72]=r[73]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return r[74]=t.createArray(),r[76]=(r[74].push(r[73]),r[74]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[74]).then(function(e){return r[75]=e})},function(e){return r[72]=r[75]}])},function(e){return r[70]=r[72]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2015]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[72]=t[0],t})},function(e){return t.i64.eq(r[72],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[74]=e})},function(e){return r[73]=r[74]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[74]=t[0],t})},function(e){return r[75]=t.createArray(),r[77]=(r[75].push(r[74]),r[75]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[75]).then(function(e){return r[76]=e})},function(e){return r[73]=r[76]}])},function(e){return r[71]=r[73]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2016]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[73]=t[0],t})},function(e){return t.i64.eq(r[73],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[75]=e})},function(e){return r[74]=r[75]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[75]=t[0],t})},function(e){return r[76]=t.createArray(),r[78]=(r[76].push(r[75]),r[76]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[76]).then(function(e){return r[77]=e})},function(e){return r[74]=r[77]}])},function(e){return r[72]=r[74]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2017]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[74]=t[0],t})},function(e){return t.i64.eq(r[74],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[76]=e})},function(e){return r[75]=r[76]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[76]=t[0],t})},function(e){return r[77]=t.createArray(),r[79]=(r[77].push(r[76]),r[77]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[77]).then(function(e){return r[78]=e})},function(e){return r[75]=r[78]}])},function(e){return r[73]=r[75]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3e3]))?t.sequence([function(e){return t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[77]=t[0],t})},function(e){return t.i64.eq(r[77],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[79]=e})},function(e){return r[78]=r[79]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[79]=t[0],t})},function(e){return r[80]=t.createArray(),r[82]=(r[80].push(r[79]),r[80]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[80]).then(function(e){return r[81]=e})},function(e){return r[78]=r[81]}])},function(e){return r[76]=r[78]}])},function(e){return r[75]=r[76]}])},function(e){return r[74]=r[75]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3001]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[76]=t[0],t})},function(e){return t.i64.eq(r[76],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[78]=e})},function(e){return r[77]=r[78]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[78]=t[0],t})},function(e){return r[79]=t.createArray(),r[81]=(r[79].push(r[78]),r[79]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[79]).then(function(e){return r[80]=e})},function(e){return r[77]=r[80]}])},function(e){return r[75]=r[77]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3002]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[77]=t[0],t})},function(e){return t.i64.eq(r[77],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2973334239]),void 0).then(function(e){return r[79]=e})},function(e){return r[78]=r[79]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[79]=t[0],t})},function(e){return r[80]=t.createArray(),r[82]=(r[80].push(r[79]),r[80]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3616471048]),r[80]).then(function(e){return r[81]=e})},function(e){return r[78]=r[81]}])},function(e){return r[76]=r[78]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3003]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[78]=t[0],t})},function(e){return t.i64.eq(r[78],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2973334239]),void 0).then(function(e){return r[80]=e})},function(e){return r[79]=r[80]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[80]=t[0],t})},function(e){return r[81]=t.createArray(),r[83]=(r[81].push(r[80]),r[81]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3616471048]),r[81]).then(function(e){return r[82]=e})},function(e){return r[79]=r[82]}])},function(e){return r[77]=r[79]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3004]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[79]=t[0],t})},function(e){return t.i64.eq(r[79],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[81]=e})},function(e){return r[80]=r[81]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[81]=t[0],t})},function(e){return r[82]=t.createArray(),r[84]=(r[82].push(r[81]),r[82]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[82]).then(function(e){return r[83]=e})},function(e){return r[80]=r[83]}])},function(e){return r[78]=r[80]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3005]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[80]=t[0],t})},function(e){return t.i64.eq(r[80],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[82]=e})},function(e){return r[81]=r[82]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[82]=t[0],t})},function(e){return r[83]=t.createArray(),r[85]=(r[83].push(r[82]),r[83]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[83]).then(function(e){return r[84]=e})},function(e){return r[81]=r[84]}])},function(e){return r[79]=r[81]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3006]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[81]=t[0],t})},function(e){return t.i64.eq(r[81],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[83]=e})},function(e){return r[82]=r[83]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[83]=t[0],t})},function(e){return r[84]=t.createArray(),r[86]=(r[84].push(r[83]),r[84]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[84]).then(function(e){return r[85]=e})},function(e){return r[82]=r[85]}])},function(e){return r[80]=r[82]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3007]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[82]=t[0],t})},function(e){return t.i64.eq(r[82],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[84]=e})},function(e){return r[83]=r[84]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[84]=t[0],t})},function(e){return r[85]=t.createArray(),r[87]=(r[85].push(r[84]),r[85]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[85]).then(function(e){return r[86]=e})},function(e){return r[83]=r[86]}])},function(e){return r[81]=r[83]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3008]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[83]=t[0],t})},function(e){return t.i64.eq(r[83],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[85]=e})},function(e){return r[84]=r[85]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[85]=t[0],t})},function(e){return r[86]=t.createArray(),r[88]=(r[86].push(r[85]),r[86]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[86]).then(function(e){return r[87]=e})},function(e){return r[84]=r[87]}])},function(e){return r[82]=r[84]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3009]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[84]=t[0],t})},function(e){return t.i64.eq(r[84],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[86]=e})},function(e){return r[85]=r[86]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[86]=t[0],t})},function(e){return r[87]=t.createArray(),r[89]=(r[87].push(r[86]),r[87]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[87]).then(function(e){return r[88]=e})},function(e){return r[85]=r[88]}])},function(e){return r[83]=r[85]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3010]))?t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[86]=t[0],t})},function(e){return t.i64.eq(r[86],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[88]=e})},function(e){return r[87]=r[88]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[88]=t[0],t})},function(e){return r[89]=t.createArray(),r[91]=(r[89].push(r[88]),r[89]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[89]).then(function(e){return r[90]=e})},function(e){return r[87]=r[90]}])},function(e){return r[85]=r[87]}])},function(e){return r[84]=r[85]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3011]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[86]=t[0],t})},function(e){return t.i64.eq(r[86],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[88]=e})},function(e){return r[87]=r[88]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[88]=t[0],t})},function(e){return r[89]=t.createArray(),r[91]=(r[89].push(r[88]),r[89]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[89]).then(function(e){return r[90]=e})},function(e){return r[87]=r[90]}])},function(e){return r[85]=r[87]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3012]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[87]=t[0],t})},function(e){return t.i64.eq(r[87],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[89]=e})},function(e){return r[88]=r[89]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[89]=t[0],t})},function(e){return r[90]=t.createArray(),r[92]=(r[90].push(r[89]),r[90]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[90]).then(function(e){return r[91]=e})},function(e){return r[88]=r[91]}])},function(e){return r[86]=r[88]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3013]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[88]=t[0],t})},function(e){return t.i64.eq(r[88],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[90]=e})},function(e){return r[89]=r[90]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[90]=t[0],t})},function(e){return r[91]=t.createArray(),r[93]=(r[91].push(r[90]),r[91]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[91]).then(function(e){return r[92]=e})},function(e){return r[89]=r[92]}])},function(e){return r[87]=r[89]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3014]))?t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[90]=t[0],t})},function(e){return t.i64.eq(r[90],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[92]=e})},function(e){return r[91]=r[92]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[92]=t[0],t})},function(e){return r[93]=t.createArray(),r[95]=(r[93].push(r[92]),r[93]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[93]).then(function(e){return r[94]=e})},function(e){return r[91]=r[94]}])},function(e){return r[89]=r[91]}])},function(e){return r[88]=r[89]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3015]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[90]=t[0],t})},function(e){return t.i64.eq(r[90],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3471188061]),void 0).then(function(e){return r[92]=e})},function(e){return r[91]=r[92]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[92]=t[0],t})},function(e){return r[93]=t.createArray(),r[95]=(r[93].push(r[92]),r[93]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2776822462]),r[93]).then(function(e){return r[94]=e})},function(e){return r[91]=r[94]}])},function(e){return r[89]=r[91]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3016]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[91]=t[0],t})},function(e){return t.i64.eq(r[91],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[93]=e})},function(e){return r[92]=r[93]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[93]=t[0],t})},function(e){return r[94]=t.createArray(),r[96]=(r[94].push(r[93]),r[94]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[94]).then(function(e){return r[95]=e})},function(e){return r[92]=r[95]}])},function(e){return r[90]=r[92]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3017]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[92]=t[0],t})},function(e){return t.i64.eq(r[92],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[94]=e})},function(e){return r[93]=r[94]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[94]=t[0],t})},function(e){return r[95]=t.createArray(),r[97]=(r[95].push(r[94]),r[95]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[95]).then(function(e){return r[96]=e})},function(e){return r[93]=r[96]}])},function(e){return r[91]=r[93]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3018]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[93]=t[0],t})},function(e){return t.i64.eq(r[93],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[95]=e})},function(e){return r[94]=r[95]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[95]=t[0],t})},function(e){return r[96]=t.createArray(),r[98]=(r[96].push(r[95]),r[96]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[96]).then(function(e){return r[97]=e})},function(e){return r[94]=r[97]}])},function(e){return r[92]=r[94]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3019]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[94]=t[0],t})},function(e){return t.i64.eq(r[94],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[96]=e})},function(e){return r[95]=r[96]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[96]=t[0],t})},function(e){return r[97]=t.createArray(),r[99]=(r[97].push(r[96]),r[97]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[97]).then(function(e){return r[98]=e})},function(e){return r[95]=r[98]}])},function(e){return r[93]=r[95]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3020]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[95]=t[0],t})},function(e){return t.i64.eq(r[95],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[97]=e})},function(e){return r[96]=r[97]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[97]=t[0],t})},function(e){return r[98]=t.createArray(),r[100]=(r[98].push(r[97]),r[98]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[98]).then(function(e){return r[99]=e})},function(e){return r[96]=r[99]}])},function(e){return r[94]=r[96]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3021]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[96]=t[0],t})},function(e){return t.i64.eq(r[96],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[98]=e})},function(e){return r[97]=r[98]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[98]=t[0],t})},function(e){return r[99]=t.createArray(),r[101]=(r[99].push(r[98]),r[99]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[99]).then(function(e){return r[100]=e})},function(e){return r[97]=r[100]}])},function(e){return r[95]=r[97]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3022]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[97]=t[0],t})},function(e){return t.i64.eq(r[97],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[99]=e})},function(e){return r[98]=r[99]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[99]=t[0],t})},function(e){return r[100]=t.createArray(),r[102]=(r[100].push(r[99]),r[100]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[100]).then(function(e){return r[101]=e})},function(e){return r[98]=r[101]}])},function(e){return r[96]=r[98]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3023]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[98]=t[0],t})},function(e){return t.i64.eq(r[98],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[100]=e})},function(e){return r[99]=r[100]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[100]=t[0],t})},function(e){return r[101]=t.createArray(),r[103]=(r[101].push(r[100]),r[101]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[101]).then(function(e){return r[102]=e})},function(e){return r[99]=r[102]}])},function(e){return r[97]=r[99]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3024]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[99]=t[0],t})},function(e){return t.i64.eq(r[99],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[101]=e})},function(e){return r[100]=r[101]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[101]=t[0],t})},function(e){return r[102]=t.createArray(),r[104]=(r[102].push(r[101]),r[102]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[102]).then(function(e){return r[103]=e})},function(e){return r[100]=r[103]}])},function(e){return r[98]=r[100]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3025]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[100]=t[0],t})},function(e){return t.i64.eq(r[100],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[102]=e})},function(e){return r[101]=r[102]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[102]=t[0],t})},function(e){return r[103]=t.createArray(),r[105]=(r[103].push(r[102]),r[103]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[103]).then(function(e){return r[104]=e})},function(e){return r[101]=r[104]}])},function(e){return r[99]=r[101]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3026]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[101]=t[0],t})},function(e){return t.i64.eq(r[101],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[103]=e})},function(e){return r[102]=r[103]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[103]=t[0],t})},function(e){return r[104]=t.createArray(),r[106]=(r[104].push(r[103]),r[104]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[104]).then(function(e){return r[105]=e})},function(e){return r[102]=r[105]}])},function(e){return r[100]=r[102]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3027]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[102]=t[0],t})},function(e){return t.i64.eq(r[102],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[104]=e})},function(e){return r[103]=r[104]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[104]=t[0],t})},function(e){return r[105]=t.createArray(),r[107]=(r[105].push(r[104]),r[105]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[105]).then(function(e){return r[106]=e})},function(e){return r[103]=r[106]}])},function(e){return r[101]=r[103]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3028]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[103]=t[0],t})},function(e){return t.i64.eq(r[103],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[105]=e})},function(e){return r[104]=r[105]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[105]=t[0],t})},function(e){return r[106]=t.createArray(),r[108]=(r[106].push(r[105]),r[106]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[106]).then(function(e){return r[107]=e})},function(e){return r[104]=r[107]}])},function(e){return r[102]=r[104]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3029]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[104]=t[0],t})},function(e){return t.i64.eq(r[104],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[106]=e})},function(e){return r[105]=r[106]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[106]=t[0],t})},function(e){return r[107]=t.createArray(),r[109]=(r[107].push(r[106]),r[107]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[107]).then(function(e){return r[108]=e})},function(e){return r[105]=r[108]}])},function(e){return r[103]=r[105]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3030]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[105]=t[0],t})},function(e){return t.i64.eq(r[105],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[107]=e})},function(e){return r[106]=r[107]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[107]=t[0],t})},function(e){return r[108]=t.createArray(),r[110]=(r[108].push(r[107]),r[108]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[108]).then(function(e){return r[109]=e})},function(e){return r[106]=r[109]}])},function(e){return r[104]=r[106]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3040]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[106]=t[0],t})},function(e){return t.i64.eq(r[106],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[108]=e})},function(e){return r[107]=r[108]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[108]=t[0],t})},function(e){return r[109]=t.createArray(),r[111]=(r[109].push(r[108]),r[109]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[109]).then(function(e){return r[110]=e})},function(e){return r[107]=r[110]}])},function(e){return r[105]=r[107]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3041]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[107]=t[0],t})},function(e){return t.i64.eq(r[107],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[109]=e})},function(e){return r[108]=r[109]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[109]=t[0],t})},function(e){return r[110]=t.createArray(),r[112]=(r[110].push(r[109]),r[110]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[110]).then(function(e){return r[111]=e})},function(e){return r[108]=r[111]}])},function(e){return r[106]=r[108]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3042]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[108]=t[0],t})},function(e){return t.i64.eq(r[108],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[110]=e})},function(e){return r[109]=r[110]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[110]=t[0],t})},function(e){return r[111]=t.createArray(),r[113]=(r[111].push(r[110]),r[111]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[111]).then(function(e){return r[112]=e})},function(e){return r[109]=r[112]}])},function(e){return r[107]=r[109]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3043]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[109]=t[0],t})},function(e){return t.i64.eq(r[109],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[111]=e})},function(e){return r[110]=r[111]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[111]=t[0],t})},function(e){return r[112]=t.createArray(),r[114]=(r[112].push(r[111]),r[112]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[112]).then(function(e){return r[113]=e})},function(e){return r[110]=r[113]}])},function(e){return r[108]=r[110]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3044]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[110]=t[0],t})},function(e){return t.i64.eq(r[110],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[112]=e})},function(e){return r[111]=r[112]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[112]=t[0],t})},function(e){return r[113]=t.createArray(),r[115]=(r[113].push(r[112]),r[113]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[113]).then(function(e){return r[114]=e})},function(e){return r[111]=r[114]}])},function(e){return r[109]=r[111]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3045]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[111]=t[0],t})},function(e){return t.i64.eq(r[111],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[113]=e})},function(e){return r[112]=r[113]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[113]=t[0],t})},function(e){return r[114]=t.createArray(),r[116]=(r[114].push(r[113]),r[114]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[114]).then(function(e){return r[115]=e})},function(e){return r[112]=r[115]}])},function(e){return r[110]=r[112]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3046]))?t.sequence([function(e){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[113]=t[0],t})},function(e){return t.i64.eq(r[113],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[115]=e})},function(e){return r[114]=r[115]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[115]=t[0],t})},function(e){return r[116]=t.createArray(),r[118]=(r[116].push(r[115]),r[116]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[116]).then(function(e){return r[117]=e})},function(e){return r[114]=r[117]}])},function(e){return r[112]=r[114]}])},function(e){return r[111]=r[112]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3047]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[113]=t[0],t})},function(e){return t.i64.eq(r[113],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[115]=e})},function(e){return r[114]=r[115]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[115]=t[0],t})},function(e){return r[116]=t.createArray(),r[118]=(r[116].push(r[115]),r[116]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[116]).then(function(e){return r[117]=e})},function(e){return r[114]=r[117]}])},function(e){return r[112]=r[114]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3048]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[114]=t[0],t})},function(e){return t.i64.eq(r[114],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[116]=e})},function(e){return r[115]=r[116]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[116]=t[0],t})},function(e){return r[117]=t.createArray(),r[119]=(r[117].push(r[116]),r[117]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[117]).then(function(e){return r[118]=e})},function(e){return r[115]=r[118]}])},function(e){return r[113]=r[115]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3049]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[115]=t[0],t})},function(e){return t.i64.eq(r[115],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[117]=e})},function(e){return r[116]=r[117]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[117]=t[0],t})},function(e){return r[118]=t.createArray(),r[120]=(r[118].push(r[117]),r[118]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[118]).then(function(e){return r[119]=e})},function(e){return r[116]=r[119]}])},function(e){return r[114]=r[116]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3050]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[116]=t[0],t})},function(e){return t.i64.eq(r[116],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[118]=e})},function(e){return r[117]=r[118]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[118]=t[0],t})},function(e){return r[119]=t.createArray(),r[121]=(r[119].push(r[118]),r[119]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[119]).then(function(e){return r[120]=e})},function(e){return r[117]=r[120]}])},function(e){return r[115]=r[117]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4e3]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[117]=t[0],t})},function(e){return t.i64.eq(r[117],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[121]=e})},function(e){return r[118]=r[121]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[121]=t[0],t})},function(e){return r[118]=r[121]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[119]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1739999037]),void 0).then(function(e){return r[120]=e})},function(e){return r[116]=r[120]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4001]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[118]=t[0],t})},function(e){return t.i64.eq(r[118],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[122]=e})},function(e){return r[119]=r[122]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[122]=t[0],t})},function(e){return r[119]=r[122]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[120]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3373597599]),void 0).then(function(e){return r[121]=e})},function(e){return r[117]=r[121]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4002]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[119]=t[0],t})},function(e){return t.i64.eq(r[119],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[123]=e})},function(e){return r[120]=r[123]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[123]=t[0],t})},function(e){return r[120]=r[123]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[121]=t[0],t})},function(e){return t.i64.eq(r[121],r[4])?t.sequence([function(e){return r[123]=t.createArray(),r[125]=(r[123].push(r[120]),r[123]),n("LSLocalize").localizeV2Async(t.i64.cast([0,259473449]),r[123]).then(function(e){return r[124]=e})},function(e){return r[122]=r[124]}]):t.sequence([function(e){return r[123]=t.createArray(),r[125]=(r[123].push(r[120]),r[123]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1338912959]),r[123]).then(function(e){return r[124]=e})},function(e){return r[122]=r[124]}])},function(e){return r[118]=r[122]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4003]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[120]=t[0],t})},function(e){return t.i64.eq(r[120],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[124]=e})},function(e){return r[121]=r[124]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[124]=t[0],t})},function(e){return r[121]=r[124]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[122]=t[0],t})},function(e){return t.i64.eq(r[122],r[4])?t.sequence([function(e){return r[124]=t.createArray(),r[126]=(r[124].push(r[121]),r[124]),n("LSLocalize").localizeV2Async(t.i64.cast([0,812940701]),r[124]).then(function(e){return r[125]=e})},function(e){return r[123]=r[125]}]):t.sequence([function(e){return r[124]=t.createArray(),r[126]=(r[124].push(r[121]),r[124]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1099878966]),r[124]).then(function(e){return r[125]=e})},function(e){return r[123]=r[125]}])},function(e){return r[119]=r[123]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4004]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[121]=t[0],t})},function(e){return t.i64.eq(r[121],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[125]=e})},function(e){return r[122]=r[125]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[125]=t[0],t})},function(e){return r[122]=r[125]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[123]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3443782102]),void 0).then(function(e){return r[124]=e})},function(e){return r[120]=r[124]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4005]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[122]=t[0],t})},function(e){return t.i64.eq(r[122],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[126]=e})},function(e){return r[123]=r[126]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[126]=t[0],t})},function(e){return r[123]=r[126]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[124]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,618905030]),void 0).then(function(e){return r[125]=e})},function(e){return r[121]=r[125]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4006]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[123]=t[0],t})},function(e){return t.i64.eq(r[123],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[127]=e})},function(e){return r[124]=r[127]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[127]=t[0],t})},function(e){return r[124]=r[127]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[125]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2470414797]),void 0).then(function(e){return r[126]=e})},function(e){return r[122]=r[126]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4007]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[124]=t[0],t})},function(e){return t.i64.eq(r[124],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[128]=e})},function(e){return r[125]=r[128]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[128]=t[0],t})},function(e){return r[125]=r[128]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[126]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1306024833]),void 0).then(function(e){return r[127]=e})},function(e){return r[123]=r[127]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4008]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[125]=t[0],t})},function(e){return t.i64.eq(r[125],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[129]=e})},function(e){return r[126]=r[129]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[129]=t[0],t})},function(e){return r[126]=r[129]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[127]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3443782102]),void 0).then(function(e){return r[128]=e})},function(e){return r[124]=r[128]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4009]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[126]=t[0],t})},function(e){return t.i64.eq(r[126],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[130]=e})},function(e){return r[127]=r[130]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[130]=t[0],t})},function(e){return r[127]=r[130]}])},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[128]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,618905030]),void 0).then(function(e){return r[129]=e})},function(e){return r[125]=r[129]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,5e3]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[127]=t[0],t})},function(e){return t.i64.eq(r[127],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[129]=e})},function(e){return r[128]=r[129]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[129]=t[0],t})},function(e){return r[130]=t.createArray(),r[132]=(r[130].push(r[129]),r[130]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[130]).then(function(e){return r[131]=e})},function(e){return r[128]=r[131]}])},function(e){return r[126]=r[128]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,6e3]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[128]=t[0],t})},function(e){return t.i64.eq(r[128],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[130]=e})},function(e){return r[129]=r[130]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[130]=t[0],t})},function(e){return r[131]=t.createArray(),r[133]=(r[131].push(r[130]),r[131]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[131]).then(function(e){return r[132]=e})},function(e){return r[129]=r[132]}])},function(e){return r[127]=r[129]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,7e3]))?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[129]=t[0],t})},function(e){return t.i64.eq(r[129],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2135145355]),void 0).then(function(e){return r[131]=e})},function(e){return r[130]=r[131]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[131]=t[0],t})},function(e){return r[132]=t.createArray(),r[134]=(r[132].push(r[131]),r[132]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3603511704]),r[132]).then(function(e){return r[133]=e})},function(e){return r[130]=r[133]}])},function(e){return r[128]=r[130]}]):t.resolve(r[128]=void 0)},function(e){return r[127]=r[128]}])},function(e){return r[126]=r[127]}])},function(e){return r[125]=r[126]}])},function(e){return r[124]=r[125]}])},function(e){return r[123]=r[124]}])},function(e){return r[122]=r[123]}])},function(e){return r[121]=r[122]}])},function(e){return r[120]=r[121]}])},function(e){return r[119]=r[120]}])},function(e){return r[118]=r[119]}])},function(e){return r[117]=r[118]}])},function(e){return r[116]=r[117]}])},function(e){return r[115]=r[116]}])},function(e){return r[114]=r[115]}])},function(e){return r[113]=r[114]}])},function(e){return r[112]=r[113]}])},function(e){return r[111]=r[112]}])},function(e){return r[110]=r[111]}])},function(e){return r[109]=r[110]}])},function(e){return r[108]=r[109]}])},function(e){return r[107]=r[108]}])},function(e){return r[106]=r[107]}])},function(e){return r[105]=r[106]}])},function(e){return r[104]=r[105]}])},function(e){return r[103]=r[104]}])},function(e){return r[102]=r[103]}])},function(e){return r[101]=r[102]}])},function(e){return r[100]=r[101]}])},function(e){return r[99]=r[100]}])},function(e){return r[98]=r[99]}])},function(e){return r[97]=r[98]}])},function(e){return r[96]=r[97]}])},function(e){return r[95]=r[96]}])},function(e){return r[94]=r[95]}])},function(e){return r[93]=r[94]}])},function(e){return r[92]=r[93]}])},function(e){return r[91]=r[92]}])},function(e){return r[90]=r[91]}])},function(e){return r[89]=r[90]}])},function(e){return r[88]=r[89]}])},function(e){return r[87]=r[88]}])},function(e){return r[86]=r[87]}])},function(e){return r[85]=r[86]}])},function(e){return r[84]=r[85]}])},function(e){return r[83]=r[84]}])},function(e){return r[82]=r[83]}])},function(e){return r[81]=r[82]}])},function(e){return r[80]=r[81]}])},function(e){return r[79]=r[80]}])},function(e){return r[78]=r[79]}])},function(e){return r[77]=r[78]}])},function(e){return r[76]=r[77]}])},function(e){return r[75]=r[76]}])},function(e){return r[74]=r[75]}])},function(e){return r[73]=r[74]}])},function(e){return r[72]=r[73]}])},function(e){return r[71]=r[72]}])},function(e){return r[70]=r[71]}])},function(e){return r[69]=r[70]}])},function(e){return r[68]=r[69]}])},function(e){return r[67]=r[68]}])},function(e){return r[66]=r[67]}])},function(e){return r[65]=r[66]}])},function(e){return r[64]=r[65]}])},function(e){return r[63]=r[64]}])},function(e){return r[62]=r[63]}])},function(e){return r[61]=r[62]}])},function(e){return r[60]=r[61]}])},function(e){return r[59]=r[60]}])},function(e){return r[58]=r[59]}])},function(e){return r[57]=r[58]}])},function(e){return r[56]=r[57]}])},function(e){return r[55]=r[56]}])},function(e){return r[54]=r[55]}])},function(e){return r[53]=r[54]}])},function(e){return r[52]=r[53]}])},function(e){return r[51]=r[52]}])},function(e){return r[50]=r[51]}])},function(e){return r[49]=r[50]}])},function(e){return r[48]=r[49]}])},function(e){return r[47]=r[48]}])},function(e){return r[46]=r[47]}])},function(e){return r[45]=r[46]}])},function(e){return r[44]=r[45]}])},function(e){return r[43]=r[44]}])},function(e){return r[42]=r[43]}])},function(e){return r[41]=r[42]}])},function(e){return r[40]=r[41]}])},function(e){return r[39]=r[40]}])},function(e){return r[38]=r[39]}])},function(e){return r[37]=r[38]}])},function(e){return r[36]=r[37]}])},function(e){return r[35]=r[36]}])},function(e){return r[34]=r[35]}])},function(e){return r[33]=r[34]}])},function(e){return r[29]=r[33]}]):t.resolve(r[29]=void 0)},function(e){return r[27]===void 0&&t.i64.eq(r[21],t.i64.cast([0,7]))&&r[29]!==void 0&&(r[27]=r[29]),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[30]=t[0],t})},function(e){return t.i64.eq(r[30],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3948960063]),void 0).then(function(e){return r[32]=e})},function(e){return r[31]=r[32]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[33]=t.createArray(),r[35]=(r[33].push(r[32]),r[33]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1249692047]),r[33]).then(function(e){return r[34]=e})},function(e){return r[31]=r[34]}])},function(e){return r[20]=r[27]==null?r[31]:r[27]}]):t.sequence([function(e){return r[21]=!0,t.forEach(t.filter(t.db.table(16).fetch([[[r[5],r[10]]]]),function(e){return t.i64.eq(e.threadKey,r[5])&&t.i64.eq(t.i64.cast([0,0]),r[9])&&e.messageId===r[10]}),function(e){var n=e.item;return t.i64.eq(n.attachmentType,t.i64.cast([0,2]))?0:r[21]=!1})},function(e){return r[21]?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return t.i64.eq(r[23],r[4])?t.sequence([function(e){return r[25]=t.createArray(),r[27]=(r[25].push(r[18]),r[25]),n("LSLocalize").localizeV2Async(t.i64.cast([0,705614308]),r[25]).then(function(e){return r[26]=e})},function(e){return r[24]=r[26]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[25]=t[0],t})},function(e){return r[26]=t.createArray(),r[28]=(r[26].push(r[25]),r[26]),r[28]=(r[26].push(r[18]),r[26]),n("LSLocalize").localizeV2Async(t.i64.cast([0,313217698]),r[26]).then(function(e){return r[27]=e})},function(e){return r[24]=r[27]}])},function(e){return r[22]=r[24]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return t.i64.eq(r[23],r[4])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3558654267]),void 0).then(function(e){return r[25]=e})},function(e){return r[24]=r[25]}]):t.sequence([function(e){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),r[5],r[4]).then(function(e){var t;return t=e,r[25]=t[0],t})},function(e){return r[26]=t.createArray(),r[28]=(r[26].push(r[25]),r[26]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3422266740]),r[26]).then(function(e){return r[27]=e})},function(e){return r[24]=r[27]}])},function(e){return r[22]=r[24]}])},function(e){return r[20]=r[22]}])},function(e){return r[19]=r[20]}])},function(e){return r[17]=r[19]}])},function(e){return r[16]=r[17]}])},function(e){return r[15]=r[16]}])},function(e){return r[14]=r[15]}])},function(e){return r[13]=r[14]}])},function(e){return r[12]=r[13]}])},function(e){return r[11]=r[12]}])},function(e){return r[2]=r[11]}])},function(o){return t.storedProcedure(n("LSUpdateThreadSnippet"),e[0],r[2],r[3],r[4],t.like(r[2],"%\uDB80\uDC00%"),void 0,void 0,!1)}]))})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadSnippetFromLastMessageV2StoredProcedure",e.__tables__=["threads","messages","attachments"],a.exports=e}),null);
__d("LSUpdateThreadSnippetFromLastMessageV2StoredProcedure",["LSSynchronousPromise","LSUpdateThreadSnippetFromLastMessageV2","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSUpdateThreadSnippetFromLastMessageV2"),a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MessageThreadReadState",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({KEEP_AS_IS:3,MARK_READ:1,MARK_UNREAD:2}),l=e;i.default=l}),66);
__d("issueSendInstamadilloXMAReceiverFetch",["IGDBridgedAPI"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("IGDBridgedAPI").sendXmaReceiverFetch(e)}l.default=e}),98);
__d("instamadilloBumpThread",["FBLogger","I64","LSBumpThreadStoredProcedure","LSFactory","LSIntEnum","MAWAuthor","MAWCurrentUser","MAWJids","MessageThreadReadState","WAJids","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){var i=o("MAWAuthor").getAuthorUserJid(n.author);if(i==null)return r("FBLogger")("igd_web").warn("Skip instamadilloBumpThread: a message cannot exist without an author");var l=(e||(e=o("I64"))).of_string(o("WAJids").userIdFromJid(i)),u=o("MAWJids").convertChatJidToIntJid(n.chat),c=yield t.threads.get(u),d=e.equal(l,e.of_string(o("MAWCurrentUser").getID())),m=(s||(s=o("LSIntEnum"))).ofNumber(d?r("MessageThreadReadState").KEEP_AS_IS:r("MessageThreadReadState").MARK_UNREAD),p=c==null?void 0:c.lastActivityTimestampMs;p!=null&&(e||(e=o("I64"))).ge(a,p)&&(yield r("LSBumpThreadStoredProcedure")(r("LSFactory")(t),{bumpTimestampMs:a,readStateEffect:m,threadKey:u}))}),c.apply(this,arguments)}l.default=u}),98);
__d("instamadilloReplyMessageUtils",["InstamadilloMessageIdUtils","InstamadilloReplyMessageParams","LSFactory","LSFetchInstamadilloMessage","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("replySourceIdMessageID")).getKeyRange(r)),i=a.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield c(t,e,r)});return function(t){return e.apply(this,arguments)}})());yield(e||(e=n("Promise"))).all(i)}),u.apply(this,arguments)}function c(e,t,n){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("InstamadilloReplyMessageParams").getReplyMessageParams(t.threadKey,t.senderId,n,e);yield e.messages.put(babelHelpers.extends({},t,r))}),d.apply(this,arguments)}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=n==null?void 0:n.repliedToMessageOtid,i=n==null?void 0:n.repliedToMessageWaServerTimeSec;if(!(a==null||i==null)){var l=o("InstamadilloMessageIdUtils").toInstamadilloMessageId(t,a),s=yield e.messages.index("messageId").get(l);s==null&&(yield r("LSFetchInstamadilloMessage")(t,a,i,r("LSFactory")(e)))}}),p.apply(this,arguments)}l.updateAllRepliesTxn=s,l.fetchReplySourceMessage=m}),98);
__d("handleInstamadilloReceiverFetchContent",["I64","IGDXMAAttachmentUtil","InstamadilloMessageFactory","InstamadilloTextMessageUtils","LSAuthorityLevel","LSFactory","LSIntEnum","LSUpdateThreadSnippetFromLastMessageV2StoredProcedure","LSVerifyThreadRowExistsV2StoredProcedure","MAWExternalId","MNLSXMALayoutType","MessagingAttachmentType","WAResultOrError","asyncToGeneratorRuntime","instamadilloBumpThread","instamadilloReplyMessageUtils","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n,r,o,a,i,l,s){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i,l,u,c,d,m){var p,_,f,g=yield o("InstamadilloMessageFactory").createBaseMessageForProtocolMsgId(t,n,a,u);if(g==null)return o("WAResultOrError").makeResult({reason:"cannot_create_base_message",result:"skip"});var h=g.threadKey,y=JSON.stringify(l);yield r("LSVerifyThreadRowExistsV2StoredProcedure")(r("LSFactory")(t),{authorityLevel:(e||(e=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),syncGroup:(s||(s=o("I64"))).of_int32(1),threadKey:h,threadType:s.of_int32(1)});var C=8;r("isStringNullOrEmpty")(i.text)||(C+=1),yield t.messages.put(babelHelpers.extends({},g,{displayedContentTypes:s.of_int32(C),text:i.text,textHasLinks:o("InstamadilloTextMessageUtils").textHasLinks(i.text),xmaReceiverFetchParams:y},m));var b,v=d==null?void 0:d.type_;if(v!=null){var S=(s||(s=o("I64"))).of_string(o("MAWExternalId").generateExternalId());b=babelHelpers.extends({},o("InstamadilloMessageFactory").createBaseAttachmentCta(n),{ctaId:S,type_:v},d),yield t.attachment_ctas.put(b)}return yield t.attachments.put(babelHelpers.extends({},o("InstamadilloMessageFactory").createBaseAttachmentWithProtocolMsgId(n,a),{attachmentType:e.ofNumber(r("MessagingAttachmentType").XMA),defaultCtaId:(p=b)==null?void 0:p.ctaId,defaultCtaTitle:(_=b)==null?void 0:_.title,defaultCtaType:(f=b)==null?void 0:f.type_,faviconUrl:o("IGDXMAAttachmentUtil").DEFAULT_PROFILE_URL,hasXma:!0,isSharable:!0,xmaLayoutType:e.ofNumber(r("MNLSXMALayoutType").SINGLE)},c)),yield o("instamadilloReplyMessageUtils").updateAllRepliesTxn(t,g.messageId),yield r("instamadilloBumpThread")(t,n,a),yield r("LSUpdateThreadSnippetFromLastMessageV2StoredProcedure")(r("LSFactory")(t),{threadKey:h}),o("WAResultOrError").makeResult({result:"handled"})}),c.apply(this,arguments)}l.default=u}),98);
__d("renderInstamadilloOptimisticXmaReceiverFetch",["I64","MAWCurrentUser","OfflineThreadingId","Promise","WAJids","WAStanzaUtils","asyncToGeneratorRuntime","handleInstamadilloReceiverFetchContent","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("renderInstamadilloOptimisticXmaReceiverFetch");function c(e,t,n,r,o,a){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,c,d){var m=o("OfflineThreadingId").createOfflineThreadingID(),p=o("WAJids").toMsgrUserJid(o("MAWCurrentUser").getID()),_=(s||(s=o("I64"))).of_float(Date.now()),f={author:p,chat:o("WAJids").toMsgrUserJid(t),externalId:o("WAStanzaUtils").toStanzaId(m)},g=yield u.load(),h=yield g();return yield h.runInTransaction(function(e){return r("handleInstamadilloReceiverFetchContent")(e,f,_,a,i,{},l,c,d)},"readwrite"),(e||(e=n("Promise"))).resolve(m)}),d.apply(this,arguments)}l.default=c}),98);
__d("getSendPostToInstamadilloRecipient",["fbt","I64","IGDDataclassTypes.flow","LSAuthorityLevel","LSMessageReplySourceTypeV2","LSMessageSendStatus","asyncToGeneratorRuntime","getErrorSafe","issueSendInstamadilloXMAReceiverFetch","renderInstamadilloOptimisticXmaReceiverFetch"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t,a,i,l,u){var c={__typename:"XMSGIgReceiverFetchXmaFeedFetchParams",media_igid:t},d={__typename:"XMSGIgXmaContentRefDataclass",action_type:o("IGDDataclassTypes.flow").XmsgIgXmaActionType.Share,content_type:o("IGDDataclassTypes.flow").XmsgIgReceiverFetchContentType.Feed,fetch_params:c,owner_fbid:a,target_url:l,username:i},m={contentRef:JSON.stringify(d)},p={authorityLevel:(e||(e=o("I64"))).of_int32(r("LSAuthorityLevel").OPTIMISTIC),isForwarded:u,replySourceTypeV2:u===!0?(e||(e=o("I64"))).of_int32(r("LSMessageReplySourceTypeV2").FORWARD):void 0,sendStatus:e.of_int32(r("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:e.of_int32(1)},_={actionUrl:l,nativeUrl:l,targetId:e.of_string(t),type_:"igd_web_post_share"},f={authorityLevel:e.of_int32(r("LSAuthorityLevel").OPTIMISTIC),subtitleText:s._(/*BTDS*/"Post").toString(),titleText:i};return(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,o,a,i){try{var l=yield r("renderInstamadilloOptimisticXmaReceiverFetch")(e,m,c,f,_,p);yield r("issueSendInstamadilloXMAReceiverFetch")({comment:o,isDisappearingModeSettingOn:t,offlineThreadingId:l,openEb:n,receiverFetchXma:JSON.stringify(m),threadKey:e}),a==null||a(e)}catch(t){var s=r("getErrorSafe")(t);i==null||i(s,e)}});return function(t,n,r,o,a,i){return e.apply(this,arguments)}})()}l.default=u}),226);/*FB_PKG_DELIM*/
__d("BootloaderEventsPerf",["invariant","Bootloader","BootloaderEvents","ResourceTimingStore","objectEntries","objectValues"],(function(t,n,r,o,a,i,l,s){var e=["start_time","resources","durations"],u={total_count:0,total_bytes:0,downloaded_count:0,downloaded_bytes:0,cached_count:0,cached_bytes:0,inlined_count:0,inlined_bytes:0,duration:0,missing_count:0};function c(e,t,n){return Math.max(0,(n!=null?n:0)-Math.max(e,t!=null?t:0))}function d(){return{blocking:babelHelpers.extends({},u),nonblocking:babelHelpers.extends({},u),default:babelHelpers.extends({},u)}}function m(e,t,n){var r,a;if(n==null)r=0,a="downloaded";else if(n[1])r=n[0].length,a="inlined";else{var i=o("ResourceTimingStore").getEntryForURL(n[0]);i?(r=i.encodedBodySize,a=i.transferSize===0?"cached":"downloaded"):(r=0,a="downloaded",e.missing_count++)}if(e.total_count++,e.total_bytes+=r,!!t)switch(e.duration=Math.max(e.duration,t),a){case"downloaded":e.downloaded_count++,e.downloaded_bytes+=r;break;case"inlined":e.inlined_count++,e.inlined_bytes+=r;break;case"cached":e.cached_count++,e.cached_bytes+=r;break}}function p(e,t,n,o,a){var i=r("Bootloader").getResourceState(t);m(e,c(n,i.loadStart,i.loadEnd),o),i.loadError!=null&&a.add(t)}function _(e,t,n,o){var a=d();for(var i of r("objectEntries")(e)){var l=i[0],u=i[1];for(var c of u){var m=c[0],_=c[1],f=void 0,g=void 0;switch(_.type){case"async":g=null,f=n;break;case"js":case"css":g=[_.src,_.d===1],f=a;break;default:s(0,3721)}p(f[l],m,t,g,o)}}return a}function f(e,t){var n={unpredicted:o("BootloaderEvents").newResourceMapSet(),ef:o("BootloaderEvents").newResourceMapSet(),overpredicted:o("BootloaderEvents").newResourceMapSet()};for(var a of r("objectEntries")(t)){var i=a[0],l=a[1];for(var s of l.entries()){var u=s[0],c=s[1];e[i].has(u)?n.ef[i].set(u,c):n.overpredicted[i].set(u,c)}}for(var d of r("objectEntries")(e)){var m=d[0],p=d[1];for(var _ of p.entries()){var f=_[0],g=_[1];t[m].has(f)||n.unpredicted[m].set(f,g)}}return n}function g(e){var t,n=e.efData,r=e.rsrcs,o=e.startTime,a=new Set,i,l,s;if(n){var u=f(r,n.tierOne);s=u.unpredicted,i={ef:_(u.ef,n.fetchRsrcsStart,d(),a),overpredicted:_(u.overpredicted,n.fetchRsrcsStart,d(),a)},l={ef_fetch_predictions:n.fetchPredictionsEnd-n.fetchPredictionsStart,ef_fetch_start_wait:n.fetchPredictionsEnd-n.fetchRsrcsStart,ef_head_start:o-n.fetchRsrcsStart}}else s=r,i={},l={};var c=babelHelpers.extends({unpredicted:_(s,o,d(),a)},i);return{source:e.source,source_detail:e.sourceDetail,is_first_identical:e.isFirstIdentical,timeslice_context:(t=e.timesliceContext)==null?void 0:t.name,start_time:o,err_count:a.size,resources:c,durations:babelHelpers.extends({jsmods_wait:e.jsmodsStart-o,jsmods:e.jsmodsEnd-e.jsmodsStart,jsmods_done_wait:e.jsmodsEnd-o,download_done_wait:e.logTime-o},l),payloadStats:e.payloadStats}}function h(e){var t,n=e.startTime,a=0,i=0,l=0,s=0;for(var u of e.components){var p=r("Bootloader").getComponentTiming(u),f=p.tierTwoStart,g=p.tierTwoEnd,h=p.tierThreeStart,y=p.tierThreeEnd;a=Math.max(a,c(n,f,g)),i=Math.max(i,c(n,n,g)),l=Math.max(l,c(n,h,y)),s=Math.max(s,c(n,n,y))}var C=new Set,b=d(),v=_(e.tierOne,n,b,C),S=_(e.tierTwo,n,b,C),R=_(e.tierThree,n,b,C),L=b.blocking.downloaded_count!=0,E=d(),k=o("BootloaderEvents").newResourceMapSet(),I=new Set;for(var T of[e.tierOne,e.tierTwo,e.tierThree])for(var D of r("objectValues")(T))for(var x of D.keys())I.add(x);var $=0,P=0,N=0;for(var M of e.beRequests.values()){$+=c(n,n,M.requestStart),P+=M.serverGenTime,N+=M.jsmodsEnd-M.jsmodsStart,m(E[L?"blocking":"nonblocking"],M.responseStart-M.requestStart,[M.uri,!1]);for(var w of r("objectEntries")(M.rsrcs)){var A=w[0],F=w[1];for(var O of F){var B=O[0],W=O[1];I.has(B)||k[A].set(B,W)}}}var q=_(k,n,b,C);return{ref:e.ref,components:e.components,timeslice_context:(t=e.timesliceContext)==null?void 0:t.name,start_time:n,err_count:C.size,resources:{t1:v,t2:S,t3:R,be:E,unpredicted:q,async:b},durations:{fetch_start_wait:e.fetchStartTime-n,be_start_wait:$,be_server_gen:P,be_jsmods:N,callback_wait:e.callbackStart-n,callback:e.callbackEnd-e.callbackStart,bootload_done_wait:e.callbackEnd-n,rdfd_requirelazy:a,rdfd_done_wait:i,rd_requirelazy:l,rd_done_wait:s}}}function y(t){var n=t.start_time,o=t.resources,a=t.durations,i=babelHelpers.objectWithoutPropertiesLoose(t,e);for(var l of r("objectEntries")(o)){var s=l[0],u=l[1];for(var c of r("objectEntries")(u)){var d=c[0],m=c[1];for(var p of r("objectEntries")(m)){var _=p[0],f=p[1];i[s+"_"+d+"_resources_"+_]=Math.round(Number(f))}}}for(var g of r("objectEntries")(a)){var h=g[0],y=g[1];i[h+"_duration"]=Math.round(Number(y))}if(i.payloadStats){for(var C of r("objectEntries")(i.payloadStats)){var b=C[0],v=C[1];for(var S of r("objectEntries")(v)){var R=S[0],L=S[1];i[b+"_"+R+"_count"]=Math.round(Number(L))}}delete i.payloadStats}return i}l.computeHRData=g,l.computeBLData=h,l.flattenData=y}),98);
__d("BootloaderLoggingStatusEnum",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["SUCCESS","TIMEOUT","ERROR"]),l=e;i.default=l}),66);
__d("CometBootloaderErrorsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1109"),s=o("FalcoLoggerInternal").create("comet_bootloader_errors",e),u=s;l.default=u}),98);
__d("CometBootloaderErrorLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderErrorsFalcoEvent","CometTimeSpentNavigation","ResourceTimingStore","SiteData","performanceNavigationStart"],(function(t,n,r,o,a,i,l){"use strict";var e=!1;function s(t){var n=t.parent_lid;e=!0,o("ResourceTimingStore").init();var a=function(t){var e;return{ms_since_navstart:Math.round(t-r("performanceNavigationStart")()),parent_lid:n,pkg_cohort:r("SiteData").pkg_cohort,request_path:(e=r("CometTimeSpentNavigation").getPathInfo())==null?void 0:e.name,svn_rev:r("SiteData").client_revision}},i=function(t,n){var e=o("BootloaderEventsPerf").computeBLData(t.bootloaderData),i=o("BootloaderEventsPerf").flattenData(e);r("CometBootloaderErrorsFalcoEvent").log(function(){var r=babelHelpers.extends({},i,a(e.start_time),{status:n,was_offline:t.offline});return t.erroredResources!=null&&(r.errored_resource_urls=Array.from(t.erroredResources)),r})};o("BootloaderEvents").onBootloadError(function(e){i(e,"ERROR")})}l.initLogging=s}),98);
__d("CometBootloaderEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("177"),s=o("FalcoLoggerInternal").create("comet_bootloader_events",e),u=s;l.default=u}),98);
__d("HasteResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1823926"),s=o("FalcoLoggerInternal").create("haste_response",e),u=s;l.default=u}),98);
__d("CometBootloaderLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderEventsFalcoEvent","CometTimeSpentNavigation","HasteResponseFalcoEvent","ResourceTimingStore","SiteData","UserTimingUtils","gkx","performance","performanceNavigationStart"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!1,u=r("gkx")("10211");function c(t){var n=t.bl_sample_rate,a=t.hr_sample_rate,i=t.parent_lid;if(!(s||!(n||a||u===!0))){s=!0,o("ResourceTimingStore").init();var l=function(t){var e;return{ms_since_navstart:Math.round(t-r("performanceNavigationStart")()),parent_lid:i,pkg_cohort:r("SiteData").pkg_cohort,request_path:(e=r("CometTimeSpentNavigation").getPathInfo())==null?void 0:e.name,svn_rev:r("SiteData").client_revision}};a&&o("BootloaderEvents").onHasteResponse(function(e){return r("HasteResponseFalcoEvent").log(function(){var t=o("BootloaderEventsPerf").computeHRData(e),n=o("BootloaderEventsPerf").flattenData(t);return babelHelpers.extends({},n,l(t.start_time))})}),u&&(o("BootloaderEvents").onBootload(function(t){o("UserTimingUtils").measureModern("Bootloader: "+t.components.join(", "),{end:t.callbackEnd-(e||(e=r("performance"))).timeOrigin,start:t.startTime-e.timeOrigin},"Bootloader Events")}),o("BootloaderEvents").onHasteResponse(function(t){o("UserTimingUtils").measureModern("Haste: "+t.source,{end:t.jsmodsEnd-(e||(e=r("performance"))).timeOrigin,properties:[["Source Detail",t.sourceDetail]],start:t.startTime-e.timeOrigin},"Bootloader Events")}));var c=function(t,n){var e=o("BootloaderEventsPerf").computeBLData(t),a=o("BootloaderEventsPerf").flattenData(e);r("CometBootloaderEventsFalcoEvent").log(function(){return babelHelpers.extends({},a,l(e.start_time),{status:n})})};n&&o("BootloaderEvents").onBootload(function(e){return c(e,"SUCCESS")}),o("BootloaderEvents").onBootloaderCallbackTimeout(function(e){return c(e,"TIMEOUT")})}}l.initLogging=c}),98);
__d("EBAPIMinosVerifySingleEpoch",["EBMinosLogger","EBMinosWasmVerifySingleEpoch","WAGetSafeQPLError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){o("EBMinosLogger").minosLogger.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["minosVerifySingleEpoch start"])));var n=t.qplFlow,r=t.minosEpochAnonId,a=t.minosMailboxAuthPublicKey,i=t.minosMailboxEncryptionPublicKey,l=t.minosMailboxSigningPublicKey,u=t.userId,c=t.selfEpochSignature;try{var d={epochNumber:r,mailboxAuthPk:a,mailboxEncryptionPk:i,mailboxSigningPk:l,previousEpochHead:t.previousEpochHead==null?void 0:t.previousEpochHead,userFbid:u};n.addPoint("verify_single_epoch_start");var m=yield o("EBMinosWasmVerifySingleEpoch").verifySingleEpoch({epochPublicData:d,signature:c});return n.addPoint("verify_single_epoch_end"),m.success?(n.endSuccess(),m.value.valid):(o("EBMinosLogger").minosLogger.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unable to verify epoch - WASM error ",""])),m.error),n.endFailWithError("invalid-result",m.error),!1)}catch(e){return n.endFailWithError("runtime-error",o("WAGetSafeQPLError").getSafeQPLErrorMessage(e)),!1}}),c.apply(this,arguments)}l.minosVerifySingleEpoch=u}),98);
__d("EBMinosVerifySingleEpoch",["EBAPIMinosVerifySingleEpoch","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r,o,a,i,l){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i,l,s,u,c){var d=yield o("EBAPIMinosVerifySingleEpoch").minosVerifySingleEpoch({minosEpochAnonId:t,minosMailboxAuthPublicKey:l,minosMailboxEncryptionPublicKey:i,minosMailboxSigningPublicKey:a,previousEpochHead:s,qplFlow:c,selfEpochSignature:u,userId:r});return(e||(e=n("Promise"))).resolve([d])}),u.apply(this,arguments)}l.minosVerifySingleEpoch=s}),98);
__d("EBWriteMinosMailboxKeysToCache",["EBAPIWriteMinosPublicKeysForRecipient","FBLogger","Promise","WAGetSafeQPLError","cr:16361","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=t.contactId,i=t.encryptionPublicKey,l=t.epochAnonId,u=t.epochHead,c=t.epochHeadCreationTime,d=t.publicKeyFbid,m=t.qplFlow;return m.addPoint("write_keys_start",{string:{contactId:a}}),n("cr:16361")!=null&&r("promiseDone")(n("cr:16361").writeStorageAlertAndAdminMessageBridgedAPI(a,u,c)),r("promiseDone")(o("EBAPIWriteMinosPublicKeysForRecipient").writeMinosMailboxKeysForRecipientAPI({contactId:a,encryptionPublicKey:i,epochAnonId:l,epochHead:u,epochHeadCreationTime:c,publicKeyFbid:d}),function(){m.addPoint("write_keys_end"),m.endSuccess()},function(t){var n=r("getErrorSafe")(t);m.addPoint("write_keys_end"),r("FBLogger")("wmi").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web minos] error writing minos mailbox keys to cache: ",""])),n.message),m.endFailWithError("runtime-error",o("WAGetSafeQPLError").getSafeQPLErrorMessage(n))}),(s||(s=n("Promise"))).resolve()}l.writeMinosMailboxKeysToCache=u}),98);
__d("EncryptedBackupUploadFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5728"),s=o("FalcoLoggerInternal").create("encrypted_backup_upload_failure",e),u=s;l.default=u}),98);
__d("LSDataTraceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({TASK:1,SYNC:2,RECEIVE_MSG:3,RICH_MEDIA_SEND:4,RICH_MEDIA_DOWNLOAD:5,TASK_CLIENT_MODE:6,ENCRYPTED_BACKUPS_FETCH_BACKUP_STATUS:69,ENCRYPTED_BACKUPS_INIT:70,ENCRYPTED_BACKUPS_ADD_DEVICE:71,ENCRYPTED_BACKUPS_UPLOAD:72,ENCRYPTED_BACKUPS_RESTORE:73,ENCRYPTED_BACKUPS_DELETE_BACKUP:75,ENCRYPTED_BACKUPS_CREATE_EXTRA_VIRTUAL_DEVICE:76,ENCRYPTED_BACKUPS_QR_ADD_DEVICE:77,ENCRYPTED_BACKUPS_SYNC_EPOCHS:78,ENCRYPTED_BACKUPS_OPEN_EPOCH:79,ENCRYPTED_BACKUPS_OPT_OUT_OF_BACKUP:80,ENCRYPTED_BACKUPS_MEDIA_BACKUP:81,ENCRYPTED_BACKUPS_MEDIA_RESTORE:82,ENCRYPTED_BACKUPS_THIRD_PARTY_ID_GENERATION:83,ENCRYPTED_BACKUPS_FETCH_BACKUPS_METADATA:86,ENCRYPTED_BACKUPS_REMOVE_VIRTUAL_DEVICE:87,ENCRYPTED_BACKUPS_QR_ADD_DEVICE_RECEIVER:88,ENCRYPTED_BACKUPS_DERIVE_AND_STORE_EPOCHS:89,ENCRYPTED_BACKUPS_GET_OPEN_EPOCH_KEYS:90,ENCRYPTED_BACKUPS_END_TO_END_THREAD_RESTORE:190,SAP_VESTA_REGISTRATION:251,SAP_VESTA_LOGIN:252,ENCRYPTED_BACKUPS_SHADOW_FETCH_BACKUP_STATUS:197,ENCRYPTED_BACKUPS_SHADOW_INIT:198,ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE:199,ENCRYPTED_BACKUPS_SHADOW_UPLOAD:200,ENCRYPTED_BACKUPS_SHADOW_RESTORE:201,ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP:203,ENCRYPTED_BACKUPS_SHADOW_CREATE_EXTRA_VIRTUAL_DEVICE:204,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE:205,ENCRYPTED_BACKUPS_SHADOW_SYNC_EPOCHS:206,ENCRYPTED_BACKUPS_SHADOW_OPEN_EPOCH:207,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE_RECEIVER:216,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_UPSERT_VERSION_DATA:240,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_DELETE_VERSION_DATA:241,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_SYNC_VERSION_DATA:242,ENCRYPTED_BACKUPS_MESSAGE_INTEGRITY_CHECKER:243});i.default=e}),66);
__d("LsDataTraceFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743851"),s=o("FalcoLoggerInternal").create("ls_data_trace",e),u=s;l.default=u}),98);
__d("LSDataTraceFlush",["ArmadilloDataTraceType","I64","LSDataTraceType","LSIntEnum","LsDataTraceFalcoEvent","ODS","Promise","ReQL","asyncToGeneratorRuntime","clearTimeout","gkx","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(s||(s=o("I64"))).of_string("120000"),m=s.of_string("600000"),p=new Set(["encrypted_backups_upload","encrypted_backups_media_backup"]);function _(e,t,n){var r=e.length;if(r===0)return[(s||(s=o("I64"))).neg_one,s.neg_one,void 0,void 0,void 0];var a=e.find(function(e){return e.errorMessage!=null}),i=a==null?void 0:a.errorMessage,l=e[e.length-1|0],u=(s||(s=o("I64"))).of_float(Date.now()),c=l.timestampMs,m=s.compare(s.sub(u,n),d)>=0;return!t&&m?[(s||(s=o("I64"))).sub(u,n),l.checkPointId,c,i,"trace expired"]:[s.sub(c,n),l.checkPointId,c,i,i]}function f(e){return e.reduce(function(e,t,n){var r,a=(s||(s=o("I64"))).to_string(t.checkPointId),i=t.timestampMs,l=s.to_string((r=t.syncChannel)!=null?r:(s||(s=o("I64"))).neg_one),u=t.tags,c=u!=null?","+u:"";if(n===0)e.pointsList="".concat("(",a,",",l,c,")");else{var d=String((s||(s=o("I64"))).to_int32(s.sub(i,e.lastCheckPointTimestamp)));e.pointsList=e.pointsList.concat("-",d,"-(",a,",",l,c,")")}return e.lastCheckPointTimestamp=i,e},{lastCheckPointTimestamp:(s||(s=o("I64"))).zero,pointsList:""}).pointsList}var g=s.of_string("2");function h(e){var t=e.traceType,n=(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").TASK))?"send":(s||(s=o("I64"))).equal(t,o("ArmadilloDataTraceType").armadilloMessageSend)?"armadillo send":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").ENCRYPTED_BACKUPS_UPLOAD))?"encrypted_backups_upload":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE))?"encrypted_backups_restore":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_BACKUP))?"encrypted_backups_media_backup":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").SAP_VESTA_LOGIN))?"sap_vesta_login":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").SAP_VESTA_REGISTRATION))?"sap_vesta_registration":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_RESTORE))?"encrypted_backups_media_restore":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_INIT))?"shadow_encrypted_backups_init":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE))?"shadow_encrypted_backups_add_device":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_UPLOAD))?"shadow_encrypted_backups_upload":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_RESTORE))?"shadow_encrypted_backups_restore":(s||(s=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP))?"shadow_encrypted_backups_delete_backup":e.contextTwo;return n}function y(e,t){var n=t.traceId,a=t.shouldFlush,i=h(t),l=t.traceType,u=(s||(s=o("I64"))).equal(l,o("ArmadilloDataTraceType").armadilloMessageSend)?"tam_message_send":t.contextOne,c=(s||(s=o("I64"))).equal(t.traceType,g)?void 0:t.predefinedId,d=t.initTimestampMs;return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.data_trace_addon.index("traceIdAddonId")).getKeyRange(n)).then(function(e){var t=_(e,a,d),l=t[0],m=t[1],p=t[3],g=t[4],h=e.length,y=f(e);r("LsDataTraceFalcoEvent").log(function(){return{check_point_count:(s||(s=o("I64"))).to_string(s.of_int32(h)),check_point_list:y,client_event_ts:s.to_string(s.of_float(Date.now())),cold_start_time:void 0,data_trace_id:n,database_id:u,delivered_messages:void 0,error_message:g,first_error_message:p,has_backgrounded:!1,last_check_point:s.to_string(m),latency:s.to_string(l),media_type:void 0,num_of_attachments:void 0,persisted_metadata:void 0,predefined_id:c,sent_rich_media_messages:void 0,sent_text_messages:void 0,start_time:s.to_string(d),trace_flow:i!=null?i:""}})}).then(function(){return e.data_trace_meta.delete(n)})}function C(t,r){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.data_trace_meta).getKeyRange(r)).then(function(r){return r!=null?y(t,r):(e||(e=n("Promise"))).resolve()})}var b={contents:void 0};function v(e){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.data_trace_meta.index("shouldFlushInitTimestampMsTraceId")).getKeyRange(!1).bounds({lt:o("ReQL").key((s||(s=o("I64"))).sub(s.of_float(Date.now()),d))})).then(function(e){if(r("gkx")("23914")){var t=(s||(s=o("I64"))).of_float(Date.now());return e.filter(function(e){var n=h(e);if(n!=null&&p.has(n)){var r=(s||(s=o("I64"))).compare(s.sub(t,e.initTimestampMs),m)>=0;return r}return!0})}return e})}function S(e){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r=yield v(t.tables);if(r.length!==0)return t.runInTransaction(function(t){return v(t).then(function(r){return(e||(e=n("Promise"))).all(r.map(function(e){return y(t,e)}))})},"readwrite",void 0,void 0,i.id+":310")}),R.apply(this,arguments)}function L(){var e=b.contents;if(e!=null){r("clearTimeout")(e);return}}function E(e){return r("promiseDone")(S(e),function(){L();var t=r("setTimeout")(function(){E(e)},6e4);b.contents=t},function(){L(),(u||(u=o("ODS"))).bumpEntityKey(3185,"mw_trace","error")}),L}var k=C,I=E,T={flush:k,flushExpiredDataTraces:I};l.default=T}),98);
__d("XPlatReactVoprf.shared",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.VoprfWasmError=e}),66);
__d("mapVoprfWasmError",["XPlatReactVoprf.shared"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){switch(e){case-1:return new u;case 1:return new c;case 2:return new d;case 3:return new m;case 4:return new p;default:return new _}}var u=(function(e){function t(t){var n;return t===void 0&&(t="Unknown error encountered by VOPRF WASM"),n=e.call(this,t)||this,n.name="VoprfUnknownError",n}return babelHelpers.inheritsLoose(t,e),t})((e=o("XPlatReactVoprf.shared")).VoprfWasmError),c=(function(e){function t(t){var n;return t===void 0&&(t="Incorrect buffer length encountered by VOPRF WASM"),n=e.call(this,t)||this,n.name="VoprfBufferLengthError",n}return babelHelpers.inheritsLoose(t,e),t})(e.VoprfWasmError),d=(function(e){function t(t){var n;return t===void 0&&(t="Error while performing curve operation by VOPRF WASM"),n=e.call(this,t)||this,n.name="VoprfCurveOperationError",n}return babelHelpers.inheritsLoose(t,e),t})(e.VoprfWasmError),m=(function(e){function t(t){var n;return t===void 0&&(t="Error while performing hash operation by VOPRF WASM"),n=e.call(this,t)||this,n.name="VoprfHashOperationError",n}return babelHelpers.inheritsLoose(t,e),t})(e.VoprfWasmError),p=(function(e){function t(t){var n;return t===void 0&&(t="Error while performing proof operation by VOPRF WASM"),n=e.call(this,t)||this,n.name="VoprfProofError",n}return babelHelpers.inheritsLoose(t,e),t})(e.VoprfWasmError),_=(function(e){function t(t){var n;return t===void 0&&(t="Unknown error code received from WASM binary"),n=e.call(this,t)||this,n.name="UnknownErrorCode",n}return babelHelpers.inheritsLoose(t,e),t})(e.VoprfWasmError);l.mapVoprfWasmError=s,l.VoprfUnknownError=u,l.VoprfBufferLengthError=c,l.VoprfCurveOperationError=d,l.VoprfHashOperationError=m,l.VoprfProofError=p,l.UnknownErrorCode=_}),98);
__d("LSVoprfWasmBuilder",["FBLogger","Promise","asyncToGeneratorRuntime","err","getErrorSafe","mapVoprfWasmError"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return function(t){var o=t.locateFile!=null?{locateFile:t.locateFile}:{instantiateWasm:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){try{var o=yield t.getWasmModule(),a=yield WebAssembly.instantiate(o,e);return n(a),{}}catch(e){var i=r("getErrorSafe")(e);return r("FBLogger")("LSVoprfWasmBuilder").mustfix("instantiateWasm failed with error: %s",i.toString()),!1}});function o(t,n){return e.apply(this,arguments)}return o})()};return u(o,e)}}function u(t,a){return new(e||(e=n("Promise")))(function(e,n){a(t).then(function(t){var a,i=t._sodiumInit();i!==0&&n(r("err")("Failed to initialize Sodium!")),e({createCurveRistretto:function(){var e;try{return e=t._curve_create(),t._curve_init_ristretto(e),e}catch(n){throw e!=null&&t._curve_free(e),n}},freeCurve:function(n){t._curve_free(n)},createVoprfExpTwohashdh:function(n){var e;try{return e=t._voprf_create(),t._voprf_init_exp_twohashdh(e,n),e}catch(n){throw e!=null&&t._voprf_free(e),n}},freeVoprf:function(n){t._voprf_free(n)},getCurveBytes:function(n){return t._get_curve_element_bytes(n.curvePtr)},getCurveScalarBytes:function(n){return t._get_curve_scalar_bytes(n.curvePtr)},blind:function(n,r){var e,a,i;try{var l=t._get_curve_element_bytes(n.curvePtr),s=t._get_curve_scalar_bytes(n.curvePtr);e=t._malloc(l),a=t._malloc(s),i=d(t,r);var u=t._blind(n.voprfPtr,e,l,a,s,i,r.length);if(u!==0)throw o("mapVoprfWasmError").mapVoprfWasmError(u);var m=c(t,e,l),p=c(t,a,s);return{blindedElement:m,blindingFactor:p}}finally{[e,a,i].forEach(function(e){e!=null&&t._free(e)})}},verifiableUnblind:function(n,r,a,i,l,s,u,m){var e,p,_,f,g,h,y;try{e=r?d(t,r):null,p=a?d(t,a):null,_=d(t,s),f=d(t,i),g=d(t,l),h=d(t,u);var C=t._get_curve_element_bytes(n.curvePtr);y=t._malloc(C);var b=t._verifiable_unblind(n.voprfPtr,y,C,e,r?r.length:0,p,a?a.length:0,f,i.length,g,l.length,_,s.length,h,u.length,+m);if(b!==0)throw o("mapVoprfWasmError").mapVoprfWasmError(b);var v=c(t,y,C);return{unblindedElement:v}}finally{[e,p,_,f,g,h,y].forEach(function(e){e!=null&&t._free(e)})}},clientFinalize:function(n,r,a){var e,i,l;try{e=d(t,r),i=d(t,a);var s=t._get_voprf_final_evaluation_bytes(n.voprfPtr);l=t._malloc(s);var u=t._voprf_client_finalize(n.voprfPtr,l,s,e,r.length,i,a.length);if(u!==0)throw o("mapVoprfWasmError").mapVoprfWasmError(u);var m=c(t,l,s);return{finalEvaluation:m}}finally{[e,i,l].forEach(function(e){e!=null&&t._free(e)})}},setup:function(n){var e,r;try{var a=t._get_curve_scalar_bytes(n.curvePtr),i=t._get_curve_element_bytes(n.curvePtr);e=t._malloc(a),r=t._malloc(i);var l=t._voprf_setup(n.voprfPtr,r,i,e,a);if(l!==0)throw o("mapVoprfWasmError").mapVoprfWasmError(l);var s=c(t,r,i),u=c(t,e,a);return{sk:s,pk:u}}finally{[e,r].forEach(function(e){e!=null&&t._free(e)})}},evaluate:function(n,r,a,i){var e,l,s,u,m;try{var p=t._get_curve_element_bytes(n.curvePtr);e=t._malloc(p);var _=i?t._get_curve_scalar_bytes(n.curvePtr):0;l=_>0?t._malloc(_):null;var f=i?t._get_curve_scalar_bytes(n.curvePtr):0;s=f>0?t._malloc(f):null,u=d(t,a),m=d(t,r);var g=t._voprf_evaluate(n.voprfPtr,e,p,l,_,s,f,m,r.length,u,a.length,+i);if(g!==0)throw o("mapVoprfWasmError").mapVoprfWasmError(g);var h=l!==null?c(t,l,_):null,y=s!==null?c(t,s,f):null,C=c(t,e,p);return{proofC:h,proofS:y,evaluatedElement:C}}finally{[e,l,s,u,m].forEach(function(e){e!=null&&t._free(e)})}},serverFinalize:function(n,r,a){var e,i,l;try{e=d(t,r),i=d(t,a);var s=t._get_voprf_final_evaluation_bytes(n.voprfPtr);l=t._malloc(s);var u=t._voprf_server_finalize(n.voprfPtr,l,s,e,r.length,i,a.length);if(u!==0)throw o("mapVoprfWasmError").mapVoprfWasmError(u);var m=c(t,l,s);return{finalEvaluation:m}}finally{[e,i,l].forEach(function(e){e!=null&&t._free(e)})}},wasmMemory:(a=t.wasmMemory)!=null?a:void 0})}).catch(function(e){throw r("err")("Failed to initialize wasm module, "+e)})})}function c(e,t,n){for(var r=new Uint8Array(n),o=0;o<n;++o)r[o]=e.getValue(o+t,"i8");return r}function d(e,t){var n=t.length,r=e._malloc(n);return e.writeArrayToMemory(t,r),r}l.default=s}),98);
__d("LSVoprfWasm",["LSVoprfWasmBuilder","bx","ls_voprf_utils_v2"],(function(t,n,r,o,a,i,l){"use strict";var e=r("bx").getURL(r("bx")("30933")),s=function(){return e},u=r("LSVoprfWasmBuilder")(r("ls_voprf_utils_v2"));l.locateFile=s,l.LSVoprfWasm=u}),98);
__d("LogWebQplNOP",["I64","LSIntEnum","Promise","QPLUserFlow","WAHashStringToNumber","WALogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e){var t=e==null?null:(c||(c=o("I64"))).to_int32(e);switch(t){case 521476165:return r("qpl")._(521476165,"2432");case 521481602:return r("qpl")._(521481602,"829");default:return null}}function m(t,a,i,l,m,p){return new(s||(s=n("Promise")))(function(n,s){try{var _=m?(u||(u=o("LSIntEnum"))).unwrapIntEnum(m):null,f=d(a);if(f!=null&&i!=null){var g,h={int:{num_messages:(c||(c=o("I64"))).to_int32(l)},string:{message_count:String(l),taskSource:(g=_==null?void 0:_.toString())!=null?g:"unknown"}};p===!0?r("QPLUserFlow").endSuccess(f,{annotations:h,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}):p===!1?r("QPLUserFlow").endFailure(f,i,{annotations:h,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}):(r("QPLUserFlow").addAnnotations(f,h,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}),r("QPLUserFlow").addPoint(f,i,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}))}n()}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["LSLogWebQpl error: ",""])),t),n()}})}l.call=m}),98);
__d("MAWClientConsistencyRefresh",["ClientConsistencyEventEmitter","CurrentAppID"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(o("CurrentAppID").getAppID()){case 772021112871879:r("ClientConsistencyEventEmitter").emit("hardRefresh",e);break;default:r("ClientConsistencyEventEmitter").emit("softRefresh",e)}}l.default=e}),98);
__d("MAWWorkerOnClose",["MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MAWWebWorkerSingleton","QPLUserFlow","pageID","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(1056841865,"2862");function s(t,n,a){r("QPLUserFlow").start(e,{annotations:{string:{currentWorkerId:o("MAWWaitForBackendSetup").getCurrentWorkerID(),pageID:r("pageID"),terminationMsgType:n,terminationReason:t,workerID:a},string_array:{pastWorkerTerminationMsgTypes:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,pastWorkerTerminationReasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}}})}function u(t){r("promiseDone")(o("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(n){return r("QPLUserFlow").endSuccess(e,{annotations:{bool:babelHelpers.extends({},n.data),string:{healthStatusAfter:n.tag,outcome:t}}})})}function c(t,n){r("promiseDone")(o("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(o){return r("QPLUserFlow").endFailure(e,t,{annotations:{bool:babelHelpers.extends({},o.data),string:{healthStatusAfter:o.tag}},error:n})})}l.ON_WORKER_CLOSED_HANDLER_QPL=e,l.startQPL=s,l.success=u,l.fail=c}),98);
__d("MAWWorkerWatchdog",["MAWBridgeLoggingUtils","MAWBridgeSendAndReceive","MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MAWWorkerWatchdogRecovery","Promise","QPLUserFlow","err","justknobx","promiseDone","qpl","setInterval","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("justknobx")._("4240"),u=s/2,c=r("qpl")._(1056847415,"2909"),d=!1,m=!1,p=["shared_not_exists","shared_exists_not_connected"];function _(){var t;return r("QPLUserFlow").start(c,{annotations:{bool:{workerTerminatedPermanently:(t=o("MAWSetupWorkerAuxStateForLogging")).WorkerLifeCycleState.workerTerminatedPermanently},int:{workerAge:t.WorkerLifeCycleState.getWorkerAge()},string:{currentWorkerId:o("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{pastWorkerTerminationMsgTypes:t.WorkerLifeCycleState.restartMessageTypes,pastWorkerTerminationReasons:t.WorkerLifeCycleState.restartReasons}}}),(e||(e=n("Promise"))).race([o("MAWBridgeSendAndReceive").sendAndReceive("backend",o("MAWBridgeLoggingUtils").HEARTBEAT_ROUTE),new e(function(e,t){r("setTimeout")(function(){t(r("err")("Armadillo web worker heartbeat timed out."))},u)})]).then(function(){r("QPLUserFlow").endSuccess(c),o("MAWSetupWorkerAuxStateForLogging").addWorkerHeartbeatToHistory("OK")},function(e){f(),o("MAWSetupWorkerAuxStateForLogging").addWorkerHeartbeatToHistory("ERROR"),r("promiseDone")(o("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(t){return r("QPLUserFlow").endFailure(c,"heartbeat_timeout",{annotations:{bool:babelHelpers.extends({},t.data),string:{workerHealthStatus:t.tag}},error:e})})})}function f(){r("QPLUserFlow").addPoint(c,"starting-lock-based-recovery"),r("promiseDone")(o("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(e){var t=o("MAWWorkerWatchdogRecovery").getWorkerRecoveryForWatchdog(),n=o("MAWWaitForBackendSetup").getCurrentWorkerID();if(p.includes(e.tag)&&t!=null)return t("locks_based_recovery",n,"locks_based_recovery")}))}function g(){m||(r("setInterval")(function(){d&&r("promiseDone")(_())},s),o("MAWWaitForBackendSetup").runAfterBackendSetup(function(){d=!0},o("MAWBridgeLoggingUtils").HEARTBEAT_ROUTE),m=!0)}l.HEARTBEAT_TIMEOUT_INTERVAL=u,l.MAW_WORKER_HEARTBEAT_QPL=c,l.startWatchdog=g}),98);
__d("MAWSetupWorker",["CurrentAppID","Deferred","IGDWebUtils","MAWBridgeObserver","MAWClientConsistencyRefresh","MAWCommonSetupWorker","MAWCrossWorkerPortal","MAWInit","MAWLoggerUtils","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWUnrecoverableDbErrors","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MAWWorkerOnClose","MAWWorkerWatchdog","MWFBLogger","QPLUserFlow","SharedWorkerBundleResource","SharedWorkerV2ResourceExperimental","asyncToGeneratorRuntime","cr:6600","gkx","promiseDone","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p=o("MWFBLogger").MWLogger().tags([o("MAWLoggerUtils").Tag.WorkerSetup,o("MAWLoggerUtils").Tag.MAWInit]),_=o("IGDWebUtils").isInstagramWebSupportedApp(Number(o("CurrentAppID").getAppID())),f=_?"IGDAWMainWorker":"MAWMainWorker",g=null,h=!1;function y(e){h=e,o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently=e}function C(){return h}function b(e){switch(e){case"mawInit":return!0;case"mawReinitSetupMutex":case"mawReinitReregDevice":case"bridgeRecovery":case"workerUpgraded":case"rebootRequired":case"workerTerminated":default:return!1}}function v(e,t,n,r,o,a,i){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,c,d,m){if(C())throw p.mustfixThrow("Worker is permanently killed.");o("MAWWaitForBackendSetup").markBackendSetupStarted();var _=function(n){return v(t,a,i,l,n,d,m)};(c==="bridgeRecovery"||c==="backendSetupFailure")&&r("QPLUserFlow").addPoint(o("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"create_worker_start"),o("MAWWebWorkerSingleton").setOnCloseForWorkerInstance(function(e,t,n){o("MAWWorkerOnClose").startQPL(e,n,t);var a=e!=null?e:"unknown",i=M(a)&&o("MAWWaitForBackendSetup").isBackendSetupSettled();if(o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons.push(a),o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes.push(n!=null?n:"unknown"),o("MAWWaitForBackendSetup").getCurrentWorkerID()==null||t!==o("MAWWaitForBackendSetup").getCurrentWorkerID()){o("MAWInit").MAWInit.logPoint(a+"_worker_termination_skipped"),o("MAWMIC").addPoint(a+"_worker_termination_skipped"),o("MAWWorkerOnClose").success(a+"_worker_restart_skipped"),p.warn("Worker termination skipped %s. Terminate reason: %s, Worker: %s, current worker: %s",c,e,t,o("MAWWaitForBackendSetup").getCurrentWorkerID());return}o("MAWWaitForBackendSetup").resetCurrentWorkerSkipIdCheck(),p.warn("Worker termination started %s. Terminate reason: %s, Worker: %s",c,e,t),o("MAWInit").MAWInit.logPoint(a+"_worker_terminated"),o("MAWMIC").addPoint(a+"_worker_terminated"),o("MAWInit").MAWInit.addStringArrayAnnotation("workerTerminationReason",o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons),o("MAWMIC").addStringArrayAnnotation("workerTerminationReason",o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons),o("MAWInit").MAWInit.addStringArrayAnnotation("workerTerminationMsgType",o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes),o("MAWMIC").addStringArrayAnnotation("workerTerminationMsgType",o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes);var l=e==="requested-upgrade"?"workerUpgraded":a+"_worker_terminated";r("promiseDone")(P(),function(){if(i){y(!0),p.warn("Tab displays soft refresh. Flow: %s",a),o("MAWInit").MAWInit.logPoint(a+"_soft_refresh"),o("MAWMIC").addPoint(a+"_soft_refresh"),r("MAWClientConsistencyRefresh")("maw_request_refresh"),o("MAWWorkerOnClose").success("softRefresh");return}if(a!=="logout")return _(l).then(function(){return o("MAWWorkerOnClose").success(l)}).catch(function(e){o("MAWInit").MAWInit.fail("worker_restart_failed",e),o("MAWWorkerOnClose").fail("workerUpgradeFailed",e),o("MAWWaitForBackendSetup").rejectBackendSetup(e)});o("MAWWorkerOnClose").success("skip_logout")})});var h=yield o("MAWWebWorkerSingleton").createWorkerIfNone(c),b=h.worker,S=h.workerID;o("MAWWaitForBackendSetup").setCurrentWorker(S);var R=new(r("Deferred"));g=R.getPromise(),(c==="bridgeRecovery"||c==="backendSetupFailure")&&r("QPLUserFlow").addPoint(o("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"create_worker_end");var L=o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();p.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["worker setting up with reason: ",", use shared worker: ",""])),c,L),L&&b.addEventListener("message",function(e){var t,n;typeof e.data=="object"&&((t=e.data)==null?void 0:t.type)==="sw-shutdown"&&typeof e.data.response=="object"&&((n=e.data.response)==null?void 0:n.reason)==="maw-request-refresh"&&r("MAWClientConsistencyRefresh")("maw_request_refresh")});var E=new(o("MAWCommonSetupWorker")).BridgeAdapter(b,f);return yield a(E),R.resolve(E),p.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["bridge promise resolved"]))),o("MAWMIC").addPoint(c+"_connect_to_backend"),yield o("MAWInit").MAWInit.measurePerformance(c+"-init_backend",n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=function(n){return o("MAWCommonSetupWorker").initWorker({bridge:E,ebState:n,onWorkerAlreadySetup:i,onWorkerRestart:_,reason:c,vaultMaterials:t})},n=L?yield e(m):yield E.fullyConnected.then(function(){return e(m)});o("MAWWaitForBackendSetup").resolveBackendSetup(n),p.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["backend setup successful"])))})),o("MAWWaitForBackendSetup").waitForBackendSetup("setup-worker")}),S.apply(this,arguments)}function R(e,t,n,a,i,l,s){var u=v(e,t,n,a,i,l,s);return b(i)&&r("promiseDone")(o("MAWWaitForBackendSetup").waitForBackendSetup("init bridge recovery observer").then(function(){o("MAWBridgeObserver").initUnackedMessagesObserver({onConnectToExistingWorker:n,onTerminateWorker:a,onWorkerConnect:t,updateWorkerState:l,vaultMaterials:e}),o("MAWWorkerWatchdog").startWatchdog()})),u}function L(){return g}function E(e){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return p.debug("Terminating dedicated worker: %s. Bridge Promise: %s",e,!!g),g?(p.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["worker terminating: for ",""])),e),yield P(),!0):(p.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["worker doesn't exist, no need to terminate"]))),!1)}),k.apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield E("terminateWorkerPermanently"),y(!0)}),T.apply(this,arguments)}function D(e,t){var a=r("gkx")("7313");return a?o("SharedWorkerV2ResourceExperimental").terminateSharedWorker(n("cr:6600"),e?"maw-request-refresh":t!=null?t:"unknown"):o("SharedWorkerBundleResource").terminateSharedWorker(n("cr:6600"),null,e?"maw-request-refresh":t!=null?t:"unknown")}function x(e){return $.apply(this,arguments)}function $(){return $=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();if(t){p.debug("Terminating shared worker: %s",e);var n=yield D(!1,e).then(function(){return!0},function(){return!1});p.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Shared worker responded to termination request: ",""])),n)}else yield E(e)}),$.apply(this,arguments)}function P(){return N.apply(this,arguments)}function N(){return N=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;p.debug("Updating worker state on termination"),(e=yield g)==null||e.close(),g=null,o("MAWWaitForBackendSetup").resetBackendSetup(),o("MAWCrossWorkerPortal").killPortalWhenWorkerTerminating(),o("MAWWebWorkerSingleton").resetWorkerCreation()}),N.apply(this,arguments)}function M(e){return!!(e==="MAWEARKeychainDecryptionError"||o("MAWUnrecoverableDbErrors").isUnrecoverableDbErrorByName(e)||e==="update-required-fbid_change"||e==="update-required-vault_materials_change")}l.setPreventWorkerRestart=y,l.getOrSetupWorker=R,l.waitForWorkerSetup=L,l.terminateDedicatedWorker=E,l.terminateWorkerPermanently=I,l.killSharedWorker=D,l.terminateWorker=x}),98);
__d("MAWWorkerReboot",["EBIsEbEnabled","FBLogger","MAWBridgeObserver","MAWSetupWorker","MAWWaitForBackendSetup","ODS","Promise","QPLUserFlow","asyncToGeneratorRuntime","getErrorSafe","gkx","pageID","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){(s||(s=o("ODS"))).bumpEntityKey(3185,"armadillo_shared_worker_reboot","shared_worker_reboot_"+e)}var c=o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),d=function(t){switch(t){case"bridge_recovery":return"bridgeRecovery";case"backend_setup_failure":return"backendSetupFailure"}};function m(t,a,i,l,s,m){r("QPLUserFlow").start(o("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,{annotations:{bool:{isSharedWorker:c},string:{trigger:s,workerInitPageID:r("pageID")}}}),r("FBLogger")("messenger_web").info("Rebooting worker started."),u("start"),o("MAWWaitForBackendSetup").resetBackendSetup();var p=d(s);return r("QPLUserFlow").addPoint(o("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"terminate_worker_start"),new(e||(e=n("Promise")))(function(e,s){return o("MAWSetupWorker").terminateWorker(p).then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){r("QPLUserFlow").addPoint(o("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"terminate_worker_end"),r("FBLogger")("messenger_web").info("Reboot process killed existing worker successfully.");var n;if(r("gkx")("1458"))try{n=yield o("EBIsEbEnabled").isEBEnabled()}catch(e){r("FBLogger")("wmi_eb").mustfix("Failed to get EB state during worker reboot: %s",r("getErrorSafe")(e).message),n=void 0}else n=void 0;return o("MAWSetupWorker").getOrSetupWorker(t,a,i,l,p,m,n).then(function(t){r("FBLogger")("messenger_web").info("Rebooting worker success. Reason for reboot: %s",p),u("success"),r("QPLUserFlow").endSuccess(o("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL),a(t),e()})})).catch(function(e){r("FBLogger")("messenger_web").info("Rebooting worker failed. Error message: %s",e.message),u("fail"),r("QPLUserFlow").endFailure(o("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,e.message),o("MAWWaitForBackendSetup").rejectBackendSetup(e),s(e)})})}l.rebootWorker=m}),98);
__d("MAWBridgeObserver",["FBLogger","MAWWaitForBackendSetup","MAWWorkerReboot","promiseDone","qex","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(1056840252,"808"),s=5,u=[],c=!1,d,m=function(){u=[]},p=function(t){if(h()){if(o("MAWWaitForBackendSetup").isBackendSetupInProgress()){m();return}if(g().length>=s&&!o("MAWWaitForBackendSetup").isBackendSetupInProgress()){r("FBLogger")("messenger_web").info("Minimum threshold of unacked messages reached: %s. Unacked messages: %s",s,JSON.stringify(g()));var e=r("qex")._("440"),n=r("qex")._("468")||s;e===!0&&g().length>=n?(r("FBLogger")("messenger_web").info("QE threshold of unacked messages reached: %s. Unacked messages: %s",s,JSON.stringify(g())),m(),r("promiseDone")(_())):(r("FBLogger")("messenger_web").info("Bridge recovery attempt skipped. Reason for skipped: maw_bridge_recovery_v2_enabled: %s, maw_bridge_recovery_threshold: %s",e,n),u.push(t))}else u.push(t)}},_=function(){return r("FBLogger")("messenger_web").info("Starting bridge recovery attempt."),o("MAWWorkerReboot").rebootWorker(d.vaultMaterials,d.onWorkerConnect,d.onConnectToExistingWorker,d.onTerminateWorker,"bridge_recovery",d.updateWorkerState).then(function(){r("FBLogger")("messenger_web").info("Bridge recovery attempt successful. Worker has restarted.")},function(e){throw r("FBLogger")("messenger_web").info("Bridge recovery attempt failed. Worker has failed to restart. Error: %s",e.message),e})},f=function(t){c=!0,d=t},g=function(){return u},h=function(){return c},y=function(){return d};l.BAD_STATE_RECOVERY_QPL=e,l.MIN_UNACKED_EVENTS_THRESHOLD=s,l.resetUnackedMessages=m,l.notifyUnackedEvent=p,l.attemptRecovery=_,l.initUnackedMessagesObserver=f,l.getUnackedMessages=g,l.getIsObserverActive=h,l.getProps=y}),98);
__d("MAWGetDBVersionForTest",["justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(){if(r("justknobx")._("1495")){var e=new URL(document.location.href),t=e.searchParams.get("db_version");if(t!=null){if(t==="current"||t==="latest")return t;var n=parseInt(t,10);if(Number.isInteger(n))return Number(n)}}}l.getDbVersionForTest=e}),98);
__d("MAWCommonSetupWorker",["Deferred","FBLogger","MAWCurrentUser","MAWGetDBVersionForTest","MAWInit","MAWMIC","MAWSetupWorker","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MessengerWebInitData","Promise","WADevToolMessageChannel","WALogger","WorkerClient","WorkerMessagePort","err","gkx","pageID","promiseDone","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("gkx")("3282"),c=(function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.onmessage=null,r.$BridgeAdapter$p_1=t,o("WorkerClient").init(r),r.onUnhandledMessage.add(function(e){r.onmessage&&r.onmessage({data:e})}),r.addMessageListener("worker-setup",function(e){e.status==="worker-ready"&&o("MAWInit").MAWInit.addBoolAnnotation("workerReadyReceived",!0)}),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getBridgePort=function(){return this},t})(o("WorkerMessagePort").WorkerSyncedMessagePort);function d(e){var t=e.bridge,n=e.ebState,a=e.reason,i=e.vaultMaterials,l=new(r("Deferred"));return t.addMessageListener("worker-setup",function(t){return m(e,l,t)}),t.addMessageListener("worker-setup-ack",function(e){return p(e,a)}),f(t,i,n),r("promiseDone")(o("MAWWebWorkerSingleton").doesWorkerExist(),function(e){return o("MAWInit").MAWInit.addBoolAnnotation("workerExistsOnSetup",e)}),r("promiseDone")(o("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(e){return o("MAWInit").MAWInit.addStringAnnotation("workerHealthStatus",e.tag)}),l.getPromise()}function m(e,t,n){var a;if(n.setupHash===r("pageID"))switch(n.status){case"success":t.resolve(e.bridge.getBridgePort());break;case"failure":t.reject(r("err")((a=n.msg)!=null?a:"Error setting up worker"));break;case"already-setup":return _(e,t,n);default:throw o("MAWInit").MAWInit.addBoolAnnotation("invalidSetupMessageReceived",!0),r("FBLogger")("messenger_web").mustfixThrow("Invalid message for worker: "+n.status)}}function p(e,t){var n;if(e.setupHash===r("pageID")){o("MAWInit").MAWInit.logPoint(t+"_backend_setup_ack"),o("MAWMIC").addPoint(t+"_backend_setup_ack");var a=(n=e.backendState)!=null?n:"none";o("MAWInit").MAWInit.addStringAnnotation("backendAckState",a),o("MAWMIC").addStringAnnotation("backendAckState",a)}}function _(t,a,i){var l=t.bridge,u=t.onWorkerAlreadySetup,c=t.onWorkerRestart,d=t.reason;switch(i.action){case"no-action":{a.resolve(l.getBridgePort()),u(),o("MAWInit").MAWInit.logPoint(d+"_backend_already_setup"),o("MAWMIC").addPoint(d+"_backend_already_setup");break}case"reboot-required":{var m;o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Terminating worker and rebooting..."]))),o("MAWMIC").addPoint(d+"_worker_rebooting"),o("MAWInit").MAWInit.logPoint(d+"_worker_rebooting");var p=(m=i==null?void 0:i.reason)!=null?m:"none";o("MAWInit").MAWInit.addStringAnnotation("workerRebootReason",p),o("MAWMIC").addStringAnnotation("workerRebootReason",p);var _=o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?(s||(s=n("Promise"))).resolve(o("MAWWaitForBackendSetup").resetCurrentWorkerWithId(o("MAWWaitForBackendSetup").getCurrentWorkerID())):o("MAWSetupWorker").terminateDedicatedWorker("reboot required");return _.then(function(){return c("rebootRequired").then(function(e){return a.resolve(e)}).catch(function(e){return a.reject(e)})})}default:throw i.action,r("FBLogger")("messenger_web").mustfixThrow("Invalid action for worker-setup:already-setup: "+i.action)}}function f(e,t,n){var a={content:{createdAt:r("MessengerWebInitData").createdAt,ebState:n,fbId:o("MAWCurrentUser").getID(),sessionId:r("MessengerWebInitData").sessionId,testDbVersion:o("MAWGetDBVersionForTest").getDbVersionForTest(),userKeyBase:r("MessengerWebInitData").userKeyBase,vaultMaterials:t},setupHash:r("pageID"),type:"worker-setup"};if(u){o("MAWInit").MAWInit.addBoolAnnotation("devToolsEnabled",!0);var i=o("WADevToolMessageChannel").createNewChannel();a.content.devToolMessageChannelPort2=i.port2,e.postMessage(a,[i.port2])}else e.postMessage(a)}l.BridgeAdapter=c,l.initWorker=d}),98);
__d("MAWDefaultE2eeOneToOneEligibility",["LSContactBitOffset"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.maybeContact,n=t!=null&&o("LSContactBitOffset").has(83,t);return n}l.isContactDefaultE2eeOneToOneEligible=e}),98);
__d("MAWMainThreadLogger",["CurrentMessengerUser","FBLogger","MAWAppVersion","MAWConsoleLogger","MAWDeleteOldLogsFromDisk","MAWLeakDetection","MAWLoggerUtils","MAWLoggingSwitches","MAWSaveLogToDisk","Promise","WAJids","WATagsLogger","asyncToGeneratorRuntime","err","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!1;function u(){s=!1}function c(){s||(s=!0,o("WATagsLogger").initializeWaLogger(S))}var d=function(){return r("FBLogger")("messenger_web")};function m(e,t){var n=p(e);n!=null&&o("MAWLoggerUtils").logToHistory("log",n,t,!1)}function p(e){if(!(!o("CurrentMessengerUser").isEmployee()&&!o("CurrentMessengerUser").isTestUser())){var t=o("WAJids").maybeSanitizeLogLineText(e);return t=o("MAWLeakDetection").maybeReplaceVaultedString(t),t}}function _(e,t){var n=o("WAJids").maybeSanitizeLogLineText(e);n=o("MAWLeakDetection").maybeReplaceVaultedString(n),o("MAWLoggerUtils").logToHistory("log",n,t,!1)}function f(e,t){var n=o("WAJids").maybeSanitizeLogLineText(e);n=o("MAWLeakDetection").maybeReplaceVaultedString(n),o("MAWLoggerUtils").logToHistory("log",n,t,!1)}function g(e,t){var n=o("WAJids").maybeSanitizeLogLineText(e);n=o("MAWLeakDetection").maybeReplaceVaultedString(n),d().tags(t.map(function(e){return String(e)})).warn(n)}function h(e,t,n,o,a,i){var l=r("err")(n);l.stack=o,r("promiseDone")(b(e,t,l,a,i))}function y(e,t){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=o("MAWLeakDetection").maybeReplaceVaultedString(o("WAJids").maybeSanitizeLogLineText(t)),i=o("MAWLoggingSwitches").removeLoggingFromBridge?o("MAWSaveLogToDisk").getLastNEntries(r):(e||(e=n("Promise"))).resolve([]),l=r===0?[]:[].concat((yield i).map(function(e){return e.args}));return{logs:[].concat(l),sanitizedMessage:a}}),C.apply(this,arguments)}function b(e,t,n,r,o){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i){var l,s,u=o("MAWLeakDetection").maybeReplaceVaultedString(o("WAJids").maybeSanitizeLogLineText(e)),c=n!=null?n:r("err")(u),m=a!=null?a:n==null?2:0,p=i!=null?i:0,_=yield y(c.message,p),f=_.logs,g=_.sanitizedMessage,h=r("getErrorSafe")(c);try{c.message=g}catch(e){h=r("err")(g,c.fileName,c.lineNumber)}m!==0&&(h.framesToPop=m),(l=d())==null||(s=l.addMetadata("MESSENGER_E2EE_WEB","APP_VERSION",o("MAWAppVersion").getVersionNumber()).tags(t.map(function(e){return String(e)})).catching(h)).mustfix.apply(s,[g].concat(f))}),v.apply(this,arguments)}var S={count:function(t,n){o("MAWConsoleLogger").logToConsole("count",t,n)},debug:function(t,n){o("MAWConsoleLogger").logToConsole("log",t,n)},devConsole:function(t,n,r){for(var e=arguments.length,a=new Array(e>3?e-3:0),i=3;i<e;i++)a[i-3]=arguments[i];switch(t){case"COUNT":o("MAWConsoleLogger").logToConsole.apply(void 0,["count",n,r].concat(a));break;case"DEV":o("MAWConsoleLogger").logToConsole.apply(void 0,["log",n,r].concat(a));break;case"DEV_XMPP":o("MAWConsoleLogger").logToConsole.apply(void 0,["log",n,r].concat(a));break;case"LOG":o("MAWConsoleLogger").logToConsole.apply(void 0,["info",n,r].concat(a));break;case"WARN":o("MAWConsoleLogger").logToConsole.apply(void 0,["warn",n,r].concat(a));break;case"ERROR":o("MAWConsoleLogger").logToConsole.apply(void 0,["error",n,r].concat(a));break;case"CATCHING":o("MAWConsoleLogger").logToConsole.apply(void 0,["error",n,r].concat(a));break}},error:function(t,n,a){r("promiseDone")(b(t,n,a)),o("MAWConsoleLogger").logToConsole("error",t,n)},info:function(t,n){f(t,n),o("MAWConsoleLogger").logToConsole("info",t,n)},logRestricted:function(t,n){m(t,n),o("MAWConsoleLogger").logToConsole("log",t,n)},warn:function(t,n){g(t,n),o("MAWConsoleLogger").logToConsole("warn",t,n)}};function R(){return o("MAWLoggingSwitches").removeLoggingFromBridge?o("MAWSaveLogToDisk").getEntriesFromDb():(e||(e=n("Promise"))).resolve([])}function L(){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("MAWLoggingSwitches").removeLoggingFromBridge&&(yield o("MAWDeleteOldLogsFromDisk").clearLogs())}),E.apply(this,arguments)}function k(e){return new Date(typeof e=="string"?parseInt(e,10):e).toISOString().replace("T"," ").replace("Z","")}function I(e){return e.map(function(e){try{var t=k(e.date);return[t,e.level,e.category,e.event,e.args].join(" | ")}catch(e){var n=r("getErrorSafe")(e);return[k(Date.now()),"error","LOGGER","Error formatting log: "+((n==null?void 0:n.message)||"")].join(" | ")}}).filter(Boolean).join("\n")}l.__testClearLoggerSetup=u,l.setupMainWaLogger=c,l.logRestricted=m,l.count=_,l.info=f,l.warn=g,l.logError=h,l.getEntries=R,l.clearEntries=L,l.formatEntries=I}),98);
__d("MWGetOtherContactOrSelf",["I64","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(r.tables.participants).getKeyRange(t));if(a.length===1){var i=a[0];return o("ReQL").firstAsync(o("ReQL").fromTableAscending(r.tables.contacts).getKeyRange(i.contactId))}if(!(a.length>2)){var l=a.find(function(t){return!(e||(e=o("I64"))).equal(t.contactId,n)});if(l!=null)return o("ReQL").firstAsync(o("ReQL").fromTableAscending(r.tables.contacts).getKeyRange(l.contactId))}}),u.apply(this,arguments)}l.getOtherContactOrSelf=s}),98);
__d("PromiseResult",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(){function t(){var t=this;this.promise=new(e||(e=n("Promise")))(function(e,n){t.$1=e,t.$2=n})}var r=t.prototype;return r.resolve=function(t){this.$1(t)},r.reject=function(t){this.$2(t)},t})();i.default=l}),66);
__d("MqttFetchClient",["MqttEnv","MqttProtocolCodec","MqttUserName","MqttUtils","Promise","PromiseResult"],(function(t,n,r,o,a,i,l){"use strict";var e,s="fetch_pull",u="fetch_pull_finish",c="fetch_",d=6e4,m="action",p="chunked",_="send",f="true",g=5,h=20,y=10,C=5e3,b=typeof window!="undefined"?window:self,v=(function(){function t(){this.$1="",this.$2=o("MqttEnv").Env.getLoggerInstance(),this.$3=0,this.$4="",this.$5=new(r("MqttUserName"))("",0,1,"",0,!0),this.$6=function(){},this.$7=function(e){},this.$8=function(){},this.$9=function(e){},this.$10=0,this.$11=0,this.$12=0,this.$13=0,this.$14="Ready",this.$15=[],this.$16=[],this.$17=null,this.$18=!1,this.$19=0}t.isSupported=function(){return typeof b.fetch=="function"};var a=t.prototype;return a.run=function(t,n,r,a,i,l,s,u){var e=this;this.$1=o("MqttUtils").endpointWithSessionId(t,n),this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,o("MqttEnv").Env.setTimeout(function(){return e.$20()},0)},a.isTopicSupported=function(t){return!0},a.publish=function(t,n){return this.$21(t,n)},a.publishBinary=function(t,n){return this.$21(t,n)},a.$21=function(o,a){if(this.$14!=="ReceivingData")return this.$2.bumpCounter(c+"publish."+o+".invalidstate"),(e||(e=n("Promise"))).reject("not connected");this.$2.bumpCounter(c+"publish."+o+".publish");var t=new(r("PromiseResult")),i={topic:o,payload:a,promiseResult:t};return this.$15.push(i),this.$22(),t.promise},a.abort=function(){this.$6=function(){},this.$7=function(e){},this.$8=function(){},this.$9=function(e){}},a.$23=function(t){var e=this;t.forEach(function(t){e.$2.bumpCounter(c+"publish."+t.topic+".resolved"),t.promiseResult.resolve()}),this.$12+=t.length},a.$24=function(t,n){var e=this;t.forEach(function(t){e.$2.bumpCounter(c+"publish."+t.topic+".rejected"),t.promiseResult.reject(n)})},a.$25=function(t,n,r,o){var e=t.map(function(e){return e.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request failed. Publishes:"+e+", retry:"+r),this.$2.bumpCounter(c+"publish_request_failed"),this.$14!=="ReceivingData"||r===g?(this.$24(t,o),this.$18=!1,this.$2.bumpCounter(c+"publish_request_failed_final"),this.$22()):this.$26(t,n,r+1)},a.$27=function(t,n,r,o){if(!o.ok){if(this.$2.bumpCounter(c+"publish_request_failed.http."+o.status),o.status===409&&(this.$19++,this.$19>=y)){this.$2.bumpCounter(c+"409_reset"),this.$28(new Error("Too many 409 errors"));return}this.$25(t,n,r,this.$29(o));return}this.$2.bumpCounter(c+"publish_request_success");var e=t.map(function(e){return e.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request success. Publishes:"+e+", retry:"+r),this.$23(t),this.$18=!1,this.$22()},a.$22=function(){if(this.$14==="ReceivingData"&&!this.$18&&!(this.$15.length===0&&this.$16.length===0)){this.$18=!0;var e=this.$15.slice(0,h);this.$15=this.$15.slice(h,this.$15.length),this.$17!=null&&o("MqttEnv").Env.clearTimeout(this.$17),this.$17=null;var t=this.$16.slice(0,h);this.$16=this.$16.slice(h,this.$16.length),this.$26(e,t,0)}},a.$26=function(t,n,r){var e=this,a=t.map(function(e){return e.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request sent. Publishes:"+a+", retry:"+r);var i=o("MqttUtils").endpointWithExtraParameter(this.$1,m,_),l=t.map(function(e){return{topic:e.topic,payload:e.payload,qos:0,messageId:o("MqttEnv").Env.random()}}),s=this.$5.gen(this.$3,[],l,n);this.$2.bumpCounter(c+"publish_request"),o("MqttUtils").promiseDoneWithTimeout(b.fetch(i,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:s,keepalive:!1}),function(o){return e.$27(t,n,r,o)},function(o){return e.$25(t,n,r,o)},d)},a.$30=function(t){var e=t.message;this.$2.debugTrace("FetchClient","Fetch request failed with error:"+e),this.$9(e),this.$31(!1,e),this.$2.bumpCounter(c+"error"),this.$14="Error"},a.$32=function(t){var e=this;this.$2.debugTrace("FetchClient","Fetch response data received");var n=o("MqttProtocolCodec").decodeByteMessages(new Uint8Array(t)),r=n.messages,a=r.filter(function(e){return e.messageType===o("MqttProtocolCodec").MESSAGE_TYPE.PINGREQ}),i=r.filter(function(e){return e.messageType===o("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH}).map(function(t){if(!(t instanceof o("MqttProtocolCodec").WireMessage.Publish))return{};var n=t;return n.qos===1&&n.messageIdentifier!=null&&(e.$16.push(n.messageIdentifier),e.$17==null&&(e.$17=o("MqttEnv").Env.setTimeout(function(){e.$22()},C))),{topic:n.topic,payload:n.payloadMessage,qos:n.qos}});for(var l of i){var s;this.$2.bumpCounter(c+"response_"+((s=l.topic)!=null?s:"void"))}i&&i.length>0&&(this.$13+=i.length,this.$7(i)),a&&a.length>0&&this.$33()},a.$33=function(){this.$2.debugTrace("FetchClient","Got server ping request"),this.$2.bumpCounter(c+"ping")},a.$28=function(t){this.$2.debugTrace("FetchClient","Fetch request ended: "+t.toString()),this.$2.bumpCounter(c+"done"),this.$34(t.message),this.$8(),this.$14="Done"},a.$35=function(t,n,r){var e=this;if(r!=null)try{this.$32(r)}catch(e){this.$28(e),this.$2.bumpCounter(c+"dataDecodeException");return}if(n){this.$28(new Error("EOF"));return}o("MqttUtils").promiseDone(t.read(),function(n){var r=n.done,o=n.value;return e.$35(t,r,o)},function(t){return e.$28(t)})},a.$36=function(t){if(!t.ok){this.$2.bumpCounter(c+"error.http."+t.status),this.$30(this.$29(t));return}var e=t.body;if(!e){this.$30(new Error("Empty body"));return}var n=e.getReader();this.$6(),this.$2.bumpCounter(c+"success"),this.$31(!0,null),this.$11=Date.now(),this.$14="ReceivingData",this.$2.debugTrace("FetchClient","Fetch request success"),this.$35(n,!1,null)},a.$34=function(t){this.$2.eventLogPullFinish({pullEventName:u,sessionID:this.$3,duration:Date.now()-this.$11,errorMessage:t,publishReceived:this.$13,publishSent:this.$12})},a.$31=function(t,n){this.$2.eventLogPull({pullEventName:s,sessionID:this.$3,status:t,duration:Date.now()-this.$10,hostname:this.$1,errorMessage:n})},a.$20=function(){var e=this;if(this.$14==="Ready"){this.$2.debugTrace("FetchClient","Sending fetch request"),this.$2.bumpCounter(c+"request"),this.$10=Date.now();var t=o("MqttUtils").endpointWithExtraParameter(this.$1,p,f);o("MqttUtils").promiseDoneWithTimeout(b.fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:this.$4,keepalive:!1}),function(t){return e.$36(t)},function(t){return e.$30(t)},d)}},a.$29=function(t){return new Error("Http error, status="+t.status)},t})();l.default=v}),98);
__d("MqttLongPollingClient",["MqttEnv","MqttProtocolCodec","MqttUserName","Promise","XHRRequest","getCrossOriginTransport","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=12e4,u="simple_pull",c="longpolling_",d=(function(){function t(){this.$3="",this.$4=0,this.$2=o("MqttEnv").Env.getLoggerInstance(),this.$1="Ready",this.$5="",this.$6=new(r("MqttUserName"))("",0,1,"",0,!0),this.$7=function(){},this.$8=function(e){},this.$9=function(){},this.$10=function(e){},this.$11=0,this.$12=null,this.$13=new Set(["/t_ms","/messenger_sync_get_diffs","/messenger_sync_create_queue","/webrtc","/rtc_multi"])}var a=t.prototype;return a.run=function(t,n,r,o,a,i,l,s){this.$3=t,this.$4=n,this.$5=r,this.$6=o,this.$7=a,this.$8=i,this.$9=l,this.$10=s,this.$14(this.$5)},a.isTopicSupported=function(t){return this.$13.has(t)},a.publish=function(r,o){return(e||(e=n("Promise"))).reject("not supported")},a.publishBinary=function(r,o){return(e||(e=n("Promise"))).reject("not supported")},a.abort=function(){this.$12!=null&&this.$12.abort("Disconnected")},a.$15=function(t,n){this.$1!==t&&(this.$1=t,t==="Error"&&n!=null&&this.$10(n),this.$2.debugTrace("LongPollingClient","_changeStatus : "+t))},a.$16=function(t){if(this.$1==="RequestSend"){if(!t){this.$17("EmptyResponse",null);return}this.$7(),this.$2.bumpCounter(c+"success"),this.$18(!0,null),this.$15("ResponseReceived");var e=o("MqttProtocolCodec").decodeByteMessages(new Uint8Array(t)),n=e.messages.filter(function(e){return e instanceof o("MqttProtocolCodec").WireMessage.Publish}).map(function(e){if(e instanceof o("MqttProtocolCodec").WireMessage.Publish){var t=e;return{topic:t.topic,payload:t.payloadMessage,qos:t.qos}}else return{}});this.$8(n),this.$9()}},a.$17=function(t,n){var e=n!=null?n.message:"null";this.$2.debugTrace("LongPollingClient Error","Poll failed with error:"+t+", errorMsg:"+e),this.$18(!1,t+":"+e),this.$2.bumpCounter(c+"error."+t),this.$15("Error",t)},a.$18=function(t,n){this.$2.eventLogPull({pullEventName:u,sessionID:this.$4,status:t,duration:Date.now()-this.$11,hostname:this.$3,errorMessage:n})},a.$14=function(t){var e=this;if(!(this.$1!=="Ready"||this.$12)){this.$2.bumpCounter(c+"request");try{this.$11=Date.now(),this.$12=new(r("XHRRequest"))(this.$3).setResponseType("arraybuffer").setRawData(t).setTransportBuilder(r("getCrossOriginTransport").withCredentials).setResponseHandler(function(t){return e.$16(t)}).setNetworkFailureHandler(function(t){e.$17("Network",t)}).setErrorHandler(function(t){e.$17("Error",t)}).setAbortHandler(function(t){e.$17("Abort",null)}).setTimeoutHandler(function(){e.$17("Timeout",null)}).setTimeout(s).send(),this.$15("RequestSend")}catch(e){this.$17("Error",r("getErrorSafe")(e))}}},t})();l.default=d}),98);
__d("MqttLongPollingHookCollection",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Set}var t=e.prototype;return t.addHook=function(t){this.$1.add(t)},t.removeHook=function(t){this.$1.delete(t)},t.onPollRequestSent=function(){this.$1.forEach(function(e){e.onPollRequestSent()})},t.onPollRequestSuccess=function(){this.$1.forEach(function(e){e.onPollRequestSuccess()})},t.onPollResponse=function(t){this.$1.forEach(function(e){e.onPollResponse(t)})},t.onPollFinish=function(){this.$1.forEach(function(e){e.onPollFinish()})},t.onPollRequestFailed=function(t){this.$1.forEach(function(e){e.onPollRequestFailed(t)})},t.onPollShutdownAbort=function(){this.$1.forEach(function(e){e.onPollShutdownAbort()})},e})();i.default=e}),66);
__d("exponentialBackoff",["MqttEnv"],(function(t,n,r,o,a,i,l){function e(e,t){t===void 0&&(t=null);var n=null,r=0;function a(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];var s=function(){e.apply(t,i)};if(n===null){var u=Math.max(0,Math.pow(2,Math.min(r,6))*(1e3+o("MqttEnv").Env.random()*100)-2e3);n=o("MqttEnv").Env.setTimeout(function(){s(),n=null},u)}r++}return a.reset=function(){r=0,n!=null&&(o("MqttEnv").Env.clearTimeout(n),n=null)},a.isPending=function(){return n!=null},a}l.default=e}),98);
__d("MqttLongPollingRunner",["MqttEnv","MqttFetchClient","MqttLongPollingClient","MqttLongPollingHookCollection","MqttTypes","MqttUtils","MqttWebSocketUtils","Promise","exponentialBackoff","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=4,u=1e3,c=3e3,d="mqtt_should_longpoll",m="last_lp",p="yes",_="no",f=(function(){function t(e,t,n,a,i,l,s,u,c){var d=this;this.$23=function(){try{if(!d.$30())return;d.$5.debugTrace("LongPollingRunner","_startPollingIfNecessary called");var e=d.$31();d.$14=e;var t=d.$9(),n=d.$10(),a=t.filter(function(t){return e.isTopicSupported(t)}),i=n.filter(function(t){return e.isTopicSupported(t.topic)});if(a.length===0&&i.length===0){d.$5.debugTrace("LongPollingRunner","Poll skipped, nothing to do"),d.$14=null,o("MqttEnv").Env.setTimeout(function(){d.$23()},1e3);return}var l=o("MqttUtils").generateSessionId();e.run(d.$6,l,d.$7.gen(l,a,i),d.$7,function(){return d.$32()},function(e){return d.$33(e)},function(){return d.$34()},function(e){return d.$35(e)}),d.$19.onPollRequestSent();var s=a.join(","),u=i.map(function(e){return e.topic}).join(",");d.$5.debugTrace("LongPollingRunner","Making a poll request to "+d.$6+". SubscribedTopics:"+s+". Publishes:"+u)}catch(e){var c=r("getErrorSafe")(e);d.$5.logErrorWarn(c,"lp_js_error"),d.$11(new(o("MqttTypes")).MqttChannelError(!1,"js error lp",c)),d.$35("lp_js_error")}},this.$6=e,this.$7=t,this.$1=a,this.$2=0,this.$3=n,this.$4=o("MqttWebSocketUtils").hasWSSupport(),this.$5=o("MqttEnv").Env.getLoggerInstance(),this.$8=i,this.$9=l,this.$10=s,this.$11=u,this.$12=c,this.$13=!1,this.$14=null,this.$15="LPInactive",this.$16="NotSent",this.$17=0,this.$19=new(r("MqttLongPollingHookCollection")),this.$18=r("exponentialBackoff")(this.$23,this),this.$20=0,this.$21=_;var m=o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_lp_use_fetch),p=r("MqttFetchClient").isSupported();m?this.$5.bumpCounter("fetch_gk_pass"):this.$5.bumpCounter("fetch_gk_fail"),p?this.$5.bumpCounter("fetch_api_supported"):this.$5.bumpCounter("fetch_api_not_supported"),this.$22=m&&p}var a=t.prototype;return a.addHook=function(t){this.$19.addHook(t)},a.start=function(){var e=this;this.$21=o("MqttEnv").Env.configRead(m,_),this.$5.debugTrace("LongPollingRunner","Runner loaded, last status "+this.$21),this.$20=Date.now(),this.$23(),o("MqttEnv").Env.setTimeout(function(){e.$23()},u+100),o("MqttEnv").Env.setTimeout(function(){e.$23()},c+100)},a.shutdown=function(){this.$5.debugTrace("LongPollingRunner","Shutdown called"),this.$14&&this.$14.abort(),this.$19.onPollShutdownAbort(),this.$14=null},a.canPublish=function(){return this.$15==="LPActive"&&this.$16==="ReceivingData"},a.publish=function(t,n,r){return this.$24(t,n)},a.publishBinary=function(t,n,r){return this.$24(t,n)},a.$24=function(r,a){return o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling)&&this.$14&&this.$14.isTopicSupported(r)?typeof a=="string"?this.$14.publish(r,a):this.$14.publishBinary(r,a):(e||(e=n("Promise"))).reject()},a.onConnectAttempt=function(){},a.onConnectFailure=function(){this.$2++,this.$23()},a.onConnected=function(){},a.onConnectSuccess=function(){this.$1=!0,o("MqttEnv").Env.configWrite(m,null)},a.onConnectionLost=function(){},a.onConnectionDisconnect=function(){},a.onSubscribe=function(t){},a.onUnsubscribe=function(t){},a.onPublish=function(t){},a.onMessage=function(t){},a.onWSFatal=function(){this.$3=!0,this.$23()},a.getStatus=function(){return this.$15},a.getRequestStatus=function(){return this.$16},a.$25=function(t){t!==this.$15&&(this.$5.debugTrace("LongPollingRunner","status changed to "+t+" from "+this.$15),this.$15=t,this.$12(this.$15,this.$16))},a.$26=function(t){this.$22&&t!==this.$16&&(this.$5.debugTrace("LongPollingRunner","request status changed to "+t+" from "+this.$16),this.$16=t,this.$12(this.$15,this.$16))},a.$27=function(){this.$17=0},a.$28=function(){this.$17++,this.$17>=s&&this.$25("LPError")},a.$29=function(){var e,t=(e=o("MqttEnv")).Env.genGk(e.MqttGkNames.mqtt_lp_no_delay),n=e.Env.genGk(e.MqttGkNames.mqtt_ws_polling_enabled),r=e.Env.genGk(e.MqttGkNames.mqtt_fast_lp);if(this.$5.debugTrace("LongPollingRunner","_shouldPoll? pollNow:"+String(t)+" enabled:"+String(n)+" fastPoll:"+String(r)+" hasWSSupport:"+String(this.$4)+" hasWsSuccessBefore:"+String(this.$1)+" failureCount:"+this.$2+" wsFatal:"+String(this.$3)),!n)return!1;if(t)return this.$5.bumpCounter(d+".nd"),!0;if(!this.$4)return this.$5.bumpCounter(d+".na"),!0;if(this.$3)return this.$5.bumpCounter(d+".fatal"),!0;if(this.$1)return!1;if(r){var a=Date.now()-this.$20;if(this.$21===p){if(this.$2>=1)return!0;if(a>u)return this.$5.bumpCounter(d+".fastdelay"),!0}else if(a>c)return this.$5.bumpCounter(d+".regulardelay"),!0}return this.$2>=3?(this.$5.bumpCounter(d+".failure"),!0):!1},a.$30=function(){if(this.$14!=null)return!1;var e=this.$29();return!this.$13&&e&&(this.$5.bumpCounter("polling_kickin"),this.$13=!0,this.$25("LPActive"),this.$27()),this.$13&&!e&&(this.$5.bumpCounter("polling_stopped"),this.$13=!1,this.$25("LPInactive"),this.$27()),e},a.$31=function(){return this.$22?(this.$5.debugTrace("LongPollingRunner","Creating polling client using Fetch API"),new(r("MqttFetchClient"))):(this.$5.debugTrace("LongPollingRunner","Creating regular Polling client"),new(r("MqttLongPollingClient")))},a.$32=function(){this.$5.debugTrace("LongPollingRunner","Poll success"),this.$19.onPollRequestSuccess(),this.$18.reset(),this.$25("LPActive"),this.$27(),o("MqttEnv").Env.configWrite(m,p),this.$26("ReceivingData")},a.$33=function(t){var e=t.map(function(e){return e.topic}).join(",");this.$5.debugTrace("LongPollingRunner","Poll response received, message received:"+e);for(var n of t)this.$19.onPollResponse(n.topic),this.$8(n.topic,n.payload,n.qos)},a.$34=function(){this.$5.debugTrace("LongPollingRunner","Poll finish"),this.$19.onPollFinish(),this.$14&&this.$14.abort(),this.$14=null,this.$23(),this.$26("NotSent")},a.$35=function(t){this.$19.onPollRequestFailed(t),this.$14&&this.$14.abort(),this.$14=null,this.$18(),this.$28(),this.$26("NotSent")},t})();l.default=f}),98);
__d("hasDefaultThreadOneToOneCapability",["FBLogger","LSContactBitOffset","MAWDefaultE2eeOneToOneEligibility","MWGetOtherContactOrSelf","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e==null)return!1;var n=yield o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId})),a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange(n));if(a==null)return r("FBLogger")("messenger_search").warn("Error fetching viewer details"),!1;var i=o("LSContactBitOffset").has(80,a);if(!i)return!1;var l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange(e)),s=yield o("MWGetOtherContactOrSelf").getOtherContactOrSelf(e,n,t),u=s!=null?s:l;return o("MAWDefaultE2eeOneToOneEligibility").isContactDefaultE2eeOneToOneEligible({maybeContact:u})}),s.apply(this,arguments)}l.default=e}),98);
/**
 * License: https://www.facebook.com/legal/license/ZMc_bSwzLKC/
 */
__d("ristretto255-0.1.1",["tweetnacl-1.0.3"],(function(t,n,r,o,a,i,l){var e=r("tweetnacl-1.0.3")();Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(t,n){return new Uint8Array(Array.prototype.slice.call(this,t,n))}});var s={},u=e.lowlevel,c=u.gf([1]);function d(){return[u.gf(),u.gf(),u.gf(),u.gf()]}var m=new Uint8Array([226,242,174,10,106,188,78,113,168,132,169,97,197,0,81,95,88,227,11,106,165,130,221,141,182,166,89,69,224,141,45,118]),p=new Float64Array([235,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function _(e,t,n){for(var r=new Float64Array(64),o=0;o<32;o++)for(var a=0;a<32;a++)r[o+a]+=t[o]*n[a];u.modL(e,r)}function f(e,t){_(e,t,t)}function g(e,t){for(var n=0;n<32;n++)e[n]=t[n];for(var r=251;r>=0;r--)f(e,e),(p[r>>3]>>(r&7)&1)!==0&&_(e,e,t)}var h=u.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),y=u.gf([11803,18811,63136,32407,21693,7032,36364,44957,53757,12789,64713,3900,18604,11139,12735,14185]),C=u.gf([16618,32861,64938,39368,29374,23105,5655,40239,55360,65025,31633,5826,64674,53167,35077,30828]),b=u.gf([49526,37983,2497,57980,13583,52574,41272,11393,57316,48752,43997,39316,57559,45747,29352,656]),v=u.gf([19744,17645,23210,12717,6553,45086,18988,53918,20203,21147,54063,19676,8769,63084,45946,22888]);function S(e){var t=new Uint8Array(32);u.pack25519(t,e);for(var n=1,r=0;r<32;r++)n&=t[r]===0;return n}function R(e,t,n){for(var r,o=-n,a=0;a<16;a++)r=e[a]^t[a],r&=o,e[a]^=r}function L(e){var t=new Uint8Array(32);return u.pack25519(t,e),t[0]&1}function E(e,t){u.Z(e,u.gf(),t)}function k(e,t,n){var r=u.gf();E(r,t),u.set25519(e,t),R(e,r,n)}function I(e,t){k(e,t,L(t))}function T(e,t,n){var r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf();u.S(r,n),u.M(r,r,n),u.S(e,r),u.M(e,e,n),u.M(e,e,t),u.pow2523(e,e),u.M(e,e,r),u.M(e,e,t),u.S(o,e),u.M(o,o,n),u.Z(a,o,t),u.A(i,o,t),u.M(l,t,h),u.A(l,o,l);var c=S(a),d=S(i),m=S(l);return u.M(s,e,h),R(e,s,d|m),I(e,e),c|d}function D(e){var t=u.gf(),n=u.gf(),r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf(),d=u.gf(),m=u.gf(),p=u.gf(),_=u.gf(),f=u.gf(),g=u.gf(),y=u.gf(),b=u.gf(),v=u.gf(),S=0,E=new Uint8Array(32);return u.A(m,e[2],e[1]),u.Z(v,e[2],e[1]),u.M(m,m,v),u.M(p,e[0],e[1]),u.S(_,p),u.M(_,m,_),T(a,c,_),u.M(t,a,m),u.M(n,a,p),u.M(b,t,n),u.M(b,b,e[3]),u.M(i,e[0],h),u.M(l,e[1],h),u.M(o,t,C),u.M(d,e[3],b),S=L(d),f=u.gf(e[0]),g=u.gf(e[1]),r=u.gf(n),R(f,l,S),R(g,i,S),R(r,o,S),u.M(y,f,b),k(g,g,L(y)),u.Z(s,e[2],g),u.M(s,r,s),I(s,s),u.pack25519(E,s),E}function x(e){for(var t=e[31]&127^127,n=30;n>0;n--)t|=e[n]^255;t=(t|0)-1>>8;var r=236-(e[0]|0)>>8;return 1-((t&r|e[0])&1|(e[31]&255)>>7)}function $(e,t){var n=u.gf(),r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf(),d=u.gf(),m=u.gf(),p=u.gf();if(x(t)===0)return-1;u.unpack25519(o,t),u.S(a,o),u.set25519(i,c),u.Z(i,i,a),u.S(s,i),u.set25519(l,c),u.A(l,l,a),u.S(d,l),u.M(m,u.D,s),E(m,m),u.Z(m,m,d),u.M(p,m,d),u.set25519(r,c);var _=T(n,r,p);return u.M(e[0],n,l),u.M(e[1],n,e[0]),u.M(e[1],e[1],m),u.M(e[0],e[0],o),u.A(e[0],e[0],e[0]),I(e[0],e[0]),u.M(e[1],i,e[1]),u.set25519(e[2],c),u.M(e[3],e[0],e[1]),-(1-_|L(e[3])|S(e[1]))}function P(e,t){var n=u.gf(),r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf(),d=u.gf(),m=u.gf(),p=u.gf(),_=u.gf(),f=u.gf(),g=u.gf(),C=u.gf();u.set25519(o,c),u.S(a,t),u.M(a,h,a),u.A(m,a,o),u.M(m,m,b),u.set25519(n,c),E(n,n),u.A(i,a,u.D),u.M(p,a,u.D),u.Z(p,n,p),u.M(p,p,i);var S=1-T(l,m,p);u.M(s,l,t),I(s,s),E(s,s),R(l,s,S),R(n,a,S),u.Z(r,a,o),u.M(r,r,n),u.M(r,r,v),u.Z(r,r,p),u.A(_,l,l),u.M(_,_,p),u.M(f,r,y),u.S(d,l),u.Z(g,o,d),u.A(C,o,d),u.M(e[0],_,C),u.M(e[1],g,f),u.M(e[2],f,C),u.M(e[3],_,g)}function N(e){var t=u.gf(),n=u.gf(),r=d(),o=d();return u.unpack25519(t,e.slice(0,32)),u.unpack25519(n,e.slice(32,64)),P(r,t),P(o,n),u.add(r,o),r}function M(e){var t=d();return u.scalarbase(t,e),D(t)}function w(e,t){var n=d(),r=d();if($(n,t)!==0)throw new Error("Invalid argument");return u.scalarmult(r,n,e),D(r)}function A(e){var t=d();return $(t,e)!==-1}function F(e,t){var n=d(),r=d();if($(n,e)===-1)throw new Error("Invalid argument");if($(r,t)===-1)throw new Error("Invalid argument");return[n,r]}function O(e,t){var n=F(e,t),r=n[0],o=n[1];return u.add(r,o),D(r)}function B(e,t){var n=u.gf();E(n,t[3]);var r=u.gf();E(r,t[0]);var o=[r,t[1],t[2],n];u.add(e,o)}function W(e,t){var n=F(e,t),r=n[0],o=n[1];return B(r,o),D(r)}function q(){var t=e.randomBytes(64);return N(t)}function U(e){return D(N(e))}function V(){return D(q())}function H(){var t=new Uint8Array(32),n=0;do{t=e.randomBytes(32),t[31]&=31;var r=32,o=1;do r--,n|=t[r]-u.L[r]>>8&o,o&=(t[r]^u.L[r])-1>>8;while(r!==0)}while(n===0);return t}function G(e){var t=new Uint8Array(32);return g(t,e),t}function z(e){for(var t=new Float64Array(64),n=0;n<32;n++)t[n]=-e[n];var r=new Uint8Array(32);return u.modL(r,t),r}function j(e,t){for(var n=new Float64Array(64),r=0;r<32;r++)n[r]=e[r]+t[r];var o=new Uint8Array(32);return u.modL(o,n),o}function K(e,t){return j(e,z(t))}function Q(e,t){var n=new Uint8Array(32);return _(n,e,t),n}s.scalarMultBase=M,s.scalarMult=w,s.isValid=A,s.add=O,s.sub=W,s.fromHash=U,s.getRandom=V,s.basePoint=m,s.scalar={},s.scalar.getRandom=H,s.scalar.invert=G,s.scalar.negate=z,s.scalar.add=j,s.scalar.sub=K,s.scalar.mul=Q,s.unsafe={},s.unsafe.point={},s.unsafe.point.toBytes=D,s.unsafe.point.fromBytes=$,s.unsafe.point.fromHash=N,s.unsafe.point.sub=B,s.unsafe.point.add=u.add,s.unsafe.point.scalarMultBase=u.scalarbase,s.unsafe.point.scalarMult=u.scalarmult,s.unsafe.point.getRandom=q,s.unsafe.point.alloc=d,s.unsafe.constants={},s.unsafe.constants.LSub2=p,s.unsafe.constants.sqrtm1=h,s.unsafe.constants.sqrtadm1=y,s.unsafe.constants.invsqrtamd=C,s.unsafe.constants.onemsqd=b,s.unsafe.constants.sqdmone=v,i.exports=s}),34);
__d("ristretto255",["ristretto255-0.1.1"],(function(t,n,r,o,a,i){a.exports=n("ristretto255-0.1.1")}),null);/*FB_PKG_DELIM*/
__d("$",["fb-error-lite"],(function(t,n,r,o,a,i,l){function e(e){return u(e,typeof e=="string"?document.getElementById(e):e)}function s(e){return u(e,typeof e=="string"?document.getElementById(e):e)}function u(e,t){if(!t){var n=r("fb-error-lite").err('Tried to get element with id of "%s" but it is not present on the page',String(e));throw n.taalOpcodes=n.taalOpcodes||[],n.taalOpcodes=[r("fb-error-lite").TAALOpcode.PREVIOUS_FILE],n}return t}e.fromIDOrElement=s,l.default=e}),98);
__d("XAdsCMAccountSettingsPageControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/ads/manager/account/settings/",Object.freeze({tab:"information",highlight_tax_id:!1}),new Set(["highlight_tax_id"])),s=e;l.default=s}),98);
__d("XAdsCMControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/ads/manager/{?page}/{?tab}/",Object.freeze({help_tray:!1,no_redirect:!1,pixel_conversion_dialog:!1,show_edit_modal:!1,is_split_test:!1,m2w:!1,ads_manager_read_regions:!1}),void 0),s=e;l.default=s}),98);
__d("XAdsPEControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/adsmanager/",Object.freeze({_fb_noscript:!1,ad_page_id:0,ads_manager_read_regions:!1,ads_manager_write_regions:!1,adset_page_id:0,auto_transform_dialog:!1,breakdown_regrouping:!1,campaign_page_id:0,creative_page_id:0,duplicate_ad:!1,duplicate_campaign:!1,duplicate_campaign_upgrade:!1,external_creation:!1,external_creation_from_url:!1,focus_mode:!1,from_ads_ai:!1,gtao:!0,insights_section:"performance",insights_subsection:"results",is_mfr_model_shown_by_default:!1,is_redirected_default:!1,is_reload_from_account_change:!1,is_split_test:!1,launch_quick_creation:!1,mdsa_eligibility:!1,recommendation_read_only:!1,root_level:"campaign",show_dfca_create_audience_modal:!1,show_inbox_re_tos:!1,show_inline_verification:!1,show_mm_onboarding_modal:!1,show_review:!1,show_select_post_modal:!1,show_shops_messaging_opt_out_modal:!1,show_view_history:!1,treenav:!0}),void 0),s=e;l.default=s}),98);
__d("AdsManagerConstURIUtils",["AdsManagerReadRegions","XAdsCMAccountSettingsPageControllerRouteBuilder","XAdsCMControllerRouteBuilder","XAdsPEControllerRouteBuilder","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var o=r("XAdsPEControllerRouteBuilder").buildUri(babelHelpers.extends({},n,{nav_entry_point:t!=null?t:void 0,nav_source:e}));return m(o)}function s(e,t,n){var o=r("XAdsCMControllerRouteBuilder").buildUri(babelHelpers.extends({},n,{nav_entry_point:t!=null?t:void 0,nav_source:e}));return m(o)}function u(e,t,n){var o=r("XAdsCMAccountSettingsPageControllerRouteBuilder").buildUri(babelHelpers.extends({},n,{nav_entry_point:t!=null?t:void 0,nav_source:e}));return m(o)}function c(e){return!!(window.location.host.includes("adsmanager")&&!r("AdsManagerReadRegions").excluded_endpoints.some(function(t){return e.includes(t)})&&r("gkx")("1221"))}function d(e,t){return t===void 0&&(t=!0),!!(window.location.host.includes("adsmanager")&&r("gkx")("13382")&&(r("AdsManagerReadRegions").excluded_endpoints.some(function(t){return e.includes(t)})||!t))}function m(e){return c(e.toString())?e.addQueryParam("ads_manager_read_regions","true"):d(e.toString())?e.addQueryParam("ads_manager_write_regions","true"):(e.getQueryParam("ads_manager_read_regions")!==null||e.getQueryParam("ads_manager_write_regions")!==null)&&(e.removeQueryParam("ads_manager_read_regions"),e.removeQueryParam("ads_manager_write_regions")),e}l.getAdsManagerURI=e,l.getXAdsCMControllerURI=s,l.getXAdsCMAccountSettingsPageURI=u,l.shouldRouteToAMReadRegions=c,l.shouldRouteToAMWriteRegions=d}),98);
__d("ArbiterMixin",["Arbiter","guid"],(function(t,n,r,o,a,i,l){var e="arbiter$"+r("guid")(),s=Object.prototype.hasOwnProperty,u={_getArbiterInstance:function(){return s.call(this,e)?this[e]:this[e]=new(r("Arbiter"))},inform:function(t,n,r){return this._getArbiterInstance().inform(t,n,r)},subscribe:function(t,n,r){return this._getArbiterInstance().subscribe(t,n,r)},subscribeOnce:function(t,n,r){return this._getArbiterInstance().subscribeOnce(t,n,r)},unsubscribe:function(t){this._getArbiterInstance().unsubscribe(t)},unsubscribeCurrentSubscription:function(){this._getArbiterInstance().unsubscribeCurrentSubscription()},releaseCurrentPersistentEvent:function(){this._getArbiterInstance().releaseCurrentPersistentEvent()},registerCallback:function(t,n){return this._getArbiterInstance().registerCallback(t,n)},query:function(t){return this._getArbiterInstance().query(t)}},c=u;l.default=c}),98);
__d("CSS",["$","CSSCore"],(function(t,n,r,o,a,i,l){var e=typeof window!="undefined"?window.CSS:null,s="hidden_elem",u=e&&e.supports.bind(e);function c(e,t){return r("$").fromIDOrElement(e).className=t||"",e}function d(e,t){return e instanceof Document||e instanceof Text?!1:o("CSSCore").hasClass(r("$").fromIDOrElement(e),t)}function m(e,t){return e instanceof Document||e instanceof Text?!1:o("CSSCore").matchesSelector(r("$").fromIDOrElement(e),t)}function p(e,t){return o("CSSCore").addClass(r("$").fromIDOrElement(e),t)}function _(e,t){return o("CSSCore").removeClass(r("$").fromIDOrElement(e),t)}function f(e,t,n){return o("CSSCore").conditionClass(r("$").fromIDOrElement(e),t,!!n)}function g(e,t){return f(e,t,!d(e,t))}function h(e){return!d(e,s)}function y(e){return p(e,s)}function C(e){return _(e,s)}function b(e){return g(e,s)}function v(e,t){return f(e,s,!t)}l.supports=u,l.setClass=c,l.hasClass=d,l.matchesSelector=m,l.addClass=p,l.removeClass=_,l.conditionClass=f,l.toggleClass=g,l.shown=h,l.hide=y,l.show=C,l.toggle=b,l.conditionShow=v}),98);
__d("createObjectFrom",[],(function(t,n,r,o,a,i){function e(t,n){if(n===void 0)return e(t,!0);var r={};if(Array.isArray(n))for(var o=t.length-1;o>=0;o--)r[t[o]]=n[o];else for(var a=t.length-1;a>=0;a--)r[t[a]]=n;return r}i.default=e}),66);
__d("isElementNode",["isNode"],(function(t,n,r,o,a,i){function e(e){return n("isNode")(e)&&e.nodeType==1}a.exports=e}),null);
__d("DOMQuery",["CSS","FBLogger","containsNode","createArrayFromMixed","createObjectFrom","ge","ifRequired","isElementNode","isNode"],(function(t,n,r,o,a,i,l){var e=/^\.-?[_a-zA-Z]+[\w-]*$/;function s(e,t){return e.hasAttribute?e.hasAttribute(t):e.getAttribute(t)!==null}function u(e,t){var n=d(e,t);return n[0]}function c(e,t,n){var r=d(e,t),o=d(e,n),a;return r.length===1&&o.length===1&&r[0]===o[0]?a=r:a=r.concat(o),a[0]}function d(t,n){if(!t||!t.getElementsByTagName)return[];for(var a=n.split(" "),i=[t],l=0;l<a.length&&i.length!==0;l++)if(a[l]!==""){var u=a[l],c=a[l],d=[],m=!1;if(u.charAt(0)=="^")if(l===0)m=!0,u=u.slice(1);else return[];u=u.replace(/\[(?:[^=\]]*=(?:\"[^\"]*\"|\'[^\']*\'))?|[.#]/g," $&");var p=u.split(" "),_=p[0]||"*",f=_=="*",g=p[1]&&p[1].charAt(0)=="#";if(g){var h=r("ge")(p[1].slice(1),t,_);if(h&&(f||h.tagName.toLowerCase()==_)){for(var y=0;y<i.length;y++)if(m&&r("containsNode")(h,i[y])){d=[h];break}else if(document==i[y]||r("containsNode")(i[y],h)&&i[y]!==h){d=[h];break}}}else{for(var C=[],b=i.length,v,S=!m&&c.indexOf("[")<0&&document.querySelectorAll,R=0;R<b;R++){if(m){v=[];for(var L=i[R].parentNode;r("isElementNode")(L);)(f||L.tagName.toLowerCase()==_)&&v.push(L),L=L.parentNode}else S?e.test(c)?v=i[R].getElementsByClassName(c.substring(1)):v=i[R].querySelectorAll(c):v=i[R].getElementsByTagName(_);for(var E=v.length,k=0;k<E;k++)C.push(v[k])}if(!S)for(var I=1;I<p.length;I++){var T=p[I],D=T.charAt(0)==".",x=T.substring(1);for(R=0;R<C.length;R++){var $=C[R];if(!(!$||$.nodeType!==1))if(D){o("CSS").hasClass($,x)||delete C[R];continue}else{var P=T.slice(1,T.length-1),N=P.indexOf("=");if(N<0){if(!s($,P)){delete C[R];continue}}else{var M=P.substr(0,N),w=P.substr(N+1);if(w=w.slice(1,w.length-1),$.getAttribute(M)!=w){delete C[R];continue}}}}}for(R=0;R<C.length&&!(C[R]&&(d.push(C[R]),m));R++);}i=d}return i}function m(){var e=window.getSelection;if(e)return e()+"";var t=document.selection;return t?t.createRange().text:null}function p(e,t){return(typeof e=="string"||typeof t=="string")&&r("FBLogger")("dom_query").info("Support for node IDs is deprecated. Use containsNode(ge(<id1>), ge(<id2>)) instead"),r("containsNode")(r("ge")(e),r("ge")(t))}function _(){var e=r("ifRequired")("Quickling",function(e){return e.isActive()?r("ge")("content"):null});return e||document.body}function f(e,t){var n=r("createArrayFromMixed")(t).join("|").toUpperCase().split("|"),o=r("createObjectFrom")(n);return r("isNode")(e)&&e.nodeName in o}function g(e){return f(e,["input","textarea"])||e.contentEditable==="true"}l.find=u,l.findPushSafe=c,l.scry=d,l.getSelection=m,l.contains=p,l.getRootElement=_,l.isNodeOfType=f,l.isInputNode=g}),98);
__d("DOMEvent",["invariant"],(function(t,n,r,o,a,i,l,s){var e=(function(){function e(e){this.event=e||window.event,typeof this.event.srcElement!="unknown"||s(0,5798),this.target=this.event.target||this.event.srcElement}var t=e.prototype;return t.preventDefault=function(){var e=this.event;return e.preventDefault?(e.preventDefault(),"defaultPrevented"in e||(e.defaultPrevented=!0)):e.returnValue=!1,this},t.isDefaultPrevented=function(){var e=this.event;return"defaultPrevented"in e?e.defaultPrevented:e.returnValue===!1},t.stopPropagation=function(){var e=this.event;return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this},t.kill=function(){return this.stopPropagation().preventDefault(),this},e.killThenCall=function(n){return function(t){return new e(t).kill(),n()}},e})();l.default=e}),98);
__d("dedupString",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t;return Object.keys((t={},t[e]=0,t))[0]}i.default=e}),66);
__d("wrapFunction",[],(function(t,n,r,o,a,i){var e={};function l(t,n,r){var o=n in e?e[n](t,r):t;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.apply(this,t)}}l.setWrapper=function(t,n){e[n]=t},i.default=l}),66);
__d("DOMEventListener",["invariant","dedupString","emptyFunction","passiveEventListenerUtil","wrapFunction"],(function(t,n,r,o,a,i,l){var e=n("passiveEventListenerUtil").isPassiveEventListenerSupported,s,u;window.addEventListener?(s=function(r,o,a,i){i===void 0&&(i=!1),a.wrapper=n("wrapFunction")(a,"entry",n("dedupString")("DOMEventListener.add "+o)),r.addEventListener(o,a.wrapper,e?i:!1)},u=function(n,r,o,a){a===void 0&&(a=!1),n.removeEventListener(r,o.wrapper,e?a:!1)}):window.attachEvent?(s=function(t,r,o,a){a===void 0&&(a=!1),o.wrapper=n("wrapFunction")(o,"entry","DOMEventListener.add "+r),t.attachEvent||l(0,2798),t.attachEvent("on"+r,o.wrapper)},u=function(t,n,r,o){o===void 0&&(o=!1),t.detachEvent||l(0,2799),t.detachEvent("on"+n,r.wrapper)}):u=s=n("emptyFunction");var c={add:function(t,n,r,o){return o===void 0&&(o=!1),s(t,n,r,o),{remove:function(){u(t,n,r,typeof o=="boolean"?o:o.capture)}}},remove:u};a.exports=c}),null);
__d("Scroll",[],(function(t,n,r,o,a,i){function e(e,t){return!!t&&(e===t.documentElement||e===t.body)}function l(t){var n,r;if(t==null)return 0;var o=t.ownerDocument;return e(t,o)?(o==null||(n=o.body)==null?void 0:n.scrollTop)||(o==null||(r=o.documentElement)==null?void 0:r.scrollTop)||0:t.scrollTop||0}function s(t,n){if(t!=null){var r=t.ownerDocument;e(t,r)?(r!=null&&r.body&&(r.body.scrollTop=n||0),r!=null&&r.documentElement&&(r.documentElement.scrollTop=n||0)):t.scrollTop=n||0}}function u(t){var n,r,o=t.ownerDocument;return e(t,o)?(o==null||(n=o.body)==null?void 0:n.scrollLeft)||(o==null||(r=o.documentElement)==null?void 0:r.scrollLeft)||0:t.scrollLeft||0}function c(t,n){var r=t.ownerDocument;e(t,r)?(r!=null&&r.body&&(r.body.scrollLeft=n||0),r!=null&&r.documentElement&&(r.documentElement.scrollLeft=n||0)):t.scrollLeft=n||0}i.getTop=l,i.setTop=s,i.getLeft=u,i.setLeft=c}),66);
__d("FlowMigrationUtilsForLegacyFiles",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e="flow_typing_for_legacy_code";function s(t){return r("FBLogger")(e).blameToPreviousFile().event(e+".bad_call").mustfix(t),new Error("["+e+"] "+t)}l.invariantViolation=s}),98);
__d("getDocumentScrollElement",["FlowMigrationUtilsForLegacyFiles"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof navigator!="undefined"&&navigator.userAgent.indexOf("AppleWebKit")>-1;function s(t){var n=t||document;if(n.scrollingElement)return n.scrollingElement;var r=!e&&n.compatMode==="CSS1Compat"?n.documentElement:n.body;return r||o("FlowMigrationUtilsForLegacyFiles").invariantViolation("null result in getDocumentScrollElement"),r}l.default=s}),98);
__d("getObjectValues",[],(function(t,n,r,o,a,i){function e(e){var t=[];for(var n in e)t.push(e[n]);return t}i.default=e}),66);
__d("Event",["$","Arbiter","DOMEvent","DOMEventListener","DOMQuery","DataStore","ErrorGuard","ExecutionEnvironment","FBLogger","Parent","Scroll","TimeSlice","UserAgent","dedupString","fb-error","getDocumentScrollElement","getObjectValues"],(function(t,n,r,o,a,i){var e,l,s=n("fb-error").TAAL,u="Event.listeners";Event.prototype||(Event.prototype={});function c(e){(e.type==="click"||e.type==="mouseover"||e.type==="keydown")&&n("Arbiter").inform("Event/stop",{event:e})}var d=(function(){"use strict";function e(e,t,n){this.cancelBubble=!1,this.target=e,this.type=t,this.data=n}var t=e.prototype;return t.getData=function(){return this.data=this.data||{},this.data},t.stop=function(){return Event.stop(this)},t.prevent=function(){return Event.prevent(this)},t.isDefaultPrevented=function(){return Event.isDefaultPrevented(this)},t.kill=function(){return Event.kill(this)},t.getTarget=function(){return new(n("DOMEvent"))(this).target||null},e})();function m(e){if(e instanceof d)return e;if(e||(!window.addEventListener&&document.createEventObject?e=window.event?document.createEventObject(window.event):{}:e={}),!e._inherits_from_prototype)for(var t in Event.prototype)try{e[t]=Event.prototype[t]}catch(e){}return e}Object.assign(Event.prototype,{_inherits_from_prototype:!0,getRelatedTarget:function(){var e=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return e&&e.nodeType?e:null},getModifiers:function(){var e={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};return e.access=n("UserAgent").isPlatform("Mac OS X")?e.control:e.alt,e.any=e.control||e.shift||e.alt||e.meta,e},isRightClick:function(){return this.which?this.which===3:this.button&&this.button===2},isMiddleClick:function(){return this.which?this.which===2:this.button&&this.button===4},isDefaultRequested:function(){return this.getModifiers().any||this.isMiddleClick()||this.isRightClick()}},d.prototype);var p={listen:function(r,o,a,i,l){if(typeof a=="function"&&(a=n("TimeSlice").guard(a,n("dedupString")("Event.js "+o+" handler"))),!l||typeof l=="boolean"?l={passive:!1}:l={passive:l.passive||!1},!(e||(e=n("ExecutionEnvironment"))).canUseDOM)return new R(r,a,null,o,i,null,l);if(typeof r=="string"&&(r=n("$")(r)),typeof i=="undefined"&&(i=Event.Priority.NORMAL),typeof o=="object"){var t={};for(var c in o)t[c]=Event.listen(r,c,o[c],i,l);return t}if(o.match(/^on/i))throw new TypeError("Bad event name `"+o+"': use `click', not `onclick'.");if(!r){var d=s.blameToPreviousFrame(new Error("Cannot listen to an undefined element."));throw n("FBLogger")("event").catching(d).mustfix("Tried to listen to element of type %s",o),d}if(r.nodeName=="LABEL"&&o=="click"){var m=r.getElementsByTagName("input");r=m.length==1?m[0]:r}else if(r===window&&o==="scroll"){var p=n("getDocumentScrollElement")();p!==document.documentElement&&p!==document.body&&(r=p)}var _=n("DataStore").get(r,u,{}),f=g[o];f&&(o=f.base,f.wrap&&(a=f.wrap(a))),C(r,_,o,l);var h=_[o];i in h||(h[i]=[]);var b=h[i].length,v=new R(r,a,_,o,i,b,l);return h[i][b]=v,h.numHandlers++,l.passive||(h.numNonPassiveHandlers++,y(r,_[o],o)),v},stop:function(t){var e=new(n("DOMEvent"))(t).stopPropagation();return c(e.event),t},prevent:function(t){return new(n("DOMEvent"))(t).preventDefault(),t},isDefaultPrevented:function(t){return new(n("DOMEvent"))(t).isDefaultPrevented(t)},kill:function(t){var e=new(n("DOMEvent"))(t).kill();return c(e.event),!1},getKeyCode:function(t){if(t=new(n("DOMEvent"))(t).event,!t)return!1;switch(t.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34}if(t.shiftKey)switch(t.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null}return t.keyCode},getPriorities:function(){if(!_){var e=n("getObjectValues")(Event.Priority);e.sort(function(e,t){return e-t}),_=e}return _},fire:function(t,n,r){var e=new d(t,n,r),o;do{var a=Event.__getHandler(t,n);a&&(o=a(e)),t=t.parentNode}while(t&&o!==!1&&!e.cancelBubble);return o!==!1},__fire:function(t,n,r){var e=Event.__getHandler(t,n);if(e)return e(m(r))},__getHandler:function(t,r){var e=n("DataStore").get(t,u);return e&&e[r]?e[r].domHandler:t["on"+r]},getPosition:function(t){t=new(n("DOMEvent"))(t).event;var e=n("getDocumentScrollElement")(),r=t.clientX+n("Scroll").getLeft(e),o=t.clientY+n("Scroll").getTop(e);return{x:r,y:o}}};Object.assign(Event,p);var _=null,f=function(t){return function(e){if(!n("DOMQuery").contains(this,e.getRelatedTarget()))return t.call(this,e)}},g;if(window.navigator.msPointerEnabled?g={mousedown:{base:"MSPointerDown"},mousemove:{base:"MSPointerMove"},mouseup:{base:"MSPointerUp"},mouseover:{base:"MSPointerOver"},mouseout:{base:"MSPointerOut"},mouseenter:{base:"MSPointerOver",wrap:f},mouseleave:{base:"MSPointerOut",wrap:f}}:g={mouseenter:{base:"mouseover",wrap:f},mouseleave:{base:"mouseout",wrap:f}},n("UserAgent").isBrowser("Firefox < 52")){var h=function(t,n){n=m(n);for(var e=n.getTarget();e;)Event.__fire(e,t,n),e=e.parentNode};document.documentElement.addEventListener("focus",h.bind(null,"focusin"),!0),document.documentElement.addEventListener("blur",h.bind(null,"focusout"),!0)}var y=function(t,r,o){var e=r.numNonPassiveHandlers==0;e!=r.options.passive&&(r.domHandlerRemover.remove(),r.options.passive=e,r.domHandlerRemover=n("DOMEventListener").add(t,o,r.domHandler,{passive:e}))},C=function(t,r,o,a){if(!(o in r)){var e=n("TimeSlice").guard(S.bind(t,o),n("dedupString")("Event listenHandler "+o));r[o]={numHandlers:0,numNonPassiveHandlers:0,domHandlerRemover:n("DOMEventListener").add(t,o,e,a),domHandler:e,options:a};var i="on"+o;if(t[i]){var l=t===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL,s=t[i];t[i]=null,Event.listen(t,o,s,l,a)}}};function b(e){return e.href.endsWith("#")?e.href===document.location.href||e.href===document.location.href+"#":!1}function v(e,t){return e.nodeName==="INPUT"&&e.type===t}var S=function(t,r){var e=m(r);if(!n("DataStore").get(this,u))throw new Error("Bad listenHandler context.");var o=n("DataStore").get(this,u)[t];if(!o)throw new Error("No registered handlers for `"+t+"'.");if(t=="click"||t=="contextmenu"||t=="mousedown"&&e.which==2){var a=e.getTarget(),i=n("Parent").byTag(a,"a");i instanceof HTMLAnchorElement&&i.href&&b(i)&&!v(a,"file")&&!v(a,"submit")&&e.prevent()}for(var l=Event.getPriorities(),s=0;s<l.length;s++){var c=l[s];if(c in o){for(var d=o[c],p=0;p<d.length;p++)if(d[p]){var _=d[p].fire(this,e);if(_===!1)return e.kill();e.cancelBubble&&e.stop()}}}return e.returnValue};Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1e3};var R=(function(){"use strict";function t(e,t,n,r,o,a,i){this.$1=e,this.$2=t,this.$3=n,this.$7=r,this.$6=o,this.$4=a,this.$5=i}var r=t.prototype;return r.isRemoved=function(){return!this.$3},r.remove=function(){if((e||(e=n("ExecutionEnvironment"))).canUseDOM){if(this.isRemoved()){n("FBLogger")("Event").warn("Event handler has already been removed");return}var t=this.$3[this.$7];t.numHandlers<=1?(t.domHandlerRemover.remove(),delete this.$3[this.$7]):(delete t[this.$6][this.$4],t.numHandlers--,this.$5.passive||(t.numNonPassiveHandlers--,y(this.$1,this.$3[this.$7],this.$7))),this.$3=null}},r.fire=function(r,o){return(e||(e=n("ExecutionEnvironment"))).canUseDOM?(l||(l=n("ErrorGuard"))).applyWithGuard(this.$2,r,[o],{name:"eventhandler:"+o.type+":"+(typeof r.name=="string"?r.name:r.id)}):!0},t})();t.$E=Event.$E=m,a.exports=Event}),null);
__d("TrustedTypesLinkTagHTMLPolicy",["TrustedTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e={createHTML:function(t){if(t==="<link />")return t;throw r("err")("Violating Trusted Type policies. Only works for '<link />' strings.")}},s=r("TrustedTypes").createPolicy("link-tag-html",e),u=s;l.default=u}),98);
__d("getMarkupWrap",["invariant","ExecutionEnvironment","TrustedTypesLinkTagHTMLPolicy"],(function(t,n,r,o,a,i,l,s){var e,u=(e||(e=r("ExecutionEnvironment"))).canUseDOM?document.createElement("div"):null,c={},d=[1,'<select multiple="true">',"</select>"],m=[1,"<table>","</table>"],p=[3,"<table><tbody><tr>","</tr></tbody></table>"],_=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],f={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:d,option:d,caption:m,colgroup:m,tbody:m,tfoot:m,thead:m,td:p,th:p},g=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];g.forEach(function(e){f[e]=_,c[e]=!0});function h(e){var t=e;return u||s(0,144),Object.prototype.hasOwnProperty.call(f,t)||(t="*"),Object.prototype.hasOwnProperty.call(c,t)||(t==="*"?u.innerHTML=r("TrustedTypesLinkTagHTMLPolicy").createHTML("<link />"):u.innerHTML="<"+t+"></"+t+">",c[t]=!u.firstChild),c[t]?f[t]:null}l.default=h}),98);
__d("createNodesFromMarkup",["invariant","ExecutionEnvironment","TrustedTypesNoOpPolicy_DO_NOT_USE","getMarkupWrap"],(function(t,n,r,o,a,i,l,s){var e,u=(e||(e=r("ExecutionEnvironment"))).canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;function d(e){var t=e.match(c);return t&&t[1].toLowerCase()}function m(e,t){var n=u;u||s(0,5001);var o=d(e),a=o&&r("getMarkupWrap")(o);if(a){n.innerHTML=a[1]+e+a[2];for(var i=a[0];i--;)n=n.lastChild}else n.innerHTML=r("TrustedTypesNoOpPolicy_DO_NOT_USE").createHTML(e);var l=n.getElementsByTagName("script");l.length&&(t||s(0,5002),Array.from(l).forEach(t));for(var c=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return c}l.default=m}),98);
__d("evalGlobal",[],(function(t,n,r,o,a,i){function e(e){if(typeof e!="string")throw new TypeError("JS sent to evalGlobal is not a string. Only strings are permitted.");if(e){var t=document.createElement("script");try{t.appendChild(document.createTextNode(e))}catch(n){t.text=e}var n=document.getElementsByTagName("head")[0]||document.documentElement;n.appendChild(t),n.removeChild(t)}}i.default=e}),66);
__d("HTML",["invariant","Bootloader","FBLogger","createNodesFromMarkup","emptyFunction","evalGlobal"],(function(t,n,r,o,a,i,l){var e=/(<(\w+)[^>]*?)\/>/g,s={abbr:!0,area:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0},u=(function(){"use strict";function t(e){if(e&&typeof e.__html=="string"&&(e=e.__html),!(this instanceof t))return e instanceof t?e:new t(e);if(e){var r=typeof e;r==="string"||l(0,277,r)}this.$1=e||"",this.$2=!1,this.$3=null,this.$4=n("emptyFunction"),this.$5=null,this.$6=!1}var r=t.prototype;return r.toString=function(){return this.$1},r.getContent=function(){return this.$1},r.getNodes=function(){return this.$7(),this.$3},r.getRootNode=function(){!this.$5||l(0,278);var e=this.getNodes();if(e.length===1)this.$5=e[0];else{for(var t=document.createDocumentFragment(),n=0;n<e.length;n++)t.appendChild(e[n]);this.$5=t}return this.$5},r.getAction=function(){var e=this;this.$7();var t=function(){e.$4()};return this.$2?function(){setTimeout(t,0)}:t},r.$7=function(){if(this.$3===null){if(!this.$1){this.$3=[];return}var t=this.$1.replace(e,function(e,t,n){return s[n.toLowerCase()]?e:t+"></"+n+">"}),r=null,o=n("createNodesFromMarkup")(t,function(e){n("FBLogger")("staticresources").warn("HTML: encountered script node while parsing, hasSrc=%s, type=%s",!!e.src,e.type==null||e.type===""?"<unknown>":e.type),e.type!=="application/ld+json"&&e.type!=="application/json"&&(r=r||[],r.push(e.src?n("Bootloader").requestJSResource_UNSAFE_NEEDS_REVIEW_BY_SECURITY_AND_XFN.bind(n("Bootloader"),e.src):n("evalGlobal").bind(null,e.innerHTML)),e.parentNode.removeChild(e))});r&&(this.$6=!0,this.$4=function(){for(var e=0;e<r.length;e++)r[e]()}),this.$3=o}},r.setDeferred=function(t){return this.$2=!!t,this},r.hasInlineJs=function(){return this.$6},t.isHTML=function(n){return!!n&&(n instanceof t||n.__html!==void 0)},t.replaceJSONWrapper=function(n){return n&&n.__html!==void 0?new t(n.__html):n},t})();a.exports=u}),null);
__d("TrustedTypesIEFixDOMPolicy",["TrustedTypes"],(function(t,n,r,o,a,i,l){"use strict";var e={createHTML:function(t){return t}},s=r("TrustedTypes").createPolicy("dom-ie-fix",e),u=s;l.default=u}),98);
__d("isScalar",[],(function(t,n,r,o,a,i){function e(e){return/string|number|boolean/.test(typeof e)}i.default=e}),66);
__d("DOM",["$","DOMQuery","Event","FBLogger","FbtResultBase","HTML","TrustedTypesIEFixDOMPolicy","UserAgent_DEPRECATED","createArrayFromMixed","fb-error","isNode","isScalar","isTextNode"],(function(t,n,r,o,a,i,l){var e,s=function(t,n,r){var e=document.createElement(t);return n&&u.setAttributes(e,n),r!=null&&u.setContent(e,r),e},u={find:(e=o("DOMQuery")).find,findPushSafe:e.findPushSafe,scry:e.scry,getSelection:e.getSelection,contains:e.contains,getRootElement:e.getRootElement,isNodeOfType:e.isNodeOfType,isInputNode:e.isInputNode,create:s,setAttributes:function(t,n){n.type&&(t.type=n.type);for(var e in n){var o=n[e],a=/^on/i.test(e);a&&typeof o!="function"&&r("FBLogger")("dom").warn("Handlers passed to DOM.setAttributes must be functions. Handler passed for %s was %s",e,typeof o),e!="type"&&(e=="style"?typeof o=="string"?t.style.cssText=o:Object.assign(t.style,o):a?r("Event").listen(t,e.substr(2),o):e in t?t[e]=o:t.setAttribute&&t.setAttribute(e,o))}},prependContent:function(t,n){if(!t)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));return d(n,t,function(e){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)})},insertAfter:function(t,n){if(!t||!t.parentNode)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var e=t.parentNode;return d(n,e,function(n){t.nextSibling?e.insertBefore(n,t.nextSibling):e.appendChild(n)})},insertBefore:function(t,n){if(!t||!t.parentNode)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var e=t.parentNode;return d(n,e,function(n){e.insertBefore(n,t)})},setContent:function(t,n){if(!t)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));for(;t.firstChild;)c(t.firstChild);return u.appendContent(t,n)},appendContent:function(t,n){if(!t)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));return d(n,t,function(e){t.appendChild(e)})},replace:function(t,n){if(!t||!t.parentNode)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var e=t.parentNode;return d(n,e,function(n){e.replaceChild(n,t)})},remove:function(t){c(typeof t=="string"?r("$")(t):t)},empty:function(t){for(t=typeof t=="string"?r("$")(t):t;t.firstChild;)c(t.firstChild)}};function c(e){e.parentNode&&e.parentNode.removeChild(e)}function d(e,t,n){if(e=r("HTML").replaceJSONWrapper(e),e instanceof r("HTML")&&t.firstChild===null&&e.toString().indexOf("<script")===-1){var a=o("UserAgent_DEPRECATED").ie();if(!a||a>7&&!o("DOMQuery").isNodeOfType(t,["table","tbody","thead","tfoot","tr","select","fieldset"])){var i=a?'<em style="display:none;">&nbsp;</em>':"";return t.innerHTML=r("TrustedTypesIEFixDOMPolicy").createHTML(i+e),a&&t.removeChild(t.firstChild),Array.from(t.childNodes)}}else if(r("isTextNode")(t))return t.data=e,[e];var l=document.createDocumentFragment(),s,u=[],c=[],d=!1;e=r("createArrayFromMixed")(e),e.length===1&&e[0]instanceof r("FbtResultBase")&&(e=e[0].getContents());for(var m=0;m<e.length;m++)if(s=r("HTML").replaceJSONWrapper(e[m]),s instanceof r("HTML")){c.push(s.getAction());var p=s.getNodes();!d&&s.hasInlineJs()&&(r("FBLogger")("staticresources").warn("DOM: adding HTML which contains inline JS"),d=!0);for(var _=0;_<p.length;_++)u.push(p[_]),l.appendChild(p[_])}else if(r("isScalar")(s)||s instanceof r("FbtResultBase")){var f=document.createTextNode(s);u.push(f),l.appendChild(f)}else r("isNode")(s)?(u.push(s),l.appendChild(s)):(Array.isArray(s)&&r("FBLogger")("dom").warn("Nest arrays not supported"),s!==null&&r("FBLogger")("dom").warn("No way to set content %s",s));return n(l),c.forEach(function(e){e()}),u}var m=u;l.default=m}),98);
__d("AsyncDOM",["CSS","DOM","FBLogger"],(function(t,n,r,o,a,i){var e={invoke:function(t,r){for(var e=0;e<t.length;++e){var o=t[e],a=o[0],i=o[1],l=o[2],s=o[3],u=l&&r||null;switch(i&&(u=n("DOM").scry(u||document.documentElement,i)[0]),u||n("FBLogger")("async_dom").warn("Could not find relativeTo element for %s AsyncDOM operation based on selector: %s",a,i),a){case"hide":n("CSS").hide(u);break;case"show":n("CSS").show(u);break;case"setContent":n("DOM").setContent(u,s);break;case"appendContent":n("DOM").appendContent(u,s);break;case"prependContent":n("DOM").prependContent(u,s);break;case"insertAfter":n("DOM").insertAfter(u,s);break;case"insertBefore":n("DOM").insertBefore(u,s);break;case"remove":n("DOM").remove(u);break;case"replace":n("DOM").replace(u,s);break;default:n("FBLogger")("async_dom").warn("Received invalid command %s for AsyncDOM operation",a)}}}};a.exports=e}),null);
__d("AsyncResponse",["invariant","Bootloader","FBLogger","HTML","WebDriverConfig"],(function(t,n,r,o,a,i,l,s){"use strict";var e=(function(){function e(e,t){this.error=0,this.errorSummary=null,this.errorDescription=null,this.errorMid=null,this.onload=null,this.replay=!1,this.payload=t,this.request=e,this.silentError=!1,this.transientError=!1,this.blockedAction=!1,this.is_last=!0,this.responseHeaders=null}var t=e.prototype;return t.getRequest=function(){return this.request},t.getPayload=function(){return this.payload},t.toError=function(){this.error!==0||s(0,5599);var e=this.errorSummary||"",t=this.getErrorDescriptionString()||"",n=new Error(e.toString()+": "+t);return Object.assign(n,{code:this.error,description:this.errorDescription||"",descriptionString:t,response:this,summary:e,isSilent:this.silentError,isTransient:this.transientError,mid:this.errorMid}),n},t.getError=function(){return this.error},t.getErrorSummary=function(){return this.errorSummary},t.setErrorSummary=function(t){return t=t===void 0?null:t,this.errorSummary=t,this},t.getErrorDescription=function(){return this.errorDescription},t.getErrorDescriptionString=function(){var e=this.getErrorDescription();if(e==null)return null;if(r("HTML").isHTML(e)){var t=new(r("HTML"))(e);return t.getRootNode().textContent}return e.toString()},t.getErrorIsWarning=function(){return!!this.errorIsWarning},t.isSilent=function(){return!!this.silentError},t.isTransient=function(){return!!this.transientError},t.isBlockedAction=function(){return!!this.blockedAction},t.getResponseHeader=function(t){var e=this.responseHeaders;if(!e)return null;e=e.replace(/^\n/,""),t=t.toLowerCase();for(var n=e.split("\r\n"),r=0;r<n.length;++r){var o=n[r],a=o.indexOf(": ");if(!(a<=0)){var i=o.substring(0,a).toLowerCase();if(i===t)return o.substring(a+2)}}return null},e.defaultErrorHandler=function(n){try{n.silentError?r("FBLogger")("async_response").catching(n.toError()).warn("default error handler called"):e.verboseErrorHandler(n)}catch(e){alert(n)}},e.verboseErrorHandler=function(t,n){r("Bootloader").loadModules(["ExceptionDialog"],function(e){return e.showAsyncError(t,n)},"AsyncResponse")},e})();l.default=e}),98);
__d("FetchStreamConfig",[],(function(t,n,r,o,a,i){var e=Object.freeze({delim:"/*<!-- fetch-stream -->*/"});i.default=e}),66);
__d("StreamBlockReader",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){var e,l=(function(){function t(t){var r=this;if(!t.getReader)throw new Error("No getReader method found on given object");this.$3=t.getReader(),this.$1="",this.$2=null,this.$4=!1,this.$5="utf-8",this.$6="",this.$9=!1,this.$8=function(){return(e||(e=n("Promise"))).reject("Sorry, you are somehow using this too early.")},this.$7=new(e||(e=n("Promise")))(function(e,t){r.$8=e})}var r=t.prototype;return r.changeEncoding=function(t){if(this.$2)throw new Error("Decoder already in use, encoding cannot be changed");this.$5=t},r.$10=function(){if(!self.TextDecoder)throw new Error("TextDecoder is not supported here");return this.$2||(this.$2=new self.TextDecoder(this.$5)),this.$2},r.$11=function(){if(this.$9)throw new Error("Something else is already reading from this reader");this.$9=!0},r.$12=function(){this.$9=!1},r.isDone=function(){return this.$4},r.$13=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$6!==""){var e=this.$6;return this.$6="",e}if(this.isDone())throw new Error("You cannot read from a stream that is done");var t=yield this.$3.read(),n=t.done,r=t.value;return this.$4=n,n&&this.$8(),r?this.$10().decode(r,{stream:!n}):""});function t(){return e.apply(this,arguments)}return t})(),r.readNextBlock=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$11();var e=this.$13();return this.$12(),e});function t(){return e.apply(this,arguments)}return t})(),r.readUntilStringOrEnd=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return yield this.readUntilOneOfStringOrEnd_DO_NOT_USE([e])});function t(t){return e.apply(this,arguments)}return t})(),r.readUntilStringOrThrow=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!e)throw new Error("cannot read empty string");this.$11();for(var t="",n=0;!this.isDone();)if(t+=yield this.$13(),!(t.length<e.length)){var r=t.substring(n).indexOf(e);if(r!==-1)return r+=n,this.$6=t.substring(r+e.length),this.$12(),t.substring(0,r);n=t.length-e.length+1}throw this.$6=t,this.$12(),new Error("Breakpoint not found")});function t(t){return e.apply(this,arguments)}return t})(),r.readUntilOneOfStringOrEnd_DO_NOT_USE=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){this.$11();for(var t="";!this.isDone();){t+=yield this.$13();for(var n=0;n<e.length;n++){var r=e[n],o=t.indexOf(r);if(o!==-1)return this.$6=t.substring(o+r.length),this.$12(),t.substring(0,o)}}return this.$12(),t});function t(t){return e.apply(this,arguments)}return t})(),r.waitUntilDone=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return this.$7});function t(){return e.apply(this,arguments)}return t})(),t})();i.default=l}),66);
__d("mixin",[],(function(t,n,r,o,a,i){function e(){for(var e=function(){},t=0,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];for(;o[t];){n=o[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e.prototype[i]=n[i]);t+=1}return e}i.default=e}),66);
__d("FetchStreamTransport",["ArbiterMixin","FetchStreamConfig","StreamBlockReader","TimeSlice","URI","asyncToGeneratorRuntime","mixin","nullthrows"],(function(t,n,r,o,a,i,l){var e,s=0,u=(function(t){function o(e){var n;if(!self.ReadableStream||!self.fetch||!Request||!TextDecoder)throw new Error("fetch stream transport is not supported here");return n=t.call(this)||this,n.$FetchStreamTransport$p_6=null,n.$FetchStreamTransport$p_1=e,n.$FetchStreamTransport$p_3=!1,n.$FetchStreamTransport$p_4=!1,n.$FetchStreamTransport$p_5=!1,n.$FetchStreamTransport$p_2=++s,n||babelHelpers.assertThisInitialized(n)}babelHelpers.inheritsLoose(o,t);var a=o.prototype;return a.hasFinished=function(){return this.$FetchStreamTransport$p_5},a.getRequestURI=function(){return new(e||(e=r("URI")))(this.$FetchStreamTransport$p_1).addQueryData({__a:1,__adt:this.$FetchStreamTransport$p_2,__req:"fetchstream_"+this.$FetchStreamTransport$p_2,ajaxpipe_fetch_stream:1})},a.send=function(){if(this.$FetchStreamTransport$p_3)throw new Error("FetchStreamTransport instances cannot be re-used.");this.$FetchStreamTransport$p_3=!0;var e=new Request(this.getRequestURI().toString(),{mode:"same-origin",credentials:"include"});this.$FetchStreamTransport$p_6=r("TimeSlice").getGuardedContinuation("FetchStreamTransport: waiting on first response");var t=self.fetch(e,{redirect:"follow"});this.$FetchStreamTransport$p_7(t)},a.$FetchStreamTransport$p_7=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this,n;try{n=yield e}catch(e){this.abort()}if(!n||!n.body||!n.ok){this.abort();return}for(var o=new(r("StreamBlockReader"))(n.body),a=function*(){var e=yield o.readUntilStringOrEnd(r("FetchStreamConfig").delim);if(t.$FetchStreamTransport$p_4)return 1;r("nullthrows")(t.$FetchStreamTransport$p_6)(function(){var n=JSON.parse(e);o.isDone()||n.finished?t.$FetchStreamTransport$p_5=!0:t.$FetchStreamTransport$p_6=r("TimeSlice").getGuardedContinuation("FetchStreamTransport: waiting on next response"),t.inform("response",n.content)})};!this.$FetchStreamTransport$p_5&&!this.$FetchStreamTransport$p_4&&!(yield*a()););});function t(t){return e.apply(this,arguments)}return t})(),a.abort=function(){var e=this;if(!(this.$FetchStreamTransport$p_4||this.$FetchStreamTransport$p_5))if(this.$FetchStreamTransport$p_4=!0,this.$FetchStreamTransport$p_5=!0,this.$FetchStreamTransport$p_6){var t=this.$FetchStreamTransport$p_6;t(function(){e.inform("abort")})}else this.inform("abort")},o})(r("mixin")(r("ArbiterMixin")));l.default=u}),98);
__d("HTTPErrors",["emptyFunction"],(function(t,n,r,o,a,i,l){function e(e){return{summary:"HTTP Error",description:"Unknown HTTP error #"+e}}var s={get:e,getAll:r("emptyFunction").thatReturns(new Map)},u=s;l.default=u}),98);
__d("SessionName",["SessionNameConfig"],(function(t,n,r,o,a,i){a.exports={getName:function(){return n("SessionNameConfig").seed}}}),null);
__d("bind",[],(function(t,n,r,o,a,i){function e(e,t){var n=Array.prototype.slice.call(arguments,2);if(typeof t!="string")return Function.prototype.bind.apply(t,[e].concat(n));function r(){var r=n.concat(Array.prototype.slice.call(arguments));if(e[t])return e[t].apply(e,r)}return r.toString=function(){return"bound lazily: "+e[t]},r}a.exports=e}),null);
__d("executeAfter",[],(function(t,n,r,o,a,i){function e(e,t,n){return function(){e.apply(n||this,arguments),t.apply(n||this,arguments)}}a.exports=e}),null);
__d("goURI",["cr:8906"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:8906")}),98);
__d("isSparkDotMetaDotComURI",[],(function(t,n,r,o,a,i){var e=new RegExp("(^|\\.)spark\\.meta\\.com$","i"),l=["https"];function s(t){return t.isEmpty()&&t.toString()!=="#"||!t.getDomain()&&!t.getProtocol()?!1:l.indexOf(t.getProtocol())!==-1&&e.test(t.getDomain())}i.default=s}),66);
__d("AsyncRequest",["errorCode","fbt","invariant","AdsManagerConstURIUtils","Arbiter","AsyncDOM","AsyncRequestConfig","AsyncResponse","Bootloader","CSS","DTSG","DTSG_ASYNC","Deferred","Env","ErrorGuard","Event","FBLogger","FetchStreamTransport","HTTPErrors","HasteResponse","PHPQuerySerializer","Parent","Promise","ResourceTimingsStore","ResourceTypes","Run","ScriptPath","ServerJS","SessionName","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","bind","clearTimeout","emptyFunction","executeAfter","fb-error","ge","getAsyncHeaders","getAsyncParams","getErrorSafe","gkx","goURI","isAIDemosDotMetaDotComURI","isArDotMetaDotComURI","isBugBountyDotMetaDotComURI","isDevelopersDotMetaDotComURI","isEmpty","isFacebookURI","isHorizonDotMetaDotComURI","isInternalFBURI","isMessengerDotComURI","isSparkDotMetaDotComURI","isWearablesDotDeveloperDotMetaDotComURI","isWorkDotMetaDotComURI","isWorkplaceDotComURI","isWorkroomsDotComURI","performanceAbsoluteNow","promiseDone","replaceTransportMarkers","setTimeout","setTimeoutAcrossTransitions","uriIsRelativePath"],(function(t,n,r,o,a,i,l,s,u,c){"use strict";var e,d,m,p,_,f,g,h=19e3,y=500,C=1006,b=1004,v=1010,S=new Set([y,v,b,C]),R=!1,L=o("Run").onAfterUnload(function(){R=!0});function E(){return R}function k(e){return"onprogress"in e}function I(e){return"upload"in e&&"onprogress"in e.upload}function T(e){return"withCredentials"in e}function D(e){return e.status in{0:1,12029:1,12030:1,12031:1,12152:1}}function x(e){var t=!e||typeof e=="function";return t||r("FBLogger")("asyncresponse").mustfix("AsyncRequest response handlers must be functions. Pass a function, or use bind() to build one."),t}var $=2,P=$,N=!1;r("Arbiter").subscribe("page_transition",function(e,t){N?N=!1:P=t.id});var M="for (;;);",w=M.length,A=(function(){function t(e){var n=this,a;this._allowIrrelevantRequests=!1,this._delayPreDisplayJS=!1,this._shouldReplaceTransportMarkers=!1,this._dispatchErrorResponse=function(e,t){var o=e.getError();if(n.clearStatusIndicator(),!n._isRelevant()||o===v){n.id,n.abort();return}if(n._isServerDialogErrorCode(o)){var a=o==1357008||o==1357007;n.interceptHandler(e),o==1357007?n._displayServerDialog(e,a,!0):n._displayServerDialog(e,a)}else if(n.initialHandler(e)!==!1){r("clearTimeout")(n.timer);try{t(e)}catch(t){throw n.finallyHandler(e),t}n.finallyHandler(e)}},this._onStateChange=function(){var e=n.transport;if(e)try{t._inflightCount--,o("ResourceTimingsStore").measureResponseReceived(r("ResourceTypes").XHR,n.resourceTimingStoreUID);try{e.getResponseHeader("X-FB-Debug")&&(n._xFbServer=e.getResponseHeader("X-FB-Debug"),r("fb-error").ErrorXFBDebug.add(n._xFbServer))}catch(e){}if(e.status>=200&&e.status<300)t.lastSuccessTime=Date.now(),n._handleXHRResponse(e);else if(o("UserAgent_DEPRECATED").webkit()&&typeof e.status=="undefined")n._invokeErrorHandler(1002);else if(r("AsyncRequestConfig").retryOnNetworkError&&D(e)&&n.remainingRetries>0&&!n._requestTimeout){n.remainingRetries--,delete n.transport,n.send(!0);return}else n._invokeErrorHandler();n.getOption("asynchronous_DEPRECATED")!==!1&&delete n.transport}catch(e){if(E())return;if(delete n.transport,n.remainingRetries>0)n.remainingRetries--,n.send(!0);else{if(!n.getOption("suppressErrorAlerts")){var a=r("getErrorSafe")(e);r("FBLogger")("AsyncRequest").catching(a).mustfix("AsyncRequest exception when attempting to handle a state change")}n._invokeErrorHandler(1007)}}},this._handleTimeout=function(){n.continuation.last(function(){n._requestTimeout=!0;var e=n.timeoutHandler;n.abandon(),e&&e(n),r("setTimeout")(function(){r("Arbiter").inform("AsyncRequest/timeout",{request:n})},0)})},this.continuation=r("TimeSlice").getPlaceholderReusableContinuation(),this.transport=null,this.method="POST",this.uri="",this.timeout=null,this.timer=null,this.initialHandler=a=r("emptyFunction"),this.handler=null,this.uploadProgressHandler=null,this.errorHandler=r("AsyncResponse").defaultErrorHandler,this.transportErrorHandler=null,this.timeoutHandler=null,this.interceptHandler=a,this.finallyHandler=a,this.abortHandler=a,this.serverDialogCancelHandler=null,this.relativeTo=null,this.statusElement=null,this.statusClass="",this.data={},this.headers={},this.file=null,this.context={},this.readOnly=!1,this.writeRequiredParams=[],this.remainingRetries=0,this.userActionID="-",this.resourceTimingStoreUID=o("ResourceTimingsStore").getUID(r("ResourceTypes").XHR,e!=null?e.toString():""),this.flushedResponseTextParseIndex=0,this.option={asynchronous_DEPRECATED:!0,suppressErrorHandlerWarning:!1,suppressEvaluation:!1,suppressErrorAlerts:!1,retries:0,bundle:!1,handleErrorAfterUnload:!1,useFetchTransport:!1},this.transportErrorHandler=r("bind")(this,"errorHandler"),e!==void 0&&this.setURI(e),this.setAllowCrossPageTransition(r("AsyncRequestConfig").asyncRequestsSurviveTransitionsDefault||!1)}var a=t.prototype;return a._dispatchResponse=function(t){if(this.clearStatusIndicator(),!this._isRelevant()){this._invokeErrorHandler(v);return}if(this.initialHandler(t)!==!1){r("clearTimeout")(this.timer);var e,n=this.getHandler();if(n)try{e=this._shouldSuppressJS(n(t))}catch(e){throw t.is_last&&this.finallyHandler(t),e}e||this._handleJSResponse(t),t.is_last&&this.finallyHandler(t)}},a._shouldSuppressJS=function(n){return n===t.suppressOnloadToken},a._handlePreDisplayServerJS=function(t,n){var e=!1,o=[],a=function(){if(e)return r("FBLogger")("AsyncResponse").warn("registerToBlockDisplayUntilDone_DONOTUSE called after AsyncResponse display started. This is a no-op."),function(){};var t,n=new(r("Deferred"));return o.push(n.getPromise()),r("TimeSlice").guard(function(){t&&r("clearTimeout")(t),n.resolve()},"AsyncRequestDisplayBlockingEvent",{propagationType:r("TimeSlice").PropagationType.EXECUTION})};return t.handle(n,{bigPipeContext:{registerToBlockDisplayUntilDone_DONOTUSE:a}}),e=!0,o},a._hasEvalDomOp=function(t){return t&&t.length?t.some(function(e){return e[0]==="eval"}):!1},a._handleJSResponse=function(t){var e=this.getRelativeTo(),n=t.domops,a=t.dtsgToken,i=t.dtsgAsyncGetToken,l=t.jsmods,s,u=t.savedServerJSInstance;if(u&&u instanceof r("ServerJS")?s=u:s=new(r("ServerJS")),s.setRelativeTo(e),l){var c={define:l.define,instances:l.instances,markup:l.markup};delete l.define,delete l.instances,delete l.markup,this._hasEvalDomOp(n)&&(c.elements=l.elements,delete l.elements),s.handle(c)}var d=new(m||(m=r("URI")))(this.uri);(!d.getDomain()&&!d.getProtocol()||document.location.origin===d.getOrigin())&&(a&&o("DTSG").setToken(a),i&&o("DTSG_ASYNC").setToken(i)),n&&(g||(g=r("ErrorGuard"))).applyWithGuard(function(){return o("AsyncDOM").invoke(n,e)},null,[],{errorType:"warn"}),l&&s.handle(l),this._handleJSRegisters(t,"onload"),this._handleJSRegisters(t,"onafterload")},a._handleJSRegisters=function(t,n){var e=t[n];if(e)for(var o=0;o<e.length;o++){var a=null,i=e[o],l=i.match(/^\"caller:([^\"]+?)\";(.*)/);l!=null&&(a=l[1],i=l[2]),(g||(g=r("ErrorGuard"))).applyWithGuard(new Function(i),this,[]),r("FBLogger")("comet_infra").info("Detected dynamic new Function(...) call in AsyncRequest._handleJSRegisters(...).",new(m||(m=r("URI")))(this.uri).getPath(),a)}},a.invokeResponseHandler=function(t){var e=this;if(typeof t.redirect!="undefined"){r("setTimeout")(function(){e.setURI(t.redirect,!0).send()},0);return}if(t.bootloadOnly!==void 0){var a=typeof t.bootloadOnly=="string"?JSON.parse(t.bootloadOnly):t.bootloadOnly,i=function(t){r("TimeSlice").guard(function(){r("Bootloader").loadPredictedResourceMap(t)},"Bootloader.loadPredictedResourceMap",{root:!0})()};for(var l of a)i(l);return}if(!(!this.handler&&!this.errorHandler&&!this.transportErrorHandler&&!this.preBootloadHandler&&this.initialHandler===r("emptyFunction")&&this.finallyHandler===r("emptyFunction"))){var s=t.asyncResponse;if(typeof s!="undefined"){var u,c;if(!this._isRelevant()){this._invokeErrorHandler(v);return}s.updateScriptPath&&r("ScriptPath").set(s.updateScriptPath.path,s.updateScriptPath.token,s.updateScriptPath.extra_info),s.lid&&(this._responseTime=Date.now(),this.lid=s.lid),o("HasteResponse").handleSRPayload((u=s.hsrp)!=null?u:{});var m,_;if(s.getError()&&!s.getErrorIsWarning()){var f=this.getErrorHandler().bind(this);m=(g||(g=r("ErrorGuard"))).guard(this._dispatchErrorResponse,{name:"AsyncRequest#_dispatchErrorResponse for "+this.getURI()}),m=m.bind(this,s,f),_="error"}else{m=(g||(g=r("ErrorGuard"))).guard(this._dispatchResponse.bind(this),{name:"AsyncRequest#_dispatchResponse for "+this.getURI()}),m=m.bind(this,s),_="response";var h=s.domops;if(!this._delayPreDisplayJS&&s.jsmods&&s.jsmods.pre_display_requires&&!this._hasEvalDomOp(h)){var y=s.jsmods,C={define:y.define,instances:y.instances,markup:y.markup};delete y.define,delete y.instances,delete y.markup,C.pre_display_requires=y.pre_display_requires,delete y.pre_display_requires;var b=new(r("ServerJS"));b.setRelativeTo(this.getRelativeTo()),s.savedServerJSInstance=b;var S=this._handlePreDisplayServerJS(b,C);if(S&&S.length){var R=m;m=function(){r("promiseDone")((d||(d=n("Promise"))).all(S).then(R))}}}}var L=(p||(p=r("performanceAbsoluteNow")))();m=r("executeAfter")(m,function(){r("Arbiter").inform("AsyncRequest/"+_,{request:e,response:s,ts:L})}),this.preBootloadHandler&&this.preBootloadHandler(s),r("Bootloader").loadResources((c=s.allResources)!=null?c:[],{onAll:r("AsyncRequestConfig").immediateDispatch?m:function(){r("setTimeout")(m,0)}})}else typeof t.transportError!="undefined"?this._xFbServer?this._invokeErrorHandler(1008):this._invokeErrorHandler(1012):this._invokeErrorHandler(1007)}},a._invokeErrorHandler=function(t){var e=this,n=this.transport;if(n){var o;if(this.responseText==="")o=1002;else if(this._requestAborted)o=1011;else{try{o=t||n.status||b}catch(e){o=1005}navigator.onLine===!1&&(o=C)}var a,i,l=!0;if(o===C)i=u._(/*BTDS*/"Sem conex\u00e3o de rede"),a=u._(/*BTDS*/"Seu navegador parece estar offline. Verifique sua conex\u00e3o com a internet e tente novamente.");else if(o>=300&&o<=399){i=u._(/*BTDS*/"Redirecionamento"),a=u._(/*BTDS*/"Seu acesso ao Facebook foi redirecionado ou bloqueado por terceiros no momento, entre em contato com seu provedor de servi\u00e7os ou recarregue.");var s=n.getResponseHeader("Location");s&&r("goURI")(s,!0),l=!0}else i=u._(/*BTDS*/"Opa!"),a=u._(/*BTDS*/"Ocorreu um erro. Estamos trabalhando para corrigi-lo o mais r\u00e1pido poss\u00edvel. Voc\u00ea pode tentar novamente.");var c=new(r("AsyncResponse"))(this,n),d=n.getResponseHeader("Error-Mid");if(Object.assign(c,{error:o,errorSummary:i,errorDescription:a,silentError:l,errorMid:d}),r("setTimeout")(function(){r("Arbiter").inform("AsyncRequest/error",{request:e,response:c})},0),!(E()&&!this.getOption("handleErrorAfterUnload"))){var m=r("FBLogger")("asyncresponse");if(d!=null&&(m=m.addMetadata("OPES","MID",d)),!this.transportErrorHandler){m.mustfix("Async request to %s failed with a %d error, but there was no error handler available to deal with it.",this.getURI(),o);return}var p=this.getTransportErrorHandler().bind(this);this.getOption("suppressErrorAlerts")||S.has(o)?S.has(o)&&m.addToCategoryKey(String(o)).warn("Async request failed with error %s: %s when requesting %s",o,a.toString(),this.getURI()):m.addToCategoryKey(String(o)).mustfix("Async request failed with error %s: %s when requesting %s",o,a.toString(),this.getURI()),(g||(g=r("ErrorGuard"))).applyWithGuard(this._dispatchErrorResponse,this,[c,p])}}},a._isServerDialogErrorCode=function(t){return t==1357008||t==1357007||t==1357041||t==1442002||t==1357001},a._displayServerDialog=function(t,n,o){var e=this;o===void 0&&(o=!1);var a=t.getPayload();if(a.__dialog!==void 0){this._displayServerLegacyDialog(t,n);return}var i=a.__dialogx;if(new(r("ServerJS"))().handle(i),a.__should_use_mwa_reauth===!0){r("Bootloader").loadModules(["MWADeveloperReauthBarrier"],function(n){n.registerRequest(a.__dialogID,e,t)},"AsyncRequest");return}r("Bootloader").loadModules(["ConfirmationDialog"],function(n){n.setupConfirmation(t,e,o)},"AsyncRequest")},a._displayServerLegacyDialog=function(t,n){var e=this,o=t.getPayload().__dialog;if(r("gkx")("20935")){var a,i;r("FBLogger")("comet_infra").addMetadata("COMET_INFRA","ERROR_CODE",t.getError().toString()).addMetadata("COMET_INFRA","ERROR_URL",(a=(i=t.request)==null?void 0:i.getURI())!=null?a:"unknown").mustfix("AsyncRequest._displayServerLegacyDialog called in Comet")}r("Bootloader").loadModules(["Dialog"],function(r){var a=new r(o);n&&a.setHandler(e._displayConfirmationHandler.bind(e,a)),a.setCancelHandler(function(){var n=e.getServerDialogCancelHandler();try{n&&n(t)}catch(e){throw e}finally{e.finallyHandler(t)}}).setCausalElement(e.relativeTo).show()},"AsyncRequest")},a._displayConfirmationHandler=function(t){this.data.confirmed=1,Object.assign(this.data,t.getFormData()),this.send()},a.$1=function(t){t.subscribe("response",this._handleJSONPResponse.bind(this)),t.subscribe("abort",this._handleJSONPAbort.bind(this)),this.transport=t},a._handleJSONPResponse=function(t,n){var e=this.transport;if(e){n.bootloadOnly||(this.is_first=this.is_first===void 0);var r=this._interpretResponse(n);r.asyncResponse&&(r.asyncResponse.is_first=this.is_first,r.asyncResponse.is_last=e.hasFinished()),this.invokeResponseHandler(r),e.hasFinished()&&delete this.transport}},a._handleJSONPAbort=function(){this._invokeErrorHandler(),delete this.transport},a._handleXHRResponse=function(t){var e;if(this.getOption("suppressEvaluation"))e={asyncResponse:new(r("AsyncResponse"))(this,t)};else try{this._handleFlushedResponse();var n=t.responseText;n=this._filterOutFlushedText(n);var o=this._unshieldResponseText(n),a=JSON.parse(o);e=this._interpretResponse(a)}catch(t){var i=r("getErrorSafe")(t);e=i.message,r("FBLogger")("async_request").catching(i).warn("Failed to handle response")}this.invokeResponseHandler(e)},a._handleFlushedResponse=function(){var e=this.flushedResponseHandler,t=this.transport;if(e&&t){var n=t.responseText.indexOf(M),r=n===-1?t.responseText.length:n;e(t.responseText.substring(this.flushedResponseTextParseIndex,r)),this.flushedResponseTextParseIndex=r}},a._unshieldResponseText=function(t){if(t.length<=w)throw new Error("Response too short on async");for(var e=0;t.charAt(e)==" "||t.charAt(e)=="\n";)e++;return e&&t.substring(e,e+w)==M&&this.getURI(),t.substring(e+w)},a._filterOutFlushedText=function(t){if(!this.flushedResponseHandler)return t;var e=t.indexOf(M);return e<0?t:t.substr(e)},a._interpretResponse=function(t){if(t.redirect)return{redirect:t.redirect};if(t.bootloadOnly)return{bootloadOnly:t.bootloadOnly};var e=t.error&&this._isServerDialogErrorCode(t.error);this._shouldReplaceTransportMarkers&&t.payload&&!e&&r("replaceTransportMarkers")({relativeTo:this.getRelativeTo(),bigPipeContext:null},t.payload);var n=new(r("AsyncResponse"))(this);if(t.__ar!=1)r("FBLogger")("AsyncRequest").warn("AsyncRequest to endpoint %s returned a JSON response, but it is not properly formatted. The endpoint needs to provide a response using the AsyncResponse class in PHP.",this.getURI()),n.payload=t;else{Object.assign(n,t);var o=this.transport;o&&o.getAllResponseHeaders!==void 0&&(n.responseHeaders=o.getAllResponseHeaders())}return{asyncResponse:n}},a._isMultiplexable=function(){return this.getOption("useFetchTransport")?(r("FBLogger")("AsyncRequest").mustfix("You cannot bundle AsyncRequest that uses iframe transport."),!1):r("isFacebookURI")(new(m||(m=r("URI")))(this.uri))?this.getOption("asynchronous_DEPRECATED")?!0:(r("FBLogger")("AsyncRequest").mustfix("We cannot bundle synchronous AsyncRequests"),!1):(r("FBLogger")("AsyncRequest").mustfix("You can not bundle AsyncRequest sent to non-facebook URIs.  Uri: %s",this.getURI()),!1)},a.handleResponse=function(t){var e=this._interpretResponse(t);this.invokeResponseHandler(e)},a.setMethod=function(t){return this.method=t.toString().toUpperCase(),this},a.getMethod=function(){return this.method},a.setData=function(t){return this.data=t,this},a.setRequestHeader=function(t,n){return this.headers[t]=n,this},a.setRawData=function(t){return this.rawData=t,this},a.getData=function(){return this.data},a.setContextData=function(t,n,r){return r=r===void 0?!0:r,r&&(this.context["_log_"+t]=n),this},a._setUserActionID=function(){this.userActionID=(o("SessionName").getName()||"-")+"/-"},a.setURI=function(t,n){n===void 0&&(n=!1),typeof t=="string"&&t.match(/^\/?u_\d+_\d+/)&&r("FBLogger")("asyncrequest").warn("Invalid URI %s",t);var e=new(m||(m=r("URI")))(t);return this.getOption("useFetchTransport")&&!r("isFacebookURI")(e)?(!n||c(0,45284),this):!this._allowCrossOrigin&&!this.getOption("useFetchTransport")&&!e.isSameOrigin()&&!r("uriIsRelativePath")(e)?(e.toString(),!n||c(0,45285),this):(this._setUserActionID(),!t||e.isEmpty()?(r("FBLogger")("async_request").mustfix("URI cannot be empty"),this):(this.uri=o("ZeroRewrites").rewriteURI(e),this))},a.getURI=function(){return this.uri.toString()},a.delayPreDisplayJS=function(t){return t===void 0&&(t=!0),this._delayPreDisplayJS=t,this},a.setInitialHandler=function(t){return this.initialHandler=t,this},a.setPayloadHandler=function(t){return this.setHandler(function(e){t(e.payload)}),this},a.setHandler=function(t){return x(t)&&(this.handler=t),this},a.setFlushedResponseHandler=function(t){return x(t)&&(this.flushedResponseHandler=t),this},a.getHandler=function(){return this.handler||r("emptyFunction")},a.setProgressHandler=function(t){return x(t)&&(this.progressHandler=t),this},a.setUploadProgressHandler=function(t){return x(t)&&(this.uploadProgressHandler=t),this},a.setErrorHandler=function(t){return x(t)&&(this.errorHandler=t),this},a.setTransportErrorHandler=function(t){return this.transportErrorHandler=t,this},a.getErrorHandler=function(){return this.errorHandler||r("emptyFunction")},a.getTransportErrorHandler=function(){return this.transportErrorHandler||r("emptyFunction")},a.setTimeoutHandler=function(t,n){return x(n)&&(this.timeout=t,this.timeoutHandler=n),this},a.resetTimeout=function(t){if(this.timeoutHandler!==null)if(t===null)this.timeout=null,r("clearTimeout")(this.timer),this.timer=null;else{var e=!this._allowCrossPageTransition;this.timeout=t,r("clearTimeout")(this.timer),e?this.timer=r("setTimeout")(this._handleTimeout.bind(this),this.timeout):this.timer=r("setTimeoutAcrossTransitions")(this._handleTimeout.bind(this),this.timeout)}return this},a.setNewSerial=function(){return this.id=++$,this},a.setInterceptHandler=function(t){return this.interceptHandler=t,this},a.setFinallyHandler=function(t){return this.finallyHandler=t,this},a.setAbortHandler=function(t){return this.abortHandler=t,this},a.getServerDialogCancelHandler=function(){return this.serverDialogCancelHandler},a.setServerDialogCancelHandler=function(t){return this.serverDialogCancelHandler=t,this},a.setPreBootloadHandler=function(t){return this.preBootloadHandler=t,this},a.setReadOnly=function(t){return typeof t!="boolean"||(this.readOnly=t),this},a.getReadOnly=function(){return this.readOnly},a.setRelativeTo=function(t){return this.relativeTo=t,this},a.getRelativeTo=function(){return this.relativeTo},a.setStatusClass=function(t){return this.statusClass=t,this},a.setStatusElement=function(t){return this.statusElement=t,this},a.getStatusElement=function(){return r("ge")(this.statusElement)},a._isRelevant=function(){return this._allowCrossPageTransition||!this.id?!0:this.id>P},a.clearStatusIndicator=function(){var e=this.getStatusElement();e&&(o("CSS").removeClass(e,"async_saving"),o("CSS").removeClass(e,this.statusClass))},a._addStatusIndicator=function(){var e=this.getStatusElement();e&&(o("CSS").addClass(e,"async_saving"),o("CSS").addClass(e,this.statusClass))},a.specifiesWriteRequiredParams=function(){var e=this;return this.writeRequiredParams.every(function(t){return e.data[t]=e.data[t]||(_||(_=r("Env")))[t]||(r("ge")(t)||{}).value,e.data[t]!==void 0})},a.setOption=function(t,n){return typeof this.option[t]!="undefined"&&(this.option[t]=n),this},a.getOption=function(t){return this.option[t],this.option[t]},a.abort=function(){var e=this;this.continuation.last(function(){var t=e.transport;if(t){var n=e.getTransportErrorHandler();e.setOption("suppressErrorAlerts",!0),e.setTransportErrorHandler(r("emptyFunction")),e._requestAborted=!0,t.abort(),e.setTransportErrorHandler(n)}e.abortHandler(),B.unschedule(e)})},a.abandon=function(){var e=this;this.continuation.last(function(){var t;r("clearTimeout")(e.timer),e.setOption("suppressErrorAlerts",!0).setHandler(t=r("emptyFunction")).setErrorHandler(t).setTransportErrorHandler(t).setProgressHandler(t).setUploadProgressHandler(t);var n=e.transport;n&&(e._requestAborted=!0,k(n)&&delete n.onprogress,I(n)&&delete n.upload.onprogress,n.abort()),e.abortHandler(),B.unschedule(e)})},a.setNectarModuleDataSafe=function(t){var e=this.setNectarModuleData;return e&&e.call(this,t),this},a.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this.timer&&this.resetTimeout(this.timeout),this},a.getAllowIrrelevantRequests=function(){return this._allowIrrelevantRequests},a.setAllowIrrelevantRequests=function(t){return this._allowIrrelevantRequests=t,this},a.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=t,this},a.setAllowCredentials=function(t){return this._allowCredentials=t,this},a.setIsBackgroundRequest=function(t){return this._isBackgroundRequest=t,this},a.setReplaceTransportMarkers=function(t){return t===void 0&&(t=!0),this._shouldReplaceTransportMarkers=t,this},a.sendAndReturnAbortHandler=function(){var e=this;return this.send(),function(){return e.abort()}},a.send=function(a){var n=this;if(a=a||!1,!this.uri||(!this.errorHandler&&this.getOption("suppressErrorHandlerWarning"),this.getOption("useFetchTransport")&&this.method!="GET"&&this.setMethod("GET"),this.timeoutHandler!==null&&this.getOption("useFetchTransport"),!this.getReadOnly()&&(this.specifiesWriteRequiredParams(),this.method!="POST"))||document.location.search.toString().includes(this.uri.toString())||this.uri.toString().includes("/../")||this.uri.toString().includes("\\../")||this.uri.toString().includes("/..\\")||this.uri.toString().includes("\\..\\"))return!1;if(Object.assign(this.data,r("getAsyncParams")(this.method)),(f||(f=r("isEmpty")))(this.context)||(Object.assign(this.data,this.context),this.data.ajax_log=1),(_||(_=r("Env"))).force_param&&Object.assign(this.data,(_||(_=r("Env"))).force_param),this._setUserActionID(),this.getOption("bundle")&&this._isMultiplexable())return B.schedule(this),!0;this.setNewSerial(),this.getOption("asynchronous_DEPRECATED")||this.uri.addQueryData({__sjax:1}),r("Arbiter").inform("AsyncRequest/send",{request:this,ts:(p||(p=r("performanceAbsoluteNow")))()});var i,l;if(this.method=="GET"&&this.uri.addQueryData({fb_dtsg_ag:o("DTSG_ASYNC").getToken()}),o("AdsManagerConstURIUtils").shouldRouteToAMReadRegions(this.uri.toString())&&this.getReadOnly()&&this.method.toLowerCase()==="get"?this.uri.addQueryData({ads_manager_read_regions:!0}):o("AdsManagerConstURIUtils").shouldRouteToAMWriteRegions(this.uri.toString(),this.getReadOnly())&&this.uri.addQueryData({ads_manager_write_regions:!0}),this.method=="GET"||this.rawData?(i=this.uri.addQueryData(this.data).toString(),l=this.rawData||""):(this._allowCrossOrigin&&this.uri.addQueryData({__a:1}),i=this.uri.toString(),l=(e||(e=o("PHPQuerySerializer"))).serialize(this.data)),this.transport)return!1;if(this.getOption("useFetchTransport"))try{var s=new(r("FetchStreamTransport"))(this.uri);return this.$1(s),this._markRequestSent(),s.send(),!0}catch(e){this.setOption("useFetchTransport",!1)}this.flushedResponseHandler&&(this.flushedResponseTextParseIndex=0);var u;try{u=o("ZeroRewrites").getTransportBuilderForURI(this.uri)()}catch(e){var c=r("FBLogger")("comet_infra").blameToPreviousFrame();throw e instanceof Error?c.catching(e).mustfixThrow(e.message):c.mustfixThrow("Error getting transport builder for URI")}if(!u)return!1;this.schedule("AsyncRequest.send"),u.onreadystatechange=function(){var e=n.transport;e&&e.readyState>=2&&e.readyState<=3&&n._handleFlushedResponse(),u.readyState===4&&n.continuation.last(n._onStateChange)},this.progressHandler&&k(u)&&(u.onprogress=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.continuation(function(){n.progressHandler&&n.progressHandler.apply(n,t)})}),this.uploadProgressHandler&&I(u)&&(u.upload.onprogress=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.continuation(function(){n.uploadProgressHandler&&n.uploadProgressHandler.apply(n,t)})}),a||(this.remainingRetries=this.getOption("retries")),this.transport=u;try{u.open(this.method,i,r("gkx")("25571")?!0:this.getOption("asynchronous_DEPRECATED"))}catch(e){return!1}if(!this.uri.isSameOrigin()&&!r("uriIsRelativePath")(this.uri)&&!this.getOption("useFetchTransport")){if(!T(u))return this.uri.toString(),!1;this._canSendCredentials()&&(u.withCredentials=!0)}this.method=="POST"&&!this.rawData&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._isBackgroundRequest&&u.setRequestHeader("X-FB-BACKGROUND-STATE","1");var d=r("getAsyncHeaders")(this.uri);if(Object.keys(d).forEach(function(e){u&&u.setRequestHeader(e,d[e])}),r("Arbiter").inform("AsyncRequest/will_send",{request:this}),u)for(var m in this.headers)Object.prototype.hasOwnProperty.call(this.headers,m)&&u.setRequestHeader(m,this.headers[m]);return this._addStatusIndicator(),this._markRequestSent(),u.send(l),this.timeout!==null&&this.resetTimeout(this.timeout),t._inflightCount++,!0},a.schedule=function(t){this.continuation=r("TimeSlice").getReusableContinuation(t)},a._canSendCredentials=function(){if(this._allowCredentials===!1)return!1;var e=new(m||(m=r("URI")))(this.uri);return r("isFacebookURI")(e)||r("isInternalFBURI")(e)||r("isMessengerDotComURI")(e)||r("isWorkplaceDotComURI")(e)||r("isWorkroomsDotComURI")(e)||r("isWorkDotMetaDotComURI")(e)||r("isHorizonDotMetaDotComURI")(e)||r("isSparkDotMetaDotComURI")(e)||r("isWearablesDotDeveloperDotMetaDotComURI")(e)||r("isDevelopersDotMetaDotComURI")(e)||r("isArDotMetaDotComURI")(e)||r("isAIDemosDotMetaDotComURI")(e)||r("isBugBountyDotMetaDotComURI")(e)},a._markRequestSent=function(){var e=new(m||(m=r("URI")))(this.getURI()).getQualifiedURI().toString();o("ResourceTimingsStore").updateURI(r("ResourceTypes").XHR,this.resourceTimingStoreUID,e),o("ResourceTimingsStore").annotate(r("ResourceTypes").XHR,this.resourceTimingStoreUID).addStringAnnotation("uri",e),o("ResourceTimingsStore").measureRequestSent(r("ResourceTypes").XHR,this.resourceTimingStoreUID)},a.promisePayload=function(t){return this.exec().then(function(e){return e.payload},function(e){throw e.toError()})},a.exec=function(t){var e=this;if(this.getHandler()!==r("emptyFunction")||this.getErrorHandler()!==r("AsyncResponse").defaultErrorHandler)throw new Error("exec is an async function and does not allow previously set handlers");return new(d||(d=n("Promise")))(function(n,r){e.setHandler(n).setErrorHandler(r).send(t)})},t.bootstrap=function(n,a,i){var e="GET",l=!0,s={};(i||a&&a.rel=="async-post")&&(e="POST",l=!1,n&&(n=new(m||(m=r("URI")))(n),s=n.getQueryData(),n.setQueryData({})));var u=o("Parent").byClass(a,"stat_elem")||a;if(u&&o("CSS").hasClass(u,"async_saving"))return!1;var c=new t(n).setReadOnly(l).setMethod(e).setData(s).setNectarModuleDataSafe(a).setRelativeTo(a);if(a&&(c.setHandler(function(e){r("Event").fire(a,"success",{response:e})}),c.setErrorHandler(function(e){r("Event").fire(a,"error",{response:e})!==!1&&r("AsyncResponse").defaultErrorHandler(e)})),u instanceof HTMLElement){c.setStatusElement(u);var d=u.getAttribute("data-status-class");d&&c.setStatusClass(d)}return c.send(),!1},t.bootstrap_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES=function(n,r,o){t.bootstrap(n,r,o)},t.post=function(n,r){return new t(n).setReadOnly(!1).setMethod("POST").setData(r).send(),!1},t.post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES=function(n,r){t.post(n,r)},t.getLastID=function(){return $},t.ignoreUpdate=function(){N=!0},t.getInflightCount=function(){return this._inflightCount},t})();A._inflightCount=0;var F,O=[],B=(function(){function t(){this._requests=[]}var n=t.prototype;return n.add=function(t){this._requests.push(t)},n.remove=function(t){for(var e=this._requests,n=this._requestsSent,r=0,o=e.length;r<o;r++)e[r]===t&&(n?e[r]=null:e.splice(r,1))},n.send=function(){!this._requestsSent||c(0,4390),this._requestsSent=!0,this._wrapperRequest=null;var t=this._requests;if(t.length){var n;if(t.length===1)n=t[0];else{var r=t.filter(Boolean).map(function(t){return[t.uri.getPath(),(e||(e=o("PHPQuerySerializer"))).serialize(t.data)]});n=this._wrapperRequest=new A("/ajax/proxy.php").setAllowCrossPageTransition(!0).setData({data:r}).setHandler(this._handler.bind(this)).setTransportErrorHandler(this._transportErrorHandler.bind(this))}n&&n.setOption("bundle",!1).send()}},n._handler=function(t){var e=this,n=t.getPayload().responses;if(n.length===this._requests.length){for(var r=function(r){var t=e._requests[r];if(!t)return 0;var o=t.uri.getPath();if(e._wrapperRequest&&(t.id=e._wrapperRequest.id),n[r][0]!==o)return t.continuation.last(function(){t.invokeResponseHandler({transportError:"Wrong response order in bundled request to "+o})}),0;t.continuation.last(function(){t.handleResponse(n[r][1])})},o,a=0;a<this._requests.length;a++)o=r(a);O.splice(O.indexOf(this,1))}},n._transportErrorHandler=function(t){var e=this,n={transportError:t.errorDescription},r=this._requests.filter(Boolean).map(function(t){return e._wrapperRequest&&(t.id=e._wrapperRequest.id),t.invokeResponseHandler(n),t.uri.getPath()});""+r.join(", ")},t.schedule=function(n){return n.schedule("AsyncMultiplex.schedule"),F||(F=new t,O.push(F),r("TimeSlice").guard(function(){r("setTimeoutAcrossTransitions")(function(){F&&(F.send(),F=null)},0)},"AsyncMultiplex.schedule",{propagationType:r("TimeSlice").PropagationType.ORPHAN})()),F.add(n),F},t.unschedule=function(t){O.forEach(function(e){e.remove(t)})},t})();A.suppressOnloadToken={},t.AsyncRequest=A,l.default=A}),226);
__d("XAsyncRequestWWW",["AsyncRequest"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){var t=this;this.setAllowCrossPageTransition=function(e){return t.$1.setAllowCrossPageTransition(e),t},this.$1=new(r("AsyncRequest"))(e)}var t=e.prototype;return t.setURI=function(t){return this.$1.setURI(t),this},t.setTimeoutHandler=function(t,n){return this.$1.setTimeoutHandler(t,n),this},t.setOption=function(t,n){return this.$1.setOption(t,n),this},t.setMethod=function(t){return this.$1.setMethod(t),this},t.setAutoProcess=function(t){return this.$1.setOption("suppressEvaluation",t),this},t.setData=function(t){return this.$1.setData(t),this},t.setHandler=function(t){return this.$1.setHandler(t),this},t.setPayloadHandler=function(t){return this.setHandler(function(e){return t(e.payload)}),this},t.setErrorHandler=function(t){return this.$1.setErrorHandler(t),this},t.send=function(){return this.$1.send(),this},t.abort=function(){this.$1.abort()},t.setReadOnly=function(t){return this.$1.setReadOnly(t),this},t.setAllowCrossOrigin=function(t){return this.$1.setAllowCrossOrigin(t),this},t.setAllowCredentials=function(t){return this.$1.setAllowCredentials(t),this},e})();l.default=e}),98);
__d("goURIWWW",["URI"],(function(t,n,r,o,a,i,l){"use strict";var e;l.default=(e||(e=r("URI"))).go}),98);
__d("useOnRoutableDialogClose",["CometRouteRenderType","react","useCometRouterDispatcher"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e,t){e===void 0&&(e="/"),t===void 0&&(t={});var n=o("CometRouteRenderType").useIsPushView(),a=r("useCometRouterDispatcher")(),i=o("CometRouteRenderType").useIsHosted();return s(function(){if(a)return n?a.popPushView():i?a.goBack():a.go(e,babelHelpers.extends({},t,{target:"self"}))},[t,e,a,i,n])}l.default=u}),98);/*FB_PKG_DELIM*/
__d("IGDSMatureContentOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"M12 23c-2.976 0-3.333-.012-4.531-.065-1.36-.063-2.143-.307-2.672-.513a5.345 5.345 0 0 1-1.95-1.27 5.34 5.34 0 0 1-1.27-1.95c-.205-.528-.45-1.31-.512-2.67C1.012 15.333 1 14.976 1 12s.012-3.333.065-4.531c.063-1.36.307-2.143.513-2.672a5.36 5.36 0 0 1 1.27-1.95 5.367 5.367 0 0 1 1.95-1.27c.528-.205 1.31-.45 2.67-.512C8.667 1.012 9.024 1 12 1s3.333.012 4.531.065c1.36.063 2.143.307 2.672.513.769.296 1.37.689 1.95 1.27.58.578.973 1.18 1.27 1.95.205.528.45 1.31.512 2.67C22.988 8.667 23 9.024 23 12s-.012 3.333-.065 4.531c-.063 1.36-.307 2.143-.513 2.672a5.346 5.346 0 0 1-1.27 1.95 5.332 5.332 0 0 1-1.95 1.27c-.528.205-1.31.45-2.67.512-1.199.053-1.556.065-4.532.065Zm0-20c-2.932 0-3.28.01-4.441.063-1.069.05-1.65.228-2.038.378a3.372 3.372 0 0 0-1.258.82 3.366 3.366 0 0 0-.82 1.26c-.152.387-.33.97-.38 2.039C3.011 8.72 3 9.068 3 12c0 2.932.01 3.28.063 4.441.05 1.069.228 1.65.378 2.038.199.511.436.876.82 1.258.385.387.749.623 1.259.82.388.152.97.33 2.04.38C8.72 20.988 9.068 21 12 21c2.932 0 3.28-.01 4.441-.064 1.069-.048 1.65-.227 2.038-.377a3.362 3.362 0 0 0 1.258-.82 3.36 3.36 0 0 0 .82-1.26c.152-.387.33-.97.38-2.038.052-1.162.063-1.51.063-4.441 0-2.932-.01-3.28-.064-4.441-.048-1.069-.227-1.65-.377-2.038a3.363 3.363 0 0 0-.82-1.258 3.355 3.355 0 0 0-1.259-.82c-.388-.152-.97-.33-2.04-.38C15.28 3.011 14.932 3 12 3Z",fill:"currentColor"}),a=s.jsx("path",{d:"m8.205 13.532-1.403-5.93h-2.4v8.844H6.34V12.24l1.02 4.207h1.688l1.03-4.218v4.218h1.89V7.602H9.615l-1.41 5.93Zm9.746-.682-.061.248c-.261 1.06-.783 1.532-1.693 1.532-1.028 0-1.642-.831-1.642-2.222v-.78c0-1.384.627-2.21 1.675-2.21.863 0 1.415.475 1.638 1.411l.06.251 1.78-.693-.048-.192c-.437-1.79-1.624-2.737-3.43-2.737-2.186 0-3.6 1.627-3.6 4.146v.828c0 2.565 1.367 4.158 3.567 4.158 1.883 0 3.063-.962 3.507-2.86l.045-.19-1.798-.69Z",fill:"currentColor"}),t[0]=n,t[1]=a):(n=t[0],a=t[1]);var i;return t[2]!==e?(i=s.jsxs(r("IGDSSVGIconBase.react"),babelHelpers.extends({},e,{viewBox:"0 0 24 24",children:[n,a]})),t[2]=e,t[3]=i):i=t[3],i}var c=s.memo(u);l.default=c}),98);
__d("IgBloksProfileOverlayFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("676"),s=o("FalcoLoggerInternal").create("ig_bloks_profile_overlay",e),u=s;l.default=u}),98);
__d("PolarisCannesProfileBlock_user.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisCannesProfileBlock_user",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW"},{alias:null,args:null,concreteType:"XDTRelationshipInfoDict",kind:"LinkedField",name:"friendship_status",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"following",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{args:null,kind:"FragmentSpread",name:"PolarisProfileHeaderOptionsButton_user"}],type:"XDTUserDict",abstractKey:null};a.exports=e}),null);
__d("PolarisCannesStrings",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=s._(/*BTDS*/"Esta conta tem conte\u00fado para maiores de 18 anos"),u=s._(/*BTDS*/"O conte\u00fado pode ser inadequado para menores de 18 anos. Voc\u00ea pode pedir a aprova\u00e7\u00e3o do seu pai, m\u00e3e ou respons\u00e1vel para usar a configura\u00e7\u00e3o Mais conte\u00fado."),c=s._(/*BTDS*/"Saiba mais"),d=function(t){return s._(/*BTDS*/"Deixar de seguir {username}",[s._param("username",t)])},m=s._(/*BTDS*/"\u00cdcone de conte\u00fado para maiores de 18 anos"),p=s._(/*BTDS*/"Pode ser que algumas contas nesta conversa compartilhem conte\u00fado para maiores de 18 anos"),_=s._(/*BTDS*/"Alguns conte\u00fados podem n\u00e3o estar vis\u00edveis porque s\u00e3o inadequados para menores de 18 anos. Voc\u00ea pode pedir a aprova\u00e7\u00e3o do seu pai, m\u00e3e ou respons\u00e1vel para usar a configura\u00e7\u00e3o Mais conte\u00fado."),f="https://help.instagram.com/1470609900735343";l.CANNES_TITLE=e,l.CANNES_DESCRIPTION=u,l.CANNES_LEARN_MORE=c,l.getUnfollowUserString=d,l.CANNES_ICON_ALT_TEXT=m,l.CANNES_LEAVE_GROUP_DIALOG_TITLE=p,l.CANNES_LEAVE_GROUP_DIALOG_BODY=_,l.CANNES_HELP_CENTER_LINK=f}),226);
__d("usePolarisLogCannesProfileBlock.react",["PolarisContainerModuleUtils","react","react-compiler-runtime","requireDeferred","usePolarisAnalyticsContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback,u=r("requireDeferred")("IgBloksProfileOverlayFalcoEvent").__setRef("usePolarisLogCannesProfileBlock.react");function c(e){var t=o("react-compiler-runtime").c(5),n=r("usePolarisAnalyticsContext")(),a;t[0]!==n?(a=o("PolarisContainerModuleUtils").getContainerModule(n),t[0]=n,t[1]=a):a=t[1];var i=a,l;return t[2]!==i||t[3]!==e?(l=function(n,r){var t={action:r,containermodule:i,event:n,target_user_id:e,use_case_name:"cannes"};u.onReady(function(e){e.log(function(){return t})})},t[2]=i,t[3]=e,t[4]=l):l=t[4],l}l.default=c}),98);
__d("PolarisCannesProfileBlock.react",["CometRelay","IGDSBox.react","IGDSButton.react","IGDSMatureContentOutline24Icon.react","IGDSText.react","PolarisCannesProfileBlock_user.graphql","PolarisCannesStrings","PolarisContainerModuleUtils","PolarisProfileHeaderOptionsButton.react","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisLogCannesProfileBlock.react","usePolarisUnfollowMutation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useEffect,p={container:{minHeight:"x1lm28p9",$$css:!0},icon:{backgroundColor:"x19g9edo",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"x14z7g9a",width:"x7mnju",$$css:!0}};function _(t){var a,i=o("react-compiler-runtime").c(33),l=t.user,s=o("CometRelay").useFragment(e!==void 0?e:e=n("PolarisCannesProfileBlock_user.graphql"),l),c=r("usePolarisLogCannesProfileBlock.react")(s.pk),d=r("usePolarisAnalyticsContext")(),_;i[0]!==d?(_=o("PolarisContainerModuleUtils").getContainerModule(d),i[0]=d,i[1]=_):_=i[1];var f=_,g;i[2]!==c?(g=function(){c("profile_overlay_impression")},i[2]=c,i[3]=g):g=i[3];var h;i[4]!==f||i[5]!==c?(h=[f,c],i[4]=f,i[5]=c,i[6]=h):h=i[6],m(g,h);var y=r("usePolarisUnfollowMutation")(!0),C=y[0],b=y[1],v;i[7]!==f||i[8]!==c||i[9]!==C||i[10]!==s.pk?(v=function(){var e={container_module:f,target_user_id:s.pk};C(e),c("profile_overlay_action","button_click")},i[7]=f,i[8]=c,i[9]=C,i[10]=s.pk,i[11]=v):v=i[11];var S=v,R;i[12]!==s.username?(R=u.jsx(r("IGDSText.react"),{size:"headline3",weight:"bold",children:s.username}),i[12]=s.username,i[13]=R):R=i[13];var L;i[14]!==s?(L=u.jsx(r("IGDSBox.react"),{marginStart:1,marginTop:1,children:u.jsx(r("PolarisProfileHeaderOptionsButton.react"),{user:s,useVerticalIcon:!0})}),i[14]=s,i[15]=L):L=i[15];var E;i[16]!==R||i[17]!==L?(E=u.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",children:[R,L]}),i[16]=R,i[17]=L,i[18]=E):E=i[18];var k,I;i[19]===Symbol.for("react.memo_cache_sentinel")?(k=u.jsx(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",marginBottom:4,xstyle:p.icon,children:u.jsx(r("IGDSMatureContentOutline24Icon.react"),{alt:o("PolarisCannesStrings").CANNES_ICON_ALT_TEXT,size:24})}),I=u.jsx(r("IGDSText.react"),{size:"headline3",textAlign:"center",weight:"bold",children:o("PolarisCannesStrings").CANNES_TITLE}),i[19]=k,i[20]=I):(k=i[19],I=i[20]);var T;i[21]===Symbol.for("react.memo_cache_sentinel")?(T=u.jsx(r("IGDSBox.react"),{marginTop:3,children:u.jsx(r("IGDSText.react"),{size:"body",textAlign:"center",children:o("PolarisCannesStrings").CANNES_DESCRIPTION})}),i[21]=T):T=i[21];var D;i[22]===Symbol.for("react.memo_cache_sentinel")?(D=u.jsx(r("IGDSBox.react"),{marginTop:4,children:u.jsx(r("IGDSButton.react"),{href:o("PolarisCannesStrings").CANNES_HELP_CENTER_LINK,label:o("PolarisCannesStrings").CANNES_LEARN_MORE,size:"large",target:"_blank"})}),i[22]=D):D=i[22];var x;if(i[23]!==b||i[24]!==S||i[25]!==((a=s.friendship_status)==null?void 0:a.following)||i[26]!==s.username){var $,P;x=(($=s.friendship_status)==null?void 0:$.following)===!0&&u.jsx(r("IGDSBox.react"),{marginTop:1,children:u.jsx(r("IGDSButton.react"),{isLoading:b,label:o("PolarisCannesStrings").getUnfollowUserString(s.username),onClick:S,size:"large",variant:"tertiary"})}),i[23]=b,i[24]=S,i[25]=(P=s.friendship_status)==null?void 0:P.following,i[26]=s.username,i[27]=x}else x=i[27];var N;i[28]!==x?(N=u.jsxs(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",padding:8,xstyle:p.container,children:[k,I,T,D,x]}),i[28]=x,i[29]=N):N=i[29];var M;return i[30]!==N||i[31]!==E?(M=u.jsxs(r("IGDSBox.react"),{paddingX:6,children:[E,N]}),i[30]=N,i[31]=E,i[32]=M):M=i[32],M}l.default=_}),98);
__d("PolarisCannesProfileBlockLoggedOut.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSInfoPanoOutlineIcon.react","IGDSText.react","PolarisAppInstallStrings","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutSignupButton.react","PolarisLoggedOutUpsellStrings","PolarisUA","react","react-compiler-runtime","usePolarisLogCannesProfileBlock.react","usePolarisOpenAppWithHref","usePolarisPageID"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useEffect,d={infoIcon:{backgroundColor:"x19g9edo",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"x14z7g9a",width:"x7mnju",$$css:!0},root:{minHeight:"x1lm28p9",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(17),n=e.userPk,a=r("usePolarisPageID")(),i=r("usePolarisOpenAppWithHref")(),l=i.href,m=i.openApp,p=r("usePolarisLogCannesProfileBlock.react")(n),_,f;t[0]!==p?(_=function(){p("profile_overlay_impression")},f=[p],t[0]=p,t[1]=_,t[2]=f):(_=t[1],f=t[2]),c(_,f);var g;t[3]!==m||t[4]!==a?(g=function(t){t.preventDefault(),o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("app_open","contextual_cta",a),m()},t[3]=m,t[4]=a,t[5]=g):g=t[5];var h=g,y;t[6]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Perfil restrito"),t[6]=y):y=t[6];var C=y,b;t[7]===Symbol.for("react.memo_cache_sentinel")?(b=s._(/*BTDS*/"N\u00e3o dispon\u00edvel para determinados p\u00fablicos. Fa\u00e7a login para continuar."),t[7]=b):b=t[7];var v=b,S,R;t[8]===Symbol.for("react.memo_cache_sentinel")?(S=u.jsx(r("IGDSBox.react"),{alignItems:"center",height:"74",justifyContent:"center",marginBottom:4,xstyle:d.infoIcon,children:u.jsx(r("IGDSInfoPanoOutlineIcon.react"),{alt:C,size:24})}),R=u.jsx(r("IGDSText.react"),{size:"headline2",textAlign:"center",weight:"bold",children:C}),t[8]=S,t[9]=R):(S=t[8],R=t[9]);var L;t[10]===Symbol.for("react.memo_cache_sentinel")?(L=u.jsx(r("IGDSBox.react"),{marginTop:4,children:u.jsx(r("IGDSText.react"),{size:"body",textAlign:"center",children:v})}),t[10]=L):L=t[10];var E;t[11]!==h||t[12]!==l?(E=u.jsx(r("IGDSBox.react"),{marginTop:5,children:o("PolarisUA").isMobile()?u.jsx(r("IGDSButton.react"),{fullWidth:!0,label:o("PolarisAppInstallStrings").OPEN_INSTAGRAM,linkProps:{preventLocalNavigation:!0,url:l},onClick:h,size:"large"}):u.jsx(r("IGDSButton.react"),{label:o("PolarisLoggedOutUpsellStrings").LOGIN_BUTTON_TEXT,onClick:h,size:"large"})}),t[11]=h,t[12]=l,t[13]=E):E=t[13];var k;t[14]===Symbol.for("react.memo_cache_sentinel")?(k=u.jsx(r("IGDSBox.react"),{marginTop:3,children:u.jsx(r("PolarisLoggedOutSignupButton.react"),{ctaTypeV2:"contextual_cta",label:o("PolarisLoggedOutUpsellStrings").SIGNUP_BUTTON_SENTENCE_CASE_TEXT,loginSource:"gated_profile_page",variant:"primary_link"})}),t[14]=k):k=t[14];var I;return t[15]!==E?(I=u.jsxs(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",padding:8,xstyle:d.root,children:[S,R,L,E,k]}),t[15]=E,t[16]=I):I=t[16],I}l.default=m}),226);
__d("PolarisPostActionLoadPostQueryInlineFragment.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"PolarisPostActionLoadPostQueryInlineFragment"};a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles"};a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryInlineMediaFragment.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"PolarisPostActionLoadPostQueryInlineMediaFragment"};a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryInlineSharerFragment.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"PolarisPostActionLoadPostQueryInlineSharerFragment"};a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryLegacyQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24324795310485890"}),null);
__d("PolarisPostActionLoadPostQueryLegacyQuery.graphql",["PolarisPostActionLoadPostQueryLegacyQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:3,kind:"LocalArgument",name:"fetch_related_profile_media_count"},t={defaultValue:null,kind:"LocalArgument",name:"fetch_tagged_user_count"},r={defaultValue:null,kind:"LocalArgument",name:"hoisted_comment_id"},o={defaultValue:null,kind:"LocalArgument",name:"hoisted_reply_id"},a={defaultValue:null,kind:"LocalArgument",name:"shortcode"},i=[{kind:"Variable",name:"shortcode",variableName:"shortcode"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"shortcode",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"thumbnail_src",storageKey:null},d={alias:null,args:null,concreteType:"XDTGraphMediaDimensions",kind:"LinkedField",name:"dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"buttons",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"gating_type",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"center_button",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"post_reveal_cta",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"time_gated",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"misinformation_type",storageKey:null},b={alias:null,args:null,concreteType:"XDTGraphMediaGatingInfo",kind:"LinkedField",name:"gating_info",plural:!1,selections:[m,p,_,f,g,h,y,C],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"fact_check_overall_rating",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},L={alias:null,args:null,concreteType:"XDTGraphMediaFactCheck",kind:"LinkedField",name:"fact_check_information",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaFactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[S,R,{alias:null,args:null,kind:"ScalarField",name:"appeal_email",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_directly_rated",storageKey:null}],storageKey:null},E={alias:null,args:null,concreteType:"XDTGraphMediaSensitivityFrictionInfo",kind:"LinkedField",name:"sensitivity_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sensitivity_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_primary_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_secondary_button",storageKey:null}],storageKey:null},k={alias:null,args:null,concreteType:"XDTGraphMediaSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_have_sharing_friction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bloks_app_url",storageKey:null}],storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},D={alias:null,args:null,concreteType:"XDTGraphMediaOverlayIconSpec",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"icon_glyph",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon_type",storageKey:null},S,T],storageKey:null},x=[{alias:null,args:null,kind:"ScalarField",name:"button_type",storageKey:null},I,{alias:null,args:null,kind:"ScalarField",name:"secondary_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},D,{alias:null,args:null,concreteType:"XDTGraphMediaOverlayTextColorSpec",kind:"LinkedField",name:"text_color",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"light",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dark",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_text_centered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_chevron",storageKey:null}],$={alias:null,args:null,concreteType:"XDTGraphMediaOverlayInfo",kind:"LinkedField",name:"media_overlay_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"banner",plural:!1,selections:x,storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"buttons",plural:!0,selections:x,storageKey:null},p,D,C,{alias:null,args:null,kind:"ScalarField",name:"overlay_layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"overlay_type",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"bloks_data",storageKey:null}],storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"media_preview",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"display_url",storageKey:null},M={alias:null,args:null,concreteType:"XDTGraphImageResource",kind:"LinkedField",name:"display_resources",plural:!0,selections:[T,{alias:null,args:null,kind:"ScalarField",name:"config_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"config_height",storageKey:null}],storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"is_video",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"tracking_token",storageKey:null},F={alias:null,args:null,concreteType:"XDTGraphUpcomingEventDict",kind:"LinkedField",name:"upcoming_event",plural:!1,selections:[s,f,{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reminder_enabled",storageKey:null}],storageKey:null},O=[{kind:"Variable",name:"first",variableName:"fetch_tagged_user_count"}],B={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"followed_by_viewer",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},V={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"user",plural:!1,selections:[B,W,s,q,R,U],storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},z={alias:null,args:O,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[V,H,G],storageKey:null}],storageKey:null}],storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"is_private",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},Q=[K],X={alias:null,args:null,concreteType:"XDTgraphuser_edge_followed_by_connection",kind:"LinkedField",name:"edge_followed_by",plural:!1,selections:Q,storageKey:null},Y={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:[s,U,{alias:null,args:null,kind:"ScalarField",name:"has_onboarded_to_text_post_app",storageKey:null},q,R,{alias:null,args:null,kind:"ScalarField",name:"blocked_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"restricted_by_viewer",storageKey:null},W,B,{alias:null,args:null,kind:"ScalarField",name:"has_blocked_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_embeds_disabled",storageKey:null},j,{alias:null,args:null,kind:"ScalarField",name:"is_unpublished",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requested_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pass_tiering_recommendation",storageKey:null},{alias:null,args:null,concreteType:"XDTgraphuser_edge_owner_to_timeline_media_connection",kind:"LinkedField",name:"edge_owner_to_timeline_media",plural:!1,selections:Q,storageKey:null},X],storageKey:null},J=[{kind:"Literal",name:"first",value:1}],Z={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"can_see_insights_as_brand",storageKey:null},te={alias:null,args:null,kind:"ScalarField",name:"caption_is_edited",storageKey:null},ne={alias:null,args:null,kind:"ScalarField",name:"has_ranked_comments",storageKey:null},re={alias:null,args:null,kind:"ScalarField",name:"like_and_view_counts_disabled",storageKey:null},oe={alias:null,args:null,concreteType:"XDTPageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null}],storageKey:null},ae={alias:null,args:null,kind:"ScalarField",name:"did_report_as_spam",storageKey:null},ie=[s,q,R,U],le={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:ie,storageKey:null},se={alias:null,args:null,kind:"ScalarField",name:"viewer_has_liked",storageKey:null},ue={alias:null,args:null,concreteType:"XDTgraphcomment_edge_liked_by_connection",kind:"LinkedField",name:"edge_liked_by",plural:!1,selections:Q,storageKey:null},ce={alias:null,args:null,kind:"ScalarField",name:"is_restricted_pending",storageKey:null},de=[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[s,I,Z,ae,le,se,ue,ce],storageKey:null}],me={alias:null,args:[{kind:"Literal",name:"first",value:3}],concreteType:"XDTgraphcomment_edge_threaded_comments_connection",kind:"LinkedField",name:"edge_threaded_comments",plural:!1,selections:[K,oe,{alias:null,args:null,concreteType:"XDTgraphcomment_edge_threaded_comments",kind:"LinkedField",name:"edges",plural:!0,selections:de,storageKey:null}],storageKey:"edge_threaded_comments(first:3)"},pe={alias:null,args:[{kind:"Literal",name:"first",value:24}],concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment_connection",kind:"LinkedField",name:"edge_media_to_parent_comment",plural:!1,selections:[K,oe,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[s,I,Z,ae,le,se,ue,ce,me],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_parent_comment(first:24)"},_e={alias:null,args:[{kind:"Variable",name:"hoisted_comment_id",variableName:"hoisted_comment_id"}],concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment_connection",kind:"LinkedField",name:"edge_media_to_hoisted_comment",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[s,I,Z,ae,le,se,ue,ce,{alias:null,args:[{kind:"Variable",name:"hoisted_reply_id",variableName:"hoisted_reply_id"}],concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply_connection",kind:"LinkedField",name:"edge_comment_to_hoisted_reply",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply",kind:"LinkedField",name:"edges",plural:!0,selections:de,storageKey:null}],storageKey:null},me],storageKey:null}],storageKey:null}],storageKey:null},fe={alias:null,args:[{kind:"Literal",name:"first",value:2}],concreteType:"XDTgraphmediainterface_edge_media_preview_comment_connection",kind:"LinkedField",name:"edge_media_preview_comment",plural:!1,selections:[K,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_comment",kind:"LinkedField",name:"edges",plural:!0,selections:de,storageKey:null}],storageKey:"edge_media_preview_comment(first:2)"},ge={alias:null,args:null,kind:"ScalarField",name:"comments_disabled",storageKey:null},he={alias:null,args:null,kind:"ScalarField",name:"commenting_disabled_for_viewer",storageKey:null},ye={alias:null,args:null,kind:"ScalarField",name:"taken_at_timestamp",storageKey:null},Ce={alias:null,args:[{kind:"Literal",name:"first",value:10}],concreteType:"XDTgraphmediainterface_edge_media_preview_like_connection",kind:"LinkedField",name:"edge_media_preview_like",plural:!1,selections:[K,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_like",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"node",plural:!1,selections:ie,storageKey:null}],storageKey:null}],storageKey:"edge_media_preview_like(first:10)"},be=[s,U],ve={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"sponsor",plural:!1,selections:be,storageKey:null},Se={alias:null,args:null,kind:"ScalarField",name:"is_affiliate",storageKey:null},Re={alias:null,args:null,kind:"ScalarField",name:"is_paid_partnership",storageKey:null},Le={alias:null,args:null,concreteType:"XDTGraphLocation",kind:"LinkedField",name:"location",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"has_public_page",storageKey:null},S,{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_json",storageKey:null}],storageKey:null},Ee={alias:null,args:null,concreteType:"XDTGraphNftAssetInfoType",kind:"LinkedField",name:"nft_asset_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"asset_id",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"shimmer_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_igid",storageKey:null}],storageKey:null},ke={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved",storageKey:null},Ie={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved_to_collection",storageKey:null},Te={alias:null,args:null,kind:"ScalarField",name:"viewer_in_photo_of_you",storageKey:null},De={alias:null,args:null,kind:"ScalarField",name:"viewer_can_reshare",storageKey:null},xe={alias:null,args:null,kind:"ScalarField",name:"is_ad",storageKey:null},$e={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"coauthor_producers",plural:!0,selections:ie,storageKey:null},Pe={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"pinned_for_users",plural:!0,selections:ie,storageKey:null},Ne={alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},Me=[Ne],we={kind:"InlineFragment",selections:Me,type:"XDTGraphImage",abstractKey:null},Ae={alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_related_profiles_connection",kind:"LinkedField",name:"edge_related_profiles",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_related_profiles",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"node",plural:!1,selections:[s,B,j,q,R,U,X,{alias:null,args:[{kind:"Variable",name:"first",variableName:"fetch_related_profile_media_count"}],concreteType:"XDTgraphuser_edge_owner_to_timeline_media_connection",kind:"LinkedField",name:"edge_owner_to_timeline_media",plural:!1,selections:[K,{alias:null,args:null,concreteType:"XDTgraphuser_edge_owner_to_timeline_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,s,u,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_like_connection",kind:"LinkedField",name:"edge_media_preview_like",plural:!1,selections:Q,storageKey:null},{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_comment_connection",kind:"LinkedField",name:"edge_media_preview_comment",plural:!1,selections:Q,storageKey:null},c,{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:be,storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaGatingInfo",kind:"LinkedField",name:"gating_info",plural:!1,selections:[m,p,_,f,g,h,y],storageKey:null},k,$,w,we,{kind:"InlineFragment",selections:Me,type:"XDTGraphSidecar",abstractKey:null},{kind:"InlineFragment",selections:Me,type:"XDTGraphVideo",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Fe={alias:null,args:null,concreteType:"XDTGraphDashInfo",kind:"LinkedField",name:"dash_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_dash_eligible",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"number_of_qualities",storageKey:null}],storageKey:null},Oe={alias:null,args:null,kind:"ScalarField",name:"has_audio",storageKey:null},Be={alias:null,args:null,kind:"ScalarField",name:"video_url",storageKey:null},We={alias:null,args:null,kind:"ScalarField",name:"video_view_count",storageKey:null},qe={alias:null,args:null,kind:"ScalarField",name:"video_play_count",storageKey:null},Ue={kind:"InlineFragment",selections:[Ne,Fe,Oe,Be,We,qe,{alias:null,args:null,kind:"ScalarField",name:"encoding_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_published",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_type",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"video_duration",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphClipsMusicAttributionInfo",kind:"LinkedField",name:"clips_music_attribution_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"artist_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"song_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uses_original_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_id",storageKey:null}],storageKey:null}],type:"XDTGraphVideo",abstractKey:null},Ve={kind:"InlineFragment",selections:[Ne,Fe,Oe,Be,We,qe],type:"XDTGraphVideo",abstractKey:null},He={alias:null,args:O,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[V,H,G,s],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o,a],kind:"Fragment",metadata:null,name:"PolarisPostActionLoadPostQueryLegacyQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisPostActionLoadPostQueryInlineFragment",selections:[l,s,u,c,d,b,v,L,E,k,$,P,N,M,w,A,F,z,Y,{alias:null,args:J,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[Z,I],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},ee,te,ne,re,pe,_e,fe,ge,he,ye,Ce,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[ve],storageKey:null}],storageKey:null}],storageKey:null},Se,Re,Le,Ee,se,ke,Ie,Te,De,xe,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[u,c],storageKey:null}],storageKey:null}],storageKey:null},$e,Pe,Ae,Ue,we,{kind:"InlineFragment",selections:[Ne,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,s,u,d,b,v,L,E,k,$,P,N,M,Ve,we,w,A,F,z],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null}],args:null,argumentDefinitions:[{kind:"RootArgument",name:"fetch_related_profile_media_count"},{kind:"RootArgument",name:"fetch_tagged_user_count"},{kind:"RootArgument",name:"hoisted_comment_id"},{kind:"RootArgument",name:"hoisted_reply_id"}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e,t,r,o],kind:"Operation",name:"PolarisPostActionLoadPostQueryLegacyQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[l,{kind:"TypeDiscriminator",abstractKey:"__isXDTGraphMediaInterface"},s,u,c,d,b,v,L,E,k,$,P,N,M,w,A,F,He,Y,{alias:null,args:J,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[Z,I,s],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},ee,te,ne,re,pe,_e,fe,ge,he,ye,Ce,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[ve,s],storageKey:null}],storageKey:null}],storageKey:null},Se,Re,Le,Ee,se,ke,Ie,Te,De,xe,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,u,c,s],storageKey:null}],storageKey:null}],storageKey:null},$e,Pe,Ae,Ue,we,{kind:"InlineFragment",selections:[Ne,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,s,u,d,b,v,L,E,k,$,P,N,M,Ve,we,w,A,F,He],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null}],storageKey:null}]},params:{id:n("PolarisPostActionLoadPostQueryLegacyQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_shortcode_media"]},name:"PolarisPostActionLoadPostQueryLegacyQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryMediaIdQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25617395364531909"}),null);
__d("PolarisPostActionLoadPostQueryMediaIdQuery.graphql",["PolarisPostActionLoadPostQueryMediaIdQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"mediaId"}],t=[{kind:"Variable",name:"media_id",variableName:"mediaId"}],r={alias:null,args:null,kind:"ScalarField",name:"code",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"taken_at",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"inventory_source",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},m={alias:null,args:null,concreteType:"XDTVideoVersion",kind:"LinkedField",name:"video_versions",plural:!0,selections:[u,c,d,{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"is_dash_eligible",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"number_of_qualities",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"video_dash_manifest",storageKey:null},y={alias:null,args:null,concreteType:"XDTImageVersion2",kind:"LinkedField",name:"image_versions2",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTImageCandidate",kind:"LinkedField",name:"candidates",plural:!0,selections:[d,c,u],storageKey:null}],storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"is_paid_partnership",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"is_pending",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"is_unpublished",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"organic_tracking_token",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"is_private",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},T={alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[a,_,p,k,{alias:null,args:null,kind:"ScalarField",name:"is_embeds_disabled",storageKey:null},S,I,v,{alias:null,args:null,concreteType:"XDTRelationshipInfoDict",kind:"LinkedField",name:"friendship_status",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"following",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"blocking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followed_by",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"incoming_request",storageKey:null},k,{alias:null,args:null,kind:"ScalarField",name:"is_restricted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_unconnected",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"outgoing_request",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscribed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_feed_favorite",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"latest_reel_media",storageKey:null}],storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"comments_disabled",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"like_and_view_counts_disabled",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"can_viewer_reshare",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"product_type",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},M={alias:null,args:null,concreteType:"XDTUserTagInfosDict",kind:"LinkedField",name:"usertags",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTUserTagInfoDict",kind:"LinkedField",name:"in",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[o,v,_,p,I],storageKey:null}],storageKey:null}],storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},F={alias:null,args:null,concreteType:"XDTMediaOverlayPayloadSchema",kind:"LinkedField",name:"media_overlay_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTButtonSpec",kind:"LinkedField",name:"banner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"button_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_chevron",storageKey:null},{alias:null,args:null,concreteType:"XDTIconSpec",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"icon_glyph",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon_type",storageKey:null},w,{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_text_centered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"secondary_text",storageKey:null},A,{alias:null,args:null,concreteType:"XDTTextColorSpec",kind:"LinkedField",name:"text_color",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"dark",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"light",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"carousel_parent_id",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"bloks_app_url",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"should_have_sharing_friction",storageKey:null},U={alias:null,args:null,concreteType:"XDTSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[W,q],storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"preview",storageKey:null},H={alias:null,args:null,concreteType:"XDTLocationDict",kind:"LinkedField",name:"location",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"lat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lng",storageKey:null},w,p],storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"has_audio",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"audio_type",storageKey:null},j={alias:null,args:null,concreteType:"XDTClipsAchievementsInfo",kind:"LinkedField",name:"achievements_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"show_achievements",storageKey:null}],storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"should_mute_audio",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason",storageKey:null},X={alias:null,args:null,concreteType:"XDTMusicInfo",kind:"LinkedField",name:"music_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTMusicConsumptionInfoDict",kind:"LinkedField",name:"music_consumption_info",plural:!1,selections:[K,Q],storageKey:null},{alias:null,args:null,concreteType:"XDTTrackData",kind:"LinkedField",name:"music_asset_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"display_artist",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_cluster_id",storageKey:null}],storageKey:null}],storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"original_audio_title",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"audio_asset_id",storageKey:null},Z={alias:null,args:null,concreteType:"XDTOriginalSoundConsumptionInfo",kind:"LinkedField",name:"consumption_info",plural:!1,selections:[Q,{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason_type",storageKey:null}],storageKey:null},ee={alias:null,args:null,concreteType:"XDTClipsAppAttribution",kind:"LinkedField",name:"clips_attribution_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attribution_app_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attribution_app_name",storageKey:null},{alias:null,args:null,concreteType:"XDTClipsPivotPageHeader",kind:"LinkedField",name:"pivot_page_header",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"developer_app_logo_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"media_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"content_url",storageKey:null}],storageKey:null}],storageKey:null},te={alias:null,args:null,concreteType:"XDTCommentDict",kind:"LinkedField",name:"caption",plural:!1,selections:[A],storageKey:null},ne={alias:null,args:null,kind:"ScalarField",name:"main_feed_carousel_starting_media_id",storageKey:null},re={alias:null,args:null,kind:"ScalarField",name:"has_liked",storageKey:null},oe={alias:null,args:null,kind:"ScalarField",name:"commenting_disabled_for_viewer",storageKey:null},ae={alias:null,args:null,kind:"ScalarField",name:"comment_count",storageKey:null},ie={alias:null,args:null,kind:"ScalarField",name:"media_level_comment_controls",storageKey:null},le={alias:null,args:null,kind:"ScalarField",name:"ig_media_sharing_disabled",storageKey:null},se={alias:null,args:null,kind:"ScalarField",name:"audience",storageKey:null},ue={alias:null,args:null,kind:"ScalarField",name:"is_shared_from_basel",storageKey:null},ce={alias:null,args:null,kind:"ScalarField",name:"visibility",storageKey:null},de={alias:null,args:null,kind:"ScalarField",name:"photo_of_you",storageKey:null},me={alias:null,args:null,kind:"ScalarField",name:"carousel_media_count",storageKey:null},pe={alias:null,args:null,kind:"ScalarField",name:"view_count",storageKey:null},_e={alias:null,args:null,kind:"ScalarField",name:"like_count",storageKey:null},fe={alias:null,args:null,kind:"ScalarField",name:"logging_info_token",storageKey:null},ge={alias:null,args:null,concreteType:"XDTSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[q,W],storageKey:null},he={alias:null,args:null,concreteType:"XDTUserTagInfosDict",kind:"LinkedField",name:"usertags",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTUserTagInfoDict",kind:"LinkedField",name:"in",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[o,v,_,p,I,a],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"PolarisPostActionLoadPostQueryMediaIdQuery",selections:[{alias:null,args:t,concreteType:"XDTMediaInfoListResponse",kind:"LinkedField",name:"xdt_api__v1__media__media_id_web_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisPostActionLoadPostQueryInlineMediaFragment",selections:[{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,a,i,l,s,m,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"facepile_top_likers",plural:!0,selections:[p,o,_],storageKey:null},f,g,h,y,C,{alias:null,args:null,concreteType:"XDTSponsorTag",kind:"LinkedField",name:"sponsor_tags",plural:!0,selections:[b,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"sponsor",plural:!1,selections:[o,_,p,v,S],storageKey:null}],storageKey:null},R,L,E,T,D,x,$,P,N,M,F,{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"carousel_media",plural:!0,selections:[a,o,O,f,h,R,L,y,B,U,V,E,m,F,M],storageKey:null},H,G,{alias:null,args:null,concreteType:"XDTClipsMetadataDict",kind:"LinkedField",name:"clips_metadata",plural:!1,selections:[z,j,X,{alias:null,args:null,concreteType:"XDTOriginalSoundData",kind:"LinkedField",name:"original_sound_info",plural:!1,selections:[Y,K,J,Z,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"ig_artist",plural:!1,selections:[_],storageKey:null}],storageKey:null}],storageKey:null},ee,te,ne,re,oe,ae,ie,le,se,ue,ce,de,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"invited_coauthor_producers",plural:!0,selections:[o],storageKey:null},me,pe,_e,fe,ge],storageKey:null}],args:null,argumentDefinitions:[]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"PolarisPostActionLoadPostQueryMediaIdQuery",selections:[{alias:null,args:t,concreteType:"XDTMediaInfoListResponse",kind:"LinkedField",name:"xdt_api__v1__media__media_id_web_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,a,i,l,s,m,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"facepile_top_likers",plural:!0,selections:[p,o,_,a],storageKey:null},f,g,h,y,C,{alias:null,args:null,concreteType:"XDTSponsorTag",kind:"LinkedField",name:"sponsor_tags",plural:!0,selections:[b,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"sponsor",plural:!1,selections:[o,_,p,v,S,a],storageKey:null}],storageKey:null},R,L,E,T,D,x,$,P,N,he,F,{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"carousel_media",plural:!0,selections:[a,o,O,f,h,R,L,y,B,U,V,E,m,F,he],storageKey:null},H,G,{alias:null,args:null,concreteType:"XDTClipsMetadataDict",kind:"LinkedField",name:"clips_metadata",plural:!1,selections:[z,j,X,{alias:null,args:null,concreteType:"XDTOriginalSoundData",kind:"LinkedField",name:"original_sound_info",plural:!1,selections:[Y,K,J,Z,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"ig_artist",plural:!1,selections:[_,a],storageKey:null}],storageKey:null}],storageKey:null},ee,te,ne,re,oe,ae,ie,le,se,ue,ce,de,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"invited_coauthor_producers",plural:!0,selections:[o,a],storageKey:null},me,pe,_e,fe,ge],storageKey:null}],storageKey:null}]},params:{id:n("PolarisPostActionLoadPostQueryMediaIdQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_api__v1__media__media_id_web_info"]},name:"PolarisPostActionLoadPostQueryMediaIdQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisPostActionLoadPostQueryQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29599222026389233"}),null);
__d("PolarisPostActionLoadPostQueryQuery.graphql",["PolarisPostActionLoadPostQueryQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"fetch_tagged_user_count"},t={defaultValue:null,kind:"LocalArgument",name:"hoisted_comment_id"},r={defaultValue:null,kind:"LocalArgument",name:"hoisted_reply_id"},o={defaultValue:null,kind:"LocalArgument",name:"shortcode"},a=[{kind:"Variable",name:"shortcode",variableName:"shortcode"}],i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"shortcode",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"thumbnail_src",storageKey:null},c={alias:null,args:null,concreteType:"XDTGraphMediaDimensions",kind:"LinkedField",name:"dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"misinformation_type",storageKey:null},_={alias:null,args:null,concreteType:"XDTGraphMediaGatingInfo",kind:"LinkedField",name:"gating_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"buttons",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"gating_type",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"center_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_reveal_cta",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time_gated",storageKey:null},p],storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"fact_check_overall_rating",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},y={alias:null,args:null,concreteType:"XDTGraphMediaFactCheck",kind:"LinkedField",name:"fact_check_information",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaFactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[g,h,{alias:null,args:null,kind:"ScalarField",name:"appeal_email",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_directly_rated",storageKey:null}],storageKey:null},C={alias:null,args:null,concreteType:"XDTGraphMediaSensitivityFrictionInfo",kind:"LinkedField",name:"sensitivity_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sensitivity_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_primary_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_secondary_button",storageKey:null}],storageKey:null},b={alias:null,args:null,concreteType:"XDTGraphMediaSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_have_sharing_friction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bloks_app_url",storageKey:null}],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},R={alias:null,args:null,concreteType:"XDTGraphMediaOverlayIconSpec",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"icon_glyph",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon_type",storageKey:null},g,S],storageKey:null},L=[{alias:null,args:null,kind:"ScalarField",name:"button_type",storageKey:null},v,{alias:null,args:null,kind:"ScalarField",name:"secondary_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},R,{alias:null,args:null,concreteType:"XDTGraphMediaOverlayTextColorSpec",kind:"LinkedField",name:"text_color",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"light",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dark",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_text_centered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_chevron",storageKey:null}],E={alias:null,args:null,concreteType:"XDTGraphMediaOverlayInfo",kind:"LinkedField",name:"media_overlay_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"banner",plural:!1,selections:L,storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"buttons",plural:!0,selections:L,storageKey:null},d,R,p,{alias:null,args:null,kind:"ScalarField",name:"overlay_layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"overlay_type",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"bloks_data",storageKey:null}],storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"media_preview",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"display_url",storageKey:null},T={alias:null,args:null,concreteType:"XDTGraphImageResource",kind:"LinkedField",name:"display_resources",plural:!0,selections:[S,{alias:null,args:null,kind:"ScalarField",name:"config_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"config_height",storageKey:null}],storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"is_video",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"tracking_token",storageKey:null},$={alias:null,args:null,concreteType:"XDTGraphUpcomingEventDict",kind:"LinkedField",name:"upcoming_event",plural:!1,selections:[l,m,{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reminder_enabled",storageKey:null}],storageKey:null},P=[{kind:"Variable",name:"first",variableName:"fetch_tagged_user_count"}],N={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"followed_by_viewer",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},F={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"user",plural:!1,selections:[N,M,l,w,h,A],storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},W={alias:null,args:P,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[F,O,B],storageKey:null}],storageKey:null}],storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},U=[q],V={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:[l,A,w,h,{alias:null,args:null,kind:"ScalarField",name:"blocked_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"restricted_by_viewer",storageKey:null},M,N,{alias:null,args:null,kind:"ScalarField",name:"has_blocked_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_embeds_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_private",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_unpublished",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requested_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pass_tiering_recommendation",storageKey:null},{alias:null,args:null,concreteType:"XDTgraphuser_edge_owner_to_timeline_media_connection",kind:"LinkedField",name:"edge_owner_to_timeline_media",plural:!1,selections:U,storageKey:null},{alias:null,args:null,concreteType:"XDTgraphuser_edge_followed_by_connection",kind:"LinkedField",name:"edge_followed_by",plural:!1,selections:U,storageKey:null}],storageKey:null},H=[{kind:"Literal",name:"first",value:1}],G={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"can_see_insights_as_brand",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"caption_is_edited",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"has_ranked_comments",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"like_and_view_counts_disabled",storageKey:null},X={alias:null,args:null,concreteType:"XDTPageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null}],storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"did_report_as_spam",storageKey:null},J=[l,w,h,A],Z={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:J,storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"viewer_has_liked",storageKey:null},te={alias:null,args:null,concreteType:"XDTgraphcomment_edge_liked_by_connection",kind:"LinkedField",name:"edge_liked_by",plural:!1,selections:U,storageKey:null},ne={alias:null,args:null,kind:"ScalarField",name:"is_restricted_pending",storageKey:null},re=[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[l,v,G,Y,Z,ee,te,ne],storageKey:null}],oe={alias:null,args:[{kind:"Literal",name:"first",value:3}],concreteType:"XDTgraphcomment_edge_threaded_comments_connection",kind:"LinkedField",name:"edge_threaded_comments",plural:!1,selections:[q,X,{alias:null,args:null,concreteType:"XDTgraphcomment_edge_threaded_comments",kind:"LinkedField",name:"edges",plural:!0,selections:re,storageKey:null}],storageKey:"edge_threaded_comments(first:3)"},ae={alias:null,args:[{kind:"Literal",name:"first",value:24}],concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment_connection",kind:"LinkedField",name:"edge_media_to_parent_comment",plural:!1,selections:[q,X,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[l,v,G,Y,Z,ee,te,ne,oe],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_parent_comment(first:24)"},ie={alias:null,args:[{kind:"Variable",name:"hoisted_comment_id",variableName:"hoisted_comment_id"}],concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment_connection",kind:"LinkedField",name:"edge_media_to_hoisted_comment",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[l,v,G,Y,Z,ee,te,ne,{alias:null,args:[{kind:"Variable",name:"hoisted_reply_id",variableName:"hoisted_reply_id"}],concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply_connection",kind:"LinkedField",name:"edge_comment_to_hoisted_reply",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply",kind:"LinkedField",name:"edges",plural:!0,selections:re,storageKey:null}],storageKey:null},oe],storageKey:null}],storageKey:null}],storageKey:null},le={alias:null,args:[{kind:"Literal",name:"first",value:2}],concreteType:"XDTgraphmediainterface_edge_media_preview_comment_connection",kind:"LinkedField",name:"edge_media_preview_comment",plural:!1,selections:[q,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_comment",kind:"LinkedField",name:"edges",plural:!0,selections:re,storageKey:null}],storageKey:"edge_media_preview_comment(first:2)"},se={alias:null,args:null,kind:"ScalarField",name:"comments_disabled",storageKey:null},ue={alias:null,args:null,kind:"ScalarField",name:"commenting_disabled_for_viewer",storageKey:null},ce={alias:null,args:null,kind:"ScalarField",name:"taken_at_timestamp",storageKey:null},de={alias:null,args:[{kind:"Literal",name:"first",value:10}],concreteType:"XDTgraphmediainterface_edge_media_preview_like_connection",kind:"LinkedField",name:"edge_media_preview_like",plural:!1,selections:[q,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_like",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"node",plural:!1,selections:J,storageKey:null}],storageKey:null}],storageKey:"edge_media_preview_like(first:10)"},me={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"sponsor",plural:!1,selections:[l,A],storageKey:null},pe={alias:null,args:null,kind:"ScalarField",name:"is_affiliate",storageKey:null},_e={alias:null,args:null,kind:"ScalarField",name:"is_paid_partnership",storageKey:null},fe={alias:null,args:null,concreteType:"XDTGraphLocation",kind:"LinkedField",name:"location",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"has_public_page",storageKey:null},g,{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_json",storageKey:null}],storageKey:null},ge={alias:null,args:null,concreteType:"XDTGraphNftAssetInfoType",kind:"LinkedField",name:"nft_asset_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"asset_id",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"shimmer_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_igid",storageKey:null}],storageKey:null},he={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved",storageKey:null},ye={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved_to_collection",storageKey:null},Ce={alias:null,args:null,kind:"ScalarField",name:"viewer_in_photo_of_you",storageKey:null},be={alias:null,args:null,kind:"ScalarField",name:"viewer_can_reshare",storageKey:null},ve={alias:null,args:null,kind:"ScalarField",name:"is_ad",storageKey:null},Se={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"coauthor_producers",plural:!0,selections:J,storageKey:null},Re={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"pinned_for_users",plural:!0,selections:J,storageKey:null},Le={alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},Ee={alias:null,args:null,concreteType:"XDTGraphDashInfo",kind:"LinkedField",name:"dash_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_dash_eligible",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"number_of_qualities",storageKey:null}],storageKey:null},ke={alias:null,args:null,kind:"ScalarField",name:"has_audio",storageKey:null},Ie={alias:null,args:null,kind:"ScalarField",name:"video_url",storageKey:null},Te={alias:null,args:null,kind:"ScalarField",name:"video_view_count",storageKey:null},De={alias:null,args:null,kind:"ScalarField",name:"video_play_count",storageKey:null},xe={kind:"InlineFragment",selections:[Le,Ee,ke,Ie,Te,De,{alias:null,args:null,kind:"ScalarField",name:"encoding_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_published",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_type",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"video_duration",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphClipsMusicAttributionInfo",kind:"LinkedField",name:"clips_music_attribution_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"artist_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"song_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uses_original_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_id",storageKey:null}],storageKey:null}],type:"XDTGraphVideo",abstractKey:null},$e={kind:"InlineFragment",selections:[Le],type:"XDTGraphImage",abstractKey:null},Pe={kind:"InlineFragment",selections:[Le,Ee,ke,Ie,Te,De],type:"XDTGraphVideo",abstractKey:null},Ne={alias:null,args:P,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[F,O,B,l],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o],kind:"Fragment",metadata:null,name:"PolarisPostActionLoadPostQueryQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles",selections:[i,l,s,u,c,_,f,y,C,b,E,k,I,T,D,x,$,W,V,{alias:null,args:H,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[G,v],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},z,j,K,Q,ae,ie,le,se,ue,ce,de,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[me],storageKey:null}],storageKey:null}],storageKey:null},pe,_e,fe,ge,ee,he,ye,Ce,be,ve,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[s,u],storageKey:null}],storageKey:null}],storageKey:null},Se,Re,xe,$e,{kind:"InlineFragment",selections:[Le,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,l,s,c,_,f,y,C,b,E,k,I,T,Pe,$e,D,x,$,W],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null}],args:null,argumentDefinitions:[{kind:"RootArgument",name:"fetch_tagged_user_count"},{kind:"RootArgument",name:"hoisted_comment_id"},{kind:"RootArgument",name:"hoisted_reply_id"}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[o,e,t,r],kind:"Operation",name:"PolarisPostActionLoadPostQueryQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[i,{kind:"TypeDiscriminator",abstractKey:"__isXDTGraphMediaInterface"},l,s,u,c,_,f,y,C,b,E,k,I,T,D,x,$,Ne,V,{alias:null,args:H,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[G,v,l],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},z,j,K,Q,ae,ie,le,se,ue,ce,de,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[me,l],storageKey:null}],storageKey:null}],storageKey:null},pe,_e,fe,ge,ee,he,ye,Ce,be,ve,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,s,u,l],storageKey:null}],storageKey:null}],storageKey:null},Se,Re,xe,$e,{kind:"InlineFragment",selections:[Le,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,l,s,c,_,f,y,C,b,E,k,I,T,Pe,$e,D,x,$,Ne],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null}],storageKey:null}]},params:{id:n("PolarisPostActionLoadPostQueryQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_shortcode_media"]},name:"PolarisPostActionLoadPostQueryQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisPostActionLoadPostQuerySharerQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9817375101688294"}),null);
__d("PolarisPostActionLoadPostQuerySharerQuery.graphql",["PolarisPostActionLoadPostQuerySharerQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"mediaId"},t={defaultValue:null,kind:"LocalArgument",name:"shid"},r=[{kind:"Variable",name:"media_id",variableName:"mediaId"},{kind:"Variable",name:"shid",variableName:"shid"}],o={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url_hd",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null};return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"PolarisPostActionLoadPostQuerySharerQuery",selections:[{alias:null,args:r,concreteType:"XDTShidUserResponse",kind:"LinkedField",name:"xdt_get_relationship_for_shid_logged_out",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisPostActionLoadPostQueryInlineSharerFragment",selections:[{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"sender",plural:!1,selections:[o,a,i,l],storageKey:null}],args:null,argumentDefinitions:[]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"PolarisPostActionLoadPostQuerySharerQuery",selections:[{alias:null,args:r,concreteType:"XDTShidUserResponse",kind:"LinkedField",name:"xdt_get_relationship_for_shid_logged_out",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"sender",plural:!1,selections:[o,a,i,l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("PolarisPostActionLoadPostQuerySharerQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_get_relationship_for_shid_logged_out"]},name:"PolarisPostActionLoadPostQuerySharerQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisPostActionLoadPostQuery",["PolarisPostActionLoadPostQueryInlineFragment.graphql","PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles.graphql","PolarisPostActionLoadPostQueryInlineMediaFragment.graphql","PolarisPostActionLoadPostQueryInlineSharerFragment.graphql","PolarisPostActionLoadPostQueryLegacyQuery.graphql","PolarisPostActionLoadPostQueryMediaIdQuery.graphql","PolarisPostActionLoadPostQueryQuery.graphql","PolarisPostActionLoadPostQuerySharerQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=e!==void 0?e:e=n("PolarisPostActionLoadPostQueryInlineMediaFragment.graphql"),g=s!==void 0?s:s=n("PolarisPostActionLoadPostQueryInlineFragment.graphql"),h=u!==void 0?u:u=n("PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles.graphql"),y=c!==void 0?c:c=n("PolarisPostActionLoadPostQueryInlineSharerFragment.graphql"),C=d!==void 0?d:d=n("PolarisPostActionLoadPostQueryQuery.graphql"),b=m!==void 0?m:m=n("PolarisPostActionLoadPostQueryLegacyQuery.graphql"),v=p!==void 0?p:p=n("PolarisPostActionLoadPostQueryMediaIdQuery.graphql"),S=_!==void 0?_:_=n("PolarisPostActionLoadPostQuerySharerQuery.graphql");l.MEDIA_INLINE_FRAGMENT=f,l.INLINE_FRAGMENT=g,l.INLINE_FRAGMENT_WITHOUT_RELATED_PROFILES=h,l.SHARER_INLINE_FRAGMENT=y,l.POST_QUERY=C,l.POST_QUERY_LEGACY=b,l.POST_QUERY_MEDIA_ID=v,l.POST_SHARER_INFORMATION=S}),98);
__d("PolarisPostActionPostPageLoaded",["nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{postData:r("nullthrows")(e.shortcode_media),type:"POST_PAGE_LOADED"}}l.postPageLoaded=e}),98);
__d("PolarisPostActionLoadPost",["CometRelay","FBLogger","PolarisAdsActions","PolarisInstapi","PolarisIsLoggedIn","PolarisPostActionLoadPostQuery","PolarisPostActionPostLoadedV2","PolarisPostActionPostPageLoaded","PolarisRelayEnvironment","PolarisSenderNameHelpers","PolarisThreadedCommentActions","asyncToGeneratorRuntime","err","getErrorSafe","getPolarisPostIdFromNativeId","isTruthy","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("CometRelay").fetchQuery(r("PolarisRelayEnvironment"),o("PolarisPostActionLoadPostQuery").POST_SHARER_INFORMATION,{mediaId:t,shid:e}).toPromise();if(n==null||n.xdt_get_relationship_for_shid_logged_out==null)return null;var a=o("CometRelay").readInlineData(o("PolarisPostActionLoadPostQuery").SHARER_INLINE_FRAGMENT,n.xdt_get_relationship_for_shid_logged_out);return a}),s.apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("CometRelay").fetchQuery(r("PolarisRelayEnvironment"),o("PolarisPostActionLoadPostQuery").POST_QUERY_MEDIA_ID,{mediaId:e}).toPromise();if(t==null)throw r("err")("Post modal response is unexpectedly null");var n=o("CometRelay").readInlineData(o("PolarisPostActionLoadPostQuery").MEDIA_INLINE_FRAGMENT,t==null?void 0:t.xdt_api__v1__media__media_id_web_info);return n.items!=null?[].concat(n.items):null}),c.apply(this,arguments)}function d(e){return e.split("_").length>1}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("PolarisInstapi").apiGet("/api/v1/media/{media_id}/info/",{path:{media_id:e},query:{}}),n=t.data;return n.items!=null?[].concat(n.items):null}),p.apply(this,arguments)}function _(t,a,i,l,s){return i===void 0&&(i=!1),(function(){var c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n,c){if(n({shortcode:t,type:"POST_PAGE_LOADING"}),a!=null&&o("PolarisIsLoggedIn").isLoggedIn())try{n(o("PolarisThreadedCommentActions").requestInitialComments(r("getPolarisPostIdFromNativeId")(a)));var p=d(a)?yield u(a):yield m(a);if(p!=null){var _=p[0],f=new Set(c().ads.feed.keys());_!=null&&_.ad_id!=null?n(o("PolarisAdsActions").adMediaInfoLoaded(p[0],t)):n(o("PolarisPostActionPostLoadedV2").postLoadedV2(p,t,f))}}catch(e){var g=r("getErrorSafe")(e);r("FBLogger")("ig_web").catching(g)}else{var h=i?o("PolarisPostActionLoadPostQuery").POST_QUERY:o("PolarisPostActionLoadPostQuery").POST_QUERY_LEGACY;try{if(s!=null&&a!=null&&o("PolarisSenderNameHelpers").shouldShowSenderName("postPage")){var y=yield e(s,a);y!=null&&n({fullName:y.sender.full_name,profilePicUrl:y.sender.profile_pic_url,profilePicUrlHd:y.sender.profile_pic_url_hd,sharedMediaId:a,type:"UPDATE_SHARER_INFORMATION",username:y.sender.username})}var C=yield o("CometRelay").fetchQuery(r("PolarisRelayEnvironment"),h,{shortcode:t}).toPromise(),b;i?b=o("CometRelay").readInlineData(o("PolarisPostActionLoadPostQuery").INLINE_FRAGMENT_WITHOUT_RELATED_PROFILES,C==null?void 0:C.xdt_shortcode_media):b=o("CometRelay").readInlineData(o("PolarisPostActionLoadPostQuery").INLINE_FRAGMENT,C==null?void 0:C.xdt_shortcode_media);var v=b.accessibility_caption==null&&r("isTruthy")(l);v&&(b=babelHelpers.extends({},b,{accessibility_caption:l})),n(o("PolarisPostActionPostPageLoaded").postPageLoaded({shortcode_media:r("nullthrows")(b)}))}catch(e){var S=r("getErrorSafe")(e);r("FBLogger")("ig_web").catching(S).mustfix("unexpected")}}});return function(e,t){return c.apply(this,arguments)}})()}l.loadPost=_}),98);
__d("PolarisDesktopPostLoadingShimmer.react",["cx","PolarisIGTheme.react","PolarisReactRedux.react","PolarisSizing","polarisPostModalHelpers","polarisPostSelectors","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t,n=o("react-compiler-runtime").c(12),r=e.dimensions,a=e.postId,i=e.viewportHeight,l=e.viewportWidth,s=l!=null&&l>o("PolarisSizing").MEDIUM_SCREEN_MIN,c=(t=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisPostSelectors").getPostOrNullById(e,a!=null?a:"")}))==null?void 0:t.isSponsored,m=i!=null?i:0,p=l!=null?l:0,_;n[0]!==r||n[1]!==c||n[2]!==s||n[3]!==m||n[4]!==p?(_=o("polarisPostModalHelpers").getMediaContainerProps({dimensions:r,hasFooter:c,hasSidebarInRedesign:s,viewportHeight:m,viewportWidth:p}),n[0]=r,n[1]=c,n[2]=s,n[3]=m,n[4]=p,n[5]=_):_=n[5];var f=_,g="_aas3"+(s&&r!=null&&r.width>=r.height?" _aas4":""),h;n[6]!==r?(h=u.jsx(d,{dimensions:r}),n[6]=r,n[7]=h):h=n[7];var y;return n[8]!==f||n[9]!==g||n[10]!==h?(y=u.jsx("div",babelHelpers.extends({className:g},f,{children:h})),n[8]=f,n[9]=g,n[10]=h,n[11]=y):y=n[11],y}function d(e){"use no forget";var t=e.dimensions,n={},r=o("PolarisIGTheme.react").useTheme();return t&&(n.paddingBottom=o("PolarisSizing").getHeightPercent(t)+"%"),u.jsx("div",{className:"_aas5"+(r.getTheme()===o("PolarisIGTheme.react").IGTheme.Dark?" _aas6":""),style:n})}d.displayName=d.name+" [from "+i.id+"]";function m(e){var t=o("react-compiler-runtime").c(5),n=e.dimensions,r=e.postId,a=e.viewportHeight,i=e.viewportWidth,l;return t[0]!==n||t[1]!==r||t[2]!==a||t[3]!==i?(l=u.jsx(c,{dimensions:n,postId:r,viewportHeight:a,viewportWidth:i}),t[0]=n,t[1]=r,t[2]=a,t[3]=i,t[4]=l):l=t[4],l}function p(e){var t=o("react-compiler-runtime").c(16),n=e.dimensions,r=e.postId,a=e.viewportHeight,i=e.viewportWidth,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={},t[0]=l):l=t[0];var s=l;if(n){var c;t[1]===Symbol.for("react.memo_cache_sentinel")?(c={flexDirection:"row"},t[1]=c):c=t[1],s=c}var d;t[2]!==n||t[3]!==r||t[4]!==a||t[5]!==i?(d=u.jsx(m,{dimensions:n,postId:r,viewportHeight:a,viewportWidth:i}),t[2]=n,t[3]=r,t[4]=a,t[5]=i,t[6]=d):d=t[6];var p;t[7]===Symbol.for("react.memo_cache_sentinel")?(p=u.jsx("div",{className:"_aasa"}),t[7]=p):p=t[7];var _;t[8]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsx("div",{className:"_aasc"}),t[8]=_):_=t[8];var f;t[9]===Symbol.for("react.memo_cache_sentinel")?(f=u.jsxs("div",{className:"_aas9",children:[p,u.jsxs("div",{className:"_aasb",children:[_,u.jsx("div",{className:"_aasd"})]})]}),t[9]=f):f=t[9];var g;t[10]===Symbol.for("react.memo_cache_sentinel")?(g=u.jsx("div",{className:"_aasf"}),t[10]=g):g=t[10];var h;t[11]===Symbol.for("react.memo_cache_sentinel")?(h=u.jsx("div",{className:"_aasg"}),t[11]=h):h=t[11];var y;t[12]===Symbol.for("react.memo_cache_sentinel")?(y=u.jsxs("div",{className:"_aas8",children:[f,u.jsxs("div",{className:"_aase",children:[g,h,u.jsx("div",{className:"_aash"})]})]}),t[12]=y):y=t[12];var C;return t[13]!==s||t[14]!==d?(C=u.jsxs("div",{className:"_aas7",style:s,children:[d,y]}),t[13]=s,t[14]=d,t[15]=C):C=t[15],C}l.SIDEBAR_VARIANT_CUTOFF=o("PolarisSizing").MEDIUM_SCREEN_MIN,l.DesktopPostLoadingShimmer=p}),98);
__d("PolarisPostModalLoading.react",["IGDSBox.react","IGDSSpinner.react","PolarisDesktopPostLoadingShimmer.react","PolarisPostConstants","PolarisUA","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=e.dimensions,a=e.postId,i=e.viewportHeight,l=e.viewportWidth;if(o("PolarisUA").isDesktop()&&l>o("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF){var u;return t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l?(u=s.jsx(o("PolarisDesktopPostLoadingShimmer.react").DesktopPostLoadingShimmer,{dimensions:n,postId:a,viewportHeight:i,viewportWidth:l}),t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=u):u=t[4],u}var c;return t[5]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(r("IGDSBox.react"),{alignItems:"center",position:"relative",children:s.jsx(r("IGDSSpinner.react"),{color:"light",size:"medium"})}),t[5]=c):c=t[5],c}l.default=u}),98);
__d("PolarisPostModalPaginationArrow.react",["cx","IGDSChevronIcon.react","Locale","PolarisGenericStrings","PolarisIGCoreSVGIconButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(9),n=e.direction,a=e.onClick,i=r("Locale").isRTL(),l=n==="back"&&!i||n==="next"&&i,s=n==="next"&&!i||n==="back"&&i,c=(l?"_aaqf":"")+(s?" _aaqg":"")+" _aaqh",d=l?o("PolarisGenericStrings").GO_BACK:o("PolarisGenericStrings").NEXT,m;t[0]!==n||t[1]!==d?(m=u.jsx(r("IGDSChevronIcon.react"),{alt:d,color:"web-always-black",direction:n,size:16}),t[0]=n,t[1]=d,t[2]=m):m=t[2];var p;t[3]!==a||t[4]!==m?(p=u.jsx(r("PolarisIGCoreSVGIconButton.react"),{onClick:a,children:m}),t[3]=a,t[4]=m,t[5]=p):p=t[5];var _;return t[6]!==c||t[7]!==p?(_=u.jsx("div",{className:c,children:p}),t[6]=c,t[7]=p,t[8]=_):_=t[8],_}l.default=c}),98);
__d("PolarisPostModalInternal.react",["IGCoreModal.react","IGCoreModalLocation.react","PolarisAutoplayViewpointManager.react","PolarisDOMListener.react","PolarisIsLoggedIn","PolarisLogger","PolarisPostActionLoadPost","PolarisPostModalLoading.react","PolarisPostModalPaginationArrow.react","PolarisPostModalRenderingContext.react","PolarisReactRedux.react","PolarisRoutes","PolarisThreadedCommentActions","getPolarisKeyCommandConfig","nullthrows","polarisPostModalHelpers","polarisPostSelectors","react","useGlobalKeyCommands","usePolarisDisplayProperties"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useMemo,p=u.useRef,_={isInModal:!0};function f(e){var t=e.analyticsContext,n=e.children,a=e.combinedPostIds,i=a===void 0?[]:a,l=e["data-testid"],u=e.dimensions,f=e.mediaLinkBuilder,g=e.modalEntryPath,h=g===void 0?o("PolarisRoutes").FEED_PATH:g,y=e.onClose,C=e.onlyReplaceModalHistory,b=e.onOpen,v=e.postCode,S=e.postId,R=e.postModalMediaUFI,L=e.showLoadingShimmer,E=e.skipMediaInfo,k=o("PolarisReactRedux.react").useDispatch(),I=p(null),T=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisPostSelectors").getAreCommentsFetched(e,S)}),D=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisPostSelectors").getIsPostDataFetched(e,v)}),x=o("PolarisIsLoggedIn").isLoggedIn()===!0?D:D&&T,$=c(function(){x||k(E===!0?o("PolarisThreadedCommentActions").requestInitialComments(S):o("PolarisPostActionLoadPost").loadPost(v,R!=null?R:S))},[E,x,k,v,R,S]);d($,[$]);var P=i.findIndex(function(e){return e===S}),N=c(function(e){return e>=0&&e<i.length},[i.length]),M=c(function(e){var t=P+e;N(t)&&b&&b(r("nullthrows")(i[t]),t,R)},[i,P,N,b,R]),w=c(function(e){y(e),I.current!=null&&I.current.returnToEntry()},[y]),A=m(function(){return[o("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateLeft",function(){M(o("polarisPostModalHelpers").LEFT_DELTA)}),o("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateRight",function(){M(o("polarisPostModalHelpers").RIGHT_DELTA)}),o("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","exit",function(){w()})]},[M,w]);r("useGlobalKeyCommands")(A);var F=function(t){return function(e){e.metaKey||e.ctrlKey||(e.preventDefault(),e.stopPropagation(),M(t),o("PolarisLogger").logAction("postModalArrowClick"))}},O=c(function(){var e=o("polarisPostModalHelpers").getModalPageIdFromAnalyticsContext(t);e.length>0&&o("PolarisLogger").logPageView(e,{page_id:e,post_id:S})},[t,S]),B=N(P-1),W=N(P+1),q=s.jsx("div",{className:"x9f619 x5yr21d x889kno x2vl965 x1a8lsjc xe2zdcy x47corl xh8yej3 x10l6tqk",children:s.jsxs("div",{className:"x5yr21d x47corl x1n2onr6 xh8yej3",children:[B&&s.jsx(r("PolarisPostModalPaginationArrow.react"),{direction:"back",onClick:F(o("polarisPostModalHelpers").LEFT_DELTA)}),W&&s.jsx(r("PolarisPostModalPaginationArrow.react"),{direction:"next",onClick:F(o("polarisPostModalHelpers").RIGHT_DELTA)})]})}),U=r("usePolarisDisplayProperties")(),V=U.viewportHeight,H=U.viewportWidth,G=s.jsx(s.Fragment,{children:!x&&L?s.jsx(r("PolarisPostModalLoading.react"),{dimensions:u,postId:S,viewportHeight:V,viewportWidth:H}):n}),z=s.jsx(r("IGCoreModal.react"),{aboveContent:q,backgroundColor:"DEPRECATED_transparent",closeButtonPosition:"background","data-testid":void 0,onClose:w,size:"fullscreenResponsive",children:G});return s.jsxs(s.Fragment,{children:[s.jsx(o("PolarisAutoplayViewpointManager.react").FullscreenAutoplayViewpointClipRegion,{id:"postModal"}),s.jsx(r("IGCoreModalLocation.react"),{entryPath:h,nativeReplace:!0,onlyReplaceModalHistory:C,onUpdateHistory:O,pageID:"postPage",parentModule:"PolarisPostModal",path:f(v),ref:I}),s.jsx(r("PolarisDOMListener.react"),{event:"popstate",handler:w,once:!0,target:window}),s.jsx(o("PolarisPostModalRenderingContext.react").PolarisPostModalRenderingContext.Provider,{value:_,children:z})]})}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),98);
__d("PolarisPostModal.react",["PolarisPostModalInternal.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(r("PolarisPostModalInternal.react"),babelHelpers.extends({},e,{showLoadingShimmer:!0})),t[0]=e,t[1]=n):n=t[1],n}l.default=u}),98);
__d("PolarisClipsItemModal.react",["IGRouter_DO_NOT_USE.react","PolarisClipsHelpers","PolarisLinkBuilder","PolarisPost.react","PolarisPostModal.react","PolarisPostVariants","nullthrows","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useRef;function c(e){var t,n=e.analyticsContext,a=e.clips,i=e.history,l=e.onClose,c=e.onOpen,d=e.postId,m=u(i.location.pathname),p=o("PolarisClipsHelpers").getClipItemFromPostID(a,d);if(!p)return null;var _=a.map(function(e){var t;return r("nullthrows")((t=e.media)==null?void 0:t.pk)});return s.jsx(r("PolarisPostModal.react"),{analyticsContext:n,combinedPostIds:_,dimensions:o("PolarisClipsHelpers").getClipDimensionsFromItemDict(p),mediaLinkBuilder:o("PolarisLinkBuilder").buildClipsMediaLink,modalEntryPath:m.current,onClose:l,onOpen:c,postCode:r("nullthrows")((t=p.media)==null?void 0:t.code),postId:d,children:s.jsx(r("PolarisPost.react"),{analyticsContext:n+"Modal",autoplay:!0,id:d,isVisible:!0,variant:o("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0})})}c.displayName=c.name+" [from "+i.id+"]";var d=o("IGRouter_DO_NOT_USE.react").withIGRouter(c);l.default=d}),98);
__d("PolarisDesktopSponsoredPersistentCTA.react",["CometErrorBoundary.react","InstagramODS","InstagramWebAdEventsAuditFalcoEvent","PolarisClickEventLoggerProvider.react","PolarisClipsTabHelpers","PolarisNavigationHelpers","PolarisPostFooterCTA.react","PolarisPostUtils","PolarisSponsoredPersistentCTAThumbnail.react","PolarisTrackingCodeProvider.react","PolarisTrackingNodeProvider.react","getPolarisPostIdFromNativeId","polarisAdsSelectors.react","polarisPostSelectors","react","react-compiler-runtime","usePolarisSelector","usePolarisSponsoredPostCTAFooterDominantColor","useThrottled"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useLayoutEffect,m=u.useState;function p(e){var t=o("react-compiler-runtime").c(29),n=e.ctaAdditionalAnimation,a=e.ctaLinkText,i=e.domColor,l=e.entryPoint,u=e.externalURL,p=e.mediaId,_=e.mpk,f=e.post,g=e.socialContextType,h=e.thumbnailImageSrc,y=e.trackingToken,C=m(0),b=C[0],v=C[1],S;t[0]!==p||t[1]!==f?(S={isMediaRendered:!0,mediaId:p,post:f},t[0]=p,t[1]=f,t[2]=S):S=t[2];var R=r("usePolarisSponsoredPostCTAFooterDominantColor")(S),L=R.ctaFooterViewpointRef,E;t[3]===Symbol.for("react.memo_cache_sentinel")?(E=function(){v(o("PolarisNavigationHelpers").getNavBarDesktopWidth())},t[3]=E):E=t[3];var k=r("useThrottled")(E,o("PolarisClipsTabHelpers").WINDOW_RESIZE_THROTTLE),I,T;t[4]!==k?(I=function(){return k(),window.addEventListener("resize",k),function(){window.removeEventListener("resize",k)}},T=[k],t[4]=k,t[5]=I,t[6]=T):(I=t[5],T=t[6]),d(I,T);var D;t[7]!==l||t[8]!==g||t[9]!==y?(D=function(){r("InstagramODS").incr("web.ads.feed.link_click"),r("InstagramWebAdEventsAuditFalcoEvent").log(function(){return{client_token:y,event:"persistent_cta_click",social_context_type:g}}),l!==null&&l==="story"?r("InstagramODS").incr("web.ads.story.desktop_persistent_link_click"):r("InstagramODS").incr("web.ads.feed.persistent_link_click")},t[7]=l,t[8]=g,t[9]=y,t[10]=D):D=t[10];var x=D,$,P;t[11]!==l?($=function(){l!==null&&l==="story"?r("InstagramODS").incr("web.ads.story.desktop_persistent_cta_rendered"):r("InstagramODS").incr("web.ads.feed.persistent_cta_rendered")},P=[l],t[11]=l,t[12]=$,t[13]=P):($=t[12],P=t[13]),c($,P);var N;t[14]!==n||t[15]!==a||t[16]!==i||t[17]!==u||t[18]!==x||t[19]!==b||t[20]!==h?(N=function(t){return s.jsx("div",{className:"xjnlgov xbudbmw xixxii4",ref:t,style:{transform:"translateX(calc(-50% + "+b/2+"px))"},children:s.jsx(r("PolarisPostFooterCTA.react"),{ctaAdditionalAnimation:n,ctaDominantColor:i,disableAnimation:!0,externalURL:u,forceBottomBorder:!1,icon:s.jsx(r("PolarisSponsoredPersistentCTAThumbnail.react"),{thumbnailImageSrc:h}),isActive:!0,isForAd:!0,isForPersistentCta:!0,onClick:x,showChevron:!0,showRoundedBorder:!0,text:a})})},t[14]=n,t[15]=a,t[16]=i,t[17]=u,t[18]=x,t[19]=b,t[20]=h,t[21]=N):N=t[21];var M;t[22]!==L||t[23]!==N?(M=s.jsx(r("PolarisClickEventLoggerProvider.react"),{children:s.jsx(r("PolarisTrackingNodeProvider.react"),{ref:L,trackingNode:86,children:N})}),t[22]=L,t[23]=N,t[24]=M):M=t[24];var w;return t[25]!==_||t[26]!==M||t[27]!==y?(w=s.jsx(r("PolarisTrackingCodeProvider.react"),{isSponsored:!0,m_pk:_,trackingToken:y,children:M}),t[25]=_,t[26]=M,t[27]=y,t[28]=w):w=t[28],w}function _(e){var t=o("react-compiler-runtime").c(25),n=e.entryPoint,a=e.mpk,i;t[0]!==a?(i=r("getPolarisPostIdFromNativeId")(a),t[0]=a,t[1]=i):i=t[1];var l=i,u=o("polarisAdsSelectors.react").useFeedAdInfo(l,g),c=o("polarisAdsSelectors.react").useStoryAdInfo(l,f),d=n!==null&&n==="story"?c:u,m;t[2]!==l?(m=function(t){return o("polarisPostSelectors").getPostById(t,l)},t[2]=l,t[3]=m):m=t[3];var _=r("usePolarisSelector")(m),h=_.isSidecar,y=_.src,C=_.thumbnailSrc,b;if(t[4]!==h||t[5]!==_){var v;b=h===!0?(v=o("PolarisPostUtils").getCurrentSidecarItemFromPost(_,0))==null?void 0:v.id:_.id,t[4]=h,t[5]=_,t[6]=b}else b=t[6];var S=b,R=C!=null?C:y;if(S==null||R==null)return null;var L;if(t[7]!==(d==null?void 0:d.ctaItems)||t[8]!==S){var E;L=d==null||(E=d.ctaItems)==null||(E=E.get(S))==null?void 0:E.ctaLinkUrl,t[7]=d==null?void 0:d.ctaItems,t[8]=S,t[9]=L}else L=t[9];var k=L,I;if(t[10]!==(d==null?void 0:d.ctaItems)||t[11]!==S){var T;I=d==null||(T=d.ctaItems)==null||(T=T.get(S))==null?void 0:T.ctaLinkText,t[10]=d==null?void 0:d.ctaItems,t[11]=S,t[12]=I}else I=t[12];var D=I,x;if(t[13]!==(d==null?void 0:d.ctaItems)||t[14]!==S){var $;x=d==null||($=d.ctaItems)==null||($=$.get(S))==null?void 0:$.ctaDominantColor,t[13]=d==null?void 0:d.ctaItems,t[14]=S,t[15]=x}else x=t[15];var P=x;if(k==null||D==null)return null;var N;return t[16]!==D||t[17]!==P||t[18]!==n||t[19]!==k||t[20]!==S||t[21]!==_||t[22]!==e||t[23]!==R?(N=s.jsx(r("CometErrorBoundary.react"),{children:s.jsx(p,babelHelpers.extends({},e,{ctaLinkText:D,domColor:P,entryPoint:n,externalURL:k,mediaId:S,post:_,thumbnailImageSrc:R}))}),t[16]=D,t[17]=P,t[18]=n,t[19]=k,t[20]=S,t[21]=_,t[22]=e,t[23]=R,t[24]=N):N=t[24],N}function f(e){return e}function g(e){return e}l.default=_}),98);
__d("PolarisProfileTabTaggedPhotosConstants",[],(function(t,n,r,o,a,i){"use strict";var e="tagged";i.TAGGED_TAB_ID=e}),66);
__d("PolarisInstantPostModal.react",["PolarisPostModalInternal.react","PolarisProfileTabTaggedPhotosConstants","polarisPostSelectors","react","react-compiler-runtime","usePolarisSelector"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t,n=o("react-compiler-runtime").c(5),a=!1,i=((t=e.modalEntryPath)==null?void 0:t.endsWith("/"+o("PolarisProfileTabTaggedPhotosConstants").TAGGED_TAB_ID+"/"))===!0,l;n[0]!==e.postId?(l=function(n){return o("polarisPostSelectors").getPostOrNullById(n,e.postId)},n[0]=e.postId,n[1]=l):l=n[1];var u=r("usePolarisSelector")(l);(u==null||i&&u.isVideo===!0)&&(a=!0);var c;return n[2]!==e||n[3]!==a?(c=s.jsx(r("PolarisPostModalInternal.react"),babelHelpers.extends({},e,{showLoadingShimmer:a})),n[2]=e,n[3]=a,n[4]=c):c=n[4],c}l.default=u}),98);
__d("PolarisMediaBrowserPostModal.react",["invariant","PolarisInstantPostModal.react","PolarisIsLoggedInDesktop","PolarisPost.react","PolarisPostVariants","PolarisReactRedux.react","PolarisRoutes","isStringNullOrEmpty","nullthrows","polarisPostSelectors","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useEffect;function d(e){var t=o("react-compiler-runtime").c(28),n=e.analyticsContext,a=e.combinedPosts,i=e.mediaLinkBuilder,l=e.modalEntryPath,d=e.onClose,_=e.onOpen,f=e.postId,g=o("PolarisReactRedux.react").useSelector(p),h;t[0]!==a?(h=a.map(m),t[0]=a,t[1]=h):h=t[1];var y=h,C;t[2]!==f?(C=function(t){return o("polarisPostSelectors").getPostOrNullById(t,f)},t[2]=f,t[3]=C):C=t[3];var b=o("PolarisReactRedux.react").useSelector(C),v,S;if(t[4]!==g||t[5]!==d||t[6]!==f||t[7]!==b?(v=function(){b==null&&(g.includes(f)||s(0,51476),d())},S=[g,d,b,f],t[4]=g,t[5]=d,t[6]=f,t[7]=b,t[8]=v,t[9]=S):(v=t[8],S=t[9]),c(v,S),b==null)return null;var R=b.dimensions,L=r("isStringNullOrEmpty")(l)?o("PolarisRoutes").FEED_PATH:l,E;t[10]!==b.code?(E=r("nullthrows")(b.code),t[10]=b.code,t[11]=E):E=t[11];var k=n+"Modal",I;t[12]===Symbol.for("react.memo_cache_sentinel")?(I=o("PolarisIsLoggedInDesktop").isLoggedInDesktop(),t[12]=I):I=t[12];var T;t[13]!==f||t[14]!==b.code||t[15]!==k?(T=u.jsx(r("PolarisPost.react"),{analyticsContext:k,autoplay:I,id:f,isVisible:!0,shortcode:b.code,testid:void 0,variant:o("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0}),t[13]=f,t[14]=b.code,t[15]=k,t[16]=T):T=t[16];var D;return t[17]!==n||t[18]!==y||t[19]!==i||t[20]!==d||t[21]!==_||t[22]!==f||t[23]!==b.dimensions||t[24]!==T||t[25]!==L||t[26]!==E?(D=u.jsx(r("PolarisInstantPostModal.react"),{analyticsContext:n,combinedPostIds:y,dimensions:R,mediaLinkBuilder:i,modalEntryPath:L,onClose:d,onOpen:_,postCode:E,postId:f,children:T}),t[17]=n,t[18]=y,t[19]=i,t[20]=d,t[21]=_,t[22]=f,t[23]=b.dimensions,t[24]=T,t[25]=L,t[26]=E,t[27]=D):D=t[27],D}function m(e){return e.id}function p(e){return o("polarisPostSelectors").getDeletedIds(e)}l.default=d}),98);
__d("PolarisNewsMultiregionBlock.react",["fbt","IGDSBox.react","IGDSNewsOffOutlineIcon.react","IGDSText.react","PolarisAdvisoryMessage.react","PolarisExternalLink.react","SableNewsEventFalcoEvent","react","react-compiler-runtime","usePolarisViewer"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useEffect,d="https://transparency.fb.com/policies/other-policies/policies/news-legislation";function m(e){var t=o("react-compiler-runtime").c(14),n=e.isOwnProfile,a=e.userID,i=r("usePolarisViewer")(),l;t[0]!==n||t[1]!==a||t[2]!==(i==null?void 0:i.id)?(l=function(){r("SableNewsEventFalcoEvent").log(function(){var e;return{account_viewed_id:a,event_name:"publisher_profile_block",ig_user_id:(e=i==null?void 0:i.id)!=null?e:"0",viewer_is_regulated_c18:n}})},t[0]=n,t[1]=a,t[2]=i==null?void 0:i.id,t[3]=l):l=t[3];var m=i==null?void 0:i.id,p;t[4]!==n||t[5]!==m||t[6]!==a?(p=[a,m,n],t[4]=n,t[5]=m,t[6]=a,t[7]=p):p=t[7],c(l,p);var _;t[8]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsx(r("IGDSBox.react"),{marginBottom:3,children:u.jsx(r("IGDSNewsOffOutlineIcon.react"),{alt:"Icon indicating that news is disabled",size:32})}),t[8]=_):_=t[8];var f;t[9]!==n?(f=u.jsx(r("IGDSText.react"),{weight:"bold",children:n?s._(/*BTDS*/"Pessoas em algumas regi\u00f5es n\u00e3o podem ver seu conte\u00fado"):s._(/*BTDS*/"Pessoas em algumas regi\u00f5es n\u00e3o podem ver este conte\u00fado")}),t[9]=n,t[10]=f):f=t[10];var g;t[11]===Symbol.for("react.memo_cache_sentinel")?(g=u.jsx("p",{children:u.jsx(r("IGDSText.react"),{color:"secondaryText",children:s._(/*BTDS*/"Em resposta \u00e0 legisla\u00e7\u00e3o governamental, o conte\u00fado de publica\u00e7\u00f5es de not\u00edcias n\u00e3o pode ser visualizado em algumas regi\u00f5es. {=m2}",[s._implicitParam("=m2",u.jsx(r("PolarisExternalLink.react"),{href:d,children:s._(/*BTDS*/"Saiba mais")}))])})}),t[11]=g):g=t[11];var h;return t[12]!==f?(h=u.jsxs(r("PolarisAdvisoryMessage.react"),{children:[_,f,g]}),t[12]=f,t[13]=h):h=t[13],h}l.default=m}),226);
__d("usePolarisPostToastPosition",["PolarisPostConstants","PolarisPostToastProvider.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useLayoutEffect,u=-4,c=-1,d=16,m=1;function p(e){var t=e.isFeed,n=e.isNarrow,r=e.postToastContainerElem,a=e.setPositionStyles;if(r!=null){var i=r.getBoundingClientRect(),l=i.left-(n?d:0),s={left:l},p=i.right-i.left+(n?2*d:0);a(t?{absolutePositionStyles:{left:i.left+m,top:i.bottom+window.pageYOffset-o("PolarisPostConstants").POST_TOAST_HEIGHT-2},width:i.width-m}:{absolutePositionStyles:babelHelpers.extends({},s,{top:i.top+window.pageYOffset-o("PolarisPostConstants").POST_TOAST_HEIGHT+c-(n?u:0)}),width:p})}}function _(e){var t=o("react-compiler-runtime").c(11),n=e.isFeed,r=e.isNarrow,a=o("PolarisPostToastProvider.react").usePostToastContext(),i=a.positionStyles,l=a.postToastContainerElem,u=a.setPositionStyles,c=a.showToast,d;t[0]!==n||t[1]!==r||t[2]!==l||t[3]!==u?(d=function(){return p({isFeed:n,isNarrow:r,postToastContainerElem:l,setPositionStyles:u})},t[0]=n,t[1]=r,t[2]=l,t[3]=u,t[4]=d):d=t[4];var m;return t[5]!==n||t[6]!==r||t[7]!==l||t[8]!==u||t[9]!==c?(m=[n,r,l,u,c],t[5]=n,t[6]=r,t[7]=l,t[8]=u,t[9]=c,t[10]=m):m=t[10],s(d,m),i}l.default=_}),98);
__d("PolarisPostToastImpl.react",["BasePortal.react","ExecutionEnvironment","IGDSTextVariants.react","PolarisIGAnimate","PolarisIGCoreButton.react","PolarisPostConstants","PolarisPostStrings","PolarisPostToastProvider.react","PolarisSizing","PolarisUA","react","react-compiler-runtime","useCometRouterDispatcher","usePolarisDisplayProperties","usePolarisPostToastPosition"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useEffect,d=3e3,m=350;function p(t){var n,a=o("react-compiler-runtime").c(13),i=t.isFeedVariant,l=t.isModal,s=i&&o("PolarisUA").isDesktop(),p=r("useCometRouterDispatcher")(),_=o("PolarisPostToastProvider.react").usePostToastContext(),f=_.ActionText,g=_.BodyText,h=_.actionHref,y=_.setShowToast,C=_.showToast,b=r("usePolarisDisplayProperties")(),v=b.viewportWidth,S=v<o("PolarisSizing").SMALL_SCREEN_MAX,R;a[0]!==i||a[1]!==S?(R={isFeed:i,isNarrow:S},a[0]=i,a[1]=S,a[2]=R):R=a[2];var L=r("usePolarisPostToastPosition")(R),E=(n=L==null?void 0:L.width)!=null?n:0,k=L!=null?babelHelpers.extends({},L.absolutePositionStyles,{width:E}):null,I=E>m,T;a[3]!==y?(T=function(){var e=window.setTimeout(function(){y(!1)},d);return function(){return window.clearTimeout(e)}},a[3]=y,a[4]=T):T=a[4],c(T,void 0);var D=C===!0,x;a[5]!==D?(x={show:D},a[5]=D,a[6]=x):x=a[6];var $=o("PolarisIGAnimate").useFadeTransition(x),P=r("BasePortal.react"),N;a[7]!==l?(N=(e||(e=r("ExecutionEnvironment"))).canUseDOM?l?document.body:document.querySelector('[role="main"]'):null,a[7]=l,a[8]=N):N=a[8];var M=$(function(e,t){return t?u.jsx(o("PolarisIGAnimate").Animated.div,{className:"x10l6tqk xhtitgo",style:babelHelpers.extends({},e,k),children:u.jsx("div",{className:{0:"xc26acl x6s0dn4 xvbhtw8 xhpglom x18b5jzi x1lun4ml x1fqc88y x1t7ytsu xpilrb4 x78zum5",1:"xc26acl x6s0dn4 xvbhtw8 xhpglom x18b5jzi x1lun4ml x1fqc88y x1t7ytsu xpilrb4 x78zum5 xh05dso x1q0q8m5 xso031l x1wcsgtt x1pczhz8 x1xp8e9x x13fuv20 x178xt8z"}[!!s<<0],style:{height:o("PolarisPostConstants").POST_TOAST_HEIGHT},children:u.jsxs("div",{className:"x6s0dn4 x78zum5 x1q0g3np x1szn6h9 xyamay9 xv54qhq x1l90r2v xf7dkkf xh8yej3",children:[u.jsx("div",{className:"x1iyjqo2",children:u.jsx(o("IGDSTextVariants.react").IGDSTextLabel,{maxLines:1,textAlign:"start",children:g})}),u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return p==null?void 0:p.go(h!=null?h:"/",{})},children:f!=null&&I?f:o("PolarisPostStrings").POST_PAGE_ACTION_TEXT})]})})}):null}),w;return a[9]!==P||a[10]!==N||a[11]!==M?(w=u.jsx(P,{target:N,children:M}),a[9]=P,a[10]=N,a[11]=M,a[12]=w):w=a[12],w}l.default=p}),98);
__d("YpIgFamilyCenterCoreClientEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1772"),s=o("FalcoLoggerInternal").create("yp_ig_family_center_core_client_event",e),u=s;l.default=u}),98);
__d("YpIgFamilyCenterSetupClientEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1771"),s=o("FalcoLoggerInternal").create("yp_ig_family_center_setup_client_event",e),u=s;l.default=u}),98);/*FB_PKG_DELIM*/
__d("ExternalShareSucceededFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5748"),s=o("FalcoLoggerInternal").create("external_share_succeeded",e),u=s;l.default=u}),98);
__d("PolarisBaseGraphQLEventHandler",[],(function(t,n,r,o,a,i){"use strict";var e="1/graphqlsubscriptions/",l=Object.freeze({BD_CHALLENGE:"BdChallenge",NONE:"",PINNED_QUESTION:"PinnedQuestion",QUESTION_STATUS:"QuestionStatus",WAVE:"Wave"}),s=(function(){function t(){}var n=t.prototype;return n.processEventMessage=function(t){},n.getSubTopic=function(){return null},n.getGraphQLSubsciptionPrefix=function(){return e},n.getType=function(){return l.NONE},t})();i.GRAPH_QL_EVENT_TYPES=l,i.BaseGraphQLEventHandler=s}),66);
__d("PolarisBdChallengeGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","PolarisDirectLogger","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="17935802131473058",s=(function(t){function n(n){var a;return a=t.call(this)||this,a.$BdChallengeGraphQLEventHandler$p_1=new(o("PolarisDirectLogger")).DirectLogger("BDChallengeGraphQLEventHandler",n),a.$BdChallengeGraphQLEventHandler$p_1.debugTrace("bd_challenge_gql_handler_init"),a.$BdChallengeGraphQLEventHandler$p_2=a.getGraphQLSubsciptionPrefix()+e+"/"+JSON.stringify({input_data:{client_subscription_id:r("uuidv4")()}}),a}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.processEventMessage=function(t){var e=t.bd_challenge_event;if(e==null){this.$BdChallengeGraphQLEventHandler$p_1.debugTrace("parsed_message_bad_data");return}},a.getSubTopic=function(){return this.$BdChallengeGraphQLEventHandler$p_2},a.getType=function(){return o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.BD_CHALLENGE},n})(o("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);l.BdChallengeGraphQLEventHandler=s}),98);
__d("PolarisChannelClientID",["uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=r("uuidv4")(),s={getID:function(){return e}},u=s;l.default=u}),98);
__d("PolarisDirectBaseSubscription",["getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,o){var a=this;this.$5=function(e){a.$4.debugTrace("message_received");var t=a.parsePayload(e);if(t!=null){var n;if(e.length===0){a.$4.logError("empty_message");return}else e[e.length-1]==="\0"?(n=e.substring(0,e.length-1),a.$4.debugTrace("trimmed_null_char")):n=e;var o={};try{o=JSON.parse(n)}catch(t){var i=r("getErrorSafe")(t),l={};i.message.includes("Unexpected token")&&(l.jsonFirstChars=typeof n=="string"?n.substr(0,3):null),a.$4.logError("Cannot parse message "+e,i,l);return}a.processMessage(o)}},this.$1=e,this.$2=t,this.$3=n,this.$4=o,this.$4.debugTrace("ctor")}var t=e.prototype;return t.parsePayload=function(t){return t},t.processMessage=function(t){},t.$6=function(t){var e;return JSON.stringify((e={},e[t]=this.getSubTopics(),e))},t.subscribe=function(){var e=this;if(this.getSubTopics().length<1){this.$4.debugTrace("no_subtopics_to_subscribe");return}this.$4.debugTrace("subscribe_start"),this.unsubscribe(),this.$3.subscribe(this.$1,this.$5),this.$3.publish(this.$1,this.$6("sub")).catch(function(t){var n=r("getErrorSafe")(t);e.$4.logError(n.message,n)}),this.$4.debugTrace("subscribe_end")},t.unsubscribe=function(){var e=this;if(this.getSubTopics().length<1){this.$4.debugTrace("no_subtopics_to_unsubscribe");return}this.$4.debugTrace("unsubscribe_start"),this.$3.publish(this.$1,this.$6("unsub")).catch(function(t){var n=r("getErrorSafe")(t);e.$4.logError(n.message,n)}),this.$3.unsubscribe(this.$1),this.$4.debugTrace("unsubscribe_end")},t.updateSubTopics=function(t){this.$2=t},t.getSubTopics=function(){return this.$2},e})();l.DirectBaseSubscription=e}),98);
__d("PolarisDirectDeltaHandlers",["invariant","PolarisDirectLogger","getErrorSafe","memoize"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return d(e)}function u(e){return d(e)}function c(e){return d(e)}function d(e){if(e==null)return null;if(typeof e!="string")return e;var t=e;try{t=m(e)}catch(a){var n=r("getErrorSafe")(a);o("PolarisDirectLogger").DirectLogger.logError("DirectDeltaHandlers","parse_delta_item.stringify_ids_error",{errorMessage:n.message}),t=e}var a;try{a=JSON.parse(t)}catch(t){var i=r("getErrorSafe")(t);o("PolarisDirectLogger").DirectLogger.logError("DirectDeltaHandlers","parse_delta_item.parse_json_error",{errorMessage:i.message}),a=JSON.parse(e)}return a}function m(e){var t=Array.from(e.matchAll(/(id\":)\s*([0-9]+)/gi)),n=0;return t.reduce(function(e,t){var r=new RegExp(t[0]);r.lastIndex=n;var o=e.replace(r,t[1]+' "'+t[2]+'"');return n=t.index,o},e)}function p(e){var t=parseInt(e,10);return!isNaN(t)||s(0,61446,e),isNaN(t)?0:t}var _=function(t,n){var e=this;this.$3=r("memoize")(function(){return[{listeners:{replace:e.$1.onHasSeen},regex:/^\/direct_v2\/threads\/(.+)\/participants\/(.+)\/has_seen$/},{listeners:{add:e.$1.onMakeAdmin,remove:e.$1.onRemoveAdmin},regex:/^\/direct_v2\/threads\/(\d+)\/admin_user_ids\/(\d+)$/},{listeners:{add:e.$1.onIndicateTypingActivity},regex:/^\/direct_v2\/threads\/(.+)\/activity_indicator_id\/(.+)$/},{listeners:{add:e.$1.onUpdateEmoji,remove:e.$1.onRemoveEmoji,replace:e.$1.onUpdateEmoji},regex:/^\/direct_v2\/threads\/(\d+)\/items\/(\d+)\/reactions\/likes\/(\d+)$/},{listeners:{add:e.$1.onNewMessage,remove:e.$1.onRemoveMessage,replace:e.$1.onUpdatedMessage},regex:/^\/direct_v2\/threads\/(.+)\/items\/(\d+)$/},{listeners:{replace:e.$1.onUpdateDMSettings},regex:/^\/direct_v2\/threads\/(.+)\/dm_settings$/},{listeners:{remove:e.$1.onRemoveThread,replace:e.$1.onNewThread},regex:/^\/direct_v2\/inbox\/threads\/(.+)$/},{listeners:{replace:e.$1.onUnseenCountChange},regex:/^\/direct_v2\/inbox\/unseen_count$/}]}),this.handleDelta=function(t,n){var r=t.op,o=t.path,a=t.value;e.$2.debugTrace("handle_delta_start",{mutationToken:n,op:r,path:o});for(var i of e.$3()){var l=i.listeners[r];if(l){var s=i.regex.exec(o);s&&(e.$2.debugTrace("handle_delta_match"),l.apply(void 0,[a,n].concat(s.slice(1))))}}e.$2.debugTrace("handle_delta_end")},this.onSeqIdUpdated=function(t){e.$1.onSeqIdUpdated&&e.$1.onSeqIdUpdated(t)},this.onMqttConnectivityChanged=function(t){e.$1.onMqttConnectivityChanged&&e.$1.onMqttConnectivityChanged(t)},this.onIrisConnectivityChanged=function(t,n){e.$1.onIrisConnectivityChanged&&e.$1.onIrisConnectivityChanged(t,n)},this.onResnapshotRequested=function(t){e.$1.onResnapshotRequested&&e.$1.onResnapshotRequested(t)},this.$1=t,this.$2=new(o("PolarisDirectLogger")).DirectLogger("DirectDeltaHandlers",n)};l.parsePartialDeltaEmoji=e,l.parseDMSettings=u,l.parseDeltaItem=c,l.stringifyIds=m,l.parseDeltaNumber=p,l.DirectDeltaHandlers=_}),98);
__d("PolarisPinnedQuestionGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="PINNED_QUESTION",s="18005526940184517",u=(function(t){function n(e,n){var o;return o=t.call(this)||this,o.$PinnedQuestionGraphQLEventHandler$p_1=e,o.$PinnedQuestionGraphQLEventHandler$p_2=o.getGraphQLSubsciptionPrefix()+s+"/"+JSON.stringify({input_data:{broadcast_id:String(n.id),client_subscription_id:r("uuidv4")()}}),o}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.processEventMessage=function(n){var t=n.live_active_question_event;if(t!=null){var r={question:t,type:e};this.$PinnedQuestionGraphQLEventHandler$p_1.eventHandler(r)}},a.getSubTopic=function(){return this.$PinnedQuestionGraphQLEventHandler$p_2},a.getType=function(){return o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION},n})(o("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);l.PinnedQuestionGraphQLEventHandler=u}),98);
__d("PolarisQuestionStatusGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="QUESTION_STATUS",s="18027779584026952",u=(function(t){function n(e,n){var o;return o=t.call(this)||this,o.$QuestionStatusGraphQLEventHandler$p_1=e,o.$QuestionStatusGraphQLEventHandler$p_2=o.getGraphQLSubsciptionPrefix()+s+"/"+JSON.stringify({input_data:{broadcast_id:String(n.id),client_subscription_id:r("uuidv4")()}}),o}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.processEventMessage=function(n){var t=n.live_question_submission_status_event;if(t!=null){var r={status:t,type:e};this.$QuestionStatusGraphQLEventHandler$p_1.eventHandler(r)}},a.getSubTopic=function(){return this.$QuestionStatusGraphQLEventHandler$p_2},a.getType=function(){return o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS},n})(o("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);l.QuestionStatusGraphQLEventHandler=u}),98);
__d("PolarisWaveGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","PolarisConfig","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="LIVE_WAVE",s="17882305414154951",u=(function(t){function n(e,n){var a;return a=t.call(this)||this,a.$WaveGraphQLEventHandler$p_1=e,a.$WaveGraphQLEventHandler$p_2=a.getGraphQLSubsciptionPrefix()+s+"/"+JSON.stringify({input_data:{broadcast_id:String(n.id),client_subscription_id:r("uuidv4")(),receiver_id:o("PolarisConfig").getViewerId()},publish_data:{broadcast_id:String(n.id),receiver_id:o("PolarisConfig").getViewerId(),waver_id:String(n.broadcast_owner)}}),a}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.processEventMessage=function(n){var t=n.live_video_wave_event;if(t!=null){var r={type:e,wave:t};this.$WaveGraphQLEventHandler$p_1.eventHandler(r)}},a.getSubTopic=function(){return this.$WaveGraphQLEventHandler$p_2},a.getType=function(){return o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE},n})(o("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);l.WaveGraphQLEventHandler=u}),98);
__d("PolarisDirectGraphQLSubscription",["PolarisBaseGraphQLEventHandler","PolarisBdChallengeGraphQLEventHandler","PolarisDirectBaseSubscription","PolarisDirectLogger","PolarisPinnedQuestionGraphQLEventHandler","PolarisQuestionStatusGraphQLEventHandler","PolarisWaveGraphQLEventHandler","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";var e="/ig_realtime_sub",s=(function(t){function n(n,r,a){var i,l=new(o("PolarisDirectLogger")).DirectLogger("DirectGraphQLSubscription",a);return i=t.call(this,e,[],r,l)||this,i.$DirectGraphQLSubscription$p_2=l,i.$DirectGraphQLSubscription$p_1=n,i.$DirectGraphQLSubscription$p_3=new Map,i.$DirectGraphQLSubscription$p_4(),i.getSubTopics(),i}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.$DirectGraphQLSubscription$p_4=function(){for(var e of Object.keys(o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES))o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES[e]!==o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE&&o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES[e]!==o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION&&!this.$DirectGraphQLSubscription$p_5(o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES[e])&&this.$DirectGraphQLSubscription$p_2.debugTrace("invalid_handler_type")},a.getSubTopics=function(){var e=[];for(var t of this.$DirectGraphQLSubscription$p_3){var n=t[0],o=t[1],a=o.getSubTopic();r("isStringNullOrEmpty")(a)||e.push(a)}return this.updateSubTopics(e),e},a.processMessage=function(n){for(var e of this.$DirectGraphQLSubscription$p_3){var r=e[0],o=e[1];o.processEventMessage(n)}t.prototype.processMessage.call(this,n)},a.enableOrDisableEventHandlerByType=function(t,n){return n?this.$DirectGraphQLSubscription$p_5(t)||this.$DirectGraphQLSubscription$p_2.debugTrace("invalid_handler_type"):this.$DirectGraphQLSubscription$p_3.delete(t),this},a.$DirectGraphQLSubscription$p_5=function(t){this.$DirectGraphQLSubscription$p_3||(this.$DirectGraphQLSubscription$p_3=new Map);var e=this.$DirectGraphQLSubscription$p_6(t);return e!=null?(this.$DirectGraphQLSubscription$p_3.set(t,e),!0):!1},a.$DirectGraphQLSubscription$p_6=function(t){switch(t){case o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.BD_CHALLENGE:return new(o("PolarisBdChallengeGraphQLEventHandler")).BdChallengeGraphQLEventHandler(this.$DirectGraphQLSubscription$p_2.getDebugId());default:return null}},a.enableLiveEventHandler=function(t,n,r){switch(r){case o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE:return this.$DirectGraphQLSubscription$p_3.set(o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE,new(o("PolarisWaveGraphQLEventHandler")).WaveGraphQLEventHandler(n,t)),this;case o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION:return this.$DirectGraphQLSubscription$p_3.set(o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION,new(o("PolarisPinnedQuestionGraphQLEventHandler")).PinnedQuestionGraphQLEventHandler(n,t)),this;case o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS:return this.$DirectGraphQLSubscription$p_3.set(o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS,new(o("PolarisQuestionStatusGraphQLEventHandler")).QuestionStatusGraphQLEventHandler(n,t)),this;default:return this}},a.disableLiveEventHandler=function(t){switch(t){case o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE:return this.$DirectGraphQLSubscription$p_3.delete(o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE),this;case o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION:return this.$DirectGraphQLSubscription$p_3.delete(o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION),this;case o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS:return this.$DirectGraphQLSubscription$p_3.delete(o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS),this;default:return this}},a.unsubscribeGraphQL=function(){this.unsubscribe(),this.enableOrDisableEventHandlerByType(o("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE,!1)},n})(o("PolarisDirectBaseSubscription").DirectBaseSubscription);l.DirectGraphQLSubscription=s}),98);
__d("PolarisDirectIrisSubscription",["FBLogger","PolarisDirectLogger","getErrorSafe","isObject"],(function(t,n,r,o,a,i,l){"use strict";var e=1,s=2,u=1e3,c=64e3,d=(function(){function t(t,n,a,i){var l=this;this.$7=function(){l.$6.logDirectClientEvent("ig_direct_iris_subscription",o("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers.extends({},l.$2,{action:"attempt",attempt_reason:"mqtt-connected"})),l.$1.onIrisConnectivityChanged("Subscribing");var e=JSON.stringify(l.$2);l.$3.publish("/ig_sub_iris",e).catch(function(e){l.$6.logDirectClientEvent("ig_direct_iris_subscription",o("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers.extends({},l.$2,{action:"error",error:JSON.stringify(e)})),l.$1.onIrisConnectivityChanged("Unsubscribed")})},this.$8=function(t){var n;if(typeof t=="string"||t instanceof String)try{n=JSON.parse(t)}catch(e){var a=r("getErrorSafe")(e),i="Could not parse sub iris response $(response)";l.$6.logError(i,a),r("FBLogger")("ig_web").mustfix(i),n={succeeded:!1}}else r("isObject")(t)?n=t:(r("FBLogger")("ig_web").mustfix("Unknown sub iris response $(response)"),n={succeeded:!1});if(n.succeeded===!0)l.$6.logDirectClientEvent("ig_direct_iris_subscription",o("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers.extends({},l.$2,{action:"success"})),l.$1.onIrisConnectivityChanged("Subscribed",l.$2.subscription_type);else if(l.$6.logDirectClientEvent("ig_direct_iris_subscription",o("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers.extends({},l.$2,n,{action:"error"})),l.$1.onIrisConnectivityChanged("Unsubscribed"),n.error_type===e)l.$1.onResnapshotRequested(l.$2);else if(n.error_type===s){var u=l.$4+Math.floor(Math.random()*1e3);window.setTimeout(l.$7,u),l.$4=Math.min(l.$4*2,c)}},this.$6=new(o("PolarisDirectLogger")).DirectLogger("DirectIrisSubscription",i),this.$6.debugTrace("ctor",n),this.$1=t,this.$2=n,this.$3=a,this.$4=u}var n=t.prototype;return n.subscribe=function(){this.$6.debugTrace("subscribe_start"),this.unsubscribe(),this.$3.subscribe("/ig_sub_iris_response",this.$8),this.$7(),this.$6.debugTrace("subscribe_end")},n.unsubscribe=function(){this.$6.debugTrace("unsubscribe_start"),this.$5&&(window.clearTimeout(this.$5),this.$5=null),this.$3.unsubscribe("/ig_sub_iris_response"),this.$1.onIrisConnectivityChanged("Unsubscribed"),this.$6.debugTrace("unsubscribe_end")},t})();l.DirectIrisSubscription=d}),98);
__d("PolarisDirectSkywalkerSubscription",["PolarisConfig","PolarisDirectBaseSubscription","PolarisDirectLogger","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e="/pubsub",s=(function(t){function n(n,a,i){var l,s=new(o("PolarisDirectLogger")).DirectLogger("DirectSkywalkerSubscription",i);return l=t.call(this,e,["ig/u/v1/"+r("nullthrows")(o("PolarisConfig").getViewerId())],a,s)||this,l.$DirectSkywalkerSubscription$p_2=s,l.$DirectSkywalkerSubscription$p_1=n,l}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.parsePayload=function(n){return n.indexOf("/activity_indicator_id/")===-1?(this.$DirectSkywalkerSubscription$p_2.debugTrace("not_activity_indicator_message"),null):t.prototype.parsePayload.call(this,n)},a.processMessage=function(n){var e=n.data,r=n.event;if(r!=="patch"){this.$DirectSkywalkerSubscription$p_2.debugTrace("skipped_message",{event:r});return}if(!Array.isArray(e)){this.$DirectSkywalkerSubscription$p_2.debugTrace("parsed_message_bad_data",typeof e);return}for(var o of e)this.$DirectSkywalkerSubscription$p_1.handleDelta(o,"");t.prototype.processMessage.call(this,n)},n})(o("PolarisDirectBaseSubscription").DirectBaseSubscription);l.DirectSkywalkerSubscription=s}),98);
__d("PolarisLiveDeltaHandler",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){this.eventHandler=t};i.default=e}),66);
__d("PolarisMqttEnv",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({messenger_uses_mqtt_rollout:2,mqtt_ep_with_sid:0,mqtt_fast_lp:11,mqtt_lp_use_fetch:9,mqtt_waterfall_log_client_sampling:1,mqtt_ws_forced_polling_only:4,mqtt_ws_polling_enabled:3,mqtt_ws_reconnect_reset:7}),l=(function(){function e(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}var t=e.prototype;return t.random=function(){return this.$1!=null?this.$1():Math.random()},t.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0},t.clearTimeout=function(t){if(this.$3!=null){this.$3(t);return}window.clearTimeout(t)},t.setTimeout=function(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),o=2;o<e;o++)r[o-2]=arguments[o];return this.$4!=null?this.$4.apply(null,arguments):window.setTimeout.apply(null,arguments)},t.getLoggerInstance=function(){return this.$5!=null?this.$5():s.getInstance()},t.genGk=function(t){return this.$6!=null?this.$6(t):!1},t.createSocket=function(t,n){return this.$7!=null?this.$7(t,n):new WebSocket(t)},t.scheduleCallback=function(t){return this.$8!=null?this.$8(t):t()},t.scheduleLoggingCallback=function(t){return this.$9!=null?this.$9(t):t()},t.configRead=function(t,n){return this.$10!=null?this.$10(t,n):n},t.configWrite=function(t,n){this.$11!=null&&this.$11(t,n)},t.initialize=function(t,n,r,o,a,i,l,s,u,c,d){this.$1=t,this.$2=n,this.$3=r,this.$4=o,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,this.$10=c,this.$11=d},e})(),s=(function(){function e(){}e.getInstance=function(){return new e};var t=e.prototype;return t.setAppId=function(t){},t.eventLogConnect=function(t){var e=t.attemptNumber,n=t.connectionStatus,r=t.duration,o=t.errorCode,a=t.errorMessage,i=t.failTotal,l=t.hostname,s=t.publishes,u=t.sessionID,c=t.subscribedTopics,d=t.successTotal},t.eventLogPull=function(t){var e=t.duration,n=t.errorMessage,r=t.hostname,o=t.pullEventName,a=t.sessionID,i=t.status},t.eventLogDisconnect=function(t){var e=t.duration,n=t.errorCode,r=t.errorMessage,o=t.sessionID},t.eventLogPublish=function(t){var e=t.connectionStatus,n=t.publishStatus,r=t.sessionID,o=t.topic},t.eventLogMiscellaneousError=function(t){var e=t.errorMessage},t.logError=function(t,n){},t.logErrorWarn=function(t,n){},t.logWarn=function(t,n){},t.debugTrace=function(t,n){},t.bumpCounter=function(t){},e})(),u={Env:new l,MqttGkNames:e};i.default=u}),66);
__d("PolarisIrisSubscribeChecker",["PolarisMqttEnv"],(function(t,n,r,o,a,i){"use strict";var e=n("PolarisMqttEnv").Env,l=n("PolarisMqttEnv").MqttGkNames,s=(function(){function t(t){if(this.$1=e.getLoggerInstance(),this.$2=null,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=!0,this.$7=0,this.$8=t,typeof window!="undefined"){var n=window.location.hostname;(n==="m.facebook.com"||n==="mobile.facebook.com"||n==="mtouch.facebook.com")&&(this.$6=!1)}e.genGk(l.messenger_uses_mqtt_rollout)||(this.$6=!1)}var n=t.prototype;return n.start=function(){this.$6=!0},n.stop=function(){this.$6=!1,this.$9()},n.onConnectAttempt=function(){},n.onConnectFailure=function(){this.$9()},n.onConnected=function(){var t=this;this.$7++,this.$9(),this.$3=!1,this.$4=!1,this.$5=!1,this.$6&&(this.$2=e.setTimeout(function(){t.$10()},8e3))},n.onConnectSuccess=function(){},n.onConnectionLost=function(){this.$9()},n.onSubscribe=function(t){t==="/t_ms"&&(this.$3=!0)},n.onUnsubscribe=function(t){},n.onPublish=function(t){(t==="/messenger_sync_get_diffs"||t==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))},n.onMessage=function(t){},n.onWSFatal=function(){},n.$9=function(){this.$2&&(e.clearTimeout(this.$2),this.$2=null)},n.$10=function(){if(this.$4===!1){var e=this.$7===1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(e),this.$1.eventLogMiscellaneousError({errorMessage:e}),this.$8()?this.$1.bumpCounter(e+".withProvider"):this.$1.bumpCounter(e+".withoutProvider"),this.$3===!0?this.$1.bumpCounter(e+".withTopicSubscribe"):this.$1.bumpCounter(e+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe"),this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")},t})();a.exports=s}),null);
__d("PolarisMqttAnalyticsHook",["InstagramODS","PolarisMqttEnv"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=r("PolarisMqttEnv").Env.getLoggerInstance(),this.$2=0,this.$3=0,this.$4=0,this.$5=0,r("InstagramODS").incr("web.mqtt.session_start"),r("PolarisMqttEnv").Env.isUserLoggedInNow()||r("InstagramODS").incr("web.mqtt.session_start.logout")}var t=e.prototype;return t.onConnectAttempt=function(){r("InstagramODS").incr("web.mqtt.ws_connect_attempt")},t.onConnectFailure=function(){this.$3++,r("InstagramODS").incr("web.mqtt.ws_connect_failure")},t.onConnected=function(){r("InstagramODS").incr("web.mqtt.ws_connect_connected")},t.onConnectSuccess=function(){this.$2===0&&r("InstagramODS").incr("web.mqtt.ws_connect_first_success"),this.$2++,r("InstagramODS").incr("web.mqtt.ws_connect_success")},t.onConnectionLost=function(){r("InstagramODS").incr("web.mqtt.ws_disconnect")},t.onSubscribe=function(t){},t.onUnsubscribe=function(t){},t.onPublish=function(t){r("InstagramODS").incr("web.mqtt.ws_publish")},t.onMessage=function(t){r("InstagramODS").incr("web.mqtt.message_arrived")},t.onWSFatal=function(){r("InstagramODS").incr("web.mqtt.ws_fatal")},t.onPollRequestSent=function(){r("InstagramODS").incr("web.mqtt.polling_request_send")},t.onPollRequestSuccess=function(){r("InstagramODS").incr("web.mqtt.polling_request_succeed"),this.$4===0&&r("InstagramODS").incr("web.mqtt.polling_first_success"),this.$4++},t.onPollResponse=function(){r("InstagramODS").incr("web.mqtt.lp.message_arrived")},t.onPollFinish=function(){},t.onPollRequestFailed=function(){r("InstagramODS").incr("web.mqtt.polling_request_failed"),this.$5++},e})();l.default=e}),98);
__d("PolarisMqttConnectionHookCollection",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Set}var t=e.prototype;return t.addHook=function(t){this.$1.add(t)},t.removeHook=function(t){this.$1.delete(t)},t.onConnectAttempt=function(){this.$1.forEach(function(e){e.onConnectAttempt()})},t.onConnectFailure=function(){this.$1.forEach(function(e){e.onConnectFailure()})},t.onConnected=function(){this.$1.forEach(function(e){e.onConnected()})},t.onConnectSuccess=function(){this.$1.forEach(function(e){e.onConnectSuccess()})},t.onConnectionLost=function(){this.$1.forEach(function(e){e.onConnectionLost()})},t.onSubscribe=function(t){this.$1.forEach(function(e){e.onSubscribe(t)})},t.onUnsubscribe=function(t){this.$1.forEach(function(e){e.onUnsubscribe(t)})},t.onPublish=function(t){this.$1.forEach(function(e){e.onPublish(t)})},t.onMessage=function(t){this.$1.forEach(function(e){e.onMessage(t)})},t.onWSFatal=function(){this.$1.forEach(function(e){e.onWSFatal()})},e})();i.default=e}),66);
__d("PolarisMqttProtocolUtils",["PolarisMqttEnv"],(function(t,n,r,o,a,i){"use strict";var e=n("PolarisMqttEnv").Env;function l(e,t){if(e==null)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function s(e,t){var n=t,r=0,o=1,a;do{if(n===e.length)return null;a=e[n++],r+=(a&127)*o,o*=128}while((a&128)!==0);return{offset:n,value:r}}function u(e){for(var t=e,n=new Array(1),r=0;r<4;r++){var o=t%128;if(t>>=7,t>0)n[r]=o|128;else{n[r]=o;break}}return n}function c(e,t,n){var r=n;return t[r++]=e>>8,t[r++]=e%256,r}function d(e,t){return 256*e[t]+e[t+1]}function m(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);o<128?t+=1:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,n++):t+=3}return t}function p(e,t,n,r){var o=c(t,n,r);return _(e,n,o),o+t}function _(e,t,n){for(var r=n,o=0,a=e.length;o<a;o++){var i=e.charCodeAt(o);i<128?t[r++]=i:i<2048?(t[r++]=192|i>>6,t[r++]=128|i&63):i<55296||i>=57344?(t[r++]=224|i>>12,t[r++]=128|i>>6&63,t[r++]=128|i&63):(i=65536+((i&1023)<<10|e.charCodeAt(++o)&1023),t[r++]=240|i>>18,t[r++]=128|i>>12&63,t[r++]=128|i>>6&63,t[r++]=128|i&63)}}function f(e,t,n){for(var r=[],o=t,a=0;o<t+n;){var i=e[o++];if(i<128)r[a++]=String.fromCharCode(i);else if(i>191&&i<224){var l=e[o++];r[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){var s=e[o++],u=e[o++],c=e[o++],d=((i&7)<<18|(s&63)<<12|(u&63)<<6|c&63)-65536;r[a++]=String.fromCharCode(55296+(d>>10)),r[a++]=String.fromCharCode(56320+(d&1023))}else{var m=e[o++],p=e[o++];r[a++]=String.fromCharCode((i&15)<<12|(m&63)<<6|p&63)}}return r.join("")}var g=(function(){function t(e,t,n){this.$1=e*1e3,this.$4=t,this.$5=n,this.$3=!1}var n=t.prototype;return n.$6=function(){var t=this;this.$3?(this.$3=!1,this.$4(),this.$2=e.setTimeout(function(){t.$6()},this.$1)):this.$5()},n.reset=function(){var t=this;this.$3=!0,this.$2&&(e.clearTimeout(this.$2),this.$2=null),this.$1>0&&(this.$2=e.setTimeout(function(){t.$6()},this.$1))},n.cancel=function(){this.$2&&(e.clearTimeout(this.$2),this.$2=null)},t})();a.exports={Pinger:g,UTF8Length:m,concatBuffers:l,convertStringToUTF8:_,convertUTF8ToString:f,decodeMultiByteInt:s,encodeMultiByteInt:u,readUInt16BE:d,writeString:p,writeUInt16BE:c}}),null);
__d("PolarisMqttUtils",["PolarisMqttEnv","err","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e={endpointWithExtraParameter:function(t,n,r){return t.indexOf("?")>0?t+"&"+n+"="+r:t+"?"+n+"="+r},endpointWithExtraParameters:function(n,r){var t=n;return r.forEach(function(n,r){t=e.endpointWithExtraParameter(t,r,n)}),t},endpointWithSessionId:function(n,o){return r("PolarisMqttEnv").Env.genGk(r("PolarisMqttEnv").MqttGkNames.mqtt_ep_with_sid)?e.endpointWithExtraParameter(n,"sid",o.toString()):n},generateSessionId:function(){return Math.floor(r("PolarisMqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)},hasWSSupport:function(){return"WebSocket"in t&&t.WebSocket!==null},promiseDone:function(t,n,o){var e=arguments.length>1?t.then(n,o):t;r("promiseDone")(e.then(null,function(e){r("PolarisMqttEnv").Env.setTimeout(function(){throw e instanceof Error?e:r("err")("promiseDone")},0)}))},sprintf:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=0;return t.replace(/%s/g,function(){return String(n[o++])})}},s=e;l.default=s}),98);
__d("PolarisMqttProtocolCodec",["PolarisMqttProtocolUtils","PolarisMqttUtils"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("PolarisMqttProtocolUtils")).UTF8Length,s=e.convertStringToUTF8,u=e.convertUTF8ToString,c=e.decodeMultiByteInt,d=e.encodeMultiByteInt,m=e.readUInt16BE,p=e.writeString,_=e.writeUInt16BE,f=n("PolarisMqttUtils").sprintf,g=Object.freeze({CONNACK:2,CONNECT:1,DISCONNECT:14,PINGREQ:12,PINGRESP:13,PUBACK:4,PUBLISH:3,SUBACK:9,SUBSCRIBE:8,UNSUBACK:11,UNSUBSCRIBE:10}),h=[0,6,77,81,73,115,100,112,3];function y(e,t){var n=t,r=n,o=e[n],a=o>>4;n+=1;var i=c(e,n);if(i==null)return{position:r,wireMessage:null};n=i.offset;var l=n+i.value;if(l>e.length)return{position:r,wireMessage:null};var s;switch(a){case g.CONNACK:{var d=e[n++],p=!!(d&1),_=e[n++];s=new L(p,_);break}case g.PUBLISH:{var h=o&15,y=h>>1&3,C=m(e,n);n+=2;var b=u(e,n,C);n+=C;var S=null;y===1&&(S=m(e,n),n+=2);var k=T.createWithBytes(e.subarray(n,l)),I=(h&1)===1,x=(h&8)===8;s=new D(b,k,y,S,I,x);break}case g.PINGREQ:s=new v("PINGREQ");break;case g.PINGRESP:s=new v("PINGRESP");break;case g.PUBACK:case g.UNSUBACK:{var $=m(e,n);s=new E(a===g.PUBACK?"PUBACK":"UNSUBACK",$);break}case g.SUBACK:{var P=m(e,n);n+=2;var N=e.subarray(n,l);s=new R(P,N);break}default:throw new Error(f("Invalid MQTT message type %s.",a))}return{position:l,wireMessage:s}}function C(e){for(var t=[],n=0;n<e.length;){var r=y(e,n),o=r.wireMessage;if(n=r.position,o)t.push(o);else break}var a=null;return n<e.length&&(a=e.subarray(n)),{messages:t,remaining:a}}var b=(function(){function e(e){this.messageType=g[e]}var t=e.prototype;return t.encode=function(){throw new TypeError("Cannot abstract class WireMessage")},e})(),v=(function(e){function t(t){return e.call(this,t)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=new ArrayBuffer(2),t=new Uint8Array(e);return t[0]=(this.messageType&15)<<4,e},t})(b),S=(function(e){function t(){return e.call(this,"DISCONNECT")||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=new ArrayBuffer(2),n=new Uint8Array(t);return n[0]=e,n.set(d(0),1),t},t})(b),R=(function(e){function t(t,n){var r;return r=e.call(this,"SUBACK")||this,r.messageIdentifier=t,r.returnCode=n,r}return babelHelpers.inheritsLoose(t,e),t})(b),L=(function(e){function t(t,n){var r;return r=e.call(this,"CONNACK")||this,r.sessionPresent=t,r.returnCode=n,r}return babelHelpers.inheritsLoose(t,e),t})(b),E=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.messageIdentifier=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=2,n=d(t),r=n.length+1,o=new ArrayBuffer(t+r),a=new Uint8Array(o);return a[0]=e,a.set(n,1),r=_(this.messageIdentifier,a,r),o},t})(b),k=(function(e){function t(t,n){var r;return r=e.call(this,"CONNECT")||this,r.clientId=t,r.connectOptions=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=h.length+3;t+=l(this.clientId)+2,t+=l(this.connectOptions.userName)+2;var n=d(t),r=new ArrayBuffer(1+n.length+t),o=new Uint8Array(r);o[0]=e;var a=1;o.set(n,1),a+=n.length,o.set(h,a),a+=h.length;var i=130;return o[a++]=i,a=_(this.connectOptions.keepAliveInterval,o,a),a=p(this.clientId,l(this.clientId),o,a),a=p(this.connectOptions.userName,l(this.connectOptions.userName),o,a),r},t})(b),I=(function(e){function t(t,n,r,o){var a;if(a=e.call(this,t)||this,a.topic=n,r<0&&r>1||r===1&&o==null)throw new TypeError(f("Argument Invalid. qos: %s messageType: %s.",r,t));return a.qos=r,a.messageIdentifier=o,a}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4;e|=2;var t=l(this.topic),n=2+t+2;this.messageType===g.SUBSCRIBE&&(n+=1);var r=d(n),o=new ArrayBuffer(1+r.length+n),a=new Uint8Array(o);a[0]=e;var i=1;return a.set(r,1),i+=r.length,this.messageIdentifier!=null&&(i=_(this.messageIdentifier,a,i)),i=p(this.topic,t,a,i),this.messageType===g.SUBSCRIBE&&this.qos!=null&&(a[i++]=this.qos),o},t})(b),T=(function(){function e(e,t){this.payloadString=e,this.payloadBytes=t}e.createWithString=function(n){var t=new Uint8Array(new ArrayBuffer(l(n)));return s(n,t,0),new e(n,t)},e.createWithBytes=function(n){for(var t=0,r=n.length;t<n.length&&n[t]!==123&&n[t]!==91;)t++,r--;var o=u(n,t,r),a=n.subarray(t,r);return new e(o,a)};var t=e.prototype;return t.string=function(){return this.payloadString},t.bytes=function(){return this.payloadBytes},e})(),D=(function(e){function t(t,n,r,o,a,i){var l;if(l=e.call(this,"PUBLISH")||this,l.topic=t,l.payloadMessage=n,l.qos=r,l.messageIdentifier=o,l.retained=a!=null?a:!1,l.duplicate=i!=null?i:!1,l.qos===1&&l.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return l}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4;this.duplicate&&(e|=8),e=e|=this.qos<<1,this.retained&&(e|=1);var t=l(this.topic),n=t+2;n+=this.messageIdentifier==null?0:2;var r=this.payloadMessage.bytes();n+=r.byteLength;var o=d(n),a=new ArrayBuffer(1+o.length+n),i=new Uint8Array(a);i[0]=e,i.set(o,1);var s=1+o.length;return s=p(this.topic,t,i,s),this.messageIdentifier!=null&&(s=_(this.messageIdentifier,i,s)),i.set(r,s),a},t})(b);a.exports={MESSAGE_TYPE:g,WireMessage:{Base:b,ConnAck:L,Connect:k,Disconnect:S,Ping:v,PubAckUnsubAck:E,Publish:D,Subscription:I},createMessageWithString:T.createWithString,decodeByteMessages:C,decodeMessage:y}}),null);
__d("PolarisMqttTypes",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n){this.errorCode=t,this.errorMessage=n},l=function(t,n){this.mqttError=t,this.connAck=n},s=(function(e){function t(t,n,r){var o;return r===void 0&&(r=null),o=e.call(this,n)||this,o.isRecoverable=t,o.originalError=r,o}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));a.exports={ConnectFailure:l,MqttChannelError:s,MqttError:e}}),null);
__d("PolarisMqttProtocolClient",["PolarisMqttEnv","PolarisMqttProtocolCodec","PolarisMqttProtocolUtils","PolarisMqttTypes"],(function(t,n,r,o,a,i){"use strict";var e,l=n("PolarisMqttEnv").Env,s=(e=n("PolarisMqttProtocolCodec")).MESSAGE_TYPE,u=e.WireMessage,c=e.createMessageWithString,d=e.decodeByteMessages,m=n("PolarisMqttProtocolUtils").Pinger,p=n("PolarisMqttProtocolUtils").concatBuffers,_=n("PolarisMqttTypes").ConnectFailure,f=n("PolarisMqttTypes").MqttError,g=30,h=6e4,y={APP_DISCONNECT:new f(7,"Disconnect initiated by app"),CONNACK_FAILURE:new f(5,"Connection failure due to connack"),CONNECT_TIMEOUT:new f(4,"Connect timed out"),INVALID_DATA_TYPE:new f(3,"Received non-arraybuffer from socket."),PING_TIMEOUT:new f(6,"Ping timeout"),SERVER_DISCONNECT:new f(8,"Disconnect message sent my server"),SOCKET_CLOSE:new f(9,"Socket connection closed"),SOCKET_ERROR:new f(1,"Socket error"),SOCKET_MESSAGE:new f(2,"Unable to parse invalid socket message")},C=(function(){function e(e){var t=this;this.$11=function(e,n){var r=t.$5,o=t.$2,a=o.onConnectFailure,i=o.onConnectionLost;t.setConnected(!1),r?l.scheduleCallback(function(){i(e)}):l.scheduleCallback(function(){a(new _(e,n!=null?n:-1))}),t.$13()},this.$12=function(e){var n=t.$6;n!=null&&n.readyState===n.OPEN&&n.send(e.encode())},this.handleMessage=function(e){switch(e.messageType){case s.CONNACK:if(t.$7!=null&&(l.clearTimeout(t.$7),t.$7=null),e instanceof u.ConnAck){var n=e;if(n.returnCode!==0){t.$9.bumpCounter("protocol.error.connack.invalidreturncode"),t.setConnected(!1),t.$11(y.CONNACK_FAILURE,n.returnCode);return}l.scheduleCallback(function(){t.$2.onConnectSuccess()}),t.$8!=null&&t.$8.reset()}break;case s.PUBLISH:if(e instanceof u.Publish){var r=e;l.scheduleCallback(function(){t.$2.onMessageArrived(r.topic,r.payloadMessage.payloadString)});var o=r.messageIdentifier;if(t.$9.bumpCounter("protocol.publish.received"),r.qos===1&&o!=null){var a=new u.PubAckUnsubAck("PUBACK",o);t.$12(a)}}break;case s.PUBACK:if(e instanceof u.PubAckUnsubAck){var i=e,c=i.messageIdentifier;t.$9.bumpCounter("protocol.puback.received"),l.scheduleCallback(function(){t.$2.onMessageDelivered(c)})}break;case s.PINGRESP:t.$8!=null&&t.$8.reset();break;case s.DISCONNECT:t.$11(y.SERVER_DISCONNECT);break;case s.SUBACK:t.$9.bumpCounter("protocol.suback.received");break;case s.UNSUBACK:t.$9.bumpCounter("protocol.unsuback.received");break;default:t.$9.logError(new Error("MqttProtocolClient: Received unhandled message type: "+e.messageType),"Received unhandled message type"),t.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}},this.$3=e,this.$2={ignoreSubProtocol:!1,keepAliveInterval:10,mqttVersion:3,onConnectFailure:function(t){},onConnection:function(){},onConnectionError:function(t){},onConnectionLost:function(t){},onConnectSuccess:function(){},onMessageArrived:function(t,n){},onMessageDelivered:function(t){},userName:""},this.$1="mqttwsclient",this.$4=0,this.$5=!1,this.$9=l.getLoggerInstance()}var t=e.prototype;return t.connect=function(t){var e=this;if(this.$5)throw new Error("Invalid state: connect - already connected");this.$2=t,this.setConnected(!1),this.$7!=null&&(l.clearTimeout(this.$7),this.$7=null),this.$7=l.setTimeout(function(){e.$9.bumpCounter("protocol.error.connect.timeout"),e.$11(y.CONNECT_TIMEOUT)},g*1e3),this.$6=l.createSocket(this.$3),this.$6.binaryType="arraybuffer",this.$6.onopen=function(){e.setConnected(!0),e.$12(new u.Connect(e.$1,t)),t.onConnection()},this.$6.onmessage=function(t){var n=t.data;if(!(n instanceof ArrayBuffer)){e.$9.bumpCounter("protocol.error.onmessage.type"),e.$11(y.INVALID_DATA_TYPE);return}try{var r=new Uint8Array(n);e.$10!=null&&(r=p(e.$10,r),e.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete e.$10,e.$10=null);var o=d(r),a=o.messages;e.$10=o.remaining;for(var i=0;i<a.length;i++)e.handleMessage(a[i])}catch(t){e.$10=null,e.$9.logError(t,y.SOCKET_MESSAGE.errorMessage),e.$9.bumpCounter("protocol.error.onmessage.parse"),e.$11(y.SOCKET_MESSAGE)}},this.$6.onerror=function(t){e.$9.bumpCounter("protocol.error.socket"),e.$11(y.SOCKET_ERROR)},this.$6.onclose=function(t){e.$9.bumpCounter("protocol.socket.close"),e.$11(y.SOCKET_CLOSE)},this.$8!=null&&this.$8.cancel(),this.$8=new m(t.keepAliveInterval,this.$12.bind(this,new u.Ping("PINGREQ")),this.$11.bind(this,y.PING_TIMEOUT))},t.$13=function(){this.setConnected(!1),this.$8!=null&&this.$8.cancel(),this.$7!=null&&(l.clearTimeout(this.$7),this.$7=null),this.$6!=null&&(this.$6.onopen=function(e){},this.$6.onmessage=function(e){},this.$6.onerror=function(e){},this.$6.onclose=function(e){},this.$6.readyState===this.$6.OPEN&&this.$6.close(),delete this.$6,this.$6=null),this.$2.onConnectSuccess=function(){},this.$2.onConnectFailure=function(e){},this.$2.onConnection=function(){},this.$2.onConnectionError=function(e){},this.$2.onConnectionLost=function(e){},this.$2.onMessageArrived=function(e,t){},this.$2.onMessageDelivered=function(e){}},t.disconnect=function(){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$13();return}this.$12(new u.Disconnect),this.$9.bumpCounter("protocol.debug.disconnect"),this.$11(y.APP_DISCONNECT)},t.isConnected=function(){return this.$5},t.setConnected=function(t){this.$5=t},t.subscribe=function(t){if(!this.$5)throw this.$9.bumpCounter("protocol.error.subscribe.notconnected"),new Error("Invalid state: subscribe - not connected");this.$9.bumpCounter("protocol.subscribe."+t);var e=new u.Subscription("SUBSCRIBE",t,0,this.$14());this.$12(e)},t.unsubscribe=function(t){if(!this.$5)throw this.$9.bumpCounter("protocol.error.unsubscribe.notconnected"),new Error("Invalid state: unsubscribe - not connected");this.$9.bumpCounter("protocol.unsubscribe."+t);var e=new u.Subscription("UNSUBSCRIBE",t,0,this.$14());this.$12(e)},t.publish=function(t,n,r){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected"),this.$9.bumpCounter("protocol.publish."+t);var e=this.$14(),o=new u.Publish(t,c(n),r,e);return this.$12(o),e},t.$14=function(){return++this.$4===h&&(this.$4=1),this.$4},e})();a.exports=C}),null);
__d("PolarisMqttUserName",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n,r,o,a,i){this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=o,this.$6=a,this.$8=i,this.$7=typeof document=="object"&&document&&document.hasFocus()}var t=e.prototype;return t.gen=function(t,n,r){var e={a:navigator.userAgent,aid:this.$5,asi:void 0,chat_on:this.$6,cp:this.$3,ct:"cookie_auth",d:this.$4,dc:"",ecp:this.$2,fg:this.$7,mqtt_sid:"",no_auto_fg:!0,pm:r,s:t,st:n,u:this.$1};return this.$8&&this.$8.appSpecificInfo&&(e.asi=this.$8.appSpecificInfo),JSON.stringify(e)},t.setForegroundState=function(t){this.$7=t},t.setChatVisibility=function(t){this.$6=t},e})();i.default=e}),66);
__d("PolarisMqttConnection",["InstagramODS","PolarisMqttConnectionHookCollection","PolarisMqttEnv","PolarisMqttProtocolClient","PolarisMqttTypes","PolarisMqttUserName","PolarisMqttUtils","Promise","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=10,u="publish",c="subscribe",d="unsubscribe";function m(e){}var p=18e4,_=5*1e3,f=15,g=21,h=(function(){function t(e){this.$8=!1,this.$10=r("PolarisMqttEnv").Env.getLoggerInstance(),this.$11="Disconnected",this.$14=new Set,this.$15=new Map,this.$17=0,this.$18=0,this.$12=0,this.$13=0,this.$8=!1,this.$5="",this.$6=new(r("PolarisMqttUserName"))("0",0,1,"",0,!0),this.$9=0,this.$7=null;var t=function(){};this.$1=t,this.$2=t,this.$3=t,this.$19=new(r("PolarisMqttConnectionHookCollection")),this.$4=function(){return[]},this.$16=e}var o=t.prototype;return o.run=function(t){var e=this,n=t.endpoint,r=t.extraConnectMessageProvider,o=t.mqttUserName,a=t.onJSError,i=t.onMessageReceived,l=t.onStateChange,s=t.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=l,this.$3=i,this.$5=n,this.$6=o,this.$8=!0,this.$12=0,this.$2=a||m,s&&s.forEach(function(t){return e.$14.add(t)}),this.$4=r,this.$20()},o.shutdown=function(){this.$21(),this.$22("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")},o.subscribe=function(t){return this.$14.add(t),this.ensureConnected(c)&&this.$23(t),!0},o.publish=function(r,o,a){var t={reject:function(t){},resolve:function(){}},i=new(e||(e=n("Promise")))(function(e,n){t.resolve=e,t.reject=n}),l=this.ensureConnected(u),s="connection_unknown";if(!l)s="connection_not_connected",t.reject(new Error("Client disconnected"));else{var c=this.$24(r,o,a,t);s=c===!0?"connection_published":"connection_failed"}return this.$10.eventLogPublish({connectionStatus:l,publishStatus:s,sessionID:this.$9,topic:r}),i},o.unsubscribe=function(t){return this.$14.delete(t),this.ensureConnected(d)&&this.$25(t),!0},o.addHook=function(t){this.$19.addHook(t)},o.removeHook=function(t){this.$19.removeHook(t)},o.isRunning=function(){return this.$8},o.getSessionId=function(){return this.$9},o.ensureConnected=function(t){if(!this.$8)return this.$10.debugTrace("ensureConnected","Mqtt connection: "+t+" called when not running"),!1;if(this.$7==null)return this.$10.debugTrace("ensureConnected","Mqtt connection: "+t+" called when not connected, ignored"),!1;var e=this.$7.isConnected();return e?!0:(this.$10.debugTrace("ensureConnected","Mqtt connection: "+t+" called with client not connected"),!1)},o.connectionState=function(){return this.$11},o.testOnlyGetSubscribedTopics=function(){return this.$14},o.$21=function(){this.$8&&this.$7!=null&&(this.$26("Disconnected"),this.$7!=null&&this.$7.disconnect(),this.$7=null)},o.$26=function(t){t!==this.$11&&(this.$11=t,this.$1(t))},o.$20=function(){var e=this;if(this.$8){this.$26("Connecting");var t=Date.now();this.$9=r("PolarisMqttUtils").generateSessionId();var n=Array.from(this.$14),o=r("PolarisMqttUtils").endpointWithSessionId(this.$5,this.$9);try{this.$7=new(r("PolarisMqttProtocolClient"))(o);var a=this.$27(),i=a.map(function(e){return e.topic}),l=this.$6.gen(this.$9,n,a);this.$7!=null&&(this.$7.connect({ignoreSubProtocol:!0,keepAliveInterval:s,mqttVersion:3,onConnectFailure:function(o){return e.$28(o,t,n,i)},onConnection:function(){return e.$29(a,n)},onConnectionError:function(n){return e.$30(n)},onConnectionLost:function(n){return e.$31(n)},onConnectSuccess:function(){return e.$32(t,n,i)},onMessageArrived:function(n,r){return e.$33(n,r)},onMessageDelivered:function(n){return e.$34(n)},userName:l}),r("InstagramODS").incr("web.mqtt.protocol.connectattempt"),this.$19.onConnectAttempt())}catch(e){var u=r("getErrorSafe")(e);r("InstagramODS").incr("web.mqtt.js_error_in_init_exception"),this.$26("Disconnected"),this.$35(!1,t,n,[],14,u.message),u&&this.$10.logErrorWarn(u,"ws_js_error"),this.$19.onWSFatal(),this.$36(new(r("PolarisMqttTypes")).MqttChannelError(!1,"ws_js_error",u),"client_init")}}},o.$27=function(){var e=this.$4(),t=65536;return e.map(function(e){return e.messageId=t--,e})},o.$23=function(t){try{if(this.$7!=null)return this.$7.subscribe(t),this.$10.debugTrace("#doSubscribe","Subscribing to "+t),this.$19.onSubscribe(t),r("InstagramODS").incr("web.mqtt.protocol.subscribe"),!0}catch(t){var e=r("getErrorSafe")(t);this.$10.logError(e,"Exception subscribing"),r("InstagramODS").incr("web.mqtt.subscribe_exception"),r("InstagramODS").incr("web.mqtt.protocol.subscribe.error")}return!1},o.$25=function(t){try{if(this.$7!=null)return this.$7.unsubscribe(t),this.$10.debugTrace("#doUnsubscribe","Unsubscribing to "+t),this.$19.onUnsubscribe(t),r("InstagramODS").incr("web.mqtt.protocol.unsubscribe"),!0}catch(t){var e=r("getErrorSafe")(t);this.$10.logError(e,"Exception unsubscribing"),r("InstagramODS").incr("web.mqtt.unsubscribe_exception"),r("InstagramODS").incr("web.mqtt.protocol.unsubscribe.error")}return!1},o.$24=function(t,n,o,a){if(this.$7!=null)try{var e=this.$7.publish(t,n,o);r("InstagramODS").incr("web.mqtt.protocol.publish");var i=e!=null?e:"null";return this.$10.debugTrace("#doPublish","publish "+t+" with messageId:"+i+" qos:"+o),this.$19.onPublish(t),e!=null?this.$15.set(e,a):a.resolve(),!0}catch(e){var l=r("getErrorSafe")(e);return this.$10.logError(l,"Exception publishing"),r("InstagramODS").incr("web.mqtt.publish_exception"),a.reject(l),r("InstagramODS").incr("web.mqtt.protocol.publish.error"),!1}else return!1},o.$37=function(t){var e=this;if(t===void 0&&(t=null),!!this.$8){this.$21(),this.$22("reconnect"),this.$38(),this.$9=-1,this.$13=0;var n=t!=null?t:Math.pow(2,Math.min(this.$12,6))*(1e3+r("PolarisMqttEnv").Env.random()*200);this.$10.debugTrace("#scheduleReconnect","Reconnect in "+n+" ms"),r("PolarisMqttEnv").Env.setTimeout(function(){e.$20()},n),this.$12+=1}},o.$38=function(){if(r("PolarisMqttEnv").Env.genGk(r("PolarisMqttEnv").MqttGkNames.mqtt_ws_reconnect_reset)){var e=Date.now()-this.$13,t=this.$13!==0&&e>_,n=this.$12>f;(t||n)&&(this.$12=0),this.$13!==0&&e<=_&&r("InstagramODS").incr("web.mqtt.short_lived_session"),n&&r("InstagramODS").incr("web.mqtt.connection_attempt_limit")}},o.$35=function(t,n,r,o,a,i){t===!0?this.$18++:this.$17++,this.$10.eventLogConnect({attemptNumber:this.$12,connectionStatus:t,duration:Date.now()-n,errorCode:a,errorMessage:i,failTotal:this.$17,hostname:this.$5,publishes:o,sessionID:this.$9,subscribedTopics:r,successTotal:this.$18})},o.$28=function(t,n,o,a){var e=t.mqttError,i=e.errorMessage;if(this.$10.debugTrace("connect","Connect failed "+i),r("InstagramODS").incr("web.mqtt.protocol.onconnectfailure"),this.$19.onConnectFailure(),this.$35(!1,n,o,a,e.errorCode,i),t.connAck!=null&&(r("InstagramODS").incr("web.mqtt.protocol.connect_failure"),t.connAck===g)){this.$37(p);return}this.$37()},o.$29=function(t,n){var e=this;r("InstagramODS").incr("web.mqtt.protocol.onconnection"),this.$10.debugTrace("Connect","Socket established"),this.$19.onConnected(),n.forEach(function(t){e.$19.onSubscribe(t)}),t.forEach(function(t){e.$19.onPublish(t.topic)}),this.$26("TransportConnected")},o.$32=function(t,n,o){r("InstagramODS").incr("web.mqtt.protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$19.onConnectSuccess(),this.$35(!0,t,n,o),this.$26("Connected"),this.$39(n),r("PolarisMqttEnv").Env.genGk(r("PolarisMqttEnv").MqttGkNames.mqtt_ws_reconnect_reset)||(this.$12=0),this.$13=Date.now()},o.$31=function(t){r("InstagramODS").incr("web.mqtt.protocol.onconnectionlost"),t.errorCode&&this.$10.eventLogDisconnect({duration:Date.now()-this.$13,errorCode:t.errorCode,errorMessage:t.errorMessage,sessionID:this.$9}),this.$10.debugTrace("connect","connection lost"),this.$19.onConnectionLost(),this.$37()},o.$30=function(t){},o.$33=function(t,n){r("InstagramODS").incr("web.mqtt.protocol.onmessagearrived"),this.$10.debugTrace("onMessageArrived","Message received on "+t),this.$19.onMessage(t);try{this.$3(t,n)}catch(t){var e=r("getErrorSafe")(t);this.$10.logError(e,"Listener threw error"),r("InstagramODS").incr("web.mqtt.listener_error")}},o.$34=function(t){r("InstagramODS").incr("web.mqtt.protocol.onmessagedelivered");var e=t!=null?t:"null";if(this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+e+"}"),t!=null){var n=this.$15.get(t);n!=null&&(this.$15.delete(t),n.resolve())}},o.$22=function(t){this.$15.forEach(function(e,n,r){e.reject(new Error(t))}),this.$15.clear()},o.$39=function(t){var e=this,n=new Set(t);n.forEach(function(t){e.$14.has(t)||e.unsubscribe(t)});var r=new Set(this.$14);r.forEach(function(t){n.has(t)||e.subscribe(t)})},o.$36=function(t,n){try{r("InstagramODS").incr("web.mqtt.js_error_in_init");var e=t?t.message:"error";this.$10.debugTrace("onError",n+": "+e),this.$2(t)}catch(e){var o=r("getErrorSafe")(e);r("InstagramODS").incr("web.mqtt.js_error_in_error_logging"),this.$10.logError(o,"JS error while trying to log previous error")}},t})();l.default=h}),98);
__d("PolarisMqttChannel",["FBLogger","InstagramODS","PolarisChannelClientID","PolarisIrisSubscribeChecker","PolarisMqttAnalyticsHook","PolarisMqttConnection","PolarisMqttEnv","PolarisMqttUserName","PolarisMqttUtils","Promise","getErrorSafe","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=6e4,u=(function(){function t(e){var t=this,n=e.appId,o=e.capabilities,a=e.chatVisibility,i=a===void 0?!0:a,l=e.clientCapabilities,s=e.endpoint,u=e.igSpecificOptions,c=e.initialSubscribedTopics,d=e.observer,m=e.userFbid;this.$8=r("PolarisMqttEnv").Env.getLoggerInstance(),this.$8.setAppId(n),this.$9=new(r("PolarisMqttUserName"))(m,o,l,r("PolarisChannelClientID").getID(),n,i,u),this.$1=s,this.$5="Disconnected",this.$2=[d],this.$4=new Set,this.$6=new Map,this.$7=new(r("PolarisMqttConnection"))(u),(u==null?void 0:u.deviceId)!=null?this.$3=u.deviceId:this.$3=r("uuidv4")(),this.$13=new(r("PolarisMqttAnalyticsHook")),this.$7.addHook(this.$13),this.$7.addHook(new(r("PolarisIrisSubscribeChecker"))(function(){return t.$4.size>0})),this.$10=!1,this.$12=new Map,this.$11=[],this.$14(c)}var o=t.prototype;return o.$14=function(t){var e=this;if(this.$7.isRunning()){this.$15("run","Connection started calling run again");return}if(r("PolarisMqttEnv").Env.genGk(r("PolarisMqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){if(r("PolarisMqttEnv").Env.genGk(r("PolarisMqttEnv").MqttGkNames.mqtt_ws_forced_polling_only)){this.$15("MqttChannel","Websocket disabled, will do long polling only");return}else if(!r("PolarisMqttUtils").hasWSSupport()){this.$15("MqttChannel","Websocket Unavailable, will do long polling only"),r("InstagramODS").incr("web.mqtt.ws_unavailable_polling");return}}this.$7.run({endpoint:this.$1,extraConnectMessageProvider:function(){return e.$16()},mqttUserName:this.$9,onJSError:function(n){e.$17(n)},onMessageReceived:function(n,r){e.$18(n,r)},onStateChange:function(n){e.$19(n)},subscribedTopics:t})},o.shutdown=function(){this.$7&&this.$7.shutdown()},o.publish=function(t,n,r){return r===void 0&&(r={qos:1,skipBuffer:!1}),r.qos===0?this.$20(t,n):this.$21(t,n,r)},o.$20=function(t,n){return this.$7.publish(t,n,0)},o.$21=function(o,a,i){var t={reject:function(t){},resolve:function(){}},l=new(e||(e=n("Promise")))(function(e,n){t.resolve=e,t.reject=n}),s=r("PolarisMqttEnv").Env.random(),u={ack:t,options:i,payload:a,publishToken:s,timeoutId:null,topic:o};return i.skipBuffer?this.$7.connectionState()==="Connecting"?this.$11.push(u):this.$22(u):(u.timeoutId=this.$23(s),this.$12.set(s,u),this.$24(u)),l},o.$22=function(t){r("PolarisMqttUtils").promiseDone(this.$7.publish(t.topic,t.payload,t.options.qos),function(){t.ack.resolve()},function(e){t.ack.reject(e)})},o.$24=function(t){var e=this;r("PolarisMqttUtils").promiseDone(this.$7.publish(t.topic,t.payload,t.options.qos),function(){return e.$25(t)},function(){})},o.subscribe=function(t,n){this.$7.subscribe(t);var e=this.$6.get(t);e?e.push(n):(e=[n],this.$6.set(t,e))},o.subscribeChannelEvents=function(t){this.$2.push(t)},o.registerExtraConnectPayloadProvider=function(t){var e=this;if(this.$4.add(t),this.$7.isRunning()){var n=t.getPublishMessages();n.forEach(function(t){e.publish(t.topic,t.payload,{qos:t.qos,skipBuffer:!0}).catch(function(t){return e.$8.logError(t,t==null?void 0:t.message)})})}},o.unregisterExtraConnectPayloadProvider=function(t){this.$4.delete(t)},o.unsubscribe=function(t){this.$7.unsubscribe(t),this.$6.delete(t)},o.getConnectionState=function(){return this.$5},o.getEndpoint=function(){return this.$1},o.addHook=function(t){this.$7.addHook(t)},o.removeHook=function(t){this.$7.removeHook(t)},o.testOnlyMessageReceived=function(t,n){this.$18(t,n)},o.$26=function(t){var e=this.$12.get(t);e!=null&&e.timeoutId!=null&&r("PolarisMqttEnv").Env.clearTimeout(e.timeoutId),this.$12.delete(t)},o.$23=function(t){var e=this;return r("PolarisMqttEnv").Env.setTimeout(function(t){var n=e.$12.get(t);if(n){var o=n.topic;r("InstagramODS").incr("web.mqtt.publish_timeout"),e.$8.debugTrace("publish_timeout","Timeout publishing topic: "+o+" publishToken: "+t),e.$26(t),n.ack.reject(new Error("Publish Timed Out"))}},s,t)},o.$25=function(t){var e=t.publishToken,n=this.$12.get(e);n&&(this.$26(e),t.ack.resolve(),this.$8.debugTrace("publish_success","Topic: "+t.topic+" publishToken: "+t.publishToken),r("InstagramODS").incr("web.mqtt.publish_success"))},o.$18=function(t,n){var e=this.$6.get(t);if(!e)this.$8.debugTrace("_onMessageReceived",t+" being dropped, no listeners");else for(var o of e)try{o(n)}catch(e){var a=r("getErrorSafe")(e);this.$8.logError(a,"Listener exception"),r("InstagramODS").incr("web.mqtt.listener_error")}},o.$17=function(t){if(r("PolarisMqttEnv").Env.genGk(r("PolarisMqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){t.isRecoverable?r("InstagramODS").incr("web.mqtt.recoverable_error_skipped"):r("InstagramODS").incr("web.mqtt.unrecoverable_error_skipped");return}t.isRecoverable?r("InstagramODS").incr("web.mqtt.recoverable_error_not_skipped"):r("InstagramODS").incr("web.mqtt.unrecoverable_error_not_skipped"),t.isRecoverable||(this.$10=!0),this.$27(t)},o.$27=function(t){for(var e of this.$2)e.onJSError&&e.onJSError(t)},o.$19=function(t){var e=this;t==="Connecting"?(this.$11.forEach(function(e){e.ack.reject(new Error("Client Reconnecting"))}),this.$11=[]):t==="TransportConnected"&&(this.$11.forEach(function(t){e.$22(t)}),this.$11=[],this.$12.forEach(function(t,n,r){e.$24(t)})),this.$5=this.$28(t),this.$15("_changeState","Connection state = "+t),this.$29()},o.$28=function(t){switch(t){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw r("FBLogger")("ig_web").mustfixThrow("Unknown state "+t)},o.$29=function(){for(var e of this.$2)e.onMQTTStateChanged(this.$5)},o.$16=function(){var e=this,t=[];return this.$4.forEach(function(n){try{var o=n.getPublishMessages();Array.prototype.push.apply(t,o)}catch(t){var a=r("getErrorSafe")(t);e.$8.logError(a,"ConnectPayload provider exception"),r("InstagramODS").incr("web.mqtt.connectPayloadProvider_error")}}),t},o.$15=function(t,n){this.$8.debugTrace(t,"Mqtt channel: "+n)},o.setForegroundState=function(t){this.$9&&this.$9.setForegroundState(t)},o.setChatVisibility=function(t){this.$9&&this.$9.setChatVisibility(t)},t})();l.default=u}),98);
__d("PolarisMqttLogger",["InstagramODS","PolarisChannelClientID","PolarisDirectLogger","PolarisMqttEnv"],(function(t,n,r,o,a,i,l){"use strict";var e="mqtt_client",s=null,u=new(o("PolarisDirectLogger")).DirectLogger(e,r("PolarisChannelClientID").getID()),c={CLIENT_ERROR:"mqtt_client_error",CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish"},d=(function(){function e(){this.$1=0,this.$2=Date.now(),this.$3=r("PolarisChannelClientID").getID()}e.getInstance=function(){return s||(s=new e),s};var t=e.prototype;return t.setAppId=function(t){this.$1===0&&(this.$1=t)},t.eventLogConnect=function(t){var e=t.attemptNumber,n=t.connectionStatus,o=t.duration,a=t.errorCode,i=t.errorMessage,l=t.failTotal,s=t.hostname,u=t.publishes,d=t.sessionID,m=t.subscribedTopics,p=t.successTotal;n?r("InstagramODS").incr("web.mqtt.mqtt_client_connect.success"):r("InstagramODS").incr("web.mqtt.mqtt_client_connect.failed");var _={attempt_number:e,connection_status:n,device_id:this.$3,duration:o,error_code:a,error_message:i,hostname:s,href:window.location.hostname,logged_in:r("PolarisMqttEnv").Env.isUserLoggedInNow(),publishes:u,session_id:d,subscribed_topics:m};this.$4(c.CONNECT,_)},t.eventLogPull=function(t){var e=t.duration,n=t.errorMessage,o=t.hostname,a=t.pullEventName,i=t.sessionID,l=t.status,s={connection_status:l,device_id:this.$3,duration:e,error_message:n,hostname:o,href:window.location.hostname,logged_in:r("PolarisMqttEnv").Env.isUserLoggedInNow(),session_id:i};this.$4(a,s)},t.eventLogDisconnect=function(t){var e=t.duration,n=t.errorCode,o=t.errorMessage,a=t.sessionID;r("InstagramODS").incr("web.mqtt.mqtt_client_disconnect");var i={device_id:this.$3,duration:e,error_code:n,error_message:o,href:window.location.hostname,session_id:a};this.$4(c.DISCONNECT,i)},t.eventLogPublish=function(t){var e=t.connectionStatus,n=t.publishStatus,o=t.sessionID,a=t.topic;r("InstagramODS").incr("web.mqtt.mqtt_client_publish"),r("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.mqtt.mqtt_client_publish."+a)},t.logError=function(t,n){r("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){u.logError(n,t)})},t.eventLogMiscellaneousError=function(t){var e=t.errorMessage,n={device_id:this.$3,error_message:e,href:window.location.hostname,logged_in:r("PolarisMqttEnv").Env.isUserLoggedInNow(),time_passed:Date.now()-this.$2};this.$4(c.CLIENT_ERROR,n)},t.logErrorWarn=function(t,n){r("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){u.logError(n,t)})},t.logWarn=function(t,n){},t.debugTrace=function(t,n){r("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){u.debugTrace(t,n)})},t.bumpCounter=function(t){},t.$4=function(t,n){var e=this;r("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){n.event_type=t,n.app_id=e.$1,n.online=e.$5(),u.logDirectEvent(t,n)})},t.$5=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1},e})();l.default=d}),98);
__d("polarisSetTimeoutAcrossTransitions",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return setTimeout.apply(void 0,[e,t].concat(r))}i.default=e}),66);
__d("PolarisMqttEnvInitializer",["PolarisIsLoggedIn","PolarisMqttEnv","PolarisMqttLogger","PolarisWebStorage","polarisSetTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";var e="mqtt:",s={initialize:function(){r("PolarisMqttEnv").Env.initialize(null,o("PolarisIsLoggedIn").isLoggedIn,null,r("polarisSetTimeoutAcrossTransitions"),function(){return r("PolarisMqttLogger").getInstance()},null,null,null,null,function(t,n){var o=r("PolarisWebStorage").getLocalStorage();if(o){var a=o.getItem(e+t);if(a!=null)return a}return n},function(t,n){var o=r("PolarisWebStorage").getLocalStorage();o&&(n==null?o.removeItem(e+t):o.setItem(e+t,n))})}},u=s;l.default=u}),98);
__d("polarisArraySplitChunks",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}i.default=e}),66);
__d("polarisNextTick",[],(function(t,n,r,o,a,i){"use strict";var e;process&&typeof process.nextTick=="function"?e=function(t){process.nextTick(t)}:typeof setImmediate=="function"?e=function(t){setImmediate(t)}:typeof window.setTimeout=="function"?e=function(t){window.setTimeout(t,0)}:e=function(t){t()};var l=e;i.default=l}),66);
__d("polarisForEachAsync",["Promise","polarisNextTick"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o){return new(e||(e=n("Promise")))(function(e,n){var a=0;if(t.length===0){e();return}function i(){try{o(t[a])}catch(e){n(e);return}a++,a>=t.length?e():r("polarisNextTick")(i)}i()})}l.default=s}),98);
__d("PolarisDirectMQTT",["InstagramODS","MercuryLocalIDs","PolarisCallGatingHelpers","PolarisConfig","PolarisDeviceOrMachineId","PolarisDirectConstants","PolarisDirectDeltaHandlers","PolarisDirectGraphQLSubscription","PolarisDirectIrisSubscription","PolarisDirectLogger","PolarisDirectSkywalkerSubscription","PolarisLiveDeltaHandler","PolarisLocales","PolarisMediaOverlayInfoTypes","PolarisMqttChannel","PolarisMqttEnvInitializer","PolarisReactRedux.react","nullthrows","polarisArraySplitChunks","polarisDeveloperSettings","polarisForEachAsync","randomInt"],(function(t,n,r,o,a,i,l){"use strict";var e=20,s=(function(){function t(t,n){var a=this;this.$8=0,this.$14=function(e){var t;try{t=JSON.parse(e.substr(0,e.length-1))}catch(e){a.$4.logError("Could not parse mqttMessages",e);return}var n=t.payload.header;if(n.type===4&&n.conferenceName.includes("ROOM")){var o,i,l=((o=t.payload.body)==null||(o=o.ringRequest)==null?void 0:o.ringType)%2===1,s=(i=t.payload.body)==null||(i=i.ringRequest)==null||(i=i.appMessages)==null?void 0:i.find(function(e){return e.body.genericMessage.topic==="ring_data"}),u="",c="",d="",m=[];if(s){var p,_=JSON.parse(s==null||(p=s.body)==null||(p=p.genericMessage)==null?void 0:p.data),f=_.display_name,g=_.display_uri,h=_.group_name,y=_.ig_thread_id,C=_.participant_usernames;if(u=y,d=f,m.push(g),h)c=h;else{var b=C;try{b=JSON.parse(C)}catch(e){}c=Array.isArray(b)?[f].concat(b).join(", "):f}}a.$6(n.type,n.serverInfoData,u,l,c,m,d),r("InstagramODS").incr("web.rtc.ack_ring_message"),a.$15(n.conferenceName,n.sequenceNumber,n.serverInfoData,n.transactionId,n.type,n.conferenceType)}else n.type===5&&n.conferenceName.includes("ROOM")?(a.$6(n.type,n.serverInfoData,"",!1,"",[],""),r("InstagramODS").incr("web.rtc.ack_dismiss_message"),a.$15(n.conferenceName,n.sequenceNumber,n.serverInfoData,n.transactionId,n.type,n.conferenceType)):r("InstagramODS").incr("web.rtc.rtc_message_ignored")},this.$16=function(t){var n=r("nullthrows")(a.$1),i;try{i=JSON.parse(t)}catch(e){a.$4.logError("Could not parse mqttMessages",e);return}if(!Array.isArray(i)){a.$4.debugTrace("parsed_message_not_array",typeof i);return}r("polarisForEachAsync")(r("polarisArraySplitChunks")(i,e),function(e){o("PolarisReactRedux.react").batch(function(){for(var t of e){var r=t.data,o=t.event,i=t.mutation_token,l=t.seq_id;if(a.$4.debugTrace("parsed_message",{event:o,mutation_token:i}),o!=="patch"){a.$4.debugTrace("skipped_message",{event:o});return}if(!Array.isArray(r)){a.$4.debugTrace("parsed_message_bad_operations",typeof r);return}for(var s of r)n.handleDelta(s,i);if(l){var u=a.$2.subscription_type;a.$4.debugTrace("seq_id",{seq_id:l,subscriptionType:u}),u==="message"&&n.onSeqIdUpdated(l)}}})})},this.$17=function(e){try{var t=JSON.parse(e);if(t.status==="ok"){var n;(t==null||(n=t.payload)==null?void 0:n.activity_status)==null?a.$4.logDirectEvent("send_message_response_success"):a.$4.logDirectEvent("send_activity_response_success")}else{var r;(t==null||(r=t.payload)==null?void 0:r.activity_status)==null?a.$4.logError("send_message_response_failed"):a.$4.logDirectEvent("send_activity_response_failed")}}catch(e){a.$4.logError("send_message_response_parse_failed",e)}},this.$18=function(e){a.$4.debugTrace("state_changed",e);var t=r("nullthrows")(a.$1);if(e==="Connected"){var n=r("nullthrows")(a.$5);n.subscribe("/ig_message_sync",a.$16),n.subscribe("/ig_send_message_response",a.$17),o("PolarisCallGatingHelpers").isIncomingCallEnabled()&&!o("PolarisCallGatingHelpers").isWebCallingEnabled()&&n.subscribe("/pubsub",a.$14),a.$3||(a.$3=new(o("PolarisDirectIrisSubscription")).DirectIrisSubscription(t,a.$2,n,a.$4.getDebugId())),a.$3.subscribe(),a.$10||(a.$10=new(o("PolarisDirectGraphQLSubscription")).DirectGraphQLSubscription(t,n,a.$4.getDebugId())),a.$2.subscription_type==="message"?(a.$9||(a.$9=new(o("PolarisDirectSkywalkerSubscription")).DirectSkywalkerSubscription(t,n,a.$4.getDebugId())),a.$9.subscribe()):a.$4.debugTrace("skip_skywalker",a.$2),a.$10&&a.$10.subscribe()}else if(e==="Disconnected"){a.$3&&(a.$3.unsubscribe(),a.$3=null),a.$9&&(a.$9.unsubscribe(),a.$9=null),a.$10&&(a.$10.unsubscribeGraphQL(),a.$10=null);var i=a.$5;i&&(i.unsubscribe("/ig_message_sync"),i.unsubscribe("/ig_send_message_response"),o("PolarisCallGatingHelpers").isIncomingCallEnabled()&&!o("PolarisCallGatingHelpers").isWebCallingEnabled()&&i.unsubscribe("/pubsub"))}t.onMqttConnectivityChanged(e)},this.$4=new(o("PolarisDirectLogger")).DirectLogger("DirectMQTT",n),this.$4.debugTrace("ctor",t),this.$1=null,this.$2=t,this.$3=null,this.$5=null,this.$9=null,this.$10=null}var n=t.prototype;return n.$11=function(){return r("nullthrows")(o("PolarisConfig").getViewerId())},n.$12=function(){return parseInt(o("PolarisConfig").getIGAppID(),10)},n.$13=function(){return o("PolarisDeviceOrMachineId").getDeviceOrMachineId()},n.$15=function(t,n,o,a,i,l){var e=this;if(this.$7==null){var s=r("randomInt")(0,4294967294)+1;this.$7=String(s)}var u={endpoint:{appId:this.$12(),deviceId:this.$13(),userId:this.$11()},jsonPayload:{body:{ringResponse:{deviceCapabilities:[],deviceStatus:0}},header:{clientSessionId:this.$7,clientStack:5,conferenceName:t,conferenceType:l,messageTags:[],responseStatusCode:200,retryCount:0,sequenceNumber:n,serverInfoData:o,transactionId:a,type:i}}};r("nullthrows")(this.$5).publish("/rtc_multi",JSON.stringify(u)).catch(function(t){var n,o;i===4?r("InstagramODS").incr("web.rtc.ack_ring_message_failed"):i===5?r("InstagramODS").incr("web.rtc.ack_dismiss_message_failed"):r("InstagramODS").incr("web.rtc.ack_message_failed");var a=(n=(o=e.$5)==null?void 0:o.getConnectionState())!=null?n:"Unknown";throw e.$4.logError("ack_rtc_message_failed",t,{conference_type:l,message_type:i,mqtt_state:a}),t})},n.$19=function(t){var e=this;return this.$4.logDirectEvent("send_attempt",{action:t.action,type:t.item_type||""}),r("nullthrows")(this.$5).publish("/ig_send_message",JSON.stringify(babelHelpers.extends({client_context:o("MercuryLocalIDs").generateOfflineThreadingID(),device_id:this.$13()},t))).catch(function(t){throw e.$4.logError("send_message_failed",t),t})},n.sendRtcHangupRequest=function(t){var e=this,n={endpoint:{appId:this.$12(),deviceId:this.$13(),userId:this.$11()},jsonPayload:{body:{hangupRequest:{detailedReasonString:"",reason:0}},header:{clientSessionId:this.$7,clientStack:5,messageTags:[],retryCount:0,sequenceNumber:this.$8++,serverInfoData:t,transactionId:String(r("randomInt")(0,4294967294)+1),type:2}}};return r("nullthrows")(this.$5).publish("/rtc_multi",JSON.stringify(n)).catch(function(t){throw e.$4.logError("send_rtc_hangup_message_failed",t),t})},n.sendTextMessage=function(t,n,r,a,i){return this.$19({action:"send_item",item_type:o("PolarisDirectConstants").ThreadItemType.TEXT,mutation_token:r,replied_to_client_context:i,replied_to_item_id:a,text:n,thread_id:t})},n.sendMediaShare=function(t,n,r,a){var e=o("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE;return a==="clips"&&(e=o("PolarisDirectConstants").ThreadItemType.CLIP_SHARE),(r==null?void 0:r.overlay_layout)===o("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_LAYOUTS.MEDIA_COVER||(r==null?void 0:r.overlay_layout)===o("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_LAYOUTS.MEDIA_COVER_WITH_BOTTOM_BANNER?this.$19({action:"send_item",item_type:e,media_id:n,share_treatment_title:o("PolarisDirectConstants").InformTreatmentTitleValues.FALLBACK,share_treatment_type:o("PolarisDirectConstants").InformTreatmentTypeValues.WARNING_SCREENS,thread_id:t}):this.$19({action:"send_item",item_type:e,media_id:n,thread_id:t})},n.sendClipShareWithSocialContext=function(t,n,r,a,i){return this.$19({action:"send_item",item_type:o("PolarisDirectConstants").ThreadItemType.CLIP_SHARE,media_id:n,recipient_users:i!=null?i:void 0,social_context_share_type:a,text:r,thread_id:t})},n.sendLike=function(t,n){return this.$19({action:"send_item",item_type:o("PolarisDirectConstants").ThreadItemType.LIKE,mutation_token:n,thread_id:t})},n.indicateTypingActivity=function(t,n){return this.$19({action:"indicate_activity",activity_status:t,thread_id:n})},n.markVisualItemSeen=function(t,n){return this.$19({action:"mark_visual_item_seen",item_ids:JSON.stringify([t]),target_item_type:"voice_media",thread_id:n})},n.modifyLikeReaction=function(t,n,r,o,a){return this.$19({action:"send_item",emoji:a!=null?a:"",item_id:t,item_type:"reaction",node_type:"item",reaction_status:o,reaction_type:"like",target_item_type:n,thread_id:r})},n.disconnect=function(){this.$4.debugTrace("disconnect_start"),this.$3?(this.$4.debugTrace("unsubscribe_iris"),r("nullthrows")(this.$3).unsubscribe(),this.$3=null):this.$4.debugTrace("no_iris"),this.$9?(this.$4.debugTrace("unsubscribe_skywalker"),this.$9=null):this.$4.debugTrace("no_skywalker"),this.$10?(this.$4.debugTrace("unsubscribe_graphql"),this.$10=null):this.$4.debugTrace("no_graphql"),this.$5?(this.$4.debugTrace("shutdown_channel"),r("nullthrows")(this.$5).shutdown(),this.$5=null):this.$4.debugTrace("no_channel"),this.$1&&(this.$1=null),this.$4.debugTrace("disconnect_end")},n.connect=function(t,n){var e=this;this.$4.debugTrace("connect_start"),this.disconnect(),this.$1=new(o("PolarisDirectDeltaHandlers")).DirectDeltaHandlers(t,this.$4.getDebugId()),this.$6=n;var a={onJSError:function(n){e.$4.logError("mqtt_js_error",n)},onMQTTStateChanged:this.$18},i={appSpecificInfo:{},deviceId:this.$13()},l=r("PolarisLocales").language_code;l!=null&&(i.appSpecificInfo["Accept-Language"]=l),r("PolarisMqttEnvInitializer").initialize();var s={appId:this.$12(),capabilities:0,chatVisibility:!0,clientCapabilities:1,endpoint:o("PolarisDirectConstants").PROD_MQTT_GATEWAY,igSpecificOptions:i,initialSubscribedTopics:[],observer:a,userFbid:this.$11()};this.$5=new(r("PolarisMqttChannel"))(s),this.$4.debugTrace("connect_end")},n.subscribeToLiveEvent=function(t,n,o){var e=this.$10;if(e!=null){var a=new(r("PolarisLiveDeltaHandler"))(n);e.enableLiveEventHandler(t,a,o),e.subscribe()}},n.unsubscribeToLiveEvent=function(t){var e=this.$10;e!=null&&(e.disableLiveEventHandler(t),e.subscribe())},n.getLogger=function(){return this.$4},t})();l.DirectMQTT=s}),98);
__d("PolarisIncomingCallActions",[],(function(t,n,r,o,a,i){"use strict";function e(){return{type:"ACK_INCOMING_CALL"}}i.ackCall=e}),66);/*FB_PKG_DELIM*/
__d("CacheStorage",["ErrorGuard","ExecutionEnvironment","WebStorage","cr:6943","cr:8958","emptyFunction","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d="_@_",m="3b",p="CacheStorageVersion",_={length:0,getItem:c=r("emptyFunction"),setItem:c,clear:c,removeItem:c,key:c},f=(function(){function e(e){this._store=e}var t=e.prototype;return t.getStore=function(){return this._store},t.keys=function(){for(var e=[],t=0;t<this._store.length;t++){var n=this._store.key(t);n!=null&&e.push(n)}return e},t.get=function(t){return this._store.getItem(t)},t.set=function(t,n){this._store.setItem(t,n)},t.remove=function(t){this._store.removeItem(t)},t.clear=function(){this._store.clear()},t.clearWithPrefix=function(t){t=t||"";for(var e=this.keys(),n=0;n<e.length;n++){var r=e[n];r!=null&&r.startsWith(t)&&this.remove(r)}},e})(),g=(function(t){function n(){var n;return t.call(this,(n=(e||(e=r("WebStorage"))).getLocalStorage())!=null?n:_)||this}return babelHelpers.inheritsLoose(n,t),n.available=function(){return!!(e||(e=r("WebStorage"))).getLocalStorage()},n})(f),h=(function(t){function n(){var n;return t.call(this,(n=(e||(e=r("WebStorage"))).getSessionStorage())!=null?n:_)||this}return babelHelpers.inheritsLoose(n,t),n.available=function(){return!!(e||(e=r("WebStorage"))).getSessionStorage()},n})(f),y=(function(){function e(){this._store={}}var t=e.prototype;return t.getStore=function(){return this._store},t.keys=function(){return Object.keys(this._store)},t.get=function(t){return this._store[t]===void 0?null:this._store[t]},t.set=function(t,n){this._store[t]=n},t.remove=function(t){t in this._store&&delete this._store[t]},t.clear=function(){this._store={}},t.clearWithPrefix=function(t){t=t||"";for(var e=this.keys(),n=0;n<e.length;n++){var r=e[n];r.startsWith(t)&&this.remove(r)}},e.available=function(){return!0},e})(),C={memory:y,localstorage:g,sessionstorage:h},b=(function(){function t(e,t){this._changeCallbacks=[],this._key_prefix="_cs_";var o;this._exception=null,t&&(this._key_prefix=t),e==="AUTO"||!e?o="memory":o=e,o&&(!C[o]||!C[o].available()?((s||(s=r("ExecutionEnvironment"))).canUseDOM,this._backend=new y):this._backend=new C[o]);var a=this.useBrowserStorage();a&&n("cr:6943").listen(window,"storage",this._onBrowserValueChanged.bind(this));var i=a?this._backend.getStore().getItem(p):this._backend.getStore()[p];i!==m&&this.clearOwnKeys()}var o=t.prototype;return o.useBrowserStorage=function(){return this._backend.getStore()===(e||(e=r("WebStorage"))).getLocalStorage()||this._backend.getStore()===(e||(e=r("WebStorage"))).getSessionStorage()},o.addValueChangeCallback=function(t){var e=this;return this._changeCallbacks.push(t),{remove:function(){e._changeCallbacks.slice(e._changeCallbacks.indexOf(t),1)}}},o._onBrowserValueChanged=function(t){this._changeCallbacks&&String(t.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(e){e(t.key,t.oldValue,t.newValue)})},o.keys=function(){var e=this,t=[];return(u||(u=r("ErrorGuard"))).guard(function(){if(e._backend)for(var n=e._backend.keys(),r=e._key_prefix.length,o=0;o<n.length;o++)n[o].substr(0,r)==e._key_prefix&&t.push(n[o].substr(r))},{name:"CacheStorage"})(),t},o.set=function(o,a,i){if(this._backend){if(this.useBrowserStorage()&&t._persistentWritesDisabled)return this._exception=r("err")("writes disabled"),!1;var e;typeof a=="string"?e=d+a:i?e=n("cr:8958").stringify(a):(e={__t:Date.now(),__v:a},e=n("cr:8958").stringify(e));for(var l=this._backend,s=this._key_prefix+o,u=!0,c=null;u;)try{c=null,l.set(s,e),u=!1}catch(e){c=e;var m=l.keys().length;this._evictCacheEntries(),u=l.keys().length<m}return c!==null?(this._exception=c,!1):(this._exception=null,!0)}return this._exception=r("err")("no back end"),!1},o.getLastSetExceptionMessage=function(){return this._exception?this._exception.message:null},o.getLastSetException=function(){return this._exception},o.getStorageKeyCount=function(){var e=this._backend;return e?e.keys().length:0},o._evictCacheEntries=function(){var e=[],r=this._backend;r.keys().forEach(function(o){if(o!==p){var a=r.get(o);if(a===void 0){r.remove(o);return}if(!t._hasMagicPrefix(a)){try{a=n("cr:8958").parse(a,i.id)}catch(e){r.remove(o);return}a&&a.__t!==void 0&&a.__v!==void 0&&e.push([o,a.__t])}}}),e.sort(function(e,t){return e[1]-t[1]});for(var o=0;o<Math.ceil(e.length/2);o++)r.remove(e[o][0])},o.get=function(o,a){var e;if(this._backend)if((u||(u=r("ErrorGuard"))).applyWithGuard(function(){e=this._backend.get(this._key_prefix+o)},this,[],{onError:function(){e=null},name:"CacheStorage:get"}),e!=null)if(t._hasMagicPrefix(e))e=e.substr(d.length);else try{e=n("cr:8958").parse(e,i.id),e&&e.__t!==void 0&&e.__v!==void 0&&(e=e.__v)}catch(t){e=void 0}else e=void 0;return e===void 0&&a!==void 0&&(e=a,this.set(o,e)),e},o.remove=function(t){this._backend&&(u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+t],{name:"CacheStorage:remove"})},o._setVersion=function(){var e=this;(u||(u=r("ErrorGuard"))).applyWithGuard(function(){e.useBrowserStorage()?e._backend.getStore().setItem(p,m):e._backend.getStore()[p]=m},this,[],{name:"CacheStorage:setVersion"})},o.clear=function(){this._backend&&((u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())},o.clearOwnKeys=function(){this._backend&&((u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())},t.getAllStorageTypes=function(){return Object.keys(C)},t._hasMagicPrefix=function(t){return t.substr(0,d.length)===d},t.disablePersistentWrites=function(){t._persistentWritesDisabled=!0},t})();b._persistentWritesDisabled=!1,i.exports=b}),34);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","cr:8958"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var o;return o=e.call(this)||this,o.$CrossWindowEventEmitter$p_2=t,o.$CrossWindowEventEmitter$p_1=new(r("CacheStorage"))("localstorage",t+":"),o.$CrossWindowEventEmitter$p_1.addValueChangeCallback(function(t,r,a){var i=t.split(":")[1],l;try{l=n("cr:8958").parse(a)}catch(e){l=void 0}if(l&&l.__v){var s;(s=e.prototype.emit).call.apply(s,[o,i].concat(l.__v))}}),o}babelHelpers.inheritsLoose(t,e);var o=t.prototype;return o.emit=function(n){for(var t,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];this.emitRemote.apply(this,[n].concat(o)),(t=e.prototype.emit).call.apply(t,[this,n].concat(o))},o.emitRemote=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.$CrossWindowEventEmitter$p_1.set(t,n)},t})(r("EventEmitter"));l.default=e}),98);
__d("EventListenerImplForCacheStorage",["CometEventListener"],(function(t,n,r,o,a,i){"use strict";i.default=n("CometEventListener")}),66);
__d("IrisSubscribeCheckerUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){if(typeof window!="undefined"){var e,t=(e=window.location)==null?void 0:e.hostname;if(t==="m.facebook.com"||t==="mobile.facebook.com"||t==="mtouch.facebook.com")return!1}return!0}i.getIrisSubscribeCheckerInitialRunningState=e}),66);
__d("MqttEnvWebSocket",[],(function(t,n,r,o,a,i){"use strict";function e(e){return new WebSocket(e)}i.createWebSocket=e}),66);
__d("MqttEnv",["MqttEnvWebSocket","clearTimeout","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13,mqttweb_global_connection_counter:15}),s=(function(){function e(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}var t=e.prototype;return t.random=function(){return this.$1!=null?this.$1():Math.random()},t.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0},t.setIsUserLoggedInNow=function(t){this.$2=t},t.clearTimeout=function(t){if(this.$3!=null){this.$3(t);return}r("clearTimeout")(t)},t.setTimeout=function(t,n){for(var e=arguments.length,o=new Array(e>2?e-2:0),a=2;a<e;a++)o[a-2]=arguments[a];return this.$4!=null?this.$4.apply(null,arguments):r("setTimeout").apply(null,arguments)},t.getLoggerInstance=function(){return this.$5!=null?this.$5():u.getInstance()},t.genGk=function(t){return this.$6!=null?this.$6(t):!1},t.createSocket=function(t,n){return this.$7!=null?this.$7(t,n):o("MqttEnvWebSocket").createWebSocket(t)},t.scheduleCallback=function(t){return this.$8!=null?this.$8(t):t()},t.scheduleLoggingCallback=function(t){return this.$9!=null?this.$9(t):t()},t.configRead=function(t,n){return this.$10!=null?this.$10(t,n):n},t.configWrite=function(t,n){this.$11!=null&&this.$11(t,n)},t.initialize=function(t,n,r,o,a,i,l,s,u,c,d){this.$1=t,this.$2=n,this.$3=r,this.$4=o,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,this.$10=c,this.$11=d},e})(),u=(function(){function e(){}e.getInstance=function(){return new e};var t=e.prototype;return t.setAppId=function(t){},t.eventLogConnect=function(t){},t.eventLogPull=function(t){},t.eventLogPullFinish=function(t){},t.eventLogDisconnect=function(t){},t.eventLogOutgoingPublish=function(t){},t.eventLogIncomingPublish=function(t){},t.eventLogPublishTimeout=function(t){},t.eventLogMiscellaneousError=function(t){},t.logIfLoggedOut=function(){},t.logError=function(t){},t.logErrorWarn=function(t){},t.logWarn=function(t){},t.debugTrace=function(t){},t.bumpCounter=function(t){},t.getBrowserConnectivity=function(){return!0},e})(),c=new s;function d(e){c.setIsUserLoggedInNow(e)}l.MqttGkNames=e,l.Env=c,l.setIsUserLoggedInNow=d}),98);
__d("IrisSubscribeChecker",["IrisSubscribeCheckerUtils","MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=o("MqttEnv").Env.getLoggerInstance(),this.$2=null,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=o("IrisSubscribeCheckerUtils").getIrisSubscribeCheckerInitialRunningState(),this.$7=0,this.$8=e}var t=e.prototype;return t.start=function(){this.$6=!0},t.stop=function(){this.$6=!1,this.$9()},t.onConnectAttempt=function(){},t.onConnectFailure=function(){this.$9()},t.onConnected=function(){var e=this;this.$7++,this.$9(),this.$3=!1,this.$4=!1,this.$5=!1,this.$6&&(this.$2=o("MqttEnv").Env.setTimeout(function(){e.$10()},8e3))},t.onConnectSuccess=function(){},t.onConnectionLost=function(){this.$9()},t.onConnectionDisconnect=function(){},t.onSubscribe=function(t){t==="/t_ms"&&(this.$3=!0)},t.onUnsubscribe=function(t){},t.onPublish=function(t){(t==="/messenger_sync_get_diffs"||t==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))},t.onMessage=function(t){},t.onWSFatal=function(){},t.$9=function(){this.$2&&(o("MqttEnv").Env.clearTimeout(this.$2),this.$2=null)},t.$10=function(){if(this.$4===!1){var e=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(e),this.$8()?this.$1.bumpCounter(e+".withProvider"):this.$1.bumpCounter(e+".withoutProvider"),this.$3===!0?this.$1.bumpCounter(e+".withTopicSubscribe"):this.$1.bumpCounter(e+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe"),this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")},e})();l.default=e}),98);
__d("MqttGlobalStreamCounter",["CrossWindowEventEmitter","MqttEnv","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.isTabClosed=!1,this.otherTabs=new Map,this.thisTab={totalConnectionStreams:0},this.broadcastChannel=new(r("CrossWindowEventEmitter"))("MqttGlobalStreamCounter"),this.broadcastChannel.addListener("count-updated",function(t){var n=JSON.parse(String(t)),r=!1;e.otherTabs.has(n.key)||(r=!0),n.event==="DELETE"?e.otherTabs.delete(n.key):n.event==="UPDATE"&&n.value!=null&&(e.otherTabs.set(n.key,n.value),r&&e.$1())}),this.tabID=r("uuidv4")()}var t=e.prototype;return t.streamRequested=function(){this.thisTab.totalConnectionStreams++,this.$1()},t.streamClosed=function(){this.thisTab.totalConnectionStreams>0&&(this.thisTab.totalConnectionStreams--,this.$1())},t.tabClosed=function(){if(!this.isTabClosed){this.isTabClosed=!0;var e={key:this.tabID,event:"DELETE"};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(e))}},t.getGlobalState=function(){var e={totalConnectionStreams:this.thisTab.totalConnectionStreams};return this.otherTabs.forEach(function(t){e.totalConnectionStreams+=t.totalConnectionStreams}),e},t.$1=function(){var e={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(e))},t.isEnabled=function(){return!0},e})(),s=o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqttweb_global_connection_counter)?new e:{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{totalConnectionStreams:-1}},isEnabled:function(){return!1}},u=function(){return s};l.getInstance=u}),98);
__d("MqttAnalyticsHook",["MqttEnv","MqttGlobalStreamCounter"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=o("MqttEnv").Env.getLoggerInstance(),this.$2=o("MqttGlobalStreamCounter").getInstance(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$1.bumpCounter("session_start"),o("MqttEnv").Env.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var t=e.prototype;return t.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt"),this.$2.streamRequested()},t.onConnectFailure=function(){this.$4++,this.$1.bumpCounter("ws_connect_failure"),this.$1.debugTrace("connect","Connect failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()},t.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")},t.onConnectSuccess=function(){this.$3===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$3++,this.$1.bumpCounter("ws_connect_success")},t.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")},t.onConnectionDisconnect=function(){this.$2.streamClosed()},t.onSubscribe=function(t){},t.onUnsubscribe=function(t){},t.onPublish=function(t){this.$1.bumpCounter("ws_publish."+t)},t.onMessage=function(t){this.$1.bumpCounter("message_arrived."+t)},t.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")},t.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send"),this.$2.streamRequested()},t.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$5===0&&this.$1.bumpCounter("polling_first_success"),this.$5++},t.onPollResponse=function(t){this.$1.bumpCounter("lp.message_arrived."+t)},t.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish"),this.$2.streamRequested()},t.onPollRequestFailed=function(t){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+t),this.$6++,this.$1.debugTrace("PollRequest","Request failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()},t.onPollShutdownAbort=function(){this.$2.streamClosed()},t.onTabClose=function(){this.$2.tabClosed()},e})();l.default=e}),98);
__d("MqttConnectionHookCollection",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Set}var t=e.prototype;return t.addHook=function(t){this.$1.add(t)},t.removeHook=function(t){this.$1.delete(t)},t.onConnectAttempt=function(){this.$1.forEach(function(e){e.onConnectAttempt==null||e.onConnectAttempt()})},t.onConnectFailure=function(){this.$1.forEach(function(e){e.onConnectFailure==null||e.onConnectFailure()})},t.onConnected=function(){this.$1.forEach(function(e){e.onConnected==null||e.onConnected()})},t.onConnectSuccess=function(){this.$1.forEach(function(e){e.onConnectSuccess==null||e.onConnectSuccess()})},t.onConnectionLost=function(){this.$1.forEach(function(e){e.onConnectionLost==null||e.onConnectionLost()})},t.onConnectionDisconnect=function(){this.$1.forEach(function(e){e.onConnectionDisconnect==null||e.onConnectionDisconnect()})},t.onSubscribe=function(t){this.$1.forEach(function(e){e.onSubscribe==null||e.onSubscribe(t)})},t.onUnsubscribe=function(t){this.$1.forEach(function(e){e.onUnsubscribe==null||e.onUnsubscribe(t)})},t.onPublish=function(t){this.$1.forEach(function(e){e.onPublish==null||e.onPublish(t)})},t.onMessage=function(t){this.$1.forEach(function(e){e.onMessage==null||e.onMessage(t)})},t.onWSFatal=function(){this.$1.forEach(function(e){e.onWSFatal==null||e.onWSFatal()})},e})();i.default=e}),66);
__d("MqttProtocolUtils",["MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(e==null)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function s(e,t){var n=t,r=0,o=1,a;do{if(n===e.length)return null;a=e[n++],r+=(a&127)*o,o*=128}while((a&128)!==0);return{offset:n,value:r}}function u(e){for(var t=e,n=new Array(1),r=0;r<4;r++){var o=t%128;if(t>>=7,t>0)n[r]=o|128;else{n[r]=o;break}}return n}function c(e,t,n){var r=n;return t[r++]=e>>8,t[r++]=e%256,r}function d(e,t){return 256*e[t]+e[t+1]}function m(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);o<128?t+=1:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,n++):t+=3}return t}function p(e,t,n,r){var o=c(t,n,r);return _(e,n,o),o+t}function _(e,t,n){for(var r=n,o=0,a=e.length;o<a;o++){var i=e.charCodeAt(o);i<128?t[r++]=i:i<2048?(t[r++]=192|i>>6,t[r++]=128|i&63):i<55296||i>=57344?(t[r++]=224|i>>12,t[r++]=128|i>>6&63,t[r++]=128|i&63):(i=65536+((i&1023)<<10|e.charCodeAt(++o)&1023),t[r++]=240|i>>18,t[r++]=128|i>>12&63,t[r++]=128|i>>6&63,t[r++]=128|i&63)}}function f(e,t,n){for(var r=[],o=t,a=0;o<t+n;){var i=e[o++];if(i<128)r[a++]=String.fromCharCode(i);else if(i>191&&i<224){var l=e[o++];r[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){var s=e[o++],u=e[o++],c=e[o++],d=((i&7)<<18|(s&63)<<12|(u&63)<<6|c&63)-65536;r[a++]=String.fromCharCode(55296+(d>>10)),r[a++]=String.fromCharCode(56320+(d&1023))}else{var m=e[o++],p=e[o++];r[a++]=String.fromCharCode((i&15)<<12|(m&63)<<6|p&63)}}return r.join("")}var g=(function(){function e(e,t,n,r){this.$1=e,this.$2=t,this.$5=n,this.$6=r,this.$4=!1}var t=e.prototype;return t.$7=function(){var e=this;this.$4?(this.$4=!1,this.$5(),this.$3=o("MqttEnv").Env.setTimeout(function(){e.$7()},this.$2()*1e3)):this.$6()},t.reset=function(){var e=this;this.$4=!0,this.$3&&(o("MqttEnv").Env.clearTimeout(this.$3),this.$3=null);var t=this.$1()*1e3;t>0&&(this.$3=o("MqttEnv").Env.setTimeout(function(){e.$7()},t))},t.cancel=function(){this.$3&&(o("MqttEnv").Env.clearTimeout(this.$3),this.$3=null)},e})();l.UTF8Length=m,l.convertStringToUTF8=_,l.concatBuffers=e,l.decodeMultiByteInt=s,l.convertUTF8ToString=f,l.encodeMultiByteInt=u,l.writeUInt16BE=c,l.readUInt16BE=d,l.writeString=p,l.Pinger=g}),98);
__d("MqttUtils",["MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return u(e,"sid",t.toString())}function s(e,t){var n=e;return t.forEach(function(e,t){n=u(n,t,e)}),n}function u(e,t,n){return e.indexOf("?")>0?e+"&"+t+"="+n:e+"?"+t+"="+n}function c(){return Math.floor(o("MqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)}function d(e,t,n){var r=arguments.length>1?e.then(t,n):e;r.then(null,function(e){o("MqttEnv").Env.setTimeout(function(){throw e instanceof Error?e:new Error("promiseDone")},0)})}function m(e,t,n,r){var a=!1;o("MqttEnv").Env.setTimeout(function(){a||(a=!0,n(new Error("promise timeout")))},r),d(e,function(e){a||(a=!0,t(e))},function(e){a||(a=!0,n(e))})}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0;return e.replace(/%s/g,function(){return String(n[o++])})}l.endpointWithSessionId=e,l.endpointWithExtraParameters=s,l.endpointWithExtraParameter=u,l.generateSessionId=c,l.promiseDone=d,l.promiseDoneWithTimeout=m,l.sprintf=p}),98);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),s=[0,6,77,81,73,115,100,112,3];function u(t,n){var a=n,i=a,l=t[a],s=l>>4;a+=1;var u=o("MqttProtocolUtils").decodeMultiByteInt(t,a);if(u==null)return{position:i,wireMessage:null};a=u.offset;var c=a+u.value;if(c>t.length)return{position:i,wireMessage:null};var d;switch(s){case e.CONNACK:{var p=t[a++],h=!!(p&1),y=t[a++];d=new f(h,y);break}case e.PUBLISH:{var v=l&15,S=v>>1&3,R=o("MqttProtocolUtils").readUInt16BE(t,a);a+=2;var L=o("MqttProtocolUtils").convertUTF8ToString(t,a,R);a+=R;var E=null;S===1&&(E=o("MqttProtocolUtils").readUInt16BE(t,a),a+=2);var k=C.createWithBytes(t.subarray(a,c)),I=(v&1)===1,T=(v&8)===8;d=new b(L,k,S,E,I,T);break}case e.PINGREQ:d=new m("PINGREQ");break;case e.PINGRESP:d=new m("PINGRESP");break;case e.PUBACK:case e.UNSUBACK:{var D=o("MqttProtocolUtils").readUInt16BE(t,a);d=new g(s===e.PUBACK?"PUBACK":"UNSUBACK",D);break}case e.SUBACK:{var x=o("MqttProtocolUtils").readUInt16BE(t,a);a+=2;var $=t.subarray(a,c);d=new _(x,$);break}default:throw r("err")(o("MqttUtils").sprintf("Invalid MQTT message type %s.",s))}return{position:c,wireMessage:d}}function c(e){for(var t=[],n=0;n<e.length;){var r=u(e,n),o=r.wireMessage;if(n=r.position,o)t.push(o);else break}var a=null;return n<e.length&&(a=e.subarray(n)),{messages:t,remaining:a}}var d=(function(){function t(t){this.messageType=e[t]}var n=t.prototype;return n.encode=function(){throw new TypeError("Cannot abstract class WireMessage")},t})(),m=(function(e){function t(t){return e.call(this,t)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=new ArrayBuffer(2),t=new Uint8Array(e);return t[0]=(this.messageType&15)<<4,e},t})(d),p=(function(e){function t(){return e.call(this,"DISCONNECT")||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=new ArrayBuffer(2),n=new Uint8Array(t);return n[0]=e,n.set(o("MqttProtocolUtils").encodeMultiByteInt(0),1),t},t})(d),_=(function(e){function t(t,n){var r;return r=e.call(this,"SUBACK")||this,r.messageIdentifier=t,r.returnCode=n,r}return babelHelpers.inheritsLoose(t,e),t})(d),f=(function(e){function t(t,n){var r;return r=e.call(this,"CONNACK")||this,r.sessionPresent=t,r.returnCode=n,r}return babelHelpers.inheritsLoose(t,e),t})(d),g=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.messageIdentifier=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=2,n=o("MqttProtocolUtils").encodeMultiByteInt(t),r=n.length+1,a=new ArrayBuffer(t+r),i=new Uint8Array(a);return i[0]=e,i.set(n,1),r=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,i,r),a},t})(d),h=(function(e){function t(t,n){var r;return r=e.call(this,"CONNECT")||this,r.clientId=t,r.connectOptions=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e,t=(this.messageType&15)<<4,n=s.length+3;n+=(e=o("MqttProtocolUtils")).UTF8Length(this.clientId)+2,n+=e.UTF8Length(this.connectOptions.userName)+2;var r=e.encodeMultiByteInt(n),a=new ArrayBuffer(1+r.length+n),i=new Uint8Array(a);i[0]=t;var l=1;i.set(r,1),l+=r.length,i.set(s,l),l+=s.length;var u=130;return i[l++]=u,l=e.writeUInt16BE(this.connectOptions.getKeepAliveIntervalSeconds(),i,l),l=e.writeString(this.clientId,e.UTF8Length(this.clientId),i,l),l=e.writeString(this.connectOptions.userName,e.UTF8Length(this.connectOptions.userName),i,l),a},t})(d),y=(function(t){function n(e,n,r,a){var i;if(i=t.call(this,e)||this,i.topic=n,r<0&&r>1||r===1&&a==null)throw new TypeError(o("MqttUtils").sprintf("Argument Invalid. qos: %s messageType: %s.",r,e));return i.qos=r,i.messageIdentifier=a,i}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.encode=function(){var t=(this.messageType&15)<<4;t|=2;var n=o("MqttProtocolUtils").UTF8Length(this.topic),r=2+n+2;this.messageType===e.SUBSCRIBE&&(r+=1);var a=o("MqttProtocolUtils").encodeMultiByteInt(r),i=new ArrayBuffer(1+a.length+r),l=new Uint8Array(i);l[0]=t;var s=1;return l.set(a,1),s+=a.length,this.messageIdentifier!=null&&(s=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,l,s)),s=o("MqttProtocolUtils").writeString(this.topic,n,l,s),this.messageType===e.SUBSCRIBE&&this.qos!=null&&(l[s++]=this.qos),i},n})(d),C=(function(){function e(e,t){this.payloadString=e,this.payloadBytes=t}e.createWithString=function(n){var t=new Uint8Array(new ArrayBuffer(o("MqttProtocolUtils").UTF8Length(n)));return o("MqttProtocolUtils").convertStringToUTF8(n,t,0),new e(n,t)},e.createWithBytes=function(n){var t=o("MqttProtocolUtils").convertUTF8ToString(n,0,n.length);return new e(t,n)};var t=e.prototype;return t.string=function(){return this.payloadString},t.bytes=function(){return this.payloadBytes},e})(),b=(function(e){function t(t,n,r,o,a,i){var l;if(l=e.call(this,"PUBLISH")||this,l.topic=t,l.payloadMessage=n,l.qos=r,l.messageIdentifier=o,l.retained=a!=null?a:!1,l.duplicate=i!=null?i:!1,l.qos===1&&l.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return l}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4;this.duplicate&&(e|=8),e=e|=this.qos<<1,this.retained&&e!=1;var t=o("MqttProtocolUtils").UTF8Length(this.topic),n=t+2,r=this.qos===0?0:2;n+=r;var a=this.payloadMessage.bytes();n+=a.byteLength;var i=o("MqttProtocolUtils").encodeMultiByteInt(n),l=new ArrayBuffer(1+i.length+n),s=new Uint8Array(l);s[0]=e,s.set(i,1);var u=1+i.length;return u=o("MqttProtocolUtils").writeString(this.topic,t,s,u),this.qos!==0&&this.messageIdentifier!=null&&(u=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,s,u)),s.set(a,u),l},t})(d),v=C.createWithString,S=C.createWithBytes,R={Base:d,ConnAck:f,Connect:h,Disconnect:p,Ping:m,PubAckUnsubAck:g,Publish:b,Subscription:y};l.MESSAGE_TYPE=e,l.decodeMessage=u,l.decodeByteMessages=c,l.Message=C,l.createMessageWithString=v,l.createMessageWithBytes=S,l.WireMessage=R}),98);
__d("MqttTypes",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n,r){this.errorCode=t,this.errorName=n,this.errorMessage=r},l=Object.freeze({APP_DISCONNECT:new e(7,"APP_DISCONNECT","Disconnect initiated by app"),BROWSER_CLOSE:new e(11,"BROWSER_CLOSE","Browser closed"),CONNACK_FAILURE:new e(5,"CONNACK_FAILURE","Connection failure due to connack"),CONNECT_TIMEOUT:new e(4,"CONNECT_TIMEOUT","Connect timed out"),INVALID_DATA_TYPE:new e(3,"INVALID_DATA_TYPE","Received non-arraybuffer from socket."),PING_TIMEOUT:new e(6,"PING_TIMEOUT","Ping timeout"),RECONNECT:new e(10,"RECONNECT","Reconnecting"),SERVER_DISCONNECT:new e(8,"SERVER_DISCONNECT","Disconnect message sent my server"),SOCKET_CLOSE:new e(9,"SOCKET_CLOSE","Socket connection closed"),SOCKET_ERROR:new e(1,"SOCKET_ERROR","Socket error"),SOCKET_MESSAGE:new e(2,"SOCKET_MESSAGE","Unable to parse invalid socket message")}),s=function(t,n){this.mqttError=t,this.connAck=n},u=(function(e){function t(t,n,r){var o;return r===void 0&&(r=null),o=e.call(this,n)||this,o.isRecoverable=t,o.originalError=r,o}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.MqttError=e,i.MqttErrors=l,i.ConnectFailure=s,i.MqttChannelError=u}),66);
__d("MqttProtocolClient",["ErrorSerializer","MqttEnv","MqttProtocolCodec","MqttProtocolUtils","MqttTypes","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=20,s=6e4,u=(function(){function t(e){var t=this;this.$12=function(e,n,r){n===void 0&&(n=null),t.$9.bumpCounter("protocol.debug.disconnect.internal."+e.errorName),t.$9.bumpCounter("protocol.debug.disconnect.internal");var a=t.$5,i=t.$2,l=i.onConnectFailure,s=i.onConnectionLost;t.setConnected(!1),t.$14(),a?o("MqttEnv").Env.scheduleCallback(function(){s(e,n)}):o("MqttEnv").Env.scheduleCallback(function(){l(t.$11,new(o("MqttTypes")).ConnectFailure(e,r!=null?r:-1),n)})},this.$13=function(e){var n=t.$6;if(n==null)return t.$9.bumpCounter("protocol.socket_send.failed.socket_null.<message type>"),0;if(n.readyState!==n.OPEN)return t.$9.bumpCounter("protocol.socket_send.failed.socket_not_open.<message type>"),0;var r=e.encode(),o=r.byteLength;return n.send(r),o},this.$3=e,this.$2={getKeepAliveIntervalSeconds:function(){return 10},getKeepAliveTimeoutSeconds:function(){return 10},ignoreSubProtocol:!1,mqttVersion:3,onConnectFailure:function(t,n,r){},onConnection:function(){},onConnectionLost:function(t,n){},onConnectSuccess:function(t){},onMessageArrived:function(t,n,r){},onMessageDelivered:function(t){},userName:""},this.$1="mqttwsclient",this.$4=0,this.$5=!1,this.$9=o("MqttEnv").Env.getLoggerInstance(),this.$11=0}var n=t.prototype;return n.connect=function(n){var t=this;if(this.$5)throw r("err")("Invalid state: connect - already connected");this.$2=n,this.setConnected(!1),this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),this.$7=o("MqttEnv").Env.setTimeout(function(){t.$9.bumpCounter("protocol.error.connect.timeout"),t.$12(o("MqttTypes").MqttErrors.CONNECT_TIMEOUT)},e*1e3),this.$6=o("MqttEnv").Env.createSocket(this.$3),this.$6.binaryType="arraybuffer",this.$6.onopen=function(){t.setConnected(!0),t.$9.debugTrace("Socket-Open","MQTTProtocolClient Socket Open"),t.$11=t.$13(new(o("MqttProtocolCodec")).WireMessage.Connect(t.$1,n)),n.onConnection()},this.$6.onmessage=function(e){var n=e.data;if(!(n instanceof ArrayBuffer)){t.$9.bumpCounter("protocol.error.onmessage.type"),t.$12(o("MqttTypes").MqttErrors.INVALID_DATA_TYPE);return}try{var a=new Uint8Array(n);t.$10!=null&&(a=o("MqttProtocolUtils").concatBuffers(t.$10,a),t.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete t.$10,t.$10=null);var i=o("MqttProtocolCodec").decodeByteMessages(a),l=i.messages;t.$10=i.remaining;for(var s=0;s<l.length;s++)t.handleMessage(l[s])}catch(e){var u=r("getErrorSafe")(e);t.$10=null,t.$9.logError(u,o("MqttTypes").MqttErrors.SOCKET_MESSAGE.errorMessage),t.$9.bumpCounter("protocol.error.onmessage.parse"),t.$12(o("MqttTypes").MqttErrors.SOCKET_MESSAGE,u.message)}},this.$6.onerror=function(e){t.$9.bumpCounter("protocol.error.socket"),t.$9.debugTrace("Socket-Error","MQTTProtocolClient Socket Error");var n=typeof e=="object"&&e!=null&&"error"in e&&!("message"in e)?e.error:e;t.$12(o("MqttTypes").MqttErrors.SOCKET_ERROR,r("ErrorSerializer").toReadableMessage(r("getErrorSafe")(n)))},this.$6.onclose=function(e){t.$9.bumpCounter("protocol.socket.close"),e.wasClean||t.$9.debugTrace("Socket-Unclean-Close","MQTTProtocolClient error code: "+e.code+" reason: "+e.reason),t.$12(o("MqttTypes").MqttErrors.SOCKET_CLOSE,e.code+" : "+e.reason)},this.$8!=null&&this.$8.cancel(),this.$8=new(o("MqttProtocolUtils")).Pinger(n.getKeepAliveIntervalSeconds,n.getKeepAliveTimeoutSeconds,this.$13.bind(this,new(o("MqttProtocolCodec")).WireMessage.Ping("PINGREQ")),function(e,n){return t.$12(o("MqttTypes").MqttErrors.PING_TIMEOUT,e,n)})},n.$14=function(){var e=this;this.setConnected(!1),this.$8!=null&&this.$8.cancel(),this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),this.$6!=null&&(this.$6.onopen=function(t){e.$9.debugTrace("Socket Open After Teardown","Socket opening after teardown")},this.$6.onmessage=function(e){},this.$6.onerror=function(e){},this.$6.onclose=function(t){e.$9.debugTrace("Socket Close After Teardown","code: "+t.code+", reason: "+t.reason)},this.$6.close(),this.$6=null),this.$2.onConnectSuccess=function(e){},this.$2.onConnectFailure=function(e,t){},this.$2.onConnection=function(){},this.$2.onConnectionLost=function(e){},this.$2.onMessageArrived=function(e,t,n){},this.$2.onMessageDelivered=function(e){}},n.disconnect=function(t){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$14();return}this.$13(new(o("MqttProtocolCodec")).WireMessage.Disconnect),this.$9.bumpCounter("protocol.debug.disconnect"),this.$12(t)},n.isConnected=function(){return this.$5},n.setConnected=function(t){this.$5=t},n.subscribe=function(t){if(!this.$5)throw this.$9.bumpCounter("protocol.error.subscribe.notconnected"),r("err")("Invalid state: subscribe - not connected");this.$9.bumpCounter("protocol.subscribe."+t);var e=new(o("MqttProtocolCodec")).WireMessage.Subscription("SUBSCRIBE",t,0,this.$15());this.$13(e)},n.unsubscribe=function(t){if(!this.$5)throw this.$9.bumpCounter("protocol.error.unsubscribe.notconnected"),r("err")("Invalid state: unsubscribe - not connected");this.$9.bumpCounter("protocol.unsubscribe."+t);var e=new(o("MqttProtocolCodec")).WireMessage.Subscription("UNSUBSCRIBE",t,0,this.$15());this.$13(e)},n.publish=function(t,n,r){return this.$16(t,o("MqttProtocolCodec").createMessageWithString(n),r)},n.publishBinary=function(t,n,r){return this.$16(t,o("MqttProtocolCodec").createMessageWithBytes(n),r)},n.$16=function(t,n,r){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected"),this.$9.bumpCounter("protocol.publish."+t);var e=this.$15(),a=new(o("MqttProtocolCodec")).WireMessage.Publish(t,n,r,e);return this.$13(a),e},n.$15=function(){return++this.$4===s&&(this.$4=1),this.$4},n.handleMessage=function(t){var e=this;switch(t.messageType){case o("MqttProtocolCodec").MESSAGE_TYPE.CONNACK:if(this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),t instanceof o("MqttProtocolCodec").WireMessage.ConnAck){var n=t;if(n.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode"),this.setConnected(!1),this.$12(o("MqttTypes").MqttErrors.CONNACK_FAILURE,"connack code="+n.returnCode,n.returnCode);return}o("MqttEnv").Env.scheduleCallback(function(){e.$2.onConnectSuccess(e.$11)}),this.$8!=null&&this.$8.reset()}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH:if(t instanceof o("MqttProtocolCodec").WireMessage.Publish){var a=t;o("MqttEnv").Env.scheduleCallback(function(){e.$2.onMessageArrived(a.topic,a.payloadMessage,a.qos)});var i=a.messageIdentifier;if(this.$9.bumpCounter("protocol.publish.received"),a.qos===1&&i!=null){var l=new(o("MqttProtocolCodec")).WireMessage.PubAckUnsubAck("PUBACK",i);this.$13(l)}}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PUBACK:if(t instanceof o("MqttProtocolCodec").WireMessage.PubAckUnsubAck){var s=t,u=s.messageIdentifier;this.$9.bumpCounter("protocol.puback.received"),o("MqttEnv").Env.scheduleCallback(function(){e.$2.onMessageDelivered(u)})}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PINGRESP:this.$8!=null&&this.$8.reset();break;case o("MqttProtocolCodec").MESSAGE_TYPE.DISCONNECT:this.$12(o("MqttTypes").MqttErrors.SERVER_DISCONNECT);break;case o("MqttProtocolCodec").MESSAGE_TYPE.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case o("MqttProtocolCodec").MESSAGE_TYPE.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(r("err")("MqttProtocolClient: Received unhandled message type: "+t.messageType),"Received unhandled message type"),this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}},t})();l.default=u}),98);
__d("MqttPublishListener",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});i.MqttPublishEvent=e}),66);
__d("MqttUserNameUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e!=null?e:typeof document=="object"&&document&&document.hasFocus&&document.hasFocus()}function l(){return navigator.userAgent}i.getMqttForegroundStatus=e,i.getUserAgent=l}),66);
__d("MqttUserName",["MqttUserNameUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r,a,i,l,s,u,c,d,m){l===void 0&&(l=null),s===void 0&&(s=""),u===void 0&&(u="websocket"),c===void 0&&(c=null),d===void 0&&(d=null),m===void 0&&(m=null),this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=o("MqttUserNameUtils").getMqttForegroundStatus(),this.$8=l,this.$9=s,this.$10=u,this.$11=c,this.$12=d,this.$13=m}var t=e.prototype;return t.gen=function(t,n,r,a){a===void 0&&(a=[]);var e=o("MqttUserNameUtils").getMqttForegroundStatus(this.$7),i=r.map(function(e){var t={isBase64Publish:!1,messageId:e.messageId,payload:e.payload,qos:e.qos,topic:e.topic};return typeof t.payload!="string"&&(t.payload=btoa(String.fromCharCode.apply(null,t.payload)),t.isBase64Publish=!0),t}),l={a:o("MqttUserNameUtils").getUserAgent(),asi:this.$13,aid:this.$5,aids:this.$12!=null?Object.fromEntries(this.$12):null,chat_on:this.$6,cp:this.$3,ct:this.$10,d:this.$4,dc:"",ecp:this.$2,fg:e,gas:this.$8,mqtt_sid:"",no_auto_fg:!0,p:this.$11,pack:a,php_override:this.$9,pm:i,s:t,st:n,u:this.$1};return JSON.stringify(l)},t.setForegroundState=function(t){this.$7=t},t.setChatVisibility=function(t){this.$6=t},t.getEndpointCapabilities=function(){return this.$2},t.getDeviceId=function(){return this.$4},t.setEndpointCapabilities=function(t){this.$2=t},t.getIsGuestAuthStringPresent=function(){return this.$8!==null},e})();l.default=e}),98);
__d("MqttConnection",["MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","Promise","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=15,u=15,c=1,d=1,m=64,p="publish",_="subscribe",f="unsubscribe",g=function(t){},h=18e4,y=5*1e3,C=15,b=21,v=(function(){function t(){var e=this;this.$38=function(){return e.$20},this.$39=function(){return e.$21},this.$8=!1,this.$10=o("MqttEnv").Env.getLoggerInstance(),this.$11="Disconnected",this.$17=new Set,this.$24=new Map,this.$12=0,this.$13=0,this.$14=0,this.$15=0,this.$16=0,this.$8=!1,this.$5="",this.$6=new(r("MqttUserName"))("",0,1,"",0,!0),this.$9=0,this.$18=0,this.$19=!1,this.$7=null;var t=function(){};this.$1=t,this.$2=t,this.$3=t,this.$25=!1,this.$26=!1,this.$27=new(r("MqttConnectionHookCollection")),this.$4=function(){return[]},this.$20=s,this.$21=u,this.$22=null,this.$23=0}var a=t.prototype;return a.run=function(t){var e=this,n=t.endpoint,r=t.extraConnectMessageProvider,o=t.mqttUserName,a=t.onJSError,i=t.onMessageReceived,l=t.onStateChange,c=t.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=l,this.$3=i,this.$5=n,this.$6=o,this.$8=!0,this.$18=Date.now(),this.$12=0,this.$13=0,this.$2=a||g,c&&c.forEach(function(t){return e.$17.add(t)}),this.$4=r,this.$20=s,this.$21=u,this.$28()},a.shutdown=function(t){this.$29(t),this.$30("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")},a.subscribe=function(t){return this.$17.add(t),this.ensureConnected(_)&&this.$31(t),!0},a.publish=function(t,n,r,o){return this.$32(t,n,r,o)},a.publishBinary=function(t,n,r,o){return this.$32(t,n,r,o)},a.$32=function(a,i,l,s){var t={reject:function(t){},resolve:function(){}};s!=null&&(t.listener=s);var u=new(e||(e=n("Promise")))(function(e,n){t.resolve=e,t.reject=n}),c=this.ensureConnected(p);return c?this.$33(a,i,l,t):(s==null||s.onEvent(o("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED),t.reject(r("err")("Client disconnected"))),u},a.unsubscribe=function(t){return this.$17.delete(t),this.ensureConnected(f)&&this.$34(t),!0},a.addHook=function(t){this.$27.addHook(t)},a.removeHook=function(t){this.$27.removeHook(t)},a.isRunning=function(){return this.$8},a.getSessionId=function(){return this.$9},a.hasFatal=function(){return this.$25},a.hasConnectSuccess=function(){return this.$26},a.canPublish=function(){return this.ensureConnected("canPublish")},a.ensureConnected=function(t){return!(!this.$8||this.$7==null||!this.$7.isConnected())},a.connectionState=function(){return this.$11},a.mqttStateFromConnectionState=function(t){switch(t){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw r("err")("Unknown state "+t)},a.testOnlyGetSubscribedTopics=function(){return this.$17},a.getDisconnectCount=function(){return this.$23},a.$29=function(t){this.$8&&this.$7!=null&&(this.$35("Disconnected"),this.$7!=null&&(this.$7.disconnect(t),this.$27.onConnectionDisconnect()),this.$7=null)},a.$36=function(t){if(this.$11==="Connected"&&t==="Disconnected"&&this.$18===0){this.$18=Date.now();return}if(t==="Connecting"&&this.$18!==0&&!this.$19){this.$10.bumpCounter("protocol.reconnectstarted"),this.$19=!0;return}if(t==="Connected"&&this.$18!==0){var e=Date.now()-this.$18;switch(Math.floor(e/3e4)){case 0:this.$10.bumpCounter("protocol.reconnectedwithin30s");break;case 1:this.$10.bumpCounter("protocol.reconnectedwithin60s");break;case 2:this.$10.bumpCounter("protocol.reconnectedwithin90s");break;case 3:this.$10.bumpCounter("protocol.reconnectedwithin120s");break;default:this.$10.bumpCounter("protocol.reconnectedmorethan120s");break}this.$18=0,this.$19=!1;return}},a.$35=function(t){t!==this.$11&&(this.$10.debugTrace("MQTTConnection-updateState","State changed to: "+t),this.$36(t),this.$11=t,this.$1(t))},a.$28=function(){var e=this;if(this.$8){this.$11!=="Disconnected"&&this.$10.debugTrace("Reconnect","Current State not disconnected: "+this.$11),this.$35("Connecting");var t=Date.now(),n=this.$10.getBrowserConnectivity();this.$9=o("MqttUtils").generateSessionId();var a=Array.from(this.$17),i=o("MqttUtils").endpointWithSessionId(this.$5,this.$9),l=o("MqttUtils").endpointWithExtraParameter(i,"cid",this.$6.getDeviceId());try{this.$7=new(r("MqttProtocolClient"))(l);var s=this.$37(),u=s.map(function(e){return e.topic}),c=this.$6.gen(this.$9,a,s);this.$7!=null&&(this.$13+=1,this.$7.connect({getKeepAliveIntervalSeconds:this.$38,getKeepAliveTimeoutSeconds:this.$39,ignoreSubProtocol:!0,mqttVersion:3,onConnectFailure:function(o,i,l){return e.$40(i,t,e.$18,a,u,n,o,l)},onConnection:function(){return e.$41(s,a)},onConnectionLost:function(n,r){return e.$42(n,r)},onConnectSuccess:function(o){return e.$43(t,e.$18,a,u,n,o)},onMessageArrived:function(n,r,o){return e.$44(n,r,o)},onMessageDelivered:function(n){return e.$45(n)},userName:c}),this.$10.bumpCounter("protocol.connectattempt"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"),this.$27.onConnectAttempt())}catch(e){var d=r("getErrorSafe")(e);this.$10.bumpCounter("js_error_in_init_exception"),this.$35("Disconnected"),this.$46(!1,!1,t,this.$18,a,[],n,null,14,"init error - "+d.message),e!=null&&this.$10.logErrorWarn(d,"ws_js_error"),this.$27.onWSFatal(),this.$47(new(o("MqttTypes")).MqttChannelError(!1,"ws_js_error",d),"client_init")}}},a.$37=function(){var e=this.$4(),t=65536;return e.map(function(e){return e.messageId=t--,e})},a.$31=function(t){try{if(this.$7!=null)return this.$7.subscribe(t),this.$10.debugTrace("#doSubscribe","Subscribing to "+t),this.$27.onSubscribe(t),this.$10.bumpCounter("protocol.subscribe"),!0}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+t),this.$10.bumpCounter("protocol.subscribe.error")}return!1},a.$34=function(t){try{if(this.$7!=null)return this.$7.unsubscribe(t),this.$10.debugTrace("#doUnsubscribe","Unsubscribing to "+t),this.$27.onUnsubscribe(t),this.$10.bumpCounter("protocol.unsubscribe"),!0}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+t),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1},a.$33=function(t,n,a,i){if(this.$7!=null)try{var e,l;typeof n=="string"?l=this.$7.publish(t,n,a):l=this.$7.publishBinary(t,n,a),this.$10.bumpCounter("protocol.publish");var s=l!=null?l:"null";return this.$10.debugTrace("#doPublish","publish "+t+" with messageId:"+s+" qos:"+a),this.$27.onPublish(t),(e=i.listener)==null||e.onEvent(o("MqttPublishListener").MqttPublishEvent.SENT),l!=null?(this.$10.bumpCounter("publish.ack_expected"),this.$24.set(l,i)):i.resolve(),!0}catch(e){var u=r("getErrorSafe")(e);return this.$10.logError(u,"Exception publishing"),this.$10.bumpCounter("publish_exception."+t),i.reject(u),this.$10.bumpCounter("protocol.publish.error"),!1}else return!1},a.$48=function(t){var e=this;if(t===void 0&&(t=null),!!this.$8){this.$29(o("MqttTypes").MqttErrors.RECONNECT),this.$30("reconnect"),this.$49(),this.$9=-1,this.$16=0;var n=t;n==null&&(n=c*Math.pow(2,this.$12)),n=Math.max(n,d),n=Math.min(n,m);var r=n*(1e3+o("MqttEnv").Env.random()*200);this.$10.debugTrace("#scheduleReconnect","Reconnect in "+r+" ms"),this.$22=o("MqttEnv").Env.setTimeout(function(){e.$28()},r),this.$12+=1}},a.$49=function(){var e=Date.now()-this.$16,t=this.$16!==0&&e>y,n=this.$12>C;(t||n)&&(this.$12=0),this.$16!==0&&e<=y&&this.$10.bumpCounter("short_lived_session"),n&&this.$10.bumpCounter("connection_attempt_limit")},a.$46=function(t,n,r,o,a,i,l,s,u,c){t?this.$14++:this.$15++;var e=Date.now();this.$10.eventLogConnect({ackReceived:n,attemptNumber:this.$13,connectionState:this.mqttStateFromConnectionState(this.$11),connectionStatus:t,disconnectCount:this.$23,duration:e-r,errorCode:u,errorMessage:c,failTotal:this.$15,hostname:this.$5,messageSizeBytes:s,osConnectivity:l,publishes:i,sessionID:this.$9,subscribedTopics:a,successTotal:this.$14,total_duration:e-o}),t&&(this.$13=0)},a.$40=function(t,n,r,o,a,i,l,s){var e=t.mqttError,u=s!=null?e.errorMessage+" - "+s:e.errorMessage;if(this.$10.debugTrace("connect","Connect failed "+u),this.$10.bumpCounter("protocol.onconnectfailure"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure"),this.$27.onConnectFailure(),this.$46(!1,t.connAck!==-1,n,r,o,a,i,l,e.errorCode,u),t.connAck!=null&&(this.$10.bumpCounter("protocol.connect_failure."+t.connAck),t.connAck===b)){this.$48(h);return}this.$48()},a.$41=function(t,n){var e=this;this.$10.bumpCounter("protocol.onconnection"),this.$10.debugTrace("Connect","Socket established"),this.$27.onConnected(),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection"),n.forEach(function(t){e.$27.onSubscribe(t)}),t.forEach(function(t){e.$27.onPublish(t.topic)}),this.$35("TransportConnected")},a.$43=function(t,n,r,o,a,i){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$27.onConnectSuccess(),this.$26=!0,this.$35("Connected"),this.$46(!0,!0,t,n,r,o,a,i),this.$50(r),this.$16=Date.now()},a.$42=function(t,n){if(this.$10.bumpCounter("protocol.onconnectionlost"),this.$23++,t.errorCode){var e=n!=null?t.errorMessage+" - "+n:t.errorMessage;this.$10.eventLogDisconnect({disconnectCount:this.$23,duration:Date.now()-this.$16,errorCode:t.errorCode,errorMessage:e,sessionID:this.$9})}this.$10.debugTrace("connect","connection lost"),this.$27.onConnectionLost(),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost"),this.$48()},a.$44=function(t,n,o){this.$10.bumpCounter("protocol.onmessagearrived"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived"),this.$10.debugTrace("onMessageArrived","Message received on "+t),this.$27.onMessage(t);try{this.$3(t,n,o)}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Listener threw error"),this.$10.bumpCounter("listener_error."+t)}},a.$45=function(t){var e;this.$10.bumpCounter("protocol.onmessagedelivered");var n=t!=null?t:"null";if(this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+n+"}"),t!=null){var r=this.$24.get(t);if(r==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$24.delete(t),(e=r.listener)==null||e.onEvent(o("MqttPublishListener").MqttPublishEvent.ACKED),r.resolve(),this.$10.bumpCounter("publish.ack_received")}},a.$30=function(t){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+t),this.$24.forEach(function(e,n,a){var i;(i=e.listener)==null||i.onEvent(o("MqttPublishListener").MqttPublishEvent.NOT_ACKED),e.reject(r("err")(t))}),this.$24.clear()},a.$50=function(t){var e=this,n=new Set(t);n.forEach(function(t){e.$17.has(t)||e.unsubscribe(t)});var r=new Set(this.$17);r.forEach(function(t){n.has(t)||e.subscribe(t)})},a.$47=function(t,n){try{this.$10.bumpCounter("js_error_in_init"),this.$10.bumpCounter(n+".error"),this.$25=!0;var e=t?t.message:"error";this.$10.debugTrace("onError",n+": "+e),this.$2(t)}catch(e){var o=r("getErrorSafe")(e);this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(o,"JS error while trying to log previous error")}},a.setRunning_OnlyForTests=function(t){this.$8=t},t})();l.default=v}),98);
__d("MqttWebSocketUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){return"WebSocket"in t&&t.WebSocket!=null&&"CLOSING"in t.WebSocket.prototype}i.hasWSSupport=e}),66);
__d("isFastRefreshEnabledForCurrentDomain",[],(function(t,n,r,o,a,i){"use strict";function e(){return!1}i.default=e}),66);
__d("MqttChannel",["ChannelClientID","IrisSubscribeChecker","MetaConfig","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","MqttWebSocketUtils","Promise","Run","err","getErrorSafe","isFastRefreshEnabledForCurrentDomain","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=29125,u=(function(){function t(e){var t=this,n=e.endpoint,a=e.pollingEndpoint,i=e.userFbid,l=e.appId,s=e.initialSubscribedTopics,u=e.capabilities,c=e.clientCapabilities,d=e.chatVisibility,m=d===void 0?!0:d,p=e.guestAuthString,_=p===void 0?null:p,f=e.phpOverride,g=f===void 0?"":f,h=e.clientType,y=h===void 0?"websocket":h,C=e.deviceId,b=C===void 0?r("ChannelClientID").getID():C,v=e.pageId,S=v===void 0?null:v,R=e.assetIds,L=R===void 0?null:R,E=e.appSpecificInfo,k=E===void 0?null:E;if(this.$11=o("MqttEnv").Env.getLoggerInstance(),this.$11.setAppId(l),this.$12=new(r("MqttUserName"))(i,u,c,b,l,m,_,g,y,S,L,k),this.$1=n,this.$2=a,this.$5="Disconnected",this.$7="LPInactive",this.$6="Disconnected",this.$3=[],this.$4=new Set,this.$8=new Map,this.$9=new Map,this.$10=new(r("MqttConnection")),this.$13=null,this.$16=new(r("MqttAnalyticsHook")),this.$15=new Map,this.$14=[],!o("MqttEnv").Env.isUserLoggedInNow()&&!r("isFastRefreshEnabledForCurrentDomain")()&&(_==null||_=="")){this.$11.bumpCounter("logged_out_init");return}this.$10.addHook(this.$16),this.$10.addHook(new(r("IrisSubscribeChecker"))(function(){return t.$4.size>0})),this.$17(s),this.$18()}var a=t.prototype;return a.$17=function(t){var e=this;if(this.$10.isRunning()){this.$19("run","Connection started calling run again");return}if(o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){if(r("MetaConfig")._("15")){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(!o("MqttWebSocketUtils").hasWSSupport()){this.$19("MqttChannel","Websocket Unavailable, will do long polling only"),this.$11.bumpCounter("ws_unavailable_polling");return}}this.$10.run({endpoint:this.$1,extraConnectMessageProvider:function(){return e.$20()},mqttUserName:this.$12,onJSError:function(n){e.$21(n)},onMessageReceived:function(n,r,o){e.$22(n,r,o)},onStateChange:function(n){e.$23(n)},subscribedTopics:t}),this.$24()},a.$24=function(){var e=this,t=o("Run").onUnload(function(){e.$25(o("MqttTypes").MqttErrors.BROWSER_CLOSE)})},a.shutdown=function(){this.$25(o("MqttTypes").MqttErrors.APP_DISCONNECT)},a.$25=function(t){this.$10&&this.$10.shutdown(t),this.$13&&this.$13.shutdown(),this.$16.onTabClose()},a.publish=function(t,n,r){return r===void 0&&(r={qos:1,skipBuffer:!1}),this.$26(t,n,r)},a.publishBinary=function(t,n,r){return r===void 0&&(r={qos:1,skipBuffer:!1}),this.$26(t,n,r)},a.$26=function(t,n,r){r===void 0&&(r={qos:1,skipBuffer:!1});var e;return r.qos===0?e=this.$27(t,n,r.listener):e=this.$28(t,n,r),o("MqttUtils").promiseDone(e,function(){},function(e){var t;(t=r.listener)==null||t.onEvent(o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR)}),e},a.$27=function(t,n,r){return this.$29(t,n,0,r,1,null)},a.$28=function(r,a,i){var t={reject:function(t){},resolve:function(){}},l=new(e||(e=n("Promise")))(function(e,n){t.resolve=e,t.reject=n}),s=o("MqttEnv").Env.random(),u={ack:t,attempt:0,options:i,payload:a,publishToken:s,startTime:Date.now(),timeoutId:null,topic:r};if(i.skipBuffer)if(this.$10.connectionState()==="Connecting"){var c;this.$14.push(u),(c=i.listener)==null||c.onEvent(o("MqttPublishListener").MqttPublishEvent.QUEUED)}else this.$30(u);else{var d;u.timeoutId=this.$31(s),this.$15.set(s,u),(d=i.listener)==null||d.onEvent(o("MqttPublishListener").MqttPublishEvent.QUEUED),this.$32(u)}return l},a.$30=function(t){t.attempt+=1,o("MqttUtils").promiseDone(this.$29(t.topic,t.payload,t.options.qos,t.options.listener,t.attempt,t.startTime),function(){t.ack.resolve()},function(e){t.ack.reject(e)})},a.$32=function(t){var e=this;t.attempt+=1,o("MqttUtils").promiseDone(this.$29(t.topic,t.payload,t.options.qos,t.options.listener,t.attempt,t.startTime),function(){return e.$33(t)},function(e){})},a.$29=function(t,n,a,i,l,s){var e=this,u,c,d=this.getConnectionState(),m=Date.now();return!this.$10.canPublish()&&this.$13&&this.$13.canPublish()?(typeof n=="string"?u=this.$13.publish(t,n,a):u=this.$13.publishBinary(t,n,a),c="lp",i!=null&&(u=u.then(function(){return i.onEvent(o("MqttPublishListener").MqttPublishEvent.SENT)})),this.$11.bumpCounter("try_publish_lp")):(typeof n=="string"?u=this.$10.publish(t,n,a,i):u=this.$10.publishBinary(t,n,a,i),c="ws",this.$11.bumpCounter("try_publish_ws")),r("promiseDone")(u,function(){e.$11.eventLogOutgoingPublish({attempt:l,connectionState:d,disconnectCount:e.$10.getDisconnectCount(),errorMessage:null,firstAttemptStartTime:s,payloadSizeBytes:n.length*2,protocol:c,qos:a,sessionID:e.$10.getSessionId(),success:!0,thisAttemptStartTime:m,topic:t})},function(r){e.$11.eventLogOutgoingPublish({attempt:l,connectionState:d,disconnectCount:e.$10.getDisconnectCount(),errorMessage:r!=null?r.toString():null,firstAttemptStartTime:s,payloadSizeBytes:n.length*2,protocol:c,qos:a,sessionID:e.$10.getSessionId(),success:!1,thisAttemptStartTime:m,topic:t})}),u},a.subscribe=function(t,n){var e=this;this.$10.subscribe(t);var r=this.$8.get(t);return r?r.push(n):(r=[n],this.$8.set(t,r)),function(){var r=e.$8.get(t)||[],o=r.filter(function(e){return e!==n});e.$8.set(t,o),o.length===0&&e.unsubscribeAll(t)}},a.subscribeBinary=function(t,n){var e=this;this.$10.subscribe(t);var r=this.$9.get(t);return r?r.push(n):(r=[n],this.$9.set(t,r)),function(){var r=e.$9.get(t)||[],o=r.filter(function(e){return e!==n});e.$9.set(t,o),o.length===0&&e.unsubscribeAll(t)}},a.subscribeChannelEvents=function(t){var e=this;return this.$3.push(t),function(){e.unsubscribeChannelEvents(t)}},a.unsubscribeChannelEvents=function(t){var e=this.$3.indexOf(t);e>-1&&this.$3.splice(e,1)},a.registerExtraConnectPayloadProvider=function(t){var e=this;if(this.$19("MqttChannel","registerExtraConnectPayloadProvider called"),this.$4.add(t),this.$10.isRunning()){var n=t.getPublishMessages();n.forEach(function(t){typeof t.payload=="string"?e.publish(t.topic,t.payload,{qos:t.qos,skipBuffer:!0}):e.publishBinary(t.topic,t.payload,{qos:t.qos,skipBuffer:!0})})}},a.unregisterExtraConnectPayloadProvider=function(t){this.$4.delete(t)},a.unsubscribeAll=function(t){this.$10.unsubscribe(t),this.$8.delete(t),this.$9.delete(t)},a.getConnectionState=function(){return this.$5},a.getLongPollingStatus=function(){return this.$7},a.getEndpoint=function(){return this.$1},a.addHook=function(t){this.$10.addHook(t)},a.removeHook=function(t){this.$10.removeHook(t)},a.testOnlyMessageReceived=function(t,n){this.$22(t,n,-1)},a.$34=function(t){var e=this.$15.get(t);e!=null&&e.timeoutId!=null&&o("MqttEnv").Env.clearTimeout(e.timeoutId),this.$15.delete(t)},a.$31=function(t){var e=this;return o("MqttEnv").Env.setTimeout(function(t){var n=e.$15.get(t);if(n){var o=n.topic;e.$11.bumpCounter("publish_timeout."+o),e.$11.debugTrace("publish_timeout","Timeout publishing topic: "+o+" publishToken: "+t),e.$34(t),n.ack.reject(r("err")("Publish Timed Out"))}},s,t)},a.$33=function(t){var e=t.publishToken,n=this.$15.get(e);n&&(this.$34(e),t.ack.resolve(),this.$11.debugTrace("publish_success","Topic: "+t.topic+" publishToken: "+t.publishToken),this.$11.bumpCounter("publish_success."+t.topic))},a.$22=function(t,n,o){var e=this.$8.get(t);if(this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:n.payloadString.length*2,qos:o,sessionID:this.$10.getSessionId(),topic:t}),!e)this.$11.debugTrace("_onMessageReceived",t+" being dropped, no listeners");else for(var a of e)try{a(n.payloadString)}catch(e){this.$11.logError(r("getErrorSafe")(e),"Listener exception"),this.$11.bumpCounter("listener_error")}var i=this.$9.get(t);if(this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:n.payloadBytes.length,qos:o,sessionID:this.$10.getSessionId(),topic:t}),!i)this.$11.debugTrace("_onMessageReceived",t+" being dropped, no binary listeners");else for(var l of i)try{l(n.payloadBytes)}catch(e){this.$11.logError(r("getErrorSafe")(e),"Binary Listener exception"),this.$11.bumpCounter("listener_error")}},a.$21=function(t){if(o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){t.isRecoverable?this.$11.bumpCounter("recoverable_error_skipped"):this.$11.bumpCounter("unrecoverable_error_skipped");return}t.isRecoverable?this.$11.bumpCounter("recoverable_error_not_skipped"):this.$11.bumpCounter("unrecoverable_error_not_skipped"),this.$35(t)},a.$36=function(t){this.$35(t)},a.$35=function(t){for(var e of this.$3)e.onJSError&&e.onJSError(t)},a.$37=function(){var e=this;this.$14.forEach(function(t){e.$30(t),e.$11.bumpCounter("publish_from_temp_buffer."+t.topic)}),this.$14=[],this.$15.forEach(function(t,n,r){e.$32(t),e.$11.bumpCounter("publish_from_buffer."+t.topic)})},a.$23=function(t){t==="Connecting"?(this.$14.forEach(function(e){e.ack.reject(r("err")("Client Reconnecting - "+e.topic))}),this.$14=[]):t==="TransportConnected"&&this.$37(),this.$19("_changeState","Connection state = "+t),this.$38(t,this.$7)},a.$39=function(t,n){this.$13&&this.$13.canPublish()&&this.$37(),this.$19("_changeLPStatus","LP status = "+t+", LP Request status = "+n),this.$38(this.$6,t)},a.$38=function(t,n){var e=this.$10.mqttStateFromConnectionState(t);this.$13&&this.$13.canPublish()&&(e="Connected"),this.$6=t,(e!==this.$5||n!=this.$7)&&(this.$5=e,this.$7=n,this.$40(e))},a.$40=function(t){for(var e of this.$3)e.onMQTTStateChanged(t)},a.$20=function(){var e=this,t=[];return this.$4.forEach(function(n){try{var o=n.getPublishMessages();Array.prototype.push.apply(t,o)}catch(t){e.$11.logError(r("getErrorSafe")(t),"ConnectPayload provider exception"),e.$11.bumpCounter("connectPayloadProvider_error")}}),t},a.$18=function(){var e=this;o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)&&!r("MetaConfig")._("262")&&this.$2&&this.$2!=""&&r("requireDeferred")("MqttLongPollingRunner").__setRef("MqttChannel").onReady(function(t){var n=new t(e.$2,e.$12,e.$10.hasFatal(),e.$10.hasConnectSuccess(),function(t,n,r){return e.$22(t,n,r)},function(){var t=Array.from(e.$8.keys()),n=Array.from(e.$9.keys());return Array.from(new Set(t.concat(n)))},function(){return e.$20()},function(t){e.$36(t)},function(t,n){e.$39(t,n)});n.start(),e.$10.addHook(n),n.addHook(e.$16),e.$13=n,e.$11.debugTrace("MqttChannel","longPollingRunner loaded")})},a.$19=function(t,n){this.$11.debugTrace(t,"Mqtt channel: "+n)},a.setForegroundState=function(t){this.$12&&this.$12.setForegroundState(t)},a.setChatVisibility=function(t){this.$12&&this.$12.setChatVisibility(t)},a.getEndpointCapabilities=function(){return this.$12.getEndpointCapabilities()},a.setEndpointCapabilities=function(t){this.$12.setEndpointCapabilities(t)},a.getConnection_OnlyForTests=function(){return this.$10},t})();l.default=u}),98);
__d("MqttConfig",["MqttWebConfig"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MqttWebConfig")}),98);
__d("MqttEnvConfigStorage",["WebStorage"],(function(t,n,r,o,a,i,l){var e,s="mqtt:";function u(t,n){var o=(e||(e=r("WebStorage"))).getLocalStorage();if(o){var a=o.getItem(s+t);if(a!=null)return a}return n}function c(t,n){var o=(e||(e=r("WebStorage"))).getLocalStorage();if(o)if(n==null)o.removeItem(s+t);else var a=(e||(e=r("WebStorage"))).setItemGuarded(o,s+t,n)}l.configRead=u,l.configWrite=c}),98);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744057"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_connect",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientDisconnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744058"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_disconnect",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744059"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_incoming_publish",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744060"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_outgoing_publish",e),u=s;l.default=u}),98);
__d("MqttWsClientTypedLoggerLite",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MqttLogger",["ChannelClientID","FBLogger","LogHistory","MetaConfig","MqttEnv","MqttGlobalStreamCounter","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientDisconnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttWsClientTypedLoggerLite","NetworkStatus","ODS","Random"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("MetaConfig")._("99"),u="mqtt_client",c=100,d="WEBSOCKET",m=typeof window!="undefined"?window:self,p=null,_={CLIENT_ERROR:"mqtt_client_error",CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},f={CONNECT:"connect",DISCONNECT:"disconnect",INCOMING_PUBLISH:"incoming_publish",OUTGOING_PUBLISH:"outgoing_publish"},g=(function(){function t(e){this.$1=o("LogHistory").getInstance(u),this.$2=0,this.$3=Date.now(),this.$4=r("ChannelClientID").getID(),this.$7(),this.$5=o("MqttGlobalStreamCounter").getInstance(),this.$5.isEnabled()||(this.$5=null),this.$6=e}t.getInstance=function(n){return p||(p=new t(n)),p};var n=t.prototype;return n.setAppId=function(t){this.$2===0&&(this.$2=t)},n.eventLogConnect=function(t){var e,n,o=t.ackReceived,a=t.attemptNumber,i=t.connectionState,l=t.connectionStatus,s=t.disconnectCount,u=t.duration,c=t.errorMessage,m=t.failTotal,p=t.hostname,g=t.messageSizeBytes,h=t.osConnectivity,y=t.sessionID,C=t.successTotal,b=t.total_duration,v=l?"success":"failed";this.bumpCounter(_.CONNECT+"."+v);var S=C/(C+m),R=h&&this.getBrowserConnectivity(),L={acked:o,attempt_number:a.toString(),client_type:d,connection_state:i,disconnect_count:s.toString(),duration:u.toString(),error:c,event_type:f.CONNECT,extra_data:{connect_success_rate:S.toString(),device_id:this.$4,hostname:p,connectionStatus:l.toString(),exposure:(e=this.$6)!=null?e:""},os_connectivity:R,payload_size:g==null?void 0:g.toString(),session_id:y.toString(),total_duration:b.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){r("MqttUnifiedClientConnectFalcoEvent").log(function(){return L})})},n.eventLogPull=function(t){var e=t.duration,n=t.errorMessage,r=t.hostname,a=t.pullEventName,i=t.sessionID,l=t.status,s={connection_status:l,device_id:this.$4,duration:e,error_message:n,hostname:r,href:m.location.hostname,logged_in:o("MqttEnv").Env.isUserLoggedInNow(),session_id:i};this.$9(a,s)},n.eventLogPullFinish=function(t){var e=t.duration,n=t.errorMessage,r=t.publishReceived,a=t.publishSent,i=t.pullEventName,l=t.sessionID,s={device_id:this.$4,duration:e,error_message:n,href:m.location.hostname,logged_in:o("MqttEnv").Env.isUserLoggedInNow(),publish_received:r,publish_sent:a,session_id:l};this.$9(i,s)},n.eventLogDisconnect=function(t){var e,n,o=t.disconnectCount,a=t.duration,i=t.errorMessage,l=t.sessionID;this.bumpCounter(_.DISCONNECT);var s={client_type:d,connection_state:"Disconnected",disconnect_count:o.toString(),duration:a.toString(),error:i,event_type:f.DISCONNECT,extra_data:{device_id:this.$4,exposure:(e=this.$6)!=null?e:""},os_connectivity:this.getBrowserConnectivity(),session_id:l.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){r("MqttUnifiedClientDisconnectFalcoEvent").log(function(){return s})})},n.eventLogOutgoingPublish=function(t){var e=t.attempt,n=t.connectionState,o=t.disconnectCount,a=t.errorMessage,i=t.firstAttemptStartTime,l=t.payloadSizeBytes,s=t.protocol,u=t.qos,c=t.sessionID,m=t.success,p=t.thisAttemptStartTime,g=t.topic;this.bumpCounter(_.PUBLISH+"."+g);var h=Date.now(),y={acked:u===1?m:null,attempt_number:e.toString(),client_type:d,connection_state:n,disconnect_count:o.toString(),duration:(h-p).toString(),error:a,event_type:f.OUTGOING_PUBLISH,extra_data:{device_id:this.$4,protocol:s},os_connectivity:this.getBrowserConnectivity(),payload_size:l.toString(),qos:u.toString(),session_id:c.toString(),topic:g,total_duration:i!=null?(h-i).toString():null};this.$8(function(){r("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return y})})},n.eventLogIncomingPublish=function(t){var e=t.connectionState,n=t.disconnectCount,o=t.payloadSizeBytes,a=t.qos,i=t.sessionID,l=t.topic,s={client_type:d,connection_state:e,disconnect_count:n.toString(),event_type:f.INCOMING_PUBLISH,extra_data:{device_id:this.$4},os_connectivity:this.getBrowserConnectivity(),payload_size:o.toString(),qos:a.toString(),session_id:i.toString(),topic:l},u=l=="/webrtc"||l=="/rtc_multi";this.$10(function(){r("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return s})},50,u)},n.logError=function(t,n){o("MqttEnv").Env.scheduleLoggingCallback(function(){try{r("FBLogger")(u).catching(t).mustfix(n)}catch(e){}})},n.logErrorWarn=function(t,n){o("MqttEnv").Env.scheduleLoggingCallback(function(){try{r("FBLogger")(u).catching(t).warn(n)}catch(e){}})},n.logWarn=function(t,n){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){try{e.$1.warn(t,n)}catch(e){}})},n.debugTrace=function(t,n){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){try{e.$1.debug(t,n)}catch(e){}})},n.bumpCounter=function(n){var t=this;o("Random").coinflip(c)&&o("MqttEnv").Env.scheduleLoggingCallback(function(){t.$2!==0&&(e||(e=o("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",t.$2+"."+n,c),(e||(e=o("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",n,c)})},n.$9=function(t,n,a){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){n.event_type=t,n.app_id=e.$2,n.online=e.$11();var o=JSON.stringify(n);e.$1.log(t,o,{weight:a}),t!==_.DISCONNECT&&r("MqttWsClientTypedLoggerLite").log(n)})},n.$10=function(t,n,r){var e;s&&n!==0?e=r||o("Random").coinflip(n):e=!0,e&&o("MqttEnv").Env.scheduleCallback(t)},n.$8=function(t){this.$10(t,0,!1)},n.$11=function(){return m.navigator&&m.navigator.onLine!==void 0?m.navigator.onLine:!1},n.getBrowserConnectivity=function(){return r("NetworkStatus").isOnline()},n.$7=function(){var e=this;if(m.navigator&&m.navigator.onLine!==void 0){var t=function(n){var t=n.online;t||e.bumpCounter("browser_disconnect")};r("NetworkStatus").onChange(t)}},t})();l.default=g}),98);
__d("MqttEnvGk",["MqttEnv","MqttLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case o("MqttEnv").MqttGkNames.mqtt_waterfall_log_client_sampling:return r("gkx")("21119");case o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled:return!0;case o("MqttEnv").MqttGkNames.mqtt_lp_use_fetch:return r("gkx")("21120");case o("MqttEnv").MqttGkNames.mqtt_fast_lp:return!1;case o("MqttEnv").MqttGkNames.mqtt_lp_no_delay:return r("gkx")("21122");case o("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling:return r("gkx")("21123");case o("MqttEnv").MqttGkNames.mqttweb_global_connection_counter:return r("gkx")("21124");default:return r("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+e),!1}}l.default=e}),98);
__d("MqttEnvInitializer",["CurrentMessengerUser","MqttEnv","MqttEnvConfigStorage","MqttEnvGk","MqttLogger","Random","clearTimeout","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";function e(e){o("MqttEnv").Env.initialize(r("Random").random,o("CurrentMessengerUser").isLoggedInNow,r("clearTimeout"),r("setTimeoutAcrossTransitions"),function(){return r("MqttLogger").getInstance()},r("MqttEnvGk"),e!=null?e:null,null,null,o("MqttEnvConfigStorage").configRead,o("MqttEnvConfigStorage").configWrite)}var s={genGk:r("MqttEnvGk"),initialize:e};l.default=s}),98);
__d("FBMqttChannel",["MqttChannel","MqttConfig","MqttEnvInitializer"],(function(t,n,r,o,a,i,l){"use strict";var e;r("MqttEnvInitializer").initialize();var s=new(r("MqttChannel"))({appId:(e=r("MqttConfig")).appID,capabilities:e.capabilities,chatVisibility:!1,clientCapabilities:e.clientCapabilities,endpoint:e.endpoint,initialSubscribedTopics:e.subscribedTopics,phpOverride:e.hostNameOverride,pollingEndpoint:e.pollingEndpoint,userFbid:e.fbid});l.default=s}),98);/*FB_PKG_DELIM*/
/**
 *
 * This file is generated from fbsource. Please do not modify it directly.
 *
 *
 * @nolint
 * @generated
 * @nopackage
 * @fullSyntaxTransform
 * @preserve-whitespace
 */__d("ls_voprf_utils_v2",["Promise"],(function $module_ls_voprf_utils_v2(global,require,requireDynamic,requireLazy,module,exports){var _require_closure_Promise;


var Module=function(){
var _scriptDir=typeof document!=='undefined'&&document.currentScript?document.currentScript.src:undefined;

return(
function(moduleArg){if(moduleArg===void 0){moduleArg={};}

var Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module["ready"]=new(_require_closure_Promise||(_require_closure_Promise=require("Promise")))(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject;});["_main","getExceptionMessage","___get_exception_message","_free","_memory","_curve_create","_curve_free","_curve_init_ristretto","_get_curve_element_bytes","_get_curve_scalar_bytes","_kdf_create","_kdf_free","_kdf_init_naor_reingold","_sodiumInit","_voprf_create","_voprf_free","_voprf_init_exp_twohashdh","_blind","_verifiable_unblind","_voprf_client_finalize","_voprf_setup","_voprf_evaluate","_voprf_server_finalize","_get_voprf_final_evaluation_bytes","___indirect_function_table","__embind_initialize_bindings","_fflush","___start_em_asm","___stop_em_asm","onRuntimeInitialized"].forEach(function(prop){if(!Object.getOwnPropertyDescriptor(Module["ready"],prop)){Object.defineProperty(Module["ready"],prop,{get:function get(){return abort("You are getting "+prop+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js");},set:function set(){return abort("You are setting "+prop+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js");}});}});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram="./this.program";var quit_=function quit_(status,toThrow){throw toThrow;};var ENVIRONMENT_IS_WEB=true;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_IS_SHELL=false;if(Module["ENVIRONMENT"]){throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");}var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory);}return scriptDirectory+path;}var read_,readAsync,readBinary,setWindowTitle;if(typeof document!="undefined"&&document.currentScript){scriptDirectory=document.currentScript.src;}if(_scriptDir){scriptDirectory=_scriptDir;}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1);}else{scriptDirectory="";}if(!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");{read_=function read_(url){var xhr=new XMLHttpRequest();xhr.open("GET",url,false);xhr.send(null);return xhr.responseText;};readAsync=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest();xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return;}onerror();};xhr.onerror=onerror;xhr.send(null);};}setWindowTitle=function setWindowTitle(title){return document.title=title;};var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;checkIncomingModuleAPI();if(Module["arguments"])arguments_=Module["arguments"];legacyModuleProp("arguments","arguments_");if(Module["thisProgram"])thisProgram=Module["thisProgram"];legacyModuleProp("thisProgram","thisProgram");if(Module["quit"])quit_=Module["quit"];legacyModuleProp("quit","quit_");assert(typeof Module["memoryInitializerPrefixURL"]=="undefined","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["pthreadMainPrefixURL"]=="undefined","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["cdInitializerPrefixURL"]=="undefined","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["filePackagePrefixURL"]=="undefined","Module.filePackagePrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["read"]=="undefined","Module.read option was removed (modify read_ in JS)");assert(typeof Module["readAsync"]=="undefined","Module.readAsync option was removed (modify readAsync in JS)");assert(typeof Module["readBinary"]=="undefined","Module.readBinary option was removed (modify readBinary in JS)");assert(typeof Module["setWindowTitle"]=="undefined","Module.setWindowTitle option was removed (modify setWindowTitle in JS)");assert(typeof Module["TOTAL_MEMORY"]=="undefined","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY");legacyModuleProp("asm","wasmExports");legacyModuleProp("read","read_");legacyModuleProp("readAsync","readAsync");legacyModuleProp("readBinary","readBinary");legacyModuleProp("setWindowTitle","setWindowTitle");assert(!ENVIRONMENT_IS_WORKER,"worker environment detected but not enabled at build time.  Add 'worker' to `-sENVIRONMENT` to enable.");assert(!ENVIRONMENT_IS_NODE,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable.");assert(!ENVIRONMENT_IS_SHELL,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.");var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];legacyModuleProp("wasmBinary","wasmBinary");var noExitRuntime=Module["noExitRuntime"]||true;legacyModuleProp("noExitRuntime","noExitRuntime");if(typeof WebAssembly!="object"){abort("no native wasm support detected");}var wasmMemory;var wasmExports;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort("Assertion failed"+(text?": "+text:""));}}var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module["HEAP8"]=HEAP8=new Int8Array(b);Module["HEAP16"]=HEAP16=new Int16Array(b);Module["HEAP32"]=HEAP32=new Int32Array(b);Module["HEAPU8"]=HEAPU8=new Uint8Array(b);Module["HEAPU16"]=HEAPU16=new Uint16Array(b);Module["HEAPU32"]=HEAPU32=new Uint32Array(b);Module["HEAPF32"]=HEAPF32=new Float32Array(b);Module["HEAPF64"]=HEAPF64=new Float64Array(b);}assert(!Module["STACK_SIZE"],"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time");assert(typeof Int32Array!="undefined"&&typeof Float64Array!=="undefined"&&Int32Array.prototype.subarray!=undefined&&Int32Array.prototype.set!=undefined,"JS engine does not provide full typed array support");assert(!Module["wasmMemory"],"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally");assert(!Module["INITIAL_MEMORY"],"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var wasmTable;function writeStackCookie(){var max=_emscripten_stack_get_end2();assert((max&3)==0);if(max==0){max+=4;}HEAPU32[max>>2]=34821223;HEAPU32[max+4>>2]=2310721022;HEAPU32[0>>2]=1668509029;}function checkStackCookie(){if(ABORT)return;var max=_emscripten_stack_get_end2();if(max==0){max+=4;}var cookie1=HEAPU32[max>>2];var cookie2=HEAPU32[max+4>>2];if(cookie1!=34821223||cookie2!=2310721022){abort("Stack overflow! Stack cookie has been overwritten at "+ptrToString(max)+", expected hex dwords 0x89BACDFE and 0x2135467, but received "+ptrToString(cookie2)+" "+ptrToString(cookie1));}if(HEAPU32[0>>2]!=1668509029){abort("Runtime error: The application has corrupted its heap memory area (address zero)!");}}(function(){var h16=new Int16Array(1);var h8=new Int8Array(h16.buffer);h16[0]=25459;if(h8[0]!==115||h8[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)";})();var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;var runtimeKeepaliveCounter=0;function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift());}}callRuntimeCallbacks(__ATPRERUN__);}function initRuntime(){assert(!runtimeInitialized);runtimeInitialized=true;checkStackCookie();callRuntimeCallbacks(__ATINIT__);}function postRun(){checkStackCookie();if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift());}}callRuntimeCallbacks(__ATPOSTRUN__);}function addOnPreRun(cb){__ATPRERUN__.unshift(cb);}function addOnInit(cb){__ATINIT__.unshift(cb);}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb);}assert(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;var runDependencyTracking={};function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies);}if(id){assert(!runDependencyTracking[id]);runDependencyTracking[id]=1;if(runDependencyWatcher===null&&typeof setInterval!="undefined"){runDependencyWatcher=setInterval(function(){if(ABORT){clearInterval(runDependencyWatcher);runDependencyWatcher=null;return;}var shown=false;for(var dep in runDependencyTracking){if(!shown){shown=true;err("still waiting on run dependencies:");}err("dependency: "+dep);}if(shown){err("(end of list)");}},1e4);}}else{err("warning: run dependency added without ID");}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies);}if(id){assert(runDependencyTracking[id]);delete runDependencyTracking[id];}else{err("warning: run dependency removed without ID");}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null;}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback();}}}function abort(what){if(Module["onAbort"]){Module["onAbort"](what);}what="Aborted("+what+")";err(what);ABORT=true;EXITSTATUS=1;var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e;}var FS={error:function error(){abort("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM");},init:function init(){FS.error();},createDataFile:function createDataFile(){FS.error();},createPreloadedFile:function createPreloadedFile(){FS.error();},createLazyFile:function createLazyFile(){FS.error();},open:function open(){FS.error();},mkdev:function mkdev(){FS.error();},registerDevice:function registerDevice(){FS.error();},analyzePath:function analyzePath(){FS.error();},ErrnoError:function ErrnoError(){FS.error();}};Module["FS_createDataFile"]=FS.createDataFile;Module["FS_createPreloadedFile"]=FS.createPreloadedFile;var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return filename.startsWith(dataURIPrefix);}function isFileURI(filename){return filename.startsWith("file://");}function createExportWrapper(name){return function(){assert(runtimeInitialized,"native function `"+name+"` called before runtime initialization");var f=wasmExports[name];assert(f,"exported native function `"+name+"` not found");return f.apply(null,arguments);};}var _EmscriptenEH3=function(_Error){"use strict";function EmscriptenEH(){return _Error.apply(this,arguments)||this;}babelHelpers.inheritsLoose(EmscriptenEH,_Error);return EmscriptenEH;}(babelHelpers.wrapNativeSuper(Error));var _EmscriptenSjLj=function(_EmscriptenEH){"use strict";function EmscriptenSjLj(){return _EmscriptenEH.apply(this,arguments)||this;}babelHelpers.inheritsLoose(EmscriptenSjLj,_EmscriptenEH);return EmscriptenSjLj;}(_EmscriptenEH3);var _CppException=function(_EmscriptenEH2){"use strict";function CppException(excPtr){var _this;_this=_EmscriptenEH2.call(this,excPtr)||this;_this.excPtr=excPtr;var excInfo=getExceptionMessage(excPtr);_this.name=excInfo[0];_this.message=excInfo[1];return _this;}babelHelpers.inheritsLoose(CppException,_EmscriptenEH2);return CppException;}(_EmscriptenEH3);var wasmBinaryFile;wasmBinaryFile="crypto_utils_v2.wasm";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile);}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary);}if(readBinary){return readBinary(file);}throw"both async and sync fetching of the wasm failed";}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"){return fetch(binaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+binaryFile+"'";}return response["arrayBuffer"]();})["catch"](function(){return getBinarySync(binaryFile);});}}return(_require_closure_Promise||(_require_closure_Promise=require("Promise"))).resolve().then(function(){return getBinarySync(binaryFile);});}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(function(binary){return WebAssembly.instantiate(binary,imports);}).then(function(instance){return instance;}).then(receiver,function(reason){err("failed to asynchronously prepare wasm: "+reason);if(isFileURI(wasmBinaryFile)){err("warning: Loading from a file URI ("+wasmBinaryFile+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing");}abort(reason);});}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(binaryFile)&&typeof fetch=="function"){return fetch(binaryFile,{credentials:"same-origin"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");return instantiateArrayBuffer(binaryFile,imports,callback);});});}return instantiateArrayBuffer(binaryFile,imports,callback);}function createWasm(){var info={"env":wasmImports,"wasi_snapshot_preview1":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports["memory"];Module["wasmMemory"]=wasmMemory;assert(wasmMemory,"memory not found in wasm exports");updateMemoryViews();wasmTable=wasmExports["__indirect_function_table"];assert(wasmTable,"table not found in wasm exports");addOnInit(wasmExports["__wasm_call_ctors"]);removeRunDependency("wasm-instantiate");return exports;}addRunDependency("wasm-instantiate");var trueModule=Module;function receiveInstantiationResult(result){assert(Module===trueModule,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?");trueModule=null;receiveInstance(result["instance"]);}if(Module["instantiateWasm"]){try{return Module["instantiateWasm"](info,receiveInstance);}catch(e){err("Module.instantiateWasm callback failed with error: "+e);readyPromiseReject(e);}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult)["catch"](readyPromiseReject);return{};}function legacyModuleProp(prop,newName,incomming){if(incomming===void 0){incomming=true;}if(!Object.getOwnPropertyDescriptor(Module,prop)){Object.defineProperty(Module,prop,{configurable:true,get:function get(){var extra=incomming?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":"";abort("`Module."+prop+"` has been replaced by `"+newName+"`"+extra);}});}}function ignoredModuleProp(prop){if(Object.getOwnPropertyDescriptor(Module,prop)){abort("`Module."+prop+"` was supplied but `"+prop+"` not included in INCOMING_MODULE_JS_API");}}function isExportedByForceFilesystem(name){return name==="FS_createPath"||name==="FS_createDataFile"||name==="FS_createPreloadedFile"||name==="FS_unlink"||name==="addRunDependency"||name==="FS_createLazyFile"||name==="FS_createDevice"||name==="removeRunDependency";}function missingGlobal(sym,msg){if(typeof globalThis!=="undefined"){Object.defineProperty(globalThis,sym,{configurable:true,get:function get(){_warnOnce("`"+sym+"` is not longer defined by emscripten. "+msg);return undefined;}});}}missingGlobal("buffer","Please use HEAP8.buffer or wasmMemory.buffer");function missingLibrarySymbol(sym){if(typeof globalThis!=="undefined"&&!Object.getOwnPropertyDescriptor(globalThis,sym)){Object.defineProperty(globalThis,sym,{configurable:true,get:function get(){var msg="`"+sym+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line";var librarySymbol=sym;if(!librarySymbol.startsWith("_")){librarySymbol="$"+sym;}msg+=" (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='"+librarySymbol+"')";if(isExportedByForceFilesystem(sym)){msg+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";}_warnOnce(msg);return undefined;}});}unexportedRuntimeSymbol(sym);}function unexportedRuntimeSymbol(sym){if(!Object.getOwnPropertyDescriptor(Module,sym)){Object.defineProperty(Module,sym,{configurable:true,get:function get(){var msg="'"+sym+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)";if(isExportedByForceFilesystem(sym)){msg+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";}abort(msg);}});}}var ASM_CONSTS={50356:function _(){return Module.getRandomValue();},50392:function _(){if(Module.getRandomValue===undefined){try{var window_="object"===typeof window?window:self;var crypto_=typeof window_.crypto!=="undefined"?window_.crypto:window_.msCrypto;var randomValuesStandard=function randomValuesStandard(){var buf=new Uint32Array(1);crypto_.getRandomValues(buf);return buf[0]>>>0;};randomValuesStandard();Module.getRandomValue=randomValuesStandard;}catch(e){{throw"No secure random number generator found";}}}}};function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status;}var callRuntimeCallbacks=function callRuntimeCallbacks(callbacks){while(callbacks.length>0){callbacks.shift()(Module);}};var withStackSave=function withStackSave(f){var stack=stackSave();var ret=f();stackRestore(stack);return ret;};var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):undefined;var UTF8ArrayToString=function UTF8ArrayToString(heapOrArray,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr));}var str="";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue;}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue;}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2;}else{if((u0&248)!=240)_warnOnce("Invalid UTF-8 leading byte "+ptrToString(u0)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!");u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63;}if(u0<65536){str+=String.fromCharCode(u0);}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023);}}return str;};var UTF8ToString=function UTF8ToString(ptr,maxBytesToRead){assert(typeof ptr=="number");return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):"";};var getExceptionMessageCommon=function getExceptionMessageCommon(ptr){return withStackSave(function(){var type_addr_addr=stackAlloc(4);var message_addr_addr=stackAlloc(4);___get_exception_message(ptr,type_addr_addr,message_addr_addr);var type_addr=HEAPU32[type_addr_addr>>2];var message_addr=HEAPU32[message_addr_addr>>2];var type=UTF8ToString(type_addr);_free(type_addr);var message;if(message_addr){message=UTF8ToString(message_addr);_free(message_addr);}return[type,message];});};function getExceptionMessage(ptr){return getExceptionMessageCommon(ptr);}Module["getExceptionMessage"]=getExceptionMessage;function getValue(ptr,type){if(type===void 0){type="i8";}if(type.endsWith("*"))type="*";switch(type){case"i1":return HEAP8[ptr>>0];case"i8":return HEAP8[ptr>>0];case"i16":return HEAP16[ptr>>1];case"i32":return HEAP32[ptr>>2];case"i64":abort("to do getValue(i64) use WASM_BIGINT");case"float":return HEAPF32[ptr>>2];case"double":return HEAPF64[ptr>>3];case"*":return HEAPU32[ptr>>2];default:abort("invalid type for getValue: "+type);}}var ptrToString=function ptrToString(ptr){assert(typeof ptr==="number");ptr>>>=0;return"0x"+ptr.toString(16).padStart(8,"0");};var _warnOnce=function warnOnce(text){if(!_warnOnce.shown)_warnOnce.shown={};if(!_warnOnce.shown[text]){_warnOnce.shown[text]=1;err(text);}};var ___assert_fail=function ___assert_fail(condition,filename,line,func){abort("Assertion failed: "+UTF8ToString(condition)+", at: "+[filename?UTF8ToString(filename):"unknown filename",line,func?UTF8ToString(func):"unknown function"]);};var exceptionCaught=[];var uncaughtExceptionCount=0;function ___cxa_begin_catch(ptr){var info=new ExceptionInfo(ptr);if(!info.get_caught()){info.set_caught(true);uncaughtExceptionCount--;}info.set_rethrown(false);exceptionCaught.push(info);___cxa_increment_exception_refcount(info.excPtr);return info.get_exception_ptr();}var exceptionLast=0;function ExceptionInfo(excPtr){this.excPtr=excPtr;this.ptr=excPtr-24;this.set_type=function(type){HEAPU32[this.ptr+4>>2]=type;};this.get_type=function(){return HEAPU32[this.ptr+4>>2];};this.set_destructor=function(destructor){HEAPU32[this.ptr+8>>2]=destructor;};this.get_destructor=function(){return HEAPU32[this.ptr+8>>2];};this.set_caught=function(caught){caught=caught?1:0;HEAP8[this.ptr+12>>0]=caught;};this.get_caught=function(){return HEAP8[this.ptr+12>>0]!=0;};this.set_rethrown=function(rethrown){rethrown=rethrown?1:0;HEAP8[this.ptr+13>>0]=rethrown;};this.get_rethrown=function(){return HEAP8[this.ptr+13>>0]!=0;};this.init=function(type,destructor){this.set_adjusted_ptr(0);this.set_type(type);this.set_destructor(destructor);};this.set_adjusted_ptr=function(adjustedPtr){HEAPU32[this.ptr+16>>2]=adjustedPtr;};this.get_adjusted_ptr=function(){return HEAPU32[this.ptr+16>>2];};this.get_exception_ptr=function(){var isPointer=___cxa_is_pointer_type(this.get_type());if(isPointer){return HEAPU32[this.excPtr>>2];}var adjusted=this.get_adjusted_ptr();if(adjusted!==0)return adjusted;return this.excPtr;};}function ___resumeException(ptr){if(!exceptionLast){exceptionLast=new _CppException(ptr);}throw exceptionLast;}var findMatchingCatch=function findMatchingCatch(args){var thrown=exceptionLast&&exceptionLast.excPtr;if(!thrown){setTempRet0(0);return 0;}var info=new ExceptionInfo(thrown);info.set_adjusted_ptr(thrown);var thrownType=info.get_type();if(!thrownType){setTempRet0(0);return thrown;}for(var arg in args){var caughtType=args[arg];if(caughtType===0||caughtType===thrownType){break;}var adjusted_ptr_addr=info.ptr+16;if(___cxa_can_catch(caughtType,thrownType,adjusted_ptr_addr)){setTempRet0(caughtType);return thrown;}}setTempRet0(thrownType);return thrown;};var ___cxa_find_matching_catch_2=function ___cxa_find_matching_catch_2(){return findMatchingCatch([]);};var ___cxa_find_matching_catch_3=function ___cxa_find_matching_catch_3(arg0){return findMatchingCatch([arg0]);};function __embind_register_bigint(primitiveType,name,size,minRange,maxRange){}function getShiftFromSize(size){switch(size){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+size);}}function embind_init_charCodes(){var codes=new Array(256);for(var i=0;i<256;++i){codes[i]=String.fromCharCode(i);}embind_charCodes=codes;}var embind_charCodes=undefined;function readLatin1String(ptr){var ret="";var c=ptr;while(HEAPU8[c]){ret+=embind_charCodes[HEAPU8[c++]];}return ret;}var awaitingDependencies={};var registeredTypes={};var typeDependencies={};var BindingError=undefined;function throwBindingError(message){throw new BindingError(message);}var InternalError=undefined;function throwInternalError(message){throw new InternalError(message);}function sharedRegisterType(rawType,registeredInstance,options){if(options===void 0){options={};}var name=registeredInstance.name;if(!rawType){throwBindingError("type \""+name+"\" must have a positive integer typeid pointer");}if(Object.prototype.hasOwnProperty.call(registeredTypes,rawType)){if(options.ignoreDuplicateRegistrations){return;}else{throwBindingError("Cannot register type '"+name+"' twice");}}registeredTypes[rawType]=registeredInstance;delete typeDependencies[rawType];if(Object.prototype.hasOwnProperty.call(awaitingDependencies,rawType)){var callbacks=awaitingDependencies[rawType];delete awaitingDependencies[rawType];callbacks.forEach(function(cb){return cb();});}}function registerType(rawType,registeredInstance,options){if(options===void 0){options={};}if(!("argPackAdvance"in registeredInstance)){throw new TypeError("registerType registeredInstance requires argPackAdvance");}return sharedRegisterType(rawType,registeredInstance,options);}function __embind_register_bool(rawType,name,size,trueValue,falseValue){var shift=getShiftFromSize(size);name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(wt){return!!wt;},"toWireType":function toWireType(destructors,o){return o?trueValue:falseValue;},"argPackAdvance":8,"readValueFromPointer":function readValueFromPointer(pointer){var heap;if(size===1){heap=HEAP8;}else if(size===2){heap=HEAP16;}else if(size===4){heap=HEAP32;}else{throw new TypeError("Unknown boolean type size: "+name);}return this["fromWireType"](heap[pointer>>shift]);},destructorFunction:null});}function handleAllocatorInit(){Object.assign(HandleAllocator.prototype,{get:function get(id){assert(this.allocated[id]!==undefined,"invalid handle: "+id);return this.allocated[id];},has:function has(id){return this.allocated[id]!==undefined;},allocate:function allocate(handle){var id=this.freelist.pop()||this.allocated.length;this.allocated[id]=handle;return id;},free:function free(id){assert(this.allocated[id]!==undefined);this.allocated[id]=undefined;this.freelist.push(id);}});}function HandleAllocator(){this.allocated=[undefined];this.freelist=[];}var emval_handles=new HandleAllocator();function __emval_decref(handle){if(handle>=emval_handles.reserved&&0===--emval_handles.get(handle).refcount){emval_handles.free(handle);}}function count_emval_handles(){var count=0;for(var i=emval_handles.reserved;i<emval_handles.allocated.length;++i){if(emval_handles.allocated[i]!==undefined){++count;}}return count;}function init_emval(){emval_handles.allocated.push({value:undefined},{value:null},{value:true},{value:false});emval_handles.reserved=emval_handles.allocated.length;Module["count_emval_handles"]=count_emval_handles;}var Emval={toValue:function toValue(handle){if(!handle){throwBindingError("Cannot use deleted val. handle = "+handle);}return emval_handles.get(handle).value;},toHandle:function toHandle(value){switch(value){case undefined:return 1;case null:return 2;case true:return 3;case false:return 4;default:{return emval_handles.allocate({refcount:1,value:value});}}}};function simpleReadValueFromPointer(pointer){return this["fromWireType"](HEAP32[pointer>>2]);}function __embind_register_emval(rawType,name){name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(handle){var rv=Emval.toValue(handle);__emval_decref(handle);return rv;},"toWireType":function toWireType(destructors,value){return Emval.toHandle(value);},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:null});}function embindRepr(v){if(v===null){return"null";}var t=typeof v;if(t==="object"||t==="array"||t==="function"){return v.toString();}else{return""+v;}}function floatReadValueFromPointer(name,shift){switch(shift){case 2:return function(pointer){return this["fromWireType"](HEAPF32[pointer>>2]);};case 3:return function(pointer){return this["fromWireType"](HEAPF64[pointer>>3]);};default:throw new TypeError("Unknown float type: "+name);}}function __embind_register_float(rawType,name,size){var shift=getShiftFromSize(size);name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(value){return value;},"toWireType":function toWireType(destructors,value){if(typeof value!="number"&&typeof value!="boolean"){throw new TypeError("Cannot convert "+embindRepr(value)+" to "+this.name);}return value;},"argPackAdvance":8,"readValueFromPointer":floatReadValueFromPointer(name,shift),destructorFunction:null});}function integerReadValueFromPointer(name,shift,signed){switch(shift){case 0:return signed?function readS8FromPointer(pointer){return HEAP8[pointer];}:function readU8FromPointer(pointer){return HEAPU8[pointer];};case 1:return signed?function readS16FromPointer(pointer){return HEAP16[pointer>>1];}:function readU16FromPointer(pointer){return HEAPU16[pointer>>1];};case 2:return signed?function readS32FromPointer(pointer){return HEAP32[pointer>>2];}:function readU32FromPointer(pointer){return HEAPU32[pointer>>2];};default:throw new TypeError("Unknown integer type: "+name);}}function __embind_register_integer(primitiveType,name,size,minRange,maxRange){name=readLatin1String(name);if(maxRange===-1){maxRange=4294967295;}var shift=getShiftFromSize(size);var fromWireType=function fromWireType(value){return value;};if(minRange===0){var bitshift=32-8*size;fromWireType=function fromWireType(value){return value<<bitshift>>>bitshift;};}var isUnsignedType=name.includes("unsigned");var checkAssertions=function checkAssertions(value,toTypeName){if(typeof value!="number"&&typeof value!="boolean"){throw new TypeError("Cannot convert \""+embindRepr(value)+"\" to "+toTypeName);}if(value<minRange||value>maxRange){throw new TypeError("Passing a number \""+embindRepr(value)+"\" from JS side to C/C++ side to an argument of type \""+name+"\", which is outside the valid range ["+minRange+", "+maxRange+"]!");}};var toWireType;if(isUnsignedType){toWireType=function toWireType(destructors,value){checkAssertions(value,this.name);return value>>>0;};}else{toWireType=function toWireType(destructors,value){checkAssertions(value,this.name);return value;};}registerType(primitiveType,{name:name,"fromWireType":fromWireType,"toWireType":toWireType,"argPackAdvance":8,"readValueFromPointer":integerReadValueFromPointer(name,shift,minRange!==0),destructorFunction:null});}function __embind_register_memory_view(rawType,dataTypeIndex,name){var typeMapping=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];var TA=typeMapping[dataTypeIndex];function decodeMemoryView(handle){handle=handle>>2;var heap=HEAPU32;var size=heap[handle];var data=heap[handle+1];return new TA(heap.buffer,data,size);}name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":decodeMemoryView,"argPackAdvance":8,"readValueFromPointer":decodeMemoryView},{ignoreDuplicateRegistrations:true});}var stringToUTF8Array=function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){assert(typeof str==="string");if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023;}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u;}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63;}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63;}else{if(outIdx+3>=endIdx)break;if(u>1114111)_warnOnce("Invalid Unicode code point "+ptrToString(u)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF).");heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63;}}heap[outIdx]=0;return outIdx-startIdx;};var stringToUTF8=function stringToUTF8(str,outPtr,maxBytesToWrite){assert(typeof maxBytesToWrite=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);};var lengthBytesUTF8=function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++;}else if(c<=2047){len+=2;}else if(c>=55296&&c<=57343){len+=4;++i;}else{len+=3;}}return len;};function __embind_register_std_string(rawType,name){name=readLatin1String(name);var stdStringIsUTF8=name==="std::string";registerType(rawType,{name:name,"fromWireType":function fromWireType(value){var length=HEAPU32[value>>2];var payload=value+4;var str;if(stdStringIsUTF8){var decodeStartPtr=payload;for(var i=0;i<=length;++i){var currentBytePtr=payload+i;if(i==length||HEAPU8[currentBytePtr]==0){var maxRead=currentBytePtr-decodeStartPtr;var stringSegment=UTF8ToString(decodeStartPtr,maxRead);if(str===undefined){str=stringSegment;}else{str+=String.fromCharCode(0);str+=stringSegment;}decodeStartPtr=currentBytePtr+1;}}}else{var a=new Array(length);for(var i=0;i<length;++i){a[i]=String.fromCharCode(HEAPU8[payload+i]);}str=a.join("");}_free(value);return str;},"toWireType":function toWireType(destructors,value){if(value instanceof ArrayBuffer){value=new Uint8Array(value);}var length;var valueIsOfTypeString=typeof value=="string";if(!(valueIsOfTypeString||value instanceof Uint8Array||value instanceof Uint8ClampedArray||value instanceof Int8Array)){throwBindingError("Cannot pass non-string to std::string");}if(stdStringIsUTF8&&valueIsOfTypeString){length=lengthBytesUTF8(value);}else{length=value.length;}var base=_malloc(4+length+1);var ptr=base+4;HEAPU32[base>>2]=length;if(stdStringIsUTF8&&valueIsOfTypeString){stringToUTF8(value,ptr,length+1);}else{if(valueIsOfTypeString){for(var i=0;i<length;++i){var charCode=value.charCodeAt(i);if(charCode>255){_free(ptr);throwBindingError("String has UTF-16 code units that do not fit in 8 bits");}HEAPU8[ptr+i]=charCode;}}else{for(var i=0;i<length;++i){HEAPU8[ptr+i]=value[i];}}}if(destructors!==null){destructors.push(_free,base);}return base;},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:function destructorFunction(ptr){_free(ptr);}});}var UTF16Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf-16le"):undefined;var UTF16ToString=function UTF16ToString(ptr,maxBytesToRead){assert(ptr%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");var endPtr=ptr;var idx=endPtr>>1;var maxIdx=idx+maxBytesToRead/2;while(!(idx>=maxIdx)&&HEAPU16[idx])++idx;endPtr=idx<<1;if(endPtr-ptr>32&&UTF16Decoder)return UTF16Decoder.decode(HEAPU8.subarray(ptr,endPtr));var str="";for(var i=0;!(i>=maxBytesToRead/2);++i){var codeUnit=HEAP16[ptr+i*2>>1];if(codeUnit==0)break;str+=String.fromCharCode(codeUnit);}return str;};var stringToUTF16=function stringToUTF16(str,outPtr,maxBytesToWrite){assert(outPtr%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!");assert(typeof maxBytesToWrite=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647;}if(maxBytesToWrite<2)return 0;maxBytesToWrite-=2;var startPtr=outPtr;var numCharsToWrite=maxBytesToWrite<str.length*2?maxBytesToWrite/2:str.length;for(var i=0;i<numCharsToWrite;++i){var codeUnit=str.charCodeAt(i);HEAP16[outPtr>>1]=codeUnit;outPtr+=2;}HEAP16[outPtr>>1]=0;return outPtr-startPtr;};var lengthBytesUTF16=function lengthBytesUTF16(str){return str.length*2;};var UTF32ToString=function UTF32ToString(ptr,maxBytesToRead){assert(ptr%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");var i=0;var str="";while(!(i>=maxBytesToRead/4)){var utf32=HEAP32[ptr+i*4>>2];if(utf32==0)break;++i;if(utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023);}else{str+=String.fromCharCode(utf32);}}return str;};var stringToUTF32=function stringToUTF32(str,outPtr,maxBytesToWrite){assert(outPtr%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!");assert(typeof maxBytesToWrite=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647;}if(maxBytesToWrite<4)return 0;var startPtr=outPtr;var endPtr=startPtr+maxBytesToWrite-4;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343){var trailSurrogate=str.charCodeAt(++i);codeUnit=65536+((codeUnit&1023)<<10)|trailSurrogate&1023;}HEAP32[outPtr>>2]=codeUnit;outPtr+=4;if(outPtr+4>endPtr)break;}HEAP32[outPtr>>2]=0;return outPtr-startPtr;};var lengthBytesUTF32=function lengthBytesUTF32(str){var len=0;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343)++i;len+=4;}return len;};var __embind_register_std_wstring=function __embind_register_std_wstring(rawType,charSize,name){name=readLatin1String(name);var decodeString,encodeString,getHeap,lengthBytesUTF,shift;if(charSize===2){decodeString=UTF16ToString;encodeString=stringToUTF16;lengthBytesUTF=lengthBytesUTF16;getHeap=function getHeap(){return HEAPU16;};shift=1;}else if(charSize===4){decodeString=UTF32ToString;encodeString=stringToUTF32;lengthBytesUTF=lengthBytesUTF32;getHeap=function getHeap(){return HEAPU32;};shift=2;}registerType(rawType,{name:name,"fromWireType":function fromWireType(value){var length=HEAPU32[value>>2];var HEAP=getHeap();var str;var decodeStartPtr=value+4;for(var i=0;i<=length;++i){var currentBytePtr=value+4+i*charSize;if(i==length||HEAP[currentBytePtr>>shift]==0){var maxReadBytes=currentBytePtr-decodeStartPtr;var stringSegment=decodeString(decodeStartPtr,maxReadBytes);if(str===undefined){str=stringSegment;}else{str+=String.fromCharCode(0);str+=stringSegment;}decodeStartPtr=currentBytePtr+charSize;}}_free(value);return str;},"toWireType":function toWireType(destructors,value){if(!(typeof value=="string")){throwBindingError("Cannot pass non-string to C++ string type "+name);}var length=lengthBytesUTF(value);var ptr=_malloc(4+length+charSize);HEAPU32[ptr>>2]=length>>shift;encodeString(value,ptr+4,length+charSize);if(destructors!==null){destructors.push(_free,ptr);}return ptr;},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:function destructorFunction(ptr){_free(ptr);}});};function __embind_register_void(rawType,name){name=readLatin1String(name);registerType(rawType,{isVoid:true,name:name,"argPackAdvance":0,"fromWireType":function fromWireType(){return undefined;},"toWireType":function toWireType(destructors,o){return undefined;}});}var _abort=function _abort(){abort("native code called abort()");};var readEmAsmArgsArray=[];var readEmAsmArgs=function readEmAsmArgs(sigPtr,buf){assert(Array.isArray(readEmAsmArgsArray));assert(buf%16==0);readEmAsmArgsArray.length=0;var ch;buf>>=2;while(ch=HEAPU8[sigPtr++]){var chr=String.fromCharCode(ch);var validChars=["d","f","i"];assert(validChars.includes(chr),"Invalid character "+ch+"(\""+chr+"\") in readEmAsmArgs! Use only ["+validChars+"], and do not specify \"v\" for void return argument.");buf+=ch!=105&buf;readEmAsmArgsArray.push(ch==105?HEAP32[buf]:HEAPF64[buf++>>1]);++buf;}return readEmAsmArgsArray;};var runEmAsmFunction=function runEmAsmFunction(code,sigPtr,argbuf){var args=readEmAsmArgs(sigPtr,argbuf);if(!Object.prototype.hasOwnProperty.call(ASM_CONSTS,code))abort("No EM_ASM constant found at address "+code);return ASM_CONSTS[code].apply(null,args);};var _emscripten_asm_const_int=function _emscripten_asm_const_int(code,sigPtr,argbuf){return runEmAsmFunction(code,sigPtr,argbuf);};var getHeapMax=function getHeapMax(){return 1048576;};var _emscripten_get_heap_max=function _emscripten_get_heap_max(){return getHeapMax();};var growMemory=function growMemory(size){var b=wasmMemory.buffer;var pages=size-b.byteLength+65535>>>16;try{wasmMemory.grow(pages);updateMemoryViews();return 1;}catch(e){err("growMemory: Attempted to grow heap from "+b.byteLength+" bytes to "+size+" bytes, but got error: "+e);}};var _emscripten_resize_heap=function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;requestedSize>>>=0;assert(requestedSize>oldSize);var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){err("Cannot enlarge memory, asked to go up to "+requestedSize+" bytes, but the limit is "+maxHeapSize+" bytes!");return false;}var alignUp=function alignUp(x,multiple){return x+(multiple-x%multiple)%multiple;};for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true;}}err("Failed to grow the heap from "+oldSize+" bytes to "+newSize+" bytes, not enough memory!");return false;};var SYSCALLS={varargs:undefined,get:function get(){assert(SYSCALLS.varargs!=undefined);SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret;},getStr:function getStr(ptr){var ret=UTF8ToString(ptr);return ret;}};var _fd_close=function _fd_close(fd){abort("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM");};function convertI32PairToI53Checked(lo,hi){assert(lo==lo>>>0||lo==(lo|0));assert(hi===(hi|0));return hi+2097152>>>0<4194305-!!lo?(lo>>>0)+hi*4294967296:NaN;}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){var offset=convertI32PairToI53Checked(offset_low,offset_high);return 70;}var printCharBuffers=[null,[],[]];var printChar=function printChar(stream,curr){var buffer=printCharBuffers[stream];assert(buffer);if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0;}else{buffer.push(curr);}};var flush_NO_FILESYSTEM=function flush_NO_FILESYSTEM(){_fflush(0);if(printCharBuffers[1].length)printChar(1,10);if(printCharBuffers[2].length)printChar(2,10);};var _fd_write=function _fd_write(fd,iov,iovcnt,pnum){var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j]);}num+=len;}HEAPU32[pnum>>2]=num;return 0;};var getWasmTableEntry=function getWasmTableEntry(funcPtr){return wasmTable.get(funcPtr);};var writeArrayToMemory=function writeArrayToMemory(array,buffer){assert(array.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)");HEAP8.set(array,buffer);};embind_init_charCodes();BindingError=Module["BindingError"]=function(_Error2){"use strict";function BindingError(message){var _this2;_this2=_Error2.call(this,message)||this;_this2.name="BindingError";return _this2;}babelHelpers.inheritsLoose(BindingError,_Error2);return BindingError;}(babelHelpers.wrapNativeSuper(Error));InternalError=Module["InternalError"]=function(_Error3){"use strict";function InternalError(message){var _this3;_this3=_Error3.call(this,message)||this;_this3.name="InternalError";return _this3;}babelHelpers.inheritsLoose(InternalError,_Error3);return InternalError;}(babelHelpers.wrapNativeSuper(Error));handleAllocatorInit();init_emval();function checkIncomingModuleAPI(){ignoredModuleProp("fetchSettings");}var wasmImports={__assert_fail:___assert_fail,__cxa_begin_catch:___cxa_begin_catch,__cxa_find_matching_catch_2:___cxa_find_matching_catch_2,__cxa_find_matching_catch_3:___cxa_find_matching_catch_3,__resumeException:___resumeException,_embind_register_bigint:__embind_register_bigint,_embind_register_bool:__embind_register_bool,_embind_register_emval:__embind_register_emval,_embind_register_float:__embind_register_float,_embind_register_integer:__embind_register_integer,_embind_register_memory_view:__embind_register_memory_view,_embind_register_std_string:__embind_register_std_string,_embind_register_std_wstring:__embind_register_std_wstring,_embind_register_void:__embind_register_void,abort:_abort,emscripten_asm_const_int:_emscripten_asm_const_int,emscripten_get_heap_max:_emscripten_get_heap_max,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,invoke_ii:invoke_ii,invoke_iii:invoke_iii,invoke_iiii:invoke_iiii,invoke_v:invoke_v,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_viii:invoke_viii,invoke_viiii:invoke_viiii};var asm=createWasm();var ___wasm_call_ctors=createExportWrapper("__wasm_call_ctors");var _curve_create=Module["_curve_create"]=createExportWrapper("curve_create");var _malloc=Module["_malloc"]=createExportWrapper("malloc");var _curve_free=Module["_curve_free"]=createExportWrapper("curve_free");var _free=Module["_free"]=createExportWrapper("free");var _curve_init_ristretto=Module["_curve_init_ristretto"]=createExportWrapper("curve_init_ristretto");var _get_curve_element_bytes=Module["_get_curve_element_bytes"]=createExportWrapper("get_curve_element_bytes");var _get_curve_scalar_bytes=Module["_get_curve_scalar_bytes"]=createExportWrapper("get_curve_scalar_bytes");var _kdf_create=Module["_kdf_create"]=createExportWrapper("kdf_create");var _kdf_free=Module["_kdf_free"]=createExportWrapper("kdf_free");var _kdf_init_naor_reingold=Module["_kdf_init_naor_reingold"]=createExportWrapper("kdf_init_naor_reingold");var _sodiumInit=Module["_sodiumInit"]=createExportWrapper("sodiumInit");var _voprf_create=Module["_voprf_create"]=createExportWrapper("voprf_create");var _voprf_free=Module["_voprf_free"]=createExportWrapper("voprf_free");var _voprf_init_exp_twohashdh=Module["_voprf_init_exp_twohashdh"]=createExportWrapper("voprf_init_exp_twohashdh");var _blind=Module["_blind"]=createExportWrapper("blind");var _verifiable_unblind=Module["_verifiable_unblind"]=createExportWrapper("verifiable_unblind");var _voprf_client_finalize=Module["_voprf_client_finalize"]=createExportWrapper("voprf_client_finalize");var _voprf_setup=Module["_voprf_setup"]=createExportWrapper("voprf_setup");var _voprf_evaluate=Module["_voprf_evaluate"]=createExportWrapper("voprf_evaluate");var _voprf_server_finalize=Module["_voprf_server_finalize"]=createExportWrapper("voprf_server_finalize");var _get_voprf_final_evaluation_bytes=Module["_get_voprf_final_evaluation_bytes"]=createExportWrapper("get_voprf_final_evaluation_bytes");var ___errno_location=createExportWrapper("__errno_location");var ___getTypeName=createExportWrapper("__getTypeName");var __embind_initialize_bindings=Module["__embind_initialize_bindings"]=createExportWrapper("_embind_initialize_bindings");var _fflush=Module["_fflush"]=createExportWrapper("fflush");var _emscripten_builtin_memalign=createExportWrapper("emscripten_builtin_memalign");var _setThrew=createExportWrapper("setThrew");var setTempRet0=createExportWrapper("setTempRet0");var _emscripten_stack_init2=function _emscripten_stack_init(){return(_emscripten_stack_init2=wasmExports["emscripten_stack_init"])();};var _emscripten_stack_get_free2=function _emscripten_stack_get_free(){return(_emscripten_stack_get_free2=wasmExports["emscripten_stack_get_free"])();};var _emscripten_stack_get_base2=function _emscripten_stack_get_base(){return(_emscripten_stack_get_base2=wasmExports["emscripten_stack_get_base"])();};var _emscripten_stack_get_end2=function _emscripten_stack_get_end(){return(_emscripten_stack_get_end2=wasmExports["emscripten_stack_get_end"])();};var stackSave=createExportWrapper("stackSave");var stackRestore=createExportWrapper("stackRestore");var stackAlloc=createExportWrapper("stackAlloc");var _emscripten_stack_get_current2=function _emscripten_stack_get_current(){return(_emscripten_stack_get_current2=wasmExports["emscripten_stack_get_current"])();};var ___cxa_free_exception=createExportWrapper("__cxa_free_exception");var ___cxa_increment_exception_refcount=createExportWrapper("__cxa_increment_exception_refcount");var ___cxa_decrement_exception_refcount=createExportWrapper("__cxa_decrement_exception_refcount");var ___get_exception_message=Module["___get_exception_message"]=createExportWrapper("__get_exception_message");var ___cxa_can_catch=createExportWrapper("__cxa_can_catch");var ___cxa_is_pointer_type=createExportWrapper("__cxa_is_pointer_type");var dynCall_iiiji=Module["dynCall_iiiji"]=createExportWrapper("dynCall_iiiji");var dynCall_iiij=Module["dynCall_iiij"]=createExportWrapper("dynCall_iiij");var dynCall_iijii=Module["dynCall_iijii"]=createExportWrapper("dynCall_iijii");var dynCall_iiijiji=Module["dynCall_iiijiji"]=createExportWrapper("dynCall_iiijiji");var dynCall_iiijiii=Module["dynCall_iiijiii"]=createExportWrapper("dynCall_iiijiii");var dynCall_jiji=Module["dynCall_jiji"]=createExportWrapper("dynCall_jiji");function invoke_v(index){var sp=stackSave();try{getWasmTableEntry(index)();}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_vii(index,a1,a2){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_viiii(index,a1,a2,a3,a4){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3,a4);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_ii(index,a1){var sp=stackSave();try{return getWasmTableEntry(index)(a1);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_iii(index,a1,a2){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_viii(index,a1,a2,a3){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_vi(index,a1){var sp=stackSave();try{getWasmTableEntry(index)(a1);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_iiii(index,a1,a2,a3){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2,a3);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}Module["wasmMemory"]=wasmMemory;Module["getValue"]=getValue;Module["stringToUTF8"]=stringToUTF8;Module["lengthBytesUTF8"]=lengthBytesUTF8;Module["writeArrayToMemory"]=writeArrayToMemory;var missingLibrarySymbols=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","zeroMemory","exitJS","isLeapYear","ydayFromDate","arraySum","addDays","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","initRandomFill","randomFill","getCallstack","emscriptenLog","convertPCtoSourceLocation","runMainThreadEmAsm","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","setWasmTableEntry","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","stringToNewUTF8","stringToUTF8OnStack","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","getPromise","makePromise","idsToPromises","makePromiseCallback","setMainLoop","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","_setNetworkCallback","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","__glGenObject","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","getTypeName","heap32VectorToArray","requireRegisteredType","init_embind","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","extendError","createNamedFunction","getBasestPointer","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","enumReadValueFromPointer","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_getPointee","RegisteredPointer_destructor","RegisteredPointer_deleteObject","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","ClassHandle_isAliasOf","throwInstanceAlreadyDeleted","ClassHandle_clone","ClassHandle_delete","ClassHandle_isDeleted","ClassHandle_deleteLater","flushPendingDeletes","setDelayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","getStringOrSymbol","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_addMethodCaller"];missingLibrarySymbols.forEach(missingLibrarySymbol);var unexportedSymbols=["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","out","err","callMain","abort","keepRuntimeAlive","wasmTable","wasmExports","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","ptrToString","getHeapMax","growMemory","ENV","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","ERRNO_CODES","ERRNO_MESSAGES","DNS","Protocols","Sockets","timers","warnOnce","UNWIND_CACHE","readEmAsmArgsArray","readEmAsmArgs","runEmAsmFunction","getWasmTableEntry","handleAllocatorInit","HandleAllocator","freeTableIndexes","functionsInTableMap","setValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","currentFullscreenStrategy","restoreOldWindowedStyle","ExitStatus","flush_NO_FILESYSTEM","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","incrementExceptionRefcount","decrementExceptionRefcount","getExceptionMessage","Browser","wget","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","emscripten_webgl_power_preferences","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","GLFW","allocateUTF8","allocateUTF8OnStack","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","UnboundTypeError","PureVirtualError","embindRepr","registeredInstances","registeredPointers","registerType","getShiftFromSize","integerReadValueFromPointer","floatReadValueFromPointer","simpleReadValueFromPointer","finalizationRegistry","detachFinalizer_deps","deletionQueue","delayFunction","emval_handles","emval_symbols","init_emval","count_emval_handles","Emval","emval_newers","emval_methodCallers","emval_registeredMethods"];unexportedSymbols.forEach(unexportedRuntimeSymbol);var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller;};function stackCheckInit(){_emscripten_stack_init2();writeStackCookie();}function run(){if(runDependencies>0){return;}stackCheckInit();preRun();if(runDependencies>0){return;}function doRun(){if(calledRun)return;calledRun=true;Module["calledRun"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();assert(!Module["_main"],'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]');postRun();}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("");},1);doRun();},1);}else{doRun();}checkStackCookie();}if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()();}}run();


return moduleArg.ready;
});


}();
if(typeof exports==='object'&&typeof module==='object')
module.exports=Module;else
if(typeof define==='function'&&define['amd'])
define([],function(){return Module;});}),null);/*FB_PKG_DELIM*/
__d("LSCoreClientFolderType",[],(function(t,n,r,o,a,i){var e=Object.freeze({INBOX:0,PENDING:1,OTHER:2,SPAM:3,ARCHIVED:4,HIDDEN:5,MARKETPLACE:12,RESTRICTED:15,INTEROP:19,INTEROP_PENDING:29});i.default=e}),66);
__d("LSIssueNewError",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.db.table(6).add({errorId:void 0,taskId:e[0],errorCode:e[1],errorTitleText:e[2],errorBodyText:e[3],issuedTimestampMs:n[0],errorExtraData:e[4],presentationStyle:e[5]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreIssueNewErrorStoredProcedure",e.__tables__=["user_visible_errors"],a.exports=e}),null);
__d("LSOptimisticUpdateThreadDisappearingSetting",["LSIssueNewError","LSIssueNewTask","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[0]=!1:(t=o.item,r[0]=t.errorShouldBeShown)})},function(e){return r[0]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[4]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[5]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[4],r[5],void 0,void 0)}]):t.resolve()},function(o){return r[2]=new t.Map,r[2].set("wa_jid",void 0),r[2].set("thread_key",e[0]),r[2].set("disappearing_ttl",e[1]),r[2].set("updated_timestamp",e[2]),r[2].set("updated_by",e[3]),r[2].set("sync_group",t.i64.cast([0,95])),r[2].set("ephemerality_type",void 0),r[3]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),"disappearing_setting",t.i64.cast([0,714]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUpdateThreadDisappearingSettingStoredProcedure",e.__tables__=["user_visible_network_connectivity_error"],a.exports=e}),null);
__d("LSOptimisticUpdateThreadDisappearingSettingStoredProcedure",["LSOptimisticUpdateThreadDisappearingSetting","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){a===void 0&&(a={});var i=t.storedProcedure(r("LSOptimisticUpdateThreadDisappearingSetting"),a.threadKey,a.disappearingTtl,a.updatedTimestamp,a.updatedBy);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSRtcCallState",[],(function(t,n,r,o,a,i){var e=Object.freeze({NO_ONGOING_CALL:0,AUDIO_GROUP_CALL:1,VIDEO_GROUP_CALL:2,VIDEO_1TO1_CALL:3,AUDIO_1TO1_CALL:4});i.default=e}),66);
__d("LSThreadPointQueryAndRestoreMessagesWithJID",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSQplAnnotateInt.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][ThreadPointQueryAndRestoreMessagesWithJID] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[19]=new t.Map,r[19].set("error_msg","Expected a nonempty query result"),r[19].set("code",t.i64.cast([0,3])),r[19].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[20]=t.createArray(),r[21]=(r[20].push(r[19]),r[20]),o=[void 0,r[20]],r[2]=o[0],r[3]=o[1]):(n=l.item,r[19]=new t.Map,r[19].set("backup_id",n.backupId),r[19].set("device_public_key_blob",n.devicePublicKeyBlob),r[19].set("device_private_key_blob",n.devicePrivateKeyBlob),r[19].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[19].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[19].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[19].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[19].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[19].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[19].set("orf_client_state_v2_blob",void 0),r[19].set("orf_v2_authority_level",void 0),r[19].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[19].set("device_id",n.deviceId),r[19].set("backup_tenancy",n.backupTenancy),r[19].set("encryption_version",n.encryptionVersion),r[19].set("revision_version",n.revisionVersion),r[19].set("initialize_restore_result",void 0),r[19].set("device_creation_timestamp_sec",void 0),r[19].set("authority_level",n.authorityLevel),a=[r[19],void 0],r[2]=a[0],r[3]=a[1])})},function(e){return r[5]=new t.Map,r[5].set("value",r[2]),r[5].set("errors",r[3]),r[6]=r[5].get("value"),r[6]!==void 0?t.sequence([function(e){return r[19]=r[6].get("backup_id"),r[20]=r[6].get("device_public_key_blob"),r[21]=r[6].get("device_private_key_blob"),r[22]=r[6].get("epoch_storage_public_key_blob"),r[23]=r[6].get("epoch_storage_private_key_blob"),r[24]=r[6].get("epoch_auth_public_key_blob"),r[25]=r[6].get("epoch_auth_private_key_blob"),r[26]=r[6].get("mailbox_root_key_blob"),r[27]=r[6].get("ocmf_client_state_blob"),r[28]=r[6].get("orf_client_state_v2_blob"),r[29]=r[6].get("orf_v2_authority_level"),r[30]=r[6].get("oblivious_validation_token_blob"),r[31]=r[6].get("device_id"),r[32]=r[6].get("backup_tenancy"),r[33]=r[6].get("encryption_version"),r[34]=r[6].get("revision_version"),r[35]=r[6].get("initialize_restore_result"),r[36]=r[6].get("device_creation_timestamp_sec"),r[37]=r[6].get("authority_level"),t.i64.neq(r[31],void 0)?t.sequence([function(e){return r[39]=void 0,t.i64.neq(r[39],void 0)?t.resolve(r[40]=r[39]):t.sequence([function(e){return r[52]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[53]=t[0],t})},function(e){return r[53]&&(r[62]=(r[52].push(t.i64.cast([0,0])),r[52])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[54]=t[0],t})},function(e){return r[54]&&(r[62]=(r[52].push(t.i64.cast([0,2])),r[52])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[55]=t[0],t})},function(e){return r[55]&&(r[62]=(r[52].push(t.i64.cast([0,3])),r[52])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[56]=t[0],t})},function(e){return r[56]&&(r[62]=(r[52].push(t.i64.cast([0,4])),r[52])),r[57]=t.createArray(),r[58]=t.i64.of_int32(r[52].length),t.i64.gt(r[58],t.i64.cast([0,0]))?t.loopAsync(r[58],function(e){return r[62]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[52],r[62]).then(function(e){var t;return t=e,r[63]=t[0],r[64]=t[1],t})},function(e){return r[65]=(r[57].push(r[63]),r[57])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[62]=t.createArray(),r[63]=t.i64.of_int32(r[57].length),t.i64.gt(r[63],t.i64.cast([0,0]))?t.loopAsync(r[63],function(e){return r[65]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[57],r[65]).then(function(e){var t;return t=e,r[66]=t[0],r[67]=t[1],t})},function(e){return r[68]=(r[62].push(t.i64.to_string(r[66])),r[62])}])}):t.resolve()},function(e){return r[64]=r[62].join(","),r[59]=r[64]}])},function(e){return r[57].some(function(e){return t.i64.eq(r[33],e)})?r[60]=r[33]:r[60]=void 0,t.i64.neq(r[60],void 0)?r[61]=r[60]:r[61]=void 0,r[40]=r[61]}])},function(e){return t.i64.neq(r[40],void 0)?r[41]=r[40]:r[41]=t.i64.cast([0,0]),t.i64.neq(r[32],void 0)?r[42]=r[32]:r[42]=t.i64.cast([0,1]),t.nativeOperation(n("LSBase64Encode.nop"),r[27]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[26]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return r[45]=new t.Map,r[45].set("ocmf_client_state_blob",r[43]==null?"":r[43]),r[45].set("mailbox_root_key",r[44]==null?"":r[44]),r[46]=t.createArray(),t.forEach(t.filter(t.db.table(169).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),function(e){var t=e.item;return r[52]=(r[46].push(t.epochId),r[46])})},function(e){return r[50]="Queried locally available epochs. Count: ",r[47]=t.i64.of_int32(r[46].length),r[51]=t.i64.to_string(r[47]),r[48]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][MEBEpochClientUtils] ",r[48],r[50],r[48],r[51]].join("")),t.resolve()},function(e){return r[49]=new t.Map,r[49].set("device_id",r[31]),r[49].set("raw_tokens",r[45]),r[49].set("locally_available_epochs",r[46]),r[38]=r[49]}]):t.resolve(r[38]=void 0)},function(e){return r[7]=r[38]}]):t.resolve((r[19]=r[5].get("errors"),r[20]=r[5].get("errors"),r[7]=void 0))},function(e){return r[8]=t.i64.random(),r[9]=t.i64.to_string(r[8]),r[9]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,679677570]),r[9],!0,void 0):t.resolve()},function(e){return r[9]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,679677570]),r[9],"issue_task"):t.resolve()},function(e){return r[9]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,679677570]),r[9],"request_type","THREAD_POINT_QUERY"):t.resolve()},function(e){return r[9]!==void 0?t.nativeOperation(n("LSQplAnnotateInt.nop"),t.i64.cast([0,679677570]),r[9],"task_creation_source",t.i64.cast([0,76])==null?t.i64.cast([-1,4294967295]):t.i64.cast([0,76])):t.resolve()},function(o){return r[10]=new t.Map,r[10].set("wa_jid",e[0]),r[10].set("tam_thread_subtype",t.i64.cast([0,0])),r[10].set("enable_logging_for_tpq",!1),r[10].set("device_context",r[7]),r[10].set("qpl_instance_key",r[9]),r[11]=r[10].get("wa_jid"),r[12]=t.toJSON(r[10]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[11]),t.i64.cast([0,556]),r[12],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return r[13]=t.i64.of_float(Date.now()),r[14]=t.i64.random(),r[16]="Finishing execution. Execution time: ",r[17]=t.i64.to_string(t.i64.sub(r[13],r[0])),r[18]=" ms",r[15]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][ThreadPointQueryAndRestoreMessagesWithJID] ",r[15],r[16],r[15],r[17],r[15],r[18]].join("")),t.i64.eq(t.i64.mod_(r[14],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[19]=",",r[20]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"ThreadPointQueryAndRestoreMessagesWithJID",[r[16],r[19],r[17],r[19],r[18]].join(""),r[20],t.i64.cast([0,4]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"],a.exports=e}),null);
__d("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure",["LSSynchronousPromise","LSThreadPointQueryAndRestoreMessagesWithJID","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSThreadPointQueryAndRestoreMessagesWithJID"),a.waJid);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWBridgeGroupInviteLoadedHandler",["fbt","I64","LSMessagingThreadTypeUtil","MAWMiActMappingTableAPI","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(e,t,n){return m(e,n,t.actorId)}function d(e,t,r){return o("MAWMiActMappingTableAPI").getThreadKeyForChatJid(e,t).then(function(t){return t==null?(u||(u=n("Promise"))).resolve():m(e,t,r)})}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a=t.threads,i=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(a).getKeyRange(n));if(i!=null){var l=o("LSMessagingThreadTypeUtil").isGroup(i.threadType);if(l){var u=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.group_invites).getKeyRange(n));if(u==null){yield a.put(babelHelpers.extends({},i,{additionalThreadContext:void 0}));return}var c=(e||(e=o("I64"))).equal((e||(e=o("I64"))).of_string(r),u.inviterId)?null:yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.contacts,["name"]).getKeyRange(u.inviterId));if(c!=null){var d=s._(/*BTDS*/"{Inviter Name} convidou voc\u00ea para participar",[s._param("Inviter Name",c.name)]).toString(),m=i.folderName==="inbox"?s._(/*BTDS*/"Solicita\u00e7\u00e3o de contato").toString():i.additionalThreadContext;yield a.put(babelHelpers.extends({},i,{additionalThreadContext:m,snippet:d}))}}}}),p.apply(this,arguments)}function _(e,t){return d(e,t.threadJid,t.actorId)}function f(e,t,n){return d(e,t,n)}l.callForOneDb=c,l.call=_,l.callFromMainThread=f}),226);
__d("MAWContactRelationshipType",["I64","LSContactBitOffset","WADbContact"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("LSContactBitOffset").hasWithDefault(64,t,!0),r=(e||(e=o("I64"))).ge(t.contactViewerRelationship,e.of_string("2"));return r&&n?o("WADbContact").ONE_WAY_CONTACT:!r&&!n?o("WADbContact").REVERSED_ONE_WAY_CONTACT:r&&!n?o("WADbContact").TWO_WAY_CONTACT:o("WADbContact").NON_CONTACT}l.getContactRelationshipType=s}),98);
__d("MAWBridgeOneToOneMessageRequestLoadedHandler",["fbt","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWContactRelationshipType","MAWJids","MAWMessageRequestUtil","MAWMiActMappingTableAPI","MAWUserJidWrapper","ODS","Promise","ReQL","WADbContact","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d;function m(e,t){var n=t.threadJid;return _(e,n)}function p(e,t){return _(e,t)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(o("MAWUserJidWrapper").getMyUserJid()!==t){var r=o("MAWJids").convertChatJidToIntJid(t),a=yield o("MAWMiActMappingTableAPI").getThreadKeyForChatJid(e,t);if(a!=null){var i=yield(d||(d=n("Promise"))).all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(a)),o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.contacts).getKeyRange(r))]),l=i[0],u=i[1];if(!(l==null||u==null||!o("LSMessagingThreadTypeUtil").isOneToOne(l.threadType))){var c=g(l,u),m=l.folderName==="pending"||l.folderName==="other"||l.folderName==="spam"||c;if(m){var p=l.folderName==="inbox"?s._(/*BTDS*/"Solicita\u00e7\u00e3o de contato").toString():void 0,_=babelHelpers.extends({},l,{additionalThreadContext:p},h(l));yield e.threads.put(_)}}}}}),f.apply(this,arguments)}function g(t,n){var a=o("MAWContactRelationshipType").getContactRelationshipType(n),i=t.folderName==="inbox"&&a===o("WADbContact").REVERSED_ONE_WAY_CONTACT&&!(e||(e=o("I64"))).equal(t.lastActivityTimestampMs,(e||(e=o("I64"))).zero),l=(e||(e=o("I64"))).equal(n.authorityLevel,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE));return i&&!l&&(c||(c=o("ODS"))).bumpEntityKey(3185,"e2ee.message_request_loaded_failure","contacts_not_yet_loaded",1),i&&l}function h(e){var t=o("LSThreadBitOffset").clear(o("MAWMessageRequestUtil").disabledThreadCapabilitiesForIncomingRequest,e.capabilities,e.capabilities2,e.capabilities3,e.capabilities4,e.capabilities5),n=o("LSThreadBitOffset").set(o("MAWMessageRequestUtil").enabledThreadCapabilitiesForIncomingRequest,t[0],t[1],t[2],t[3],t[4]);return{capabilities:n[0],capabilities2:n[1],capabilities3:n[2],capabilities4:n[3],capabilities5:n[4]}}l.call=m,l.callFromMainThread=p}),226);
__d("MessagingFolderTag",[],(function(t,n,r,o,a,i){var e=Object.freeze({INBOX:"inbox",OTHER:"other",SPAM:"spam",PENDING:"pending",MONTAGE:"montage",HIDDEN:"hidden",LEGACY:"legacy",DISABLED:"disabled",PAGE_BACKGROUND:"page_background",PAGE_DONE:"page_done",BLOCKED:"blocked",COMMUNITY:"community",RESTRICTED:"restricted",BC_PARTNERSHIP:"bc_partnership",E2EE_CUTOVER:"e2ee_cutover",E2EE_CUTOVER_ARCHIVED:"e2ee_cutover_archived",E2EE_CUTOVER_PENDING:"e2ee_cutover_pending",E2EE_CUTOVER_OTHER:"e2ee_cutover_other",E2EE_CUTOVER_RESTRICTED:"e2ee_cutover_restricted",INTEROP:"interop",INTEROP_PENDING:"interop_pending",ARCHIVED:"archived",AI_ACTIVE:"ai_active",SALSA_RESTRICTED:"salsa_restricted",MESSENGER_MARKETING_MESSAGE:"messenger_marketing_message",SECRET_CONVERSATIONS:"secret_conversations",WEBCHAT_PLUGIN:"webchat_plugin",NFB_OVERFLOW:"nfb_overflow",META_AI_THREAD:"meta_ai_thread",META_AI_GROUP_SIDE_CHAT:"meta_ai_group_side_chat",UNKNOWN:""});i.default=e}),66);
__d("MAWFolderUtils",["FBLogger","I64","LSCoreClientFolderType","LSIntEnum","MAWFolderTypes","MessagingFolderTag"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch(e){case o("MAWFolderTypes").PENDING:return r("MessagingFolderTag").PENDING;case o("MAWFolderTypes").OTHER:return r("MessagingFolderTag").OTHER;case o("MAWFolderTypes").SPAM:return r("MessagingFolderTag").SPAM;case o("MAWFolderTypes").ARCHIVED:return r("MessagingFolderTag").UNKNOWN;default:return r("MessagingFolderTag").INBOX}}function c(t){switch(t){case o("MAWFolderTypes").PENDING:return(e||(e=o("LSIntEnum"))).ofNumber(-101);case o("MAWFolderTypes").OTHER:return(e||(e=o("LSIntEnum"))).ofNumber(-102);case o("MAWFolderTypes").SPAM:return(e||(e=o("LSIntEnum"))).ofNumber(-103);case o("MAWFolderTypes").ARCHIVED:return(e||(e=o("LSIntEnum"))).ofNumber(-110);default:return(e||(e=o("LSIntEnum"))).ofNumber(-100)}}function d(t){switch(t){case o("MAWFolderTypes").ARCHIVED:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSCoreClientFolderType").ARCHIVED);case o("MAWFolderTypes").INBOX:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSCoreClientFolderType").INBOX);case o("MAWFolderTypes").OTHER:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSCoreClientFolderType").SPAM);case o("MAWFolderTypes").PENDING:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSCoreClientFolderType").OTHER);case o("MAWFolderTypes").RESTRICTED:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSCoreClientFolderType").RESTRICTED);case o("MAWFolderTypes").SPAM:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSCoreClientFolderType").PENDING);default:throw r("FBLogger")("messenger_web").mustfixThrow("Unhandled folder ID: "+t)}}function m(t){switch(t){case(e||(e=o("LSIntEnum"))).ofNumber(-1):return(e||(e=o("LSIntEnum"))).ofNumber(-101);case(e||(e=o("LSIntEnum"))).ofNumber(-2):return(e||(e=o("LSIntEnum"))).ofNumber(-102);case(e||(e=o("LSIntEnum"))).ofNumber(-3):return(e||(e=o("LSIntEnum"))).ofNumber(-103);case(e||(e=o("LSIntEnum"))).ofNumber(-10):return(e||(e=o("LSIntEnum"))).ofNumber(-110);default:return(e||(e=o("LSIntEnum"))).ofNumber(-100)}}function p(e){switch(e){case"inbox":return o("MAWFolderTypes").FOLDER_ID.INBOX;case"pending":return o("MAWFolderTypes").FOLDER_ID.PENDING;case"spam":return o("MAWFolderTypes").FOLDER_ID.SPAM;case"archived":return o("MAWFolderTypes").FOLDER_ID.ARCHIVED;case"other":return o("MAWFolderTypes").FOLDER_ID.OTHER;case"restricted":return o("MAWFolderTypes").FOLDER_ID.RESTRICTED;default:return null}}function _(e){switch((s||(s=o("I64"))).to_int32(e)){case o("MAWFolderTypes").FOLDER_ID.INBOX:return 0;case o("MAWFolderTypes").FOLDER_ID.PENDING:return-1;case o("MAWFolderTypes").FOLDER_ID.SPAM:return-3;case o("MAWFolderTypes").FOLDER_ID.ARCHIVED:return-10;case o("MAWFolderTypes").FOLDER_ID.OTHER:return-2;default:return null}}l.getMessagingFolderTag=u,l.getClientSystemFolder=c,l.systemFolderToLSCoreClientFolder=d,l.systemFolderToClientSystemFolder=m,l.folderTagToFolderId=p,l.parentThreadKeyToLsSystemFolder=_}),98);
__d("MAWRemoveCorruptedParticipantsFromOneToOneChat",["I64","Promise","ReQL","WAJids","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n,r){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i){var l=o("WAJids").extractUserId(a),u=[l];i!==l&&u.push(i);var c=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.participants).getKeyRange(r)),d=c.filter(function(e){return!u.includes((s||(s=o("I64"))).to_string(e.contactId))}).map(function(e){return e.contactId});yield(e||(e=n("Promise"))).all(d.map(function(e){return t.participants.delete(r,e)}))}),c.apply(this,arguments)}l.default=u}),98);
__d("MAWActThreadMapping",["I64","JSResourceForInteraction","MAWBridgeGroupInviteLoadedHandler","MAWBridgeOneToOneMessageRequestLoadedHandler","MAWBridgeParticipantsUpdatedHandler","MAWBridgeSendAndReceive","MAWFolderTypes","MAWFolderUtils","MAWHandleActThread","MAWJids","MAWMiActMappingTableAPI","MAWMiActOnActThreadReadyQueue","MAWRemoveCorruptedParticipantsFromOneToOneChat","MAWThreadMappingQPL","MAWUserJidWrapper","MWFBLogger","Promise","ReQL","WAArrayZip","WAJids","asyncToGeneratorRuntime","emptyFunction","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("JSResourceForInteraction")("MAWSyncThreadDescriptionAdminMsg").__setRef("MAWActThreadMapping"),c=new Map,d=null;function m(e,t,n,a){var l=a.then(function(a){r("promiseDone")(e.runInTransaction(function(e){return h(e,_(a),n)},"readwrite",void 0,void 0,i.id+":80").catch(function(e){t.forEach(function(e){return c.delete(e)}),o("MWFBLogger").MWLogger().warn("MAWActThreadMapping","Post processing transaction not committed due to error "+e.message)}));for(var l of a)l.status==="rejected"&&c.delete(l.jid);return a},function(e){return t.forEach(function(e){return c.delete(e)}),t.map(function(t){return{jid:t,reason:r("getErrorSafe")(e).message,status:"rejected"}})});t.forEach(function(e){return c.set(e,l.then(function(t){var n=t.find(function(t){var n;return((n=t.value)==null?void 0:n.chatJid)===e||t.jid===e});if(n==null)throw o("MWFBLogger").MWLogger().tags(["MiActMapping","Occam"]).mustfixThrow("Should have thread creation result for every thread");return n}))})}function p(e){var t=new Map,n=[];return e.threads.forEach(function(e){var r=c.get(e.chatJid),a=e.instanceKey;r!=null?(a!=null&&(o("MAWThreadMappingQPL").addPoint("reuse_existing_promise_for_act_mapping",a),o("MAWThreadMappingQPL").endCancel("act_mapping_is_already_in_progress",a)),n.push(r)):t.set(e.chatJid,e)}),{cachedPromises:n,threadsToVerifyByJid:t}}function _(e){var t=new Map;return e.forEach(function(e){if(e.status==="fulfilled"){var n;t.set(e.value.chatJid,babelHelpers.extends({},e.value,{adminMsgParams:(n=e.value.adminMsgParams)!=null?n:null}))}}),t}function f(e,t){d==null&&(d=C(e));var r=p(t),a=r.cachedPromises,i=r.threadsToVerifyByJid;if(i.size===0)return(s||(s=n("Promise"))).all(a);var l=o("MAWBridgeSendAndReceive").sendAndReceive("backend","bulkMaybeCreateOrUpdateThread",babelHelpers.extends({},t,{threads:Array.from(i.values())}));return m(e,Array.from(i.keys()),t,l),(s||(s=n("Promise"))).all([l].concat(a)).then(function(e){return e.flat(1)})}function g(t){var n=t.authoritativeThreadKey,a=t.description,i=t.instanceKey,l=t.jid,s=t.optimisticThreadKey;i!=null&&o("MAWMiActOnActThreadReadyQueue").logOnFlushQueue(s,n,i,a),s!=null&&r("promiseDone")(o("MAWMiActOnActThreadReadyQueue").processQueueOnActThreadReady((e||(e=o("I64"))).of_string(s),l,a,"clientThreadKey")),n!=null&&r("promiseDone")(o("MAWMiActOnActThreadReadyQueue").processQueueOnActThreadReady((e||(e=o("I64"))).of_string(n),l,a,"authoritativeThreadKey"))}function h(e,t,n){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i){if(i.threads.length!==0){var l=[],c=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid());yield(s||(s=n("Promise"))).all(i.threads.map(function(d){var m=d.authoritativeThreadKey,p=d.chatJid,_=d.instanceKey,f=a.get(p);if(f==null)return(s||(s=n("Promise"))).resolve();var g=[],h=f.adminMsgParams,y=f.clientThreadKey,C=f.folder,b=f.isCreated,S=f.participants;S.forEach(function(e){l.push(babelHelpers.extends({},e,{chatJid:p}))});var R=o("WAJids").switchOnMsgrChatJidType(p,{group:function(t){return!0},user:function(t){return!1}});g.push(R?o("MAWBridgeGroupInviteLoadedHandler").callFromMainThread(t,p,c):o("MAWBridgeOneToOneMessageRequestLoadedHandler").callFromMainThread(t,p));var L=o("WAJids").interpretAsUserJid(p);return L!=null&&g.push(r("MAWRemoveCorruptedParticipantsFromOneToOneChat")(t,(e||(e=o("I64"))).of_string(m),L,c)),b||g.push(v(t,m,C!=null?C:o("MAWFolderTypes").FOLDER_ID.INBOX)),h!=null&&g.push(u.load().then(function(e){return e(t,p,m,h)})),(s||(s=n("Promise"))).all(g).then(function(){var e;return o("MAWHandleActThread").handleActThreadWhenAuthoritativeInMI(t,{authoritativeThreadKey:m,description:(e=i.reason)!=null?e:"bulkCreateThreadWithoutAfterTxn",instanceKey:_,jid:p,optimisticThreadKey:y})})})),yield o("MAWBridgeParticipantsUpdatedHandler").callFromMainThread(t,l)}}),y.apply(this,arguments)}function C(e){return o("MAWMiActMappingTableAPI").subscribeToMappingDeletion(e,function(e,t){var n=o("MAWJids").convertIntJidToOneToOneChatJid(e);c.has(n)&&c.delete(n);var r=o("MAWJids").convertIntJidToGroupJid(e);c.has(r)&&c.delete(r)})}function b(e,t){c.clear(),o("WAArrayZip").zip(e,t).forEach(function(e){var t=e[0],r=e[1];return c.set(t,new(s||(s=n("Promise")))(function(e,t){return e(r)}))})}function v(t,n,a){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange((e||(e=o("I64"))).of_string(n))).then(function(e){if(e!=null){var n=o("MAWFolderUtils").getMessagingFolderTag(a),r=n==="inbox"?void 0:e.cannotReplyReason;return t.threads.put(babelHelpers.extends({},e,{cannotReplyReason:r}))}}).then(r("emptyFunction"))}l.bulkVerifyThreadExistsInWorker=f,l.executePromisesBlockedOnActThreadMapping=g,l.setCache_TEST_ONLY=b}),98);
__d("MAWLoadThreadFromMI",["LSAuthorityLevel","LSFactory","LSIntEnum","MAWThreadMappingQPL","MAWVerifyThreadExistsUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i,l){var s=r("LSAuthorityLevel").AUTHORITATIVE;return i!=null&&o("MAWThreadMappingQPL").addAnnotations({int:{sprocAuthLevel:s,sprocThreadType:a}},i),o("MAWThreadMappingQPL").measurePerformanceForNullableInstanceKey("verify_thread_exists",i,function(){return o("MAWVerifyThreadExistsUtils").runVerifyThreadExistsSproc(r("LSFactory")(t),{authorityLevel:(e||(e=o("LSIntEnum"))).ofNumber(s),threadKey:n,threadType:e.ofNumber(a)},l).then(function(e){var t=e[0];return t})})}l.default=s}),98);
__d("MAWHandleActThread",["FBLogger","I64","LSFactory","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWActThreadMapping","MAWBridgeOccamadilloVerifyThreadExistsHandler","MAWJids","MAWLoadThreadFromMI","MAWThreadLoadingState","MAWThreadMappingQPL","Promise","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){return o("MAWThreadMappingQPL").measurePerformanceForNullableInstanceKey("thread_point_query_sproc",n,function(){return r("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(r("LSFactory")(e),{waJid:o("MAWJids").convertChatJidToIntJid(t)})})}function c(e,t){var n=t.description,o=t.instanceKey,a=t.isGroup,i=t.threadKey,l=a?16:15;return r("MAWLoadThreadFromMI")(e,i,l,o,n).then(function(e){e!==i&&r("FBLogger")("messenger_web").warn("[MAWLoadThreadFromMI] Unexpected thread key change when loading from MI")})}function d(t,r){var a=r.description,i=r.instanceKey,l=r.jid,c=r.optimisticThreadKey;i!=null&&o("MAWThreadMappingQPL").addPoint("handle_act_thread_optimistic_start",i),o("MAWActThreadMapping").executePromisesBlockedOnActThreadMapping({authoritativeThreadKey:null,description:a,instanceKey:i,jid:l,optimisticThreadKey:c});var d=(s||(s=o("I64"))).of_string(c);return(e||(e=n("Promise"))).all([u(t,l,i),o("MAWThreadLoadingState").markActThreadLoadingAsCompletedForJid(t,{jid:l,threadKey:d},i),o("MAWBridgeOccamadilloVerifyThreadExistsHandler").insertEphemeralCache(t,d,l,i)]).then(function(){if(i!=null)return o("MAWThreadMappingQPL").addPoint("handle_act_thread_optimistic_end",i),o("MAWThreadMappingQPL").end({instanceKey:i,intJid:o("MAWJids").convertChatJidToIntJid(l),tables:t,threadKey:d})})}function m(t,r){var a=r.authoritativeThreadKey,i=r.description,l=r.instanceKey,u=r.jid,d=r.optimisticThreadKey;l!=null&&o("MAWThreadMappingQPL").addPoint("handle_act_thread_authoritative_start",l);var m=o("WAJids").switchOnMsgrChatJidType(u,{group:function(t){return!0},user:function(t){return!1}});o("MAWActThreadMapping").executePromisesBlockedOnActThreadMapping({authoritativeThreadKey:a,description:i,instanceKey:l,jid:u,optimisticThreadKey:d});var p=(s||(s=o("I64"))).of_string(a);return o("MAWThreadLoadingState").genLoadingStateFromJid(t,u).then(function(r){return(e||(e=n("Promise"))).all([!o("MAWThreadLoadingState").isMiReady(r)&&c(t,{description:i,instanceKey:l,isGroup:m,threadKey:p}),o("MAWBridgeOccamadilloVerifyThreadExistsHandler").attachLocalMetadata(t,p,{clientThreadKey:d,isGroup:m}),d!=null&&o("MAWBridgeOccamadilloVerifyThreadExistsHandler").ensureOptimisticThreadIsHidden(t,p,(s||(s=o("I64"))).of_string(d)),o("MAWBridgeOccamadilloVerifyThreadExistsHandler").insertEphemeralCache(t,p,u,l),o("MAWThreadLoadingState").markActThreadLoadingAsCompletedForJid(t,{jid:u,threadKey:p},l)])}).then(function(){if(l!=null)return o("MAWThreadMappingQPL").addPoint("handle_act_thread_authoritative_end",l),o("MAWThreadMappingQPL").end({instanceKey:l,intJid:o("MAWJids").convertChatJidToIntJid(u),tables:t,threadKey:p})})}l.handleActThreadWhenOptimisticInMI=d,l.handleActThreadWhenAuthoritativeInMI=m}),98);
__d("MAWThreadDefaults",["fbt","I64","LSBitOffset","LSIntEnum","qex"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(){return r("qex")._("327")===!0?!0:r("qex")._("121")===!0}function m(e){return d()?o("LSBitOffset").set((c||(c=o("LSIntEnum"))).ofNumber(42),e):e}function p(e){return o("LSBitOffset").set((c||(c=o("LSIntEnum"))).ofNumber(4),e)}var _=(e=o("LSBitOffset")).set((c||(c=o("LSIntEnum"))).ofNumber(18),o("LSBitOffset").set(c.ofNumber(56),o("LSBitOffset").set(c.ofNumber(14),o("LSBitOffset").set(c.ofNumber(23),o("LSBitOffset").set(c.ofNumber(8),o("LSBitOffset").set(c.ofNumber(15),o("LSBitOffset").set(c.ofNumber(2),o("LSBitOffset").empty))))))),f=m(p(o("LSBitOffset").set(c.ofNumber(7),o("LSBitOffset").set(c.ofNumber(6),o("LSBitOffset").set(c.ofNumber(9),o("LSBitOffset").set(c.ofNumber(10),o("LSBitOffset").set(c.ofNumber(19),o("LSBitOffset").set(c.ofNumber(35),o("LSBitOffset").set(c.ofNumber(3),o("LSBitOffset").set(c.ofNumber(43),_)))))))))),g=o("LSBitOffset").set(c.ofNumber(17),o("LSBitOffset").set(c.ofNumber(60),o("LSBitOffset").set(c.ofNumber(16),o("LSBitOffset").set(c.ofNumber(26),o("LSBitOffset").set(c.ofNumber(28),o("LSBitOffset").clear(c.ofNumber(27),f)))))),h=o("LSBitOffset").set((u||(u=o("I64"))).sub(c.ofNumber(103),u.of_string("64")),o("LSBitOffset").set(u.sub(c.ofNumber(85),u.of_string("64")),o("LSBitOffset").set(u.sub(c.ofNumber(109),u.of_string("64")),o("LSBitOffset").set(u.sub(c.ofNumber(74),u.of_string("64")),o("LSBitOffset").set(u.sub(c.ofNumber(65),u.of_string("64")),o("LSBitOffset").set(u.sub(c.ofNumber(64),u.of_string("64")),o("LSBitOffset").set(u.sub(c.ofNumber(106),u.of_string("64")),o("LSBitOffset").empty))))))),y=s._(/*BTDS*/"As mensagens s\u00e3o protegidas com criptografia de ponta a ponta.").toString(),C=o("LSBitOffset").set(u.sub(c.ofNumber(172),u.of_string("64")),o("LSBitOffset").set(u.sub(c.ofNumber(170),u.of_string("64")),o("LSBitOffset").empty));l.defaultThreadCapabilities=f,l.defaultGroupThreadCapabilities=g,l.defaultThreadCapabilities_2=h,l.nullstateDescriptionText1=y,l.defaultThreadCapabilities_3=C,l.defaultThreadCapabilities_4=o("LSBitOffset").empty,l.defaultThreadCapabilities_5=o("LSBitOffset").empty}),226);
__d("MAWBridgeOccamadilloVerifyThreadExistsHandler",["I64","LSAuthorityLevel","LSFactory","LSThreadBitOffset","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWActThreadMapping","MAWBridgeFireAndForget","MAWJids","MAWMiActGetThreadLifecycleState__DO_NOT_USE","MAWMiActThreadLifecycleState__DO_NOT_USE","MAWThreadDefaults","MAWThreadLoadingState","MAWThreadMappingQPL","MWFBLogger","Promise","WATimeUtils","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=["cannotReplyReason","folder","lastReadTs"],s,u,c,d=o("MWFBLogger").MWLogger().tags(["Occam","VerifyThreadExists"]),m=r("gkx")("16094")?[105,17,25,24,61,267,27]:[105,17,25,24,61,267];function p(e,t){var n=m.filter(function(t){return o("LSThreadBitOffset").has(t,e)});return o("LSThreadBitOffset").set(n,t?o("MAWThreadDefaults").defaultGroupThreadCapabilities:o("MAWThreadDefaults").defaultThreadCapabilities,o("MAWThreadDefaults").defaultThreadCapabilities_2,o("MAWThreadDefaults").defaultThreadCapabilities_3,o("MAWThreadDefaults").defaultThreadCapabilities_4,o("MAWThreadDefaults").defaultThreadCapabilities_5)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){var a=yield e.threads.get(t);if(a==null)return d.mustfix("Thread missing in verify thread exists"),(c||(c=n("Promise"))).resolve();var i=r.clientThreadKey!=null?(u||(u=o("I64"))).of_string(r.clientThreadKey):a.clientThreadKey,l=p(a,r.isGroup);return e.threads.upsert([t],babelHelpers.extends({},a,{capabilities:l[0],capabilities2:l[1],capabilities3:l[2],capabilities4:l[3],capabilities5:l[4],clientThreadKey:i}))}),f.apply(this,arguments)}function g(e,t,n,r){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,a){yield(c||(c=n("Promise"))).all([o("MAWThreadLoadingState").markActThreadLoadingAsCompleted(e,{intJid:r,threadKey:t},a.instanceKey),b(e,t,a)])}),h.apply(this,arguments)}function y(e,t,n){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){(u||(u=o("I64"))).equal(t,n)||(yield e.threads.delete(n))}),C.apply(this,arguments)}function b(e,t,n){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){var a=r.clientThreadKey,i=r.instanceKey,l=r.isGroup;yield o("MAWThreadMappingQPL").measurePerformanceForNullableInstanceKey("handle_existing_thread",i,function(){return(c||(c=n("Promise"))).all([_(e,t,{clientThreadKey:a,isGroup:l}),a!=null&&y(e,t,(u||(u=o("I64"))).of_string(a))])})}),v.apply(this,arguments)}function S(e,t){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.authoritativeThreadKey,a=t.clientThreadKey,i=t.instanceKey,l=t.intJid;i!=null&&o("MAWThreadMappingQPL").allowToSkipUpgradingOptimisticThreadInMI(i);var s=n!=null?n:a;s!=null&&(yield o("MAWThreadLoadingState").markActThreadLoadingAsCompleted(e,{intJid:l,threadKey:(u||(u=o("I64"))).of_string(s)},i),yield o("MAWThreadMappingQPL").measurePerformanceForNullableInstanceKey("thread_point_query_sproc",i,function(){return r("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(r("LSFactory")(e),{waJid:l})}))}),R.apply(this,arguments)}function L(e,t,n){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield e.threads.get(t);a!=null&&(u||(u=o("I64"))).to_int32(a.authorityLevel)===r("LSAuthorityLevel").AUTHORITATIVE?yield b(e,t,n):n.instanceKey!=null&&o("MAWThreadMappingQPL").handleExistingThreadFail(n.instanceKey,a),a==null&&d.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Authoritative thread not found for clientThreadKey: ",""])),n.clientThreadKey)}),E.apply(this,arguments)}function k(e,t){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.authoritativeThreadKey,r=t.clientThreadKey,a=t.description,i=t.instanceKey,l=t.isGroup,s=t.jid,u=o("MAWJids").convertChatJidToIntJid(s),c=yield o("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByJidOrThreadKey(e,u,n,"MAWBridgeOccamadilloVerifyThreadExistsHandler");switch(i!=null&&o("MAWThreadMappingQPL").addAnnotations({string:{threadStateInOccamVTE:c.type.toString()}},i),c.type){case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.THREAD_KEY_ONLY:return S(e,{authoritativeThreadKey:n,clientThreadKey:r,instanceKey:i,intJid:u}).then(function(){return{previousState:c.type}});case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:return g(e,c.serverThreadKey,u,{clientThreadKey:r,instanceKey:i,isGroup:l}).then(function(){return{previousState:c.type}});case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:return L(e,c.serverThreadKey,{clientThreadKey:r,instanceKey:i,isGroup:l}).then(function(){return{previousState:c.type}});case o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:throw d.mustfixThrow("[Unimplemented VerifyThreadExists state: %s for JID: %s, from %s",c.type,s,a);default:throw c.type,d.mustfixThrow("Unhandled VerifyThreadExists state: %s for JID: %s, from %s",c.type,s,a)}}),I.apply(this,arguments)}function T(e,t,n,r){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,a){yield o("MAWThreadMappingQPL").measurePerformanceForNullableInstanceKey("insert_ephemeral_cache",a,n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=yield e.threads.get(t);if(n!=null){var a,i,l={ephemeralExpirationInSec:(u||(u=o("I64"))).to_int32((a=n.disappearingSettingTtl)!=null?a:(u||(u=o("I64"))).zero),ephemeralLastUpdatedOrSetTimestamp:o("WATimeUtils").castMilliSecondsToUnixTime(u.to_float((i=n.disappearingSettingUpdatedTs)!=null?i:(u||(u=o("I64"))).zero))};o("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingCache",{jid:r,settings:l})}}))}),D.apply(this,arguments)}function x(e,t){return $.apply(this,arguments)}function $(){return $=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=n.cannotReplyReason,a=n.folder,i=n.lastReadTs,l=babelHelpers.objectWithoutPropertiesLoose(n,e),s=l.authoritativeThreadKey,c=l.clientThreadKey,d=l.description,m=l.instanceKey,p=l.jid;m!=null&&o("MAWThreadMappingQPL").addPoint("occam_verify_thread_exists_start",m);var _=yield k(t,l),f=_.previousState;o("MAWActThreadMapping").executePromisesBlockedOnActThreadMapping({authoritativeThreadKey:s,description:d,instanceKey:m,jid:p,optimisticThreadKey:c});var g=s!=null?s:c,h=g!=null?(u||(u=o("I64"))).of_string(g):null;if(h!=null&&f!==o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE&&(yield T(t,h,p,m)),m!=null){o("MAWThreadMappingQPL").addPoint("occam_verify_thread_exists_end",m);var y=o("MAWJids").convertChatJidToIntJid(l.jid);o("MAWThreadMappingQPL").pendingThreadCreationOnServer.has((u||(u=o("I64"))).to_string(y))||(yield o("MAWThreadMappingQPL").end({instanceKey:m,intJid:y,tables:t,threadKey:h}))}}),$.apply(this,arguments)}l.attachLocalMetadata=_,l.ensureOptimisticThreadIsHidden=y,l.genUpdatesForAuthoritativeThread=b,l.insertEphemeralCache=T,l.call=x}),98);
__d("MAWEphemeralSettingsUpdate",["FBLogger","I64","LSOptimisticUpdateThreadDisappearingSettingStoredProcedure","MAWChatJid","MAWCurrentUser","MAWEphemeralMsgAutoResetSystemId","Promise","asyncToGeneratorRuntime","gkx","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWEphemeralSettingsUpdate"),c=r("requireDeferred")("LSFactory").__setRef("MAWEphemeralSettingsUpdate"),d=r("requireDeferred")("WATimeUtils").__setRef("MAWEphemeralSettingsUpdate");function m(e,t,n,r){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=yield e.threads.get(r);if(a!=null){var i=a.disappearingSettingUpdatedTs,l=a.disappearingSettingTtl;if(i==null||l==null||(s||(s=o("I64"))).lt(i,(s||(s=o("I64"))).of_float(n))&&!(s||(s=o("I64"))).equal(l,(s||(s=o("I64"))).of_int32(t)))return!0}return!1}),p.apply(this,arguments)}function _(e,t,n,r,o,a,i){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,u,d,p){var _=yield m(t,a,i,u);if(!_)return(e||(e=n("Promise"))).resolve();d&&r("FBLogger")("wmi_eb").addMetadata("LABYRINTH_WEB","APP_VERSION","OCCAM_EPHEMERAL_SETTINGS_UPDATE").info("[Occam][Web] Ephemeral Settings Updated.");var f=yield c.load();return r("LSOptimisticUpdateThreadDisappearingSettingStoredProcedure")(f(t),{disappearingTtl:(s||(s=o("I64"))).of_int32(a),threadKey:u,updatedBy:s.of_string(l?r("MAWEphemeralMsgAutoResetSystemId"):p!=null?p:o("MAWCurrentUser").getID()),updatedTimestamp:s.of_float(i)})}),f.apply(this,arguments)}function g(e,t,n,r){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var o=yield u.load(),a=yield o();return a.runInTransaction(function(o){return _(o,e,t,n,r,!1)},"readwrite")}),h.apply(this,arguments)}function y(e,t,n,r,o){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,s){var c=yield u.load(),m=yield c(),p;return r("gkx")("11440")&&(p=(yield d.load()).castUnixTimeToMillisTime(a)),m.runInTransaction((function(){var u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(u){var c=yield o("MAWChatJid").toThreadKeyMaybe(u,l);return c!=null?_(u,t,r("gkx")("11440")?p:(yield d.load()).castUnixTimeToMillisTime(a),i,c,s):(e||(e=n("Promise"))).resolve()});return function(e){return u.apply(this,arguments)}})(),"readwrite")}),C.apply(this,arguments)}l.updateEphemeralSettingsWithTxn=_,l.updateEphemeralSettings=g,l.updateEphemeralSettingsByChatJid=y}),98);
__d("MAWGetEphemeralSettings",["I64","MAWBridgeSendAndReceive","MAWChatJid","ReQL","WAJids","WALogger","WATimeUtils","asyncToGeneratorRuntime","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWGetEphemeralSettings"),c=r("requireDeferred")("MAWEphemeralSettingsUpdate").__setRef("MAWGetEphemeralSettings");function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){if(o("WAJids").switchOnMsgrChatJidType(t,{group:function(){return!1},user:function(){return!0}})){var a=yield u.load(),i=yield a(),l=n!=null?n:yield o("MAWChatJid").toThreadKeyMaybe(i.tables,t);if(l!=null){var d=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(i.tables.threads).getKeyRange(l));if(d!=null&&d.disappearingSettingTtl!=null){var m={ephemeralExpirationInSec:(s||(s=o("I64"))).to_int32(d.disappearingSettingTtl),ephemeralLastUpdatedOrSetTimestamp:d.disappearingSettingUpdatedTs!=null?o("WATimeUtils").castMilliSecondsToUnixTime((s||(s=o("I64"))).to_float(d.disappearingSettingUpdatedTs)):o("WATimeUtils").unixTime()};return m}return}return o("MAWBridgeSendAndReceive").sendAndReceive("backend","getEphemeralSettings",{threadId:t}).then(function(n){if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[ephemeral settings in memory]: MAWGetEphemeralSettings api call for chatJid "," returns ",""])),t,n),n!=null)return r("promiseDone")(c.load().then(function(e){return e.updateEphemeralSettingsByChatJid(n.ephemeralExpirationInSec,n.ephemeralLastUpdatedOrSetTimestamp,!1,t,!0)})),n})}}),m.apply(this,arguments)}l.getEphemeralSetting=d}),98);
__d("MAWIsIDBOperational",["FBLogger","WebAsyncStorage","asyncToGeneratorRuntime","promiseDone","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(e===void 0&&(e=!1),e&&!r("WebAsyncStorage").isOpenPromiseSettled())return!1;var t=yield r("WebAsyncStorage").isOperational();return t.success?!0:(r("FBLogger")("messenger_web").catching(t.error).warn("Marking MAW IDB as unavailable: %s",t.error.message),!1)}),m.apply(this,arguments)}var p=!1;function _(){var e=c(p),t=e[0],n=e[1];return u(function(){r("promiseDone")(d().then(function(e){n(e),p=e}))},[n]),t}l.isIDBOperational=d,l.useIsIDBOperational=_}),98);
__d("MAWUIJob",["ExecutionEnvironment","MAWBridge","WAJobOrchestratorTypes","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d={priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},m={fireAndForget:function(n){var t;(c||(c=r("ExecutionEnvironment"))).isInWorker&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["UIJobStarters fireAndForget called in the worker, which is a bug for job: ",""])),n.type),o("MAWBridge").getBridge().fireAndForget("backend","runJobFireAndForget",babelHelpers.extends({},n,{scheduleConfig:(t=n.scheduleConfig)!=null?t:d}))},waitUntilCompleted:function(t,n,a){var e;(c||(c=r("ExecutionEnvironment"))).isInWorker&&o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["UIJobStarters waitUntilCompleted called in the worker, which is a bug for job: ",""])),t.type);var i=o("MAWBridge").getBridge().sendAndReceive("backend","runJobWaitUntilCompleted",babelHelpers.extends({},t,{scheduleConfig:(e=t.scheduleConfig)!=null?e:d}),void 0,n,a);return i},waitUntilPersisted:function(t,n,a){var e;(c||(c=r("ExecutionEnvironment"))).isInWorker&&o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["UIJobStarters waitUntilPersisted called in the worker, which is a bug for job: ",""])),t.type);var i=o("MAWBridge").getBridge().sendAndReceive("backend","runJobWaitUntilPersisted",babelHelpers.extends({},t,{scheduleConfig:(e=t.scheduleConfig)!=null?e:d}),void 0,n,a);return i}};l.UIJobStarters=m}),98);
__d("MAWTimedJob",["FBLogger","MAWBridgeLoggingUtils","MAWMaybeWithTimeout","MAWTimedBridge","MAWUIJob","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MAWWorkerEvent","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e={fireAndForget:function(t,n){n===void 0&&(n=o("MAWTimedBridge").DEFAULT_MAW_BRIDGE_TIMEOUT_MS);var e=!1;return o("MAWMaybeWithTimeout").maybeWithTimeout(o("MAWWaitForBackendSetup").waitForBackendSetup(t.type).then(function(){return e=!0,o("MAWUIJob").UIJobStarters.fireAndForget(t)}),n,function(){return o("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(n){throw r("FBLogger")("maw_core_lla").mustfixThrow("Failed to ack execution of job %s in time. Backend setup: %s, workerHealthStatus: %s",t.type,e,n.tag)})},t.type)},waitUntilCompleted:function(t,n){n===void 0&&(n=o("MAWTimedBridge").DEFAULT_MAW_BRIDGE_TIMEOUT_MS);var e=!1,a=o("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(t.type);return o("MAWMaybeWithTimeout").maybeWithTimeout(o("MAWWaitForBackendSetup").waitForBackendSetup(t.type).then(function(){return o("MAWWorkerEvent").logStart("waitUntilCompleted",t.type,a),e=!0,o("MAWUIJob").UIJobStarters.waitUntilCompleted(t,{onAck:function(n){o("MAWWorkerEvent").logAck(a,t.type,n)},onSend:function(n){var e=n.queueMsgs,r=n.queueSize;o("MAWWorkerEvent").logSend(a,t.type,"waitUntilCompleted"),o("MAWWorkerEvent").logAnnotations(a,{int:{bridgeSize:r},string_array:{bridgeMsgs:e}})}},{bridgeQPLInstanceKey:a}).then(function(e){return o("MAWWorkerEvent").logSuccess(a),e},function(e){var t=r("getErrorSafe")(e);throw o("MAWWorkerEvent").logFailure(a,t.message),t})}),n,function(){return o("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(n){throw o("MAWWorkerEvent").logTimeoutFailure(a,"Failed to complete execution of job",n),r("FBLogger")("maw_core_lla").mustfixThrow("Failed to complete execution of job %s in time. Backend setup: %s, workerHealthStatus: %s",t.type,e,n.tag)})},t.type)},waitUntilPersisted:function(t,n){n===void 0&&(n=o("MAWTimedBridge").DEFAULT_MAW_BRIDGE_TIMEOUT_MS);var e=!1,a=o("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(t.type);return o("MAWMaybeWithTimeout").maybeWithTimeout(o("MAWWaitForBackendSetup").waitForBackendSetup(t.type).then(function(){return e=!0,o("MAWWorkerEvent").logStart("waitUntilPersisted",t.type,a),o("MAWUIJob").UIJobStarters.waitUntilPersisted(t,{onAck:function(n){o("MAWWorkerEvent").logAck(a,t.type,n)},onSend:function(n){var e=n.queueMsgs,r=n.queueSize;o("MAWWorkerEvent").logSend(a,t.type,"waitUntilPersisted"),o("MAWWorkerEvent").logAnnotations(a,{int:{bridgeSize:r},string_array:{bridgeMsgs:e}})}},{bridgeQPLInstanceKey:a}).then(function(e){return o("MAWWorkerEvent").logSuccess(a),e},function(e){var t=r("getErrorSafe")(e);throw o("MAWWorkerEvent").logFailure(a,t.message),t})}),n,function(){return o("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(n){throw o("MAWWorkerEvent").logTimeoutFailure(a,"Failed to persist execution of job",n),r("FBLogger")("maw_core_lla").mustfixThrow("Failed to persist execution of job %s in time. Backend setup: %s, workerHealthStatus: %s",t.type,e,n.tag)})},t.type)}};l.TimedUIJobStarters=e}),98);
__d("WMIWABridgeApi",["MAWBridgeSendAndReceive"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o("MAWBridgeSendAndReceive").sendAndReceive("backend","waapi",{args:n,type:e})}}var s={getCurrentUserDeviceList:e("getCurrentUserDeviceList"),getDevices:e("getDevices"),getIdentityKeys:e("getIdentityKeys"),queryGroups:e("queryGroups"),removeCurrentDevice:e("removeCurrentDevice"),removeDevice:e("removeDevice")},u=s;l.default=u}),98);/*FB_PKG_DELIM*/
__d("BTManifestName",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({MAIN:"main",LONGTAIL:"longtail"}),l=e;i.default=l}),66);
__d("BtLongtailHashFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5779"),s=o("FalcoLoggerInternal").create("bt_longtail_hash",e),u=s;l.default=u}),98);
__d("CometBTManifestLoader",["BootloaderEvents","BtLongtailHashFalcoEvent","ClientConsistencyEventEmitter","FBLogger","ODS","Promise","SiteData","TrustedTypes","XHRRequest","asyncToGeneratorRuntime","err","getErrorSafe","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Set;function c(e,t,n,r){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,o,a){var i=yield new(s||(s=n("Promise")))(function(n,i){new(r("XHRRequest"))(e+"/btmanifest/"+o+"/"+t+"/"+a).setMethod("GET").setResponseHandler(function(e){return n(e.toString())}).setErrorHandler(function(e){return i(e)}).send()});if(typeof i!="string")throw r("FBLogger")("binary_transparency","bt_invalid_manifest_response").mustfixThrow("Invalid response from BT manifest endpoint");return i}),d.apply(this,arguments)}function m(t,n){(e||(e=o("ODS"))).bumpEntityKey(454,"obc.www.all","bt.comet_manifest_loader.0."+o("SiteData").pkg_cohort+"."+t+"."+n)}function p(e,t,n){var o;if(n instanceof Error)o=n;else if(typeof n=="object"){var a=JSON.stringify(n);o=r("err")("(XHRRequest): %s",a.slice(0,300)+(a.length>300?"...":""))}else o=r("err")(n);r("FBLogger")("binary_transparency","bt_download_manifest_error").catching(o).mustfix('Unable to download and inject BT manifest "%s" for version: %s',t,e)}var _=r("TrustedTypes").createPolicy("bt-manifest",{createScript:function(t){return t}});function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(!(!o("SiteData").manifest_origin||o("SiteData").manifest_version_prefix==null||o("SiteData").manifest_base_uri==null)){var n=e+"_"+t,a=""+o("SiteData").manifest_version_prefix+e;if(!u.has(n)){m(t,"start"),u.add(n);try{var i,l=document.createElement("script"),s=yield c(o("SiteData").manifest_base_uri,o("SiteData").manifest_origin,a,t);r("justknobx")._("3786")?l.innerText=_.createScript(s):l.innerText=s,l.type="application/json",l.setAttribute("name","binary-transparency-manifest"),l.dataset.manifestRev=a,l.dataset.manifestType=t,(i=document.head)==null||i.appendChild(l),m(t,"complete")}catch(e){var d=r("getErrorSafe")(e);m(t,"failed"),p(a,t,d),u.delete(n)}}}}),g.apply(this,arguments)}function h(){r("promiseDone")(f(o("SiteData").client_revision,"main")),o("BootloaderEvents").onResourceInLongTailBTManifest(function(e){r("promiseDone")(f(o("SiteData").client_revision,"longtail")),e.hashes.forEach(function(t){r("BtLongtailHashFalcoEvent").log(function(){return{client_revision:String(o("SiteData").client_revision),ef_page:o("SiteData").ef_page||"",hash:t,pkg_cohort:o("SiteData").pkg_cohort,reference:e.source,rls_id:o("SiteData").hsi}})})}),r("ClientConsistencyEventEmitter").addListener("newRevision",function(e){r("promiseDone")(f(e,"main")),r("promiseDone")(f(e,"longtail"))})}l.init=h}),98);
__d("XRefererFrameControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/common/referer_frame.php",Object.freeze({no_lower:!1}),void 0),s=e;l.default=s}),98);
__d("getRequestConstUri",["ConstUriUtils","FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("ConstUriUtils").getUri(window.location.href);if(e==null)throw r("FBLogger")("comet_infra").mustfixThrow("Cannot create ConstUriImpl of current request");return e}l.default=e}),98);
__d("ControlledReferer",["invariant","ConstUriUtils","XRefererFrameControllerRouteBuilder","getRequestConstUri","isInternalFBURI","isWorkplaceDotComURI"],(function(t,n,r,o,a,i,l,s){function e(e,t,n){function a(){var n="";try{n=e.contentWindow.location.pathname}catch(e){return}n!=="/intern/common/referer_frame.php"&&n!=="/common/referer_frame.php"&&n!=="/common/referer_frame.php/"||t()}var i=r("XRefererFrameControllerRouteBuilder").buildUri({cb:1}),l=i;if(r("isInternalFBURI")(r("getRequestConstUri")())&&(l=o("ConstUriUtils").getUri("/intern/common/referer_frame.php")),n==null&&r("isWorkplaceDotComURI")(r("getRequestConstUri")())&&(n="workplace"),n){var u;l=(u=l)==null?void 0:u.addQueryParam("fb_source",n)}l!=null||s(0,67317),e.onload=a,e.src=l.toString()}function u(t,n,r){e(t,function(){t.contentWindow.document.body.innerHTML=n},r)}l.shouldUseFacebookReferer=e,l.useFacebookRefererHtml=u}),98);
__d("StaticContainer.react",["react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(t){return!!t.shouldUpdate},n.render=function(){var e=this.props.children;return e===null||e===!1?null:s.Children.only(e)},t})(s.Component);l.default=u}),98);
__d("ControlledRefererIFrame.react",["ControlledReferer","ControlledRefererIFrameConfig","SecurePostMessage","StaticContainer.react","TrustedTypesNoOpPolicy_DO_NOT_USE","URI","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["src","onFrameRender","onBeforeFrameRender","useTrustedHtml"],s,u,c=u||(u=o("react")),d=(function(t){function n(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.mountFrameRef=function(t){this.frame=t},a.updateFrame=function(){var e=this,t=this.frame;t&&(this.props.onBeforeFrameRender&&this.props.onBeforeFrameRender(this.props),o("ControlledReferer").shouldUseFacebookReferer(t,function(){var n=t.contentWindow.document;n.body.innerHTML=r("TrustedTypesNoOpPolicy_DO_NOT_USE").createHTML('\n        <form method="GET" id="theform"></form>\n        '+o("ControlledRefererIFrameConfig").additional_markup+"\n      ");var a=new(s||(s=r("URI")))(e.props.src).qualify(),i=n.getElementById("theform");i.action=a.toString();var l=a.getQueryData(),u=new Map;for(var c in l)if(Object.prototype.hasOwnProperty.call(l,c)){var d=l[c];if(typeof d=="object"&&!Array.isArray(d))for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&u.set(c+"["+m+"]",d[m]);else u.set(c,d)}var p=function(){var e=_[0],t=_[1];if(Array.isArray(t))t.forEach(function(t){var r=n.createElement("input");r.name=e+"[]",r.setAttribute("value",t),r.autocomplete="off",r.type="hidden",i.appendChild(r)});else{var r=n.createElement("input");r.name=e,r.setAttribute("value",t),r.autocomplete="off",r.type="hidden",i.appendChild(r)}};for(var _ of u)p();var f=n.createElement("iframe");f.frameborder=0,f.width=f.height="1",f.onload=function(){return n.getElementById("theform").submit()},n.body.appendChild(f),e.props.onFrameRender&&e.props.onFrameRender(e.props)}))},a.componentDidMount=function(){this.updateFrame()},a.componentDidUpdate=function(t){t.src!==this.props.src&&this.updateFrame()},a.UNSAFE_componentWillReceiveProps=function(t){var e=this.frame;e&&(t.width!==this.props.width||t.height!==this.props.height)&&(t.width!=null&&(e.width=""+t.width),t.height!=null&&(e.height=""+t.height))},a.render=function(){var t=this,n=this.props,o=n.src,a=n.onFrameRender,i=n.onBeforeFrameRender,l=n.useTrustedHtml,s=babelHelpers.objectWithoutPropertiesLoose(n,e);return c.jsx(r("StaticContainer.react"),{children:c.jsx("iframe",babelHelpers.extends({},s,{ref:function(n){return t.mountFrameRef(n)}}))})},a.postMessage=function(t,n){this.frame&&r("SecurePostMessage").sendMessageToSpecificOrigin(this.frame.contentWindow,t,n)},n})(c.PureComponent);l.default=d}),98);
__d("IgFrCookieUpdaterFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5694"),s=o("FalcoLoggerInternal").create("ig_fr_cookie_updater",e),u=s;l.default=u}),98);
__d("PolarisAFADDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{}},root:r("JSResourceForInteraction")("PolarisAFADDialog.react").__setRef("PolarisAFADDialog.entrypoint")};l.default=e}),98);
__d("PolarisAPIGetFrCookieQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24265538733086022"}),null);
__d("PolarisAPIGetFrCookieQuery.graphql",["PolarisAPIGetFrCookieQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"_request_data"},{defaultValue:null,kind:"LocalArgument",name:"payload"}],t=[{alias:null,args:[{kind:"Variable",name:"_request_data",variableName:"_request_data"},{kind:"Variable",name:"payload",variableName:"payload"}],concreteType:"XDTGetEncryptedCredentialsResponse",kind:"LinkedField",name:"xdt_api__v1__web__accounts__get_encrypted_credentials",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fr",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"PolarisAPIGetFrCookieQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"PolarisAPIGetFrCookieQuery",selections:t},params:{id:n("PolarisAPIGetFrCookieQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_api__v1__web__accounts__get_encrypted_credentials"]},name:"PolarisAPIGetFrCookieQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisAPIGetFrCookie",["CometRelay","PolarisAPIGetFrCookieQuery.graphql","PolarisInstapi","err","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a){return r("justknobx")._("999")?o("CometRelay").fetchQuery(a,e!==void 0?e:e=n("PolarisAPIGetFrCookieQuery.graphql"),{_request_data:{},payload:t}).toPromise().then(function(e){if(e==null)throw r("err")("Failed to get Fr cookie.");return{fr:e.xdt_api__v1__web__accounts__get_encrypted_credentials.fr}}):o("PolarisInstapi").apiPost("/api/v1/web/accounts/get_encrypted_credentials/",{body:{payload:t}}).then(function(e){return e.data})}l.getFrCookie=s}),98);
__d("PolarisAppInstallConstants",["keyMirror"],(function(t,n,r,o,a,i,l){"use strict";var e=r("keyMirror")({default:null,instagramlitecarbon:null,openinapp:null}),s=["postPage","profilePage","locationPage","feedPage","exploreLandingPage","ActivityFeedPage"];l.APP_BANNER_VARIANTS=e,l.ALLOWLISTED_PAGE_IDS=s}),98);
__d("buildIframeOriginUrl",["URI"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}l.default=s}),98);
__d("PolarisFacebookCookieSyncConstants",["URI","buildIframeOriginUrl"],(function(t,n,r,o,a,i,l){"use strict";var e,s={error:"ig_iframe_error",ig_sync:"ig_iframe_ig_sync",ig_sync_error:"ig_iframe_ig_sync_error",ig_sync_success:"ig_iframe_ig_sync_success",ready:"ig_iframe_ready",success:"ig_iframe_success",sync:"ig_iframe_fb_sync"},u=r("buildIframeOriginUrl")("https://www.facebook.com"),c=new(e||(e=r("URI")))(u).getDomain(),d="fr";l.IFRAME_MESSAGES=s,l.IFRAME_ORIGIN=u,l.IFRAME_DOMAIN=c,l.FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY=d}),98);
__d("SecureMessageListener",["SecurePostMessage","URI","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){var t=this;this.$3=null,this.$4=!1,this.$1=e,this.$5=function(e){t.run(e)}}var n=t.prototype;return n.setEventHandler=function(t){return this.$2=t,this},n.setSupportedOrigins=function(t){return this.$3=t,this},n.skipOriginCheck_UNSAFE=function(){return this.$4=!0,this},n.beginListening=function(){return this.$1.addEventListener("message",this.$5),this},n.stopListening=function(){try{this.$1.removeEventListener("message",this.$5)}catch(t){var e=r("getErrorSafe")(t);if(!(e instanceof TypeError))throw e}return this},n.run=function(t){if(this.$3==null||this.$3.length===0){if(!this.$4&&t.origin!==this.$1.location.origin)return}else if(!this.isSupportedOrigin(this.$3,t.origin))return;if(this.$2){var e=function(n){o("SecurePostMessage").sendMessageToSpecificOrigin(t.source,n,t.origin)};this.$2(t,e)}},n.isSupportedOrigin=function(n,o){if(!new RegExp("^https://").test(o))return!1;var t=new(e||(e=r("URI")))(o);return n.some(function(e){return t.isSubdomainOfDomain(e)})},t})();l.default=s}),98);
__d("XPolarisFacebookSyncController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/sync/instagram/",{})}),null);
__d("PolarisFacebookToInstagramCookieSync.react",["FBLogger","InstagramODS","PolarisFacebookCookieSyncConstants","SecureMessageListener","SecurePostMessage","XAsyncRequest","XPolarisFacebookSyncController","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(4),n=e.frameRef,a=e.onCleanUp,i,l;return t[0]!==n||t[1]!==a?(i=function(){var e=function(){r("InstagramODS").incr("web.cookie_sync.oo_cookie.start_fb_sync");var e=n.current;(e==null?void 0:e.contentWindow)!=null&&o("SecurePostMessage").sendMessageToSpecificOrigin(e.contentWindow,{eventName:o("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ig_sync},o("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN)},t=function(n){if(n.origin===o("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN){var t=n.data.eventName;e:switch(t){case o("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ready:{e();break e}case o("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ig_sync_success:{var i;r("InstagramODS").incr("web.cookie_sync.oo_cookie.retrieve_success");var l=r("XPolarisFacebookSyncController").getURIBuilder().getURI();new(r("XAsyncRequest"))().setURI(l).setMethod("POST").setData({encrypted_data:(i=n.data.data)==null?void 0:i.data}).setHandler(d).setErrorHandler(c).send(),a();break e}case o("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ig_sync_error:{var s;r("InstagramODS").incr("web.cookie_sync.oo_cookie.retrieve_error");var u=(s=n.data.errorDescription)!=null?s:"Exception thrown when syncing cookie to sync ig cookie";r("FBLogger")("ig_web").mustfix(u),a()}}}},i=new(r("SecureMessageListener"))(window).setEventHandler(t).setSupportedOrigins([o("PolarisFacebookCookieSyncConstants").IFRAME_DOMAIN]).beginListening();return function(){i.stopListening()}},l=[n,a],t[0]=n,t[1]=a,t[2]=i,t[3]=l):(i=t[2],l=t[3]),s(i,l),null}function c(e){var t;r("InstagramODS").incr("web.cookie_sync.oo_cookie.sync_fail");var n=(t=e.errorDescription)!=null?t:"Error when syncing ig cookies";r("FBLogger")("ig_web").mustfix(n)}function d(e){r("InstagramODS").incr("web.cookie_sync.oo_cookie.sync_success")}l.default=u}),98);
__d("PolarisInstagramToFacebookCookieSync.react",["CometRelay","FBLogger","IgFrCookieUpdaterFalcoEvent","InstagramODS","PolarisAPIGetFrCookie","PolarisAdsGatingHelpers","PolarisConfig","PolarisDOMListener.react","PolarisFacebookCookieSyncConstants","PolarisWebStorage","SecurePostMessage","browserHistory_DO_NOT_USE","gkx","react","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef,m=Number(new Date().getTime());function p(e){var t=new Date().getTime()-m;e.total_latency=t.toString(),e.country=o("PolarisConfig").getCountryCode(),r("IgFrCookieUpdaterFalcoEvent").log(function(){return e})}function _(e){var t,n=e.frameRef,a=e.frData,i=e.onCleanUp,l=r("gkx")("25372"),u=r("gkx")("3478"),m=l&&u,_=(t=r("usePolarisViewer")())==null?void 0:t.id,f=o("browserHistory_DO_NOT_USE").getPath(o("browserHistory_DO_NOT_USE").browserHistory),g=o("CometRelay").useRelayEnvironment(),h=o("PolarisAdsGatingHelpers").useEUFRCookieODSLogging(),y=d({browser_history_path:f,iframe_origin:o("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN,ig_user_id:_,is_blacklisted:!1,is_control_group:!1,is_local_storage_accessible:!1,local_storage_data:a,local_storage_same_as_api:!0,local_storage_updated:!1,show_iframe:!1}),C=y.current;c(function(){m||(C.is_blacklisted=!0,p(C),i())},[]);var b=function(t){var e=t.data.eventName;if(C.iframe_message_origin=t.origin,t.origin!==o("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN){e in o("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES&&(C.iframe_message_origin_mismatch=!0,p(C));return}switch(e){case o("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ready:r("InstagramODS").incr("web.frcookie.iframe.ready"),h&&r("InstagramODS").incr("web.eu.frcookie.iframe.ready"),C.iframe_message_ready=!0,v();break;case o("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.success:r("InstagramODS").incr("web.frcookie.iframe.success"),h&&r("InstagramODS").incr("web.eu.frcookie.iframe.success"),C.iframe_message_success=!0,p(C),i();break;case o("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.error:r("InstagramODS").incr("web.frcookie.iframe.error"),h&&r("InstagramODS").incr("web.eu.frcookie.iframe.error"),S(),C.iframe_message_error=!0,p(C);break}},v=function(){C.iframe_non_null=!1,C.iframe_content_window_non_null=!1;var e=n.current;e!=null&&(a==null&&(r("InstagramODS").incr("web.frcookie.local_storage.empty"),h&&r("InstagramODS").incr("web.eu.frcookie.local_storage.empty")),o("PolarisAPIGetFrCookie").getFrCookie(a,g).then(function(t){if(C.api_data=t.fr,t.fr===a){p(C),i();return}C.local_storage_same_as_api=!1;var n=r("PolarisWebStorage").getLocalStorage();if(n==null){p(C),i();return}if(C.is_local_storage_accessible=!0,t.fr===""){n.removeItem(o("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY),r("InstagramODS").incr("web.frcookie.local_storage.remove"),h&&r("InstagramODS").incr("web.eu.frcookie.local_storage.remove"),p(C),i();return}n.setItem(o("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY,t.fr),C.show_iframe=!0,C.local_storage_updated=!0,C.iframe_payload=t.fr,C.iframe_non_null=!0,e.contentWindow!=null&&(C.iframe_content_window_non_null=!0,o("SecurePostMessage").sendMessageToSpecificOrigin(e.contentWindow,{data:t.fr,eventName:o("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.sync},o("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN)),r("InstagramODS").incr("web.frcookie.local_storage.update"),h&&r("InstagramODS").incr("web.eu.frcookie.local_storage.update")}).catch(function(e){r("InstagramODS").incr("web.frcookie.get.error"),h&&r("InstagramODS").incr("web.eu.frcookie.get.error"),C.exception=e.toString(),p(C),r("FBLogger")("ig_web").catching(e).mustfix("Exception thrown when getting frCookie"),S()}))},S=function(){var e=r("PolarisWebStorage").getLocalStorage();r("PolarisWebStorage").isLocalStorageSupported()&&e!=null&&e.removeItem(o("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY),i()};return m&&s.jsx(r("PolarisDOMListener.react"),{event:"message",handler:b,target:window})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("PolarisFacebookCookieSyncImpl.react",["IgFrCookieUpdaterFalcoEvent","JSScheduler","PolarisDOMListener.react","PolarisFacebookCookieSyncConstants","PolarisFacebookToInstagramCookieSync.react","PolarisInstagramToFacebookCookieSync.react","PolarisReactRedux.react","PolarisUA","PolarisWebStorage","RunComet","browserHistory_DO_NOT_USE","react","react-compiler-runtime","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useRef,p=c.useState,_=o("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN+"/instagram/login_sync/",f=["terms","challenge"],g=3,h=Number(new Date().getTime());function y(e){var t=new Date().getTime()-h;e.total_latency=t.toString(),r("IgFrCookieUpdaterFalcoEvent").log(function(){return e})}var C=function(){if(!o("PolarisUA").isIGWebview()&&r("PolarisWebStorage").isLocalStorageSupported()){var e=r("PolarisWebStorage").getLocalStorage();if(e!=null)return e.getItem(o("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY)}return null};function b(t){var n,a=t.frData,i=m(null),l=(n=r("usePolarisViewer")())==null?void 0:n.id,s=m({browser_history_path:o("browserHistory_DO_NOT_USE").getPath(o("browserHistory_DO_NOT_USE").browserHistory),iframe_origin:o("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN,ig_user_id:l,is_blacklisted:!1,is_control_group:!1,is_local_storage_accessible:!1,local_storage_data:a,local_storage_same_as_api:!0,local_storage_updated:!1,show_iframe:!1}),c=s.current,f=function(){c.iframe_unload=!0},h=p(!1),C=h[0],b=h[1];d(function(){var t=null,n=null,a=o("RunComet").onAfterLoad(function(){t=(e||(e=r("JSScheduler"))).scheduleLoggingPriCallback(function(){n=window.setTimeout(function(){b(!0)},g*1e3)})});return function(){n&&window.clearTimeout(n),t&&(e||(e=r("JSScheduler"))).cancelCallback(t),a&&a.remove()}},[]);var v=p(!1),S=v[0],R=v[1],L=p(!1),E=L[0],k=L[1],I=S&&E;return C?u.jsxs(u.Fragment,{children:[u.jsx("div",{hidden:!0,children:u.jsx("iframe",{onError:function(){c.iframe_on_error=!0,y(c)},onLoad:function(){c.iframe_on_load=!0},ref:i,src:_,style:{border:"none",display:"none",height:0,width:0},title:"fr"})}),I?null:u.jsxs(u.Fragment,{children:[u.jsx(r("PolarisInstagramToFacebookCookieSync.react"),{frameRef:i,frData:a,onCleanUp:function(){return R(!0)}}),u.jsx(r("PolarisFacebookToInstagramCookieSync.react"),{frameRef:i,onCleanUp:function(){return k(!0)}}),u.jsx(r("PolarisDOMListener.react"),{event:"beforeunload",handler:f,target:window})]})]}):null}b.displayName=b.name+" [from "+i.id+"]";function v(){var e,t=o("react-compiler-runtime").c(3),n=o("PolarisReactRedux.react").useSelector(S),a=(e=r("usePolarisViewer")())==null?void 0:e.id;if(n)return null;var i;if(t[0]!==a){i=Symbol.for("react.early_return_sentinel");e:{var l=o("browserHistory_DO_NOT_USE").getPath(o("browserHistory_DO_NOT_USE").browserHistory);if(f.some(function(e){return l.includes(e)})){y({browser_history_path:l,iframe_origin:o("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN,ig_user_id:a,is_blacklisted:!0,is_control_group:!1,is_local_storage_accessible:!1,local_storage_same_as_api:!0,local_storage_updated:!1,show_iframe:!1}),i=null;break e}}t[0]=a,t[1]=i}else i=t[1];if(i!==Symbol.for("react.early_return_sentinel"))return i;var s;return t[2]===Symbol.for("react.memo_cache_sentinel")?(s=u.jsx(b,{frData:C()}),t[2]=s):s=t[2],s}function S(e){var t;return!!(e!=null&&(t=e.cookieModal)!=null&&t.visible)}l.default=v}),98);
__d("PolarisGAMEWriteTimeBlockDialogQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="30957150090566004"}),null);
__d("PolarisGAMEWriteTimeBlockDialogQuery$Parameters",["PolarisGAMEWriteTimeBlockDialogQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("PolarisGAMEWriteTimeBlockDialogQuery_instagramRelayOperation"),metadata:{},name:"PolarisGAMEWriteTimeBlockDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("PolarisGAMEWriteTimeBlockDialog.entrypoint",["JSResourceForInteraction","PolarisGAMEWriteTimeBlockDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{PolarisGAMEWriteTimeBlockDialogQuery:{parameters:r("PolarisGAMEWriteTimeBlockDialogQuery$Parameters"),variables:{enforcement_transparency_instance_identifier:t.routeParams.enforcement_transparency_instance_identifier}}}}},root:r("JSResourceForInteraction")("PolarisGAMEWriteTimeBlockDialog.react").__setRef("PolarisGAMEWriteTimeBlockDialog.entrypoint")};l.default=e}),98);
__d("PolarisLoggedInAppBanner.react",["cx","HeroInteractionIgnoreWithDiv.react","IGDSBox.react","IGDSIconButton.react","IGDSXPanoFilledIcon.react","PolarisAppInstallConstants","PolarisAppInstallStrings","PolarisConfig","PolarisDismissEntry","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisIgLiteCarbonUpsellsUtils","PolarisIsLoggedIn","PolarisLoggedInCtaLogger","PolarisNavigationLayoutContext","PolarisUA","polarisGetAppPlatform","polarisLogAction","react","react-compiler-runtime","usePolarisOpenApp"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useEffect,p=c.useState,_="logged_in_banner";function f(e){var t=o("react-compiler-runtime").c(23),n=p(!1),a=n[0],i=n[1],l=e.pageID,s=e.viewer,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=o("PolarisIgLiteCarbonUpsellsUtils").isIgLiteCarbonUpsellsEligible(),t[0]=c):c=t[0];var d=c,f;t[1]===Symbol.for("react.memo_cache_sentinel")?(f=o("PolarisDismissEntry").isDismissed(o("PolarisDismissEntry").USE_THE_APP_LI_BANNER),t[1]=f):f=t[1];var g=p(f),h=g[0],y=g[1],C=o("PolarisNavigationLayoutContext").usePolarisNavigationLayoutContext(),b=C.navigationPosition,v;t[2]!==h||t[3]!==l||t[4]!==(s==null?void 0:s.isProfessionalAccount)?(v=function(){var e,t=(e=s==null?void 0:s.isProfessionalAccount)!=null?e:!1;return t&&o("polarisGetAppPlatform").isIOS()&&o("PolarisConfig").getCountryCode()==="US"?!0:!o("PolarisIsLoggedIn").isLoggedIn()||!o("PolarisUA").isMobile()||!o("PolarisAppInstallConstants").ALLOWLISTED_PAGE_IDS.includes(l)||h},t[2]=h,t[3]=l,t[4]=s==null?void 0:s.isProfessionalAccount,t[5]=v):v=t[5],s==null||s.isProfessionalAccount;var S=v,R,L;t[6]!==S||t[7]!==a||t[8]!==l?(R=function(){!S()&&!a&&(r("polarisLogAction")("appBannerImpression",{platform:o("polarisGetAppPlatform").getAppPlatform(),source:l,type:_}),o("PolarisLoggedInCtaLogger").logLoggedInCtaEvent({containermodule:l,ctaType:"app_banner",ctaVersion:d?"instagramlitecarbon":"use_the_app",eventName:"impression"}),i(!0))},L=[d,S,a,l],t[6]=S,t[7]=a,t[8]=l,t[9]=R,t[10]=L):(R=t[9],L=t[10]),m(R,L);var E=r("usePolarisOpenApp")(),k;t[11]!==E||t[12]!==l?(k=function(t){t.preventDefault(),r("polarisLogAction")("appBannerClick",{platform:o("polarisGetAppPlatform").getAppPlatform(),source:l,type:_}),o("PolarisLoggedInCtaLogger").logLoggedInCtaEvent({containermodule:l,ctaType:"app_banner",ctaVersion:d?"instagramlitecarbon":"use_the_app",eventName:"click"}),E()},t[11]=E,t[12]=l,t[13]=k):k=t[13];var I=k,T;t[14]!==l?(T=function(t){t.preventDefault(),r("polarisLogAction")("appBannerDismiss",{platform:o("polarisGetAppPlatform").getAppPlatform(),source:l,type:_}),o("PolarisLoggedInCtaLogger").logLoggedInCtaEvent({containermodule:l,ctaType:"app_banner",ctaVersion:d?"instagramlitecarbon":"use_the_app",eventName:"dismiss"}),y(!0),o("PolarisDismissEntry").setDismissEntry(o("PolarisDismissEntry").USE_THE_APP_LI_BANNER)},t[14]=l,t[15]=T):T=t[15];var D=T,x;t[16]!==I||t[17]!==D||t[18]!==S||t[19]!==b?(x=S()?null:u.jsx("div",{className:"_acc8"+(b==="bottom"?" _abpk":"")+(b!=="bottom"?" _ag6v":""),children:u.jsxs(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",paddingY:2,position:"relative",width:"100%",children:[u.jsx(r("IGDSBox.react"),{padding:1,position:"absolute",right:!0,top:!0,children:u.jsx(r("IGDSIconButton.react"),{onClick:D,children:u.jsx(r("IGDSXPanoFilledIcon.react"),{alt:o("PolarisGenericStrings").CLOSE_TEXT,color:"ig-secondary-text",size:12})})}),u.jsx(r("IGDSBox.react"),{paddingX:6,position:"relative",children:u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:I,children:d?o("PolarisAppInstallStrings").USE_INSTAGRAM_LITE_CARBON_CTA:o("PolarisAppInstallStrings").NEW_CTA_USE_THE_APP})})]})}),t[16]=I,t[17]=D,t[18]=S,t[19]=b,t[20]=x):x=t[20];var $;return t[21]!==x?($=u.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:x}),t[21]=x,t[22]=$):$=t[22],$}l.default=f}),98);
__d("PolarisPaidAdsPixelContainerDeferredV2.react",["deferredLoadComponent","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("deferredLoadComponent")(r("requireDeferred")("PolarisPaidAdsPixelsContainerV2.react").__setRef("PolarisPaidAdsPixelContainerDeferredV2.react"));l.default=e}),98);
__d("PolarisPaidAdsPixelsContainerV2.react",["CometErrorBoundary.react","ControlledRefererIFrame.react","PolarisWebStorage","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=1e3*60*60*24,c=u*7,d="pixel_fire_ts";function m(){var e=o("react-compiler-runtime").c(5),t,n,a,i;if(e[0]===Symbol.for("react.memo_cache_sentinel")){i=Symbol.for("react.early_return_sentinel");e:{if(t=r("PolarisWebStorage").getLocalStorage(),!t){i=null;break e}n=parseInt,a=t.getItem(d)}e[0]=t,e[1]=n,e[2]=a,e[3]=i}else t=e[0],n=e[1],a=e[2],i=e[3];if(i!==Symbol.for("react.early_return_sentinel"))return i;var l=n(a,10);if(Date.now()-l<c)return null;var u;return e[4]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(r("ControlledRefererIFrame.react"),{hidden:!0,onFrameRender:function(){t.setItem(d,Date.now().toString())},src:"/paid_ads/generete_pixels/"},"pixels_iframe"),e[4]=u):u=e[4],u}function p(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(r("CometErrorBoundary.react"),{children:s.jsx(m,{})}),e[0]=t):t=e[0],t}l.default=p}),98);
__d("SentryBlockGAMEEnforcementDialog.react",["IGDSDialogLegacy.react","IGWebBloksApp","InstagramWebBloksDialogContext.react","PolarisNavigationUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo;function m(e){var t=o("react-compiler-runtime").c(20),n=e.modal,a=e.onClose,i=p,l,u;t[0]!==a?(u={onClose:function(t){a==null||a()}},t[0]=a,t[1]=u):u=t[1],l=u;var c=l,d=n==null?void 0:n.action,m=n==null?void 0:n.feedback_appeal_label,_=n==null?void 0:n.message,f=n==null?void 0:n.title,g=n==null?void 0:n.restriction_enrollment_data,h;t[2]!==n?(h=(n==null?void 0:n.feedback_ignore_label)!=null&&{feedback_ignore_label:n.feedback_ignore_label},t[2]=n,t[3]=h):h=t[3];var y;t[4]!==d||t[5]!==m||t[6]!==_||t[7]!==f||t[8]!==g||t[9]!==h?(y=babelHelpers.extends({feedback_action:d,feedback_appeal_label:m,feedback_message:_,feedback_title:f,restriction_enrollment_data:g},h),t[4]=d,t[5]=m,t[6]=_,t[7]=f,t[8]=g,t[9]=h,t[10]=y):y=t[10];var C=y,b;t[11]===Symbol.for("react.memo_cache_sentinel")?(b={"bk.action.navigation.OpenUrl":i,"bk.action.navigation.OpenUrlV2":i,"ig.action.navigation.OpenUrl":i,"ig.action.navigation.OpenUrlSupportsDfa":i},t[11]=b):b=t[11];var v;t[12]!==C?(v=s.jsx(r("IGWebBloksApp"),{actionOverrides:b,appId:"com.bloks.www.instagram.igwb.exp.enforcement.dialog",params:C}),t[12]=C,t[13]=v):v=t[13];var S;t[14]!==c||t[15]!==v?(S=s.jsx(r("InstagramWebBloksDialogContext.react").Provider,{value:c,children:v}),t[14]=c,t[15]=v,t[16]=S):S=t[16];var R;return t[17]!==a||t[18]!==S?(R=s.jsx(r("IGDSDialogLegacy.react"),{onClose:a,children:S}),t[17]=a,t[18]=S,t[19]=R):R=t[19],R}function p(e,t){return o("PolarisNavigationUtils").openURLWithFullPageReload(t)}l.default=m}),98);
__d("PolarisSentryFeedbackDialog.react",["IGWebBloksApp","PolarisAFADDialog.entrypoint","PolarisConfirmDialog.react","PolarisGAMEWriteTimeBlockDialog.entrypoint","PolarisGenericStrings","PolarisNavigationStrings","PolarisReactRedux.react","PolarisSentryFeedbackActions","PolarisSentryFeedbackDispatcher","SentryBlockGAMEEnforcementDialog.react","WebBloksCallback","react","react-compiler-runtime","useIGDSEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef,m=u.useState,p=["open_bio_takedown_restriction","open_account_status_home_screen","open_account_status_game_experience_detail_page","teen_restricted_domain_learn_more","teen_restricted_domain_biography_learn_more"],_=function(t){t.modal&&t.modal.url&&t.modal.action&&(t.modal.action==="report_problem"?t.onReport(t.modal.url):t.modal.action==="open_request_form"&&t.onOpenForm(t.modal.url))};function f(e){var t=o("react-compiler-runtime").c(29),n=e.modal,a=e.onConfirm,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={onClose:y,routeParams:{},routeProps:{}},t[0]=i):i=t[0];var l=r("useIGDSEntryPointDialog")(r("PolarisAFADDialog.entrypoint"),i,void 0),u=l[0];if(!n)return null;if(n.action==="open_login_challenges"){var c;if(t[1]!==n||t[2]!==u){var d=R(n),m=new Map;c=u({webBloksParams:d,webBloksProps:m},h,void 0,!0),t[1]=n,t[2]=u,t[3]=c}else c=t[3];return c}if(p.includes(n.action)){var f;t[4]!==n.action||t[5]!==n.feedback_appeal_label||t[6]!==n.message||t[7]!==n.restriction_enrollment_data||t[8]!==n.title?(f={feedback_action:n.action,feedback_appeal_label:n.feedback_appeal_label,feedback_message:n.message,feedback_title:n.title,restriction_enrollment_data:n.restriction_enrollment_data},t[4]=n.action,t[5]=n.feedback_appeal_label,t[6]=n.message,t[7]=n.restriction_enrollment_data,t[8]=n.title,t[9]=f):f=t[9];var C=f,b;t[10]===Symbol.for("react.memo_cache_sentinel")?(b=new Map([["onClickWebCallback",new(o("WebBloksCallback")).WebBloksCallback(null,null,null,g)]]),t[10]=b):b=t[10];var v=b;switch(n.action){case"open_bio_takedown_restriction":{var S;return t[11]!==C?(S=s.jsx(r("IGWebBloksApp"),{appId:"com.bloks.www.instagram.igwb.exp.enforcement.dialog",externalVariables:v,params:C}),t[11]=C,t[12]=S):S=t[12],S}case"open_account_status_home_screen":case"open_account_status_game_experience_detail_page":{var L;return t[13]!==n?(L=s.jsx(r("SentryBlockGAMEEnforcementDialog.react"),{modal:n}),t[13]=n,t[14]=L):L=t[14],L}case"teen_restricted_domain_learn_more":case"teen_restricted_domain_biography_learn_more":{var E;t[15]!==a?(E=function(){window.open("https://help.instagram.com/652633567266988","_blank"),a()},t[15]=a,t[16]=E):E=t[16];var k;return t[17]!==n.message||t[18]!==n.title||t[19]!==a||t[20]!==E?(k=s.jsx(r("PolarisConfirmDialog.react"),{body:n.message,cancelLabel:o("PolarisGenericStrings").OK_TEXT,confirmLabel:o("PolarisGenericStrings").LEARN_MORE,onClose:a,onConfirm:E,title:n.title}),t[17]=n.message,t[18]=n.title,t[19]=a,t[20]=E,t[21]=k):k=t[21],k}}}var I;t[22]!==e?(I=function(){return _(e)},t[22]=e,t[23]=I):I=t[23];var T;return t[24]!==n.message||t[25]!==n.title||t[26]!==a||t[27]!==I?(T=s.jsx(r("PolarisConfirmDialog.react"),{body:n.message,cancelLabel:o("PolarisGenericStrings").OK_TEXT,confirmLabel:o("PolarisNavigationStrings").REPORT_PROBLEM_TEXT,onClose:a,onConfirm:I,title:n.title}),t[24]=n.message,t[25]=n.title,t[26]=a,t[27]=I,t[28]=T):T=t[28],T}function g(){return window.location.reload()}function h(){var e=r("PolarisSentryFeedbackDispatcher").getInstance();e.allowDispatch(),e.dismissSentryFeedback()}function y(){}function C(e){var t=o("react-compiler-runtime").c(10),n=m(!1),a=n[0],i=n[1],l=d(!1),u;t[0]!==e.enforcement_transparency_instance_identifier?(u={enforcement_transparency_instance_identifier:e.enforcement_transparency_instance_identifier},t[0]=e.enforcement_transparency_instance_identifier,t[1]=u):u=t[1];var p;t[2]===Symbol.for("react.memo_cache_sentinel")?(p={},t[2]=p):p=t[2];var _;t[3]!==u?(_={routeParams:u,routeProps:p},t[3]=u,t[4]=_):_=t[4];var g=r("useIGDSEntryPointDialog")(r("PolarisGAMEWriteTimeBlockDialog.entrypoint"),_,"button",b),h=g[0],y,C;if(t[5]!==h?(y=function(){l.current||(l.current=!0,h({onFallbackNeeded:function(){i(!0)}},function(){l.current=!1}))},C=[h],t[5]=h,t[6]=y,t[7]=C):(y=t[6],C=t[7]),c(y,C),a){var v;return t[8]!==e.rootProps?(v=s.jsx(f,babelHelpers.extends({},e.rootProps)),t[8]=e.rootProps,t[9]=v):v=t[9],v}return null}function b(){return s.jsx("div",{})}b.displayName=b.name+" [from "+i.id+"]";function v(e){var t=o("react-compiler-runtime").c(5),n=e.modal,r=n==null?void 0:n.enforcement_transparency_instance_identifier;if(r!=null){var a;return t[0]!==r||t[1]!==e?(a=s.jsx(C,{enforcement_transparency_instance_identifier:r,rootProps:e}),t[0]=r,t[1]=e,t[2]=a):a=t[2],a}var i;return t[3]!==e?(i=s.jsx(f,babelHelpers.extends({},e)),t[3]=e,t[4]=i):i=t[4],i}function S(e){return{modal:e.sentryFeedback.modal}}function R(e){return{feedback_action:e.action,feedback_appeal_label:e.feedback_appeal_label,feedback_message:e.message,feedback_title:e.title,restriction_enrollment_data:e.restriction_enrollment_data}}function L(e){return{onConfirm:function(){return e(o("PolarisSentryFeedbackActions").dismissSentryFeedback())},onOpenForm:function(n){return e(o("PolarisSentryFeedbackActions").openForm(n))},onReport:function(n){return e(o("PolarisSentryFeedbackActions").reportProblem(n))}}}var E=o("PolarisReactRedux.react").connect(S,L)(v);l.default=E}),98);
__d("VideoChatLinksUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.log=function(t){n("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,n("Banzai").BASIC,t)},t.logVital=function(t){n("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,n("Banzai").VITAL,t)},t.logImmediately=function(t){n("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,{signal:!0},t)},t.clear=function(){return this.$1={},this},t.getData=function(){return babelHelpers.extends({},this.$1)},t.updateData=function(t){return this.$1=babelHelpers.extends({},this.$1,t),this},t.setCallEndReason=function(t){return this.$1.call_end_reason=t,this},t.setCallID=function(t){return this.$1.call_id=t,this},t.setCameraEnabled=function(t){return this.$1.camera_enabled=t,this},t.setClientAppVersion=function(t){return this.$1.client_app_version=t,this},t.setClientLockStatus=function(t){return this.$1.client_lock_status=t,this},t.setClientMonoTimeMs=function(t){return this.$1.client_mono_time_ms=t,this},t.setClienttime=function(t){return this.$1.clienttime=t,this},t.setComponent=function(t){return this.$1.component=t,this},t.setConferenceNameRaw=function(t){return this.$1.conference_name_raw=t,this},t.setCreationAction=function(t){return this.$1.creation_action=t,this},t.setErrorDetails=function(t){return this.$1.error_details=t,this},t.setErrorType=function(t){return this.$1.error_type=t,this},t.setEvent=function(t){return this.$1.event=t,this},t.setEventDetails=function(t){return this.$1.event_details=n("GeneratedLoggerUtils").serializeMap(t),this},t.setEventFireTimestamp=function(t){return this.$1.event_fire_timestamp=t,this},t.setEventFireTimestampOnClient=function(t){return this.$1.event_fire_timestamp_on_client=t,this},t.setExceptionObject=function(t){return this.$1.exception_object=t,this},t.setExperimentsEnabled=function(t){return this.$1.experiments_enabled=n("GeneratedLoggerUtils").serializeMap(t),this},t.setFalcoBatchSequence=function(t){return this.$1.falco_batch_sequence=t,this},t.setFunnelSessionIDRaw=function(t){return this.$1.funnel_session_id_raw=t,this},t.setGroupID=function(t){return this.$1.group_id=t,this},t.setGroupSize=function(t){return this.$1.group_size=t,this},t.setGuestUserID=function(t){return this.$1.guest_user_id=t,this},t.setKickedUserID=function(t){return this.$1.kicked_user_id=t,this},t.setLinkShareTo=function(t){return this.$1.link_share_to=t,this},t.setLocalCallID=function(t){return this.$1.local_call_id=t,this},t.setMediaDevices=function(t){return this.$1.media_devices=t,this},t.setMicrophoneEnabled=function(t){return this.$1.microphone_enabled=t,this},t.setOpenLinkFrom=function(t){return this.$1.open_link_from=t,this},t.setOpenLinkFromAppVersion=function(t){return this.$1.open_link_from_app_version=t,this},t.setReason=function(t){return this.$1.reason=t,this},t.setReferralSurface=function(t){return this.$1.referral_surface=t,this},t.setRoomIDRaw=function(t){return this.$1.room_id_raw=t,this},t.setServerInfoData=function(t){return this.$1.server_info_data=t,this},t.setSource=function(t){return this.$1.source=t,this},t.setStatus=function(t){return this.$1.status=t,this},t.setSurface=function(t){return this.$1.surface=t,this},t.setTargetedUserIds=function(t){return this.$1.targeted_user_ids=n("GeneratedLoggerUtils").serializeVector(t),this},t.setThreadSyncRoomData=function(t){return this.$1.thread_sync_room_data=n("GeneratedLoggerUtils").serializeMap(t),this},t.setThreadType=function(t){return this.$1.thread_type=t,this},t.setUserIdsToBeRemoved=function(t){return this.$1.user_ids_to_be_removed=n("GeneratedLoggerUtils").serializeVector(t),this},t.setVideoCallLinkHashRaw=function(t){return this.$1.video_call_link_hash_raw=t,this},t.setVideoCallLinkIDRaw=function(t){return this.$1.video_call_link_id_raw=t,this},t.setVideoCallLinkIdentifierRaw=function(t){return this.$1.video_call_link_identifier_raw=t,this},t.setVideoCallLinkURLRaw=function(t){return this.$1.video_call_link_url_raw=t,this},t.updateExtraData=function(t){var e=n("nullthrows")(n("GeneratedLoggerUtils").serializeMap(t));return n("GeneratedLoggerUtils").checkExtraDataFieldNames(e,l),this.$1=babelHelpers.extends({},this.$1,e),this},t.addToExtraData=function(t,n){var e={};return e[t]=n,this.updateExtraData(e)},e})(),l={call_end_reason:!0,call_id:!0,camera_enabled:!0,client_app_version:!0,client_lock_status:!0,client_mono_time_ms:!0,clienttime:!0,component:!0,conference_name_raw:!0,creation_action:!0,error_details:!0,error_type:!0,event:!0,event_details:!0,event_fire_timestamp:!0,event_fire_timestamp_on_client:!0,exception_object:!0,experiments_enabled:!0,falco_batch_sequence:!0,funnel_session_id_raw:!0,group_id:!0,group_size:!0,guest_user_id:!0,kicked_user_id:!0,link_share_to:!0,local_call_id:!0,media_devices:!0,microphone_enabled:!0,open_link_from:!0,open_link_from_app_version:!0,reason:!0,referral_surface:!0,room_id_raw:!0,server_info_data:!0,source:!0,status:!0,surface:!0,targeted_user_ids:!0,thread_sync_room_data:!0,thread_type:!0,user_ids_to_be_removed:!0,video_call_link_hash_raw:!0,video_call_link_id_raw:!0,video_call_link_identifier_raw:!0,video_call_link_url_raw:!0};i.default=e}),66);/*FB_PKG_DELIM*/
__d("AsyncTypedRequest",["AsyncRequest"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.setReplaceTransportMarkers(),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.promisePayload=function(n){return e.prototype.promisePayload.call(this,n)},n.setPayloadHandler=function(n){return e.prototype.setPayloadHandler.call(this,n),this},t})(r("AsyncRequest"));l.default=e}),98);
__d("CometFocusTableContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({FocusCell:null,FocusRow:null,FocusTable:null});l.default=u}),98);
__d("FBXHorizonMetaCastingControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/casting/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("FDSButtonGroup.react",["CometFocusTableContext","CometRow.react","CometRowItem.react","FDSButton.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","testid"],s=["ref","testid"],u,c=u||(u=o("react")),d=u.useContext,m={resetFlexBasis:{flexBasis:"xdl72j9",$$css:!0}},p="secondary";function _(e){var t=d(r("CometFocusTableContext")),n=t.FocusCell,o=e.children;return n!=null?c.jsx(n,{children:o}):o}_.displayName=_.name+" [from "+i.id+"]";function f(t){var n=t.align,o=n===void 0?"justify":n,a=t.direction,i=a===void 0?"forward":a,l=t.expanding,u=l===void 0?!1:l,d=t.paddingHorizontal,f=t.paddingTop,g=t.paddingVertical,h=t.primary,y=t.secondary,C=t.secondaryIcon,b=t.secondaryIconGroup,v=t.size,S=t.verticalAlign,R=t.wrap,L=R===void 0?"none":R,E=[],k=[],I=null;if(h!=null){var T=h.ref,D=h.testid,x=babelHelpers.objectWithoutPropertiesLoose(h,e);I=c.jsx(_,{children:c.jsx(r("FDSButton.react"),babelHelpers.extends({},x,{ref:T,size:v,testid:void 0}))}),E.push({hidden:c.jsx(r("FDSButton.react"),babelHelpers.extends({},x,{disabled:!0,padding:"normal",size:v})),visible:I})}if(y!=null){var $=y.ref,P=y.testid,N=babelHelpers.objectWithoutPropertiesLoose(y,s);E.push({hidden:c.jsx(r("FDSButton.react"),babelHelpers.extends({},N,{disabled:!0,padding:"normal",size:v,type:"secondary"})),visible:c.jsx(_,{children:c.jsx(r("FDSButton.react"),babelHelpers.extends({},N,{ref:$,size:v,testid:void 0,type:"secondary"}))})})}else if(C!=null){var M;k.push(c.jsx(r("CometRowItem.react"),{children:c.jsx(_,{children:c.jsx(r("FDSButton.react"),babelHelpers.extends({},C,{labelIsHidden:!0,size:v,type:(M=C.type)!=null?M:p}))})},"secondary-icon"))}else if(b!=null){var w,A,F=b.primaryIcon,O=b.secondaryIcon;k.push(c.jsx(r("CometRowItem.react"),{children:c.jsx(_,{children:c.jsx(r("FDSButton.react"),babelHelpers.extends({},F,{labelIsHidden:!0,size:v,type:(w=F.type)!=null?w:p}))})},"secondary-icon-1"),c.jsx(r("CometRowItem.react"),{children:c.jsx(_,{children:c.jsx(r("FDSButton.react"),babelHelpers.extends({},O,{labelIsHidden:!0,size:v,type:(A=O.type)!=null?A:p}))})},"secondary-icon-2"))}var B=E.map(function(e,t){return c.jsx(r("CometRowItem.react"),{expanding:o==="justify",xstyle:m.resetFlexBasis,children:E.map(function(e,n){return c.jsx(c.Fragment,{children:t!==n?c.jsx("div",{"aria-hidden":!0,className:"xqtp20y x6ikm8r x10wlt62 xlshs6z",children:e.hidden}):e.visible},n)})},t)}),W=I!=null?c.jsx(r("CometRowItem.react"),{expanding:o==="justify",xstyle:m.resetFlexBasis,children:I},"primary"):null,q=[W].concat(k),U=E.length===2,V=U||I==null?B:q,H=i==="forward"?V:V.reverse();return c.jsx(r("CometRow.react"),{align:o,expanding:u,paddingHorizontal:d,paddingTop:f,paddingVertical:g,spacing:8,verticalAlign:S,wrap:L,children:H})}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),98);
__d("GeneratedLoggerUtils",["invariant","Banzai","JstlMigrationFalcoEvent","getDataWithLoggerOptions","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=window.location.search.indexOf("showlog")>-1;function s(t,r,o,a){var i=n("getDataWithLoggerOptions")(r,a),l=t.split(":")[0],s=t.split(":")[1];l=="logger"?n("JstlMigrationFalcoEvent").log(function(){return{logger_config_name:s,payload:i}}):n("Banzai").post(t,i,o);var u=e||s==="EPFrontendLoggerConfig"&&n("gkx")("3917");if(u&&s==="EPFrontendLoggerConfig"&&i)var c=i.event_name||"unknown",d=i.app||"unknown",m=i.surface||"",p=m?" ["+m+"]":"",_=Date.now(),f=new Date(_).toTimeString().split(" ")[0],g=c.toLowerCase(),h=g.includes("rendered")||g.includes("error")||g.includes("view_metric_results")||g.includes("statsig_result_difference")||g.includes("request_interrupted"),y=h?"[EPFrontend]":"[EPFrontend :click:]"}var u={log:s,serializeVector:function(t){if(!t||Array.isArray(t))return t;if(t.toArray){var e=t;return e.toArray()}if(typeof t=="object"&&t[typeof Symbol=="function"?Symbol.iterator:"@@iterator"])return Array.from(t);l(0,3874,t)},serializeMap:function(t){if(!t)return t;if(t.toJS){var e=t;return e.toJS()}if(typeof t=="object"&&t[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]){var n=t,r={};for(var o of n)r[o[0]]=o[1];return r}if(Object.prototype.toString.call(t)==="[object Object]")return t;l(0,3875,t)},checkExtraDataFieldNames:function(t,n){Object.keys(t).forEach(function(e){!Object.prototype.hasOwnProperty.call(n,e)||l(0,3876,e)})},warnForInvalidFieldNames:function(t,n,r,o){},throwIfNull:function(t,n){return t||l(0,3877,n),t}};a.exports=u}),null);
__d("HorizonMetaCastingPaths",[],(function(t,n,r,o,a,i){var e=Object.freeze({mainPath:"/casting/",allPaths:["/Casting/","/CASTING/","/cast/","/Cast/","/CAST/","/webcast/","/Webcast/","/WEBCAST/","/webcasting/","/Webcasting/","/WEBCASTING/","/casting/"]});i.default=e}),66);
__d("HorizonMetaIsCastingRoute",["FBXHorizonMetaCastingControllerRouteBuilder","HorizonMetaCastingPaths","URI","isHorizonDotMetaDotComURI"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=(e||(e=r("URI"))).getRequestURI(),n=r("FBXHorizonMetaCastingControllerRouteBuilder").buildUri({});if(!r("isHorizonDotMetaDotComURI")(t))return!1;var o=r("HorizonMetaCastingPaths").allPaths,a=[].concat(o,[n.getPath()]),i=t.addTrailingSlash().getPath();return a.includes(i)}var u={getIsCastingRoute:s};l.default=u}),98);
__d("IGDOverLSMqttChannel",["CurrentUser","Env","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s;r("MqttEnvInitializer").initialize();function u(e){o("MqttEnv").setIsUserLoggedInNow(r("CurrentUser").isLoggedIn);var t=r("CurrentUser").getAppID()==null?936619743392459:Number(r("CurrentUser").getAppID());return new(r("MqttChannel"))({appId:t,capabilities:r("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:r("MqttWebConfig").clientCapabilities,clientType:"cookie_auth",deviceId:e,endpoint:(s||(s=r("Env"))).ig_mqtt_wss_endpoint||"wss://edge-chat.instagram.com/chat",initialSubscribedTopics:r("MqttWebConfig").subscribedTopics,phpOverride:r("MqttWebConfig").hostNameOverride,pollingEndpoint:(s||(s=r("Env"))).ig_mqtt_polling_endpoint||"https://edge-chat.instagram.com/mqtt/pull",userFbid:r("CurrentUser").getPossiblyNonFacebookUserID()})}var c=null,d;function m(e){c==null&&(c=u(e));var t=c;return d==null||d(t),t}function p(){return new(e||(e=n("Promise")))(function(e){c?e(m()):d=function(n){e(n)}})}function _(){c!=null&&(c.shutdown(),c=null)}l.getInstance=m,l.waitAndGetInstance=p,l.shutdownAndClear=_}),98);
__d("LSDatabaseSingletonLazyWrapper",["LSDatabaseSingleton"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton}l.default=s}),98);
__d("LSLocalizedStrings",["fbt"],(function(t,n,r,o,a,i,l,s){var e=function(t,n){return""},u=e;l.default=u}),98);
__d("LSLocalizedStringsV2",["fbt","I64"],(function(t,n,r,o,a,i,l,s){var e,u=function(n,r){switch(n){case"2285622730":return s._(/*BTDS*/"O Messenger est\u00e1 offline");case"1919524925":return s._(/*BTDS*/"Verifique sua conex\u00e3o. Tudo o que voc\u00ea fizer nas conversas enquanto estiver offline, como enviar mensagens ou alterar as cores da conversa, ser\u00e1 conclu\u00eddo quando voc\u00ea se conectar \u00e0 internet.");case"14617150":return s._(/*BTDS*/"Usu\u00e1rio do Facebook");case"460740012":return s._(/*BTDS*/"Sua mensagem n\u00e3o foi enviada.");case"2353844300":return s._(/*BTDS*/"Voc\u00ea n\u00e3o pode responder a essa conversa.");case"2987332812":return s._(/*BTDS*/"Voc\u00ea excluiu uma mensagem.");case"1530605193":return s._(/*BTDS*/"{user_name} excluiu uma mensagem.",[s._param("user_name",r(0))]);case"2975370389":return s._(/*BTDS*/"Voc\u00ea denunciou essa mensagem");case"3921131020":return s._(/*BTDS*/"Mensagem oculta");case"1899892426":return s._(/*BTDS*/"Voc\u00ea subiu uma mensagem.");case"3287869262":return s._(/*BTDS*/"{user_name} subiu a mensagem.",[s._param("user_name",r(0))]);case"1890485478":return s._(/*BTDS*/"Voc\u00ea");case"1299547062":return s._(/*BTDS*/"Voc\u00ea enviou uma figurinha.");case"3621454483":return s._(/*BTDS*/"{user_name} enviou uma figurinha.",[s._param("user_name",r(0))]);case"3948960063":return s._(/*BTDS*/"Voc\u00ea enviou um anexo.");case"1249692047":return s._(/*BTDS*/"{user_name} enviou um anexo.",[s._param("user_name",r(0))]);case"2106510577":return s._(/*BTDS*/"Voc\u00ea enviou uma foto.");case"3960370133":return s._(/*BTDS*/"{user_name} enviou uma foto",[s._param("user_name",r(0))]);case"3798396796":return s._(/*BTDS*/"Voc\u00ea enviou um GIF do {app_name}.",[s._param("app_name",r(0))]);case"3388601579":return s._(/*BTDS*/"{user_name} enviou um GIF do {app_name}.",[s._param("user_name",r(0)),s._param("app_name",r(1))]);case"1556712457":return s._(/*BTDS*/"Voc\u00ea enviou um GIF.");case"3601791933":return s._(/*BTDS*/"{user_name} enviou um GIF.",[s._param("user_name",r(0))]);case"3759817031":return s._(/*BTDS*/"Voc\u00ea enviou um v\u00eddeo.");case"2934729541":return s._(/*BTDS*/"{user_name} enviou um v\u00eddeo.",[s._param("user_name",r(0))]);case"392493418":return s._(/*BTDS*/"Voc\u00ea enviou uma mensagem de voz.");case"4085467454":return s._(/*BTDS*/"{user_name} enviou uma mensagem de voz.",[s._param("user_name",r(0))]);case"2738683656":return s._(/*BTDS*/"Voc\u00ea enviou uma figurinha de selfie.");case"2996525642":return s._(/*BTDS*/"{user_name} enviou uma figurinha de selfie.",[s._param("user_name",r(0))]);case"2326868239":return s._(/*BTDS*/"Voc\u00ea compartilhou um post.");case"1001986796":return s._(/*BTDS*/"{user_name} compartilhou um post.",[s._param("user_name",r(0))]);case"2285746939":return s._(/*BTDS*/"Voc\u00ea respondeu a um story.");case"3759448420":return s._(/*BTDS*/"{user_name} respondeu a um story.",[s._param("user_name",r(0))]);case"3719716921":return s._(/*BTDS*/"Voc\u00ea enviou um story.");case"284944921":return s._(/*BTDS*/"{user_name} enviou um story.",[s._param("user_name",r(0))]);case"3322002377":return s._(/*BTDS*/"voc\u00ea mencionou {user_name} no seu story",[s._param("user_name",r(0))]);case"2486550278":return s._(/*BTDS*/"mencionou voc\u00ea no story");case"3557790945":return s._(/*BTDS*/"Voc\u00ea enviou um reel.");case"3756846086":return s._(/*BTDS*/"{user_name} enviou um reel.",[s._param("user_name",r(0))]);case"780378803":return s._(/*BTDS*/"Voc\u00ea enviou um v\u00eddeo do IGTV.");case"3918212613":return s._(/*BTDS*/"{user_name} enviou um v\u00eddeo do IGTV.",[s._param("user_name",r(0))]);case"3161890215":return s._(/*BTDS*/"Voc\u00ea compartilhou uma loja.");case"863428456":return s._(/*BTDS*/"{user_name} compartilhou uma loja.",[s._param("user_name",r(0))]);case"2716405471":return s._(/*BTDS*/"Voc\u00ea enviou um perfil.");case"3909474073":return s._(/*BTDS*/"{user_name} enviou um perfil.",[s._param("user_name",r(0))]);case"1522141193":return s._(/*BTDS*/"Voc\u00ea enviou um destaque dos stories.");case"2804766375":return s._(/*BTDS*/"{user_name} enviou um destaque dos stories.",[s._param("user_name",r(0))]);case"2051792592":return s._(/*BTDS*/"Voc\u00ea enviou um post.");case"3686831438":return s._(/*BTDS*/"{user_name} enviou um post.",[s._param("user_name",r(0))]);case"658804221":return s._(/*BTDS*/"Voc\u00ea enviou um post: {$xma_title}.",[s._param("$xma_title",r(0))]);case"3431774666":return s._(/*BTDS*/"{user_name} enviou um post: {$xma_title}.",[s._param("user_name",r(0)),s._param("$xma_title",r(1))]);case"1390682014":return s._(/*BTDS*/"Voc\u00ea enviou um post de {$xma_author}.",[s._param("$xma_author",r(0))]);case"3338521342":return s._(/*BTDS*/"{user_name} enviou um post de {$xma_author}.",[s._param("user_name",r(0)),s._param("$xma_author",r(1))]);case"1247108605":return s._(/*BTDS*/"Voc\u00ea mencionou {receiver_name} no seu story.",[s._param("receiver_name",r(0))]);case"2966876020":return s._(/*BTDS*/"{user_name} mencionou {receiver_name} no seu story.",[s._param("user_name",r(0)),s._param("receiver_name",r(1))]);case"1056933543":return s._(/*BTDS*/"Voc\u00ea se mencionou no story dele(a).");case"1167688664":return s._(/*BTDS*/"{user_name} mencionou voc\u00ea no story dele(a).",[s._param("user_name",r(0))]);case"772459202":return s._(/*BTDS*/"Voc\u00ea enviou uma atualiza\u00e7\u00e3o do jogo.");case"3546068912":return s._(/*BTDS*/"{user_name} enviou uma atualiza\u00e7\u00e3o do jogo.",[s._param("user_name",r(0))]);case"2459540079":return s._(/*BTDS*/"Voc\u00ea respondeu ao seu story.");case"1596311291":return s._(/*BTDS*/"{user_name} respondeu ao seu story.",[s._param("user_name",r(0))]);case"2253698324":return s._(/*BTDS*/"Voc\u00ea respondeu ao story dessa pessoa.");case"4269602817":return s._(/*BTDS*/"{user_name} respondeu ao pr\u00f3prio story.",[s._param("user_name",r(0))]);case"2552112149":return s._(/*BTDS*/"Voc\u00ea enviou um link de evento.");case"969211470":return s._(/*BTDS*/"{user_name} enviou um link de evento.",[s._param("user_name",r(0))]);case"1257875092":return s._(/*BTDS*/"Voc\u00ea compartilhou um reel.");case"692355749":return s._(/*BTDS*/"{user_name} compartilhou um reel.",[s._param("user_name",r(0))]);case"1760384120":return s._(/*BTDS*/"Voc\u00ea enviou um reel: {$xma_title}.",[s._param("$xma_title",r(0))]);case"3421518928":return s._(/*BTDS*/"{user_name} enviou um reel: {$xma_title}.",[s._param("user_name",r(0)),s._param("$xma_title",r(1))]);case"1843708631":return s._(/*BTDS*/"Voc\u00ea enviou um reel de {$xma_author}.",[s._param("$xma_author",r(0))]);case"493478192":return s._(/*BTDS*/"{user_name} enviou um reel de {$xma_author}.",[s._param("user_name",r(0)),s._param("$xma_author",r(1))]);case"785694792":return s._(/*BTDS*/"Voc\u00ea marcou {receiver_name} no seu post.",[s._param("receiver_name",r(0))]);case"2625447567":return s._(/*BTDS*/"{user_name} marcou {receiver_name} no seu post.",[s._param("user_name",r(0)),s._param("receiver_name",r(1))]);case"3982213805":return s._(/*BTDS*/"Voc\u00ea se marcou no post dele(a).");case"464916028":return s._(/*BTDS*/"{user_name} marcou voc\u00ea no pr\u00f3prio post.",[s._param("user_name",r(0))]);case"411761881":return s._(/*BTDS*/"Voc\u00ea enviou um link.");case"3395044660":return s._(/*BTDS*/"{user_name} enviou um link.",[s._param("user_name",r(0))]);case"1338772678":return s._(/*BTDS*/"Voc\u00ea {$external_xma_link_snippet}.",[s._param("$external_xma_link_snippet",r(0))]);case"2717706487":return s._(/*BTDS*/"{user_name} {$external_xma_link_snippet}.",[s._param("user_name",r(0)),s._param("$external_xma_link_snippet",r(1))]);case"2973334239":return s._(/*BTDS*/"Voc\u00ea enviou uma localiza\u00e7\u00e3o.");case"3616471048":return s._(/*BTDS*/"{user_name} enviou uma localiza\u00e7\u00e3o.",[s._param("user_name",r(0))]);case"476264474":return s._(/*BTDS*/"Voc\u00ea compartilhou um cart\u00e3o de contato.");case"3124021488":return s._(/*BTDS*/"{user_name} compartilhou um cart\u00e3o de contato.",[s._param("user_name",r(0))]);case"3471188061":return s._(/*BTDS*/"Voc\u00ea enviou uma lembran\u00e7a.");case"2776822462":return s._(/*BTDS*/"{user_name} enviou uma lembran\u00e7a.",[s._param("user_name",r(0))]);case"1739999037":return s._(/*BTDS*/"A liga\u00e7\u00e3o de \u00e1udio foi encerrada.");case"3373597599":return s._(/*BTDS*/"A liga\u00e7\u00e3o de v\u00eddeo foi encerrada.");case"259473449":return s._(/*BTDS*/"{user_name} perdeu sua liga\u00e7\u00e3o de \u00e1udio.",[s._param("user_name",r(0))]);case"1338912959":return s._(/*BTDS*/"Voc\u00ea perdeu uma liga\u00e7\u00e3o de \u00e1udio de {user_name}.",[s._param("user_name",r(0))]);case"812940701":return s._(/*BTDS*/"{user_name} perdeu sua liga\u00e7\u00e3o de v\u00eddeo.",[s._param("user_name",r(0))]);case"1099878966":return s._(/*BTDS*/"Voc\u00ea perdeu uma liga\u00e7\u00e3o de v\u00eddeo de {user_name}.",[s._param("user_name",r(0))]);case"3443782102":return s._(/*BTDS*/"A liga\u00e7\u00e3o de \u00e1udio foi iniciada.");case"618905030":return s._(/*BTDS*/"A liga\u00e7\u00e3o de v\u00eddeo come\u00e7ou.");case"2470414797":return s._(/*BTDS*/"Liga\u00e7\u00e3o de \u00e1udio em grupo perdida");case"1306024833":return s._(/*BTDS*/"Liga\u00e7\u00e3o de v\u00eddeo em grupo perdida");case"2135145355":return s._(/*BTDS*/"Voc\u00ea enviou uma localiza\u00e7\u00e3o atual.");case"3603511704":return s._(/*BTDS*/"{user_name} enviou uma localiza\u00e7\u00e3o atual.",[s._param("user_name",r(0))]);case"705614308":return s._(/*BTDS*/"_j{\"*\":\"Voc\\u00ea enviou {number} fotos.\",\"_1\":\"Voc\\u00ea enviou uma foto.\"}",[s._plural((e||(e=o("I64"))).to_float(r(0)),"number")]);case"313217698":return s._(/*BTDS*/"_j{\"*\":\"{user_name} enviou {number} fotos.\",\"_1\":\"{user_name} enviou uma foto.\"}",[s._plural((e||(e=o("I64"))).to_float(r(1)),"number"),s._param("user_name",r(0))]);case"3558654267":return s._(/*BTDS*/"Voc\u00ea enviou v\u00e1rios anexos.");case"3422266740":return s._(/*BTDS*/"{user_name} enviou v\u00e1rios anexos.",[s._param("user_name",r(0))]);case"1907280305":return s._(/*BTDS*/"Responder a {other_user}",[s._param("other_user",r(0))]);case"1112375422":return s._(/*BTDS*/"Responder a {other_user} e outras pessoas",[s._param("other_user",r(0))]);case"3575257287":return s._(/*BTDS*/"{num_messages} novas mensagens",[s._param("num_messages",r(0))]);case"1212518911":return s._(/*BTDS*/"1 conversa");case"171771714":return s._(/*BTDS*/"{num_channels} conversas",[s._param("num_channels",r(0))]);case"763456386":return s._(/*BTDS*/"1 conversa n\u00e3o lida");case"3313483565":return s._(/*BTDS*/"{num_messages} conversas n\u00e3o lidas",[s._param("num_messages",r(0))]);case"1416259530":return s._(/*BTDS*/"1 canal");case"1681736754":return s._(/*BTDS*/"{num_channels} canais",[s._param("num_channels",r(0))]);case"3802288555":return s._(/*BTDS*/"1 canal n\u00e3o lido");case"1420387436":return s._(/*BTDS*/"{num_messages} canais n\u00e3o lidos",[s._param("num_messages",r(0))]);case"612154886":return s._(/*BTDS*/"_j{\"*\":\"{number} novas amizades\",\"_1\":\"1 nova amizade\"}",[s._plural((e||(e=o("I64"))).to_float(r(0)),"number")]);case"3321340421":return s._(/*BTDS*/"{other_user} enviou uma mensagem.",[s._param("other_user",r(0))]);case"3199643703":return s._(/*BTDS*/"Aprova\u00e7\u00e3o pendente");case"3307909120":return s._(/*BTDS*/"Vou");case"845728829":return s._(/*BTDS*/"Tenho interesse");case"2022991544":return s._(/*BTDS*/"N\u00e3o tenho interesse");case"4285882723":return s._(/*BTDS*/"Talvez");case"3089015955":return s._(/*BTDS*/"N\u00e3o posso ir");case"2662271323":return s._(/*BTDS*/"Responder");case"1531706844":return s._(/*BTDS*/"Pedir para participar");case"3989800917":return s._(/*BTDS*/"Ver tudo");case"3387070852":return s._(/*BTDS*/"{receiver_name} n\u00e3o aceitou seu pagamento de US$ {amount} em 7 dias, portanto, o valor foi devolvido para voc\u00ea.",[s._param("receiver_name",r(0)),s._param("amount",r(1))]);case"2779070802":return s._(/*BTDS*/"{sender_name} fez uma atualiza\u00e7\u00e3o. Voc\u00ea est\u00e1 recebendo atualiza\u00e7\u00f5es sobre {game_name} nesta thread.",[s._param("sender_name",r(0)),s._param("game_name",r(1))]);case"3748497596":return s._(/*BTDS*/"Voc\u00ea est\u00e1 recebendo atualiza\u00e7\u00f5es sobre {game_name} nesta thread.",[s._param("game_name",r(0))]);case"1346982727":return s._(/*BTDS*/"As pessoas nesta thread est\u00e3o jogando {game_name}. As mensagens foram desativadas para voc\u00ea.",[s._param("game_name",r(0))]);case"3688076717":return s._(/*BTDS*/"{sender_name} fez uma atualiza\u00e7\u00e3o.",[s._param("sender_name",r(0))]);case"194227859":return s._(/*BTDS*/"Voc\u00ea come\u00e7ou uma amizade com {name}. Voc\u00ea pode desativar as conversas com novos amigos quando quiser em Configura\u00e7\u00f5es.",[s._param("name",r(0))]);case"3144899881":return s._(/*BTDS*/"Voc\u00ea come\u00e7ou uma amizade com {name}.",[s._param("name",r(0))]);case"3246663081":return s._(/*BTDS*/"Voc\u00eas agora est\u00e3o conectados no Messenger. Voc\u00ea pode desativar as conversas com novos amigos quando quiser em Configura\u00e7\u00f5es.");case"967111183":return s._(/*BTDS*/"Voc\u00eas agora est\u00e3o conectados no Messenger.");case"4202164190":return s._(/*BTDS*/"{sender_name} leu o QR code de {receiver_name} para iniciar esta conversa.",[s._param("sender_name",r(0)),s._param("receiver_name",r(1))]);case"2421884758":return s._(/*BTDS*/"Voc\u00ea subiu sua mensagem");case"2676961947":return s._(/*BTDS*/"Voc\u00ea subiu a mensagem de {participant_name}",[s._param("participant_name",r(0))]);case"3298086032":return s._(/*BTDS*/"{sender_name} subiu sua mensagem",[s._param("sender_name",r(0))]);case"3873263038":return s._(/*BTDS*/"{sender_name} subiu a pr\u00f3pria mensagem",[s._param("sender_name",r(0))]);case"2616853333":return s._(/*BTDS*/"{sender_name} subiu a mensagem de {reply_source_sender_name}",[s._param("sender_name",r(0)),s._param("reply_source_sender_name",r(1))]);case"4002265907":return s._(/*BTDS*/"Voc\u00ea respondeu \u00e0 sua pr\u00f3pria mensagem");case"2663996736":return s._(/*BTDS*/"Voc\u00ea respondeu a {participant_name}",[s._param("participant_name",r(0))]);case"2868699317":return s._(/*BTDS*/"{sender_name} respondeu a voc\u00ea",[s._param("sender_name",r(0))]);case"2688620547":return s._(/*BTDS*/"{sender_name} respondeu a si mesmo(a)",[s._param("sender_name",r(0))]);case"3544071775":return s._(/*BTDS*/"{sender_name} respondeu a {reply_source_sender_name}",[s._param("sender_name",r(0)),s._param("reply_source_sender_name",r(1))]);case"2856734260":return s._(/*BTDS*/"Adicionar");case"3569041084":return s._(/*BTDS*/"Voc\u00ea");case"1640318912":return s._(/*BTDS*/"{user} turned on disappearing messages.",[s._param("user",r(0))]);case"2814174244":return s._(/*BTDS*/"As mensagens tempor\u00e1rias foram ativadas.");case"3475381825":return s._(/*BTDS*/"{preamble} Messages will disappear {time} after they're sent.",[s._param("preamble",r(0)),s._param("time",r(1))]);case"2794389366":return s._(/*BTDS*/"_j{\"*\":\"{number} seconds\",\"_1\":\"1 second\"}",[s._plural((e||(e=o("I64"))).to_float(r(0)),"number")]);case"2528404281":return s._(/*BTDS*/"_j{\"*\":\"{number} minutes\",\"_1\":\"1 minute\"}",[s._plural((e||(e=o("I64"))).to_float(r(0)),"number")]);case"3691614683":return s._(/*BTDS*/"_j{\"*\":\"{number} hours\",\"_1\":\"1 hour\"}",[s._plural((e||(e=o("I64"))).to_float(r(0)),"number")]);case"2356292598":return s._(/*BTDS*/"{user} turned off disappearing messages.",[s._param("user",r(0))]);case"3184734723":return s._(/*BTDS*/"As mensagens tempor\u00e1rias foram desativadas.");case"274842160":return s._(/*BTDS*/"You cleared the chat history");case"2352696798":return s._(/*BTDS*/"Usu\u00e1rio do Workplace");case"261320435":return s._(/*BTDS*/"Bate-papo paralelo");case"1369731110":return s._(/*BTDS*/"Usu\u00e1rio do Facebook");case"216075330":return s._(/*BTDS*/"\u00c1udio de {user_name}",[s._param("user_name",r(0))]);case"3093868587":return s._(/*BTDS*/"Foto de {user_name}",[s._param("user_name",r(0))]);case"1965569930":return s._(/*BTDS*/"V\u00eddeo de {user_name}",[s._param("user_name",r(0))]);case"3981943156":return s._(/*BTDS*/"Figurinha de {user_name}",[s._param("user_name",r(0))]);case"2071149394":return s._(/*BTDS*/"GIF de {user_name}",[s._param("user_name",r(0))]);case"2414298738":return s._(/*BTDS*/"Anexo de {user_name}",[s._param("user_name",r(0))]);case"4050223159":return s._(/*BTDS*/"Voc\u00ea criou um bate-papo paralelo");default:return""}},c=u;l.default=c}),226);
__d("LSLocalize",["I64","LSLocalizedStrings","LSLocalizedStringsV2","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("LSLocalizedStringsV2");function u(e){s=e}function c(t,n){var r=(e||(e=o("I64"))).to_string(t),a=function(t){return n&&n[t]||""};return s(r,a).toString()}function d(t,n){var a=(e||(e=o("I64"))).to_string(t),i=function(t){return n&&n[t]||""};return r("LSLocalizedStrings")(a,i).toString()}function m(e,t){return o("LSSynchronousPromise").makeSynchronousPromise(d(e,t))}function p(e,t){return o("LSSynchronousPromise").makeSynchronousPromise(c(e,t))}l.setStringFactoryV2_TEST_ONLY=u,l.localizeV1Async=m,l.localizeV2Async=p}),98);
__d("LSMessageRenderingType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,NON_COLLAPSIBLE_ADMIN_MESSAGE:1,HIDDEN:2,RICH_TEXT_COMMON_MARK:3});i.default=e}),66);
__d("LSQuickReplyType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,HORIZONTAL:1,VERTICAL:2});i.default=e}),66);
__d("LSReplyMessageStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,VALID:1,DELETED:2,TEMPORARY_UNAVAILABLE:3,EXPIRED:4});i.default=e}),66);
__d("MWSCastingCenterDeviceMediaStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["LAUNCHING","LAUNCHED","DEVICE_UNAVAILABLE","CONTENT_UNAVAILABLE","NETWORK_FAILURE","FAILED"]);i.DeviceMediaStatus=e}),66);
__d("MWSCastingCenterUtils",["fbt","MWSCastingCenterDeviceMediaStatus","UserAgent","formatDate"],(function(t,n,r,o,a,i,l,s){"use strict";var e=3e4;function u(){return r("UserAgent").isBrowser("Chrome for iOS")}function c(e){var t=e.mediaType,n=e.status,a=e.time,i="warning",l=t==="LAUNCH_APP"?s._(/*BTDS*/"Abrindo..."):s._(/*BTDS*/"Abrindo...");if(n!=null)switch(n){case o("MWSCastingCenterDeviceMediaStatus").DeviceMediaStatus.LAUNCHING:break;case o("MWSCastingCenterDeviceMediaStatus").DeviceMediaStatus.LAUNCHED:i="active",l=t==="LAUNCH_APP"?s._(/*BTDS*/"Aberto \u00e0(s) {time}",[s._param("time",r("formatDate")(a,"g:i A"))]):s._(/*BTDS*/"Aberto \u00e0(s) {time}",[s._param("time",r("formatDate")(a,"g:i A"))]);break;case o("MWSCastingCenterDeviceMediaStatus").DeviceMediaStatus.DEVICE_UNAVAILABLE:i="error",l=s._(/*BTDS*/"Dispositivo n\u00e3o dispon\u00edvel");break;case o("MWSCastingCenterDeviceMediaStatus").DeviceMediaStatus.CONTENT_UNAVAILABLE:i="error",l=t==="LAUNCH_APP"?s._(/*BTDS*/"App n\u00e3o instalado"):s._(/*BTDS*/"Arquivo ausente");break;case o("MWSCastingCenterDeviceMediaStatus").DeviceMediaStatus.NETWORK_FAILURE:i="error",l=s._(/*BTDS*/"Falha da solicita\u00e7\u00e3o de rede");break;case o("MWSCastingCenterDeviceMediaStatus").DeviceMediaStatus.FAILED:i="error",l=s._(/*BTDS*/"Erro inesperado");break}return{statusIndicator:i,statusText:l}}l.REQUEST_TIMEOUT_MS=e,l.isBrowserSupportedForMobileManagedCasting=u,l.getMediaStatusIndicator=c}),226);
__d("OCCastingZenonUtils",["UserAgent","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return t==="Connected"||t==="Connecting"};function s(){return r("gkx")("1930")||r("gkx")("25763")&&(r("UserAgent").isBrowser("Chrome for iOS")||r("UserAgent").isBrowser("Mobile Safari"))}l.hasCallStarted=e,l.isBrowserSupportedForMobileWebCasting=s}),98);
__d("ZenonAppProvider",["HorizonMetaIsCastingRoute","IGDWebUtils","ZenonActorHooks"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("IGDWebUtils").isInstagramWebSupportedApp(b())}function s(){return v(b())}function u(){return b()===351299233827255}function c(){return b()===0x74ed7b6f24452}function d(){return b()===518491789147974}function m(){var e=b();return e===0x9d143786e51a6||e===0x399e2d8359725||e===351299233827255&&r("HorizonMetaIsCastingRoute").getIsCastingRoute()}function p(){var e=b();return e===0xc7269b363f3c}function _(){var e=b();return e===772021112871879||e===0x7e36f3fcc43bc}function f(){var e=b();return e===949958857019662||e===0x4d31ba8e7e89d||e===445865345227527}function g(){var e=b();return e===514771569228061||e===436761779744620||e===349974259839838}function h(){var e=b();return e===0x70127cc7da0a0}function y(){return b()===0x5a31088e0c758}function C(){return f()||h()||p()}function b(){var e=o("ZenonActorHooks").ZenonActor.getAppID();return e==null?null:Number(e)}function v(e){return e!=null?e===0x9d143786e51a6||e===0x399e2d8359725||e===351299233827255:!1}l.isInstagramApp=e,l.isOculusApp=s,l.isHorizonApp=u,l.isHorizonWorldsApp=c,l.isCastingCenterApp=d,l.isOculusCastingSite=m,l.isMDCApp=p,l.isMessengerWebApp=_,l.isMetaAI=f,l.isBizWebApp=g,l.isWidgetLiveChatApp=h,l.isWorkplace=y,l.shouldSupportRTPSession=C}),98);
__d("ZenonActorHooks",["CurrentUser","FBLogger","ZenonApp","ZenonAppProvider","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=null,s=null,u=null,c=!1,d=!1,m=new Set;function p(e,t){t===void 0&&(t="Fallback to CurrentUser"),m.has(e)||(r("FBLogger")("rtc_www").blameToPreviousFrame().info("ZenonActor.%s - %s",e,t),m.add(e))}function _(){return[g.getID(),function(t){p("useZenonActor:setter","This setter should not be used as Zenon should currently doesn't allow switching Actor"),e=t}]}function f(t,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!1),e!==null){if(d)return;p("initZenonActor","ZenonActor is being reinitalized. This may indicate unneccessary ZenonActorProvider's to RelayEnvironmentProvider's in the component tree.")}d=d||n,c=c||r,typeof t=="string"||typeof t=="number"?(e=t.toString(),s=null,u=null):(t==null?void 0:t.actorID)!=null&&(e=t.actorID.toString(),s=t.name,u=t.shortName)}var g={getAccountID:function(){return g.isInstagramUser()?r("CurrentUser").getEIMU():g.isOculusCastingUser()?r("CurrentUser").getEOCPU():g.isMDCUser()?g.getMDCUserID():r("CurrentUser").getAccountID()},getAppID:function(){return g.isLiveChatOnlyPerson()?String(0x70127cc7da0a0):r("CurrentUser").getAppID()},getID:function(){return g.isInstagramUser()?r("CurrentUser").getEIMU():g.isOculusCastingUser()?r("CurrentUser").getEOCPU():g.isMDCUser()?g.getMDCUserID():g.isHorizonWebUser()?r("CurrentUser").getEPOU():g.isKadabraUser()?r("CurrentUser").getARID():e===null?(p("getID"),r("CurrentUser").getID()):e},getMDCUserID:function(){return r("CurrentUser").getEOCPU()==="0"?r("CurrentUser").getPossiblyNonFacebookUserID():r("CurrentUser").getEOCPU()},getName:function(){return s!=null?s:r("CurrentUser").getName()},getShortName:function(){return u!=null?u:r("CurrentUser").getShortName()},isEmployee:function(){return r("CurrentUser").isEmployee()},isHorizonWebUser:function(){return r("CurrentUser").getEPOU()!==0&&o("ZenonAppProvider").isHorizonApp()},isInstagramUser:function(){return r("CurrentUser").getEIMU()!==0&&o("ZenonAppProvider").isInstagramApp()},isKadabraUser:function(){return r("gkx")("11152")&&r("CurrentUser").getAppID()===String(0x4d31ba8e7e89d)},isLiveChatOnlyPerson:function(){return o("ZenonApp").isSocialPlugin},isLoggedIn:function(){return r("CurrentUser").isLoggedIn()},isLoggedInNow:function(){return r("CurrentUser").isLoggedInNow()},isManagedMetaAccount:function(){return r("CurrentUser").isManagedMetaAccount()},isMDCUser:function(){return r("CurrentUser").getPossiblyNonFacebookUserID()!=="0"&&o("ZenonAppProvider").isMDCApp()},isMessengerCallGuestUser:function(){return r("CurrentUser").isMessengerCallGuestUser()},isOculusCastingUser:function(){return r("CurrentUser").getEOCPU()!==0&&o("ZenonAppProvider").isOculusApp()},isOculusUser:function(){return r("CurrentUser").getEPOU()!==0&&o("ZenonAppProvider").isOculusApp()},isPage:function(){return c},isTestUser:function(){return r("CurrentUser").isTestUser()},isWorkishUser:function(){return r("CurrentUser").isWorkroomsUser()||r("CurrentUser").isWorkUser()},isWorkroomsUser:function(){return r("CurrentUser").isWorkroomsUser()},isWorkUser:function(){return r("CurrentUser").isWorkUser()}};l.useZenonActor=_,l.initZenonActor=f,l.ZenonActor=g}),98);
__d("RTWebIncomingRingConfiguration",["MWSCastingCenterUtils","OCCastingZenonUtils","UserAgent","ZenonAppProvider","ZenonRTWebBrowserFeatureSupport","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){return function(){return r("UserAgent").isBrowser(t)&&(n==null||n)}},s=[e("Chrome >= 77",!0),e("Chrome >= 87"),e("Edge (Chromium Based) >= 79"),e("Edge PWA (Chromium Based) >= 79"),e("Opera >= 67"),e("Firefox >= 70"),e("Safari >= 16",r("gkx")("24226")||r("gkx")("6974")||o("ZenonAppProvider").isWidgetLiveChatApp()),e("Oculus Browser >= 7",r("gkx")("24228")),o("OCCastingZenonUtils").isBrowserSupportedForMobileWebCasting,o("MWSCastingCenterUtils").isBrowserSupportedForMobileManagedCasting];(o("ZenonAppProvider").isMetaAI()||o("ZenonAppProvider").isMDCApp()||o("ZenonAppProvider").isWidgetLiveChatApp())&&(s.push(e("Mobile Safari >= 16")),s.push(e("Chrome for iOS >= 130")),s.push(e("Facebook for iOS >= 400")),s.push(e("Facebook for Android")));var u=s.some(function(e){return e()});function c(){return s.some(function(e){return e()})}function d(){return u}function m(){return r("gkx")("23430")&&o("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()}l.isSupportedClient_TEST_ONLY=c,l.isSupportedClient=d,l.isE2EESupportedClient=m}),98);
__d("PolarisCallGatingHelpers",["PolarisUA","RTWebIncomingRingConfiguration","gkx","justknobx","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!(u()||c())}function s(){return r("gkx")("24007")}function u(){return r("gkx")("24007")}function c(){return!o("PolarisUA").isDesktop()||!o("RTWebIncomingRingConfiguration").isSupportedClient()}function d(){return e()?!r("justknobx")._("471"):!1}function m(){return r("qex")._("83")===!0}l.isWebCallingEnabled=e,l.isVerifiedUserAndCallingEnabled=s,l.isIncomingCallEnabled=d,l.isCallsPathMigrationEnabled=m}),98);
__d("ZenonSignalingProtocol",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({MW:"mw",MWPP:"mw++"}),l=e;i.default=l}),66);/*FB_PKG_DELIM*/
__d("ArmadilloCutoverClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("699"),s=o("FalcoLoggerInternal").create("armadillo_cutover_client",e),u=s;l.default=u}),98);
__d("EncryptedBackupdDYIFileSaver",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("file-saver").__setRef("EncryptedBackupdDYIFileSaver");function s(t,n){e.onReadyImmediately(function(e){var r=e.saveAs;r(n,t)})}l.saveFile=s}),98);
__d("EncryptedBackupsDYIHandleMessageRestore",["EncryptedBackupsDYISingleton","I64","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d;function m(e,t,n,r,o,a,i){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l,m){var p=o("EncryptedBackupsDYISingleton").getSingleton(),f=p.getLogger(),g=p.getThreadKeyForThreadId(n);if(g==null){f.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread key for thread id: ",""])),n);return}if(f.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["handling message range query for thread with thread key ",", hasMoreBefore: ",""])),n,a),r.length>0&&(yield l(g,n,r)),!a||i==null){a&&i==null&&f.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["nextTimestampMs was not supplied for thread with thread key ","."])),n),_(g);return}var h=(d||(d=o("I64"))).to_string(i);f.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Issuing next range query for thread with thread key ",", server generated next reference timestamp: ",""])),n,h),m(t,h,n)}),p.apply(this,arguments)}function _(e){var t=o("EncryptedBackupsDYISingleton").getSingleton();t.deleteThreadKeyFromThreadsRestoreInProgress(e)}l.handleMessageRangeQueryRestore=m}),98);
__d("PolarisDirectGQLAPICDNRestorationQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9537377159694697"}),null);
__d("PolarisDirectGQLAPICDNRestorationQuery.graphql",["PolarisDirectGQLAPICDNRestorationQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"payload"}],t=[{alias:null,args:[{kind:"Variable",name:"payload",variableName:"payload"}],concreteType:"XIGIGDirectInstamadilloRestoreCDNUrlResponse",kind:"LinkedField",name:"xig_fetch_ig_direct_restore_cdn_url",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"restoration_cdn_url",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"PolarisDirectGQLAPICDNRestorationQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"PolarisDirectGQLAPICDNRestorationQuery",selections:t},params:{id:n("PolarisDirectGQLAPICDNRestorationQuery_instagramRelayOperation"),metadata:{},name:"PolarisDirectGQLAPICDNRestorationQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisDirectGQLAPIEBUploadMessagesMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9574801429307425"}),null);
__d("PolarisDirectGQLAPIEBUploadMessagesMutation.graphql",["PolarisDirectGQLAPIEBUploadMessagesMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"XIGTIGUploadMessageHandlerResponse",kind:"LinkedField",name:"xig_ig_open_upload_msg_to_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"delete_mailbox",storageKey:null},{alias:null,args:null,concreteType:"XIGTIGProtobufParams",kind:"LinkedField",name:"protobuf_params",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delete_on_success",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rtu_protocol",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"PolarisDirectGQLAPIEBUploadMessagesMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"PolarisDirectGQLAPIEBUploadMessagesMutation",selections:t},params:{id:n("PolarisDirectGQLAPIEBUploadMessagesMutation_instagramRelayOperation"),metadata:{},name:"PolarisDirectGQLAPIEBUploadMessagesMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("PolarisDirectGQLAPI",["CometRelay","CurrentUser","PolarisDirectGQLAPICDNRestorationQuery.graphql","PolarisDirectGQLAPIEBUploadMessagesMutation.graphql","PolarisRelayEnvironment","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,r){return new(u||(u=n("Promise")))(function(a,i){var l=function(t){i(t)},s=o("CurrentUser").getAppID(),u;s!=null&&(u=Number(s)),o("CometRelay").commitMutation(t,{mutation:e!==void 0?e:e=n("PolarisDirectGQLAPIEBUploadMessagesMutation.graphql"),onCompleted:a,onError:l,variables:{input:{app_id:u,payload:{msg_payloads:r}}}})})}function d(e){return o("CometRelay").fetchQuery(r("PolarisRelayEnvironment"),s!==void 0?s:s=n("PolarisDirectGQLAPICDNRestorationQuery.graphql"),{payload:e}).toPromise().then(function(e){var t,n;return(t=e==null||(n=e.xig_fetch_ig_direct_restore_cdn_url)==null?void 0:n.restoration_cdn_url)!=null?t:""})}l.ebUploadMessages=c,l.fetchCDNUrlWithRestoration=d}),98);
__d("IGDBridgeResignCdnUrlHandler",["MAWBridgeSendAndReceive","PolarisDirectGQLAPI","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("PolarisDirectGQLAPI").fetchCDNUrlWithRestoration(e);yield o("MAWBridgeSendAndReceive").sendAndReceive("backend","continueMediaDownload",{cdnUrl:n,deliveryObjectId:t})}),s.apply(this,arguments)}l.call=e}),98);
__d("MAWEBUnstoredDbMsgUtils",["EBLogger","MAWHandleEBRestoreWithHIM","MAWHandleEchoProtobufsRestoreApi","MAWMessageSortOrderUtils","WAJids","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("EBLogger").EBLogger().tags(["restore","MAWEBUnstoredDbMsgUtils"]);function c(t,n,a,i){var l=a!=null?a:n!=null?o("WAJids").unsafeCoerceToChatJid(n):void 0;return l==null?(u.mustfix("threadId and chatJid are both null - cannot convert protobuf to unstoredDbMsg"),[]):o("MAWHandleEchoProtobufsRestoreApi").decodeProtobufArray(t,i,void 0,new Set,new Set,new Map,new Map,new Map,!0).map(function(t){var n;if((t==null||(n=t.metadata)==null?void 0:n.messageId)!=null)try{var a=o("MAWHandleEchoProtobufsRestoreApi").createUnstoredDbContentFromProtobufObject(t,l,i,new Map,void 0);if(a!=null&&a.unstoredDbContent.unstoredDbMsg!=null){var s=a.unstoredDbContent.unstoredDbMsg,c=o("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder(s);return s.sortOrderMs=c,s}}catch(n){var d=r("getErrorSafe")(n);u.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert protobuf to unstored db message: type: "," error: ",""])),t.msgType,d.message)}return null}).filter(Boolean)}function d(e,t){return o("MAWHandleEBRestoreWithHIM").convertEchoMessages(e,t).map(function(e){var t,n;return e==null||e.length===0||((t=e[0].decodedMsg)==null?void 0:t.unstoredDbMsg)==null?(u!=null&&u.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert echo message to unstored db message"]))),null):(n=e[0].decodedMsg)==null?void 0:n.unstoredDbMsg}).filter(Boolean)}l.getUnstoredDbMsgFromProtobuf=c,l.getUnstoredDbMsgFromEcho=d}),98);
__d("MAWEncryptedBackupsDYIProcessProtobufMessages",["CurrentUser","EncryptedBackupsDYIMessageProcessingUtils","EncryptedBackupsDYISingleton","MAWGroupPollsDualEncryptionUtils","MAWHandleEchoProtobufsRestoreApi","MAWJids","MAWMsgType","Promise","WAHashUtils","WAJids","WALongInt","WAStanzaUtils","WATimeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I;function T(e,t,n){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=o("EncryptedBackupsDYISingleton").getSingleton(),i=a.getLogger();i.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Processing "," protobuf messages for thread ",""])),n.length,t);var l=n.map(function(t){var n=a.hasMessage(e,o("WAStanzaUtils").toStanzaId(t.otid));return n?(i.DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Encountered a duplicate message otid ",", skipping"])),t.otid),null):t}).filter(Boolean),s=o("MAWJids").toUserJid(r("CurrentUser").getAccountID()),u=!1,g=!1,h;try{for(var y=babelHelpers.asyncIterator(l),C;u=!(C=yield y.next()).done;u=!1){var b=C.value;try{var v=o("MAWHandleEchoProtobufsRestoreApi").decodeDecryptedMessageProtobuf(b,s,void 0,new Set,new Set,new Map,new Map,new Map,!0);if(v==null){i.WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Decoded protobuf is empty"])));return}if(v!=null&&v.metadata!=null&&v.metadata.messageId!=null){var S=o("WAStanzaUtils").toStanzaId(v.metadata.messageId),R=yield x(e,t,v);if(R==null){i.WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Error converting protobuf to DYI format. Dropping the message"])));continue}a.setMessagesByThreadKey(e,S,R)}else{i.WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Error converting protobuf to DYI format. Dropping the message"])));continue}}catch(e){i.ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Error processing protobuf. Dropping the message: ",""])),e);continue}}}catch(e){g=!0,h=e}finally{try{u&&y.return!=null&&(yield y.return())}finally{if(g)throw h}}}),D.apply(this,arguments)}function x(e,t,n){return $.apply(this,arguments)}function $(){return $=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r,a,i=o("EncryptedBackupsDYISingleton").getSingleton(),l=i.getLogger(),s=n.metadata,u=n.msgType,c=n.sortOrderMs;if(s==null||u==null){l.WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Error processing protobuf: metadata or message type is null"])));return}var d=s.messageId,m=s.senderId,p=s.timestampMs;if(p==null||typeof p!="number"||d==null||m==null){l.WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Error processing protobuf: ts or messageId or senderId is null"])));return}var _=o("WATimeUtils").castMilliSecondsToUnixTime(p),f=o("EncryptedBackupsDYIMessageProcessingUtils").buildBaseDyiMessage(m,c),S=(r=n.decodedPayload)==null?void 0:r.text;if(n.editMsgData.length>0){var R=_;n.editMsgData.forEach(function(e){var t;if(e.ts>R&&((t=e.editMsgContent.message)==null?void 0:t.text)!=null){var n;R=e.ts,S=(n=e.editMsgContent.message)==null?void 0:n.text}})}switch(n.reactionData.length>0&&(f.reactions=n.reactionData.map(function(e){var t,n,r=e.reaction,o=e.senderId;return{actor:(t=i.getContactNameForContactId(o))!=null?t:"unknown",reaction:(n=r.text)!=null?n:"unknown"}})),n.msgType){case o("MAWMsgType").MSG_TYPE.TEXT:f.type="text",f.text=S||"";break;case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.PTT:f.type="media",f.text=S||"",f=M(e,t,n,c,f);break;case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:l.WARN(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Documents are not supported in DYI"])));return;case o("MAWMsgType").MSG_TYPE.XMA:if(f.type="link",n.xmaData==null){l.WARN(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] XMA message doesn't have xmaData"])));return}f.text=((a=n.xmaData)==null?void 0:a.ctas.map(function(e){return e.nativeUrl}).filter(Boolean).join("\n"))||"";break;case o("MAWMsgType").MSG_TYPE.REVOKED:f.type="placeholder",f.isUnsent=!0,f.text="User unsent a message";break;case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:f.type="poll",f.text=yield P(n);break;case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:l.WARN(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Bump message is not supported in DYI"])));return;default:l.LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Explicitly dropping "," message type"])),n.msgType);return}return f}),$.apply(this,arguments)}function P(e){return N.apply(this,arguments)}function N(){return N=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("EncryptedBackupsDYISingleton").getSingleton().getLogger(),r=e.groupPollInfo;if(r==null)return t.WARN(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Group poll creation message is missing group poll info"]))),"";var a=new Map,i=new Map;if(yield(I||(I=n("Promise"))).all(r.options.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("MAWGroupPollsDualEncryptionUtils").getHashForOptionName(e);a.set(t,{optionName:e,voterUserJids:[]})});return function(t){return e.apply(this,arguments)}})())),e.groupPollUpdateData!=null){var l=!1,s=!1,u;try{for(var c=babelHelpers.asyncIterator(e.groupPollUpdateData),d;l=!(d=yield c.next()).done;l=!1){var m=d.value;{var p,_,f;if(((p=m.pollCreationMessageKey)==null?void 0:p.id)==null||((_=m.pollCreationMessageKey)==null?void 0:_.remoteJid)==null){t.ERROR(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[Polls] Poll creation message key is incomplete. Skipping"])));continue}var g=m.pollCreationMessageKey,h=g.id,y=g.remoteJid,C=o("WAJids").unsafeCoerceToUserJid(y),b={pollCreationMessageKey:r.encKey,pollCreationSenderJid:o("WAJids").toMsgrUserJid(((f=e.metadata)==null?void 0:f.senderId)||""),pollCreationStanzaId:o("WAStanzaUtils").toStanzaId(h),pollUpdateSenderJid:C,pollUpdateStanzaId:m.externalId};if(m.addOption!=null){var v=yield o("MAWGroupPollsDualEncryptionUtils").decryptGroupPollAddOption(m.addOption,b);if(v.success){var T=v.value,D=!1,x=!1,$;try{for(var P=babelHelpers.asyncIterator(T.pollOption),N;D=!(N=yield P.next()).done;D=!1){var M=N.value;{if(M.optionName==null)continue;var w=M.optionName,A=yield o("MAWGroupPollsDualEncryptionUtils").getHashForOptionName(w);a.has(A)||a.set(A,{optionName:w,voterUserJids:[]})}}}catch(e){x=!0,$=e}finally{try{D&&P.return!=null&&(yield P.return())}finally{if(x)throw $}}}else t.ERROR(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[Polls] Decryption failure when trying to decrypt poll add option update: ",""])),v.error)}if(m.vote!=null){var F=yield o("MAWGroupPollsDualEncryptionUtils").decryptGroupPollVote(m.vote,b);if(F.success){var O=F.value;if(O.senderTimestampMs==null){t.WARN(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[Polls] senderTimestampMs is null. Cannot determine the latest poll vote"])));continue}var B=O.selectedOptions,W=O.senderTimestampMs,q=i.get(C);(q==null||q.senderTimestampMs<o("WALongInt").numberOrThrowIfTooLarge(W))&&i.set(C,{senderTimestampMs:o("WALongInt").numberOrThrowIfTooLarge(W),votes:B.map(o("MAWGroupPollsDualEncryptionUtils").getBase64EncodedHash)})}else t.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[Polls] Decryption failure when trying to decrypt poll vote update: ",""])),F.error)}}}}catch(e){s=!0,u=e}finally{try{l&&c.return!=null&&(yield c.return())}finally{if(s)throw u}}}for(var U of i){var V=U[0],H=U[1];for(var G of H.votes){var z=a.get(G);z==null?a.set(G,{optionName:"Unknown",voterUserJids:[V]}):a.set(G,babelHelpers.extends({},z,{voterUserJids:[].concat(z.voterUserJids,[V])}))}}return"Question: "+r.name+"; Options: "+Array.from(a).map(function(e){var t=e[0],n=e[1],r=n.optionName,a=n.voterUserJids;return r+" ("+a.length+" votes"+(a.length>0?": "+a.map(function(e){return o("EncryptedBackupsDYIMessageProcessingUtils").getSenderName(o("WAJids").userIdFromJid(o("WAJids").unsafeCoerceToUserJid(e)))}).join(", "):"")+")"}).join("; ")}),N.apply(this,arguments)}function M(t,n,r,a,i){var l,c,d=o("EncryptedBackupsDYISingleton").getSingleton(),m=d.getLogger();if(r.mediaMetadata==null)return m.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Media message is missing media data"]))),i;var p=r.mediaMetadata,_=p.mediaEntryData,f=p.plaintextHash,g=(l=(c=r.metadata)==null?void 0:c.senderId)!=null?l:"0",h=o("WAStanzaUtils").toStanzaId(r.externalId),y=o("WAHashUtils").stringToPlaintextHash(f);if(i.media.add(y),!d.isAttachmentDownloadInProgressForPlaintextHash(y)&&!d.isAttachmentDownloadCompleteForPlaintextHash(y)){if(m.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Starting DYI media download for attachemnt with hash ",""])),o("WAHashUtils").sanitisePlaintextHash(y)),d.addPlaintextHashToAttachmentDownloadsInProgress(y),_==null)return m.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Media message is missing media entry data"]))),d.deletePlaintextHashFromAttachmentDownloadsInProgress(y),i;var C={author:o("WAJids").toMsgrUserJid(g),chat:o("WAJids").toMsgrUserJid(n),externalId:h};o("EncryptedBackupsDYIMessageProcessingUtils").downloadMediaWithMediaManager(y,C,a,_)}return i}l.processEBProtobufMessagesForDYI=T}),98);
__d("MAWEncryptedBackupsDYIHandleMessageRestore",["EncryptedBackupsDYIHandleMessageRestore","EncryptedBackupsDYISingleton","I64","LSDatabaseSingleton","LSIntEnum","LSMEBTaskCreationSource","MAWEBRestoreTrackingUtils","MAWEncryptedBackupsDYIProcessProtobufMessages","MAWJobDefinitions","MAWThreadKeyUtils","MpsOverBridge","MpsTypes","WAJids","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(s||(s=o("LSIntEnum"))).ofNumber(r("LSMEBTaskCreationSource").MSGR_DYI),m=r("justknobx")._("467"),p=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){o("MAWEBRestoreTrackingUtils").markEBRestoreDYI(r("LSMEBTaskCreationSource").MSGR_DYI);var i=o("WAJids").createJidUtils({platform:"msgr"}).toUserJid(a),l=o("MpsTypes").toTimestamp(Number(n)),s=yield o("MpsOverBridge").mps().loadMessages({config:{persistToReverb:"no-persist",shouldFetchSupplementals:!0,shouldFetchTags:!1,strategy:"remote-only"},debug:{purpose:"dyi"},direction:"desc",from:[l,null],numMessages:m,threadId:o("MpsTypes").toThreadId(i)});if(!s.success){o("EncryptedBackupsDYISingleton").getSingleton().getLogger().ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Message batch query failed for thread ",": ",""])),a,s.error),o("EncryptedBackupsDYISingleton").getSingleton().deleteThreadKeyFromThreadsRestoreInProgress(o("MAWThreadKeyUtils").toStringThreadKey(a));return}var c=s.value,d=c.cursorInfo,p=c.messages,f=(d==null?void 0:d.endCursor)!=null?(u||(u=o("I64"))).of_float(d.endCursor[0]):void 0;yield _(a,p.map(o("MAWJobDefinitions").mpsMessageToEncryptedBackupsMessage),d.hasNext,f)});return function(n,r,o){return t.apply(this,arguments)}})();function _(e,t,n,r){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=yield(c||(c=o("LSDatabaseSingleton"))).LSDatabaseSingleton;yield o("EncryptedBackupsDYIHandleMessageRestore").handleMessageRangeQueryRestore(a,e,t,n,r,o("MAWEncryptedBackupsDYIProcessProtobufMessages").processEBProtobufMessagesForDYI,p)}),f.apply(this,arguments)}l.taskCreationSource=d,l.MESSENGER_DYI_BATCH_SIZE=m,l.issueNextRangeQuery=p,l.handleMAWProtobufMessageRangeQueryRestore=_}),98);
__d("MWSimpleWorkQueue",["FBLogger","Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={first:null,last:null};function u(t){return new(e||(e=n("Promise")))(function(o,a){var i=function(){var i=new(e||(e=n("Promise")))(function(e,t){window.setTimeout(function(){t(r("err")("Work item timed out after 30 seconds"))},3e4)});return e.race([t(),i]).then(o,a)};if(s.first===null||s.last==null)s.first=s.last={next:null,value:i},c();else{var l=s.last;l.next={next:null,value:i},s.last=l.next}})}function c(){if(s.first!==null){var e=s.first;if(e!=null){var t=function(){if(s.first=e.next,s.first==null){s.last=null;return}c()};e.value().then(function(){t()}).catch(function(e){r("FBLogger")("messenger_web").catching(e).mustfix("Error in MWSimpleWorkQueue"),t()})}}}l.queueWork=u}),98);
__d("MAWRestoreProtobufsFromEncryptedBackupsDeferred",["I64","MWSimpleWorkQueue","WAJobOrchestratorTypes","justknobx","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MAWRestoreProtobufsFromEncryptedBackupsNOP").__setRef("MAWRestoreProtobufsFromEncryptedBackupsDeferred");function u(t,n,a,i,l,u,c,d,m,p,_,f,g,h,y){return h===void 0&&(h=o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION),s.load().then(function(s){var C=function(C){return s.call(C,t,n,a,i,l!=null?(e||(e=o("I64"))).to_float(l):0,u,c!=null?(e||(e=o("I64"))).to_float(c):(e||(e=o("I64"))).to_float((e||(e=o("I64"))).max_int),d,m,p,_,f,g,h,y)};return r("justknobx")._("4404")?o("MWSimpleWorkQueue").queueWork(function(){return C(null)}):C(null)})}l.call=u}),98);
__d("LSProtobufRestoreHandler",["CurrentUser","LSIntEnum","LSMEBTaskCreationSource","LSVec","MAWEBRestoreTrackingUtils","MAWEBUnstoredDbMsgUtils","MAWEncryptedBackupUtils","MAWEncryptedBackupsDYIHandleMessageRestore","MAWJids","MAWJobDefinitions","MAWRestoreProtobufsFromEncryptedBackupsDeferred","Promise","WAErrorMessage","WATagsLogger","asyncToGeneratorRuntime","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h=["ERROR"],y,C,b=o("WATagsLogger").TAGS(["labyrinth_web","protobuf_restore"]);function v(e,t,n,r,o,a,i,l,s,u,c,d,m){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,v,S,L,E,k,I,T,D,x){var $=b.TAGS([E!=null?E:"no_request_id"]),P=$.ERROR,N=babelHelpers.objectWithoutPropertiesLoose($,h),M=N,w=null;T!=null&&(w=R(T)),M.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop"]))),o("MAWEBRestoreTrackingUtils").markEBRestoreProtobuf(D);var A;if(a.type==="convertedProtobufs"?A=a.convertedProtobufs:(a.type,A=o("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(a.decryptedMessagesProtobufs)),o("MAWEncryptedBackupUtils").logIfDuplicateMessagesFoundInRestore(A,"protobuf_restore"),E!=null)try{o("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_start",traceId:E});var F=o("MAWJids").toUserJid(r("CurrentUser").getAccountID()),O=o("MAWEBUnstoredDbMsgUtils").getUnstoredDbMsgFromProtobuf(A,t,void 0,F);if(i===!0&&O.length===0){o("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_decodedMessages_inconsistency",traceId:E});var B=A.length;M.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - no decoded messages but hasMoreBefore is true, messages count after decryption: ",""])),B),b.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - no decoded messages but hasMoreBefore is true, messages count after decryption: ",""])),B)}}catch(e){var W=o("WAErrorMessage").maybeGetMessageFromError(e);M.WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - Failed to decode protobufs, with error: ",""])),W),b.ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - Failed to decode protobufs, with error: ",""])),W)}i===!0&&A.length===0&&(E!=null&&o("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_messages_inconsistency",traceId:E}),M.WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - no messages but hasMoreBefore is true"]))),b.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - no messages but hasMoreBefore is true"]))));var q=D!=null&&(C||(C=o("LSIntEnum"))).unwrapIntEnum(D)===r("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB;if(q)return E!=null&&o("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"search_restore_end",traceId:E}),o("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(E),(y||(y=n("Promise"))).resolve();var U=D!=null&&(C||(C=o("LSIntEnum"))).unwrapIntEnum(D)===r("LSMEBTaskCreationSource").MSGR_DYI;return U?(M.LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Restoring Messenger DYI batch"]))),yield o("MAWEncryptedBackupsDYIHandleMessageRestore").handleMAWProtobufMessageRangeQueryRestore(t,A,i,l),E!=null&&o("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"dyi_restore_end",traceId:E}),o("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(E),(y||(y=n("Promise"))).resolve()):(r("promiseDone")(o("MAWRestoreProtobufsFromEncryptedBackupsDeferred").call("AdvancedCrypto",o("MAWJobDefinitions").toThreadJidPrimaryId(t),A,i,l,v,S,L,E,k,I,w,D,void 0,x!=null?x:void 0),function(){E!=null&&o("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_end",traceId:E})},function(e){var t=o("WAErrorMessage").maybeGetMessageFromError(e);M.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - Failed to restore protobufs, with error: ",""])),t),b.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - Failed to restore protobufs, with error: ",""])),t);var n={string:{error:t}};E!=null&&o("MAWEBRestoreTrackingUtils").markEBRestoreFail(E,!1,"native_op_reject",n)}),(y||(y=n("Promise"))).resolve())}),S.apply(this,arguments)}function R(e){return r("LSVec").toArray(e).map(function(e){return o("MAWJobDefinitions").toEncodedEchoMessage(e)})}l.handleProtobufRestoreHelper=v,l.convertLSEchoMessageVecToArray=R}),98);
__d("MAWBridgeUpdateDYIStatusV2",["EBLogger","EncryptedBackupdDYIFileSaver","EncryptedBackupsDYIFileUtils","EncryptedBackupsDYITypes","QPLUserFlow","asyncToGeneratorRuntime","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){o("EncryptedBackupdDYIFileSaver").saveFile(e,t),window.setTimeout(function(){r("promiseDone")(n())},1e3)}),s.apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.qplEvent,i=t.qplInstanceKeyE2E,l=t.status,s=o("EBLogger").EBLogger().tags(["dyi"]);if(l===o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed)try{if(navigator.storage==null)throw s.mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.");var u=o("EncryptedBackupsDYIFileUtils").DyiArchiveFilename,c=yield o("EncryptedBackupsDYIFileUtils").getRootFolderHandle(),d=yield o("EncryptedBackupsDYIFileUtils").readFile(c,u);yield e(u,d,n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c.removeEntry(u)})),s.info("Saving file with filename ",u),a!=null&&i!=null&&r("QPLUserFlow").endSuccess(a,{instanceKey:i}),s.info("DYI Complete")}catch(e){return s.catching(r("getErrorSafe")(e)).mustfix("Failed to download the DYI archive"),a!=null&&i!=null&&r("QPLUserFlow").endFailure(a,r("getErrorSafe")(e).message,{instanceKey:i}),o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed}return l===o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed&&a!=null&&i!=null&&r("QPLUserFlow").endFailure(a,"Unknown error",{instanceKey:i}),l}),c.apply(this,arguments)}l.call=u}),98);
__d("MAWOfflineQueueState",["MAWOfflineQueueThreadStatus","MAWSharedProtocolQueueConst"],(function(t,n,r,o,a,i,l){"use strict";var e=[],s={offlineQueueCount:0,offlineQueueProgressDownloaded:0,offlineQueueProgressProcessed:0,offlineQueueSyncState:o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing,offlineQueueThreadStatus:{}},u=babelHelpers.extends({},s),c={getSnapshot:function(){return u},subscribe:function(n){return e.push(n),function(){e=e.filter(function(e){return e!==n})}}};function d(t){u.offlineQueueCount!==t&&(u=babelHelpers.extends({},u,{offlineQueueCount:t}),e.forEach(function(e){return e()}))}function m(t){u.offlineQueueProgressDownloaded!==t&&(u=babelHelpers.extends({},u,{offlineQueueProgressDownloaded:t}),e.forEach(function(e){return e()}))}function p(t,n){var r=o("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(n,u.offlineQueueThreadStatus);u.offlineQueueThreadStatus===r&&u.offlineQueueProgressProcessed===t||(u=babelHelpers.extends({},u,{offlineQueueProgressProcessed:t,offlineQueueThreadStatus:r}),e.forEach(function(e){return e()}))}function _(t){var n=o("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(t,u.offlineQueueThreadStatus);u.offlineQueueThreadStatus==n&&u.offlineQueueSyncState===o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete||(u=babelHelpers.extends({},u,{offlineQueueSyncState:o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete,offlineQueueThreadStatus:n}),e.forEach(function(e){return e()}))}l.EMPTY_STATE=s,l.offlineQueueState=c,l.initOfflineQueueSyncStart=d,l.initOfflineQueueSyncProgress=m,l.initOfflineQueueConsumerSyncProgress=p,l.initOfflineQueueSyncComplete=_}),98);
__d("MAWPostOfflineQueueCompleteActions",["WAMediaWasmWorkerClient"],(function(t,n,r,o,a,i,l){"use strict";function e(){o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("mp4RepairMux"),o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode")}function s(){e()}l.runPostOfflineQueueCompleteActions=s}),98);
__d("MAWRestoreProtobufsFromEncryptedBackupsNOP",["ExecutionEnvironment","I64","LSDataTraceCheckPoint","LSIntEnum","LSMEBTaskCreationSource","MAWBridgeTraceRecordCheckpointHandler","MAWJobDefinitions","MAWJobManager","Promise","WAJobOrchestratorTypes","asyncToGeneratorRuntime","err","getErrorSafe","ifRequireable","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n,r,o,a,i,l,s,u,c,d,p,_,f,g){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a,i,l,s,d,m,_,f,g,h,y,C,b,v){b===void 0&&(b=o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);try{return p(t,a,y,i,l,d,_,f,g,C==null?void 0:C,void 0,b,v)}catch(t){if(f!=null){var S={checkPointId:(c||(c=o("LSIntEnum"))).ofNumber(r("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),dataTraceId:f,errorMessage:r("getErrorSafe")(t).message,shouldFlush:!0,syncChannel:-1,tags:void 0};return e!=null?o("MAWBridgeTraceRecordCheckpointHandler").call(e,S).then(function(){return(u||(u=n("Promise"))).reject(r("getErrorSafe")(t))}):(o("MAWBridgeTraceRecordCheckpointHandler").callWithoutTxn(S),(u||(u=n("Promise"))).reject(r("getErrorSafe")(t)))}}return(u||(u=n("Promise"))).resolve()}),m.apply(this,arguments)}function p(t,a,i,l,d,m,p,_,f,g,h,y,C){y===void 0&&(y=o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);var b;if((e||(e=r("ExecutionEnvironment"))).isInWorker)b=o("MAWJobManager").getJobManager();else{var v;r("ifRequireable")("MAWTimedJob",function(e){var t=e.TimedUIJobStarters;v=t},function(){throw r("err")("MAWTimedJob is not requireable in MAWRestoreProtobufsFromEncryptedBackupsNOP")}),b=r("nullthrows")(v,"ifRequireable is not sync")}return _!=null&&g!=null&&(c||(c=o("LSIntEnum"))).unwrapIntEnum(g)===r("LSMEBTaskCreationSource").MESSENGER_MESSAGE_LIST_PAGINATION&&!(e||(e=r("ExecutionEnvironment"))).isInWorker?b.waitUntilCompleted(o("MAWJobDefinitions").jobSerializers.restoreProtobufsFromEncryptedBackups(i,t,a,l,d,m,p,void 0,_!=null?_:void 0,f!=null?f:void 0,void 0,{priority:y},g,h,void 0,C!=null?C:void 0)):(c||(c=o("LSIntEnum"))).unwrapIntEnum(g||(s||(s=o("I64"))).zero)===r("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE&&!(e||(e=r("ExecutionEnvironment"))).isInWorker?b.waitUntilCompleted(o("MAWJobDefinitions").jobSerializers.restoreProtobufsFromEncryptedBackups(i,t,a,l,d,m,p,void 0,_!=null?_:void 0,f!=null?f:void 0,void 0,{priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},g,h,void 0,C!=null?C:void 0)):(u||(u=n("Promise"))).resolve(b.fireAndForget(o("MAWJobDefinitions").jobSerializers.restoreProtobufsFromEncryptedBackups(i,t,a,l,d,m,p,void 0,_!=null?_:void 0,f!=null?f:void 0,void 0,{priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},g,h,void 0,C!=null?C:void 0)))}l.call=d}),98);
__d("MAWSetupBridgeOfflineConsumer",["InteractionTracingMetrics","MAWBridgeInitOfflineQueueSyncCompleteHandler","MAWMIC","MAWOfflineQueueStatus","MAWPostOfflineQueueCompleteActions","MAWSharedProtocolQueueConst","MWChatInteraction","MWFBLogger","asyncToGeneratorRuntime","interaction-tracing","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["ServerRPC","OfflineConsumer"]),m="has_pending_or_inprogress_oq_threads";function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return yield e,o("MAWPostOfflineQueueCompleteActions").runPostOfflineQueueCompleteActions(),o("MAWBridgeInitOfflineQueueSyncCompleteHandler").call()}),_.apply(this,arguments)}function f(e){o("MAWMIC").addIntAnnotation("offlineQueueSize",e);var t=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);t!=null&&r("InteractionTracingMetrics").addAnnotationInt(t,"offlineQueueSize",e)}function g(e,t){var n=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);n!=null&&r("InteractionTracingMetrics").addSubspan(n,"offline_queue","LONGTASK",e,t,{})}function h(){r("justknobx")._("3496")&&r("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(e){e.addMarkerPoint("offline_queue_start","AppTiming"),e.addAnnotationBoolean(m,!0)})}function y(){r("justknobx")._("3496")&&r("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(e){e.addMarkerPoint("offline_queue_end","AppTiming"),e.addAnnotationBoolean(m,!1)})}function C(t,n){return function(a){var i=a.chatJidStatus,l=a.status,m=a.timestamp,_=a.totalExpectedCount,C=a.totalProcessedCount;switch(l){case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing:h(),d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",""])),_),f(_),n({tag:"InitOfflineQueueSyncStart",value:_}),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing),o("MAWMIC").addPoint("process_offline_queue_start",m),o("MAWOfflineQueueStatus").resetOfflineQueueState();return;case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing:d.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Stats: expected: ",", processed: ",""])),_,C),n({tag:"InitOfflineQueueConsumerSyncProgress",value:{chatJidStatus:i,processed:C}}),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing);return;case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete:d.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Stats end: expected: ",", processed: ",""])),_,C),a.startTime!=null&&g(a.startTime,m),y(),n({tag:"InitOfflineQueueSyncComplete",value:i}),r("promiseDone")(p(t)),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete),o("MAWMIC").addPoint("process_offline_queue_end",m),o("MAWOfflineQueueStatus").markOfflineQueueComplete();return;case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed:d.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Stats failed: expected: ",", processed: ",""])),_,C),o("MAWMIC").addPoint("process_offline_queue_failed",m),n({tag:"InitOfflineQueueSyncComplete",value:void 0}),r("promiseDone")(p(t)),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed),o("MAWOfflineQueueStatus").markOfflineQueueComplete();return}}}l.default=C}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("javascript-blowfish-1.0.5",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){var e=function(t,n){this.key=t,(n==="ecb"||n==="cbc")&&(this.mode=n),this.sBox0=e.sBox0.slice(),this.sBox1=e.sBox1.slice(),this.sBox2=e.sBox2.slice(),this.sBox3=e.sBox3.slice(),this.pArray=e.pArray.slice(),this.generateSubkeys(t)};e.prototype={sBox0:null,sBox1:null,sBox2:null,sBox3:null,pArray:null,key:null,mode:"ecb",iv:"abc12345",keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encrypt:function(e,t){if(this.mode==="ecb")return this.encryptECB(e);if(this.mode==="cbc")return this.encryptCBC(e,t);throw new Error("\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C \u0448\u0438\u0444\u0440\u043E\u0432\u0430\u043D\u0438\u044F.")},decrypt:function(e,t){if(this.mode==="ecb")return this.decryptECB(e);if(this.mode==="cbc")return this.decryptCBC(e,t);throw new Error("\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C \u0448\u0438\u0444\u0440\u043E\u0432\u0430\u043D\u0438\u044F.")},encryptECB:function(e){e=this.utf8Decode(e);for(var t=Math.ceil(e.length/8),n="",r=0;r<t;r++){var o=e.substr(r*8,8);if(o.length<8)for(var a=8-o.length;0<a--;)o+="\0";var i,l,s=this.split64by32(o);i=s[0],l=s[1],s=this.encipher(i,l),i=s[0],l=s[1],n+=this.num2block32(i)+this.num2block32(l)}return n},encryptCBC:function(e,t){e=this.utf8Decode(e);var n=Math.ceil(e.length/8),r,o,a;a=this.split64by32(t),r=a[0],o=a[1];for(var i="",l=0;l<n;l++){var s=e.substr(l*8,8);if(s.length<8)for(var u=8-s.length;0<u--;)s+="\0";var c,d,m;m=this.split64by32(s),c=m[0],d=m[1],c=this.xor(c,r),d=this.xor(d,o),m=this.encipher(c,d),c=m[0],d=m[1],r=c,o=d,i+=this.num2block32(c)+this.num2block32(d)}return i},decryptECB:function(e){for(var t=Math.ceil(e.length/8),n="",r=0;r<t;r++){var o=e.substr(r*8,8);if(o.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043E\u0432\u0430\u043D\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430 \u043F\u043E\u0432\u0440\u0435\u0436\u0434\u0435\u043D\u0430: \u0434\u043B\u0438\u043D\u043D\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0439 \u0441\u0442\u0440\u043E\u043A\u0438 \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u0430 8 \u0431\u0430\u044B\u0439\u0442\u0430\u043C.");var a,i,l;l=this.split64by32(o),a=l[0],i=l[1],l=this.decipher(a,i),a=l[0],i=l[1],n+=this.num2block32(a)+this.num2block32(i)}return n=this.utf8Encode(n),n},decryptCBC:function(e,t){var n=Math.ceil(e.length/8),r,o,a,i,l;l=this.split64by32(t),r=l[0],o=l[1];for(var s="",u=0;u<n;u++){var c=e.substr(u*8,8);if(c.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043E\u0432\u0430\u043D\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430 \u043F\u043E\u0432\u0440\u0435\u0436\u0434\u0435\u043D\u0430: \u0434\u043B\u0438\u043D\u043D\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0439 \u0441\u0442\u0440\u043E\u043A\u0438 \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u0430 8 \u0431\u0430\u0439\u0442\u0430\u043C.");var d,m,p;p=this.split64by32(c),d=p[0],m=p[1],a=d,i=m,p=this.decipher(d,m),d=p[0],m=p[1],d=this.xor(d,r),m=this.xor(m,o),r=a,o=i,s+=this.num2block32(d)+this.num2block32(m)}return s=this.utf8Encode(s),s},F:function(e){var t=e>>>24,n=e<<8>>>24,r=e<<16>>>24,o=e<<24>>>24,a=this.addMod32(this.sBox0[t],this.sBox1[n]);return a=this.xor(a,this.sBox2[r]),a=this.addMod32(a,this.sBox3[o]),a},encipher:function(e,t){for(var n,r=0;r<16;r++)e=this.xor(e,this.pArray[r]),t=this.xor(this.F(e),t),n=e,e=t,t=n;return n=e,e=t,t=n,t=this.xor(t,this.pArray[16]),e=this.xor(e,this.pArray[17]),[e,t]},decipher:function(e,t){var n;e=this.xor(e,this.pArray[17]),t=this.xor(t,this.pArray[16]),n=e,e=t,t=n;for(var r=15;r>=0;r--)n=e,e=t,t=n,t=this.xor(this.F(e),t),e=this.xor(e,this.pArray[r]);return[e,t]},generateSubkeys:function(e){var t=0,n=0,r,o;for(r=0;r<18;r++){for(o=4;o>0;o--)t=this.fixNegative(t<<8|e.charCodeAt(n)),n=(n+1)%e.length;this.pArray[r]=this.xor(this.pArray[r],t),t=0}var a=[0,0];for(r=0;r<18;r+=2)a=this.encipher(a[0],a[1]),this.pArray[r]=a[0],this.pArray[r+1]=a[1];for(r=0;r<256;r+=2)a=this.encipher(a[0],a[1]),this.sBox0[r]=a[0],this.sBox0[r+1]=a[1];for(r=0;r<256;r+=2)a=this.encipher(a[0],a[1]),this.sBox1[r]=a[0],this.sBox1[r+1]=a[1];for(r=0;r<256;r+=2)a=this.encipher(a[0],a[1]),this.sBox2[r]=a[0],this.sBox2[r+1]=a[1];for(r=0;r<256;r+=2)a=this.encipher(a[0],a[1]),this.sBox3[r]=a[0],this.sBox3[r+1]=a[1]},block32toNum:function(e){return this.fixNegative(e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3))},num2block32:function(e){return String.fromCharCode(e>>>24)+String.fromCharCode(e<<8>>>24)+String.fromCharCode(e<<16>>>24)+String.fromCharCode(e<<24>>>24)},xor:function(e,t){return this.fixNegative(e^t)},addMod32:function(e,t){return this.fixNegative(e+t|0)},fixNegative:function(e){return e>>>0},split64by32:function(e){var t=e.substring(0,4),n=e.substring(4,8);return[this.block32toNum(t),this.block32toNum(n)]},utf8Decode:function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},utf8Encode:function(e){for(var t="",n=0,r=0,o=0,a=0;n<e.length;)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|o&63),n+=2):(o=e.charCodeAt(n+1),a=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63),n+=3);return t},base64Encode:function(e){for(var t="",n,r,o,a,i,l,s,u=0;u<e.length;)n=e.charCodeAt(u++),r=e.charCodeAt(u++),o=e.charCodeAt(u++),a=n>>2,i=(n&3)<<4|r>>4,l=(r&15)<<2|o>>6,s=o&63,isNaN(r)?l=s=64:isNaN(o)&&(s=64),t=t+this.keyStr.charAt(a)+this.keyStr.charAt(i)+this.keyStr.charAt(l)+this.keyStr.charAt(s);return t},base64Decode:function(e){var t="",n,r,o,a,i,l,s,u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)a=this.keyStr.indexOf(e.charAt(u++)),i=this.keyStr.indexOf(e.charAt(u++)),l=this.keyStr.indexOf(e.charAt(u++)),s=this.keyStr.indexOf(e.charAt(u++)),n=a<<2|i>>4,r=(i&15)<<4|l>>2,o=(l&3)<<6|s,t=t+String.fromCharCode(n),l!=64&&(t=t+String.fromCharCode(r)),s!=64&&(t=t+String.fromCharCode(o));return t},trimZeros:function(e){return e.replace(/\0+$/g,"")}},e.pArray=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],e.sBox0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],e.sBox1=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],e.sBox2=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],e.sBox3=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],l.exports=e}var u=!1;function c(){return u||(u=!0,s()),l.exports}function d(e){switch(e){case void 0:return c()}}a.exports=d}),null);
__d("javascript-blowfish",["javascript-blowfish-1.0.5"],(function(t,n,r,o,a,i){a.exports=n("javascript-blowfish-1.0.5")()}),null);/*FB_PKG_DELIM*/
__d("DocumentTitle",["Arbiter"],(function(t,n,r,o,a,i,l){var e=1500,s=null,u=!1,c=0,d=[],m=null,p=document.title,_=0;function f(){d.length>0?u?h():(g(d[c].title),c=++c%d.length):(clearInterval(s),s=null,h())}function g(e){document.title=e,u=!0}function h(){y.set(m||p,!0),u=!1}var y=(function(){function t(e){this.$1=e}t.get=function(){return p},t.set=function(t,n){var e=t.toString();document.title=e,n?m=e:(p=e,m=null,r("Arbiter").inform("update_title",t))},t.blink=function(r){var n={title:r.toString()};return d.push(n),s===null&&(s=setInterval(f,e)),new t(n)};var n=t.prototype;return n.stop=function(){var e=d.indexOf(this.$1);e>=0&&(d.splice(e,1),c>e?c--:c==e&&c==d.length&&(c=0))},t.badge=function(n){var e=t.get(),o=n?"("+n+") "+e:e;t.set(o,!0),r("Arbiter").inform("update_title_badge",n,"state"),_=n},t.preserveBadgeAndSet=function(n){t.set(n,!1),r("Arbiter").inform("update_title",n),t.badge(_)},t})();l.default=y}),98);
__d("IGDSCallFilled24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"M4.9 24.002q-.2 0-.4-.008a3.319 3.319 0 0 1-2.161-.92A18.862 18.862 0 0 1 .454 21.02a2.223 2.223 0 0 1 .171-2.893 14.91 14.91 0 0 1 5.829-4.014 2.5 2.5 0 0 1 1.896.186l.96.512a.888.888 0 0 0 .75.044 8.653 8.653 0 0 0 2.872-1.922 8.66 8.66 0 0 0 1.922-2.871.889.889 0 0 0-.044-.75l-.512-.962a2.495 2.495 0 0 1-.186-1.895 14.906 14.906 0 0 1 4.014-5.83 2.22 2.22 0 0 1 2.893-.17 18.89 18.89 0 0 1 2.056 1.884 3.323 3.323 0 0 1 .92 2.16c.206 5.552-3.946 10.564-6.44 13.057-2.432 2.433-7.264 6.446-12.654 6.446Z"}),t[0]=n):n=t[0];var a;return t[1]!==e?(a=s.jsx(r("IGDSSVGIconBase.react"),babelHelpers.extends({},e,{viewBox:"0 0 24 24",children:n})),t[1]=e,t[2]=a):a=t[2],a}var c=s.memo(u);l.default=c}),98);
__d("IGDSVideoChatFilled24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"M21.259 5.935q-.401.404-.877.88a2.998 2.998 0 0 0-.88 2.121v6.18a3 3 0 0 0 .878 2.121l.879.881A1.653 1.653 0 0 0 24 16.953V7.101a1.653 1.653 0 0 0-2.742-1.166Zm-7.075-3.408H3.818A3.823 3.823 0 0 0-.001 6.345v11.364a3.823 3.823 0 0 0 3.819 3.818h10.366a3.823 3.823 0 0 0 3.818-3.818V6.345a3.823 3.823 0 0 0-3.818-3.818Z",fillRule:"evenodd"}),t[0]=n):n=t[0];var a;return t[1]!==e?(a=s.jsx(r("IGDSSVGIconBase.react"),babelHelpers.extends({},e,{viewBox:"0 0 24 24",children:n})),t[1]=e,t[2]=a):a=t[2],a}var c=s.memo(u);l.default=c}),98);
__d("MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9685249484907022"}),null);
__d("MessengerCreateVideoMeetupLinkMutation.graphql",["MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"CreateVideoMeetupLinkResponsePayload",kind:"LinkedField",name:"create_video_meetup_link",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerCallInviteLink",kind:"LinkedField",name:"meetup_link",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_hash",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_audio_only",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MessengerCreateVideoMeetupLinkMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MessengerCreateVideoMeetupLinkMutation",selections:t},params:{id:n("MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation"),metadata:{},name:"MessengerCreateVideoMeetupLinkMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("MessengerCreateVideoMeetupLinkMutation",["MessengerCreateVideoMeetupLinkMutation.graphql","Promise","cr:1012418","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,o,a){return new(s||(s=n("Promise")))(function(i,l){var s,u,c,d,m,p,_,f,g,h,y;n("cr:1012418").commitMutation(t,{mutation:e!==void 0?e:e=n("MessengerCreateVideoMeetupLinkMutation.graphql"),onCompleted:function(t){var e,n,r,o,a=t==null||(e=t.create_video_meetup_link)==null||(e=e.meetup_link)==null?void 0:e.is_audio_only,s=t==null||(n=t.create_video_meetup_link)==null||(n=n.meetup_link)==null?void 0:n.link_url,u=t==null||(r=t.create_video_meetup_link)==null||(r=r.meetup_link)==null?void 0:r.link_hash,c=t==null||(o=t.create_video_meetup_link)==null||(o=o.meetup_link)==null?void 0:o.id;return s!=null&&u!=null&&a!=null?i({isAudioOnly:a,linkHash:u,linkId:c,linkUrl:s}):l({error:"Failed to create linkurl."})},onError:function(t){l(t)},optimisticUpdater:null,variables:{input:{client_mutation_id:"",funnel_session_id:a,link_options:{availability_settings_options:(o==null?void 0:o.linkSurface)==="MESSENGER_V2"?{join_permission:o==null?void 0:o.joinPermission,visibility_mode:(s=o==null?void 0:o.visibilityMode)!=null?s:"NONE"}:void 0,chat_mode:(u=o==null?void 0:o.chatMode)!=null?u:null,is_audio_only:(c=o==null?void 0:o.isAudioOnly)!=null?c:null,is_live_enabled:(d=o==null?void 0:o.isLiveEnabled)!=null?d:null,is_room_join_requestable:(m=o==null?void 0:o.joinRequestable)!=null?m:null,link_surface:(p=o==null?void 0:o.linkSurface)!=null?p:r("gkx")("20836")?"WORKPLACE":void 0,revocation_behavior:(_=o==null?void 0:o.revocationBehavior)!=null?_:null,should_allow_anonymous_guests:(f=o==null?void 0:o.allowAnonymousGuests)!=null?f:!0,supports_pages:(g=o==null?void 0:o.supportsPages)!=null?g:!1,supports_profile_plus:(h=o==null?void 0:o.supportsProfilePlus)!=null?h:!1,visibility_mode:(o==null?void 0:o.linkSurface)==="MESSENGER_V2"?void 0:(y=o==null?void 0:o.visibilityMode)!=null?y:"NONE"}}}})})}l.default=u}),98);
__d("RoomsLinkUtils",["ConstUriUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=o("ConstUriUtils").getUri(e),r=n==null?void 0:n.getDomain(),a=n==null||(t=n.stripTrailingSlash())==null?void 0:t.getPath();if(a==null)return null;if(r==="msngr.com")return a.substring(1);var i=/^\/v(id)?\//;if(r==="m.me"&&i.test(a))return a.replace(i,"");var l=/^\/groupcall\/LINK:/;return l.test(a)?a.replace(l,""):null}l.getRoomsLinkHash=e}),98);
__d("VideoChatLinksUserActionsMultiplexLogger",["cr:1443591"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1443591")}),98);
__d("XGroupCallControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/groupcall/{?call_context}/",Object.freeze({users_to_ring:[],has_video:!0,initialize_video:!0,auto_join:!1,use_joining_context:!1,has_seen_interstitial:!1,use_dapp:!1,is_e2ee_mandated:!1,use_www:!1}),void 0),s=e;l.default=s}),98);
__d("ZenonCallIdentifiersUtil",["Random"],(function(t,n,r,o,a,i,l){"use strict";function e(){return String(o("Random").uint32()+1)}l.generateZenonClientSessionID=e}),98);
__d("randomZenonNonce",["Random"],(function(t,n,r,o,a,i,l){"use strict";var e=2,s=6,u=36,c=2176782336;function d(){for(var t="",n=0;n<e;n++){for(var r=Math.floor(o("Random").random()*c).toString(u);r.length<s;)r="0"+r;t+=r}return t}l.default=d}),98);
__d("ZenonPreCallHookBuilderHelper",["ConstUriUtils","FBLogger","MessengerCreateVideoMeetupLinkMutation","Promise","RoomsLinkUtils","VideoChatLinksUserActionsMultiplexLogger","XGroupCallControllerRouteBuilder","ZenonActorHooks","ZenonCallIdentifiersUtil","ZenonCallWindowErrors","ZenonPeerID","ZenonSignalingProtocol","asyncToGeneratorRuntime","getErrorSafe","gkx","nullthrows","randomZenonNonce"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;var n=e.callInviteModel,a=e.callWindowController,i=n.getCurrentInvite();if(i===null)throw new(o("ZenonCallWindowErrors")).InviteNotFoundError;if(i.type!=="ringing"||i.context.type!=="thread")throw new(o("ZenonCallWindowErrors")).CannotAcceptInviteError;var l=r("randomZenonNonce")(),s=i.context.thread,u=a.initCall({context:{controllerParams:i.controllerParams,intent:"accept invite"},hideE2eeAttributions:t,isE2eeMandated:i.isE2eeMandated,joinContext:{thread:s!=null?s:{id:"0",type:2},type:"thread"},mediaType:i.requestingVideo?"video":"audio",nonce:l,representedID:i.receiverUserId}),c=u[0],d=u[1];n.accept(l,{isPopupBlocked:c===null}),yield d}),u.apply(this,arguments)}function c(e,t,n,r,o,a){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i,l){if(l===void 0&&(l={allowAnonymousGuests:!r("gkx")("20836")}),e===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;y(i,n,a).setEvent("meetup_attempt_create_meetup").log();try{var s=yield r("MessengerCreateVideoMeetupLinkMutation")(t,l,i),u=s.linkUrl;return u!=null?(y(i,n,a).setEvent("meetup_create_success").setVideoCallLinkURLRaw(u).log(),u):(y(i,n,a).setEvent("meetup_create_failed").log(),u)}catch(e){var c=r("getErrorSafe")(e);throw y(i,n,a).setEvent("meetup_create_failed").log(),y(i,n,a).setEvent("error").setErrorType("LinkCreationError "+c.name).setErrorDetails(c.message).log(),c}}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.actorID,i=t.callback_users,l=t.context,s=t.forceSkipChildLobby,u=s===void 0?!1:s,c=t.funnelSessionID,d=c===void 0?null:c,m=t.hasVideo,p=m===void 0?!0:m,_=t.linkUrl,f=t.referrerContext,y=f===void 0?null:f,C=t.skipLinkUrlRewrite,b=C===void 0?!1:C,v=t.startCallImmediately,S=v===void 0?!1:v,R=t.trigger;if(l===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;var L=l.callWindowController,E=l.incomingRingSDK,k=r("randomZenonNonce")(),I=o("ZenonCallIdentifiersUtil").generateZenonClientSessionID(),T=_;if(!b){var D,x=(D=o("ConstUriUtils").getUri(_))==null?void 0:D.getQueryParam("funnel_session_id"),$=g(_);T=h($,S?k:null,i,x!=null?String(x):d,u,y,a,R,p)}if(T==null)return(e||(e=n("Promise"))).reject("An invalid URI was provided");var P=L.initCall({context:{existingCall:null,intent:"start or join",invitees:[],signalingID:I},joinContext:{linkUrl:T,type:"link"},mediaType:"video",nonce:k,representedID:o("ZenonActorHooks").ZenonActor.getID()}),N=P[0],M=P[1];E.startCallIntent(k,{callTrigger:R!=null?R:"meetup_join",isE2eeMandated:!1,isPopupBlocked:N===null,isVideo:p,peerID:o("ZenonPeerID").ZenonMWPeerID,protocol:r("ZenonSignalingProtocol").MW,signalingID:I}),yield M}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.existingCall,a=t.extra,i=t.hideE2eeAttributions,l=t.invitees,s=t.isE2eeMandated,u=t.mediaType,c=t.representedID,d=t.thread,m=t.trigger;if(e===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;var p=e.callWindowController,_=e.incomingRingSDK,f=o("ZenonCallIdentifiersUtil").generateZenonClientSessionID(),g=r("randomZenonNonce")(),h=p.initCall({context:{existingCall:n,intent:"start or join",invitees:l,signalingID:f},extra:a,hideE2eeAttributions:i,isE2eeMandated:s,joinContext:{thread:d,type:"thread"},mediaType:u,nonce:g,representedID:c!=null?c:o("ZenonActorHooks").ZenonActor.getID()}),y=h[0],C=h[1];_.startCallIntent(g,{callTrigger:m,isE2eeMandated:s!=null?s:!1,isPopupBlocked:y===null,isVideo:u==="video",peerID:d.type===1?d.id:o("ZenonPeerID").ZenonMWPeerID,protocol:r("ZenonSignalingProtocol").MW,signalingID:f}),yield C}),f.apply(this,arguments)}function g(e){var t=o("RoomsLinkUtils").getRoomsLinkHash(e);return t==null&&r("FBLogger")("rtc_www").mustfix('Could not extract LinkHash from Video Chat Link. Link = "%s"',e),t}function h(e,t,n,o,a,i,l,s,u){if(e==null)return"";var c={call_context:"LINK:"+e,call_trigger:s!=null?s:"",has_video:u,users_to_ring:n!=null?n:[]};return t!=null&&(c.nonce=t),o!=null&&(c.funnel_session_id=o),a===!0&&(c.auto_join=!0),i!=null&&(c.referrer_context=i),l!=null&&(c.av=l),r("nullthrows")(r("XGroupCallControllerRouteBuilder").buildUri(c).getQualifiedUri()).toString()}function y(e,t,n){return new(r("VideoChatLinksUserActionsMultiplexLogger"))().setFunnelSessionIDRaw(e).setSurface(t).setComponent(n)}l.acceptCall=s,l.createMeetup=c,l.joinMeetup=m,l.startCall=_}),98);
__d("useZenonCallInvite",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e){var t=c(function(){return e?e.getCurrentInvite():null}),n=t[0],r=t[1];return u(function(){if(e){var t=e.addListener("callInvite",r);return function(){t.remove()}}else r(null)},[e]),n}l.default=d}),98);
__d("ZenonPreCallHookBuilder",["CometRelay","FBLogger","Promise","ZenonPreCallHookBuilderHelper","err","gkx","promiseDone","react","useZenonCallInvite"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useContext,m=u.useDebugValue,p=u.useEffect,_=6e4;function f(e){function t(t){var n=d(e);return c(function(){return o("ZenonPreCallHookBuilderHelper").acceptCall(n,t)},[n,t])}return t}function g(e){function t(){var t=d(e),n=r("useZenonCallInvite")(t?t.callInviteModel:null);return m(n),n}return t}function h(e,t){return function(n,o,a){function i(){var i=d(e),l=n(),s=o(),u=a(),m=t();return c(function(e){if(r("gkx")("24231")){var t=e.existingCall,n=e.thread;if(!i||!i.incomingRingSDK.isCallSupported({threadType:n.type,type:"thread"}))u(e);else switch(n.type){case 1:r("promiseDone")(m(babelHelpers.extends({},e,{invitees:[n.id]})));break;case 15:if(n.secureOneToOneThreadPeerId==null)throw r("err")("secureOneToOneThreadPeerId should be defined when starting a call from a secure 1:1 thread");r("promiseDone")(m(babelHelpers.extends({},e,{invitees:[n.secureOneToOneThreadPeerId]})));break;case 2:case 16:t===null||t.call_state==="NO_ONGOING_CALL"?l(e,function(t){r("promiseDone")(m(babelHelpers.extends({},e,{invitees:t})))}):s(e,function(){r("promiseDone")(m(babelHelpers.extends({},e,{invitees:[]})))});break;default:r("FBLogger")("rtc_www").blameToPreviousFrame().mustfix("Attempted to start RTC call for unsupported thread type %d",n.type)}}},[i,l,u,m,s])}return i}}function y(e,t){function n(){var n=d(e),r=t();p(function(){if(n&&r&&r.type==="ringing"){var e=window.setTimeout(function(){n.callInviteModel.decline("NoAnswerTimeout")},_);return function(){window.clearTimeout(e)}}},[n,r])}return n}function C(t){function a(){var a=d(t);return c(function(t){var i=t.existingCall,l=t.extra,s=t.hideE2eeAttributions,u=t.invitees,c=t.isE2eeMandated,d=t.mediaType,m=t.representedID,p=t.thread,_=t.trigger;return r("gkx")("24231")?o("ZenonPreCallHookBuilderHelper").startCall(a,{existingCall:i,extra:l,hideE2eeAttributions:s,invitees:u,isE2eeMandated:c,mediaType:d,representedID:m,thread:p,trigger:_}):(e||(e=n("Promise"))).resolve()},[a])}return a}function b(t){function a(){var a=d(t),i=o("CometRelay").useRelayEnvironment();return c(function(t,l,s,u){return r("gkx")("24231")?o("ZenonPreCallHookBuilderHelper").createMeetup(a,i,t,l,s,u):(e||(e=n("Promise"))).resolve(null)},[a,i])}return a}function v(t){function a(){var a=d(t);return c(function(t,i){if(i===void 0&&(i={}),!r("gkx")("24231"))return(e||(e=n("Promise"))).resolve();var l=i!=null?i:{},s=l.actorID,u=l.callbackUsers,c=l.mediaType,d=l.referrerContext,m=l.startCallImmediately,p=l.trigger;return o("ZenonPreCallHookBuilderHelper").joinMeetup({actorID:s,callback_users:u,context:a,forceSkipChildLobby:!1,hasVideo:c!=null?c==="video":!0,linkUrl:t,referrerContext:d,startCallImmediately:m,trigger:p})},[a])}return a}l.createAcceptCallCallbackHook=f,l.createCallInviteHook=g,l.createInviteAndStartCallCallbackHookFactory=h,l.createNoAnswerTimeoutHook=y,l.createStartCallCallbackHook=C,l.createCreateMeetupCallbackHook=b,l.createJoinMeetupCallbackHook=v}),98);
__d("IGWebPreCallHooks",["IGWebPreCallContext","ZenonPreCallHookBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e=o("ZenonPreCallHookBuilder").createAcceptCallCallbackHook(r("IGWebPreCallContext")),s=o("ZenonPreCallHookBuilder").createCallInviteHook(r("IGWebPreCallContext")),u=o("ZenonPreCallHookBuilder").createStartCallCallbackHook(r("IGWebPreCallContext"));l.useAcceptCallCallback=e,l.useCallInvite=s,l.useStartCallCallback=u}),98);
__d("XPolarisCallControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/call/",Object.freeze({has_video:!0,is_e2ee_mandated:!1,hide_e2ee_attributions:!1,users_to_ring:[]}),void 0),s=e;l.default=s}),98);
__d("PolarisCallNavigator",["PolarisAPIHelpers","PolarisCallGatingHelpers","PolarisNavigationUtils","XPolarisCallControllerRouteBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e="https://call.instagram.com";function s(t,n,a){a===void 0&&(a=null);var i=a===""?null:a,l;o("PolarisCallGatingHelpers").isCallsPathMigrationEnabled()?i!=null?l=r("XPolarisCallControllerRouteBuilder").buildURL({has_video:n,ig_thread_id:t,server_info_data:i}):l=r("XPolarisCallControllerRouteBuilder").buildURL({has_video:n,ig_thread_id:t}):l=o("PolarisAPIHelpers").appendQueryParameters(e,{has_video:n,ig_thread_id:t,server_info_data:i}),o("PolarisNavigationUtils").openURLWithFullPageReload(l,{openInNewTab:!0})}l.launchCall=s}),98);
__d("useBlinkDocumentTitle",["DocumentTitle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(3),n,a;t[0]!==e?(n=function(){if(e==null)return c;var t=r("DocumentTitle").blink(e);return function(){t.stop()}},a=[e],t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]),s(n,a)}function c(){}l.default=u}),98);
__d("PolarisIncomingCallBlinkingTitle.react",["fbt","PolarisCallGatingHelpers","react","react-compiler-runtime","useBlinkDocumentTitle"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(2),n=e.callerName,r;return t[0]!==n?(r=o("PolarisCallGatingHelpers").isWebCallingEnabled()&&n!=null?u.jsx(d,{callerName:n}):null,t[0]=n,t[1]=r):r=t[1],r}function d(e){var t=o("react-compiler-runtime").c(2),n=e.callerName,a;return t[0]!==n?(a=s._(/*BTDS*/"{caller_name} est\u00e1 ligando",[s._param("caller_name",n)]),t[0]=n,t[1]=a):a=t[1],r("useBlinkDocumentTitle")(a),null}l.default=c}),226);
__d("PolarisIncomingCall.react",["fbt","CometPressable.react","IGCoreModal.react","IGDSBox.react","IGDSCallFilled24Icon.react","IGDSTextVariants.react","IGDSVideoChatFilled24Icon.react","IGDSXFilledIcon.react","IGWebPreCallContext","IGWebPreCallHooks","PolarisCallGatingHelpers","PolarisCallNavigator","PolarisDirectLogger","PolarisDirectStrings","PolarisIGCoreText","PolarisIncomingCallActions","PolarisIncomingCallBlinkingTitle.react","PolarisReactRedux.react","PolarisUserAvatar.react","ZenonCallInviteModelTypes","bx","intlList","promiseDone","react","usePolarisMQTT"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useContext,m=c.useEffect;function p(){var e,t=function(t){if(t&&t.type===o("ZenonCallInviteModelTypes").CallInviteModelType.ringing){var e,n,a=(e=t.controllerParams.serverInfoData)!=null?e:"",i=t.requestingVideo,l=(n=t.controllerParams.appMessages)==null?void 0:n.ring_data,s="",u="",c="",d=[];if(l!=null){var m=JSON.parse(l),p=m.display_name,_=m.display_uri,f=m.group_name,g=m.ig_thread_id,h=m.participant_usernames;if(c=p,u=f,s=g,d.push(_),!u){var y=h;try{y=JSON.parse(h)}catch(e){}u=Array.isArray(y)?r("intlList")([c].concat(y),r("intlList").CONJUNCTIONS.NONE).toString():c}}return{avatarUris:d,callerName:c,hasVideo:i,igThreadId:s,serverInfoData:a,threadName:u}}else return null},n=o("IGWebPreCallHooks").useCallInvite(),a=(e=n==null?void 0:n.isE2eeMandated)!=null?e:!1,i=o("IGWebPreCallHooks").useAcceptCallCallback(!0),l=o("PolarisReactRedux.react").useDispatch(),c=r("usePolarisMQTT")(),p=d(r("IGWebPreCallContext")),_=p?p.callInviteModel:null,f=o("PolarisReactRedux.react").useSelector(function(e){return e.incomingCall}),g=f.acknowledged,h=f.avatarUris,y=f.callerName,C=f.hasVideo,b=f.igThreadId,v=f.serverInfoData,S=f.threadName,R=n?t(n):null;R!=null?(h=R.avatarUris,y=R.callerName,C=R.hasVideo,b=R.igThreadId,v=R.serverInfoData,S=R.threadName,g=!1):o("PolarisCallGatingHelpers").isWebCallingEnabled()&&(g=!0);var L=function(){o("PolarisDirectLogger").DirectLogger.logDirectEvent("IncomingCall","join_button_click",{has_video:C,ig_thread_id:b,server_info_data:v}),a?r("promiseDone")(i({trigger:"incoming_call_modal"})):(l(o("PolarisIncomingCallActions").ackCall()),b!=null&&o("PolarisCallNavigator").launchCall(b,!!C,v))},E=!g&&v!=null&&b!=null&&o("PolarisCallGatingHelpers").isWebCallingEnabled();m(function(){E&&o("PolarisDirectLogger").DirectLogger.logDirectEvent("IncomingCall","incoming_call_impression",{has_video:C,ig_thread_id:b,server_info_data:v})},[C,b,E,v]);var k=function(){o("PolarisDirectLogger").DirectLogger.logDirectEvent("IncomingCall","decline_button_click",{has_video:C,ig_thread_id:b,server_info_data:v}),o("PolarisCallGatingHelpers").isWebCallingEnabled()?_==null||_.decline():(l(o("PolarisIncomingCallActions").ackCall()),v!=null&&c!=null&&r("promiseDone")(c.sendRtcHangupRequest(v)))},I=C?s._(/*BTDS*/"Liga\u00e7\u00e3o de v\u00eddeo recebida\u2026"):s._(/*BTDS*/"Liga\u00e7\u00e3o de \u00e1udio recebida\u2026");return E?u.jsxs(r("IGCoreModal.react"),{children:[u.jsx("audio",{autoPlay:!0,loop:!0,children:u.jsx("source",{src:r("bx").getURL(r("bx")("6022")),type:"audio/m4a"})}),u.jsx(r("PolarisIncomingCallBlinkingTitle.react"),{callerName:y}),u.jsxs(r("IGDSBox.react"),{alignItems:"center",height:312,padding:8,position:"relative",width:400,children:[u.jsx(r("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:h&&h.length>0?h[0]:null,size:92}),u.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:4,maxWidth:400,paddingX:8,position:"relative",children:u.jsx(r("PolarisIGCoreText"),{display:"truncated",Element:"h2",size:"headline2",textAlign:"center",weight:"semibold",zeroMargin:!0,children:S})}),u.jsx(r("IGDSBox.react"),{direction:"row",justifyContent:"center",marginBottom:8,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",zeroMargin:!0,children:I})}),u.jsxs(r("IGDSBox.react"),{direction:"row",position:"relative",children:[u.jsx(r("IGDSBox.react"),{marginEnd:6,position:"relative",children:u.jsx(r("CometPressable.react"),{onPress:k,children:u.jsx("div",{className:"x6s0dn4 xvs2etk xg3wpu6 x1jwbhkm xgg4q86 x78zum5 xdd8jsf xl56j7k xvni27 x1mkg91h",children:u.jsx(r("IGDSXFilledIcon.react"),{alt:o("PolarisDirectStrings").DECLINE_CALL_MODAL_STRING,color:"web-always-white","data-testid":void 0})})})}),u.jsx(r("CometPressable.react"),{onPress:L,children:u.jsx("div",{className:"x6s0dn4 xvs2etk xg3wpu6 x1jwbhkm xgg4q86 x78zum5 xdd8jsf xl56j7k xvni27 x44zu8b",children:C?u.jsx(r("IGDSVideoChatFilled24Icon.react"),{alt:o("PolarisDirectStrings").JOIN_CALL_MODAL_STRING,color:"web-always-white"}):u.jsx(r("IGDSCallFilled24Icon.react"),{alt:o("PolarisDirectStrings").JOIN_CALL_MODAL_STRING,color:"web-always-white"})})})]})]})]}):null}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),226);/*FB_PKG_DELIM*/
__d("IGDSDialogFooter.react",["IGDSBox.react","IGDSDivider.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(12),n=e.children,a=e.endAdornment,i=e.height,l=e.startAdornment,u=i===void 0?50:i,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(r("IGDSDivider.react"),{style:"elevated"}),t[0]=c):c=t[0];var d;t[1]!==l?(d=l!=null&&s.jsx(r("IGDSBox.react"),{alignItems:"start",flex:"grow",justifyContent:"center",paddingX:4,position:"relative",children:l}),t[1]=l,t[2]=d):d=t[2];var m;t[3]!==n?(m=s.jsx(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",position:"relative",children:n}),t[3]=n,t[4]=m):m=t[4];var p;t[5]!==a?(p=a!=null&&s.jsx(r("IGDSBox.react"),{alignItems:"end",flex:"grow",justifyContent:"center",paddingX:4,position:"relative",children:a}),t[5]=a,t[6]=p):p=t[6];var _;return t[7]!==u||t[8]!==d||t[9]!==m||t[10]!==p?(_=s.jsxs(s.Fragment,{children:[c,s.jsx(r("IGDSBox.react"),{position:"relative",width:"100%",children:s.jsxs(r("IGDSBox.react"),{direction:"row",height:u,justifyContent:"between",position:"relative",children:[d,m,p]})})]}),t[7]=u,t[8]=d,t[9]=m,t[10]=p,t[11]=_):_=t[11],_}l.default=u}),98);
__d("InstagramGenericSettingStrings",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=s._(/*BTDS*/"Configura\u00e7\u00f5es salvas."),u=s._(/*BTDS*/"Ocorreu um problema ao salvar suas configura\u00e7\u00f5es."),c=s._(/*BTDS*/"Ocorreu um erro. Tente novamente mais tarde.");l.GENERIC_SETTINGS_SAVED=e,l.GENERIC_SETTINGS_ERROR=u,l.GENERIC_ERROR=c}),226);
__d("InstagramWebAgeCollectionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5139"),s=o("FalcoLoggerInternal").create("instagram_web_age_collection",e),u=s;l.default=u}),98);
__d("PolarisPlatformBadge",["PolarisConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=o("PolarisConfig").getPlatformInstallBadgeLinks();switch(e){case"ios":return(t=a==null?void 0:a.ios)!=null?t:"";case"android":return(n=a==null?void 0:a.android)!=null?n:"";case"windows_nt_10":return(r=a==null?void 0:a.windows_nt_10)!=null?r:""}return""}l.default=e}),98);
__d("PolarisAppInstallLink.react",["fbt","PolarisConfigConstants","PolarisFastLink.react","PolarisIgLiteCarbonUpsellsUtils","PolarisLoggedOutCtaClickLogger","PolarisNavigationUtils","PolarisPlatformBadge","polarisGetAppPlatform","polarisGetInstallAppHref","polarisLogAction","react","stylex","usePolarisPageID"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u.useMemo,m={root:{marginInlineEnd:"x1xegmmw x1j53mea",$$css:!0}};function p(t){var n=t.campaign,a=t.children,i=t.ctaTypeV2,l=t["data-testid"],u=t.isDismissible,p=u===void 0?!1:u,_=t.isForIGCarbonPath,f=t.medium,g=t.onClick,h=t.platform,y=t.role,C=t.smallHeight,b=t.xstyle,v=h!=null&&h.length>0?h:o("polarisGetAppPlatform").getAppPlatform(),S=_===!0||o("PolarisIgLiteCarbonUpsellsUtils").isIgLiteCarbonUpsellsEligible(),R=r("usePolarisPageID")(),L=function(t){g&&(g(t),t.isDefaultPrevented())||(t.preventDefault(),r("polarisLogAction")("appInstallClick",{medium:k(),platform:v,source:n}),o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("app_store_open",i,R,{isDismissible:p}),o("PolarisNavigationUtils").openURLWithFullPageReload(E()))},E=function(){return S?o("polarisGetInstallAppHref").getInstallIGLiteCarbonAppHref(n,k(),v):o("polarisGetInstallAppHref").getInstallAppHref(n,k(),v)},k=function(){return f!=null?f:a!=null?"installLink":"badge"},I=d(function(){var e,t;switch(v){case o("PolarisConfigConstants").appPlatformTypes.ANDROID:t=s._(/*BTDS*/"Baixar no Google Play"),e=r("PolarisPlatformBadge")("android");break;case o("PolarisConfigConstants").appPlatformTypes.IOS:t=s._(/*BTDS*/"Baixar na App Store"),e=r("PolarisPlatformBadge")("ios");break;case o("PolarisConfigConstants").appPlatformTypes.WINDOWSNT10:t=s._(/*BTDS*/"Baixar na Microsoft"),e=r("PolarisPlatformBadge")("windows_nt_10");break}var n;return e==null||e===""?n=null:n=c.jsx("img",{alt:t,className:_===!0?"xwvwv9b":{0:"",2:"x1vqgdyp",1:"x10w6t97",3:"x10w6t97"}[(C!==!0)<<1|(C===!0)<<0],src:e}),{altText:t,badgeImage:n}},[_,v,C]);return c.jsx(r("PolarisFastLink.react"),{"aria-label":I.altText,className:(e||(e=r("stylex")))(m.root,b),"data-testid":void 0,href:E(),onClick:L,role:y,children:a!=null?a:I.badgeImage})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),226);
__d("PolarisAppStoreLauncher.react",["InstagramODS","PolarisUA","URI","polarisGetInstallAppHref","react","react-compiler-runtime","usePolarisDynamicIpadUpsell"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect,c="launch_app_store",d="instagram_carbon",m="utm_campaign",p="utm_medium";function _(e){var t=o("PolarisUA").isMobile()||e,n=new URLSearchParams(location.search);if(!t||!n.get(c))return null;var a=new URL(location.href),i=n.get(d)==="true";if(a.searchParams.delete(c),a.searchParams.delete(d),history.replaceState({},document.title,a.toString()),i){r("InstagramODS").incr("web.logging.preload_ods.iglite_open_app_store"),r("InstagramODS").incr("web.logging.preload_ods.polaris_iglite_open_app_store");var l=n.get(m),s=n.get(p);return o("polarisGetInstallAppHref").getInstallIGLiteCarbonAppHref(l!=null&&l!==""?l:"instagramlitecarbon",s!=null?s:"")}return o("polarisGetInstallAppHref").getInstallAppHref()}function f(){var t=o("react-compiler-runtime").c(3),n=o("usePolarisDynamicIpadUpsell").usePolarNewIpadUpsellExperience(),a,i;return t[0]!==n?(a=function(){var t=_(n);t!=null&&(e||(e=r("URI"))).goURIOnWindow(t)},i=[n],t[0]=n,t[1]=a,t[2]=i):(a=t[1],i=t[2]),u(a,i),null}l.default=f}),98);
__d("PolarisBirthdayConstants",[],(function(t,n,r,o,a,i){"use strict";var e={INPUT_AGE:"input_age",LEARN_MORE:"learn_more",LOG_OUT:"log_out",SEE_CONFIRMATION:"see_confirmation",SEE_PAGE:"see_page",SUBMIT_AGE:"submit_age"},l={CHECKPOINT:"checkpoint"};i.StepTypes=e,i.EntrypointTypes=l}),66);
__d("PolarisBirthdayFormInput.react",["PolarisAgeCollectionHelpers","PolarisDOBFieldSelect.react","PolarisDateHelpers","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useState;function c(e){var t=o("react-compiler-runtime").c(13),n=e.birthday,a=e.className,i=e.flex,l=e.onBirthdayChange,c=e.shouldShowRedesignedSignup,d=c===void 0?!1:c,m,p,_;t[0]!==n?(m=n!=null?o("PolarisDateHelpers").dateStringToDateType(n):o("PolarisDateHelpers").getOneYearAgoDateType(),p=u,_=o("PolarisAgeCollectionHelpers").getDOBInvalidInputMessage(m),t[0]=n,t[1]=m,t[2]=p,t[3]=_):(m=t[1],p=t[2],_=t[3]);var f=p(_),g=f[0],h=f[1],y;t[4]!==l?(y=function(t){h(o("PolarisAgeCollectionHelpers").getDOBInvalidInputMessage(t)),l(t)},t[4]=l,t[5]=y):y=t[5];var C=y,b;return t[6]!==a||t[7]!==m||t[8]!==g||t[9]!==i||t[10]!==C||t[11]!==d?(b=s.jsx(r("PolarisDOBFieldSelect.react"),{className:a,date:m,errorColor:"ig-secondary-text",errorMessage:g,flex:i,onDateChange:C,shouldShowRedesignedSignup:d,showAge:!1}),t[6]=a,t[7]=m,t[8]=g,t[9]=i,t[10]=C,t[11]=d,t[12]=b):b=t[12],b}l.default=c}),98);
__d("PolarisBirthdayHelpers",["InstagramWebAgeCollectionFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,o,a){var i=n!=null?n.year.toString()+"-"+n.month.toString().padStart(2,"0")+"-"+n.day.toString().padStart(2,"0"):"";r("InstagramWebAgeCollectionFalcoEvent").log(function(){return{collected_birthday:i,endpoint:t,exception_message:o,exception_trace:a,step:e}})}l.logBirthdayAction=e}),98);
__d("PolarisBirthdaysAdditionalInfoModal.react",["ix","IGCoreImage.react","IGCoreModal.react","IGDSBox.react","IGDSText.react","IGDSTextVariants.react","PolarisAgeCollectionHelpers","PolarisBirthdayConstants","PolarisBirthdayHelpers","PolarisExternalLink.react","PolarisIGCoreButton.react","PolarisIGCoreModalHeader.react","PolarisNavigationUtils","PolarisUA","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(15),n=e.entrypoint,a=e.helpLink,i=e.onClose,l=a==null?o("PolarisAgeCollectionHelpers").DATA_POLICY_LINK:a;n!=null&&o("PolarisBirthdayHelpers").logBirthdayAction(o("PolarisBirthdayConstants").StepTypes.LEARN_MORE,n);var c;t[0]!==i?(c=u.jsx(r("PolarisIGCoreModalHeader.react"),{onClose:i,children:o("PolarisAgeCollectionHelpers").BIRTHDAYS_HEADER}),t[0]=i,t[1]=c):c=t[1];var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx(r("IGDSBox.react"),{padding:1,position:"relative",children:u.jsx(r("IGCoreImage.react"),{alt:o("PolarisAgeCollectionHelpers").BIRTHDAY_ICON_ALT_TEXT,src:{dark:s("877412"),light:s("877413")}})}),t[2]=d):d=t[2];var m;t[3]===Symbol.for("react.memo_cache_sentinel")?(m=u.jsx(r("IGDSBox.react"),{marginTop:1,padding:2,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextTitle,{children:o("PolarisAgeCollectionHelpers").BIRTHDAYS_ON_IG_TITLE})}),t[3]=m):m=t[3];var p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p=u.jsx(r("IGDSBox.react"),{padding:3,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:o("PolarisAgeCollectionHelpers").BIRTHDAYS_ON_IG_BODY})}),t[4]=p):p=t[4];var _;t[5]!==l?(_=o("PolarisUA").isMobile()&&u.jsx(r("IGDSBox.react"),{padding:2,position:"relative",children:u.jsxs(r("PolarisExternalLink.react"),{href:l,onClick:function(){return o("PolarisNavigationUtils").openExternalURL(l)},children:[o("PolarisAgeCollectionHelpers").LEARN_MORE," "]})}),t[5]=l,t[6]=_):_=t[6];var f;t[7]!==_?(f=u.jsxs(r("IGDSBox.react"),{alignItems:"center",marginBottom:5,marginEnd:7,marginStart:7,marginTop:5,position:"relative",children:[d,m,p,_]}),t[7]=_,t[8]=f):f=t[8];var g;t[9]!==l?(g=!o("PolarisUA").isMobile()&&u.jsx("div",{className:"x6s0dn4 x1yvgwvq x13fuv20 x178xt8z x9f619 x1ypdohk x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu x11x8uw5 xl56j7k xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x11njtxf",children:u.jsx(r("IGDSBox.react"),{position:"relative",width:"100%",children:u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return o("PolarisNavigationUtils").openExternalURL(l)},children:u.jsx(r("IGDSText.react"),{color:"primaryButton",size:"body",textAlign:"center",weight:"semibold",children:o("PolarisAgeCollectionHelpers").LEARN_MORE})})})}),t[9]=l,t[10]=g):g=t[10];var h;return t[11]!==c||t[12]!==f||t[13]!==g?(h=u.jsxs(r("IGCoreModal.react"),{"aria-label":o("PolarisAgeCollectionHelpers").BIRTHDAYS_HEADER,size:o("PolarisUA").isMobile()?"large":"default",children:[c,f,g]}),t[11]=c,t[12]=f,t[13]=g,t[14]=h):h=t[14],h}l.default=c}),98);
__d("PolarisMiniToast.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),n=e.className,r=e.text,a,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"x1qjc9v5 x1b2oxx8 x1obq294 x5a5i1n xde0f50 x15x8krk x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 x1q0g3np x2lah0s xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak x1gg8mnh xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 x11njtxf xh8yej3"},i={className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x1iyjqo2 xs83m0k xln7xf2 xk390pu xl56j7k xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x11njtxf"},l={className:"x972fbf x10w94by x1qhh985 x14e42zd x9bdzbf xln7xf2 x1f6kntn xd4r4e8 xdj266r x14z9mp xat24cr x1lziwak xlrnmfh x6ikm8r x10wlt62 xz9dl7a xyri2b xsag5q8 x1c1uobl x2b8uid x11njtxf"},t[0]=a,t[1]=i,t[2]=l):(a=t[0],i=t[1],l=t[2]);var u;t[3]!==r?(u=s.jsx("div",babelHelpers.extends({},a,{children:s.jsx("div",babelHelpers.extends({},i,{children:s.jsx("p",babelHelpers.extends({},l,{children:r}))}))})),t[3]=r,t[4]=u):u=t[4];var c;return t[5]!==n||t[6]!==u?(c=s.jsx("div",{className:n,children:u}),t[5]=n,t[6]=u,t[7]=c):c=t[7],c}l.default=u}),98);
__d("PolarisOrBar.react",["PolarisAuthStrings","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={bar:{backgroundColor:"x11mr3az",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",height:"xjm9jq1",position:"x1n2onr6",top:"xwtuau4",$$css:!0},defaultColor:{backgroundColor:"x11mr3az",$$css:!0},elevatedColor:{backgroundColor:"x1e9ncm4",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(14),a=t.isElevated,i=t.shouldShowRedesignedSignup,l=a===void 0?!1:a,s=i===void 0?!1:i,d=l!==!0&&c.defaultColor,m=l===!0&&c.elevatedColor,p;n[0]!==d||n[1]!==m?(p=(e||(e=r("stylex")))(c.bar,d,m),n[0]=d,n[1]=m,n[2]=p):p=n[2];var _=p,f;n[3]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x78zum5 x1q0g3np"},n[3]=f):f=n[3];var g;n[4]!==_?(g=u.jsx("div",{className:_}),n[4]=_,n[5]=g):g=n[5];var h;n[6]!==s?(h=!s&&u.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x1roi4f4 x78zum5 xdt5ytf x1c4vz4f x2lah0s x1nxh6w3 x1s688f x1ly1vsg xdj266r x14iifvp xat24cr xnkmj2t xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 xtvhhri x11njtxf",children:o("PolarisAuthStrings").OR}),n[6]=s,n[7]=h):h=n[7];var y;n[8]!==_?(y=u.jsx("div",{className:_}),n[8]=_,n[9]=y):y=n[9];var C;return n[10]!==g||n[11]!==h||n[12]!==y?(C=u.jsxs("div",babelHelpers.extends({},f,{children:[g,h,y]})),n[10]=g,n[11]=h,n[12]=y,n[13]=C):C=n[13],C}l.default=d}),98);
__d("PolarisSnackbar.react",["cx","CometAccessibilityAnnouncement.react","PolarisIGCoreButton.react","joinClasses","react","warning"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$1=function(e){e.preventDefault(),t.props.onActionClick&&t.props.onActionClick(e)},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.actionText,n=e.className,o=e.onActionClick,a=e.text;return r("warning")(t!=null&&o!=null||t==null&&o==null,"Having action text without a callback, or vice versa, makes no sense"),u.jsxs("div",{className:r("joinClasses")(n,"_abmn"),children:[u.jsxs("div",{className:"_abmo",children:[u.jsx("p",{className:"_abmp",children:a}),u.jsx(r("CometAccessibilityAnnouncement.react"),{children:a})]}),t!=null&&u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,color:"ig-primary-button",onClick:this.$1,children:t})]})},t})(u.Component);l.default=c}),98);
__d("PolarisStopDeletionDialog.react",["IGCoreDialog.react","PolarisLoginLogger","PolarisStopDeletionDialogStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t=o("react-compiler-runtime").c(13),n=e.onClose,r=e.onStopDeletion,a=e.stopDeletionDate,i=e.stopDeletionNonce,l=e.username,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],t[0]=c):c=t[0],u(d,c);var m;t[1]!==a||t[2]!==l?(m=o("PolarisStopDeletionDialogStrings").getDeletionBodyText(l,a),t[1]=a,t[2]=l,t[3]=m):m=t[3];var p;t[4]!==r||t[5]!==i?(p=s.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-primary-button",onClick:function(){return r(i)},children:o("PolarisStopDeletionDialogStrings").DELETION_KEEP_ACCOUNT}),t[4]=r,t[5]=i,t[6]=p):p=t[6];var _;t[7]!==n?(_=s.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:n,children:o("PolarisStopDeletionDialogStrings").DELETION_BACK_TO_LOGIN}),t[7]=n,t[8]=_):_=t[8];var f;return t[9]!==m||t[10]!==p||t[11]!==_?(f=s.jsxs(o("IGCoreDialog.react").IGCoreDialog,{body:m,title:o("PolarisStopDeletionDialogStrings").DELETION_TITLE,children:[p,_]}),t[9]=m,t[10]=p,t[11]=_,t[12]=f):f=t[12],f}function d(){o("PolarisLoginLogger").logLoginEvent({event_category:"stop_account_deletion_init",event_flow:"login_manual",event_name:"stop_account_deletion_dialog_shown",event_step:"stop_account_deletion"})}l.default=c}),98);
__d("PolarisToastWrapper.react",["cx","BasePortal.react","PolarisEventLoop","PolarisMiniToast.react","PolarisReactRedux.react","PolarisSnackbar.react","joinClasses","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$1=null,n.state={currentToast:t.toast,hasNextToast:!1,nextToast:null},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentWillUnmount=function(){r("PolarisEventLoop").clearTimeout(this.$1)},t.getDerivedStateFromProps=function(t,n){return n.currentToast!==t.toast?{hasNextToast:!0,nextToast:t.toast}:null},n.componentDidUpdate=function(t,n){var e=this;!n.hasNextToast&&this.state.hasNextToast&&(r("PolarisEventLoop").clearTimeout(this.$1),this.$1=r("PolarisEventLoop").setTimeout(function(){e.$1=null,e.setState(function(e){return{currentToast:e.nextToast,hasNextToast:!1,nextToast:null}})},200))},n.render=function(){var e=this.state.currentToast,t=r("joinClasses")(this.props.className,"_acb3"),n="_acb4"+(this.state.hasNextToast?" _acb5":""),o=r("joinClasses")(this.props.className,"_acb6"),a="_acb7"+(this.state.hasNextToast?" _acb8":""),i=null,l=null;if(e)switch(e==null?void 0:e.toastType){case"MINI_TOAST":i=u.jsx(r("PolarisMiniToast.react"),{className:"_acb9",text:e.text});break;case"DEFAULT_TOAST":default:l=u.jsx(r("PolarisSnackbar.react"),{actionText:e.actionText,className:"_acba",onActionClick:e.actionHandler,text:e.text});break}return u.jsxs(r("BasePortal.react"),{children:[u.jsx("div",{className:t,children:u.jsx("div",{className:n,children:l})}),u.jsx("div",{className:o,children:u.jsx("div",{className:a,children:i})})]})},t})(u.PureComponent);function d(e){return{toast:e.toasts.toast}}var m=o("PolarisReactRedux.react").connect(d)(c);l.default=m}),98);
__d("PolarisUnfollowDialogContentContainer.react",["PolarisConnectionsLogger","PolarisReactRedux.react","PolarisRelationshipActionUnfollowUser","PolarisUnfollowDialogContent.react","polarisUserSelectors","react","react-compiler-runtime","usePolarisFollowUser"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect;function m(e){var t=o("react-compiler-runtime").c(27),n=e.analyticsContext,a=e.analyticsExtra,i=e.onClose,l=e.onUnfollowUser,u=e.size,c=e.userId,m=u===void 0?90:u,_=o("PolarisReactRedux.react").useDispatch(),f=r("usePolarisFollowUser")(),g;t[0]!==c?(g=function(t){return o("polarisUserSelectors").getUserByIdOrThrows(t,c)},t[0]=c,t[1]=g):g=t[1];var h=o("PolarisReactRedux.react").useSelector(g),y=h.isPrivate,C=h.profilePictureUrl,b=h.username,v;t[2]!==n||t[3]!==c?(v=function(t){o("PolarisConnectionsLogger").logConnectionAction({containerModule:n,eventName:t,targetId:c})},t[2]=n,t[3]=c,t[4]=v):v=t[4];var S=v,R,L;t[5]!==S?(R=function(){S("unfollow_dialog_impresssion")},L=[S],t[5]=S,t[6]=R,t[7]=L):(R=t[6],L=t[7]),d(R,L);var E;t[8]!==n||t[9]!==a||t[10]!==_||t[11]!==S||t[12]!==i||t[13]!==f||t[14]!==l||t[15]!==c?(E=function(){S("unfollow_dialog_confirmed"),l!=null?l(c,n,a):(_(o("PolarisRelationshipActionUnfollowUser").unfollowUser(c,n,a)),f(c,!1).catch(p)),i(!0)},t[8]=n,t[9]=a,t[10]=_,t[11]=S,t[12]=i,t[13]=f,t[14]=l,t[15]=c,t[16]=E):E=t[16];var k=E,I;t[17]!==S||t[18]!==i?(I=function(){S("unfollow_dialog_cancelled"),i(!1)},t[17]=S,t[18]=i,t[19]=I):I=t[19];var T=I,D;return t[20]!==T||t[21]!==k||t[22]!==y||t[23]!==C||t[24]!==m||t[25]!==b?(D=s.jsx(r("PolarisUnfollowDialogContent.react"),{isUserPrivate:y,onCancel:T,onUnfollow:k,profilePictureSize:m,profilePictureUrl:C,username:b}),t[20]=T,t[21]=k,t[22]=y,t[23]=C,t[24]=m,t[25]=b,t[26]=D):D=t[26],D}function p(e){throw e}l.default=m}),98);
__d("PolarisUnfollowDialog.react",["IGDSDialogLegacy.react","PolarisUnfollowDialogContentContainer.react","QPLUserFlow","qpl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(14),n=e.analyticsContext,a=e.analyticsExtra,i=e.onClose,l=e.onUnfollowUser,u=e.size,c=e.userId,d=u===void 0?90:u,m;t[0]!==i?(m=function(t){t||r("QPLUserFlow").endCancel(r("qpl")._(379193744,"299")),i()},t[0]=i,t[1]=m):m=t[1];var p=m,_;t[2]!==p?(_=function(){p(!1)},t[2]=p,t[3]=_):_=t[3];var f;t[4]!==n||t[5]!==a||t[6]!==p||t[7]!==l||t[8]!==d||t[9]!==c?(f=s.jsx(r("PolarisUnfollowDialogContentContainer.react"),{analyticsContext:n,analyticsExtra:a,onClose:p,onUnfollowUser:l,size:d,userId:c}),t[4]=n,t[5]=a,t[6]=p,t[7]=l,t[8]=d,t[9]=c,t[10]=f):f=t[10];var g;return t[11]!==_||t[12]!==f?(g=s.jsx(r("IGDSDialogLegacy.react"),{onClose:_,children:f}),t[11]=_,t[12]=f,t[13]=g):g=t[13],g}l.default=u}),98);
__d("coerceRouteParams",["coerceRouteParam"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return Object.keys(t).reduce(function(n,o){var a=t[o];if(a!=null){var i=r("coerceRouteParam")(e[o],a.coercibleType,a.enumType),l=i.valid,s=i.value,u=s!=null?s:a.default;l&&(n[o]=u),a.legacyNames.forEach(function(e){n[e]=u})}return n},{})}l.default=e}),98);
__d("getViewportDimensions",["UserAgent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=null;return function(){var t=document.body;return t==null?null:((e==null||!t.contains(e))&&(e=document.createElement("div"),e.style.left=Number.MAX_SAFE_INTEGER+"px",e.style.width="100%",e.style.height="100%",e.style.position="fixed",t.appendChild(e)),e)}})();function s(){var e;return document.documentElement&&(e=document.documentElement.clientWidth),e==null&&document.body&&(e=document.body.clientWidth),e||0}function u(){var e;return document.documentElement&&(e=document.documentElement.clientHeight),e==null&&document.body&&(e=document.body.clientHeight),e||0}function c(){return{width:window.innerWidth||s(),height:window.innerHeight||u()}}c.withoutScrollbars=function(){return r("UserAgent").isPlatform("Android")?c():{width:s(),height:u()}},c.layout=function(){var t,n,r=e();return{width:(t=r==null?void 0:r.clientWidth)!=null?t:s(),height:(n=r==null?void 0:r.clientHeight)!=null?n:u()}},l.default=c}),98);
__d("isEmail",[],(function(t,n,r,o,a,i){var e=/^[\w!#\$%&\'\*\+\/\=\?\^`\{\|\}~\-]+(:?\.[\w!#\$%&\'\*\+\/\=\?\^`\{\|\}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i;function l(t){return e.test(t)}i.default=l}),66);/*FB_PKG_DELIM*/
__d("DateStrings",["fbt"],(function(t,n,r,o,a,i,l,s){var e,u,c,d,m,p,_,f,g;function h(e){return p||(p=[s._(/*BTDS*/"Domingo"),s._(/*BTDS*/"Segunda"),s._(/*BTDS*/"Ter\u00e7a"),s._(/*BTDS*/"Quarta"),s._(/*BTDS*/"Quinta"),s._(/*BTDS*/"Sexta"),s._(/*BTDS*/"S\u00e1bado")]),p[e]}function y(e){return f||(f=[s._(/*BTDS*/"DOMINGO"),s._(/*BTDS*/"SEGUNDA"),s._(/*BTDS*/"TER\u00c7A"),s._(/*BTDS*/"QUARTA"),s._(/*BTDS*/"QUINTA"),s._(/*BTDS*/"SEXTA"),s._(/*BTDS*/"S\u00c1BADO")]),f[e]}function C(e){return _||(_=[s._(/*BTDS*/"Dom"),s._(/*BTDS*/"Seg"),s._(/*BTDS*/"Ter"),s._(/*BTDS*/"Qua"),s._(/*BTDS*/"Qui"),s._(/*BTDS*/"Sex"),s._(/*BTDS*/"S\u00e1b")]),_[e]}function b(e){return g||(g=[s._(/*BTDS*/"DOM"),s._(/*BTDS*/"SEG"),s._(/*BTDS*/"TER"),s._(/*BTDS*/"QUA"),s._(/*BTDS*/"QUI"),s._(/*BTDS*/"SEX"),s._(/*BTDS*/"S\u00c1B")]),g[e]}function v(){e=[s._(/*BTDS*/"janeiro"),s._(/*BTDS*/"fevereiro"),s._(/*BTDS*/"mar\u00e7o"),s._(/*BTDS*/"abril"),s._(/*BTDS*/"maio"),s._(/*BTDS*/"junho"),s._(/*BTDS*/"julho"),s._(/*BTDS*/"agosto"),s._(/*BTDS*/"setembro"),s._(/*BTDS*/"outubro"),s._(/*BTDS*/"novembro"),s._(/*BTDS*/"dezembro")]}function S(t){e||v();var n=e;if(!n){var r=new Error("MONTH_NAMES should be initialized");throw r.stack,r}return n[t-1]}function R(){e||v();var t=e;if(!t){var n=new Error("MONTH_NAMES should be initialized");throw n.stack,n}return t.slice()}function L(e){return d||(d=[s._(/*BTDS*/"JANEIRO"),s._(/*BTDS*/"FEVEREIRO"),s._(/*BTDS*/"MAR\u00c7O"),s._(/*BTDS*/"ABRIL"),s._(/*BTDS*/"MAIO"),s._(/*BTDS*/"JUNHO"),s._(/*BTDS*/"JULHO"),s._(/*BTDS*/"AGOSTO"),s._(/*BTDS*/"SETEMBRO"),s._(/*BTDS*/"OUTUBRO"),s._(/*BTDS*/"NOVEMBRO"),s._(/*BTDS*/"DEZEMBRO")]),d[e-1]}function E(e){return u||(u=[s._(/*BTDS*/"jan"),s._(/*BTDS*/"fev"),s._(/*BTDS*/"mar"),s._(/*BTDS*/"abr"),s._(/*BTDS*/"mai"),s._(/*BTDS*/"jun"),s._(/*BTDS*/"jul"),s._(/*BTDS*/"ago"),s._(/*BTDS*/"set"),s._(/*BTDS*/"out"),s._(/*BTDS*/"nov"),s._(/*BTDS*/"dez")]),u[e-1]}function k(e){return c||(c=[s._(/*BTDS*/"JAN"),s._(/*BTDS*/"FEV"),s._(/*BTDS*/"MAR"),s._(/*BTDS*/"ABR"),s._(/*BTDS*/"MAI"),s._(/*BTDS*/"JUN"),s._(/*BTDS*/"JUL"),s._(/*BTDS*/"AGO"),s._(/*BTDS*/"SET"),s._(/*BTDS*/"OUT"),s._(/*BTDS*/"NOV"),s._(/*BTDS*/"DEZ")]),c[e-1]}function I(e){return m||(m=["",s._(/*BTDS*/"st"),s._(/*BTDS*/"nd"),s._(/*BTDS*/"rd"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"st"),s._(/*BTDS*/"nd"),s._(/*BTDS*/"rd"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"th"),s._(/*BTDS*/"st")]),m[e]}function T(e){switch(e){case 1:return s._(/*BTDS*/"1\u00ba");case 2:return s._(/*BTDS*/"2\u00ba");case 3:return s._(/*BTDS*/"3\u00ba");case 4:return s._(/*BTDS*/"4\u00ba");case 5:return s._(/*BTDS*/"5\u00ba");case 6:return s._(/*BTDS*/"6\u00ba");case 7:return s._(/*BTDS*/"7\u00ba");case 8:return s._(/*BTDS*/"8\u00ba");case 9:return s._(/*BTDS*/"9\u00ba");case 10:return s._(/*BTDS*/"10\u00ba");case 11:return s._(/*BTDS*/"11\u00ba");case 12:return s._(/*BTDS*/"12\u00ba");case 13:return s._(/*BTDS*/"13\u00ba");case 14:return s._(/*BTDS*/"14\u00ba");case 15:return s._(/*BTDS*/"15\u00ba");case 16:return s._(/*BTDS*/"16\u00ba");case 17:return s._(/*BTDS*/"17\u00ba");case 18:return s._(/*BTDS*/"18\u00ba");case 19:return s._(/*BTDS*/"19\u00ba");case 20:return s._(/*BTDS*/"20\u00ba");case 21:return s._(/*BTDS*/"21\u00ba");case 22:return s._(/*BTDS*/"22\u00ba");case 23:return s._(/*BTDS*/"23\u00ba");case 24:return s._(/*BTDS*/"24\u00ba");case 25:return s._(/*BTDS*/"25\u00ba");case 26:return s._(/*BTDS*/"26\u00ba");case 27:return s._(/*BTDS*/"27\u00ba");case 28:return s._(/*BTDS*/"28\u00ba");case 29:return s._(/*BTDS*/"29\u00ba");case 30:return s._(/*BTDS*/"30\u00ba");case 31:return s._(/*BTDS*/"31\u00ba");default:throw new Error("Invalid day of month.")}}function D(){return s._(/*BTDS*/"Dia:")}function x(){return s._(/*BTDS*/"M\u00eas:")}function $(){return s._(/*BTDS*/"Ano:")}function P(){return s._(/*BTDS*/"Hora:")}function N(){return s._(/*BTDS*/"Minuto:")}function M(){return s._(/*BTDS*/"dd")}function w(){return s._(/*BTDS*/"mm")}function A(){return s._(/*BTDS*/"aaaa")}function F(){return s._(/*BTDS*/"h")}function O(){return s._(/*BTDS*/"min")}function B(e){return e<12?s._(/*BTDS*/"da manh\u00e3"):s._(/*BTDS*/"da tarde\/noite")}function W(e){return e<12?s._(/*BTDS*/"da manh\u00e3"):s._(/*BTDS*/"da tarde\/noite")}l.getWeekdayName=h,l.getUppercaseWeekdayName=y,l.getWeekdayNameShort=C,l.getUppercaseWeekdayNameShort=b,l._initializeMonthNames=v,l.getMonthName=S,l.getMonthNames=R,l.getUppercaseMonthName=L,l.getMonthNameShort=E,l.getUppercaseMonthNameShort=k,l.getOrdinalSuffix=I,l.getDayOfMonth=T,l.getDayLabel=D,l.getMonthLabel=x,l.getYearLabel=$,l.getHourLabel=P,l.getMinuteLabel=N,l.getDayPlaceholder=M,l.getMonthPlaceholder=w,l.getYearPlaceholder=A,l.getHourPlaceholder=F,l.getMinutePlaceholder=O,l.get12HourClockSuffix=B,l.getUppercase12HourClockSuffix=W}),226);
__d("IntlDateFormatsCLDRWidthEnum",[],(function(t,n,r,o,a,i){var e=Object.freeze({FULL:"full",LONG:"long",MEDIUM:"medium",SHORT:"short"});i.default=e}),66);
__d("RegionDatetimePatterns",[],(function(t,n,r,o,a,i){var e=Object.freeze({DATE_SHORT:"date_short",DATETIME_SHORT_SHORT:"dateTime_short_short",TIME_SHORT:"time_short",TIME_MEDIUM:"time_medium",J:"j"});i.default=e}),66);
__d("UserAgent_DEPRECATED",[],(function(t,n,r,o,a,i){var e=!1,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S;function R(){if(!e){e=!0;var t=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),r=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(y=/\b(iPhone|iP[ao]d)/.exec(t),C=/\b(iP[ao]d)/.exec(t),g=/Android/i.exec(t),b=/FBAN\/\w+;/i.exec(t),v=/FBAN\/mLite;/i.exec(t),S=/Mobile/i.exec(t),h=!!/Win64/.exec(t),n){l=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN,l&&document&&document.documentMode&&(l=document.documentMode);var o=/(?:Trident\/(\d+.\d+))/.exec(t);m=o?parseFloat(o[1])+4:l,s=n[2]?parseFloat(n[2]):NaN,u=n[3]?parseFloat(n[3]):NaN,c=n[4]?parseFloat(n[4]):NaN,c?(n=/(?:Chrome\/(\d+\.\d+))/.exec(t),d=n&&n[1]?parseFloat(n[1]):NaN):d=NaN}else l=s=u=d=c=NaN;if(r){if(r[1]){var a=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);p=a?parseFloat(a[1].replace("_",".")):!0}else p=!1;_=!!r[2],f=!!r[3]}else p=_=f=!1}}function L(){return R(),l}function E(){return R(),m>l}function k(){return L()&&h}function I(){return R(),s}function T(){return R(),u}function D(){return R(),c}function x(){return D()}function $(){return R(),d}function P(){return R(),_}function N(){return R(),p}function M(){return R(),f}function w(){return R(),y}function A(){return R(),y||C||g||S}function F(){return R(),v!=null?null:b}function O(){return R(),g}function B(){return R(),C}i.ie=L,i.ieCompatibilityMode=E,i.ie64=k,i.firefox=I,i.opera=T,i.webkit=D,i.safari=x,i.chrome=$,i.windows=P,i.osx=N,i.linux=M,i.iphone=w,i.mobile=A,i.nativeApp=F,i.android=O,i.ipad=B}),66);
__d("isTextNode",["isNode"],(function(t,n,r,o,a,i,l){function e(e){return r("isNode")(e)&&e.nodeType==3}l.default=e}),98);
__d("containsNode",["isTextNode"],(function(t,n,r,o,a,i,l){function e(t,n){return!t||!n?!1:t===n?!0:r("isTextNode")(t)?!1:r("isTextNode")(n)?e(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1}l.default=e}),98);
__d("createArrayFromMixed",["invariant"],(function(t,n,r,o,a,i,l,s){function e(e){var t=e.length;if(!Array.isArray(e)&&(typeof e=="object"||typeof e=="function")||s(0,3914),typeof t=="number"||s(0,3915),t===0||t-1 in e||s(0,3916),typeof e.callee!="function"||s(0,3917),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function u(e){return!!e&&(typeof e=="object"||typeof e=="function")&&"length"in e&&!("setInterval"in e)&&typeof e.nodeType!="number"&&(Array.isArray(e)||"callee"in e||"item"in e)}function c(t){return u(t)?Array.isArray(t)?t.slice():e(t):[t]}l.default=c}),98);
__d("getCLDRLocalizedFormat",["CLDRDateFormatConfig","FBLogger","IntlDateFormatsCLDRWidthEnum","RegionDatetimePatterns","flipObject"],(function(t,n,r,o,a,i){"use strict";var e=n("CLDRDateFormatConfig").CLDRConfigeratorFormats,l=n("CLDRDateFormatConfig").CLDRRegionalConfigeratorFormats,s=n("flipObject")(n("RegionDatetimePatterns"));function u(t){if(t==null)throw n("FBLogger")("internationalization").mustfixThrow('Format: "%s", not supported by configurator.',t);var r,o,a=t.split("_"),i=a[0],u=babelHelpers.arrayLikeToArray(a).slice(1),m=i+"Formats";switch(t in s?o=l:o=e,m){case"dateFormats":case"timeFormats":var p=c(u[0]);if(p==null)throw n("FBLogger")("internationalization").mustfixThrow('Format: "%s", category: "%s", with unsupported width: "undefined"',t,m);if(r=o[m][p],r==null)throw n("FBLogger")("internationalization").mustfixThrow('Format: "%s", category: "%s", width: "%s", with unsupported localization',t,m,p);break;case"dateTimeFormats":var _=c(u[0]),f=c(u[1]);if(_==null||f==null)throw n("FBLogger")("internationalization").mustfixThrow('Format: "%s", category: "%s", with unsupported width: dateFormatKey="undefined" timeFormatKey="undefined"',t,m);r=o[m][_];var g=o.dateFormats[_],h=o.timeFormats[f];if(r==null)throw n("FBLogger")("internationalization").mustfixThrow('Format: "%s", category: "%s", date width: "%s", and time width: "%s", with unsupported localization',t,m,_,f);r=r.replace("{0}",h).replace("{1}",g);break;default:m="availableFormats";var y=i;if(y.includes("j")&&(y=d(y,o.timeFormats)),r=o[m][y],r==null)throw n("FBLogger")("internationalization").mustfixThrow('Format: "%s", with key: "%s", not supported by CLDR',t,y)}return r}function c(e){if(e==null)throw n("FBLogger")("internationalization").mustfixThrow("Expected CLDR width key to not be null");return n("IntlDateFormatsCLDRWidthEnum")[e.toUpperCase()]}function d(e,t){var r,o=t.short;return o==null?(n("FBLogger")("formatDate").blameToPreviousFile().warn('CLDR `timeFormat`, width `short` required for 24 hour localization not found for availableKey: "%s"',e),r="h"):r=o.includes("H")?"H":"h",e.replace("j",r)}a.exports=u}),null);
__d("intlGetDateNumerics",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n,r=t.utc===!0;return r?n={dateDay:e.getUTCDate(),dateDayOfWeek:e.getUTCDay(),dateMonth:e.getUTCMonth(),dateYear:e.getUTCFullYear(),dateHours:e.getUTCHours(),dateMinutes:e.getUTCMinutes(),dateSeconds:e.getUTCSeconds(),dateMilliseconds:e.getUTCMilliseconds()}:n={dateDay:e.getDate(),dateDayOfWeek:e.getDay(),dateMonth:e.getMonth(),dateYear:e.getFullYear(),dateHours:e.getHours(),dateMinutes:e.getMinutes(),dateSeconds:e.getSeconds(),dateMilliseconds:e.getMilliseconds()},n}i.default=e}),66);
__d("padNumber",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=e.toString();return n.length>=t?n:"0".repeat(t-n.length)+n}i.default=e}),66);
__d("intlRenderJSDateSymbol",["DateStrings","FBLogger","padNumber"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a,i){i===void 0&&(i=0);var l=n.skipSuffixLocalization===!0,s=i,u="";switch(t){case"\\":if(s++,a==null)throw r("FBLogger")("internationalization").mustfixThrow("Only deprecated calls to `intlRenderJSDateSymbol()` use `localizedJSFormat`.");u=a.charAt(s);break;case"d":u=r("padNumber")(e.dateDay,2);break;case"j":u=e.dateDay;break;case"S":u=o("DateStrings").getOrdinalSuffix(e.dateDay);break;case"D":u=o("DateStrings").getWeekdayNameShort(e.dateDayOfWeek);break;case"l":u=o("DateStrings").getWeekdayName(e.dateDayOfWeek);break;case"F":case"f":u=o("DateStrings").getMonthName(e.dateMonth+1);break;case"M":u=o("DateStrings").getMonthNameShort(e.dateMonth+1);break;case"m":u=r("padNumber")(e.dateMonth+1,2);break;case"n":u=e.dateMonth+1;break;case"Y":u=e.dateYear;break;case"y":u=(""+e.dateYear).slice(2);break;case"a":l?u=e.dateHours<12?"am":"pm":u=o("DateStrings").get12HourClockSuffix(e.dateHours);break;case"A":l?u=e.dateHours<12?"AM":"PM":u=o("DateStrings").getUppercase12HourClockSuffix(e.dateHours);break;case"g":e.dateHours===0||e.dateHours===12?u="12":u=e.dateHours%12;break;case"G":u=e.dateHours;break;case"h":e.dateHours===0||e.dateHours===12?u="12":u=r("padNumber")(e.dateHours%12,2);break;case"H":u=r("padNumber")(e.dateHours,2);break;case"i":u=r("padNumber")(e.dateMinutes,2);break;case"s":u=r("padNumber")(e.dateSeconds,2);break;case"X":u=r("padNumber")(e.dateMilliseconds,3);break;default:u=t}return{idx:s,rendered:String(u)}}l.default=e}),98);
__d("intlRenderCLDRDate",["CLDRDateFormatConfig","FBLogger","intlRenderJSDateSymbol"],(function(t,n,r,o,a,i,l){"use strict";var e=/\w+/;function s(e,t,n){for(var o=r("CLDRDateFormatConfig").intlDateSpecialChars,a="",i="",l=!1,s=[],c,d=e.split(o.cldrDelimiter+o.singleQuote).join(o.singleQuoteHolder),m=0,p=d.length;m<p;m++){var _=d.charAt(m);l?(a.length!==0&&(c=u(a,n,t),s.push(c.rendered),a=""),_===o.cldrDelimiter?(l=!1,s.push(i),i=""):_===o.singleQuoteHolder?i+=o.singleQuote:i+=_):_===o.cldrDelimiter?l=!0:a.length===0||a[0]===_?a+=_:_===o.singleQuoteHolder?a+=o.singleQuote:(c=u(a,n,t),s.push(c.rendered),a=_)}if(i.length!==0)throw r("FBLogger")("internationalization").mustfixThrow('Format: "%s" must contain closing str literal delimiter',d);return a.length!==0&&(c=u(a,n,t),s.push(c.rendered)),s.join("")}function u(e,t,n){var o=c(e);return r("intlRenderJSDateSymbol")(t,o,n)}function c(t){if(t in r("CLDRDateFormatConfig").CLDRToPHPSymbolConversion)return r("CLDRDateFormatConfig").CLDRToPHPSymbolConversion[t];if(e.test(t))throw r("FBLogger")("internationalization").mustfixThrow('Unsupported CLDR symbol: "%s". If string literal, wrap in delimiters',t);return t}i.exports=s}),34);
__d("formatDate",["CLDRDateFormatConfig","DateFormatConfig","FBLogger","IsInternSite","getCLDRLocalizedFormat","getErrorSafe","intlGetDateNumerics","intlRenderCLDRDate","intlRenderJSDateSymbol"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({today:null,yesterday:null,thisWeek:null,thisMonth:null,thisYear:null,withinDay:null,withinWeek:null,withinMonth:null,withinYear:null,older:null,future:null,allOtherTimes:null});function s(e,t,n,o){var a=e,i=n||{skipSuffixLocalization:!1,skipPatternLocalization:!1,utc:!1,formatInternal:!1,throwCLDRError:!1};if(t==null||t===""||a==null||!(a||a===0))return"";if(typeof a=="string"&&(isNaN(Number(a))&&r("FBLogger")("i18n-formatDate").event("date_string_must_be_timestamp").blameToPreviousFile().mustfix('The date passed to formatDate is a string, but not a timestamp, formatDate expects strings to be a string representation of a Unix timestamp but was passed "%s"',a),a=parseInt(a,10)),typeof a=="number"&&(a=new Date(a*1e3)),!(a instanceof Date))throw r("FBLogger")("internationalization").mustfixThrow("The date passed to formatDate must be either a unix timestamp or JavaScript date object.");if(isNaN(a.getTime()))throw r("FBLogger")("internationalization").mustfixThrow("Invalid date passed to formatDate");a.getTime()>=1e15&&r("FBLogger")("i18n-formatDate").event("date_too_far_in_future").blameToPreviousFile().info("The date passed to formatDate is too far in the future. Did you mix up milliseconds/seconds?");var l=d(a,t),s=r("intlGetDateNumerics")(a,i);return u(l,s,i,o)}s.DEFAULT_FORMAT="M j, Y g:i A",s.periodNames=Object.freeze(Object.keys(e));function u(e,t,n,o){var a=e,i=!!n.skipPatternLocalization,l=n.formatInternal===!0;if(!i&&(l||!r("IsInternSite").is_intern_site)){if(e in r("CLDRDateFormatConfig").supportedPHPFormatsKeys)try{var s=r("CLDRDateFormatConfig").supportedPHPFormatsKeys[e],u=r("getCLDRLocalizedFormat")(s);return r("intlRenderCLDRDate")(u,n,t)}catch(e){var d=r("getErrorSafe")(e);if(r("FBLogger")("i18n-formatDate").event("CLDR_date_format_render_error").blameToPreviousFile().catching(d).mustfix("CLDR date format render error"),n.throwCLDRError===!0)throw d}else if(r("DateFormatConfig").formats[e])a=r("DateFormatConfig").formats[e];else if(!r("IsInternSite").is_intern_site){if(e.length!==1)throw r("FBLogger")("internationalization").mustfixThrow('Trying to localize an unsupported date format: "%s"',e)}}return c(a,n,t,o)}function c(e,t,n,o){for(var a=[],i=0;i<e.length;i++){var l=void 0;o===!0&&e.charAt(i)==="a"?(l="A",a.push(" ")):l=e.charAt(i);var s=r("intlRenderJSDateSymbol")(n,l,t,e,i);a.push(s.rendered),i=s.idx}return a.join("")}function d(e,t){var n=s.DEFAULT_FORMAT;if(typeof t=="string")return t;if(typeof t=="object"){var o=e.getTime();for(var a of m()){var i=t[a.name];if(i!=null&&a.start<=o&&o<a.end)return i}return r("FBLogger")("i18n-formatDate").event("matching_period_format_not_found").blameToPreviousFile().warn('Matching period not found for date "%s", using default format "%s". Current timestamp: "%s"',o,n,Date.now()),n}else return r("FBLogger")("i18n-formatDate").event("invalid_format_argument").blameToPreviousFile().warn('Called with invalid format "%s" (type: %s) for date "%s", using default: %s',t,typeof t,e.getTime(),n),n}function m(){var e=new Date,t=e.getTime(),n=e.getFullYear(),o=e.getMonth(),a=new Date(n,e.getMonth()+1,0).getDate(),i=new Date(n,1,29).getMonth()===1?366:365,l=1e3*60*60*24,s=new Date(e.setHours(0,0,0,0)),u=new Date(n,o,s.getDate()+1),c=e.getDate()-(e.getDay()-r("DateFormatConfig").weekStart+6)%7,d=new Date(t).setDate(c),m=new Date(t).setDate(c+7),p=new Date(n,o,1),_=new Date(n,o,a+1),f=new Date(n,0,1),g=new Date(n+1,0,1);return[{name:"today",start:s.getTime(),end:u.getTime()},{name:"withinDay",start:t-l,end:t+l},{name:"yesterday",start:s.getTime()-l,end:s.getTime()-1},{name:"thisWeek",start:d,end:m},{name:"withinWeek",start:t-l*7,end:t+l*7},{name:"thisMonth",start:p.getTime(),end:_.getTime()},{name:"withinMonth",start:t-l*a,end:t+l*a},{name:"thisYear",start:f.getTime(),end:g.getTime()},{name:"withinYear",start:t-l*i,end:t+l*i},{name:"older",start:-1/0,end:t},{name:"future",start:t,end:1/0},{name:"allOtherTimes",start:-1/0,end:1/0}]}var p=s;l.default=p}),98);
__d("usePolarisLocalStorageState",["FBLogger","PolarisWebStorage","getErrorSafe","keyMirror","react","useJSON"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState,d=r("keyMirror")({ads_manager_ads_slider_stats_v1:null,advantage_audience_tooltip_stats:null,covered_comments_nux_counter:0,feed_creation_discovery_tooltip_shown:null,ig_boost_on_web_advantage_plus_placement_new_badge_impression_count:0,ig_boost_on_web_automatic_objective_new_badge_impression_count_v2:0,ig_boost_on_web_automatic_objective_new_badge_row_click_count_v2:0,ig_boost_on_web_automatic_objective_nux_shown_v2:null,ig_boost_on_web_sales_objective_new_badge_impression_count:0,ig_boost_on_web_sales_objective_new_badge_row_click_count:0,ig_boost_on_web_sales_objective_nux_shown:null,ig_web_ad_tools_autoreload_tooltip_stats:null,ig_web_afterparty_ads_slider_stats_v5:null,ig_web_boost_continuous_ads_tooltip_shown:null,ig_web_boost_fb_liquidity_ctwa_tooltip_shown:null,ig_web_boost_fb_liquidity_pv_tooltip_shown:null,ig_web_boost_fb_liquidity_sales_tooltip_shown:null,ig_web_boost_fb_liquidity_tooltip_shown_counter:0,ig_web_boost_fb_liquidity_tooltip_shown_counter_for_boost_again_and_draft_upsell:0,ig_web_boost_fb_liquidity_wv_tooltip_shown:null,ig_web_boost_interstitial_nux_viewed:null,ig_web_boost_text_gen_variations_tooltip_shown_counter:0,ig_web_multi_boost_interstitial_shown:null,immersive_viewer_scroll_nux_tooltip_shown:null});function m(e,t){var n,a=(n=o("PolarisWebStorage").getLocalStorage())==null?void 0:n.getItem(e),i=r("useJSON")(a!=null?a:null),l=c(i!=null?i:t),s=l[0],d=l[1];return u(function(){var t=o("PolarisWebStorage").getLocalStorage();if(s!=null&&t!=null)try{var n;t.setItem(e,(n=JSON.stringify(s))!=null?n:"")}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("ig_web").catching(a)}},[e,s]),[s,d]}l.useLocalStorageState=m}),98);/*FB_PKG_DELIM*/
__d("IGDSActionDialog.react",["IGDSDialogLegacy.react","IGDSTextVariants.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(26),n=e.ariaLabel,a=e.body,i=e.children,l=e.closeButtonPosition,u=e["data-testid"],c=e.disableMediaMargin,d=e.enablePopInAnimation,m=e.forceTop,p=e.forwardRef,_=e.isVisible,f=e.media,g=e.onModalClose,h=e.size,y=e.title,C=l===void 0?"hidden":l,b=m===void 0?!1:m,v=h===void 0?"default":h,S=!!f,R=y!=null||a!=null,L;t[0]===Symbol.for("react.memo_cache_sentinel")?(L={className:"x78zum5 xdt5ytf xl56j7k"},t[0]=L):L=t[0];var E;t[1]!==c||t[2]!==f?(E=f!=null&&s.jsx("div",babelHelpers.extends({},{0:{className:"x1qjc9v5 xl56j7k x1crbq5u xmp7c8h x19qqan6 xlep54o x14dv08r"},1:{className:"x1qjc9v5 xl56j7k xdj266r x14z9mp xat24cr x1lziwak x14l7nz5 x8z4y6v x1gut22 x1pwwqoy"}}[(c!=null)<<0],{children:f})),t[1]=c,t[2]=f,t[3]=E):E=t[3];var k;t[4]!==a||t[5]!==S||t[6]!==R||t[7]!==y?(k=R&&s.jsxs("div",{"aria-level":"1",className:"x1crbq5u x5x8j7v x19qqan6 x1dol6g5 x2b8uid x14dv08r",role:"heading",children:[y!=null&&(S?s.jsx(o("IGDSTextVariants.react").IGDSTextHeadline2,{elementType:"h2",children:y}):s.jsx(o("IGDSTextVariants.react").IGDSTextTitle,{elementType:"h1",children:y})),a!=null&&s.jsx("div",{className:"xyamay9",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",children:a})})]}),t[4]=a,t[5]=S,t[6]=R,t[7]=y,t[8]=k):k=t[8];var I;t[9]!==i?(I=i!=null&&s.jsx("div",{className:"x78zum5 xdt5ytf x1crbq5u xvrdyt3 x179zr98",children:i}),t[9]=i,t[10]=I):I=t[10];var T;t[11]!==u||t[12]!==E||t[13]!==k||t[14]!==I?(T=s.jsxs("div",babelHelpers.extends({},L,{"data-testid":void 0,children:[E,k,I]})),t[11]=u,t[12]=E,t[13]=k,t[14]=I,t[15]=T):T=t[15];var D;return t[16]!==n||t[17]!==C||t[18]!==d||t[19]!==b||t[20]!==p||t[21]!==_||t[22]!==g||t[23]!==v||t[24]!==T?(D=s.jsx(r("IGDSDialogLegacy.react"),{closeButtonPosition:C,enablePopInAnimation:d,forceTop:b,isVisible:_,label:n,onClose:g,ref:p,size:v,children:T}),t[16]=n,t[17]=C,t[18]=d,t[19]=b,t[20]=p,t[21]=_,t[22]=g,t[23]=v,t[24]=T,t[25]=D):D=t[25],D}l.default=u}),98);
__d("IGDSDialogItem.react",["IGDSBox.react","IGDSSpinner.react","react","react-compiler-runtime","shouldUseIGDSPrismButton","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={item:{backgroundColor:"xjbqb8w",borderBottomWidth:"x1qhh985",borderInlineEndWidth:"x10w94by",borderInlineStartWidth:"x14e42zd",borderTopColor:"x1yvgwvq",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",cursor:"x1ypdohk",fontSize:"xvs91rp",lineHeight:"x1evy7pa",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",minHeight:"x1wxaq2x",paddingTop:"x1iorvi4",paddingInlineEnd:"xf159sx",paddingBottom:"xjkvuk6",paddingInlineStart:"xmzvs34",textAlign:"x2b8uid",userSelect:"x87ps6o",verticalAlign:"xxymvpz",width:"xh8yej3",":active_backgroundColor":"x52vrxo",":active_opacity":"x4gyw5p",$$css:!0},itemDanger:{color:"xkmlbd1",fontWeight:"x1xlr1w8",$$css:!0},itemDisabled:{color:"x1roi4f4",cursor:"xt0e3qv",$$css:!0},itemPrimary:{color:"x173jzuc",fontWeight:"x1xlr1w8",$$css:!0},itemPrimaryPrism:{color:"x1t4m9lo",fontWeight:"x1xlr1w8",$$css:!0},itemSecondary:{color:"x5n08af",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(15),a=t.children,i=t.color,l=t.disabled,s=t.forwardRef,d=t.loading,m=t.onClick,p=t.onMouseEnter,_=t.testid,f=i===void 0?"secondaryButton":i,g=l===void 0?!1:l,h=d===void 0?!1:d,y;n[0]===Symbol.for("react.memo_cache_sentinel")?(y=r("shouldUseIGDSPrismButton")(),n[0]=y):y=n[0];var C=y,b;n[1]!==f||n[2]!==g?(b=(e||(e=r("stylex"))).props([c.item,f==="errorOrDestructive"&&c.itemDanger,f==="primaryButton"?C?c.itemPrimaryPrism:c.itemPrimary:void 0,f==="secondaryButton"&&c.itemSecondary,g&&c.itemDisabled]),n[1]=f,n[2]=g,n[3]=b):b=n[3];var v=h||g,S;n[4]!==a||n[5]!==h?(S=h===!0?u.jsx(r("IGDSBox.react"),{alignItems:"center",children:u.jsx(r("IGDSSpinner.react"),{size:"small"})}):a,n[4]=a,n[5]=h,n[6]=S):S=n[6];var R;return n[7]!==s||n[8]!==m||n[9]!==p||n[10]!==b||n[11]!==v||n[12]!==S||n[13]!==_?(R=u.jsx("button",babelHelpers.extends({},b,{"data-testid":void 0,disabled:v,onClick:m,onMouseEnter:p,ref:s,tabIndex:0,children:S})),n[7]=s,n[8]=m,n[9]=p,n[10]=b,n[11]=v,n[12]=S,n[13]=_,n[14]=R):R=n[14],R}function m(e){var t=o("react-compiler-runtime").c(3),n=e.children,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={className:"xjbqb8w xt0e3qv xvs91rp xdj266r x14z9mp xat24cr x1lziwak x1wxaq2x x1iorvi4 xf159sx xjkvuk6 xmzvs34 x2b8uid x87ps6o"},t[0]=r):r=t[0];var a;return t[1]!==n?(a=u.jsx("div",babelHelpers.extends({},r,{children:n})),t[1]=n,t[2]=a):a=t[2],a}l.IGDSDialogItem=d,l.IGDSDialogSection=m}),98);
__d("IGDSConfirmDialog.react",["fbt","IGDSActionDialog.react","IGDSDialogItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(19),n=e.body,a=e.cancelLabel,i=e.confirmLabel,l=e.confirmLoading,c=e.destructiveConfirm,d=e.onClose,m=e.onConfirm,p=e.testid,_=e.title,f;t[0]!==a?(f=a===void 0?s._(/*BTDS*/"Cancelar"):a,t[0]=a,t[1]=f):f=t[1];var g=f,h;t[2]!==i?(h=i===void 0?s._(/*BTDS*/"OK"):i,t[2]=i,t[3]=h):h=t[3];var y=h,C=c===void 0?!1:c,b;t[4]!==y||t[5]!==l||t[6]!==C||t[7]!==m?(b=m!=null&&y!=null&&u.jsx(o("IGDSDialogItem.react").IGDSDialogItem,{color:C?"errorOrDestructive":"primaryButton",loading:l,onClick:m,testid:void 0,children:y}),t[4]=y,t[5]=l,t[6]=C,t[7]=m,t[8]=b):b=t[8];var v;t[9]!==g||t[10]!==d?(v=d!=null&&g!=null&&u.jsx(o("IGDSDialogItem.react").IGDSDialogItem,{onClick:d,testid:void 0,children:g}),t[9]=g,t[10]=d,t[11]=v):v=t[11];var S;return t[12]!==n||t[13]!==d||t[14]!==b||t[15]!==v||t[16]!==p||t[17]!==_?(S=u.jsxs(r("IGDSActionDialog.react"),{body:n,"data-testid":void 0,isVisible:!0,onModalClose:d,size:"default",title:_,children:[b,v]}),t[12]=n,t[13]=d,t[14]=b,t[15]=v,t[16]=p,t[17]=_,t[18]=S):S=t[18],S}l.default=c}),226);
__d("PolarisPostBlockConfirmDialog.react",["fbt","IGDSConfirmDialog.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(10),n=e.isBlockedByViewer,a=e.onClose,i=e.username,l;t[0]!==n||t[1]!==i?(l=n?s._(/*BTDS*/"{Username of current profile} foi bloqueado",[s._param("Username of current profile",i)]):s._(/*BTDS*/"Voc\u00ea desbloqueou {Username of current profile}.",[s._param("Username of current profile",i)]),t[0]=n,t[1]=i,t[2]=l):l=t[2];var c=l,d;t[3]!==n?(d=n?s._(/*BTDS*/"Voc\u00ea poder\u00e1 desbloquear essa pessoa a qualquer momento no perfil dela."):s._(/*BTDS*/"Voc\u00ea poder\u00e1 bloquear essa pessoa quando quiser no perfil dela."),t[3]=n,t[4]=d):d=t[4];var m=d,p;t[5]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"Ignorar"),t[5]=p):p=t[5];var _;return t[6]!==m||t[7]!==c||t[8]!==a?(_=u.jsx(r("IGDSConfirmDialog.react"),{body:m,cancelLabel:p,onClose:a,testid:void 0,title:c}),t[6]=m,t[7]=c,t[8]=a,t[9]=_):_=t[9],_}l.default=c}),226);
__d("PolarisPreBlockConfirmDialog.react",["fbt","IGDSConfirmDialog.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(14),n=e.isBlockedByViewer,a=e.onClose,i=e.onConfirm,l=e.username,c;t[0]!==n||t[1]!==l?(c=n?s._(/*BTDS*/"Desbloquear {Username of current profile}?",[s._param("Username of current profile",l)]):s._(/*BTDS*/"Bloquear {Username of current profile}?",[s._param("Username of current profile",l)]),t[0]=n,t[1]=l,t[2]=c):c=t[2];var d=c,m;t[3]!==n?(m=n?s._(/*BTDS*/"Agora essa pessoa poder\u00e1 ver seus posts e seguir voc\u00ea no Instagram. O Instagram n\u00e3o a avisar\u00e1 que ela foi desbloqueada."):s._(/*BTDS*/"A pessoa n\u00e3o poder\u00e1 encontrar seu perfil, seus posts nem seus stories no Instagram. O Instagram n\u00e3o a avisar\u00e1 que voc\u00ea a bloqueou."),t[3]=n,t[4]=m):m=t[4];var p=m,_;t[5]!==n?(_=n?s._(/*BTDS*/"Desbloquear"):s._(/*BTDS*/"Bloquear"),t[5]=n,t[6]=_):_=t[6];var f=_,g;t[7]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"Cancelar"),t[7]=g):g=t[7];var h;return t[8]!==p||t[9]!==f||t[10]!==d||t[11]!==a||t[12]!==i?(h=u.jsx(r("IGDSConfirmDialog.react"),{body:p,cancelLabel:g,confirmLabel:f,destructiveConfirm:!0,onClose:a,onConfirm:i,testid:void 0,title:d}),t[8]=p,t[9]=f,t[10]=d,t[11]=a,t[12]=i,t[13]=h):h=t[13],h}l.default=c}),226);
__d("PolarisSupervisionStrings",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=s._(/*BTDS*/"Central da Fam\u00edlia"),u=s._(/*BTDS*/"Central de Educa\u00e7\u00e3o");function c(e){return s._(/*BTDS*/"Voc\u00ea n\u00e3o pode bloquear {Username of current profile} porque supervisiona essa conta.",[s._param("Username of current profile",e)])}function d(e){return s._(/*BTDS*/"Para bloquear {Username of current profile}, voc\u00ea precisar\u00e1 remover essa pessoa da supervis\u00e3o.",[s._param("Username of current profile",e)])}function m(e){return s._(/*BTDS*/"N\u00e3o \u00e9 poss\u00edvel bloquear {Username of current profile} porque essa pessoa supervisiona sua conta.",[s._param("Username of current profile",e)])}function p(e){return s._(/*BTDS*/"Para bloquear {Username of current profile}, voc\u00ea precisar\u00e1 remover a pessoa da supervis\u00e3o pelo app do Instagram.",[s._param("Username of current profile",e)])}var _=s._(/*BTDS*/"Acessar a Central da Fam\u00edlia"),f=s._(/*BTDS*/"Ir para a supervis\u00e3o"),g=s._(/*BTDS*/"Voc\u00ea precisa remover a supervis\u00e3o primeiro"),h=s._(/*BTDS*/"Voc\u00ea n\u00e3o pode bloquear essa conta");l.FAMILY_CENTER_LABEL=e,l.EDUCATION_HUB_LABEL=u,l.getCantBlockDialogBodyForGuardianUpdated=c,l.getCantBlockDialogBodyForGuardian=d,l.getCantBlockDialogBodyForSupervisedUserUpdated=m,l.getCantBlockDialogBodyForSupervisedUser=p,l.NAVIGATE_TO_FC_BUTTON_TEXT=_,l.NAVIGATE_TO_SUPERVISION_BUTTON_TEXT=f,l.CANT_BLOCK_DIALOG_TITLE=g,l.CANT_BLOCK_DIALOG_TITLE_UPDATED=h}),226);
__d("PolarisRemoveSupervisionDialog.react",["fbt","IGDSActionDialog.react","IGDSDialogItem.react","PolarisNavigationUtils","PolarisSupervisionStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){return"https://familycenter.instagram.com/accounts/"+e+"/remove"}function d(e){return"https://familycenter.instagram.com/accounts/"+e+"/?account_type=INSTAGRAM"}function m(e){var t=o("react-compiler-runtime").c(15),n=e.onClose,a=e.supervisedByViewer,i=e.userFbId,l=e.username,c;t[0]!==a||t[1]!==l?(c=a?o("PolarisSupervisionStrings").getCantBlockDialogBodyForGuardianUpdated(l):o("PolarisSupervisionStrings").getCantBlockDialogBodyForSupervisedUserUpdated(l),t[0]=a,t[1]=l,t[2]=c):c=t[2];var m=c,p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"OK"),t[3]=p):p=t[3];var _=p,f=n,g;t[4]!==i?(g=d(i),t[4]=i,t[5]=g):g=t[5];var h=g,y;t[6]!==f?(y=f!=null&&_!=null&&u.jsx(o("IGDSDialogItem.react").IGDSDialogItem,{color:"primaryButton",onClick:f,testid:void 0,children:_}),t[6]=f,t[7]=y):y=t[7];var C;t[8]!==h?(C=u.jsx(o("IGDSDialogItem.react").IGDSDialogItem,{onClick:function(){return o("PolarisNavigationUtils").openURLWithFullPageReload(h,{openInNewTab:!0})},testid:void 0,children:o("PolarisSupervisionStrings").NAVIGATE_TO_FC_BUTTON_TEXT}),t[8]=h,t[9]=C):C=t[9];var b;return t[10]!==m||t[11]!==n||t[12]!==y||t[13]!==C?(b=u.jsxs(r("IGDSActionDialog.react"),{body:m,isVisible:!0,onModalClose:n,size:"default",title:o("PolarisSupervisionStrings").CANT_BLOCK_DIALOG_TITLE_UPDATED,children:[y,C]}),t[10]=m,t[11]=n,t[12]=y,t[13]=C,t[14]=b):b=t[14],b}l.getRemoveSupervisionUrl=c,l.getGoToFamilyCenterURL=d,l.RemoveSupervisionDialog=m}),226);
__d("PolarisBlockDialog.react",["PolarisPostBlockConfirmDialog.react","PolarisPreBlockConfirmDialog.react","PolarisRemoveSupervisionDialog.react","Promise","QPLUserFlow","qpl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useState;function p(t){var a=o("react-compiler-runtime").c(21),i=t.guardianOfViewer,l=t.isBlockedByViewer,s=t.onBlockUser,c=t.onClose,d=t.onUnblockUser,p=t.supervisedByViewer,f=t.userFbId,g=t.userId,h=t.username,y=m(!1),C=y[0],b=y[1],v;a[0]!==c?(v=function(){b(!1),c()},a[0]=c,a[1]=v):v=a[1];var S=v,R;a[2]!==l||a[3]!==s||a[4]!==S||a[5]!==d||a[6]!==g?(R=function(){var t=l?r("qpl")._(379204232,"1261"):r("qpl")._(379192731,"1257");r("QPLUserFlow").addPoint(t,"block_dialog_action_confirmed");var o=l?d(g,"reportModal"):s(g,"reportModal");(e||(e=n("Promise"))).resolve(o).then(function(){b(!0)}).catch(function(){S()})},a[2]=l,a[3]=s,a[4]=S,a[5]=d,a[6]=g,a[7]=R):R=a[7];var L=R,E=_;if(i||p){var k;return a[8]!==c||a[9]!==p||a[10]!==f||a[11]!==h?(k=u.jsx(o("PolarisRemoveSupervisionDialog.react").RemoveSupervisionDialog,{onClose:c,supervisedByViewer:p,userFbId:f,username:h}),a[8]=c,a[9]=p,a[10]=f,a[11]=h,a[12]=k):k=a[12],k}if(C){var I;return a[13]!==l||a[14]!==h?(I=u.jsx(r("PolarisPostBlockConfirmDialog.react"),{isBlockedByViewer:l,onClose:E,username:h}),a[13]=l,a[14]=h,a[15]=I):I=a[15],I}var T;return a[16]!==l||a[17]!==S||a[18]!==L||a[19]!==h?(T=u.jsx(r("PolarisPreBlockConfirmDialog.react"),{isBlockedByViewer:l,onClose:S,onConfirm:L,username:h}),a[16]=l,a[17]=S,a[18]=L,a[19]=h,a[20]=T):T=a[20],T}function _(){window.location.reload()}l.default=p}),98);
__d("PolarisDirectActionBlockDirectUser",[],(function(t,n,r,o,a,i){"use strict";function e(e){return function(t){return t({type:"DIRECT_BLOCK_USER",userId:e})}}i.blockDirectUser=e}),66);
__d("PolarisRelationshipActionBlockUser",["fbt","PolarisDirectActionBlockDirectUser","PolarisGenericStrings","PolarisInteractionsStrings","PolarisRelationshipTypes","PolarisSharedAPI","PolarisToastActions","QPLUserFlow","polarisLogAction","polarisRelationshipSelectors.react","qpl"],(function(t,n,r,o,a,i,l,s){"use strict";var e=s._(/*BTDS*/"_j{\"*\":\"N\\u00e3o \\u00e9 poss\\u00edvel bloquear o usu\\u00e1rio \\u2014 voc\\u00ea \\u00e9 o(a) respons\\u00e1vel pelo usu\\u00e1rio que est\\u00e1 tentando bloquear.\",\"1\":\"N\\u00e3o \\u00e9 poss\\u00edvel bloquear o usu\\u00e1rio \\u2014 voc\\u00ea \\u00e9 o respons\\u00e1vel pelo usu\\u00e1rio que est\\u00e1 tentando bloquear.\",\"2\":\"N\\u00e3o \\u00e9 poss\\u00edvel bloquear o usu\\u00e1rio \\u2014 voc\\u00ea \\u00e9 a respons\\u00e1vel pelo usu\\u00e1rio que est\\u00e1 tentando bloquear.\",\"__vcg\":1}"),u=s._(/*BTDS*/"_j{\"*\":\"N\\u00e3o \\u00e9 poss\\u00edvel bloquear o usu\\u00e1rio \\u2014 voc\\u00ea est\\u00e1 sendo supervisionado(a) pelo usu\\u00e1rio que est\\u00e1 tentando bloquear.\",\"1\":\"N\\u00e3o \\u00e9 poss\\u00edvel bloquear o usu\\u00e1rio \\u2014 voc\\u00ea est\\u00e1 sendo supervisionado pelo usu\\u00e1rio que est\\u00e1 tentando bloquear.\",\"2\":\"N\\u00e3o \\u00e9 poss\\u00edvel bloquear o usu\\u00e1rio \\u2014 voc\\u00ea est\\u00e1 sendo supervisionada pelo usu\\u00e1rio que est\\u00e1 tentando bloquear.\",\"__vcg\":1}"),c=s._(/*BTDS*/"Para bloquear, voc\u00ea precisar\u00e1 primeiro remover a supervis\u00e3o.");function d(t,n){return function(a,i){r("polarisLogAction")("blockUserAttempt",{source:n});var l=o("polarisRelationshipSelectors.react").getRelationship(i().relationships,t),s=l.followedByViewer,d=s.state===o("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING;return a({subjectUserId:t,type:"BLOCK_USER",wasFollowedByViewer:d}),o("PolarisSharedAPI").blockUser(t).then(function(){r("polarisLogAction")("blockUserSuccess",{source:n}),a({subjectUserId:t,type:"BLOCK_USER_SUCCEEDED",wasFollowedByViewer:d}),a(o("PolarisDirectActionBlockDirectUser").blockDirectUser(t)),a(o("PolarisToastActions").showToast({text:o("PolarisInteractionsStrings").BLOCK_TEXT})),r("QPLUserFlow").endSuccess(r("qpl")._(379192731,"1257"))},function(i){var l;r("polarisLogAction")("blockUserFailure",{source:n}),r("QPLUserFlow").endFailure(r("qpl")._(379192731,"1257"),"api_errored");var s=(l=i.responseObject)==null?void 0:l.message,d=s===e||s===u?c:o("PolarisGenericStrings").GENERIC_ERROR_MESSAGE;throw a(o("PolarisToastActions").showToast({text:d})),a({subjectUserId:t,type:"BLOCK_USER_FAILED"}),i})}}l.blockUser=d}),226);
__d("PolarisDirectActionUnblockDirectUser",[],(function(t,n,r,o,a,i){"use strict";function e(e){return function(t){return t({type:"DIRECT_UNBLOCK_USER",userId:e})}}i.unblockDirectUser=e}),66);
__d("PolarisRelationshipActionUnblockUser",["PolarisDirectActionUnblockDirectUser","PolarisInteractionsStrings","PolarisSharedAPI","PolarisToastActions","QPLUserFlow","polarisLogAction","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return function(n){return r("polarisLogAction")("unblockUserAttempt",{source:t}),n({subjectUserId:e,type:"UNBLOCK_USER"}),o("PolarisSharedAPI").unblockUser(e).then(function(){r("polarisLogAction")("unblockUserSuccess",{source:t}),n({subjectUserId:e,type:"UNBLOCK_USER_SUCCEEDED"}),n(o("PolarisDirectActionUnblockDirectUser").unblockDirectUser(e)),n(o("PolarisToastActions").showToast({text:o("PolarisInteractionsStrings").UNBLOCK_TEXT})),r("QPLUserFlow").endSuccess(r("qpl")._(379204232,"1261"))},function(){r("polarisLogAction")("unblockUserFailure",{source:t}),r("QPLUserFlow").endFailure(r("qpl")._(379204232,"1261"),"api_errored"),n({subjectUserId:e,type:"UNBLOCK_USER_SUCCEEDED"}),n(o("PolarisDirectActionUnblockDirectUser").unblockDirectUser(e))})}}l.unblockUser=e}),98);
__d("PolarisBlockDialogContainer.react",["PolarisBlockDialog.react","PolarisReactRedux.react","PolarisRelationshipActionBlockUser","PolarisRelationshipActionUnblockUser","polarisRelationshipSelectors.react","polarisUserSelectors"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t.fbidV2,r=t.relationship,a=t.userId,i=n!=null?n:o("polarisUserSelectors").getUserByIdOrThrows(e,a).fbid;return{guardianOfViewer:o("polarisRelationshipSelectors.react").guardianOfViewer(r),isBlockedByViewer:o("polarisRelationshipSelectors.react").isBlockedByViewer(r),supervisedByViewer:o("polarisRelationshipSelectors.react").supervisedByViewer(r),userFbId:i,username:t.username}}function s(e){return{onBlockUser:function(n,r){return e(o("PolarisRelationshipActionBlockUser").blockUser(n,r))},onUnblockUser:function(n,r){return e(o("PolarisRelationshipActionUnblockUser").unblockUser(n,r))}}}var u=o("PolarisReactRedux.react").connect(e,s)(r("PolarisBlockDialog.react"));l.default=u}),98);
__d("PolarisLoggedOutLoginOrSignupRow.react",["IGDSBox.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisFastLink.react","PolarisLinkBuilder","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutLoginButton.react","PolarisLoggedOutUpsellExposureV2","PolarisNavigationReferrerUrlSession","react","react-compiler-runtime","useCometRouterState","usePolarisPageID"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(26),n=e.color,a=e.ctaTypeV2,i=e.loginReturnPath,l=e.loginSource,u=e.marginBottom,c=e.marginEnd,d=e.marginStart,m=e.marginTop,p=n===void 0?"primaryButton":n,_=r("usePolarisPageID")(),f=r("useCometRouterState")(),g=u!=null?u:3,h=m!=null?m:3,y;t[0]!==p||t[1]!==a||t[2]!==i||t[3]!==l?(y=s.jsx(r("PolarisLoggedOutLoginButton.react"),{color:p,ctaTypeV2:a,loginReturnPath:i,loginSource:l,variant:"primary_link"}),t[0]=p,t[1]=a,t[2]=i,t[3]=l,t[4]=y):y=t[4];var C;t[5]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginEnd:1,marginStart:1,children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",children:o("PolarisAuthStrings").OR})}),t[5]=C):C=t[5];var b;t[6]===Symbol.for("react.memo_cache_sentinel")?(b=o("PolarisLinkBuilder").buildSignupLink(),t[6]=b):b=t[6];var v;t[7]!==a||t[8]!==l||t[9]!==_||t[10]!==f?(v=function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("signup",a,_,{},l),f!=null&&o("PolarisNavigationReferrerUrlSession").setCurrentUrlInformation(f,_)},t[7]=a,t[8]=l,t[9]=_,t[10]=f,t[11]=v):v=t[11];var S;t[12]!==p?(S=s.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:p,textAlign:"center",children:o("PolarisAuthStrings").SIGN_UP_BUTTON_TEXT_LOWER_CASE}),t[12]=p,t[13]=S):S=t[13];var R;t[14]!==v||t[15]!==S?(R=s.jsx(r("PolarisFastLink.react"),{"data-testid":void 0,display:"inline",href:b,onClick:v,prefetchQueriesOnMount_I_KNOW_WHAT_IM_DOING:r("PolarisLoggedOutUpsellExposureV2").xplatform.enable_faster_nav_for_cta,preloadCodeOnMount:r("PolarisLoggedOutUpsellExposureV2").xplatform.enable_faster_nav_for_cta,children:S}),t[14]=v,t[15]=S,t[16]=R):R=t[16];var L;t[17]!==y||t[18]!==R?(L=s.jsxs(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:[y,C,R]}),t[17]=y,t[18]=R,t[19]=L):L=t[19];var E;return t[20]!==c||t[21]!==d||t[22]!==L||t[23]!==g||t[24]!==h?(E=s.jsx(r("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"center",marginBottom:g,marginEnd:c,marginStart:d,marginTop:h,minHeight:18,width:"100%",children:L}),t[20]=c,t[21]=d,t[22]=L,t[23]=g,t[24]=h,t[25]=E):E=t[25],E}l.default=u}),98);
__d("PolarisProfileNestedContentRoot.entrypoint",["JSResourceForInteraction","buildPolarisProfileRoute.entrypoint"],(function(t,n,r,o,a,i,l){"use strict";var e=r("buildPolarisProfileRoute.entrypoint")(r("JSResourceForInteraction")("PolarisProfileNestedContentRoot.react").__setRef("PolarisProfileNestedContentRoot.entrypoint"),function(){return{}});l.default=e}),98);
__d("PolarisSavedPostsLogger",["InstagramODS","vulture"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(t){case"saved":case"SavedCollectionPage":case"postPage":case"feed":case"profile":case"selfProfilePageModal":case"exploreLandingPageModal":r("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.createCollection."+e+"."+t);break;default:r("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.createCollection."+e+".undefined")}}function s(e,t){switch(t){case"saved":case"SavedCollectionPage":case"postPage":case"feed":case"profile":case"selfProfilePageModal":case"exploreLandingPageModal":r("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.editCollection."+e+"."+t);break;default:r("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.editCollection."+e+".undefined")}}function u(e,t){switch(t){case"SavedCollectionPage":r("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.deleteCollection."+e+".SavedCollectionPage");break;default:r("vulture")("7semu-nIxGVMR4bKWuWggWXVMIA="),r("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.deleteCollection."+e+".undefined")}}l.logCreateCollection=e,l.logEditCollection=s,l.logDeleteCollection=u}),98);
__d("PolarisUserActionDismissRelatedProfileSuggestion",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return function(n){n({dismissedId:t,targetId:e,type:"RELATED_PROFILE_DISMISSED_SUGGESTION"})}}i.dismissRelatedProfileSuggestion=e}),66);
__d("useForceUpdate",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useReducer;function u(){var e=s(function(e){return e+1},0),t=e[0],n=e[1];return n}l.default=u}),98);/*FB_PKG_DELIM*/
__d("LSDeleteAndReenrollDeviceState",["LSArrayGetObjectAt","LSDeleteBackupOnClient","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Beginning execution."),t.i64.neq(e[0],void 0)?t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[13]=new t.Map,r[13].set("error_msg","Expected a nonempty query result"),r[13].set("code",t.i64.cast([0,3])),r[13].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[14]=t.createArray(),r[15]=(r[14].push(r[13]),r[14]),o=[void 0,r[14]],r[7]=o[0],r[8]=o[1]):(n=l.item,r[13]=new t.Map,r[13].set("backup_id",n.backupId),r[13].set("device_public_key_blob",n.devicePublicKeyBlob),r[13].set("device_private_key_blob",n.devicePrivateKeyBlob),r[13].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[13].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[13].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[13].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[13].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[13].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[13].set("orf_client_state_v2_blob",void 0),r[13].set("orf_v2_authority_level",void 0),r[13].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[13].set("device_id",n.deviceId),r[13].set("backup_tenancy",n.backupTenancy),r[13].set("encryption_version",n.encryptionVersion),r[13].set("revision_version",n.revisionVersion),r[13].set("initialize_restore_result",void 0),r[13].set("device_creation_timestamp_sec",void 0),r[13].set("authority_level",n.authorityLevel),a=[r[13],void 0],r[7]=a[0],r[8]=a[1])})},function(o){return r[10]=new t.Map,r[10].set("value",r[7]),r[10].set("errors",r[8]),r[11]=r[10].get("value"),r[11]!==void 0?t.sequence([function(o){return r[13]=r[11].get("backup_id"),r[14]=r[11].get("device_public_key_blob"),r[15]=r[11].get("device_private_key_blob"),r[16]=r[11].get("epoch_storage_public_key_blob"),r[17]=r[11].get("epoch_storage_private_key_blob"),r[18]=r[11].get("epoch_auth_public_key_blob"),r[19]=r[11].get("epoch_auth_private_key_blob"),r[20]=r[11].get("mailbox_root_key_blob"),r[21]=r[11].get("ocmf_client_state_blob"),r[22]=r[11].get("orf_client_state_v2_blob"),r[23]=r[11].get("orf_v2_authority_level"),r[24]=r[11].get("oblivious_validation_token_blob"),r[25]=r[11].get("device_id"),r[26]=r[11].get("backup_tenancy"),r[27]=r[11].get("encryption_version"),r[28]=r[11].get("revision_version"),r[29]=r[11].get("initialize_restore_result"),r[30]=r[11].get("device_creation_timestamp_sec"),r[31]=r[11].get("authority_level"),t.i64.neq(r[25],void 0)?t.sequence([function(e){return r[33]=void 0,t.i64.neq(r[33],void 0)?t.resolve(r[34]=r[33]):t.sequence([function(e){return r[37]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[38]&&(r[47]=(r[37].push(t.i64.cast([0,0])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return r[39]&&(r[47]=(r[37].push(t.i64.cast([0,2])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return r[40]&&(r[47]=(r[37].push(t.i64.cast([0,3])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return r[41]&&(r[47]=(r[37].push(t.i64.cast([0,4])),r[37])),r[42]=t.createArray(),r[43]=t.i64.of_int32(r[37].length),t.i64.gt(r[43],t.i64.cast([0,0]))?t.loopAsync(r[43],function(e){return r[47]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[47]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],t})},function(e){return r[50]=(r[42].push(r[48]),r[42])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[47]=t.createArray(),r[48]=t.i64.of_int32(r[42].length),t.i64.gt(r[48],t.i64.cast([0,0]))?t.loopAsync(r[48],function(e){return r[50]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[42],r[50]).then(function(e){var t;return t=e,r[51]=t[0],r[52]=t[1],t})},function(e){return r[53]=(r[47].push(t.i64.to_string(r[51])),r[47])}])}):t.resolve()},function(e){return r[49]=r[47].join(","),r[44]=r[49]}])},function(e){return r[42].some(function(e){return t.i64.eq(r[27],e)})?r[45]=r[27]:r[45]=void 0,t.i64.neq(r[45],void 0)?r[46]=r[45]:r[46]=void 0,r[34]=r[46]}])},function(o){return t.i64.neq(r[34],void 0)?r[35]=r[34]:r[35]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[36]=r[26]:r[36]=t.i64.cast([0,1]),t.i64.eq(r[25],e[0])?t.sequence([function(e){return t.storedProcedure(n("LSDeleteBackupOnClient"),r[13],void 0,!1,void 0,void 0,!0)},function(n){return r[37]=t.i64.of_float(Date.now()),t.db.table(343).add({pk:void 0,deviceReenrollmentReason:e[1],reenrollmentTimestamp:r[37]})}]):t.resolve(0)},function(e){return r[32]=!0}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failed to load client state: 24"),r[34]="Failed to load client state: 24",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",r[34]].join("")),r[33]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",r[34],r[33],t.i64.cast([0,3]))},function(e){return r[32]=!1}])},function(e){return r[12]=r[32]}]):t.sequence([function(e){return r[13]=r[10].get("errors"),r[14]=r[10].get("errors"),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failed to load client state: 1"),r[16]="Failed to load client state: 1",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",r[16]].join("")),r[15]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",r[16],r[15],t.i64.cast([0,3]))},function(e){return r[12]=!1}])}]):t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!0}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[13]=new t.Map,r[13].set("error_msg","Expected a nonempty query result"),r[13].set("code",t.i64.cast([0,3])),r[13].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[14]=t.createArray(),r[15]=(r[14].push(r[13]),r[14]),o=[void 0,r[14]],r[7]=o[0],r[8]=o[1]):(n=l.item,r[13]=new t.Map,r[13].set("backup_id",n.backupId),r[13].set("device_public_key_blob",n.devicePublicKeyBlob),r[13].set("device_private_key_blob",n.devicePrivateKeyBlob),r[13].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[13].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[13].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[13].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[13].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[13].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[13].set("orf_client_state_v2_blob",void 0),r[13].set("orf_v2_authority_level",void 0),r[13].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[13].set("device_id",n.deviceId),r[13].set("backup_tenancy",n.backupTenancy),r[13].set("encryption_version",n.encryptionVersion),r[13].set("revision_version",n.revisionVersion),r[13].set("initialize_restore_result",void 0),r[13].set("device_creation_timestamp_sec",void 0),r[13].set("authority_level",n.authorityLevel),a=[r[13],void 0],r[7]=a[0],r[8]=a[1])})},function(e){return r[10]=new t.Map,r[10].set("value",r[7]),r[10].set("errors",r[8]),r[11]=r[10].get("value"),r[11]!==void 0?t.sequence([function(e){return r[13]=r[11].get("backup_id"),r[14]=r[11].get("device_public_key_blob"),r[15]=r[11].get("device_private_key_blob"),r[16]=r[11].get("epoch_storage_public_key_blob"),r[17]=r[11].get("epoch_storage_private_key_blob"),r[18]=r[11].get("epoch_auth_public_key_blob"),r[19]=r[11].get("epoch_auth_private_key_blob"),r[20]=r[11].get("mailbox_root_key_blob"),r[21]=r[11].get("ocmf_client_state_blob"),r[22]=r[11].get("orf_client_state_v2_blob"),r[23]=r[11].get("orf_v2_authority_level"),r[24]=r[11].get("oblivious_validation_token_blob"),r[25]=r[11].get("device_id"),r[26]=r[11].get("backup_tenancy"),r[27]=r[11].get("encryption_version"),r[28]=r[11].get("revision_version"),r[29]=r[11].get("initialize_restore_result"),r[30]=r[11].get("device_creation_timestamp_sec"),r[31]=r[11].get("authority_level"),t.i64.neq(r[25],void 0)?t.sequence([function(e){return r[33]=void 0,t.i64.neq(r[33],void 0)?t.resolve(r[34]=r[33]):t.sequence([function(e){return r[37]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[38]&&(r[47]=(r[37].push(t.i64.cast([0,0])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return r[39]&&(r[47]=(r[37].push(t.i64.cast([0,2])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return r[40]&&(r[47]=(r[37].push(t.i64.cast([0,3])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return r[41]&&(r[47]=(r[37].push(t.i64.cast([0,4])),r[37])),r[42]=t.createArray(),r[43]=t.i64.of_int32(r[37].length),t.i64.gt(r[43],t.i64.cast([0,0]))?t.loopAsync(r[43],function(e){return r[47]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[47]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],t})},function(e){return r[50]=(r[42].push(r[48]),r[42])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[47]=t.createArray(),r[48]=t.i64.of_int32(r[42].length),t.i64.gt(r[48],t.i64.cast([0,0]))?t.loopAsync(r[48],function(e){return r[50]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[42],r[50]).then(function(e){var t;return t=e,r[51]=t[0],r[52]=t[1],t})},function(e){return r[53]=(r[47].push(t.i64.to_string(r[51])),r[47])}])}):t.resolve()},function(e){return r[49]=r[47].join(","),r[44]=r[49]}])},function(e){return r[42].some(function(e){return t.i64.eq(r[27],e)})?r[45]=r[27]:r[45]=void 0,t.i64.neq(r[45],void 0)?r[46]=r[45]:r[46]=void 0,r[34]=r[46]}])},function(e){return t.i64.neq(r[34],void 0)?r[35]=r[34]:r[35]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[36]=r[26]:r[36]=t.i64.cast([0,1]),r[32]=!0}]):t.resolve(r[32]=!1)},function(e){return r[12]=r[32]}]):t.resolve((r[13]=r[10].get("errors"),r[14]=r[10].get("errors"),r[12]=!1))},function(o){return r[12]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failure. Attempted to reset nux flags on an onboarded device"),r[14]="Failure. Attempted to reset nux flags on an onboarded device",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",r[14]].join("")),r[13]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",r[14],r[13],t.i64.cast([0,3]))):(r[13]=t.i64.of_float(Date.now()),t.db.table(343).add({pk:void 0,deviceReenrollmentReason:e[1],reenrollmentTimestamp:r[13]}))}])},function(e){return r[1]=t.i64.of_float(Date.now()),r[2]=t.i64.random(),r[4]="Finishing execution. Execution time: ",r[5]=t.i64.to_string(t.i64.sub(r[1],r[0])),r[6]=" ms",r[3]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ",r[3],r[4],r[3],r[5],r[3],r[6]].join("")),t.i64.eq(t.i64.mod_(r[2],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[7]=",",r[8]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",[r[4],r[7],r[5],r[7],r[6]].join(""),r[8],t.i64.cast([0,4]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","encrypted_backups_reenrollment_trigger"],a.exports=e}),null);
__d("LSMailboxTaskCompletionApiOnTaskInsertion",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.islc(t.db.table(232).fetch(),0,t.i64.to_float(t.i64.cast([0,1]))),function(n){var r=n.item;return t.db.table(233).add({taskId:e[0],notificationScopeKey:r.notificationScopeKey,notificationName:r.notificationName})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskInsertionStoredProcedure",e.__tables__=["mailbox_task_completion_notification_context","mailbox_task_completion_api_tasks"],a.exports=e}),null);
__d("LSIssueNewTaskWithExtraOperations",["LSIssueNewTaskAndGetTaskID","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[11]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskInsertion"),r[0])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreIssueNewTaskWithExtraOperationsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("MAWBridgeFireAndForget",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWaitForBackendSetup","MAWWorkerEvent","Promise","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("justknobx")._("1143");function u(t,r,a,i){return o("MAWWaitForBackendSetup").runAfterBackendSetup(function(){var l=o("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(r);i!==!0&&o("MAWBridgeLoggingUtils").routeStart("fireAndForget",t,r,l),o("MAWTimedBridge").bridgeTimeout(function(){return new(e||(e=n("Promise")))(function(e){o("MAWBridge").getBridge().fireAndForget(t,r,a,i,{onAck:function(a){i!==!0&&(o("MAWWorkerEvent").logAck(l,r,a),o("MAWBridgeLoggingUtils").routeSuccess(t,r,l)),e()},onSend:function(t){var e=t.queueMsgs,n=t.queueSize;i!==!0&&(o("MAWWorkerEvent").logSend(l,r,"fireAndForget"),o("MAWWorkerEvent").logAnnotations(l,{int:{bridgeSize:n},string_array:{bridgeMsgs:e}}))}},{bridgeQPLInstanceKey:l})})},t,r,l,s)},r)}l.fireAndForget=u}),98);
__d("MAWEphemeralMsgAutoResetSystemId",[],(function(t,n,r,o,a,i){"use strict";var e="-111111",l=e;i.default=l}),66);
__d("hasDefaultThreadOneToOneCapabilityDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("hasDefaultThreadOneToOneCapability").__setRef("hasDefaultThreadOneToOneCapabilityDeferred");l.default=e}),98);
__d("useCometMessengerhasDefaultThreadOneToOneCapability",["FBLogger","hasDefaultThreadOneToOneCapabilityDeferred","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e,t){var n=c(!1),o=n[0],a=n[1];return u(function(){r("hasDefaultThreadOneToOneCapabilityDeferred").load().then(function(n){t==null?a(!1):n(t,e).then(function(e){a(e)}).catch(function(){})}).catch(function(e){r("FBLogger")("messenger_web").warn("Error loading hasDefaultThreadOneToOneCapability. %s",e)})},[e,o,t]),o}l.default=d}),98);
__d("MAWThreadCutover",["I64","LSAuthorityLevel","LSContactBitOffset","LSDatabaseSingleton","LSMessagingThreadTypeUtil","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWPActor.react","MWPreloadableQueries","ReQL","ReQLSuspense","WAJids","asyncToGeneratorRuntime","useCometMessengerhasDefaultThreadOneToOneCapability","useMAWCanThreadBeCutoverOnDemand","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){var n=(u||(u=r("useReStore")))(),a=L(e),i=r("useCometMessengerhasDefaultThreadOneToOneCapability")(n,e),l=t!=null&&o("LSMessagingThreadTypeUtil").isGroup(t);return l?!0:a||i}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return(yield $(e))!=null}),m.apply(this,arguments)}function p(e){var t=(u||(u=r("useReStore")))();return o("ReQLSuspense").useFirst(function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(t,e):o("ReQL").empty()},[t,e],i.id+":62")!=null}function _(e){var t,n=(u||(u=r("useReStore")))(),a=(t=o("ReQLSuspense").useFirst(function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,e):o("ReQL").empty()},[n,e],i.id+":74"))==null?void 0:t.showOpenMessageHistory;return a===!1}function f(e){var t=R(e);return _(t)}function g(e,t){return o("ReQL").fromTableAscending(e.tables.mi_act_mapping_table).getKeyRange(t)}function h(t,n){return o("ReQL").fromTableAscending(t.tables.cutover_threads).filter(function(t){return(e||(e=o("I64"))).equal(t.armadilloThreadId,n)})}function y(e){var t=(u||(u=r("useReStore")))(),n=o("ReQLSuspense").useFirst(function(){return e==null?o("ReQL").empty():g(t,e)},[t,e],i.id+":112");return o("ReQLSuspense").useFirst(function(){return n==null?o("ReQL").empty():h(t,n.jid)},[t,n],i.id+":120")}function C(e,t){return o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(t.openThreadId)}function b(t){var n=v(t);if(!(n==null||(e||(e=o("I64"))).lt(n.authorityLevel,(e||(e=o("I64"))).of_int32(r("LSAuthorityLevel").SERVER_PARTIAL))))return n}function v(e){var t=(u||(u=r("useReStore")))(),n=y(e);return o("ReQLSuspense").useFirst(function(){return n==null?o("ReQL").empty():C(t,n)},[t,n],i.id+":162")}function S(e){var t=(u||(u=r("useReStore")))(),n=o("ReQLSuspense").useFirst(function(){return e==null?o("ReQL").empty():g(t,e)},[t,e],i.id+":174"),a=n==null?void 0:n.jid,l=o("ReQLSuspense").useFirst(function(){return a!=null?o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(a):o("ReQL").empty()},[t.tables.threads,a],i.id+":183"),s=r("useMAWCanThreadBeCutoverOnDemand")(a);return s?l:void 0}function R(e){var t=y(e);if(t!=null)return t.openThreadId}function L(e){return y(e)!=null}function E(t,n){var r=o("WAJids").threadIdForChatJid(n);return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.cutover_threads).getKeyRange((e||(e=o("I64"))).of_string(r))).then(function(e){return e!=null})}function k(){var e,t=(u||(u=r("useReStore")))(),n=o("MWPActor.react").useActor(),a=o("ReQLSuspense").first(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange(n),i.id+":223");return a!=null&&((e=o("LSContactBitOffset").has(75,a))!=null?e:!1)}function I(){var e=(u||(u=r("useReStore")))(),t=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(e.tables.experiences_shared_state).getKeyRange(r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY)},[e],i.id+":238"),n=o("MWEncryptedBackupsSharedState").getEntryValue({db:e,sharedStateRow:t,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY});return n!=null}function T(t){var n=(u||(u=r("useReStore")))(),a=t!=null?(e||(e=o("I64"))).of_string(t):void 0,l=p(a);return o("ReQLSuspense").useFirst(function(){return l&&a!=null?o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table).filter(function(t){return(e||(e=o("I64"))).equal(t.jid,a)}).map(function(t){return(e||(e=o("I64"))).to_string(t.serverThreadKey)}):o("ReQL").empty()},[n,a,l],i.id+":259")}function D(){return!0}function x(e){var t=(u||(u=r("useReStore")))(),n=o("ReQLSuspense").useFirst(function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(t,e):o("ReQL").empty()},[t,e],i.id+":286"),a=n==null?void 0:n.armadilloThreadId,l=o("ReQLSuspense").useFirst(function(){return a!=null?o("ReQL").fromTableAscending(t.tables.mi_act_mapping_table.index("jid")).getKeyRange(a):o("ReQL").empty()},[a,t.tables.mi_act_mapping_table],i.id+":297");return l==null?void 0:l.serverThreadKey}function $(e){return P.apply(this,arguments)}function P(){return P=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton,r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table).getKeyRange(t));if(r!=null){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.cutover_threads).filter(function(t){return(e||(e=o("I64"))).equal(t.armadilloThreadId,r.jid)}));return a}}),P.apply(this,arguments)}l.useShouldHideE2eeAttribution=c,l.isCutoverThreadKey=d,l.useIsCutoverOpenThread=p,l.useIsDualThreadCutoverOpenThread=_,l.useIsDualThreadCutoverSecureThread=f,l.getMiActMappings=g,l.getCutoverThreadsByJid=h,l.useGetCutoverMapping=y,l.getThreadByCutoverThread=C,l.useOpenThreadIfExistsFromCutoverThread=b,l.useCutoverOpenThread=v,l.useODCutoverEligibleOpenOneToOneThread=S,l.useGetCutoverOpenThreadKey=R,l.useIsCutoverSecureThread=L,l.isCutoverSecureThreadFromChatJid=E,l.useIsCurrentUserCutoverUser=k,l.useGetHasUserRestoredBefore=I,l.useGetCutoverSecureThreadKey=T,l.useSupportedCutoverEnvironment=D,l.useCutoverSecureThreadKeyForOpenThreadKey=x,l.getCutoverThreadBySecureThreadKey=$}),98);
__d("useMAWCanThreadBeCutoverOnDemand",["LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","ReQL","ReQLSuspense","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a,l=(e||(e=r("useReStore")))(),s=o("ReQLSuspense").useFirst(function(){return t!=null?o("ReQL").fromTableAscending(l.tables.contacts,o("LSContactBitOffset").contactCapabilityFields).getKeyRange(t):o("ReQL").empty()},[l,t],i.id+":34"),u=s!=null&&o("LSContactBitOffset").has(76,s),c=o("ReQLSuspense").useFirst(function(){return t!=null?o("ReQL").fromTableAscending(l.tables.threads,["threadType"]).getKeyRange(t):o("ReQL").empty()},[l,t],i.id+":53"),d=c?o("LSMessagingThreadTypeUtil").isOpenOneToOne(c.threadType):!1,m=((n=(a=o("ReQLSuspense").useFirst(function(){return t!=null?o("ReQL").fromTableAscending(l.tables.messages_ranges_v2__generated,["minMessageId"]).getKeyRange(t):o("ReQL").empty()},[l,t],i.id+":67"))==null?void 0:a.minMessageId)!=null?n:"")==="",p=o("MAWThreadCutover").useIsCutoverOpenThread(t),_=o("MAWThreadCutover").useIsCutoverSecureThread(t),f=p||_;return u&&d&&!m&&!f}l.default=s}),98);
__d("MessageSendsClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1271"),s=o("FalcoLoggerInternal").create("message_sends_client",e),u=s;l.default=u}),98);
__d("MWLogSend",["ErrorGuard","FBLogger","I64","LSMessagingThreadTypeUtil","LSPlatformLsInitLog","MessageSendsClientFalcoEvent","MultipleTabsLogger","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=[];function d(e){return function(){for(;c.length>0;)(u||(u=r("ErrorGuard"))).applyWithGuard(_,null,[e,c.shift(),!0])}}var m=!1;function p(e,t){c.push(t),m||(o("LSPlatformLsInitLog").onCompleteOrFail(d(e)),m=!0)}function _(t,a,i){var l=a._mentionedJids,u=a.actor,c=a.additionalTags,d=a.attachmentFbids,m=a.attachmentType,_=a.backend,f=a.ephemeralDurationInSec,g=a.hasReply,h=a.igdTargetType,y=a.initatingSource,C=a.isInstamadilloTTLC,b=a.messageSendDataclass,v=a.messagingThreadId,S=a.msgTtl,R=a.offlineThreadingId,L=a.sendType,E=a.source,k=a.threadKey,I=a.threadType;r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield(s||(s=n("Promise"))).all([o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.participants).getKeyRange(k).filter(function(t){return!(e||(e=o("I64"))).equal(t.contactId,u)})),o("MultipleTabsLogger").hasMultipleTabs()]).then(function(n){var l=n[0],s=n[1];if(l==null){var T=o("LSPlatformLsInitLog").isPending();if(T&&i!==!0){p(t,a);return}i===!0&&r("FBLogger")("meteora").warn("LS_INIT completed but participants table is still empty.")}var D=l.map(function(t){return(e||(e=o("I64"))).to_string(t.contactId)}),x=o("LSMessagingThreadTypeUtil").isOneToOne(I)&&(l==null?void 0:l.length)===0;x&&D.push((e||(e=o("I64"))).to_string(u));var $=v!=null?v:(e||(e=o("I64"))).to_string(k),P=S!=null?(e||(e=o("I64"))).to_string((e||(e=o("I64"))).of_float(S)):void 0,N=[s===!0?19:null,f!=null?15:null,C===!0?37:null].filter(Boolean);($==null||$===""||(e||(e=o("I64"))).le(k,(e||(e=o("I64"))).zero))&&(a.waGroupJid!=null?r("FBLogger")("mw_log_send").mustfix("Thread FBID is null and recovered by chatJid in send flow - ThreadKey %s, messagingThreadId %s, send type %s",(e||(e=o("I64"))).to_string(k),v,L):r("FBLogger")("mw_log_send").mustfix("Thread FBID is null in send flow - ThreadKey %s, messagingThreadId %s, send type %s",(e||(e=o("I64"))).to_string(k),v,L)),r("MessageSendsClientFalcoEvent").log(function(){return{additional_tags:c,backend:_,event_type:L,feature_tags:N,group_thread_subtype:void 0,igd_action:void 0,igd_target_type:h,igd_verb:void 0,initiating_app_id:void 0,initiating_source:y,is_reply:g,message_attachment_fbids:d.map(String),message_id:void 0,message_send_dataclass_logged:b,message_type:m,messaging_thread_fbid:$,messaging_thread_type:(e||(e=o("I64"))).to_int32(I),msg_ttl:P,nav_chain:void 0,nonce:void 0,offline_threading_id:R,recipient_fbids:D,send_attribution:e.to_int32(E),send_attribution_raw:void 0,view_mode:void 0,wa_group_jid:a.waGroupJid}})})})())}l.log=_}),98);
__d("useAsyncReStore",["LSDatabaseSingleton","Promise","ReStoreProvider.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=s||(s=o("react")),m=d.useContext,p=d.useMemo;function _(){var t=m((c||(c=o("ReStoreProvider.react"))).context);return p(function(){return t!=null?(e||(e=n("Promise"))).resolve(t):(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton},[t])}l.default=_}),98);/*FB_PKG_DELIM*/
__d("IGDDataclassTypes.flow",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Share:"SHARE",Reply:"REPLY",React:"REACT",Mention:"MENTION"}),l=n("$InternalEnum")({Note:"NOTE",Story:"STORY",Profile:"PROFILE",Clip:"CLIP",Feed:"FEED",Live:"LIVE",Comment:"COMMENT",LocationShare:"LOCATION_SHARE",ReelsAudio:"REELS_AUDIO",MediaNote:"MEDIA_NOTE",StoryHighlight:"STORY_HIGHLIGHT",SocialContext:"SOCIAL_CONTEXT"}),s=n("$InternalEnum")({Mention:"MENTION",Reply:"REPLY"});i.XmsgIgXmaActionType=e,i.XmsgIgReceiverFetchContentType=l,i.XmsgIgReceiverFetchXmaMediaNoteFetchParamsMessageType=s}),66);
__d("IGDSWebPauseFilledIcon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"M15 1c-3.3 0-6 1.3-6 3v40c0 1.7 2.7 3 6 3s6-1.3 6-3V4c0-1.7-2.7-3-6-3zm18 0c-3.3 0-6 1.3-6 3v40c0 1.7 2.7 3 6 3s6-1.3 6-3V4c0-1.7-2.7-3-6-3z"}),t[0]=n):n=t[0];var a;return t[1]!==e?(a=s.jsx(r("IGDSSVGIconBase.react"),babelHelpers.extends({},e,{viewBox:"0 0 48 48",children:n})),t[1]=e,t[2]=a):a=t[2],a}var c=s.memo(u);l.default=c}),98);
__d("IGDXMAAttachmentUtil",["bx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("bx").getURL(r("bx")("13341")),s=String.fromCodePoint(128293),u=String.fromCodePoint(128546),c=String.fromCodePoint(128079),d=String.fromCodePoint(128558),m=String.fromCodePoint(128514),p=String.fromCodePoint(128525),_=String.fromCodePoint(127881);function f(e){return e!=null?e===s||e===u||e===c||e===d||e===m||e===_?!0:e===p:!1}function g(e,t){return e==="xma_ig_comment_action_url"&&t==="xma_ig_comment_media_action_url"}l.DEFAULT_PROFILE_URL=e,l.isEmojiReaction=f,l.isXmaPostComment=g}),98);
__d("LSGetIfViewerIsWorkplaceUser",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return o[0]=r("gkx")("26374"),t.resolve(o)}e.__sproc_name__="LSCoreGetIfViewerIsWorkplaceUserStoredProcedure",e.__tables__=[];var s=e;l.default=s}),98);
__d("LSGetThreadParticipantDisplayName",["LSGetIfViewerIsWorkplaceUser","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return t.storedProcedure(n("LSGetIfViewerIsWorkplaceUser")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return r[0]?t.sequence([function(o){return t.filter(t.db.table(7).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.id,e[1])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,o){var a=e.done,i=e.value;return a?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2352696798]),void 0).then(function(e){return r[4]=e})},function(e){return r[2]=r[4]}]):(o=i.item,r[2]=o.name)})},function(e){return r[1]=r[2]}]):t.sequence([function(n){return t.filter(t.db.table(14).fetch([[[e[0],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[1])}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[2]=void 0:(t=o.item,r[2]=t.nickname)})},function(o){return t.filter(t.db.table(7).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.id,e[1])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,o){var a=e.done,i=e.value;return a?t.sequence([function(e){return r[6]=t.i64.cast([-1,4294967295]),n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[7]=e})},function(e){return r[4]=r[7]}]):(o=i.item,r[4]=o.firstName==null?o.name:o.firstName)})},function(e){return r[1]=r[2]==null?r[4]:r[2]}])},function(e){return o[0]=r[1]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxGetThreadParticipantDisplayNameStoredProcedure",e.__tables__=["contacts","participants"],a.exports=e}),null);
__d("LSMessageReplySourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,LIGHTWEIGHT_STATUS:6,LIGHTWEIGHT_STATUS_REACTION:7,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19,HIGHLIGHTS_TAB_CARDS_FOR_BIRTHDAY:20,NOTE_MENTION:21,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28});i.default=e}),66);
__d("LSVerifyThreadExistsV2",["LSGetViewerFBID","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){var o;return[t.i64.cast([0,7]),t.i64.cast([0,8]),t.i64.cast([0,13]),t.i64.cast([0,10]),t.i64.cast([0,11]),t.i64.cast([0,16])].some(function(n){return t.i64.eq(e[1],n)})?t.resolve((o=[!1,!1,!1],r[0]=o[0],r[1]=o[1],r[2]=o[2],o)):t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,o){var a,i,l,s,u,c,d,m,p=n.done,_=n.value;return p?(a=[!0,!0,!1],r[3]=a[0],r[4]=a[1],r[5]=a[2],a):(o=_.item,r[12]=o.threadName,r[11]=o.authorityLevel,r[10]=o.threadType,o.folderName==="other"?(i=[!0,!1,!1],r[7]=i[0],r[8]=i[1],r[9]=i[2]):(t.i64.eq(r[10],t.i64.cast([0,0]))&&t.i64.eq(r[11],t.i64.cast([0,40]))||[t.i64.cast([0,23]),t.i64.cast([0,21]),t.i64.cast([0,18]),t.i64.cast([0,26]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(r[10],e)})&&t.i64.neq(r[11],t.i64.cast([0,20]))&&((r[12]===""?void 0:r[12])===void 0||t.i64.lt(r[11],t.i64.cast([0,80])))||[t.i64.cast([0,151]),t.i64.cast([0,155]),t.i64.cast([0,153])].some(function(e){return t.i64.eq(r[10],e)})||[t.i64.cast([0,24]),t.i64.cast([0,22]),t.i64.cast([0,19]),t.i64.cast([0,25]),t.i64.cast([0,28])].some(function(e){return t.i64.eq(r[10],e)})||[t.i64.cast([0,150]),t.i64.cast([0,154]),t.i64.cast([0,152])].some(function(n){return t.i64.eq(e[1],n)})&&t.i64.lt(r[11],t.i64.cast([0,80]))||[t.i64.cast([0,150]),t.i64.cast([0,154]),t.i64.cast([0,152])].some(function(n){return t.i64.eq(e[1],n)})&&t.i64.eq(e[6],t.i64.cast([0,205]))&&t.i64.eq(o.syncGroup,void 0)?(l=[!0,!0,!1],r[13]=l[0],r[14]=l[1],r[15]=l[2]):(t.i64.ge(r[11],e[4])||t.i64.eq(r[11],t.i64.cast([0,20]))&&([t.i64.cast([0,2]),t.i64.cast([0,202]),t.i64.cast([0,206])].some(function(n){return t.i64.eq(e[1],n)})||[t.i64.cast([0,23]),t.i64.cast([0,21]),t.i64.cast([0,18]),t.i64.cast([0,26]),t.i64.cast([0,27])].some(function(n){return t.i64.eq(e[1],n)}))?(s=[!1,!1,!1],r[16]=s[0],r[17]=s[1],r[18]=s[2]):(u=[!0,!1,!0],r[16]=u[0],r[17]=u[1],r[18]=u[2]),c=[r[16],r[17],r[18]],r[13]=c[0],r[14]=c[1],r[15]=c[2]),d=[r[13],r[14],r[15]],r[7]=d[0],r[8]=d[1],r[9]=d[2]),m=[r[7],r[8],r[9]],r[3]=m[0],r[4]=m[1],r[5]=m[2])})},function(e){var t;return t=[r[3],r[4],r[5]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}])},function(o){return r[0]?(r[3]=new t.Map,r[3].set("thread_fbid",e[0]),r[3].set("force_upsert",e[5]),r[3].set("use_open_messenger_transport",!1),r[3].set("sync_group",e[6]),r[3].set("metadata_only",e[7]),r[3].set("preview_only",!1),r[4]=r[3].get("thread_fbid"),r[5]=t.toJSON(r[3]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[4]),t.i64.cast([0,209]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(o){return r[1]?t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,o){var a=n.done,i=n.value;return a?t.sequence([function(n){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[22]=!1:(n=a.item,r[22]=!!t.i64.eq(n.contactTypeExact,t.i64.cast([0,16])))})},function(e){return r[3]=r[22]}]):(o=i.item,r[3]=!!t.i64.eq(o.threadType,t.i64.cast([0,201])))})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[5]=!1:(n=a.item,r[5]=t.i64.eq(n.threadType,t.i64.cast([0,206])))})},function(n){var o,a,i,l;return r[7]=t.i64.cast([0,1083495711]),r[8]=t.i64.cast([0,1024]),r[9]=t.i64.cast([0,0]),r[10]=t.i64.cast([0,0]),r[11]=t.i64.cast([0,134217728]),r[12]=t.i64.cast([0,1083495711]),r[13]=t.i64.cast([0,1024]),r[14]=t.i64.cast([0,0]),r[15]=t.i64.cast([0,134217728]),r[16]=t.i64.cast([0,0]),r[3]?(r[22]=t.i64.cast([0,8650752]),r[23]=t.i64.cast([0,1024]),r[24]=t.i64.cast([0,0]),r[25]=t.i64.cast([0,0]),r[26]=t.i64.cast([0,0]),o=[r[22],r[23],r[24],r[25],r[26]],r[17]=o[0],r[18]=o[1],r[19]=o[2],r[20]=o[3],r[21]=o[4]):(r[5]?(r[27]=t.i64.cast([0,8700166]),r[28]=t.i64.cast([0,1024]),r[29]=t.i64.cast([0,0]),r[30]=t.i64.cast([0,0]),r[31]=t.i64.cast([0,0]),a=[r[27],r[28],r[29],r[30],r[31]],r[22]=a[0],r[23]=a[1],r[24]=a[2],r[25]=a[3],r[26]=a[4]):(i=[r[12],r[13],r[14],r[15],r[16]],r[22]=i[0],r[23]=i[1],r[24]=i[2],r[25]=i[3],r[26]=i[4]),l=[r[22],r[23],r[24],r[25],r[26]],r[17]=l[0],r[18]=l[1],r[19]=l[2],r[20]=l[3],r[21]=l[4]),t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.lt(n.authorityLevel,e[4])}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:e[0],mailboxType:t.i64.cast([0,0]),threadType:e[1],syncGroup:e[6],folderName:e[2],lastReadWatermarkTimestampMs:t.i64.cast([0,0]),removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),parentThreadKey:e[3],authorityLevel:e[4],capabilities:r[17],capabilities2:r[18],capabilities3:r[19],capabilities4:r[20],capabilities5:r[21],unsendLimitMs:t.i64.cast([-1,4294967295])})},function(o){return[t.i64.cast([0,1]),t.i64.cast([0,201]),t.i64.cast([0,204])].some(function(n){return t.i64.eq(e[1],n)})?t.sequence([function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[0],e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[0])&&t.i64.lt(n.authorityLevel,e[4])}),function(e){return e.delete()})},function(n){return t.db.table(14).add({threadKey:e[0],contactId:e[0],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:e[4],isModerator:!1})},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[22]=t[0],t})},function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[0],r[22]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,r[22])&&t.i64.lt(n.authorityLevel,e[4])}),function(e){return e.delete()})},function(n){return t.db.table(14).add({threadKey:e[0],contactId:r[22],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:e[4],isModerator:!1})}]):t.resolve()}]):t.resolve()},function(n){return r[2]?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({authorityLevel:e[4]})}):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyThreadExistsV2StoredProcedure",e.__tables__=["threads","contacts","participants"],a.exports=e}),null);
__d("LSVerifyThreadRowExistsV2",["LSVerifyThreadExistsV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.i64.eq(e[1],t.i64.cast([0,5]))?r[0]=t.i64.cast([-1,4294967284]):r[0]=t.i64.cast([0,0]),t.storedProcedure(n("LSVerifyThreadExistsV2"),e[0],e[1],"inbox",r[0],e[3],!1,e[2],!1,!1)},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyThreadRowExistsV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSVerifyThreadRowExistsV2StoredProcedure",["LSSynchronousPromise","LSVerifyThreadRowExistsV2","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyThreadRowExistsV2"),a.threadKey,a.threadType,a.syncGroup,a.authorityLevel);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("maybeIssueIGDThreadPointQuery",["I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSVerifyThreadRowExistsV2StoredProcedure","asyncToGeneratorRuntime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("maybeIssueIGDThreadPointQuery");function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield u.load(),a=yield n();return a.runInTransaction(function(n){return r("LSVerifyThreadRowExistsV2StoredProcedure")(r("LSFactory")(n),{authorityLevel:(e||(e=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),syncGroup:(s||(s=o("I64"))).of_int32(1),threadKey:s.of_string(t),threadType:s.of_int32(1)})},"readwrite")}),d.apply(this,arguments)}l.default=c}),98);/*FB_PKG_DELIM*/
__d("IGDUncaughtErrorState.react",["FBLogger","PolarisHttp500UnexpectedErrorPage.react","cr:8915","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){if(n("cr:8915")!=null&&e!=null&&e instanceof n("cr:8915").ReStoreDbVersionChange){r("FBLogger")("igd_web").info(e);return}r("FBLogger")("igd_web").catching(e).mustfix("Uncaught Error while loading chat: %s",e.toString())}function d(e){var t=o("react-compiler-runtime").c(7),n=e.description,a=e.error,i=e.header,l=e.onPress,d,m;t[0]!==a?(d=function(){c(a)},m=[a],t[0]=a,t[1]=d,t[2]=m):(d=t[1],m=t[2]),u(d,m);var p=n!=null?n:void 0,_=i!=null?i:void 0,f;return t[3]!==l||t[4]!==p||t[5]!==_?(f=s.jsx(r("PolarisHttp500UnexpectedErrorPage.react"),{description:p,header:_,onClick:l}),t[3]=l,t[4]=p,t[5]=_,t[6]=f):f=t[6],f}l.default=d}),98);
__d("IGDInboxErrorState.react",["IGDUncaughtErrorState.react","cr:9977","react","react-compiler-runtime","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(10),a=e.error,i;i=a;var l=i,u=r("useCurrentDisplayMode")(),c,d;t[0]!==a||t[1]!==u?(d=n("cr:9977")==null?void 0:n("cr:9977")(a,u),t[0]=a,t[1]=u,t[2]=d):d=t[2],c=d;var m=c;if(m!=null){var p,_=(p=m.action)==null?void 0:p.onPress,f;return t[3]!==m.body||t[4]!==m.headline||t[5]!==l||t[6]!==_?(f=s.jsx(r("IGDUncaughtErrorState.react"),{description:m.body,error:l,header:m.headline,onPress:_}),t[3]=m.body,t[4]=m.headline,t[5]=l,t[6]=_,t[7]=f):f=t[7],f}else{var g;return t[8]!==a?(g=s.jsx(r("IGDUncaughtErrorState.react"),{error:a}),t[8]=a,t[9]=g):g=t[9],g}}l.default=c}),98);
__d("LSPlatformRealtimeTransportEager",["LSPlatformRealtimeTransport","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return(e||(e=n("Promise"))).resolve({LSPlatformRealtimeTransport:o("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport})};l.load=s}),98);
__d("LSPlatformTaskSystemTransportEager",["LSPlatformTaskSystemTransport","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return(e||(e=n("Promise"))).resolve(r("LSPlatformTaskSystemTransport"))};l.load=s}),98);
__d("MWPlatformTaskSystemEager",["MWPlatformTaskSystem","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return(e||(e=n("Promise"))).resolve(r("MWPlatformTaskSystem"))};l.load=s}),98);
__d("bumpVultureJSHash",["ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){(e||(e=o("ODS"))).bumpEntityKey(7506,"vulture_js",t,n)}l.default=s}),98);