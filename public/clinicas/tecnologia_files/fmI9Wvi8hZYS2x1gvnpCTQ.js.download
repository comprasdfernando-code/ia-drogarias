;/*FB_PKG_DELIM*/

__d("Cache",["TimeSlice"],(function(t,n,r,o,a,i,l){"use strict";var e=6e4,s=(function(){function t(){this.$1=new Map}var n=t.prototype;return n.has=function(t){return this.$1.has(t)},n.get=function(t,n){var e=this.__getRaw(t);return e?e.$2:n},n.getAll=function(t,n){var e=this,r=new Map;return t.forEach(function(t){return r.set(t,e.get(t,n))}),r},n.delete=function(t){var e=this.__getRaw(t);return e&&e.$3&&clearTimeout(e.$3),this.$1.delete(t)},n.clear=function(){this.$1.forEach(function(e){e&&e.$3&&clearTimeout(e.$3)}),this.$1.clear()},n.set=function(n,o,a,i){if(!this.shouldUpdate(n,a))return!1;var t=this.__getRaw(n);return t||(t=this.__getNewRawObject()),delete t.$2,delete t.$4,t.$3&&clearTimeout(t.$3),delete t.$3,t.$2=o,a!=null&&(t.$4=a),i!=null&&i>=0&&(t.$3=setTimeout(r("TimeSlice").guard(this.delete.bind(this,n),"Cache expiration timeout"),i*e)),this.__setRaw(n,t),!0},n.shouldUpdate=function(t,n){var e=this.__getRaw(t);return e==null||e.$4==null||n==null||n>e.$4},n.size=function(){return this.$1.size},n.__getRaw=function(t){return this.$1.get(t)},n.__setRaw=function(t,n){this.$1.set(t,n)},n.__getNewRawObject=function(){return{$2:null,$3:null,$4:null,$5:null,$6:null}},n.__keys=function(){return this.$1.keys()},t})();l.default=s}),98);
__d("EBDBConsistencyApi",["$InternalEnum","EBDB","FBLogger","I64","QPLUserFlow","ReQL","asyncToGeneratorRuntime","getErrorSafe","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],u=null;function c(){return u}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){try{var a=yield o("EBDB").getEBDB(),l=BigInt((e||(e=o("I64"))).to_string(n));yield a.runInTransaction(["device_state"],"readwrite",function(e){return e.stores.device_state.bulkPut([{deviceId:l,env:t}])},"EBDB - AddDevice",i.id+":54"),u=l}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on EBDB - AddDevice")}}),m.apply(this,arguments)}function p(e){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_client_state)).then(function(e){return e==null?void 0:e.deviceId})}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){if(n!=null)return d(t,n);try{var o=yield p(e);return o==null?void 0:d(t,o)}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on fetching secure_encrypted_backups_client_state")}}),f.apply(this,arguments)}function g(e,t){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){r("QPLUserFlow").addPoint(t,"track_overprompting_start");try{var a=yield o("EBDB").getEBDB(),l=!1;yield a.runInTransaction(["device_state"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield t.stores.device_state.get(e);(n==null?void 0:n.deviceId)!=null&&(l=!0)});return function(e){return t.apply(this,arguments)}})(),"EBDB - AddDevice",i.id+":107"),r("QPLUserFlow").addAnnotations(t,{bool:{overprompting:l}}),r("QPLUserFlow").addPoint(t,"track_overprompting_end")}catch(e){r("QPLUserFlow").addPoint(t,"track_overprompting_fail"),r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on track overpropting")}}),h.apply(this,arguments)}var y=n("$InternalEnum")({Disabled:0,EbsmInconsistent:1,EbdbInconsistent:2,Enabled:3,Inconsistent:4});function C(e){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield p(t),r=n!=null?BigInt((e||(e=o("I64"))).to_string(n)):null;return r==null&&u==null?y.Disabled:r==null&&u!=null?y.EbsmInconsistent:r!=null&&u==null?y.EbdbInconsistent:r===u?y.Enabled:y.Inconsistent}),b.apply(this,arguments)}function v(e,t,n,r){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,o){var a=1/r("justknobx")._("3914");if(!(Math.random()>=a)){var i=r("qpl")._(521471316,"2831");try{r("QPLUserFlow").start(i);var l=yield C(e);o!=null&&r("QPLUserFlow").addAnnotations(i,o()),r("QPLUserFlow").endSuccess(i,{annotations:{int:{consistency:l,env:t,operation:n}}})}catch(e){r("QPLUserFlow").endFailure(i,"error"),r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on trackConsistency in %s",t)}}}),S.apply(this,arguments)}function R(){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("EBDB").clearDeviceState(),u=null}),L.apply(this,arguments)}var E;function k(e,t){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){E!=null&&E(),yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.encrypted_backups)).then(function(e){e!=null&&((e==null?void 0:e.backupId)==null||(e==null?void 0:e.isUserOptedOut)===!0)&&R()}).catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDBApi: EBLS error on fetching data from encrypted_backups")}),E=t.tables.encrypted_backups.subscribe(function(e,t){t.operation!=="delete"&&(t.value.backupId==null||t.value.isUserOptedOut===!0)&&R()});var a=yield o("EBDB").getEBDB(),l=yield a.runInTransaction(["device_state"],"readonly",function(e){return e.stores.device_state.get(n)},"EBDB - readDeviceState",i.id+":250").catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDB error: fetching device_state")});if(u=T(l==null?void 0:l.deviceId),u==null){var s=yield p(t);if(s==null)return;var c=BigInt((e||(e=o("I64"))).to_string(s));u=c,yield a.runInTransaction(["device_state"],"readwrite",function(e){return e.stores.device_state.bulkPut([{deviceId:c,env:n}])},"EBDB - writeDeviceState",i.id+":272").catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDB error: write device_state")})}}),I.apply(this,arguments)}function T(t){if(t!=null){if(typeof t=="bigint")return t;if(typeof t=="number")return BigInt(t);if(typeof t=="string")try{return BigInt(t)}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("EBDBApi: Parsing string as BigInt"),R();return}if(Array.isArray(t))try{return BigInt((e||(e=o("I64"))).to_string(t))}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("EBDBApi: Parsing I64 as BigInt"),R();return}r("FBLogger")("wmi_eb").mustfix("EBDBApi: Parsing unknown as BigInt %s",String(t)),R()}}l.EB_STORES=s,l.getDeviceId=c,l.addNewDevice=_,l.trackOverprompting=g,l.EBConsistencyResult=y,l.checkRegistrationConsistency=C,l.trackConsistency=v,l.clearDeviceState=R,l.startListeningDeviceRegistrations=k}),98);
__d("EBEpochChangeListener",["EBIsEbEnabled","EBIsEbEnabledSubscriber","Promise","ReQL","WAPubSub","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function e(e){this.$1=o("WAPubSub").simplePubSub(),this.$3=e}var t=e.prototype;return t.initialize=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this;(yield o("EBIsEbEnabled").isEbEnabledLS(this.$3.tables))&&this.$4(this.$3),yield o("EBIsEbEnabledSubscriber").isEbEnabledSubscriber().then(function(t){t.subscribe(function(t){t?e.$4(e.$3):e.$2==null||e.$2()})})});function t(){return e.apply(this,arguments)}return t})(),t.$4=function(t){var e=this;return this.$2==null&&(this.$2=o("ReQL").fromTableAscending(t.tables.secure_encrypted_backups_epochs).subscribe(function(t,n){e.$1.publish(n)})),this.$2},t.subscribe=function(t){return this.$1.subscribe(t)},e})(),u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){if(u!=null)return(e||(e=n("Promise"))).resolve();u=new s(t),yield u.initialize()}),d.apply(this,arguments)}function m(e){if(u==null)throw r("err")("EBEpochChangeListener is not initialized");return u.subscribe(e)}l.initEBEpochChangeListener=c,l.subscribeToEpochChanges=m}),98);
__d("EBSMProperties",[],(function(t,n,r,o,a,i){"use strict";var e=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],l=new Set(["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"]),s={dbVersion:5,mandatoryTables:l,persistedTables:new Set(e),persistedTablesArray:e},u=s;i.default=u}),66);
__d("MWEncryptedBackupsFirstRestoreUpsellTime",["EBAPIWorkerCheck","FBLogger","WebStorage","getErrorSafe","getMWEncryptedBackupsIsLocalStorageSupported"],(function(t,n,r,o,a,i,l){"use strict";var e,s="mw_encrypted_backups_restore_upsell_first_impression_time_key";function u(){var t=Date.now().toString();if(o("EBAPIWorkerCheck").runningInWorker())return d(t);if(!o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported())return t;try{var n,a=(n=(e||(e=r("WebStorage"))).getLocalStorage())==null?void 0:n.getItem(s);if(a==null){var i;return(i=(e||(e=r("WebStorage"))).getLocalStorage())==null||i.setItem(s,t),t}return a}catch(e){return r("FBLogger")("wmi_eb").warn("[labyrinth][web] Failed to set EB session identifier due to %s",r("getErrorSafe")(e).message),t}}var c=null;function d(e){return c==null&&(c=e),c}l.getFirstRestoreUpsellTime=u,l.getFirstRestoreUpsellTimeForEBLS=d}),98);
__d("QPLMemoryUtils",["MemoryUtils","QPLUserFlow"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("MemoryUtils").getCurrentMemory(),n=t.usedJSHeapSize;r("QPLUserFlow").addAnnotations(e,{int:{usedJSHeapSizeStart:n}})}function s(e){var t=o("MemoryUtils").getCurrentMemory(),n=t.usedJSHeapSize;r("QPLUserFlow").addAnnotations(e,{int:{usedJSHeapSizeEnd:n}})}l.logMemoryForQPLStart=e,l.logMemoryForQPLEnd=s}),98);
__d("MWBroadcastChannelPolyfill",["FBLogger","LocalStorageWrapper","MessengerLogHistory","Random","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MessengerLogHistory").getInstance("client_init");function s(t){e.debug("[MWBroadcastChannelPolyfill] "+t)}function u(e){r("FBLogger")("messenger_web").mustfix(e)}var c={},d=o("LocalStorageWrapper").getStorage(s);function m(e){var t="$BroadcastChannel$"+e+"$",n=!1,a=function(n){var e,r;if(n.storageArea===d){var o=n.newValue;if(!(o==null||o==="")&&((e=n.key)==null?void 0:e.substring(0,t.length))===t){var a=JSON.parse(o);(r=c[t])==null||r.forEach(function(e){e({data:a})})}}};return window.addEventListener("storage",a),{addEventListener:function(n,r){c[t]=c[t]||new Set,c[t].add(r)},close:function(){n||(n=!0,c={},window.removeEventListener("storage",a))},postMessage:function(a){if(n){r("FBLogger")("ls_web_init").mustfix("Broadcast channel is closed");return}var e=JSON.stringify(a),i=t+String(Date.now())+"$"+String(r("Random").uint32());o("LocalStorageWrapper").setItemGuarded(d,i,e,u),r("setTimeout")(function(){o("LocalStorageWrapper").removeItemGuarded(d,i,u)},500)},removeEventListener:function(n,r){var e;(e=c[t])==null||e.delete(r)}}}l.default=m}),98);
__d("MWBroadcastChannel",["MWBroadcastChannelPolyfill"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return self.BroadcastChannel!=null?new self.BroadcastChannel(e):r("MWBroadcastChannelPolyfill")(e)}l.MWBroadcastChannel=e}),98);
__d("MWLSDatabaseNames",[],(function(t,n,r,o,a,i){"use strict";var e="LightSpeed",l=e+"V3";i.name=e,i.lightspeedPrefix=l}),66);
__d("MWLSIndexedDBName",["MAWCurrentUser","MWLSDatabaseNames"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWCurrentUser").getID();return o("MWLSDatabaseNames").lightspeedPrefix+e}l.dbName=e}),98);
__d("ReStoreTabNotifier",["CurrentMessengerUser","FBLogger","MWBroadcastChannel","MWLSIndexedDBName","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=o("CurrentMessengerUser").getIDorEIMU();function s(t){var n=o("MWBroadcastChannel").MWBroadcastChannel(t==="restore-table-"+e+"-"+o("MWLSIndexedDBName").dbName()?"mwChat-"+e:t);function a(e,t){try{n.postMessage([e,t])}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).warn("Failed to broadcast changes")}}function i(e,t){n.addEventListener("message",function(n){var r=n.data,o=r[0];o===e&&t(r[1])})}return{onEventReceive:i,postMessage:a}}l.default=s}),98);
__d("createReStoreEBSMTablesPersistence",["CurrentMessengerUser","EBLogger","MAWUnrecoverableDbErrors","MWEBODSCategory","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBUseLocalStorage","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","ODS","Promise","QPLMemoryUtils","QPLUserFlow","Random","ReStorePersistence","ReStoreTabNotifier","WebSession","asyncToGeneratorRuntime","getErrorSafe","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("CurrentMessengerUser").getIDorEIMU(),m=r("ReStoreTabNotifier")==null?void 0:r("ReStoreTabNotifier")("mwChat-"+d),p=null,_=!1,f=!1,g=o("EBLogger").EBLogger().tags(["EBSM","Pesistence","MainThread"]);function h(e,t,n){return(e.has(t)?e:e.set(t,n())).get(t)}function y(t){var a=(c||(c=n("Promise"))).resolve(),i="flushChangesV2",l=new Map;function d(e){return h(l,e,function(){return new Map})}var y=o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();r("QPLUserFlow").start(r("qpl")._(521481876,"1407"),{annotations:{string:{ebSessionIdentifier:y,sessionTabId:o("WebSession").getId()}}}),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").START),o("QPLMemoryUtils").logMemoryForQPLStart(r("qpl")._(521481876,"1407"));function C(){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield t.rehydrateEBSMFromEBDB(d),o("QPLMemoryUtils").logMemoryForQPLEnd(r("qpl")._(521481876,"1407")),r("QPLUserFlow").endSuccess(r("qpl")._(521481876,"1407")),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").SUCCESS)}catch(t){r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED");var e=r("getErrorSafe")(t);g.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["An error occured in EBSM hydration when loading EB data: ",""])),e.message),r("QPLUserFlow").endFailure(r("qpl")._(521481876,"1407"),"Hydration failed."),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").FAIL)}}),b.apply(this,arguments)}return p=C(),m==null||m.onEventReceive("flushChangesV2",function(n){var a=n.changeSet,l=new Map;if(a.forEach(function(e,t){l.set(t,{toAdd:[],toDelete:[]});var n=d(t);e.forEach(function(e,r){if(o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)){var a;(a=l.get(t))==null||a.toDelete.push(n.get(r))}else{var i;(i=l.get(t))==null||i.toAdd.push(e)}})}),t.updateEBSM==null){g.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["ebdbEbsmApi.updateEBSM is not defined"])));return}r("promiseDone")(t.updateEBSM(l,i))}),{flush:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){var a,l;if(e.size!==0&&(e.size>0&&e.forEach(function(t,n){t.size===0&&e.delete(n)}),e.size!==0)){var s=((a=n.actionSource)==null?void 0:a.type)==="user_initiated"&&((l=n.actionSource)==null?void 0:l.source)===i;if(s){e.forEach(function(e,t){var n=d(t);e.forEach(function(e,t){o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)?n.delete(t):n.set(t,e)})});return}var u=new Map;e.forEach(function(e,t){u.set(t,{toAdd:[],toDelete:[]});var n=d(t);e.forEach(function(e,r){if(o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)){var a;(a=u.get(t))==null||a.toDelete.push(n.get(r)),n.delete(r)}else{var i;(i=u.get(t))==null||i.toAdd.push(e),n.set(r,e)}})}),m==null||m.postMessage("flushChangesV2",{changeSet:e,fromVersion:"",sentinelDeleted:o("ReStorePersistence").sentinelDeleted,version:""});var c=o("Random").uint32(),_=Array.from(e.keys());r("QPLUserFlow").start(r("qpl")._(521485383,"2200"),{annotations:{bool:{ebsmv2:!0},string_array:{tables:_}},instanceKey:c}),yield p,yield t.flushEBSMtoEBDB(u).catch(function(){})}});function a(t,n){return e.apply(this,arguments)}return a})(),get:function(t,r,o){var e=d(r);return _?e.get(o):p==null?(c||(c=n("Promise"))).reject("rehydration is not complete"):p.then(function(){return _=!0,e.get(o)})},logError:function(n,a,i,l){if((u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_RESTORE_PERSISTENCE_ERROR,n),i==="dbCorruption"){var e,s;(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,n);var c="Got unexpected undefined in ebsm, mode: "+a+", table: "+n+", id: "+((e=l==null?void 0:l.id)!=null?e:"")+", deletedInThisTxn: "+((s=l==null?void 0:l.deletedInThisTxn)!=null?s:"")+". Deleting EBSM db";g.mustfix(c);var d=o("Random").uint32();o("MAWUnrecoverableDbErrors").setError(new(o("MAWUnrecoverableDbErrors")).EbsmHydrationError(c,!0,d,n),function(){r("promiseDone")(t.clearEbStores(),function(){(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,"db_deleted.main_thread")})}),f||(f=!0,o("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(r("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE,"full"))}},queueCommitWork:void 0,runExclusively:function(t){return new(c||(c=n("Promise")))(function(e,r){a=a.then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=yield t(),o=n[0],a=n[1];try{e(yield o())}catch(e){r(e)}}))})},shouldApplySync:function(){return!1},shouldInline:function(t,n){return!1},shouldSync:function(t,n){return t!=="notifyInMemoryTable"},tabTablesNotifier:function(){return m},types:["ephemeral"],uniqueId:""}}l.default=y}),98);
__d("createReStoreTableNameAllowListPersistence",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r,o){var a;return{clearCache:function(){t.clearCache==null||t.clearCache(),r.clearCache==null||r.clearCache()},close:function(){t.close==null||t.close(),r.close==null||r.close()},flush:(function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(a,i){var l=new Map,s=new Map;a.forEach(function(e,t){o.has(t)?s.set(t,e):l.set(t,e)}),yield(e||(e=n("Promise"))).all([t.flush(l,i),r.flush(s,i)])});function i(e,t){return a.apply(this,arguments)}return i})(),get:function(n,a,i,l){return o.has(a)?r.get(n,a,i,l):t.get(n,a,i,l)},isClosed:function(){return(t.isClosed==null?void 0:t.isClosed())||!1},isPersistenceSupported:t.isPersistenceSupported,logError:function(n,a,i,l){o.has(n)?r.logError==null||r.logError(n,a,i,l):t.logError==null||t.logError(n,a,i,l)},permitsSynchronousIO:function(n){if(o.has(n)){var e;return(e=r.permitsSynchronousIO==null?void 0:r.permitsSynchronousIO(n))!=null?e:!1}else{var a;return(a=t.permitsSynchronousIO==null?void 0:t.permitsSynchronousIO(n))!=null?a:!1}},runExclusively:function(a,i){return t.runExclusively(function(){return new(e||(e=n("Promise")))(function(t,o){var l=r.runExclusively(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var r=yield a(),o=r[0],i=r[1],s=new(e||(e=n("Promise")))(function(e){t([function(){return e(),l},i])});return[n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield s,o()}),i]}),i);l.catch(o)})},i)},shouldApplySync:function(n,a){return o.has(a)?r.shouldApplySync(n,a):t.shouldApplySync(n,a)},shouldInline:function(n,a){return o.has(n)?r.shouldInline(n,a):t.shouldInline(n,a)},shouldSync:function(n,a){return o.has(a)?r.shouldSync(n,a):t.shouldSync(n,a)},tabTablesNotifier:(a=t.tabTablesNotifier)!=null?a:r.tabTablesNotifier,types:[].concat(t.types,r.types),uniqueId:r.uniqueId+t.uniqueId}}i.default=l}),66);
__d("LSJSEBInMemoryStorage",["EBSMProperties","createLSReStoreEphemeralPersistence","createReStoreEBSMTablesPersistence","createReStoreTableNameAllowListPersistence"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=r("createReStoreTableNameAllowListPersistence")(o("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),r("createReStoreEBSMTablesPersistence")(e),r("EBSMProperties").persistedTables);return t}l.makeReStorePersistence=e}),98);
__d("EBWorkerAddDeviceUtils",["EBDB","EBDBEbsmApi","EBSMProperties","I64","LSAuthorityLevel","LSIntEnum","LSJSEBInMemoryStorage","LSMetadata","LSReStoreWrapper","MAWLSVaultingHooks","Promise","ReQL","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state));if(l!=null)return"dest_table_not_empty";var c={clearEbStores:o("EBDB").clearEbStores,flushEBSMtoEBDB:o("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:o("EBDBEbsmApi").rehydrateEBSMFromEBDB,updateEBSM:function(){return(u||(u=n("Promise"))).resolve()}},d=yield o("LSJSEBInMemoryStorage").makeReStorePersistence(c);if(d==null)throw r("err")("persistence is null");var m=o("LSReStoreWrapper").createLSReStore(d,o("LSMetadata").schema,[r("MAWLSVaultingHooks")],void 0),p=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(m.tables.secure_encrypted_backups_epochs));return p.filter(function(t){return(e||(e=o("I64"))).equal(t.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))}).length===0?"source_epoch_not_authoritative":m.runInTransaction(function(e){return a.runInTransaction((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){var o=yield(u||(u=n("Promise"))).all(t.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=e[t],o=n.entries(new WeakMap),a=yield o.next();if(a.done)return"source_table_empty";for(var i=r[t];!a.done;){var l=a.value,s=l[0],u=l[1];yield i.upsert(s,u),a=yield o.next()}return"success"});return function(e){return t.apply(this,arguments)}})())),a=new Set(o);return a.has("source_table_empty")?"source_table_empty":a.has("success")&&a.size===1?"success":"fail"});return function(e){return r.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":91")},"readonly",void 0,void 0,i.id+":89")}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield e.runInTransaction(function(e){return(u||(u=n("Promise"))).all(r("EBSMProperties").persistedTablesArray.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){for(var n=e[t],r=n.entries(new WeakMap),o=yield r.next();!o.done;)yield n.delete.apply(n,o.value[0]),o=yield r.next()});return function(e){return t.apply(this,arguments)}})()))},"readwrite",void 0,void 0,i.id+":131")}),p.apply(this,arguments)}l.copyEBStateTablesFromMainthreadToWorker=c,l.clearLSEBSMTables=m}),98);
__d("LSDedicatedMqttChannel",["FBMqttChannel","cr:1232"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:1232")!=null&&n("cr:1232").shutdownAndClear()}function s(e,t,o,a,i,l){return function(s){return n("cr:1232")!=null?n("cr:1232").getInstance(s,e,t,o,a,i,l):r("FBMqttChannel")}}l.shutdownAndClear=e,l.getInstance=s}),98);
__d("MAWEBLSInWorkerSwitch",["MAWEBEnabledStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("MAWEBEnabledStateManager")).MAWEBEnabledStateManager,s=e;l.default=s}),98);
__d("LSIssueNewEbTaskAndGetTaskIDV2",["LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),e[0],e[1],e[2],void 0,void 0,t.i64.cast([0,0]),e[3],e[4],void 0,e[5],e[7]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsIssueNewEbTaskAndGetTaskIDV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("MAWMainTraceUtils",["LSRequestId"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("LSRequestId").generate()}l.createTraceId=e}),98);
__d("EBLS",["EBDB","EBDBEbsmApi","EBEpochChangeListener","EBIsEbEnabled","EBIsEbEnabledSubscriber","EBLogger","EBReadyNotifier","EBReenrollmentTriggerListener","EBWorkerAddDeviceUtils","I64","LSAuthorityLevel","LSDataTraceFlushDeferred","LSDatascriptEvaluatorMaybeDeferred","LSDedicatedMqttChannel","LSDefaultSyncGroups","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSInternetConnectionState","LSJSEBInMemoryStorage","LSMetadata","LSPlatformDeviceId","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSPlatformRealtimeTransport","LSPlatformTaskSystemTransport","LSReStoreWrapper","LSVersion","MAWBridge","MAWEBLSInWorkerSwitch","MAWLSVaultingHooks","MAWODSProxy","MAWVaultMaterialsStorage","MWEncryptedBackupsListenForChangesToBackupStateInitPath","MWPlatformTaskSystem","MqttEnv","Promise","QPLUserFlow","ReQL","ServerAppID","WAAssertUnreachable","WAOdsEnums","WAPromiseDelays","WAResolvable","asyncToGeneratorRuntime","emptyFunction","err","getMWLSRegion","nullthrows","promiseDone","qpl","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P=o("EBLogger").EBLogger().tags(["EBLS"]),N=r("qpl")._(521478817,"2806");function M(){return O()}var w,A,F;function O(){return w?w.promise:B({copyKeys:!0,getNewDB:!1}).promise}function B(e){w!=null&&!w.isSettled&&w.reject(r("err")("LSClient is not settled")),A!=null&&!A.isSettled&&A.reject(r("err")("LSDBStorage is not settled"));var t=new(o("WAResolvable")).Resolvable;return w=t,A=null,W(e).then(function(e){t.resolve(e)},function(e){t.reject(e)}),t}function W(e){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,a=e.getNewDB;o("EBReadyNotifier").resetEBReady(),(t=r("QPLUserFlow")).start(N,{timeoutInMs:6e4}),t.addPoint(N,"ls_storage_creation_start");var i=yield U(a);t.addPoint(N,"ls_storage_creation_end"),t.addPoint(N,"eb_worker_add_device_skipped"),t.endSuccess(N),o("EBReadyNotifier").markEBReady(),P.DEBUG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Initialised db"])));var l={appId:r("nullthrows")(r("ServerAppID").app_id),executeGraphQLLightSpeedRequest:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){r("vulture")("ZrOlCWyJ0L0hG2xX4QdNxz1doLM=");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=yield o("MAWBridge").getBridge().sendAndReceive("event","executeGraphQLLightSpeedRequest",{args:t});return a});function t(){return e.apply(this,arguments)}return t})(),getDb:U,getEval:function(){return r("LSDatascriptEvaluatorMaybeDeferred")()},platformName:"Messenger",realtimeUnderylingTransport:function(){return($||($=n("Promise"))).resolve(function(e,t){var n;return r("LSPlatformMqttRealtimeTransport")(r("LSVersion"),t,{getInstance:o("LSDedicatedMqttChannel").getInstance(function(){return!0},(n={},n[o("MqttEnv").MqttGkNames.mqttweb_global_connection_counter]=!1,n),function(e,t){return t},r("emptyFunction")),shutdownAndClear:o("LSDedicatedMqttChannel").shutdownAndClear})})},region:r("getMWLSRegion")(),schemaVersion:r("LSVersion"),sendHardcodedInitSync:!1,syncParams:r("LSPlatformMessengerSyncParams")};P.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["created config"]))),r("QPLUserFlow").addAnnotations(N,{string:{appId:l.appId}});var s=o("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");r("QPLUserFlow").addPoint(N,"platform_client_init_start");var u=yield K(i,l,s);return r("QPLUserFlow").addPoint(N,"platform_client_init_end"),F=X(i),yield o("EBIsEbEnabledSubscriber").initIsEbEnabledPubSub(i),yield o("EBEpochChangeListener").initEBEpochChangeListener(i),yield o("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(i),P.DEBUG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["finished init successfully"]))),u}),q.apply(this,arguments)}function U(e){return V.apply(this,arguments)}function V(){return V=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(e===void 0&&(e=!1),!e&&A!=null)return A.promise;var t=new(o("WAResolvable")).Resolvable;A=t,yield o("MAWVaultMaterialsStorage").setupVaultMaterials();var a={clearEbStores:o("EBDB").clearEbStores,flushEBSMtoEBDB:o("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:o("EBDBEbsmApi").rehydrateEBSMFromEBDB},l=yield o("LSJSEBInMemoryStorage").makeReStorePersistence(a),s=o("LSReStoreWrapper").createLSReStore(l,o("LSMetadata").schema,[r("MAWLSVaultingHooks")],void 0);return a.updateEBSM=o("EBDBEbsmApi").updateEBSM(s),yield s.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("LSDefaultSyncGroups").seedDb(e,void 0)});return function(t){return e.apply(this,arguments)}})(),"readwrite","ui",void 0,i.id+":228"),t.resolve(s),s}),V.apply(this,arguments)}function H(){return G.apply(this,arguments)}function G(){return G=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){w!=null&&(yield o("EBWorkerAddDeviceUtils").clearLSEBSMTables(yield U()))}),G.apply(this,arguments)}function z(e){var t=r("MWEncryptedBackupsListenForChangesToBackupStateInitPath").listenForChangesToBackupState(e);return function(){t&&t()}}function j(t,n){var a=n==="Connected"?(D||(D=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").CONNECTED):(D||(D=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").NOT_CONNECTED);P.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status: ",""])),n),r("promiseDone")(t.runInTransaction(function(e){return r("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(r("LSFactory")(e),{internetConnectionState:a})},"readwrite",void 0,void 0,i.id+":268"),function(){P.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set successfully"])))},function(e){throw P.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set failed: ",""])),e==null?void 0:e.message),e})}function K(e,t,n){return Q.apply(this,arguments)}function Q(){return Q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){P.DEBUG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting..."])));var a=yield t.getEval();P.DEBUG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Getting datascript evaluator success"])));var i=a()(e);P.DEBUG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Clearing epoch before resume sync..."]))),P.DEBUG(S||(S=babelHelpers.taggedTemplateLiteralLoose(["Starting realtime transport"])));var l=yield t.realtimeUnderylingTransport(),s=o("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(l,t.appId,n);P.DEBUG(R||(R=babelHelpers.taggedTemplateLiteralLoose(["Starting task system"])));var u=new(r("MWPlatformTaskSystem"))(e,new(r("LSPlatformTaskSystemTransport"))(e,s,i,t.schemaVersion));P.DEBUG(L||(L=babelHelpers.taggedTemplateLiteralLoose(["Starting backup state listeners"])));var c=null;r("QPLUserFlow").addPoint(N,"sync_system_creation_skipped");var d=z(e);P.DEBUG(E||(E=babelHelpers.taggedTemplateLiteralLoose(["Watching for expired traces"])));var m;return r("promiseDone")(o("LSDataTraceFlushDeferred").watchForExpiredTraces(e).then(function(e){m=e})),P.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Subscribing to mqtt sync status change events"]))),s.onConnectionStatusChange(function(t){j(e,t)}),P.DEBUG(I||(I=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting sucess"]))),{cleanup:function(){P.DEBUG(T||(T=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync cleaning up"]))),u==null||u.cleanup(),s.cleanup(),c==null||c.cleanup(),d(),m==null||m(),F.forEach(function(e){return e()})},db:e}}),Q.apply(this,arguments)}function X(e){var t=[],n=Y(e);return t.push(n),t}function Y(e){var t=null;function a(e){var a=t===null?"null":String(t),i=String(e);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.state_transition."+a+"_to_"+i}),P.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch state transition: "," -> ",""])),a,i),t===!0&&e===!1&&(P.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch detected true->false transition, setting timeout to check self-correction"]))),o("WAPromiseDelays").delayMs(1e3).then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("EBIsEbEnabled").isEBEnabled(),t=e===!0;P.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch true->false correction check: corrected=",", current_state=",""])),String(t),String(e)),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.true_to_false_correction."+(t?"corrected":"not_corrected")});var n=r("MAWEBLSInWorkerSwitch").isEnabled(),a=e===n?"match":"mismatch";o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.true_to_false_check."+a})})).catch(function(e){P.catching(e).MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch failed to check true->false correction"])))})),r("MAWEBLSInWorkerSwitch").set(e),t=e}return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_client_state)).then(function(e){e!=null?a(J(e)):a(!1)}).catch(function(e){P.catching(e).MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Failed to get initial state for EBLS Switch"])))}),e.tables.secure_encrypted_backups_client_state.subscribe(function(e,t){switch(P.DEBUG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch state changed. operation: ",""])),t.operation),t.operation){case"delete":a(!1);break;case"add":case"put":a(J(t.value));break;default:throw t.operation,r("WAAssertUnreachable")(t.operation)}})}function J(e){var t=e.authorityLevel,n=e.backupTenancy;if(t==null)return!1;var a=n!=null?n:(D||(D=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsBackupTenancy").PRODUCTION);return(x||(x=o("I64"))).equal(a,(D||(D=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsBackupTenancy").PRODUCTION))&&(x||(x=o("I64"))).equal(t,(D||(D=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))}l.init=M,l.genLSClient=O,l.getLSStorage=U,l.clearEBSMStorage=H,l.platformClientInit=K}),98);
__d("EBMinosWasmDeriveAttachmentAccessTokenSecret",["EBMinosTypes","EBMinosWasm.pb","EBMinosWasmReactorSingleton","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(){function e(e){var t=e.attachmentAccessTokenSecret;return o("WAResultOrError").makeResult(o("EBMinosTypes").unsafeCastToAttachmentAccessTokenSecret(t))}return(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.mediaKey;return yield o("EBMinosWasmReactorSingleton").minosCommand({InputSpec:o("EBMinosWasm.pb").MinosCommandSpec,ResultSpec:o("EBMinosWasm.pb").DeriveAttachmentAccessTokenSecretResultSpec,validateResult:e},{deriveAttachmentAccessTokenSecret:{mediaKey:n}})});function r(e){return t.apply(this,arguments)}return r})()}var s=e();l.deriveAttachmentAccessTokenSecret=s}),98);
__d("EBMinosWasmDeriveAttachmentPrimaryKeySecret",["EBMinosTypes","EBMinosWasm.pb","EBMinosWasmReactorSingleton","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(){function e(e){var t=e.attachmentPrimaryKeySecret;return o("WAResultOrError").makeResult(o("EBMinosTypes").unsafeCastToAttachmentPrimaryKeySecret(t))}return(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.mediaKey;return yield o("EBMinosWasmReactorSingleton").minosCommand({InputSpec:o("EBMinosWasm.pb").MinosCommandSpec,ResultSpec:o("EBMinosWasm.pb").DeriveAttachmentPrimaryKeySecretResultSpec,validateResult:e},{deriveAttachmentPrimaryKeySecret:{mediaKey:n}})});function r(e){return t.apply(this,arguments)}return r})()}var s=e();l.deriveAttachmentPrimaryKeySecret=s}),98);
__d("EBWorkerEBDBApi",["EBDB","EBDBConsistencyApi","EBLS","LSAuthorityLevel","LSEncryptedBackupsBackupTenancy","WALogger","WAResolvable","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("EBLS").genLSClient();try{yield o("EBDBConsistencyApi").startListeningDeviceRegistrations(t.db,o("EBDB").EBDBEnvironment.Worker)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error on EBDB init in Worker: ",""])),t)}finally{s.resolve(t.db)}}),c.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("EBDBConsistencyApi").trackOverprompting(o("EBDB").EBDBEnvironment.Worker,e)}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield s.promise;yield o("EBDBConsistencyApi").addNewDevice(t,o("EBDB").EBDBEnvironment.Worker,e)}),_.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield s.promise;return o("EBDBConsistencyApi").trackConsistency(t,o("EBDB").EBDBEnvironment.Worker,e),o("EBDBConsistencyApi").getDeviceId()}),g.apply(this,arguments)}function h(){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("EBDB").getEBDB(),t=yield e.store("secure_encrypted_backups_client_state").readAll();return t[0]}),y.apply(this,arguments)}function C(){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("EBDB").getEBDB(),t=yield e.store("secure_encrypted_backups_client_state").readAll();if((t==null?void 0:t.length)===0)return!1;var n=t[0],a=n.authorityLevel,i=n.backupTenancy;if(a==null)return!1;var l=i!=null?i:r("LSEncryptedBackupsBackupTenancy").PRODUCTION;return Number(l)===r("LSEncryptedBackupsBackupTenancy").PRODUCTION&&Number(a)===r("LSAuthorityLevel").AUTHORITATIVE}),b.apply(this,arguments)}l.startListeningEBDeviceRegistrations=u,l.trackOverprompting=d,l.addNewDevice=p,l.trackConsistency=f,l.getSecureEBClientState=h,l.isEBEnabledEBDB=C}),98);
__d("EncryptedBackupsUtils",["FBLogger","WAJids","WAStanzaUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return Date.now()-t>o("WATimeUtils").DAY_MILLISECONDS*30},s=function(t){return Date.now()-t>o("WATimeUtils").DAY_MILLISECONDS*30};function u(e,t,n,r,o){var a={frankingTag:r==null?void 0:r.frankingTag,reportingTag:r==null?void 0:r.reportingTag},i={frankingMetadata:a,messageId:t,senderId:e,timestampMs:n};return{encryptedTransportMessage:o,metadata:i}}function c(e){return JSON.stringify([e.author,e.chat,e.externalId])}function d(e){var t=JSON.parse(e);if(!Array.isArray(t))throw r("FBLogger")("wmi_eb").mustfixThrow("Unable to parse msg id string as proper json");if(t.length!==3)throw r("FBLogger")("wmi_eb").mustfixThrow("Parsed array should have 3 components");var n=o("WAJids").unsafeCoerceToUserJid(t[0]),a=o("WAJids").unsafeCoerceToChatJid(t[1]),i=o("WAStanzaUtils").toStanzaId(t[2]);return{author:n,chat:a,externalId:i}}l.entryOlderThan30Days=e,l.timestampOlderThan30Days=s,l.asBackupMessage=u,l.convertWAMsgIdToStringId=c,l.convertStringIdToWAMsgId=d}),98);
__d("LFUCache",["Cache","ExecutionEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e,s=15,u=1,c=6e4,d=(function(t){function n(n,o){var a;return a=t.call(this)||this,a.$LFUCache2=n&&n>0?n:s,a.$LFUCache3=o&&o>0?o:u,((e||(e=r("ExecutionEnvironment"))).canUseDOM||(e||(e=r("ExecutionEnvironment"))).isInWorker)&&a.$LFUCache4(),a}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.$LFUCache4=function(){clearTimeout(this.$LFUCache1),this.$LFUCache1=setTimeout(this.purge.bind(this),this.$LFUCache2*c)},o.destroy=function(){clearTimeout(this.$LFUCache1)},o.get=function(n,r){return this.has(n)&&this.$LFUCache5(n),t.prototype.get.call(this,n,r)},o.set=function(n,r,o,a){var e=this.has(n),i=t.prototype.set.call(this,n,r,o,a);return i&&(e?this.$LFUCache5(n):this.$LFUCache6(n,this.$LFUCache3)),i},o.purge=function(){var e=this,t=Array.from(this.__keys());t.forEach(function(t){e.$LFUCache7(t)<e.$LFUCache3?e.delete(t):e.$LFUCache6(t,0)}),this.$LFUCache4()},o.$LFUCache5=function(t){var e=this.$LFUCache7(t)+1;return this.$LFUCache6(t,e),e},o.$LFUCache7=function(t){var e=this.__getRaw(t);return e&&e.$LFUCache8?e.$LFUCache8:0},o.$LFUCache6=function(t,n){var e=this.__getRaw(t);return e||(e=this.__getNewRawObject()),e.$LFUCache8=n,this.__setRaw(t,e),!0},n})(r("Cache"));l.default=d}),98);
__d("MAWArmadilloAppDataTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={};s.name="ProtocolMsgId",s.internalSpec={externalId:[1,(e=o("WAProtoConst")).TYPES.STRING],author:[2,e.TYPES.STRING],chat:[3,e.TYPES.STRING]},u.name="MetaSyncMessageKeyProto",u.internalSpec={fromMe:[1,e.TYPES.BOOL],id:[2,e.TYPES.STRING]},c.name="MetaSyncMessageProto",c.internalSpec={key:[1,e.TYPES.MESSAGE,u],ts:[2,e.TYPES.INT64]},d.name="MetaSyncMessageRangeProto",d.internalSpec={lastMessageTimestamp:[1,e.TYPES.INT64],lastSystemMessageTimestamp:[2,e.TYPES.INT64],messages:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,c]},m.name="MetaSyncChatActionProto",m.internalSpec={type:[1,e.TYPES.STRING],chatJid:[2,e.TYPES.STRING],archived:[3,e.TYPES.BOOL],ts:[4,e.TYPES.INT64],messageRange:[5,e.TYPES.MESSAGE,d],read:[6,e.TYPES.BOOL]},p.name="MetaSyncMessageActionProto",p.internalSpec={type:[1,e.TYPES.STRING],protocolMsgId:[2,e.TYPES.MESSAGE,s]},_.name="MetaSyncActionProto",_.internalSpec={chatAction:[1,e.TYPES.MESSAGE,m],messageAction:[2,e.TYPES.MESSAGE,p],__oneofs__:{action:["chatAction","messageAction"]}},f.name="MetaSyncAppDataProto",f.internalSpec={actions:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,_]},g.name="EncryptedBackupsSecretsEpochProto",g.internalSpec={id:[1,e.TYPES.UINT64],anonId:[2,e.TYPES.BYTES],rootKey:[3,e.TYPES.BYTES],status:[4,e.TYPES.INT32]},h.name="EncryptedBackupsSecretsProto",h.internalSpec={backupId:[1,e.TYPES.UINT64],serverDataId:[2,e.TYPES.UINT64],epoch:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,g],tempOcmfClientState:[4,e.TYPES.BYTES],mailboxRootKey:[5,e.TYPES.BYTES],obliviousValidationToken:[6,e.TYPES.BYTES]},y.name="FingerprintProto",y.internalSpec={currentIndex:[1,e.TYPES.UINT32],deviceIndexes:[2,e.FLAGS.REPEATED|e.TYPES.UINT32],rawId:[3,e.TYPES.UINT32]},C.name="SyncKeyDataProto",C.internalSpec={keyId:[1,e.TYPES.BYTES],keyData:[2,e.TYPES.BYTES],keyEpoch:[3,e.TYPES.UINT32],timestamp:[4,e.TYPES.INT64],fingerprint:[5,e.TYPES.MESSAGE,y]},b.name="SyncKeyShareProto",b.internalSpec={keys:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,C],orphanKeys:[2,e.FLAGS.REPEATED|e.TYPES.BYTES]},v.name="SyncKeyRequestProto",v.internalSpec={keyIds:[1,e.FLAGS.REPEATED|e.TYPES.BYTES]},S.name="AppDataProto",S.internalSpec={type:[1,e.TYPES.STRING],actions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,_],encryptedBackupsSecrets:[3,e.TYPES.MESSAGE,h],syncKeyShare:[4,e.TYPES.MESSAGE,b],syncKeyRequest:[5,e.TYPES.MESSAGE,v]},R.name="IdentitiesPerDeviceProto",R.internalSpec={deviceJid:[1,e.TYPES.STRING],serializedPubKey:[2,e.TYPES.BYTES],baseKey:[3,e.TYPES.BYTES]},L.name="AppDataTableSchemaProto",L.internalSpec={externalId:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64],contents:[3,e.TYPES.MESSAGE,S],permittedIdentitiesPerDevice:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,R],ack:[5,e.TYPES.INT32],appDataId:[6,e.TYPES.INT32],recipientDevices:[7,e.FLAGS.REPEATED|e.TYPES.STRING],sendPartial:[8,e.TYPES.BOOL]},l.ProtocolMsgIdSpec=s,l.MetaSyncMessageKeyProtoSpec=u,l.MetaSyncMessageProtoSpec=c,l.MetaSyncMessageRangeProtoSpec=d,l.MetaSyncChatActionProtoSpec=m,l.MetaSyncMessageActionProtoSpec=p,l.MetaSyncActionProtoSpec=_,l.MetaSyncAppDataProtoSpec=f,l.EncryptedBackupsSecretsEpochProtoSpec=g,l.EncryptedBackupsSecretsProtoSpec=h,l.FingerprintProtoSpec=y,l.SyncKeyDataProtoSpec=C,l.SyncKeyShareProtoSpec=b,l.SyncKeyRequestProtoSpec=v,l.AppDataProtoSpec=S,l.IdentitiesPerDeviceProtoSpec=R,l.AppDataTableSchemaProtoSpec=L}),98);
__d("MAWArmadilloAppMetaTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="DbAppMetaValuesProto",s.internalSpec={msgTypeVersion:[1,(e=o("WAProtoConst")).TYPES.INT32],hmacKey:[2,e.TYPES.BYTES],allowSecurityAlert:[3,e.TYPES.BOOL],hotlikeSticker:[4,e.TYPES.BYTES],isBackfilledForOccamadillo:[5,e.TYPES.BOOL],allowSecurityAlertForSelf:[11,e.TYPES.BOOL],hasMigratedFromDexie:[12,e.TYPES.BOOL],restoreMigrationAttempts:[13,e.TYPES.INT32],deviceJid:[14,e.TYPES.STRING],restoreToDexieMigrationComplete:[15,e.TYPES.BOOL],dbMigrationVersion:[16,e.TYPES.INT32]},u.name="AppMetaTableSchemaProto",u.internalSpec={key:[1,e.TYPES.STRING],value:[2,e.TYPES.MESSAGE,s]},l.DbAppMetaValuesProtoSpec=s,l.AppMetaTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloCollectionVersionsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="CollectionVersionsTableSchemaProto",s.internalSpec={collection:[1,(e=o("WAProtoConst")).TYPES.STRING],version:[2,e.TYPES.INT32],state:[3,e.TYPES.STRING],finiteFailureStartTime:[4,e.TYPES.INT64],ltHash:[5,e.TYPES.BYTES],isCollectionInMacMismatchFatal:[6,e.TYPES.BOOL],isCollectionLthashInconsistent:[7,e.TYPES.BOOL]},l.CollectionVersionsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloContactsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="EphemeralSettingProto",s.internalSpec={ephemeralExpirationInSec:[1,(e=o("WAProtoConst")).TYPES.UINT32],ephemeralLastUpdatedOrSetTimestamp:[2,e.TYPES.INT64]},u.name="EphemeralSyncResponseBackoffInfo",u.internalSpec={syncResponseRetries:[1,e.TYPES.INT32],syncResponseSentTs:[2,e.TYPES.INT64]},l.EphemeralSettingProtoSpec=s,l.EphemeralSyncResponseBackoffInfoSpec=u}),98);
__d("MAWArmadilloDeletedMessagesTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="DeletedMessagesTableSchemaProto",s.internalSpec={author:[1,(e=o("WAProtoConst")).TYPES.STRING],chat:[2,e.TYPES.STRING],externalId:[3,e.TYPES.STRING],reason:[4,e.TYPES.STRING]},l.DeletedMessagesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloDeviceChangeAlertsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="DeviceChangeAlertsTableSchemaProto",s.internalSpec={action:[1,(e=o("WAProtoConst")).TYPES.STRING],isArchived:[2,e.TYPES.BOOL],deviceChangeAlertsId:[3,e.TYPES.INT64],location:[4,e.TYPES.STRING],model:[5,e.TYPES.STRING],ts:[6,e.TYPES.INT64],loggedOut:[7,e.TYPES.BOOL],deviceJid:[8,e.TYPES.STRING],identity:[9,e.TYPES.BYTES],platform:[10,e.TYPES.STRING],latitude:[11,e.TYPES.STRING],longitude:[12,e.TYPES.STRING],isConfirmed:[13,e.TYPES.BOOL],isNotified:[14,e.TYPES.BOOL]},l.DeviceChangeAlertsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloDyiBatchTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={BACKUP_RESTORE:0,E2E_DYI:1},u={};u.name="DyiBatchTableSchemaProto",u.internalSpec={batchId:[1,(e=o("WAProtoConst")).TYPES.INT32],numMessages:[2,e.TYPES.INT32],oldestTs:[3,e.TYPES.INT64],threadId:[4,e.TYPES.STRING],isThread:[5,e.TYPES.BOOL],numMessagesRestored:[6,e.TYPES.INT32],qplInstanceKeyForThread:[7,e.TYPES.INT64],qplFlowDescriptor:[8,e.TYPES.ENUM,s],qplInstanceKeyE2E:[9,e.TYPES.INT64],numThreadsRestored:[10,e.TYPES.INT64]},l.DYI_BATCH_TABLE_SCHEMA_PROTO_QPL_FLOW_DESCRIPTOR=s,l.DyiBatchTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloEBMsgRangesTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="EBMsgRangesTableSchemaProto",s.internalSpec={rangeId:[1,(e=o("WAProtoConst")).TYPES.UINT32],threadJid:[2,e.TYPES.STRING],minMsgExternalId:[3,e.TYPES.STRING],maxMsgExternalId:[4,e.TYPES.STRING],minMsgSortOrderMs:[5,e.TYPES.UINT64],maxMsgSortOrderMs:[6,e.TYPES.UINT64],creationTime:[7,e.TYPES.INT64]},l.EBMsgRangesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={};s.name="MsgContentProto",s.internalSpec={content:[1,(e=o("WAProtoConst")).TYPES.STRING],adminMsgContent:[2,e.FLAGS.REPEATED|e.TYPES.STRING],adminType:[3,e.TYPES.STRING],obsoleteExpiration:[4,e.TYPES.INT32],obsoleteTs:[5,e.TYPES.INT64],subtype:[6,e.TYPES.STRING],protobuf:[7,e.TYPES.BYTES],screenshotActionType:[8,e.TYPES.INT32],authorName:[9,e.TYPES.STRING],version:[10,e.TYPES.INT32],mentionedJids:[11,e.FLAGS.REPEATED|e.TYPES.STRING],commands:[12,e.FLAGS.REPEATED|e.TYPES.MESSAGE,u]},u.name="MsgContentCommandProto",u.internalSpec={commandType:[1,e.TYPES.INT32],offset:[2,e.TYPES.INT32],length:[3,e.TYPES.INT32],validationToken:[4,e.TYPES.STRING]},c.name="ReportingMetaProto",c.internalSpec={frankingTag:[1,e.TYPES.BYTES],frankingVersion:[2,e.TYPES.INT32],reportingContent:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES],frankingKey:[5,e.TYPES.BYTES]},d.name="DbQuotedMsgProto",d.internalSpec={remoteJid:[1,e.TYPES.STRING],content:[2,e.TYPES.MESSAGE,h]},m.name="VideoMsgContentProto",m.internalSpec={duration:[1,e.TYPES.INT32],width:[2,e.TYPES.INT32],height:[3,e.TYPES.INT32],mimetype:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],jpegThumbnailHeight:[6,e.TYPES.INT32],jpegThumbnailWidth:[7,e.TYPES.INT32]},p.name="ImageMsgContentProto",p.internalSpec={width:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],jpegThumbnail:[3,e.TYPES.BYTES],jpegThumbnailHeight:[4,e.TYPES.INT32],jpegThumbnailWidth:[5,e.TYPES.INT32]},_.name="AudioMsgContentProto",_.internalSpec={duration:[1,e.TYPES.INT32],mimetype:[2,e.TYPES.STRING],played:[3,e.TYPES.BOOL],waveform:[4,e.TYPES.BYTES]},f.name="DocumentFileMsgContentProto",f.internalSpec={filename:[1,e.TYPES.STRING],mimetype:[2,e.TYPES.STRING]},g.name="QuotedDbMediaProto",g.internalSpec={mediaType:[1,e.TYPES.STRING],plaintextHash:[2,e.TYPES.STRING],size:[3,e.TYPES.INT32],ts:[4,e.TYPES.INT64],mediaEntry:[5,e.TYPES.BYTES],validatedVideoInfo:[6,e.TYPES.MESSAGE,m],validatedImageInfo:[7,e.TYPES.MESSAGE,p],validatedAudioInfo:[8,e.TYPES.MESSAGE,_],validatedDocumentFileInfo:[9,e.TYPES.MESSAGE,f]},h.name="DbQuotedMsgContentProto",h.internalSpec={type:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64],externalId:[3,e.TYPES.STRING],author:[4,e.TYPES.STRING],msgContent:[5,e.TYPES.MESSAGE,s],obsoleteMedia:[6,e.TYPES.MESSAGE,g],msgId:[7,e.TYPES.STRING],mediaId:[8,e.TYPES.INT32],sourceId:[9,e.TYPES.STRING],xmaMessageType:[10,e.TYPES.INT32],specialTextSize:[11,e.TYPES.INT32],plaintextHash:[12,e.TYPES.STRING],expirationTs:[13,e.TYPES.INT64]},y.name="MessagesTableSchemaProto",y.internalSpec={type:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64],externalId:[3,e.TYPES.STRING],msgId:[4,e.TYPES.STRING],author:[5,e.TYPES.STRING],ack:[6,e.TYPES.INT32],resendCount:[7,e.TYPES.INT32],msgContent:[8,e.TYPES.MESSAGE,s],altIndex:[9,e.TYPES.STRING],forwardingScore:[10,e.TYPES.INT32],quote:[11,e.TYPES.MESSAGE,d],messageExpirationTs:[12,e.TYPES.INT64],ephemeralSetting:[13,e.TYPES.MESSAGE,o("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],revokedExternalId:[14,e.TYPES.STRING],isForwarded:[15,e.TYPES.BOOL],originalTs:[17,e.TYPES.INT64],sortOrderMs:[18,e.TYPES.INT64],reportingMeta:[19,e.TYPES.MESSAGE,c],messageDeleteTs:[20,e.TYPES.INT64],ephemeralCounterStarted:[21,e.TYPES.BOOL],quoteExternalId:[22,e.TYPES.STRING],unsendMsgContentDeleteTs:[23,e.TYPES.INT64],rowId:[24,e.TYPES.INT32],thread:[25,e.TYPES.INT32],mediaId:[26,e.TYPES.INT32],ephemeralMsgDisappeared:[27,e.TYPES.BOOL],threadJid:[28,e.TYPES.STRING],xmaId:[29,e.TYPES.INT32],specialTextSize:[30,e.TYPES.INT32],xmaMessageType:[31,e.TYPES.INT32],isExpiredXmaMsg:[32,e.TYPES.BOOL],ravenEphemeralType:[33,e.TYPES.INT32],ravenEphemeralMediaState:[34,e.TYPES.INT32],editCount:[35,e.TYPES.INT32],groupId:[36,e.TYPES.STRING],groupIndex:[37,e.TYPES.INT64],groupSize:[38,e.TYPES.INT64],receiverFetchId:[39,e.TYPES.STRING],source:[40,e.TYPES.STRING],quoteExpirationTs:[41,e.TYPES.INT64],applicationErrorCode:[42,e.TYPES.INT32],hdType:[43,e.TYPES.INT32],pollStanzaId:[44,e.TYPES.STRING],collapsibleId:[45,e.TYPES.STRING],isCollapsed:[46,e.TYPES.BOOL]},l.MsgContentProtoSpec=s,l.MsgContentCommandProtoSpec=u,l.ReportingMetaProtoSpec=c,l.DbQuotedMsgProtoSpec=d,l.VideoMsgContentProtoSpec=m,l.ImageMsgContentProtoSpec=p,l.AudioMsgContentProtoSpec=_,l.DocumentFileMsgContentProtoSpec=f,l.QuotedDbMediaProtoSpec=g,l.DbQuotedMsgContentProtoSpec=h,l.MessagesTableSchemaProtoSpec=y}),98);
__d("MAWArmadilloEditMsgHistoryTableSchema.pb",["MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="EditMsgHistoryTableSchemaProto",s.internalSpec={author:[1,(e=o("WAProtoConst")).TYPES.STRING],editMsgHistoryId:[2,e.TYPES.INT32],editTs:[3,e.TYPES.INT64],msgContent:[4,e.TYPES.MESSAGE,o("MAWArmadilloMessagesTableSchema.pb").MsgContentProtoSpec],originalMsgExternalId:[5,e.TYPES.STRING],specialTextSize:[6,e.TYPES.INT32],threadJid:[7,e.TYPES.STRING],editExternalId:[8,e.TYPES.STRING],sendStatus:[9,e.TYPES.INT32]},l.EditMsgHistoryTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloGroupInfoTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="GroupInfoSchemaProto",s.internalSpec={groupJid:[1,(e=o("WAProtoConst")).TYPES.STRING],threadId:[2,e.TYPES.INT32],creator:[3,e.TYPES.STRING],creationTs:[4,e.TYPES.INT64],name:[5,e.TYPES.STRING],nameOwner:[6,e.TYPES.STRING],nameTs:[7,e.TYPES.INT64],msgExpiration:[8,e.TYPES.INT32],participantVersion:[9,e.TYPES.STRING],inviter:[10,e.TYPES.STRING],memberAddMode:[11,e.TYPES.STRING]},l.GroupInfoSchemaProtoSpec=s}),98);
__d("MAWArmadilloGroupInvitesTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="GroupInvitesTableSchemaProto",s.internalSpec={inviterJid:[1,(e=o("WAProtoConst")).TYPES.STRING],invitedParticipantId:[2,e.TYPES.STRING],inviteCode:[3,e.TYPES.STRING],inviteExpirationTs:[4,e.TYPES.INT64],caption:[5,e.TYPES.STRING]},l.GroupInvitesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloMediaTablesSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NONE:0,LQ_4K:1,HQ_4K:2},u={},c={},d={},m={},p={},_={},f={},g={},h={};u.name="ChunkTableSchemaProto",u.internalSpec={plaintextHash:[1,(e=o("WAProtoConst")).TYPES.STRING],blobData:[2,e.TYPES.BYTES],mimetype:[3,e.TYPES.STRING],hashedPlaintextHash:[4,e.TYPES.STRING],chunkId:[5,e.TYPES.INT32]},c.name="MediaBackupSchemaProto",c.internalSpec={mediaBackupId:[1,e.TYPES.INT32],mediaId:[2,e.TYPES.INT32],objectId:[3,e.TYPES.STRING],msgId:[4,e.TYPES.STRING],fbid:[5,e.TYPES.STRING]},d.name="MediaEntriesProto",d.internalSpec={msgId:[1,e.TYPES.STRING],mediaEntryData:[2,e.TYPES.BYTES]},m.name="VideoMsgContentProto",m.internalSpec={duration:[1,e.TYPES.UINT32],width:[2,e.TYPES.UINT32],height:[3,e.TYPES.UINT32],mimetype:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],jpegThumbnailHeight:[6,e.TYPES.UINT32],jpegThumbnailWidth:[7,e.TYPES.UINT32],thumbnailPlaintextHash:[8,e.TYPES.STRING],gifPlayback:[9,e.TYPES.BOOL]},p.name="ImageMsgContentProto",p.internalSpec={width:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],jpegThumbnail:[3,e.TYPES.BYTES],jpegThumbnailHeight:[4,e.TYPES.UINT32],jpegThumbnailWidth:[5,e.TYPES.UINT32],thumbnailPlaintextHash:[6,e.TYPES.STRING],hdType:[7,e.TYPES.ENUM,s]},_.name="AudioMsgContentProto",_.internalSpec={duration:[1,e.TYPES.UINT32],mimetype:[2,e.TYPES.STRING],played:[3,e.TYPES.BOOL],waveform:[4,e.TYPES.BYTES]},f.name="DocumentFileMsgContentProto",f.internalSpec={filename:[1,e.TYPES.STRING],mimetype:[2,e.TYPES.STRING]},g.name="ValidatedResult",g.internalSpec={validatedMimeType:[1,e.TYPES.STRING],videoStreamType:[2,e.TYPES.STRING],videoCalculatedFps:[3,e.TYPES.UINT32],videoNominalFps:[4,e.TYPES.UINT32],videoWidth:[5,e.TYPES.UINT32],videoHeight:[6,e.TYPES.UINT32],videoDuration:[7,e.TYPES.UINT32],videoAvgBitsPerSecond:[8,e.TYPES.UINT32],audioStreamType:[9,e.TYPES.STRING],audioSamplingRate:[10,e.TYPES.UINT32],audioNumberOfChannels:[11,e.TYPES.UINT32],audioAvgBitsPerSecond:[12,e.TYPES.UINT32]},h.name="MediaTableSchemaProto",h.internalSpec={mediaType:[1,e.TYPES.STRING],plaintextHash:[2,e.TYPES.STRING],size:[3,e.TYPES.UINT64],mediaEntries:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d],ts:[5,e.TYPES.INT64],validatedVideoInfo:[6,e.TYPES.MESSAGE,m],validatedImageInfo:[7,e.TYPES.MESSAGE,p],validatedAudioInfo:[8,e.TYPES.MESSAGE,_],hashedPlaintextHash:[9,e.TYPES.STRING],mediaId:[10,e.TYPES.INT32],msgIds:[11,e.FLAGS.REPEATED|e.TYPES.STRING],objectId:[12,e.TYPES.STRING],fbid:[13,e.TYPES.STRING],validatedDocumentFileInfo:[14,e.TYPES.MESSAGE,f],validatedResult:[15,e.TYPES.MESSAGE,g],accessibilitySummaryText:[16,e.TYPES.STRING],isVideoGif:[17,e.TYPES.BOOL]},l.HD_TYPE=s,l.ChunkTableSchemaProtoSpec=u,l.MediaBackupSchemaProtoSpec=c,l.MediaEntriesProtoSpec=d,l.VideoMsgContentProtoSpec=m,l.ImageMsgContentProtoSpec=p,l.AudioMsgContentProtoSpec=_,l.DocumentFileMsgContentProtoSpec=f,l.ValidatedResultSpec=g,l.MediaTableSchemaProtoSpec=h}),98);
__d("MAWArmadilloMissingKeysTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="DeviceResponse",s.internalSpec={deviceId:[1,(e=o("WAProtoConst")).TYPES.INT32],deviceResponse:[2,e.TYPES.BOOL]},u.name="MissingKeysTableSchemaProto",u.internalSpec={keyHex:[1,e.TYPES.STRING],keyId:[2,e.TYPES.BYTES],timestamp:[3,e.TYPES.INT64],deviceResponses:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s]},l.DeviceResponseSpec=s,l.MissingKeysTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloParticipantsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ParticipantsTableSchemaProto",s.internalSpec={id:[1,(e=o("WAProtoConst")).TYPES.STRING],userJid:[2,e.TYPES.STRING],deliveredWatermarkTs:[3,e.TYPES.INT64],lastReadWatermarkTs:[4,e.TYPES.INT64],type:[5,e.TYPES.STRING],addressable:[6,e.TYPES.BOOL],lastReadActionTs:[7,e.TYPES.INT64],threadId:[9,e.TYPES.INT32],threadJid:[10,e.TYPES.STRING]},l.ParticipantsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloPendingMutationsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={SET:0,REMOVE:1},u={};u.name="PendingMutationsTableSchemaProto",u.internalSpec={id:[1,(e=o("WAProtoConst")).TYPES.INT32],collection:[2,e.TYPES.STRING],index:[3,e.TYPES.STRING],binarySyncAction:[4,e.TYPES.BYTES],version:[5,e.TYPES.INT32],operation:[6,e.TYPES.ENUM,s],timestamp:[7,e.TYPES.INT64],action:[8,e.TYPES.STRING]},l.SYNCD_MUTATION_SYNCD_OPERATION=s,l.PendingMutationsTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="PersonalSenderKeyStatusTableSchemaProto",s.internalSpec={groupJid:[1,(e=o("WAProtoConst")).TYPES.STRING],senderKeyId:[2,e.TYPES.INT32],rotateSenderKey:[4,e.TYPES.BOOL],senderKeyTs:[5,e.TYPES.INT64],hasSenderKey:[6,e.FLAGS.REPEATED|e.TYPES.STRING]},l.PersonalSenderKeyStatusTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloPollTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={OPEN:0,FROZEN:1},u={},c={},d={},m={};u.name="PollOptionProto",u.internalSpec={optionText:[1,(e=o("WAProtoConst")).TYPES.STRING],voteAuthors:[2,e.FLAGS.REPEATED|e.TYPES.STRING]},c.name="PollOptionsProto",c.internalSpec={pollOptionHash:[1,e.TYPES.STRING],pollOption:[2,e.TYPES.MESSAGE,u]},d.name="LatestSenderTimestampsMsProto",d.internalSpec={author:[1,e.TYPES.STRING],latestSenderTimestampMs:[2,e.TYPES.INT64]},m.name="PollTableSchemaProto",m.internalSpec={chatJid:[1,e.TYPES.STRING],encKey:[2,e.TYPES.BYTES],pollAuthor:[3,e.TYPES.STRING],pollStanzaId:[4,e.TYPES.STRING],pollOptions:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,c],pollParticipantCount:[6,e.TYPES.UINT32],pollState:[7,e.TYPES.ENUM,s],selectableOptionsCount:[8,e.TYPES.UINT32],title:[9,e.TYPES.STRING],latestSenderTimestampsMs:[10,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d]},l.POLL_STATE=s,l.PollOptionProtoSpec=u,l.PollOptionsProtoSpec=c,l.LatestSenderTimestampsMsProtoSpec=d,l.PollTableSchemaProtoSpec=m}),98);
__d("MAWArmadilloReactionsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ReactionsTableSchemaProto",s.internalSpec={ack:[1,(e=o("WAProtoConst")).TYPES.INT32],author:[2,e.TYPES.STRING],externalId:[3,e.TYPES.STRING],reactionId:[4,e.TYPES.STRING],reactToExternalId:[5,e.TYPES.STRING],reactToAuthor:[6,e.TYPES.STRING],reactToMsgId:[7,e.TYPES.STRING],threadJid:[8,e.TYPES.STRING],reaction:[9,e.TYPES.STRING],groupingKey:[10,e.TYPES.STRING],ts:[11,e.TYPES.INT64],rowId:[12,e.TYPES.INT32],senderTimestampMs:[13,e.TYPES.INT64]},l.ReactionsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloReceiptTablesSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={};s.name="DbUserStatusTsProto",s.internalSpec={deliveredTs:[1,(e=o("WAProtoConst")).TYPES.INT64],readTs:[2,e.TYPES.INT64]},u.name="StatusTsPerUserProto",u.internalSpec={userJid:[1,e.TYPES.STRING],dbUserStatusTs:[2,e.TYPES.MESSAGE,s]},c.name="IdentitiesPerDeviceProto",c.internalSpec={deviceJid:[1,e.TYPES.STRING],serializedPubKey:[2,e.TYPES.BYTES],baseKey:[3,e.TYPES.BYTES]},d.name="RetryCountPerDeviceProto",d.internalSpec={deviceJid:[1,e.TYPES.STRING],count:[2,e.TYPES.INT32]},m.name="ReceiptsTableSchemaProto",m.internalSpec={msgId:[1,e.TYPES.STRING],statusTsPerUser:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,u],permittedIdentitiesPerDevice:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,c],recipientDevices:[4,e.FLAGS.REPEATED|e.TYPES.STRING],retryCountsPerDevice:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d],waMsgId:[6,e.TYPES.STRING]},p.name="Receipts",p.internalSpec={device:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64]},_.name="PendingReceiptsTableSchemaProto",_.internalSpec={pendingReceiptId:[1,e.TYPES.STRING],thread:[2,e.TYPES.STRING],externalId:[3,e.TYPES.STRING],author:[4,e.TYPES.STRING],deliveryReceipts:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,p],readReceipts:[6,e.FLAGS.REPEATED|e.TYPES.MESSAGE,p]},l.DbUserStatusTsProtoSpec=s,l.StatusTsPerUserProtoSpec=u,l.IdentitiesPerDeviceProtoSpec=c,l.RetryCountPerDeviceProtoSpec=d,l.ReceiptsTableSchemaProtoSpec=m,l.ReceiptsSpec=p,l.PendingReceiptsTableSchemaProtoSpec=_}),98);
__d("MAWArmadilloReceiverFetchInfoTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ReceiverFetchInfoTableSchemaProto",s.internalSpec={mimetype:[1,(e=o("WAProtoConst")).TYPES.STRING],previewHeight:[2,e.TYPES.UINT32],previewWidth:[3,e.TYPES.UINT32],receiverFetchId:[4,e.TYPES.STRING],type:[5,e.TYPES.STRING],previewUrl:[6,e.TYPES.STRING],previewUrlExpirationTimestampMs:[7,e.TYPES.UINT64],accessibilitySummaryText:[8,e.TYPES.STRING]},l.ReceiverFetchInfoTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloSyncActionsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="SyncActionsTableSchemaProto",s.internalSpec={index:[1,(e=o("WAProtoConst")).TYPES.STRING],binarySyncData:[2,e.TYPES.BYTES],actionState:[3,e.TYPES.STRING],version:[4,e.TYPES.INT32],keyId:[5,e.TYPES.BYTES],modelId:[6,e.TYPES.STRING],modelType:[7,e.TYPES.STRING],indexMac:[8,e.TYPES.BYTES],valueMac:[9,e.TYPES.BYTES],collection:[10,e.TYPES.STRING],timestamp:[11,e.TYPES.INT64],action:[12,e.TYPES.STRING]},l.SyncActionsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloSyncKeysTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="SyncKeyFingerprint",s.internalSpec={currentIndex:[1,(e=o("WAProtoConst")).TYPES.INT32],deviceIndexes:[2,e.FLAGS.REPEATED|e.TYPES.INT32],rawId:[3,e.TYPES.INT64]},u.name="SyncKeysTableSchemaProto",u.internalSpec={id:[1,e.TYPES.BYTES],keyId:[2,e.TYPES.BYTES],keyData:[3,e.TYPES.BYTES],keyEpoch:[4,e.TYPES.INT64],timestamp:[5,e.TYPES.INT64],fingerprint:[6,e.TYPES.MESSAGE,s]},l.SyncKeyFingerprintSpec=s,l.SyncKeysTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloTasksTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="TasksTableSchemaProto",e.internalSpec={taskName:[1,o("WAProtoConst").TYPES.STRING],scheduledTime:[2,o("WAProtoConst").TYPES.INT64]},l.TasksTableSchemaProtoSpec=e}),98);
__d("MAWArmadilloThreadsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ThreadsTableSchemaProto",s.internalSpec={jid:[1,(e=o("WAProtoConst")).TYPES.STRING],threadOrder:[2,e.TYPES.STRING],folder:[4,e.TYPES.INT32],newestMsg:[5,e.TYPES.STRING],oldestMsg:[6,e.TYPES.STRING],lastReadMsg:[7,e.TYPES.STRING],lastReadMsgReceiptSent:[8,e.TYPES.STRING],lastReadMsgTs:[9,e.TYPES.INT64],newestMsgTs:[10,e.TYPES.INT64],muteExpireTimeMs:[11,e.TYPES.INT64],muteCallsExpireTimeMs:[12,e.TYPES.INT64],archived:[13,e.TYPES.BOOL],cannotReplyReason:[14,e.TYPES.STRING],chatId:[15,e.TYPES.INT32],optimisticThreadKey:[16,e.TYPES.STRING],isMigratedLocally:[17,e.TYPES.BOOL],snippetMsg:[18,e.TYPES.STRING],deduplicationKey:[19,e.TYPES.STRING],authoritativeThreadKey:[20,e.TYPES.STRING],snippetMsgTs:[21,e.TYPES.INT64],didInsertDualThreadCutoverAdminMsg:[22,e.TYPES.BOOL],unbumpFromTs:[23,e.TYPES.INT64],unbumpToTs:[24,e.TYPES.INT64]},l.ThreadsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloUnrenderedMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="UnrenderedMessagesTableSchemaProto",s.internalSpec={type:[1,(e=o("WAProtoConst")).TYPES.STRING],ts:[2,e.TYPES.INT64],externalId:[3,e.TYPES.STRING],msgId:[4,e.TYPES.STRING],author:[5,e.TYPES.STRING],ack:[6,e.TYPES.INT32],resendCount:[7,e.TYPES.INT32],ephemeralSetting:[8,e.TYPES.MESSAGE,o("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],messageDeleteForMeTs:[9,e.TYPES.INT64],rowId:[10,e.TYPES.INT32],thread:[11,e.TYPES.INT32],mediaId:[12,e.TYPES.INT32],msgContent:[13,e.TYPES.STRING],threadJid:[14,e.TYPES.STRING],reportingMeta:[15,e.TYPES.MESSAGE,o("MAWArmadilloMessagesTableSchema.pb").ReportingMetaProtoSpec],invitedParticipantUserJid:[16,e.TYPES.STRING],groupName:[17,e.TYPES.STRING],quote:[18,e.TYPES.MESSAGE,o("MAWArmadilloMessagesTableSchema.pb").DbQuotedMsgProtoSpec],xmaMessageType:[19,e.TYPES.INT32],sortOrderMs:[20,e.TYPES.INT64]},l.UnrenderedMessagesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloXMATableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="XMATableSchemaProto",s.internalSpec={associatedMessageId:[1,(e=o("WAProtoConst")).TYPES.STRING],author:[2,e.TYPES.STRING],ctas:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,u],defaultCTA:[4,e.TYPES.MESSAGE,u],defaultPreviewMediaId:[5,e.TYPES.INT32],externalId:[6,e.TYPES.STRING],faviconMediaId:[7,e.TYPES.INT32],headerMediaId:[8,e.TYPES.INT32],headerTitle:[9,e.TYPES.STRING],isTombstoned:[10,e.TYPES.BOOL],maxSubtitleNumOfLines:[11,e.TYPES.INT32],maxTitleNumOfLines:[12,e.TYPES.INT32],msgId:[13,e.TYPES.STRING],overlayDescription:[14,e.TYPES.STRING],overlayIconGlyph:[15,e.TYPES.INT32],overlayTitle:[16,e.TYPES.STRING],previewMediaIds:[17,e.FLAGS.REPEATED|e.TYPES.INT32],subtitleText:[18,e.TYPES.STRING],targetExpiringAtSec:[19,e.TYPES.INT64],targetId:[20,e.TYPES.STRING],targetType:[21,e.TYPES.INT32],targetUsername:[22,e.TYPES.STRING],threadJid:[23,e.TYPES.STRING],titleText:[24,e.TYPES.STRING],xmaId:[25,e.TYPES.INT32],xmaLayoutType:[26,e.TYPES.INT32],defaultPreviewMediaPlaintextHash:[27,e.TYPES.STRING],faviconPlaintextHash:[28,e.TYPES.STRING],headerMediaPlaintextHash:[29,e.TYPES.STRING]},u.name="CTAProto",u.internalSpec={buttonType:[1,e.TYPES.INT32],title:[2,e.TYPES.STRING],actionUrl:[3,e.TYPES.STRING],nativeUrl:[4,e.TYPES.STRING],ctaType:[5,e.TYPES.STRING]},l.XMATableSchemaProtoSpec=s,l.CTAProtoSpec=u}),98);
__d("MAWAuthoritativeThreadsCache",[],(function(t,n,r,o,a,i){"use strict";var e=new Set;i.AuthoritativeThreadsCache=e}),66);
__d("MAWBridgeReceiverFetchInfo",["WALogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r,o){var a=o.accessibilitySummaryText,i=o.mimetype,l=o.previewHeight,s=o.previewUrl,u=o.previewUrlExpirationTimestampMs,m=o.previewWidth,p=o.receiverFetchId,_=o.type;return{accessibilitySummaryText:a,mimetype:i,msgId:t,previewHeight:l,previewUrl:s,previewUrlExpirationTimestampMs:d(u),previewWidth:m,receiverFetchId:p,sortOrderMs:c(n,r),threadJid:e,type:_}}function u(e,t,n,r,o){var a=o.mimetype,i=o.previewHeight,l=o.previewWidth,s=o.receiverFetchId,u=o.type;return{mimetype:a,msgId:t,previewHeight:i,previewWidth:l,receiverFetchId:s,sortOrderMs:c(n,r),threadJid:e,type:u}}function c(e,t){return o("WATimeUtils").castToMillisTime(e!=null?e:t*1e3)}function d(t){if(t!=null)try{return o("WATimeUtils").castLongIntToMillisTime(t)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to cast previewUrlExpirationTimestampMs to millis time: ",""])),t);return}}l.createBridgeReceiverFetchInfoPayloadFromDbInfo=s,l.createBridgeReceiverFetchInfoPayloadFromUnstoredInfo=u}),98);
__d("MAWBridgeTypesCreators",["FBLogger","MAWAudioUtils","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","WAJids","WAMediaUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{threadJid:e}}function s(e){var t,n=e.ts;switch(e.type){case o("MAWMsgType").MSG_TYPE.REVOKED:n=(t=e.originalTs)!=null?t:e.ts;break;default:n=o("MAWDbMsg").getCanonicalTsFromMsg(e)}return{msgId:e.msgId,ts:n}}function u(e,t){var n=t.map(s);return{messages:n,threadJid:e}}function c(e){return{ravenMsgId:e.msgId,threadJid:e.threadJid}}function d(e,t){return e.filter(function(e){return t===e.threadJid}).map(function(e){return e.msgId})}function m(e){var t,n,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R=e.chatJid,L=e.filteredMsgIds,E=e.hasMediaForUI,k=e.hdTypes,I=e.media,T=e.offlineAttachmentId,D=e.ravenSettings,x=e.sortOrderMs,$=e.transportKey;switch(I.mediaType){case"Image":return{duration:null,ephemeralMediaState:D==null?void 0:D.ephemeralMediaState,ephemeralMediaViewMode:D==null?void 0:D.ephemeralMediaViewMode,filesize:I.size,hasMedia:E,hasPreviewMedia:((t=I.validatedImageInfo)==null?void 0:t.jpegThumbnail)!=null,hdTypes:k,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:(n=I.validatedImageInfo)==null?void 0:n.jpegThumbnailHeight,previewHeightLarge:(a=I.validatedImageInfo)==null?void 0:a.height,previewWidth:(i=I.validatedImageInfo)==null?void 0:i.jpegThumbnailWidth,previewWidthLarge:(l=I.validatedImageInfo)==null?void 0:l.width,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)};case"Video":return{duration:((s=I.validatedVideoInfo)==null?void 0:s.duration)!=null?((u=I.validatedVideoInfo)==null?void 0:u.duration)*1e3:0,ephemeralMediaState:D==null?void 0:D.ephemeralMediaState,ephemeralMediaViewMode:D==null?void 0:D.ephemeralMediaViewMode,filesize:I.size,gifPlayback:((c=I.validatedVideoInfo)==null?void 0:c.gifPlayback)===!0||I.isVideoGif===!0,hasMedia:E,hasPreviewMedia:((d=I.validatedVideoInfo)==null?void 0:d.jpegThumbnail)!=null,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:(m=I.validatedVideoInfo)==null?void 0:m.jpegThumbnailHeight,previewHeightLarge:(p=I.validatedVideoInfo)==null?void 0:p.height,previewWidth:(_=I.validatedVideoInfo)==null?void 0:_.jpegThumbnailWidth,previewWidthLarge:(f=I.validatedVideoInfo)==null?void 0:f.width,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)};case"Ptt":return{duration:(g=I.validatedAudioInfo)!=null&&g.duration?I.validatedAudioInfo.duration*1e3:null,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts),waveformData:((h=I.validatedAudioInfo)==null?void 0:h.waveform)!=null?o("MAWAudioUtils").serializeWaveform(I.validatedAudioInfo.waveform):void 0};case"Gif":return{accessibilitySummaryText:(y=I.accessibilitySummaryText)!=null?y:void 0,duration:null,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:I.msgIds,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:(C=I.validatedImageInfo)==null?void 0:C.jpegThumbnailHeight,previewHeightLarge:(b=I.validatedImageInfo)==null?void 0:b.height,previewWidth:(v=I.validatedImageInfo)==null?void 0:v.jpegThumbnailWidth,previewWidthLarge:(S=I.validatedImageInfo)==null?void 0:S.width,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)};case"Sticker":{var P,N,M,w=o("MAWImageUtils").boundHeightWidth((P=I.validatedImageInfo)==null?void 0:P.jpegThumbnailHeight,(N=I.validatedImageInfo)==null?void 0:N.jpegThumbnailWidth,o("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE),A=w.height,F=w.width;return{accessibilitySummaryText:(M=I.accessibilitySummaryText)!=null?M:void 0,duration:null,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:I.msgIds,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:A,previewHeightLarge:A,previewWidth:F,previewWidthLarge:F,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)}}case"DocumentFile":{var O,B={};for(var W of I.mediaEntries){var q=W[0],U=W[1],V=o("WAMediaUtils").mediaEntryDataToRawData(I.plaintextHash,U),H=V.filename;H!=null&&(B[q]=H)}return{defaultFilename:(O=I.validatedDocumentFileInfo)==null?void 0:O.filename,duration:null,filenames:B,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)}}default:throw I.mediaType,r("FBLogger")("messenger_web").mustfixThrow("[createBridgeMedia] Unsupported media type: "+I.mediaType)}}function p(e,t,n){return{chatJid:e,deliveredWatermarkTs:n!=null?n:o("WATimeUtils").castToUnixTime(0),fbid:t,lastReadActionTs:o("WATimeUtils").castToUnixTime(0),lastReadWatermarkTs:o("WATimeUtils").castToUnixTime(0)}}function _(e){var t=e.cannotReplyReason,n=e.folder,r=e.snippetParams,o=e.snippetSenderContactId,a=e.snippetType,i=e.threadJid;return{cannotReplyReason:t,folder:n,snippetContactIDs:r==null?void 0:r.contactIDs,snippetMentionJIDs:r==null?void 0:r.mentionJIDs,snippetParams:r==null?void 0:r.strings,snippetSenderContactId:o,snippetType:a,threadJid:i}}function f(e){return{chatJid:e.groupJid,memberAddMode:e.memberAddMode,threadName:e.name}}var g={snippetContactIDs:[],snippetMentionJIDs:[],snippetParams:[],snippetSenderContactId:null,snippetType:null};function h(e){var t,n=e.bumpTimestampMs,r=e.description,o=e.isMessageAuthorMe,a=e.isUnbump,i=e.skipBumpTimestampValidation,l=e.skipServerThreadBump,s=e.snippetData,u=e.threadJid,c=s==null?g:{snippetContactIDs:s.params.contactIDs,snippetMentionJIDs:(t=s.params.mentionJIDs)!=null?t:[],snippetParams:s.params.strings,snippetSenderContactId:s.senderContactId,snippetType:s.type};return babelHelpers.extends({},c,{bumpTimestampMs:n,description:r,isMessageAuthorMe:o,isUnbump:a,skipBumpTimestampValidation:i!=null?i:!1,skipServerThreadBump:l!=null?l:!1,threadJid:u})}function y(e){var t=e.author,n=e.chatJid,r=e.reaction,a=e.reactToMsgId,i=e.ts;return{actorId:o("WAJids").authorToUserId(t,o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid())),chatJid:n,messageId:a,reaction:r,ts:i}}function C(e){var t=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),n=e.author,r=e.chatJid,a=e.reactToMsgId;return{actorId:o("WAJids").authorToUserId(n,t),chatJid:r,messageId:a}}function b(e){return{creationTs:e.creationTs,creator:e.creator,groupJid:e.groupJid,msgExpiration:e.msgExpiration,name:e.name,nameOwner:e.nameOwner,nameTs:e.nameTs,participantVersion:e.participantVersion}}function v(e){var t=e.threadJid,n=e.inviteeJid;return{caption:e.caption,inviteCode:e.inviteCode,inviteeId:n,inviteExpireTs:e.inviteExpirationTs,inviterId:o("WAJids").extractUserId(e.inviterJid),threadJid:t}}function S(e){return{threadJid:e}}function R(e,t,n){return{senderId:o("WAJids").extractUserId(t),state:n,threadJid:e}}l.createBridgeUpdateE2EEMetadataParticipants=e,l.createBridgeDeletedMessage=s,l.createBridgeDeleteMessages=u,l.createBridgeRavenAction=c,l.getMsgIdsFilteredByJid=d,l.createBridgeMedia=m,l.createBridgeReceivedReceipt=p,l.createBridgeUpdatedThread=_,l.createBridgeUpdatedGroupInfo=f,l.createBridgeBumpedThreadV2=h,l.createBridgeUpsertReaction=y,l.createBridgeDeleteReaction=C,l.createBridgeGroupInfo=b,l.createBridgeGroupInvite=v,l.createBridgeDeleteGroupInvite=S,l.createBridgeReceivedChatState=R}),98);
__d("MAWCacheServiceBase",["MAWCacheServiceDB","MAWUICacheServicesBase","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=["id"],s=(function(){function t(e){this.$1=new Map,this.namespace=e}var r=t.prototype;return r.$2=function(t){var e;return(e=this.$1.get(t))!=null?e:null},r.updateInMemoryCache=function(t,n){this.$1.set(t,n)},r.updateInMemoryCacheBulk=function(t){var e=this;t.forEach(function(t){var n=t[0],r=t[1];e.updateInMemoryCache(n,r)})},r.getValueFromCache=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=this,r=this.$2(t);if(r!=null)return r;var a=yield o("MAWCacheServiceDB").getOrSetupMAWCacheDB(),i=yield a.runInTransaction([this.namespace],"readonly",function(e){return e.stores[n.namespace].getByIndex("key",[o("MAWUICacheServicesBase").adjustCacheKey(t)])},"read_from_persisted_"+this.namespace);if(i==null)return null;var l=i.id,s=babelHelpers.objectWithoutPropertiesLoose(i,e);return this.updateInMemoryCache(t,s),s});function r(e){return t.apply(this,arguments)}return r})(),t})();l.default=s}),98);
__d("MAWDbParticipant",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e+"_"+t}i.craftParticipantId=e}),66);
__d("MAWDbThread",["MAWHexUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWHexUtils").orderPreservingHex(e)+"_"+t}l.craftThreadOrder=e}),98);
__d("MAWDexie",["cr:10766"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:10766")}),34);
__d("MAWDexieTable",["MAWDexie","Promise","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=n("Promise"))).resolve(t)}function u(e){return e.reduce(function(e,t,n){return e.then(function(e){return t(n).then(function(t){return e.push(t),e})})},g([]))}function c(e){return r("MAWDexie").Promise.all(e)}function d(e){return r("MAWDexie").Promise.allSettled(e)}function m(e){return r("MAWDexie").Promise.PSD[e]}function p(e,t){r("MAWDexie").Promise.PSD[e]=t}function _(e){r("MAWDexie").Promise.PSD[e]=void 0}var f=(function(){function e(e,t,n,o){n===void 0&&(n=!0);var a=new(r("MAWDexie"))(e,babelHelpers.extends({},o,{chromeTransactionDurability:"relaxed",modifyChunkSize:r("justknobx")._("3166")}));t(a),this.name=e,this.stores=a,n&&this.open()}var t=e.prototype;return t.open=function(){this.stores.open()},t.close=function(){this.stores.close()},t.transact=function(t,r,o){var e=this;return s(this.stores.transaction(t,r.map(function(t){return e.stores[t]}),n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o();return e})))},babelHelpers.createClass(e,[{key:"tables",get:function(){return this.stores.tables}}])})();function g(e){return r("MAWDexie").Promise.resolve(e)}l.DEXIE_MIN_KEY=o("MAWDexie").Dexie.minKey,l.DEXIE_MAX_KEY=o("MAWDexie").Dexie.maxKey,l.undexify=s,l.dexieSequentialAll=u,l.dexieAll=c,l.dexieAllSettled=d,l.getDexiePSDItem=m,l.setDexiePSDItem=p,l.clearDexiePSDItem=_,l.DexieTable=f,l.dexieResolve=g}),98);
__d("MAWDbSchema.dexie",["FBLogger","MAWDbMsg","MAWDbParticipant","MAWDbThread","MAWDbVersionList","MAWDexie","MAWDexieTable","MAWFolderTypes","MAWLocalizationType","MAWODSProxy","MAWTimeUtils","WAJids","WALogger","WAMsg","WAMsgType","WAOdsEnums","WAStanzaUtils","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(t){var e=function(t){var e,n=(e=t.quote)==null?void 0:e.content;return t.quoteExternalId!=null&&(n==null?void 0:n.media)!=null};return t.messages.where("quoteExternalId").between(o("WAStanzaUtils").toStanzaId("0"),o("WAStanzaUtils").toStanzaId("["),!0,!0).filter(e).toArray().catch(function(){return t.messages.filter(e).toArray()}).then(function(e){var n=new Set(e.map(function(e){var t,n,r=(t=e.quote)==null?void 0:t.content;return r==null||(n=r.media)==null?void 0:n.plaintextHash}).filter(Boolean)),r=e.map(function(e){var t=e.msgId;return t});return t.media.filter(function(e){var t=e.plaintextHash;return n.has(t)}).toArray().then(function(e){var n=new Map(e.map(function(e){var t=e.mediaId,n=e.plaintextHash;return[n,t]}));return t.messages.where("msgId").anyOf(r).modify(function(e){var t,r=(t=e.quote)==null?void 0:t.content;e.quote.content.mediaId=n.get(r.media.plaintextHash),delete e.quote.content.media})})})},c=function(t){return t.groupInfo.toCollection().modify(function(e){typeof e.inviter=="number"&&delete e.inviter})},d=function(){return o("MAWDexieTable").dexieResolve()},m=function(t){return t.threads.filter(function(e){return o("WAJids").switchOnMsgrChatJidType(e.jid,{group:function(){return!1},user:function(){return e.oldestMsg!=null}})}).toArray().then(function(e){var n=[];return e.forEach(function(e){n.push(e.oldestMsg),n.push(o("MAWDbMsg").toMsgId__UNSAFE_DO_NOT_USE(e.newestMsg))}),t.messages.where("msgId").anyOf(n.filter(Boolean)).toArray().then(function(n){var r=new Map,a=[],i=[];n.forEach(function(e){r.set(e.msgId,e)}),e.forEach(function(e){var n=r.get(e.oldestMsg),l=r.get(e.newestMsg);return(n==null?void 0:n.type)==="Admin"&&(l==null?void 0:l.type)==="Admin"&&(n.msgId===l.msgId?i.push(e.chatId):a.push(e)),o("MAWDexieTable").dexieAll(a.map(function(e){return t.messages.where("thread").equals(e.chatId).toArray()})).then(function(e){return e.forEach(function(e){if(e.length!==0){var t=e[0].thread,n=e.filter(function(e){return e.type!=="Admin"});n.length>0||i.push(t)}}),o("MAWDexieTable").dexieAll([t.threads.bulkDelete(i),t.messages.where("thread").anyOf(i).delete()])})})})})},p=function(t){return t.unrenderedMessages.toCollection().modify(function(e){if(e.type===o("WAMsgType").MSG_TYPE.DELETE_FOR_ME){var t=e.messageDeleteForMeTs;e.messageDeleteForMeTs=t}})},_=function(t){var e=0,n=0,a=r("MAWDexie").currentTransaction;if(a==null)throw r("FBLogger")("maw_db").mustfixThrow("transaction does not exist");return a.on("complete",function(){e>0&&o("MAWODSProxy").odsBumpEntityKey({amount:e,entity:o("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),n>0&&o("MAWODSProxy").odsBumpEntityKey({amount:n,entity:o("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})}),t.threads.toArray().then(function(r){var a=r.reduce(function(e,t){return t!=null&&e.set(t.chatId,t),e},new Map);return o("MAWDexieTable").dexieAll([t.messages.toCollection().modify(function(t){if(t!=null){var r=a.get(t.thread);r!=null?t.threadJid=r.jid:e+=1}else n+=1}),t.unrenderedMessages.toCollection().modify(function(t){if(t!=null){var r=a.get(t.thread);r!=null?t.threadJid=r.jid:e+=1}else n+=1})])})},f=function(t){return t.isDualSend.toCollection().modify(function(e){e.version==null&&(e.version=1)})},g=function(t){return t.messages.toCollection().modify(function(e){e.type===o("WAMsgType").MSG_TYPE.ADMIN&&e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION&&(e.altIndex=o("MAWDbMsg").craftE2eeAdminMsgAltIndex(e.thread))})},h=function(t){return t.messages.toCollection().modify(function(e){e.sortOrderMs=o("MAWDbMsg").getSortOrderWithFallback(e)})},y=function(t){return t.threads.toCollection().modify(function(e){e.folder==null&&(e.folder=o("MAWFolderTypes").FOLDER_ID.INBOX)})},C=function(t){return t.messages.toCollection().modify(function(e){e.sortOrderMs=o("MAWDbMsg").getSortOrderWithFallback(e)})},b=function(t){return t.personalSenderKeyStatuses.toCollection().modify(function(e){e.rotateSenderKey=!0,e.hasSenderKey=new Set})},v=function(t){return t.messages.toCollection().modify(function(e){e.type===o("WAMsgType").MSG_TYPE.ADMIN&&e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&e.sortOrderMs!=null&&e.sortOrderMs>0&&(e.sortOrderMs=0)})},S=function(t){return t.messages.toCollection().modify(function(e){!(e.type===o("WAMsgType").MSG_TYPE.ADMIN&&(e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION))&&e.sortOrderMs!=null&&e.sortOrderMs<1661204086&&(e.sortOrderMs=o("MAWDbMsg").getCanonicalTsFromMsg(e)*1e3)})},R=function(t){return t.threads.filter(function(e){return e.isMigratedLocally===!0&&e.newestMsg!=null}).toArray().then(function(e){var n=e.map(function(e){return e.chatId}),r=new Map;return o("MAWDexieTable").dexieAll(e.map(function(e){return t.messages.where(["thread","sortOrderMs"]).between([e.chatId,0],[e.chatId,Number.MAX_VALUE]).last().then(function(e){e!=null&&r.set(e.thread,e.msgId)})})).then(function(){return t.threads.where("chatId").anyOf(n)})})},L=function(){return o("MAWDexieTable").dexieResolve()},E=function(t){return t.threads.toCollection().modify(function(e){if(e.lastReadMsgTs!=null&&e.lastReadMsgTs<o("WATimeUtils").MAX_INT&&(e.lastReadMsgTs=o("MAWTimeUtils").ensureValidMillisTime(e.lastReadMsgTs)),e.newestMsgTs!=null&&e.newestMsgTs<o("WATimeUtils").MAX_INT){var t=o("MAWTimeUtils").ensureValidMillisTime(e.newestMsgTs);e.newestMsgTs=t,t!=null&&(e.threadOrder=o("MAWDbThread").craftThreadOrder(t,e.jid))}})},k=function(t){return t.messages.toCollection().modify(function(e){e.type===o("WAMsgType").MSG_TYPE.ADMIN&&e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&(e.altIndex=o("MAWDbMsg").craftCutoverAdminMsgAltIndex(e.thread))})},I=function(){return o("MAWDexieTable").dexieResolve()},T=function(){return o("MAWDexieTable").dexieResolve()},D=function(){return o("MAWDexieTable").dexieResolve()},x=function(t){return t.participants.toCollection().modify(function(e){var t;e==null||((t=e.userJid)==null?void 0:t.indexOf("@msgr@msgr"))===!1||(e.id=e.id.replace("@msgr@msgr","@msgr"),e.userJid=e.userJid.replace("@msgr@msgr","@msgr"))}).then(r("emptyFunction"))},$=function(t){var e=t.threads.filter(function(e){return e.snippetMsg!=null&&e.snippetMsgTs==null});return e.toArray().then(function(n){var r=n.reduce(function(e,t){return t!=null&&t.snippetMsg!=null&&e.set(t.jid,t.snippetMsg),e},new Map),a=Array.from(r.values());return t.messages.where("msgId").anyOf(a).toArray().then(function(t){var n=t.reduce(function(e,t){return t!=null&&t.serverTs!=null&&e.set(t.msgId,t.serverTs),e},new Map);e.modify(function(e){var t=r.get(e.jid);if(t!=null){var a=n.get(t);a!=null&&(e.snippetMsgTs=o("WATimeUtils").castUnixTimeToMillisTime(a))}})})})},P=function(t){return t.threads.toArray().then(function(e){return o("MAWDexieTable").dexieAll(e.map(function(e){return t.participants.where("threadId").equals(e.chatId).modify(function(t){var n;t.threadJid=(n=t.threadJid)!=null?n:e.jid})}))})},N=P,M=function(t){var e=[];return t.groupInvites.toArray().then(function(n){var r=n.map(function(e){return e.invitedParticipantId});return t.participants.bulkGet(r).then(function(r){r.forEach(function(t,r){if(t==null){var o=n[r];e.push(o)}});var o=r.filter(Boolean);return t.groupInvites.bulkPut(n.map(function(t){var n=o.find(function(e){return e.id===t.invitedParticipantId});return n!=null?(t.inviteeJid=n.userJid,t.threadJid=n.threadJid,babelHelpers.extends({},t,{inviteeJid:n.userJid,threadJid:n.threadJid})):(e.push(t),t)}))})}).then(function(){return t.groupInvites.bulkDelete(e.map(function(e){return[e.invitedParticipantId,e.inviterJid]}))})},w=function(n){var t=new Map;return n.receipts.toArray().then(function(a){return o("MAWDexieTable").dexieAll(a.map(function(a){return n.messages.get({msgId:a.msgId}).then(function(i){if(i==null)return n.receipts.delete(a.msgId).then(r("emptyFunction"));var l=o("WAMsg").craftWAMsgIdString({author:i.author,chat:i.threadJid,externalId:i.externalId});if(t.has(l)){var s,u=(s=t.get(l))!=null?s:1;return t.set(l,u),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Duplicate waMsgId found for receipt, number of duplicates: ",""])),u),n.receipts.delete(a.msgId).then(r("emptyFunction"))}else return t.set(l,1),n.receipts.where("msgId").equals(i.msgId).modify(function(e){e.waMsgId=l}).then(r("emptyFunction"))})}))})},A=function(){return o("MAWDexieTable").dexieResolve()},F=function(t){return t.participants.toArray().then(function(e){var n=e.map(function(e){return babelHelpers.extends({},e,{id:o("MAWDbParticipant").craftParticipantId(e.threadJid,e.userJid)})}),r=e.map(function(e){return e.id});return t.participants.bulkDelete(r).then(function(){t.participants.bulkPut(n)})})},O=function(t){return t.reactions.toCollection().modify(function(e){e.ts=e.ts})},B=new Map([[(s=o("MAWDbVersionList")).VERSION.V26,u],[s.VERSION.V27,c],[s.VERSION.V28,d],[s.VERSION.V29,m],[s.VERSION.V30,p],[s.VERSION.V31,_],[s.VERSION.V43,f],[s.VERSION.V44,g],[s.VERSION.V45,h],[s.VERSION.V46,y],[s.VERSION.V47,C],[s.VERSION.V53,b],[s.VERSION.V54,v],[s.VERSION.V55,S],[s.VERSION.V56,R],[s.VERSION.V57,L],[s.VERSION.V58,E],[s.VERSION.V60,k],[s.VERSION.V66,I],[s.VERSION.V68,T],[s.VERSION.V71,D],[s.VERSION.V72,x],[s.VERSION.V82,$],[s.VERSION.V85,P],[s.VERSION.V87,N],[s.VERSION.V90,M],[s.VERSION.V91,w],[s.VERSION.V101,A],[s.VERSION.V104,F],[s.VERSION.V116,O]]);l.dbUpgrades=B}),98);
__d("MAWDbSchemaReStoreDexieUtils",["FBLogger","MAWDbSchema","MAWDbSchema.dexie","sortBy"],(function(t,n,r,o,a,i,l){"use strict";var e=r("sortBy")(Array.from(new Set([].concat(Array.from(o("MAWDbSchema").dbSchema.keys()),Array.from(o("MAWDbSchema.dexie").dbUpgrades.keys())))).map(function(e){return{schema:o("MAWDbSchema").dbSchema.get(e),upgrade:o("MAWDbSchema.dexie").dbUpgrades.get(e),version:e}}),function(e){var t=e.version;return t}),s=function(t,n){return Array.from(t.filter(function(e){return e.version<=n&&e.schema!=null}).reduce(function(e,t){var n;return(n=t.schema)==null||n.forEach(function(t){e.set(t.name,t)}),e},new Map).values())},u=function(t,n){return s(t,n).reduce(function(e,t){var n=t.autoIncrement,o=t.dexieOnly_primaryKeyUnique,a=t.name,i=t.primaryKey,l=t.removed,s=a.replace(/^e2ee_/,"");if(l===!0)return e[s]=null,e;if(n&&o===!0)throw r("FBLogger")("messenger_web").mustfixThrow("Invalid schema, cannot have both autoincremnet and unique constraints "+JSON.stringify(t));var u=n?"++":"",c=o===!0?"&":"",d=(i.length>1?"[":"")+i.join("+")+(i.length>1?"]":""),m=Object.values(t.indexes).map(function(e){var t=e.columns,n=e.unique!==!1,r=t.length>1,o=e.multiEntry_DO_NOT_USE===!0,a=n&&!o?"&":"",i=o?"*":"",l=""+a+i;return""+l+(r?"[":"")+t.join("+")+(r?"]":"")}).join(",");return e[s]=[""+u+c+d,m].filter(Boolean).join(","),e},{})},c=function(n){return u(e,n)};l.MAW_DB_VERSION_CHANGES=e,l.getDexieSchemaForVersion=u,l.getCompleteDexieSchemaForVersion=c}),98);
__d("MAWDbVersion",["MAWCurrentUser","MAWDbSchemaReStoreDexieUtils","MAWDbVersionList","MAWGetDbVersion","MAWIndexedDbMetadata","MAWODSProxy","MWFBLogger","Promise","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h=o("MWFBLogger").MWLogger().tags(["db","getDexieDbVersion"]),y=o("MAWGetDbVersion").getArmadilloDbVersion(),C=o("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(Math.min(o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES[o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.length-1].version,y>0?y:1/0));function b(e,t){var n=t.schema,r=t.upgrade,o=t.version;return n!=null&&r!=null?e.version(o).stores(n).upgrade(r):n!=null?e.version(o).stores(n):r!=null?e.version(o).upgrade(r):e.version(o),o}function v(t){return new(g||(g=n("Promise")))(function(n){if(!indexedDB){n();return}var r=indexedDB.open(t);r.onupgradeneeded=function(r){r.target.transaction.abort();var o=r.target.result;h.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," onupgradeneeded - closing db"])),t),o==null||o.close(),n()},r.onsuccess=function(e){var r=e.target.result,a=r==null?void 0:r.version;h.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose([""," version: ",""])),t,a!=null?a:"null"),r==null||r.close(),a!=null?(a%10>=1&&o("MAWODSProxy").odsBumpEntityKey({amount:1,entity:o("WAOdsEnums").Entity.MAW_DB_UNEXPECTED_VERSION,key:"fail_"+a%10}),n(o("MAWDbVersionList").toVersion(a/10))):n()},r.onerror=function(e){var r;h.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose([""," error ",""])),t,e==null||(r=e.target)==null||(r=r.error)==null?void 0:r.message),n()},r.onblocked=function(e){var n=e.target.result,r=n==null?void 0:n.version;h.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose([""," blocked, version: ",""])),t,r!=null?r:"null"),n==null||n.close()}})}function S(){var e=o("MAWCurrentUser").getID();return v(o("MAWIndexedDbMetadata").dbName(e))}function R(e,t){if(e.upgrade!=null||t.upgrade!=null)return!0;var n=Object.keys((e==null?void 0:e.schema)||{}),r=Object.keys((t==null?void 0:t.schema)||{}),o=[].concat(n,r),a=new Set(o);return a.size!==o.length}function L(e){return e.reduce(function(e,t,n){if(n===0)return[babelHelpers.extends({},t,{schema:o("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(t.version)})];var r=e[e.length-1],a=babelHelpers.extends({},t,{schema:t.schema!=null?o("MAWDbSchemaReStoreDexieUtils").getDexieSchemaForVersion([t],t.version):null});return R(r,a)?(e.push(a),e):(e.splice(e.length-1,1,babelHelpers.extends({},r,a,{schema:babelHelpers.extends({},r==null?void 0:r.schema,a==null?void 0:a.schema)})),e)},[])}function E(e,t,n,r){var a=r!=null?r:o("MAWGetDbVersion").getArmadilloDbVersion==null?void 0:o("MAWGetDbVersion").getArmadilloDbVersion();h.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["current db version: ",", target db version: ",""])),n,a),a==null&&h.WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["version is not set in QE"]))),n!=null&&n>a&&(h.WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["current db version is greater than target db version"]))),a=n);var i=o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.filter(function(e){var t=e.version;return n==null||t>n}).filter(function(e){var t=e.version;return a==null||a>=t}),l=o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.filter(function(e){var t=e.version;return a==null||a>=t});if(i.length===0||i.length===l.length){h.DEBUG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Skipping db upgrade and just applying latest schema"]))),t.addAnnotations({bool:{isUpgradeNeeded:!1}});var s=o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES[o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.length-1].version,u=Math.min(a!=null&&a>0?a:s,s);return e.version(u).stores(o("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(u)),u}var c=L(i);h.DEBUG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Applying "," updates between "," and ",""])),c.length,i[0].version,i[i.length-1].version);var g=c.filter(function(e){return!!e.upgrade}).map(function(e){return e.version.toString()}),y=c.filter(function(e){return!!e.schema}).map(function(e){return e.version.toString()});g.length&&t.addAnnotations({string_array:{dataMigrationVersions:g}}),y.length&&t.addAnnotations({string_array:{schemaUpgradeVersions:y}}),t.addAnnotations({bool:{isUpgradeNeeded:!0}});var C=0;return c.forEach(function(t){var n;C=Math.max((n=b(e,t))!=null?n:0,C!=null?C:0)}),C}l.CURRENT_MAW_STORES=C,l.getDexieDbVersion=v,l.getDBVersion=S,l.updateDB=E}),98);
__d("MAWDexieError",[],(function(t,n,r,o,a,i){"use strict";var e="ModifyError",l="BulkError",s="OpenFailedError",u="VersionChangeError",c="SchemaError",d="UpgradeError",m="InvalidTableError",p="MissingAPIError",_="NoSuchDatabaseError",f="InvalidArgumentError",g="SubTransactionError",h="UnsupportedError",y="InternalError",C="DatabaseClosedError",b="PrematureCommitError",v="ForeignAwaitError",S="UnknownError",R="ConstraintError",L="DataError",E="TransactionInactiveError",k="ReadOnlyError",I="VersionError",T="NotFoundError",D="InvalidStateError",x="InvalidAccessError",$="AbortError",P="TimeoutError",N="QuotaExceededError",M="SyntaxError",w="DataCloneError",A={AbortError:$,BulkError:l,ConstraintError:R,DatabaseClosedError:C,DataCloneError:w,DataError:L,ForeignAwaitError:v,InternalError:y,InvalidAccessError:x,InvalidArgumentError:f,InvalidStateError:D,InvalidTableError:m,MissingAPIError:p,ModifyError:e,NoSuchDatabaseError:_,NotFoundError:T,OpenFailedError:s,PrematureCommitError:b,QuotaExceededError:N,ReadOnlyError:k,SchemaError:c,SubTransactionError:g,SyntaxError:M,TimeoutError:P,TransactionInactiveError:E,UnknownError:S,UnsupportedError:h,UpgradeError:d,VersionChangeError:u,VersionError:I};i.DEXIE_ERROR=A}),66);
__d("MAWIDbSetupQplEventListener",["MAWDexieError","MAWQplProxy","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(t){var n=new Set(Object.keys(o("MAWDexieError").DEXIE_ERROR));n.has(t.reason)&&e!=null&&(e.endFail(t.reason),o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25310776,"6155"),"database_setup_failed"),s!=null&&(s(),s=null))}var c=function(r,o){return e=r,s=o,t.addEventListener("unhandledrejection",u),function(){return t.removeEventListener("unhandledrejection",u)}};l.trackDbSetupFailure=c}),98);
__d("MAWIndexedDBDeletion",["CurrentMessengerUser","FBLogger","MAWIndexedDbMetadata","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o){return indexedDB==null||t==null?(e||(e=n("Promise"))).resolve():new(e||(e=n("Promise")))(function(e,n){var a=indexedDB.deleteDatabase(t);a.onsuccess=function(){r("FBLogger")("maw_db").warn("%s db was deleted",o),e()},a.onblocked=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db: blocked. Make sure DB is closed.",o)},a.onerror=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db",o),n(a.error)}})}function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=o("CurrentMessengerUser").getID();yield(e||(e=n("Promise"))).all([s(o("MAWIndexedDbMetadata").dbName(t),"maw_v1"),s(o("MAWIndexedDbMetadata").restoreDbName2(t),"maw_v3"),s(o("MAWIndexedDbMetadata").jobsDbName(t),"signal"),s(o("MAWIndexedDbMetadata").logDbName(t),"logDb")])}),c.apply(this,arguments)}l.deleteDB=s,l.deleteMAWPersistence=u}),98);
__d("MAWLowLevelApiTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e={EXISTING_GROUP_INVITE:"existing_group_invite",MISSING_GROUP:"missing_group"},l={EXPIRED_GROUP_INVITE:"expired_group_invite",MISSING_GROUP:"missing_group",MISSING_GROUP_INVITE:"missing_group_invite"},s=n("$InternalEnum")({Initializing:"initializing",Open:"open",Closed:"closed",Error:"error",Upgrading:"upgrading"});i.WRITE_GROUP_INVITE_ERROR=e,i.GET_GROUP_INVITE_ERROR=l,i.DatabaseState=s}),66);
__d("MAWDbFactory",["ClientConsistencyEventEmitter","Deferred","MAWCurrentUser","MAWDbVersion","MAWDexieTable","MAWGetDbVersion","MAWIDbSetupQplEventListener","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWLowLevelApiTypes","MAWQplProxy","MAWReliabilityMonitor","MWFBLogger","Promise","asyncToGeneratorRuntime","getErrorSafe","gkx","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=["backendInitPromise","middleware","onDbPopulate"],h;function y(t,a){var i=null,l=o("MWFBLogger").MWLogger().tags(["db",t,a]),y=new(r("Deferred")),C=!1,b=!1,v,S=!1,R=null,L=a!=="worker"?null:o("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("DB_"+t+"_"+a,function(){return{extra:{isMakingDB:String(C),willBeSetup:String(b)},reason:String(R),state:(function(){if(R==null)return o("MAWReliabilityMonitor").HealthReportState.UNKNOWN;switch(R){case o("MAWLowLevelApiTypes").DatabaseState.Initializing:case o("MAWLowLevelApiTypes").DatabaseState.Upgrading:return o("MAWReliabilityMonitor").HealthReportState.PENDING;case o("MAWLowLevelApiTypes").DatabaseState.Open:return o("MAWReliabilityMonitor").HealthReportState.OK;case o("MAWLowLevelApiTypes").DatabaseState.Closed:case o("MAWLowLevelApiTypes").DatabaseState.Error:return o("MAWReliabilityMonitor").HealthReportState.ERROR}})()}});function E(){y=new(r("Deferred")),v==null||v(),C=!1,b=!1}function k(){return b}function I(){return y.getPromise().then(function(){return S})}function T(e,t,n){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n,h,k){var I=h.backendInitPromise,T=h.middleware,D=h.onDbPopulate,x=babelHelpers.objectWithoutPropertiesLoose(h,g),$=o("MAWCurrentUser").getID(),P=o("MAWIndexedDbMetadata").dbName($),N=r("qpl")._(25310776,"6155");function M(e){R=e,L==null||L.updateState()}if(i!=null){l.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["DB exists"]))),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_exsists");return}var w=o("MAWQplProxy").startQplUserFlow(r("qpl")._(1056836116,"905"),{string:{db:t,name:P}});if(b=!0,C)return o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_make_in_progress"),y.getPromise();l.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Starting DB Setup"]))),C=!0,o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_make_started"),v=o("MAWIDbSetupQplEventListener").trackDbSetupFailure(w,function(){M(o("MAWLowLevelApiTypes").DatabaseState.Error),y.reject("DB setup failed"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_setup_failed"),E()}),M(o("MAWLowLevelApiTypes").DatabaseState.Initializing);var A=yield o("MAWDbVersion").getDexieDbVersion(P);A==null&&(S=!0),w.addAnnotations({int:{currentVersion:A}});var F=k!=null?k:o("MAWGetDbVersion").getArmadilloDbVersion();if(w.addAnnotations({int:{targetVersion:F}}),I&&(A||0)<F){w.addPoint("separate_read_waiting_on_worker_upgrade"),l.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Waiting for worker to upgrade schema..."])));try{yield I}catch(e){throw l.catching(r("getErrorSafe")(e)).mustfixThrow("Worker startup promise rejected, schema upgrade failed.")}var O=yield o("MAWDbVersion").getDexieDbVersion(P);if(O!==F)throw l.mustfixThrow("Main thread waiting on worker schema upgrade from %s to %s, upgrade failed with version %s",A,F,O);A=O}else a==="worker"&&(o("MAWQplProxy").sendQPLIntAnnotationThroughBridge(r("qpl")._(1056839232,"112"),"dbVersion",A!=null?A:0),o("MAWQplProxy").sendQPLIntAnnotationThroughBridge(r("qpl")._(1056839232,"112"),"useSentBytesCache",r("gkx")("33008")?1:0));var B=function(n){var e=o("MAWDbVersion").updateDB(n,w,A,k);return!I&&a==="worker"&&o("MAWQplProxy").sendQPLBoolAnnotationThroughBridge(r("qpl")._(1056839232,"112"),"dbUpgradeNeeded",A!==e),l.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["latest pushed version: ",", current: ",", requested: ",""])),e,A,k!=null?k:"<latest>"),a==="worker"&&(A!==e?o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_version_upgraded"):o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_version_upgrade_not_required")),e};return i=new(o("MAWDexieTable")).DexieTable(P,function(e){T.forEach(function(t){e.use(t(n))});var i=B(e);e.on("populate",function(e){if(!e){M(o("MAWLowLevelApiTypes").DatabaseState.Error),y.reject("Missing DB for populate event"),w.endFail("on_populata-missing_txn"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_on_populate_missing_txn");return}l.info("MAWDB populated. HasPopulateEvent: %s",!!D),D==null||D(e)}),e.on("blocked",function(){l.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["DB Open blocked"]))),M(o("MAWLowLevelApiTypes").DatabaseState.Error),y.reject("DB Open blocked"),w.endFail("db_blocked"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_blocked"),E()}),e.on("ready",function(e){if(l.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["MAW DB setup complete"]))),C=!1,e==null){M(o("MAWLowLevelApiTypes").DatabaseState.Error),l.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["DB is null"]))),y.reject("DB is null"),w.endFail("db_null"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_null"),E();return}M(o("MAWLowLevelApiTypes").DatabaseState.Open),v==null||v(),y.resolve(),w.endSuccess({int:{dbVersion:i}}),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_ready")}),e.on("close",function(){M(o("MAWLowLevelApiTypes").DatabaseState.Closed),l.WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["DB forcibly closed"]))),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_forcibly_closed")}),e.on("versionchange",function(e){l.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Versionchange detected: ("," -> "," (event version: ",", highestUsed: (","), name: ",""])),e==null?void 0:e.oldVersion,e==null?void 0:e.newVersion,String(e==null?void 0:e.version),i,e==null?void 0:e.name),M(o("MAWLowLevelApiTypes").DatabaseState.Upgrading),a!=="worker"&&r("ClientConsistencyEventEmitter").emit("softRefresh","mawdb_versionchange"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_versionchange")})},void 0,x),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_make_requested"),y.getPromise()}),D.apply(this,arguments)}function x(e){if(i==null)throw l.mustfixThrow('IndexDB has not been initialized before executing "'+(e!=null?e:"unnamed")+'"');return i}function $(e){return i!=null&&!C?(h||(h=n("Promise"))).resolve(i):(y=y||new(r("Deferred")),y.getPromise().then(function(){return x(e)}))}function P(){return N.apply(this,arguments)}function N(){return N=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield $();e!=null&&(e.close(),i=null),E()}),N.apply(this,arguments)}function M(){i=null,E()}function w(e){r("promiseDone")(P());var t=o("MAWIndexedDbMetadata").dbName(e!=null?e:o("MAWCurrentUser").getID());r("promiseDone")(o("MAWIndexedDBDeletion").deleteDB(t,"maw")),L==null||L.stopMonitoring()}return{closeDB:P,deleteDb:w,getDB:$,getDBExn:x,isNewDb:I,makeDB:T,reset_singleton_INTERNAL_ONLY:M,setupPromise:function(){return y.getPromise()},willSetupDB:k}}l.makeIDBFactory=y}),98);
__d("MAWIndexedDbUI",["ExecutionEnvironment","MAWDbFactory","MAWDbMutationMiddleware","MAWDbProtocolMsgIdMiddleware","MAWDexieTable","MAWIndexedDb","MAWTransactor","Promise","cr:3527","gkx","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){var e=o("MAWDbFactory").makeIDBFactory("ui_idb","main");return{closeDB:e.closeDB,deleteDb:e.deleteDb,getDB:e.getDB,makeDB:function(a,i,l){var t=[o("MAWDbMutationMiddleware").getMAWDbMutationMiddleware];r("gkx")("1760")&&t.push(o("MAWDbProtocolMsgIdMiddleware").MAWDbProtocolMsgIdMiddleware),n("cr:3527")!=null&&t.push(n("cr:3527"));var s=e.makeDB(a,{autoOpen:r("gkx")("6817"),backendInitPromise:i.backendInitPromise,cache:"disabled",middleware:t,onDbPopulate:i.onDbPopulate},l);return s},reset_singleton_INTERNAL_ONLY:e.reset_singleton_INTERNAL_ONLY}}var d=c(),m=d.makeDB,p=d.closeDB,_=d.getDB,f=d.deleteDb,g=d.reset_singleton_INTERNAL_ONLY,h=(s||(s=r("ExecutionEnvironment"))).isInBrowser?_("MawDbInUISingleton_INTERNAL_ONLY").then(function(e){return{openReadonlyTransaction:function(n,a,i){return e.stores.transaction("r",a,function(){return o("MAWDexieTable").setDexiePSDItem("transactorName",n),o("MAWDexieTable").setDexiePSDItem("transactionRequested",(u||(u=r("performance"))).now()+u.timeOrigin),i(e.stores)})},openReadWriteTransaction:function(n,a,i){return e.stores.transaction("rw",a,function(){return o("MAWDexieTable").setDexiePSDItem("transactorName",n),o("MAWDexieTable").setDexiePSDItem("transactionRequested",(u||(u=r("performance"))).now()+u.timeOrigin),i(e.stores)})}}}):new(e||(e=n("Promise")))(function(){});l.makeMsgrTransactor=o("MAWTransactor").makeMsgrUITransactor_IMPORT_FROM_MAWIndexedDbUI_INSTEAD,l.afterTransaction=o("MAWIndexedDb").afterTransaction,l.makeMAWIndexedDBFactory=c,l.makeDB=m,l.closeDB=p,l.getDB=_,l.deleteDb=f,l.reset_singleton_INTERNAL_ONLY=g,l.MawDbInUISingleton=h}),98);
__d("MAWWorkerCacheServiceRegistry",["MAWSnippetsCacheService"],(function(t,n,r,o,a,i,l){"use strict";var e={snippets:o("MAWSnippetsCacheService").getMAWSnippetsCacheService()};function s(){return e}l.getWorkerRegistry=s}),98);
__d("MAWDbMsgOrReaction",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}function l(e,t){return e==null?t.forNull():e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}function s(e,t){return e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}function u(e,t){return e==null?t.forNull():e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}i.switchOnMsgOrReaction=e,i.switchOnMsgOrReactionNullish=l,i.switchOnMsgOrReactionMaybeUnstored=s,i.switchOnMsgOrReactionMaybeUnstoredNullish=u}),66);
__d("MAWWorkerCacheServices",["FBLogger","MAWBridge","MAWCacheServiceDB","MAWCacheServiceQPL","MAWCacheServiceUtils","MAWDbMsgOrReaction","MAWLoggerUtils","MAWSnippetsCacheCalculateDelta","MAWWorkerCacheServiceRegistry","Promise","WorkerScheduler","asyncToGeneratorRuntime","cr:2354","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){this.$1=o("MAWCacheServiceUtils").getMAWCacheServiceBroadcastChannel();var e=o("MAWWorkerCacheServiceRegistry").getWorkerRegistry();this.registry=e,this.schedulerRegistry=Object.keys(e).reduce(function(e,t){var n;return babelHelpers.extends({},e,(n={},n[t]=o("WorkerScheduler").makeScheduler(o("MAWCacheServiceUtils").getSchedulerName(t),o("MAWCacheServiceUtils").SCHEDULER_CONFIG),n))},{})}var a=t.prototype;return a.$2=function(t,n,r,a){var e={cache:n,instanceKey:a,namespace:t,source:r};this.$1==null?o("MAWBridge").getBridge().fireAndForget("event","broadcastChannelFallback",{event:{data:e},namespace:o("MAWCacheServiceUtils").MAW_CACHE_SERVICE_BROADCAST_CHANNEL}):this.$1.postMessage(e)},a.$3=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i){var l=o("MAWCacheServiceUtils").findDuplicates(t,function(e){var t=e[0],n=e[1];return t});if(l.length>0&&(r("FBLogger")("MAWCacheService").mustfix("Found duplicate keys in cache: %s. Original keys: %s, Namespace: %s, Source: %s",l.map(function(e){var t=e[0],n=e[1];return t}).join(", "),t.map(function(e){var t=e[0],n=e[1];return t}).join(", "),e,n),a!=null&&r("MAWCacheServiceQPL").addAnnotationsQPL(a,{bool:{hasDuplicateKeys:!0},string_array:{duplicateKeys:r("MAWCacheServiceQPL").redactKeysForNonEmployee(l.map(function(e){var t=e[0],n=e[1];return t}))}})),t.length===0){a!=null&&(r("MAWCacheServiceQPL").addPointQPL(a,"nothing_to_update_in_cache",n),r("MAWCacheServiceQPL").endSuccessQPL(a));return}a!=null&&r("MAWCacheServiceQPL").addPointQPL(a,"updating_cache_in_persisted_start",n);var s=this.registry[e];s.updateInMemoryCacheBulk(t);try{var u=o("MAWCacheServiceDB").convertCacheValueToDBRawValue(t),c=yield o("MAWCacheServiceDB").getOrSetupMAWCacheDB();yield c.runInTransaction([e],"readwrite",function(t){var n=u.map(function(e){return{item:e,selector:[e.key]}});return t.stores[e].bulkUpsert("key",n)},"update_cache_"+e),i==null||i(u.map(function(e){var t=e.key;return t})),a!=null&&r("MAWCacheServiceQPL").addPointQPL(a,"updating_cache_in_persisted_end",n)}catch(e){var d=r("getErrorSafe")(e);a!=null&&(r("MAWCacheServiceQPL").addAnnotationsQPL(a,{string:{error:d.message}}),r("MAWCacheServiceQPL").addPointQPL(a,"updating_cache_in_persisted_failed",n)),r("FBLogger")("MAWCacheService").catching(d).mustfix("Failed to update persisted cache")}a!=null&&r("MAWCacheServiceQPL").addPointQPL(a,"broadcasting_to_ui_start",n),this.$2(e,t,n,a)});function t(t,n,r,o,a){return e.apply(this,arguments)}return t})(),a.calculateDelta=function(a){var t=this,i=Object.values(this.registry).map(function(e){var i=e.shouldDropDelta(a);return i.then(function(i){if(!i){var l=t.schedulerRegistry[e.namespace];return l.runTask({fn:function(){return e.calculateDelta(a).then(function(i){var s=i.map(function(e){var t=e[0],n=e[1];return t}),c=o("MAWLoggerUtils").getInstanceKey();i.length!==0&&(r("MAWCacheServiceQPL").startQPL(c,e.namespace),r("MAWCacheServiceQPL").addAnnotationsQPL(c,{bool:{isRealtimeUpdate:!0},int:{instanceKey:c},string_array:{realtimeUpdatedKeys:s}}));var d=u(a);return t.$3(e.namespace,i,"realtime-update",c,function(e){n("cr:2354")==null||n("cr:2354").notifyCacheWrite(e,l,d)})}).catch(function(t){r("FBLogger")("MAWCacheService").catching(t).warn("Failed to calculate delta for: %s",e.namespace)})},name:"maw_calculate_delta",priority:o("WorkerScheduler").REGULAR_PRIORITY})}})});(e||(e=n("Promise"))).all([].concat(i)).catch(function(e){r("FBLogger")("MAWCacheService").catching(e).mustfix("Failed to calculate delta for all services")})},a.computeCachePayloadFromScratch=function(t,n,a,i){var e=this;i!=null&&r("MAWCacheServiceQPL").registerInstanceKeyInWorker(i),r("MAWCacheServiceQPL").addPointQPL(i,"compute_from_scratch_start",a),r("MAWCacheServiceQPL").addAnnotationsQPL(i,{string_array:{keysReceivedInWorker:r("MAWCacheServiceQPL").redactKeysForNonEmployee(n)}});var l=this.registry[t],s=this.schedulerRegistry[l.namespace];if(l==null)throw r("FBLogger")("messenger_web").mustfixThrow("No service found for namespace: "+t);return s.runTask({fn:function(){return l.computeCachePayloadFromScratch(n).then(function(n){return r("MAWCacheServiceQPL").addPointQPL(i,"compute_from_scratch_end",a),e.$3(t,n,a,i)}).catch(function(e){r("MAWCacheServiceQPL").endFailureQPL(i,"compute_from_scratch_failed",a),r("FBLogger")("MAWCacheService").catching(e).warn("Failed to compute cache payload from scratch")})},name:"maw_compute_cache_payload_from_scratch",priority:o("WorkerScheduler").REGULAR_PRIORITY})},t})();function u(e){var t=e.filter(function(e){var t=e[0];return["messages","reactions"].includes(t)}),n=o("MAWSnippetsCacheCalculateDelta").parseAndGetMostRecentSnippetUpdateMutateRequestForChatJids(t.map(function(e){var t=e[0],n=e[1];return n})),r=n.values().every(function(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e.value,{forMessage:function(t){return t.source==="eb_restore"},forReaction:function(){return!0}})});return r?"eb_restore":"whatsapp"}var c=null,d=function(){return c==null&&(c=new s),c};l.getMAWWorkerCacheServices=d}),98);
__d("MAWExtractMsFromExternalId",["I64","MAWExternalId","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=2199023255551;function c(t){try{var n=(s||(s=o("I64"))).of_string_opt(t);if(n!=null){var r;return(r=d(n))!=null?r:0}}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert externalId to number: ",""])),t)}return 0}function d(e){var t=Number((s||(s=o("I64"))).to_string(s.and_(s.lsr_(e,22),s.of_float(u))));return o("MAWExternalId").getThreeMostSignificantDigitsForSortOrderTimestamp(t)}l.extractMsFromStanzaId=c,l.extractMsFromExternalId=d}),98);
__d("MAWGetBumpTimestampMs",["I64","MAWAckLevel","MAWDbMsgOrReaction","MAWExtractMsFromExternalId","MAWTimeUtils","WALongInt","WATimeUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var r=n==null?null:o("MAWExtractMsFromExternalId").extractMsFromExternalId(n);return(e||(e=o("I64"))).add(o("MAWTimeUtils").millisTimeToTimestamp(t),e.of_int32(r!=null?r:0))}function u(t){var n=t.msg,a=t.throwIfNoServerTs,i=a?r("nullthrows")(n.serverTs):n.serverTs;return s(o("WATimeUtils").castUnixTimeToMillisTime(i!=null?i:n.ts),(e||(e=o("I64"))).of_string(n.externalId))}function c(t){return t.senderTimestampMs!=null?(e||(e=o("I64"))).of_string(o("WALongInt").longIntToDecimalString(t.senderTimestampMs)):s(o("WATimeUtils").castUnixTimeToMillisTime(t.ts),(e||(e=o("I64"))).of_string(t.externalId))}function d(t){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstoredNullish(t,{forMessage:function(n){return o("MAWAckLevel").isMsgAuthoritative(n.ack)&&n.sortOrderMs!=null?(e||(e=o("I64"))).of_float(n.sortOrderMs):u({msg:n,throwIfNoServerTs:!1})},forNull:function(){return(e||(e=o("I64"))).zero},forReaction:c})}l.calculateBumpTimestampMs=s,l.getBumpTimestampMs=d}),98);
__d("MAWSnippetsCacheServiceUtils",["I64","MAWDbMsgOrReaction","MAWGetBumpTimestampMs"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionNullish(t,{forMessage:function(n){return{msgAckLevel:n.ack,msgId:n.msgId,reactionId:void 0,timestamp:n.sortOrderMs!=null?n.sortOrderMs:(e||(e=o("I64"))).to_float(o("MAWGetBumpTimestampMs").getBumpTimestampMs(n))}},forNull:function(){return{msgAckLevel:void 0,msgId:void 0,reactionId:void 0,timestamp:Number.MIN_SAFE_INTEGER}},forReaction:function(n){return{msgAckLevel:void 0,msgId:void 0,reactionId:n.reactionId,timestamp:(e||(e=o("I64"))).to_float(o("MAWGetBumpTimestampMs").getBumpTimestampMs(n))}}})}l.getMsgOrReactionIdAndTimestamp=s}),98);
__d("MAWUpdateThreadListItemUtils",["MAWAckLevel","MAWDbMsg","MAWDbMsgOrReaction","MAWMsgType","MAWXMAUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(e,{forMessage:function(t){return t.altIndex===o("MAWDbMsg").SPAM_ALT_INDEX||t.altIndex===o("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX},forReaction:function(){return!1}})}function s(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(e,{forMessage:function(t){return t.ack===o("MAWAckLevel").ACK.clock},forReaction:function(){return!1}})}function u(e){var t;return e.msgId!=null&&e.type===o("MAWMsgType").MSG_TYPE.XMA&&((t=e.msgContent)==null?void 0:t.content)===""}function c(e){return e.type===o("MAWMsgType").MSG_TYPE.XMA&&o("MAWXMAUtils").isRtcXMA(e==null?void 0:e.xmaMessageType)}l.isSpamMessage=e,l.isOptimisticMessage=s,l.isXMAThreadSnippet=u,l.isRTCXMAMessage=c}),98);
__d("MAWSnippetsCacheCalculateDelta",["FBLogger","MAWDbMsgOrReaction","MAWGetThreadUpdateType","MAWSnippetsCacheServiceUtils","MAWUpdateThreadListItemUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="[SnippetsCacheService][Worker]";function s(e){var t=new Set(e.map(function(e){var t,n,r=(t=e.decryptedValues)!=null?t:[],o=(n=e.deletedValues)!=null?n:[];return[].concat(r,o)}).flat().map(function(e){return o("MAWUpdateThreadListItemUtils").isOptimisticMessage(e)?null:e.msgId}).filter(Boolean));return e.reduce(function(e,n){var r=n.type==="delete"?n.deletedValues:n.decryptedValues,o=p(r);return o=_(t,o),o.length===0||o.forEach(function(t){var r=t.threadJid,o=e.get(r),a=m({type:n.type,value:t},o);e.set(r,a)}),e},new Map)}function u(e){return e.some(function(e){var t=e.chatJid,n=e.lastComputedCacheValue,r=e.mutateReq;return!c(r)||d(r.value)})}function c(e){return!(e.type==="delete"||e.type==="deleteRange"||o("MAWUpdateThreadListItemUtils").isXMAThreadSnippet(e.value)||h(e.value)||y(e.value))}function d(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(t){return!1},forReaction:function(t){return t.reaction!=null&&o("MAWGetThreadUpdateType").canReactionAffectBump(t)}})}function m(e,t){if(t==null)return e;var n=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(e.value),r=n.timestamp,a=e.value.externalId,i=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(t.value),l=i.timestamp,s=t.value.externalId;return r===l?e.type==="delete"||e.type==="deleteRange"?e:t.type==="delete"||t.type==="deleteRange"?t:a.localeCompare(s)>0?e:t:r==null?t:l==null||r>l?e:t}function p(e){return e==null||e.length===0?[]:e.filter(function(e){return f(e)})}function _(e,t){return t.reduce(function(t,n){var r=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(n),a=r.msgId;return a!=null&&o("MAWUpdateThreadListItemUtils").isOptimisticMessage(n)&&e.has(a)?t:[].concat(t,[n])},[])}function f(e){var t=g(e)&&!o("MAWUpdateThreadListItemUtils").isSpamMessage(e);return t||C(e),t}function g(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(n){return o("MAWGetThreadUpdateType").isThreadUpdateTypeEligibleForSnippet(e)},forReaction:function(n){return o("MAWGetThreadUpdateType").canReactionAffectBump(n)&&h(n)||o("MAWGetThreadUpdateType").isThreadUpdateTypeEligibleForSnippet(e)}})}function h(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(t){return!1},forReaction:function(t){return t.reaction==null}})}function y(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(t){return t.ephemeralMsgDisappeared===!0},forReaction:function(t){return!1}})}function C(t){var n=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(t),a=n.msgId,i=n.reactionId;r("FBLogger")("MAWCacheService").info(e+" msg or reaction is not eligible for snippet update, msgId: %s, reactionId: %s",a,i)}l.parseAndGetMostRecentSnippetUpdateMutateRequestForChatJids=s,l.isDbTransactionRequiredForSnippetUpdate=u,l.canCalculateSnippetUpdateFromDelta=c,l.isNeededToCheckMessageExistence=d}),98);
__d("MAWSnippetsCacheService",["FBLogger","MAWAckLevel","MAWCacheServiceBase","MAWDbMsgOrReaction","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWSnippetsCacheCalculateDelta","MAWSnippetsCacheServiceUtils","MAWThreadSnippetBuildTxns","MAWThreadSnippetUtils","MAWTransactionMode","MAWUpdateThreadListItemUtils","MAWVault","Promise","WAJids","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=["messages","reactions"],u="[SnippetsCacheService][Worker]",c=(function(t){function r(){return t.call(this,"snippets")||this}babelHelpers.inheritsLoose(r,t);var a=r.prototype;return a.$MAWSnippetsCacheService$p_1=function(r){var t=this,a=r.filter(function(e){var t=e[0];return s.includes(t)}),i=o("MAWSnippetsCacheCalculateDelta").parseAndGetMostRecentSnippetUpdateMutateRequestForChatJids(a.map(function(e){var t=e[0],n=e[1];return n}));return(e||(e=n("Promise"))).all(Array.from(i.entries()).map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e[0],r=e[1],o=yield t.getValueFromCache(n);return{chatJid:n,lastComputedCacheValue:o,mutateReq:r}});return function(t){return e.apply(this,arguments)}})()))},a.calculateDelta=function(r){var t=this;return this.$MAWSnippetsCacheService$p_1(r).then(function(r){return r.length===0?(e||(e=n("Promise"))).resolve([]):o("MAWSnippetsCacheCalculateDelta").isDbTransactionRequiredForSnippetUpdate(r)?o("MAWIndexedDb").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY,reactions:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"MAWSnippetsCacheService:calculateDelta",function(e){return(function(n){return t.$MAWSnippetsCacheService$p_2(e,n)})})(r):t.$MAWSnippetsCacheService$p_3(r)})},a.computeCachePayloadFromScratch=function(t){var e=this;return o("MAWIndexedDb").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY,reactions:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"MAWSnippetsCacheService:computeCachePayloadFromScratch",function(t){return function(n){return o("MAWDexieTable").dexieAll(n.map(function(n){var r=o("WAJids").unsafeCoerceToChatJid(n);return e.$MAWSnippetsCacheService$p_4(t,r,"from-scratch")})).then(function(e){return e.filter(Boolean)})}})(t)},a.$MAWSnippetsCacheService$p_5=function(t,n){if(n==null)return"no-value-calculated-from-scratch";if(o("MAWUpdateThreadListItemUtils").isOptimisticMessage(t.value))return null;var e=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(t.value),r=e.msgAckLevel,a=e.msgId,i=e.reactionId,l=e.timestamp;return l==null?"missing-timestamp":a!=null&&a===n.value.snippetMsgId||i!=null&&i===n.value.snippetReactionId?null:a!=null&&r!==o("MAWAckLevel").ACK.received&&n.value.snippetMsgAckLevel===o("MAWAckLevel").ACK.clock?"optimistic-snippet-in-cache":l<n.timestamp?"older-than-last-snippet-value":null},a.shouldDropDelta=function(r){var t=this;return this.$MAWSnippetsCacheService$p_1(r).then(function(r){return r.length===0?(e||(e=n("Promise"))).resolve(!0):(e||(e=n("Promise"))).all(r.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e.chatJid,r=e.lastComputedCacheValue,o=e.mutateReq,a=yield t.$MAWSnippetsCacheService$p_5(o,r);return a!=null?(m({dropReason:a,key:n,msgOrReaction:o.value,operation:o.type}),!0):!1});return function(t){return e.apply(this,arguments)}})())).then(function(e){return!!e.every(function(e){return e===!0})})})},a.$MAWSnippetsCacheService$p_4=function(t,n,r){var e=this;return o("MAWThreadSnippetUtils").getThreadSnippetFromScratch(t,n).then(function(t){var a=e.$MAWSnippetsCacheService$p_6(n,t,r);if(a!=null)return o("MAWDexieTable").dexieResolve([n,a])})},a.$MAWSnippetsCacheService$p_3=function(t){var e=this;return t.map(function(t){var n=e.$MAWSnippetsCacheService$p_7(t);if(n!=null)return[t.chatJid,n]}).filter(Boolean)},a.$MAWSnippetsCacheService$p_2=function(t,n){var e=this;return o("MAWDexieTable").dexieAll(n.map(function(n){return o("MAWSnippetsCacheCalculateDelta").canCalculateSnippetUpdateFromDelta(n.mutateReq)?e.$MAWSnippetsCacheService$p_8(t,n.mutateReq.value).then(function(t){if(!t){var r=e.$MAWSnippetsCacheService$p_7(n);if(r!=null)return o("MAWDexieTable").dexieResolve([n.chatJid,r])}}):e.$MAWSnippetsCacheService$p_4(t,n.chatJid,"realtime-from-scratch")})).then(function(e){return e.filter(Boolean)})},a.$MAWSnippetsCacheService$p_7=function(t){var e=o("MAWThreadSnippetBuildTxns").buildThreadSnippetForMsgOrIncomingReaction(t.chatJid,t.mutateReq.value),n=this.$MAWSnippetsCacheService$p_6(t.chatJid,{snippet:e,snippetMsgOrReaction:t.mutateReq.value},"realtime-calculate-delta");return n},a.$MAWSnippetsCacheService$p_6=function(t,n,r){if(n==null){d({flow:r,key:t,threadSnippetResult:n});return}var e=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(n.snippetMsgOrReaction),a=e.msgAckLevel,i=e.msgId,l=e.reactionId,s=e.timestamp;if(d({flow:r,key:t,msgAckLevel:a,msgId:i,reactionId:l,threadSnippetResult:n,timestamp:s}),s!=null){var u=babelHelpers.extends({},n.snippet.snippetParams,{strings:n.snippet.snippetParams.strings.map(function(e){return o("MAWVault").unvault(e)})});return{key:t,timestamp:s,value:{snippet:babelHelpers.extends({},n.snippet,{snippetParams:u}),snippetMsgAckLevel:a,snippetMsgId:i,snippetReactionId:l}}}},a.$MAWSnippetsCacheService$p_8=function(t,n){if(!o("MAWSnippetsCacheCalculateDelta").isNeededToCheckMessageExistence(n))return o("MAWDexieTable").dexieResolve(!1);var e=o("MAWDbMsgOrReaction").switchOnMsgOrReaction(n,{forMessage:function(t){return null},forReaction:function(t){return t.reactToMsgId}});return e==null?o("MAWDexieTable").dexieResolve(!0):o("MAWDbMsgTxns").getMsgsByMsgIds(t,[e]).then(function(e){return e.length===0})},r})(r("MAWCacheServiceBase"));function d(e){var t=e.flow,n=e.key,o=e.msgAckLevel,a=e.msgId,i=e.reactionId,l=e.threadSnippetResult,s=e.timestamp;if(l==null){r("FBLogger")("MAWCacheService").warn(u+"["+t+"] Failed to calculate thread snippet, key: %s",n);return}if(s==null){r("FBLogger")("MAWCacheService").warn(u+"["+t+"] No timestamp found for the thread snippet, key: %s,\n      msgId: %s, reactionId: %s",n,a,i);return}r("FBLogger")("MAWCacheService").info(u+"["+t+"] Snippet successfully calculated, key: %s,\n    timestamp: %s, msgId: %s, reactionId: %s, ack level %s",n,s,a,i,o)}function m(e){var t=e.dropReason,n=e.key,a=e.msgOrReaction,i=e.operation,l=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(a),s=l.msgAckLevel,c=l.msgId,d=l.reactionId,m=l.timestamp;r("FBLogger")("MAWCacheService").info(u+" Drop update for msg or reaction, reason: %s, key: %s, msgId: %s, reactionId: %s, timestamp: %s, ackLevel: %s, operation: %s",t,n,c,d,m,s,i)}var p=new c,_=function(){return p};l.getMAWSnippetsCacheService=_}),98);
__d("MAWDataSyncQueue",["Promise","WALogger","asyncToGeneratorRuntime","getErrorSafe","qex","throttle"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=r("qex")._("853")||1e3,d=r("qex")._("855")||1e3,m=function(){return f=!1,b({isUnloading:!0})},p=[],_=[],f=!1,g=[],h=function(){var e,t=p.splice(0,p.length);(e=_).push.apply(e,t)},y=function(){return _.splice(0,c)},C=function(r){var t=y();if(t.length!==0)return(u||(u=n("Promise"))).all(g.map(function(n,a){return n(t,r).catch(function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unhandled exception caught in middleware "," sync: ",""])),a,t)})})).then(function(){return C(r)})},b=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!f){f=!0,h();try{yield C(e)}catch(e){var t,n=r("getErrorSafe")(e);throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[MAWIndexedDbMiddleware] error handling queue batch: ",""])),(t=n==null?void 0:n.message)!=null?t:n.toString()),e}finally{f=!1,p.length>0&&v()}}});return function(n){return e.apply(this,arguments)}})(),v=r("throttle")(b,d),S=function(t,n){p.push({type:t,value:n}),v()},R=function(t){g.some(function(e){return e===t})||g.push(t)},L=function(){g=[]},E=function(){p=[],_=[]},k=function(){return p};l.forceFlushDataSyncQueue=m,l.addSyncItem=S,l.registerDataSyncCallback=R,l.clearDataSyncCallbacks=L,l.clearDataSyncQueue_FOR_TESTING_ONLY=E,l.getDataSyncQueue_FOR_TESTING_ONLY=k}),98);
__d("MAWDataSyncMiddleware",["FBLogger","MAWDataSyncQueue","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set(["contacts","groupInfo","messages","participants","threads","reactions","xma","pendingStanzas"]);function s(t,n){var r=t.table(n);return e.has(n)?babelHelpers.extends({},r,{mutate:function(t){return r.mutate(t).then(function(e){return t.type==="delete"?(t.keys.forEach(function(e){o("MAWDataSyncQueue").addSyncItem(t.type,{key:e,tableName:n})}),e):(e.results!=null?e.results.forEach(function(e){o("MAWDataSyncQueue").addSyncItem(t.type,{key:e,tableName:n,values:t.values})}):e.lastResult!=null&&o("MAWDataSyncQueue").addSyncItem(t.type,{key:e.lastResult,tableName:n,values:t.values}),e)})}}):r}function u(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return s(t,n)}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(e).mustfix("Error applying DataSync Middleware, messages made during this session will not be properly synced to registered consumers"),t}},name:"MAWDataSyncMiddleware",stack:"dbcore"}}l.getDataSyncMiddleware=u}),98);
__d("MAWIndexedDb",["ExecutionEnvironment","FBLogger","MAWBridge","MAWCacheServiceMiddleware","MAWDataSyncMiddleware","MAWDbFactory","MAWDbMutationMiddleware","MAWDbMutationValidator","MAWDbProtocolMsgIdMiddleware","MAWDbSchema","MAWDexie","MAWLSDataSyncMiddleware","MAWMpsGating","MAWTransactor","MWFBLogger","asyncToGeneratorRuntime","cr:10181","cr:10182","cr:17239","cr:3527","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){e===void 0&&(e="idb");var t=o("MAWDbFactory").makeIDBFactory(e,"worker");function a(e){return t.setupPromise().then(function(){return t.getDBExn(e)})}return babelHelpers.extends({},t,{getSignalDB:a,makeDB:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,a,i){var l=[o("MAWDbMutationMiddleware").getMAWDbMutationMiddleware];return o("MAWMpsGating").isMpsMessageRendering()||l.push(o("MAWLSDataSyncMiddleware").getMAWLSDataSyncMiddleware),r("gkx")("1760")&&l.push(o("MAWDbProtocolMsgIdMiddleware").MAWDbProtocolMsgIdMiddleware),l.push(r("MAWCacheServiceMiddleware")),a.enableDataSyncMiddleware&&l.push(o("MAWDataSyncMiddleware").getDataSyncMiddleware),a.enableMutationValidator===!0&&l.push(o("MAWDbMutationValidator").getMutationValidatorMiddleware),n("cr:3527")!=null&&l.push(n("cr:3527")),r("justknobx")._("4087")&&n("cr:17239")!=null&&(yield n("cr:17239")(e)),t.makeDB(e,{autoOpen:!0,middleware:l,onDbPopulate:a.onDbPopulate},i)});function a(t,n,r){return e.apply(this,arguments)}return a})()})}var c=u(),d="idle",m=c.isNewDb,p=c.willSetupDB,_=function(t,n,r){return c.makeDB(t,n,r).then(function(){d="ready"})},f=c.closeDB,g=c.getDBExn,h=c.getSignalDB,y=c.getDB,C=function(t){return c.reset_singleton_INTERNAL_ONLY()},b=c.deleteDb;function v(){return d}function S(e){var t=d;return d="migrating",e.finally(function(){d=t})}var R=new WeakMap,L=new WeakMap,E=o("MWFBLogger").MWLogger().tags(["db","afterTransaction"]);function k(e){var t=r("MAWDexie").currentTransaction;if(t==null)throw E.mustfixThrow("afterTransactionEffect called outside of dexie transaction");if(typeof e=="function"){var n=R.get(t)||[];n.push(e),R.set(t,n),n.length===1&&t.on("complete",function(){var e=R.get(t)||[];e.forEach(function(e){e()}),R.delete(t)})}}function I(e){var t=r("MAWDexie").currentTransaction;if(t==null)throw E.mustfixThrow("afterTransaction called outside of dexie transaction","maw_db");var a=L.get(t);if(a!=null)a.push(e);else{var i=[e];L.set(t,i),t.on("complete",function(){L.delete(t),r("gkx")("5675")&&(s||(s=r("ExecutionEnvironment"))).isInMainThread&&n("cr:10182")!==null&&n("cr:10181")!==null?n("cr:10182").handleEvents(n("cr:10181").LSDatabaseSingleton,i):o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:i})})}}var T=new Set(["NewMsg","NewMsgs","MsgUpdated","NewMedia","NewMediaRange","MediaExpired","XMAShareExpired","DeleteMessagesOfThread","UpsertReaction","DeleteReaction","DeleteMessages","NewXMA","EditMsgHistoryAdded","MsgsStartCountdown","MsgClearCountdown","XMAShareTombstoned","NewReceiverFetchInfo","NewXMAs","NewPoll","RavenActionUpdate"]);function D(t,n){if(n!==!0&&o("MAWMpsGating").isMpsMessageRendering()&&T.has(t.tag)){r("FBLogger")("wmi").INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MpsMessageRendering] Ignoring afterTxn event: ",""])),t.tag);return}if(t.tag==="UpdateThreadActivity"&&r("FBLogger")("wmi").mustfix("Thread consistency uses MAW DB mechanism instead of new one"),t.tag==="ThreadUpdated")try{var a=t.value.snippetContactIDs;a!=null&&a.some(function(e){return e==="Facebook User"})&&(E.mustfix('Something is still setting a contact id as "Facebook User"'),t.value=babelHelpers.extends({},t.value,{snippetContactIDs:a.map(function(e){return e==="Facebook User"?"0":e})}))}catch(e){}I(t)}function x(e,t){var n=r("MAWDexie").currentTransaction;if(n==null)throw E.mustfixThrow("afterTransactionForThreadEvent called outside of dexie transaction","maw_db");n.on("complete",function(){o("MAWBridge").getBridge().fireAndForget("threadEvent",t,e)})}l.TABLES_TO_ENCRYPT=o("MAWDbSchema").TABLES_TO_ENCRYPT,l.makeMsgrTransactor=o("MAWTransactor").makeMsgrTransactor,l.makeMAWIndexedDBFactory=u,l.isNewDb=m,l.willSetupDB=p,l.makeDB=_,l.closeDB=f,l.getDBExn=g,l.getSignalDB=h,l.getDB=y,l.setDB_INTERNAL_USE_ONLY=C,l.deleteDb=b,l.getDbStatus=v,l.updateStatusDuringMigration=S,l.afterTransactionEffect=k,l.afterTransaction=D,l.afterTransactionThreadEvent=x}),98);
__d("MAWLLAMigrationUtils",["Random","gkx","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("652"),s=Math.max(e,10),u=s*10,c=new Map([["FTS",u]]);function d(e){if(r("gkx")("9340"))return 1;var t=c.get(e);return t!=null?t:s}function m(e,t){t===void 0&&(t={});var n=d(e);return e==="debug"||e==="test"?[]:r("gkx")("23956")&&o("Random").coinflip(n)?[r("qpl")._(1056839327,"560"),babelHelpers.extends({double:{sampleRate:1/n},string:{transactor:e}},t)]:[]}l.getTransactorQPLParam=m}),98);
__d("MAWTransactor",["MAWDexie","MAWDexieTable","MAWErrorObject","MAWIndexedDb","MAWIndexedDbUI","MAWLLAMigrationUtils","MAWQplProxy","MAWTransactionMode","MWFBLogger","WAExceededStorageQuota","WALogger","gkx","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=["MWPTransactor"],d=o("MWFBLogger").MWLogger();function m(t,n,a,i,l,s){return i!=null&&r("MAWDexie").currentTransaction!=null&&i.endFail("invoked_in_nested_transaction",{string:{current_transaction_mode:r("MAWDexie").currentTransaction.mode},string_array:{current_transaction_store_names:r("MAWDexie").currentTransaction.storeNames}}),r("MAWDexie").currentTransaction!=null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["makeMsgrTransactor "," should not be called inside another transaction. The transaction will be forced to execute on top-level"])),l),t.transact(n,a,s)}function p(e){var t=o("MAWLLAMigrationUtils").getTransactorQPLParam(e),n=t.length===2?t:[null,void 0],r=n[0],a=n[1];return r!=null?o("MAWQplProxy").startQplUserFlow(r,a,{sendThroughBridge:!1}):null}function _(e,t,n,r){return C(e,t,function(e){return o("MAWIndexedDb").getDB(e)},n,r)}function f(e,t,n){return C(e,t,o("MAWIndexedDbUI").getDB,n)}function g(e,t,n){return C(e,t,o("MAWIndexedDbUI").getDB,n)}var h=0,y=new Map;function C(e,t,n,a,i){var l=Object.keys(e),_=l.some(function(t){return e[t]===o("MAWTransactionMode").READWRITE})?o("MAWTransactionMode").READWRITE:o("MAWTransactionMode").READONLY;return function(){for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];var C=p(t),S=null,R=function(){return self.clearInterval(S)};if(C!=null&&(C.addAnnotations({string:{mode:_===o("MAWTransactionMode").READWRITE?"readwrite":"readonly"},string_array:{stores:l}}),r("gkx")("1006")&&t==="bulkCreateThreadByJid")){var L=1e3,E=Date.now();S=self.setInterval(function(){C.addAnnotations({int:{heartbeatLatestAliveSinceStartMs:Date.now()-E}})},L),self.setTimeout(R,o("MAWQplProxy").DEFAULT_WORKER_QPL_TIMEOUT_MS)}var k=(u||(u=r("performance"))).now()+u.timeOrigin;return n(t).then(function(e){var n=Array.from(y.values());C==null||C.addPoint("lock_wait_start",{string_array:{maybeLockedOn:n}});var p=(u||(u=r("performance"))).now();return i==null||i.onTxnRequestedCb==null||i.onTxnRequestedCb.apply(i,f),m(e,_,l,C,t,function(){o("MAWDexieTable").setDexiePSDItem("transactionRequested",k),o("MAWDexieTable").setDexiePSDItem("transactorName",t),C==null||C.addPoint("dexie_transaction_start"),h+=1;var m=h;y.set(m,t);var _=C!=null?e.stores[l[0]].get("").then(function(){C==null||C.addPoint("lock_wait_end"),C==null||C.addPoint("transaction_opened"),C==null||C.addPoint("transactor_execution_start")}):o("MAWDexieTable").dexieResolve();return _.then(function(){return a(e.stores).apply(void 0,f)}).then(function(e){if(r("gkx")("6795")&&(i==null?void 0:i.explicitlyCloseTxn)===!0){var a;(a=r("MAWDexie").currentTransaction)==null||(a=a.idbtrans)==null||a.commit==null||a.commit()}y.delete(m),C==null||C.addPoint("transactor_execution_end"),C==null||C.endSuccess(),R();var l=(u||(u=r("performance"))).now()-p;return l>5e3&&(o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[Slow maw transaction] "," took ","ms to complete. Potentially waiting for locks on ",""])),t,l,n.join(", ")),d.mustfix("[Slow maw transaction] %s took long to complete. Potentially waiting for locks on $s",t,n.join(", "))),e}).catch(function(e){y.delete(m),o("WAExceededStorageQuota").checkQuotaExceededError(e);var n=e.name==="AbortError"?e==null?void 0:e.inner:null,r=b(n);if(C==null||C.markError("transaction_error",null,e),e instanceof Error){var a=e,i=typeof(a==null?void 0:a.stack)=="string"?a.stack:typeof(a==null?void 0:a.stack),l=typeof(a==null?void 0:a.message)=="string"?a.message:typeof(a==null?void 0:a.message);C==null||C.addAnnotations({string:{errMessage:l,errStack:i,innerError:r}})}C==null||C.endFail("transaction_fail"),R();var s=o("MAWErrorObject").getErrorObject(e);throw v(s).mustfixThrow("[%s] Error performing %s transaction. Inner error: %s",c.join("|"),t!=null?t:"",r!=null?r:"unknown")})})}).catch(function(e){o("WAExceededStorageQuota").checkQuotaExceededError(e),C==null||C.endFail("transaction_fail"),R();var n=o("MAWErrorObject").getErrorObject(e);throw v(n).mustfixThrow("[%s] Error performing %s transaction",c.join("|"),t!=null?t:"")})}}function b(e){if(typeof e=="string")return e;if(e instanceof Error)return e.name+": "+e.message;if(typeof e=="object")try{return JSON.stringify(e)}catch(e){}return null}function v(e){return e?d.catching(e):d}l.makeMsgrTransactor=_,l.makeMsgrUITransactor_IMPORT_FROM_MAWIndexedDbUI_INSTEAD=f,l.makeMsgrUIWritableTransactor=g}),98);
__d("MAWThreadUpdateType",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=Object.freeze({BUMP_THREAD:s,MARK_THREAD_AS_UNREAD:u,NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:e,SNIPPET_ONLY:l});i.THREAD_UPDATE_TYPE=c}),66);
__d("MAWGetThreadUpdateTypeForAdminMsg",["FBLogger","MAWAdminMsgTypesGrouped","MAWLocalizationType","MAWThreadUpdateType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e;return t==null?(r("FBLogger")("messenger_web").mustfix("nullAdminType"),o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE):s(t)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:u(t)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:c(t)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:(d(t)||r("FBLogger")("messenger_web").mustfix("unsupportedAdminMsgType"),o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE)}function s(e){return o("MAWAdminMsgTypesGrouped").otherUserAddRemoveParticipant.includes(e)||o("MAWAdminMsgTypesGrouped").chatCustomizedByOtherUser.includes(e)||o("MAWAdminMsgTypesGrouped").callActionToNotifyAbout.includes(e)||o("MAWAdminMsgTypesGrouped").twoUsersConnected.includes(e)||o("MAWAdminMsgTypesGrouped").fallbackMsgFromOtherUser.includes(e)||o("MAWAdminMsgTypesGrouped").otherUserBumpsMessage.includes(e)||o("MAWAdminMsgTypesGrouped").otherNonAdminMsgToBeMarkedAsUnread.includes(e)||e===o("MAWLocalizationType").LOCALIZATION_TYPE.REACHABILITY_ERROR}function u(e){return o("MAWAdminMsgTypesGrouped").currentUserAddRemoveParticipant.includes(e)||o("MAWAdminMsgTypesGrouped").chatCustomizedByCurrentUser.includes(e)||o("MAWAdminMsgTypesGrouped").callActionNotToNotifyAbout.includes(e)||o("MAWAdminMsgTypesGrouped").fallbackMsgFromCurrentUser.includes(e)||o("MAWAdminMsgTypesGrouped").currentUserBumpsMessage.includes(e)||o("MAWAdminMsgTypesGrouped").otherNonAdminMsgToBeBumped.includes(e)||o("MAWAdminMsgTypesGrouped").limitSharingUpdate.includes(e)}function c(e){return e===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||o("MAWAdminMsgTypesGrouped").dualThreadCutoverAdminMsgs.includes(e)||o("MAWAdminMsgTypesGrouped").ephemeralSettingChanges.includes(e)||o("MAWAdminMsgTypesGrouped").groupPermissionsChanged.includes(e)||o("MAWAdminMsgTypesGrouped").participantLeftGroup.includes(e)||o("MAWAdminMsgTypesGrouped").pinnedMessageUpdate.includes(e)}function d(e){return o("MAWAdminMsgTypesGrouped").cutoverAdminMsgs.includes(e)||o("MAWAdminMsgTypesGrouped").deviceChanges.includes(e)||o("MAWAdminMsgTypesGrouped").icdcAlerts.includes(e)||o("MAWAdminMsgTypesGrouped").otherNonAdminMsgToNotTriggerUpdate.includes(e)||e===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||e===o("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET||e===o("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG||e===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE}l.getThreadUpdateTypeForAdminMsg=e}),98);
__d("MAWGetThreadUpdateType",["FBLogger","MAWDbMsgOrReaction","MAWGetThreadUpdateTypeForAdminMsg","MAWThreadSnippetUtils","MAWThreadUpdateType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.reaction==null;return u(e,t)}function s(e){return c(e.reactToAuthor)&&!c(e.author)}function u(e,t){return s(e)&&!t?e.senderTimestampMs==null?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE}function c(e){return e===o("WAJids").AUTHOR_ME||e===o("MAWUserJidWrapper").getMyUserJid()}function d(e){var t=e.adminType,n=e.author,a=e.msgType,i=e.xmaMessageType,l=function(t){var e=t.me,r=t.other;return o("WAJids").isAuthorMe(n)?e:r};switch(a){case"Text":case"ReceiverFetch":case"Sticker":case"Unavailable":case"Video":case"Futureproof":case"DocumentFile":case"EphemeralScreenshotAction":case"Gif":case"Image":case"Ptt":case"RavenAction":case"Raven":case"GroupPollCreate":case"GroupPollUpdate":case"BumpExistingMessage":return l({me:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD,other:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD});case"XMA":return o("MAWThreadSnippetUtils").shouldIgnoreXMAMsgForSnippet(i)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:l({me:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD,other:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD});case"Revoked":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY;case"DeleteForMe":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE;case"EditAction":return l({me:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY,other:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE});case"GroupInvite":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;case"Admin":{if(a==="Admin")return o("MAWGetThreadUpdateTypeForAdminMsg").getThreadUpdateTypeForAdminMsg(t);throw r("FBLogger")("messenger_web").mustfixThrow("Non-admin msg passed in "+(a!=null?a:"UNKNOWN"))}case"SenderKeyDistribution":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE;case"AlertICDC":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;case"Ciphertext":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;case"EphemeralSettingAdmin":case"EphemeralSettingChangeFromCurrentDevice":case"EphemeralSyncResponse":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWGetThreadUpdateType] Unexpected message type: %s",a!=null?a:"UNKNOWN")}}function m(t){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstoredNullish(t,{forMessage:function(t){var e;return d({adminType:(e=t.msgContent)==null?void 0:e.adminType,author:t.author,msgType:t.type,xmaMessageType:t.xmaMessageType})},forNull:function(){return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE},forReaction:function(n){return e(n)}})}function p(e){var t=m(e);switch(t){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:return!1;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return!0;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate][snippet] Unhandled threadUpdateType: "+t)}}function _(e){var t=m(e);switch(t){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:return!1;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return!0;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate][bump] Unhandled threadUpdateType: "+t)}}l.getThreadUpdateTypeForReaction=e,l.canReactionAffectBump=s,l.getReactionThreadUpdateType=u,l.getThreadUpdateTypeForMsg=d,l.getThreadUpdateTypeForMsgOrReaction=m,l.isThreadUpdateTypeEligibleForSnippet=p,l.isThreadUpdateTypeEligibleForBump=_}),98);
__d("MAWCacheServiceMiddleware",["FBLogger","MAWIndexedDb","MAWMpsGating","MAWWorkerCacheServices","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=["messages","reactions"],s=["messages","reactions"];function u(e,t,n){var r,o,a=n.trans,i=(r=(o=a._transactorMeta)==null?void 0:o.mawCacheServiceAccumulatedRequests)!=null?r:[];if(n.type==="delete"&&s.includes(t.name))return p(e,t.name,n).then(function(e){var r=babelHelpers.extends({},n,{deletedValues:e});return i.push([t.name,r]),a._transactorMeta=babelHelpers.extends({},a._transactorMeta,{mawCacheServiceAccumulatedRequests:i}),t.mutate(n)});var l=babelHelpers.extends({},n,{decryptedValues:n.values?n.values:void 0});return i.push([t.name,l]),a._transactorMeta=babelHelpers.extends({},a._transactorMeta,{mawCacheServiceAccumulatedRequests:i}),t.mutate(n)}function c(e){var t,n=e.trans;((t=n._transactorMeta)==null?void 0:t.mawCacheServiceAfterTransactionScheduled)!==!0&&(o("MAWIndexedDb").afterTransactionEffect(function(){var e,t,r=(e=(t=n._transactorMeta)==null?void 0:t.mawCacheServiceAccumulatedRequests)!=null?e:[];r.length!==0&&o("MAWWorkerCacheServices").getMAWWorkerCacheServices().calculateDelta(r)}),n._transactorMeta=babelHelpers.extends({},n._transactorMeta,{mawCacheServiceAfterTransactionScheduled:!0}))}function d(t,n){var r=t.table(n);return!e.includes(n)||o("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()?r:babelHelpers.extends({},r,{mutate:function(n){return c(n),u(t,r,n)}})}function m(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return d(t,n)}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("MAWCacheService").catching(e).mustfix("Error applying MAW Cache Service Middleware"),t}},name:"MAWCacheServiceMiddleware",stack:"dbcore"}}function p(e,t,n){var r=n.keys,o=n.trans;return e.table(t).getMany({keys:r,trans:o}).then(function(e){return e.filter(Boolean)})}l.default=m}),98);
__d("MAWVaultDb",["FBLogger","MAWQplProxy","MAWVault","getErrorSafe","gkx","isObject","isPlainObject","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=.001,s=new WeakMap;function u(e,t){return t[e]!=null}var c=r("gkx")("23909");function d(t,n,a){if(!r("isPlainObject")(t)||!c||!u(n,a)||t==null)return t;var i=s.get(t);if(i!=null)return i;var l=Math.random()<e?o("MAWQplProxy").startQplUserFlow(r("qpl")._(25301509,"119")):null;try{var d=a[n],m=p(t,d,o("MAWVault").vault);return l==null||l.endSuccess(),s.set(t,m),m}catch(e){l==null||l.endFail("vault_fail");var _=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").mustfixThrow("%s - Failed to vault an entity in the table: %s",_.message,n)}}function m(t,n,a){if(!r("isPlainObject")(t)||!c||!u(n,a)||t==null)return t;var i=Math.random()<e?o("MAWQplProxy").startQplUserFlow(r("qpl")._(741087294,"2028")):null;try{var l=p(t,a[n],o("MAWVault").unvault);return i==null||i.endSuccess(),l}catch(e){i==null||i.endFail("unvault_fail");var s=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").mustfixThrow("%s - Unvaulting failed for an entity in the table: %s",s.message,n)}}function p(e,t,n){if(e==null)return e;var o=Object.entries(t).filter(function(t){var n=t[0];return e[n]!=null});return o.length===0?e:o.reduce(function(e,t){var o=t[0],a=t[1];return typeof a!="boolean"&&r("isObject")(a)?e[o]=p(e[o],a,n):a===!0&&(e[o]=n(e[o])),e},babelHelpers.extends({},e))}l.vaultDbRow=d,l.unvaultDbRow=m,l.setInPath=p}),98);
__d("MAWVaultDefinitions",[],(function(t,n,r,o,a,i){"use strict";var e={editMsgHistory:{msgContent:{content:!0}},messages:{msgContent:{content:!0},quote:{content:{msgContent:{content:!0}}}},unrenderedMessages:{msgContent:!0}},l={edit_message_history:{messageContent:!0},messages:{replyMessageText:!0,text:!0},threads:{snippet:!0}};i.ARMADILLO_IDB_VAULT_DEFINITIONS=e,i.PERSISTED_DB_VAULT_DEFINITIONS=l}),66);
__d("isEncryptionAtRestEnabled",["isInstamadillo","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("507")===!0?!0:r("isInstamadillo")()}l.default=e}),98);
__d("MAWDbMiddlewareMutations",["MAWDbObjEncryption","MAWVaultDb","MAWVaultDefinitions","gkx","isEncryptionAtRestEnabled"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("23909");function s(t,n,a){if(!e&&!(r("isEncryptionAtRestEnabled")()||r("gkx")("23910")))return t;var i=babelHelpers.extends({},t);return i=o("MAWVaultDb").unvaultDbRow(i,n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS),i=o("MAWDbObjEncryption").encryptDbObj(i,n,a),i}function u(t,n){return e?o("MAWVaultDb").unvaultDbRow(babelHelpers.extends({},t),n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS):t}function c(t,n,r){var a=o("MAWDbObjEncryption").decryptDbObj(babelHelpers.extends({},t),n,r);return e?o("MAWVaultDb").vaultDbRow(a,n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS):a}function d(t,n){if(t!=null)return e?o("MAWVaultDb").vaultDbRow(t,n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS):t}l.mutateValue=s,l.mutateVaultedValue=u,l.getValue=c,l.getVaultedValue=d}),98);
__d("MAWDbMutationValidator",["FBLogger","MAWIndexedDb","MAWMessageHasNonNullServerTsOnReceivedAckValidator","MAWMessageHasUniqueExternalIdValidator","MAWODSProxy","MAWParticipantMatchOneOnOneThreadValidator","MAWReactionHasUniqueProtocolMsgIdValidator","Promise","Random","WAOdsEnums","getErrorSafe","gkx","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[o("MAWMessageHasUniqueExternalIdValidator").MAWMessageHasUniqueExternalIdValidator,o("MAWParticipantMatchOneOnOneThreadValidator").MAWParticipantMatchOneOnOneThreadValidator,o("MAWReactionHasUniqueProtocolMsgIdValidator").MAWReactionHasUniqueProtocolMsgIdValidator,o("MAWMessageHasNonNullServerTsOnReceivedAckValidator").MAWMessageHasNonNullServerTsOnReceivedAckValidator],u=r("justknobx")._("2610"),c=r("gkx")("5906"),d=function(t){return o("Random").coinflip(t!=null?t:u)||c};function m(t,a){var i=t.table(a),l=s.filter(function(e){return e.table===a});return l.length===0?i:babelHelpers.extends({},i,{mutate:function(a){return o("MAWIndexedDb").getDbStatus()!=="ready"?i.mutate(a):i.mutate(a).then(function(t){var i=l.filter(function(e){var t=e.sampleRate,n=e.type;return n.includes(a.type)&&d(t)});return o("MAWIndexedDb").afterTransactionEffect(function(){var l=i.flatMap(function(e){var n,r=e.description,o=e.isValid;return((n=t.results)!=null?n:[]).map(function(e){return o(e).then(function(e){return babelHelpers.extends({validatorName:r},e)})})});r("promiseDone")((e||(e=n("Promise"))).all(l).then(function(e){e.forEach(function(e){switch(e.result){case"valid":o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MUTATION_VALIDATOR,key:e.validatorName+"."+a.type+".valid"});break;case"invalid":o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MUTATION_VALIDATOR,key:e.validatorName+"."+a.type+".invalid"}),r("FBLogger")("maw_mutation_validator").mustfix("Validator %s failed for %s mutation, with description: %s",e.validatorName,a.type,e.description);break;case"skipped":break}})}))}),t})}})}function p(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return m(t,n)}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(e).mustfix("Error applying Mutation Validator Middleware"),t}},name:"MAWMutationValidatorMiddleware",stack:"dbcore"}}l.getMutationValidatorMiddleware=p}),98);
__d("MAWDbProtocolMsgIdMiddleware",["FBLogger","MAWDBMigrationUtils","MAWJidUtils","MAWODSProxy","Random","WAOdsEnums","getErrorSafe","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("3300");function s(t){return babelHelpers.extends({},t,{get:function(n){return t.get(n).then(function(e){return d(e,"get"),e})},getMany:function(n){return t.getMany(n).then(function(e){return e==null?void 0:e.map(function(e){return d(e,"getMany"),e})})},mutate:function(a){return a.type==="add"?a.values.map(function(e){return u(e)}):a.type==="put"&&r("gkx")("11791")&&r("justknobx")._("3947")&&a.values.map(function(t){t.protocolMsgId==null&&(o("MAWDBMigrationUtils").mawDbMigrationVersion.version>=o("MAWDBMigrationUtils").MAWDB_DEDUPE_MSGS_MIGRATION_VERSION?(o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.put_operation_after_migration_complete.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version}),u(t)):t.rowId<o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.cursorValue?(o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.put_operation_below_migration_cursor.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version}),u(t)):o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.isRunning&&t.rowId<o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.cursorValue+o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.batchSize&&(o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.put_operation_in_current_migration_batch.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version}),u(t)))}),t.mutate(a)},query:function(n){return t.query(n).then(function(e){var t;return e==null||(t=e.result)==null||t.map(function(e){d(e,"query")}),e})}})}function u(e){e.protocolMsgId=o("MAWJidUtils").toProtocolMsgIdStringForMAWStorage(e)}function c(e){return(e==null?void 0:e.rowId)==null&&(e==null?void 0:e.externalId)==null}function d(t,n){try{var a=r("justknobx")._("3947");if(c(t)){n!=="get"&&o("Random").coinflip(e)&&r("FBLogger")("messenger_web").warn("Corrupted message row returned from DB, msg is null:%s, queryType: %s",t==null,n);return}(t==null?void 0:t.protocolMsgId)==null&&o("Random").coinflip(e)&&(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version+".append_protocol_msg_id_for_put_operation_jk_"+String(a)}),o("MAWDBMigrationUtils").mawDbMigrationVersion.version>=o("MAWDBMigrationUtils").MAWDB_DEDUPE_MSGS_MIGRATION_VERSION&&r("FBLogger")("maw_db_migration").warn("Message with null protocolMsgId after the msg dedupe migration. type: %s, rowId: %s, externalId: %s",t==null?void 0:t.type,t==null?void 0:t.rowId,t==null?void 0:t.externalId)),t!=null&&t.protocolMsgId!=null&&t.protocolMsgId!==o("MAWJidUtils").toProtocolMsgIdStringForMAWStorage(t)&&o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"inconsistent_protocol_msg_id."+(t==null?void 0:t.type)+".migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version+".append_protocol_msg_id_for_put_operation_jk_"+String(a)})}catch(e){var i=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(i).mustfix("Error while checking protocol msg id")}}function m(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return n!=="messages"?t.table(n):s(t.table(n))}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(e).mustfix("Error applying Protocol MsgId Middleware"),t}},name:"MAWDbProtocolMsgIdMiddleware",stack:"dbcore"}}l.appendProtocolMsgId=u,l.isCorruptedMsgRow=c,l.MAWDbProtocolMsgIdMiddleware=m}),98);
__d("MAWLSDataSyncMiddleware",["FBLogger","MAWBridge","MAWLSEditMsgHistoryAddedDataSyncHandler","MAWLSMsgsDataSync","MAWLSReactionsDataSyncHandler","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(){var t=new Set;t.add(o("MAWLSReactionsDataSyncHandler").mawLSReactionsDataSyncHandler),t.add(o("MAWLSEditMsgHistoryAddedDataSyncHandler").mawLSEditHistoryDataSyncHandler),t.add(o("MAWLSMsgsDataSync").mawLSMsgsDataSyncHandler),t.forEach(function(t){e.set(t.tableName,t)})}function u(t){return babelHelpers.extends({},t,{mutate:function(r){var n=e.get(t.name);return n!=null?n.performAndSyncMutation(r,t):t.mutate(r)}})}function c(){return s(),{create:function(n){try{return babelHelpers.extends({},n,{table:function(r){return e.has(r)?u(n.table(r)):n.table(r)}})}catch(e){var t=r("getErrorSafe")(e);return r("FBLogger")("maw_db").catching(t).mustfix("Error applying MAW to LS data sync middleware"),n}},name:"MAWLSDataSyncMiddleware",stack:"dbcore"}}function d(e){o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[e]})}l.getMAWLSDataSyncMiddleware=c,l.syncToLS=d}),98);
__d("MAWLSEditMsgHistoryAddedDataSyncHandler",["MAWIndexedDb","MAWLSDataSyncMiddleware"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.map(function(e){return babelHelpers.extends({},e)});o("MAWLSDataSyncMiddleware").syncToLS({tag:"EditMsgHistoryAdded",value:t})}var s={performAndSyncMutation:function(n,r){switch(n.type){case"put":case"add":{var t=[].concat(n.values);o("MAWIndexedDb").afterTransactionEffect(function(){return e(t)})}break}return r.mutate(n)},tableName:"editMsgHistory"};l.mawLSEditHistoryDataSyncHandler=s}),98);
__d("MAWLSMsgsDataSync",["MAWBridgeTypesCreators","MAWIndexedDb","MAWLSDataSyncMiddleware"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t.keys,r=t.trans;return e.getMany({keys:n,trans:r}).then(function(e){return e.filter(Boolean)})}function s(e){var t=e.reduce(function(e,t){var n,r=o("MAWBridgeTypesCreators").createBridgeDeletedMessage(t);return e.has(t.threadJid)||e.set(t.threadJid,[]),(n=e.get(t.threadJid))==null||n.push(r),e},new Map);t.entries().forEach(function(e){var t=e[0],n=e[1],r={messages:n,threadJid:t};o("MAWLSDataSyncMiddleware").syncToLS({tag:"DeleteMessages",value:r})})}var u={performAndSyncMutation:function(n,r){switch(n.type){case"delete":return e(r,n).then(function(e){return o("MAWIndexedDb").afterTransactionEffect(function(){return s(e)}),r.mutate(n)});default:return r.mutate(n)}},tableName:"messages"};l.mawLSMsgsDataSyncHandler=u}),98);
__d("MAWLSReactionsDataSyncHandler",["MAWBridgeTypesCreators","MAWIndexedDb","MAWLSDataSyncMiddleware"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.reaction,r=e.reactToMsgId,a=e.threadJid,i=e.ts;r!=null&&o("MAWLSDataSyncMiddleware").syncToLS({tag:"UpsertReaction",value:o("MAWBridgeTypesCreators").createBridgeUpsertReaction({author:t,chatJid:a,reaction:n||"",reactToMsgId:r,ts:i})})}function s(e){var t=e.author,n=e.reactToMsgId,r=e.threadJid;n!=null&&o("MAWLSDataSyncMiddleware").syncToLS({tag:"DeleteReaction",value:o("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:t,chatJid:r,reactToMsgId:n})})}function u(t){t.forEach(function(t){t.reaction==null?s(t):e(t)})}var c={performAndSyncMutation:function(t,n){switch(t.type){case"put":case"add":{var e=[].concat(t.values);o("MAWIndexedDb").afterTransactionEffect(function(){return u(e)})}break}return n.mutate(t)},tableName:"reactions"};l.mawLSReactionsDataSyncHandler=c}),98);
__d("MAWDbReaction",["FBLogger","I64","MAWAckLevel","MAWGetBumpTimestampMs","MAWUserJidWrapper","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=e.author,n=e.reaction,r=e.reactToAuthor,a=o("MAWUserJidWrapper").getMyUserJid();return!(n==null||n===""||r!=="@me"&&r!==a||t==="@me"||t==="@system"||t===a)}function u(e){var t=o("MAWUserJidWrapper").getMyUserJid();if(e.reactToAuthor!=="@me"&&e.reactToAuthor!==t||e.reaction==null)return null;var n=e.author==="@me"||e.author==="@system"?null:e.author;return n==null?null:babelHelpers.extends({},e,{author:n,reaction:e.reaction,reactToAuthor:"@me"})}function c(e){var t=u(e);if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot cast reaction to incomingDbReaction");return t}function d(e,t,n){var r=o("MAWUserJidWrapper").getMyUserJid();return e.find(function(e){return e.threadJid===t&&o("WAJids").authorToUserId(e.author,r)===o("WAJids").authorToUserId(n,r)})}function m(e){return e}function p(e,t,n,r,a,i,l,s,u,c,d,m,p){m===void 0&&(m=o("MAWAckLevel").ACK.clock);var _={ack:m,author:c,externalId:t,groupingKey:i,reaction:a,reactionId:n,reactToAuthor:l,reactToExternalId:r,reactToMsgId:s,senderTimestampMs:p,threadJid:e,ts:u};return d!=null?babelHelpers.extends({},_,{rowId:d}):_}function _(t){var n=o("MAWGetBumpTimestampMs").getBumpTimestampMs(t);return o("WATimeUtils").castToMillisTime((e||(e=o("I64"))).to_float(n))}l.isIncomingReaction=s,l.maybeCastToIncomingDbReaction=u,l.castToIncomingDbReaction=c,l.findMatchingReaction=d,l.reactionIdToMsgId=m,l.formatReactionForDb=p,l.getReactionTimeMs=_}),98);
__d("MAWThreadNewestMsgOrReactionUtils",["FBLogger","MAWDbMsg","MAWDbMsgTxns","MAWDbReaction","MAWDbReactionsTxns","MAWDexieTable","MAWGetThreadUpdateType","MAWODSProxy","MAWThreadUpdateType","WALogger","WAMsg","WAOdsEnums","WATimeUtils","first","last"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return _(e,t,u)}function u(e,t){switch(e){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return t!==!0;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:return!1;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate] Unhandled threadUpdateType to create filter function : "+e)}}function c(e,t){return _(e,t,m)}function d(e){var t=e.db,n=e.jid,r=e.limit;return o("MAWDbMsgTxns").fetchMessagesFromDbWithSortOrderMs(t,n,null,!0,r,function(e){var t;return p(o("MAWGetThreadUpdateType").getThreadUpdateTypeForMsg({adminType:(t=e.msgContent)==null?void 0:t.adminType,author:e.author,msgType:e.type,xmaMessageType:e.xmaMessageType}),e.ephemeralMsgDisappeared===!0)},"before")}function m(e,t){switch(e){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return t!==!0;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:return!1;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate] Unhandled threadUpdateType to create filter function : %s",e)}}function p(e,t){switch(e){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return t!==!0;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:return!1;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCacheService] Unhandled threadUpdateType to create filter function : %s",e)}}function _(t,n,r){var a=function(a){return a==null?o("MAWDexieTable").dexieResolve(null):g(t,n,r,a)};return f(t,n,r).then(function(t){return a(t).then(function(r){if(t==null&&r==null)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[CentralizedThreadUpdate] No Reaction or Message in "," is eligible for snippet"])),n),null;if(r==null)return t;if(t==null)return r;var a=o("WATimeUtils").castToMillisTime(o("MAWDbMsg").getSortOrderWithFallback(t)),i=o("MAWDbReaction").getReactionTimeMs(r);return a>=i?t:r})})}function f(e,t,n){return o("MAWDbMsgTxns").fetchMessagesFromDbWithSortOrderMs(e,t,null,!0,1,function(e){var t;return n(o("MAWGetThreadUpdateType").getThreadUpdateTypeForMsg({adminType:(t=e.msgContent)==null?void 0:t.adminType,author:e.author,msgType:e.type,xmaMessageType:e.xmaMessageType}),e.ephemeralMsgDisappeared===!0)},"before").then(r("first"))}function g(e,t,n,a){var i=o("MAWDbMsg").getSortOrderWithFallback(a),l=function(a,l){return o("MAWDbReactionsTxns").fetchReactionsFromDbWithTimestamp(e,t,o("WATimeUtils").castToMillisTime(i),l,l==null,a,function(e){return n(o("MAWGetThreadUpdateType").getThreadUpdateTypeForReaction(e),!1)&&o("MAWDbReaction").getReactionTimeMs(e)>i})},s=[1,10],u=100,c=new Set,d=function(n,a){var t;return l((t=s[n])!=null?t:u,a).then(function(t){var a=t.filter(function(e){return!c.has(C(e))});return a.length===0?(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_THREAD_GET_NEWEST_REACTION_BATCH_NUM,key:"new."+n}),null):h(e,a).then(function(e){var a=e.newestReaction,i=e.nullMsgIds;return a!=null?(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_THREAD_GET_NEWEST_REACTION_BATCH_NUM,key:"new."+n}),a):(i.forEach(function(e){return c.add(e)}),d(n+1,r("last")(t)))})})};return d(0,null)}function h(e,t){return o("MAWDbMsgTxns").getUniqueMsgsByProtocolMsgIds(e,t.map(y)).then(function(e){var n=new Set(e.map(b)),r=new Set,o=null;return t.forEach(function(e){var t=C(e);n.has(t)?o=v(o,e):r.add(t)}),{newestReaction:o,nullMsgIds:r}})}function y(e){return{author:e.reactToAuthor,chat:e.threadJid,externalId:e.reactToExternalId}}function C(e){return o("WAMsg").craftWAMsgIdString(y(e))}function b(e){return o("WAMsg").craftWAMsgIdString({author:e.author,chat:e.threadJid,externalId:e.externalId})}function v(e,t){return e==null?t:t==null||o("MAWDbReaction").getReactionTimeMs(e)>o("MAWDbReaction").getReactionTimeMs(t)?e:t}l.getNewestMsgOrReactionForBump=s,l.filterForBump=u,l.getNewestMsgOrReactionForSnippet=c,l.getNewestIncomingMsgsForSnippet=d,l.filterForSnippet=m,l.filterForSnippetNewestIncomingMessages=p,l.getNewestReactionToNonNullMsg=h}),98);
__d("MAWLocalizationUtils",["MAWAckLevel","MAWLocalizationType","MAWMsgType","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set([(e=o("MAWLocalizationType")).LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL,e.LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE,e.LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE,e.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE,e.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE,e.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.POLL_UNSENT_UPDATE]);function u(e,t,n,r,a,i){return{ack:o("MAWAckLevel").ACK.sent,altIndex:a!=null?a:void 0,author:o("WAJids").AUTHOR_SYSTEM,externalId:n,msgContent:e,sortOrderMs:i,threadJid:t,ts:r!=null?r:o("WATimeUtils").unixTime(),type:o("MAWMsgType").MSG_TYPE.ADMIN}}function c(e){if(s.has(e))return!0;switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return!0}return!1}function d(e){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return!0}return!1}function m(e){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:return!0}return!1}l.POLL_ADMIN_MSG_TYPES=s,l.buildUnstoredDbAdminMsg=u,l.isAdminMsgNormalized=c,l.isDeviceChangeAdminMsg=d,l.isParticipantChangeAdminMsg=m}),98);
__d("MAWThreadSnippetForAdminOrEphemeralMsg",["FBLogger","MAWAdminMsgNormalized","MAWLocalizationType","MAWLocalizationUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.adminMsgContent,n=e.adminType,a=e.snippetSenderContactId,i=n;if(i==null||t==null)return r("FBLogger")("GroupPollsE2EE").mustfix("MAWThreadSnippetForAdminOrEphemeralMsg: snippetType or adminMsgContent is null"),{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:a,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET};var l=o("MAWLocalizationUtils").isAdminMsgNormalized(i)?o("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(i,t):{contactIds:[],contents:t},s=l.contactIds,u=l.contents;return{snippetParams:{contactIDs:[].concat(s.map(function(e){return e==="Facebook User"?"0":e})),strings:[].concat(u)},snippetSenderContactId:a,snippetType:i}}l.default=e}),98);
__d("MAWThreadSnippetForBumpExistingMessageMsg",["MAWLocalizationType","WAGlobals","WAJids","WALogger","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n){return{snippetParams:{contactIDs:n!=null?n:[],strings:[]},snippetSenderContactId:e,snippetType:t}}var m=function(t){return d(t,o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)};function p(t){var n=t.author,r=t.replyAuthor,a=t.replyType,i=t.snippetSenderContactId;if(o("WAJids").isAuthorSystem(n))return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Bumped message can not have AUTHOR_SYSTEM"]))),m(i);var l=a;if(l===o("WAMsgType").UNAVAILABLE)return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Bump message has unavailable content type"]))),m(i);var p=r;return p==null?(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Bump message has no quoted author"]))),m(i)):o("WAJids").isAuthorMe(n)||n===o("WAGlobals").getMyUserJid()?o("WAJids").isAuthorMe(p)||p===o("WAGlobals").getMyUserJid()?d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE):d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,[o("WAJids").userIdFromJid(p)]):i==null?(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Bump message sender is null"]))),m(i)):o("WAJids").isAuthorMe(p)||p===o("WAGlobals").getMyUserJid()?d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,[i]):p===n?d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,[i]):d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE,[i,o("WAJids").userIdFromJid(p)])}l.default=p}),98);
__d("MAWThreadSnippetForCiphertextMsg",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:e,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK}}l.default=e}),98);
__d("MAWThreadSnippetForDocumentFileMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Document file message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForFallbackMessageMsg",["MAWLocalizationType","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return{snippetParams:{contactIDs:n!=null?n:[],strings:[]},snippetSenderContactId:e,snippetType:t}}function s(t){var n=t.author,r=t.snippetSenderContactId,a=t.unsupportedType;if(o("WAJids").isAuthorMe(n))switch(a){case"liveLocationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK);case"locationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK);case"contactShareMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK);case"storyMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK);case"postMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POST_MENTION_FALLBACK);case"pollCreationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK);case"bumpMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE);case"stickerReceiverFetchMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK);case"messengerMemory":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK);default:return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)}else switch(a){case"liveLocationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK);case"locationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK);case"contactShareMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK);case"storyMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK);case"postMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POST_MENTION_FALLBACK);case"pollCreationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK);case"bumpMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE);case"metaAiMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK);case"stickerReceiverFetchMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK);case"messengerMemory":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK);default:return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)}}l.default=s}),98);
__d("MAWThreadSnippetForGifMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Animated message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForImageMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Image message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForPttMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_AUDIO:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Ptt message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForRavenMsg",["MAWLocalizationType","MAWMsg","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.ravenMediaType,i=t.snippetSenderContactId,l=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,s={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?l=a===o("MAWMsg").MAWRavenMsgMediaType.IMAGE?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:o("WAJids").isAuthorSystem(n)||i==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Animated message can not have AUTHOR_SYSTEM"]))):(l=a===o("MAWMsg").MAWRavenMsgMediaType.IMAGE?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,s.contactIDs.push(i)),{snippetParams:s,snippetSenderContactId:i,snippetType:l}}l.default=s}),98);
__d("MAWThreadSnippetForMsgUtils",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r){var a=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,i={contactIDs:[],mentionJIDs:n!=null?n:[],strings:[]};return o("WAJids").isAuthorMe(t)?a=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER:o("WAJids").isAuthorSystem(t)||r==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Sticker message can not have AUTHOR_SYSTEM"]))):(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,i.contactIDs.push(r)),{snippetParams:i,snippetSenderContactId:r,snippetType:a}}l.getMAWThreadSnippetForStickerMsg=s}),98);
__d("MAWThreadSnippetForReceiverFetchMsg",["MAWThreadSnippetForMsgUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.mentionedJids,r=e.snippetSenderContactId;return o("MAWThreadSnippetForMsgUtils").getMAWThreadSnippetForStickerMsg(t,n,r)}l.default=e}),98);
__d("MAWThreadSnippetForRevokedMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Revoked message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForStickerMsg",["MAWThreadSnippetForMsgUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.mentionedJids,r=e.snippetSenderContactId;return o("MAWThreadSnippetForMsgUtils").getMAWThreadSnippetForStickerMsg(t,n,r)}l.default=e}),98);
__d("MAWThreadSnippetForTextMsg",["MAWLocalizationType","MAWVault","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.content,a=t.isGroup,i=t.mentionedJids,l=t.snippetSenderContactId,s=t.specialTextSize,u=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,c={contactIDs:[],mentionJIDs:i,strings:[]};if(o("WAJids").isAuthorMe(n)?u=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Text message can not have AUTHOR_SYSTEM"]))):(u=a?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,c.contactIDs.push(l)),r!=null)if(s===1||s===2||s===3){var d=o("MAWVault").unvault(r);c.strings.push(d==="\uD83D\uDC4D"?"(Y)":r)}else c.strings.push(r);return{snippetParams:c,snippetSenderContactId:l,snippetType:u}}l.default=s}),98);
__d("MAWThreadSnippetForVideoMsg",["MAWLocalizationType","WAJids","WALogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,a=t.gifPlayback,i=t.mentionedJids,l=t.snippetSenderContactId,s=a===!0&&r("gkx")("5398"),u=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,c={contactIDs:[],mentionJIDs:i,strings:[]};return o("WAJids").isAuthorMe(n)?u=s?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Video message can not have AUTHOR_SYSTEM"]))):(u=s?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,c.contactIDs.push(l)),{snippetParams:c,snippetSenderContactId:l,snippetType:u}}l.default=s}),98);
__d("MAWThreadSnippetForXMAMsg",["MAWLocalizationType","WAArmadilloXMA.pb","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P;function N(t){var n=t.author,r=t.chatJid,a=t.content,i=t.mentionedJids,l=t.snippetSenderContactId,N=t.xmaMessageType,w=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,A={contactIDs:[],mentionJIDs:i,strings:[]};switch(N==null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["XMA message does not have xmaMessageType"]))),N){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:if(o("WAJids").isAuthorMe(n))if(a!=null){var F=a;w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT,F!=null&&A.strings.push(F)}else w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT;else if(o("WAJids").isAuthorSystem(n)||l==null)o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"])));else{w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,A.contactIDs.push(l);var O=a;O!=null&&A.strings.push(O)}break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POST_MENTION:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POST_MENTION;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_MEMORIES_SHARE:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_MEMORIES_SHARE;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG;var B;if(r!=null&&(B=o("WAJids").interpretAsUserJid(r)),B!=null){var W=o("WAJids").userIdFromJid(B);A.contactIDs.push(W)}else o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["XMA story mentions must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)?o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED;var q=M(r);q!=null?A.contactIDs.push(q):o("WALogger").ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(S||(S=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:if(o("WAJids").isAuthorMe(n)&&l!=null){w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED;var U=M(r);U!=null?A.contactIDs.push(U):o("WALogger").ERROR(R||(R=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(L||(L=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL;var V=M(r);V!=null?A.contactIDs.push(V):o("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL;var H=M(r);H!=null?A.contactIDs.push(H):o("WALogger").ERROR(I||(I=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(T||(T=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:o("WAJids").isAuthorMe(n)&&l!=null?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(D||(D=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:o("WAJids").isAuthorMe(n)&&l!=null?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(x||(x=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR($||($=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,A.contactIDs.push(l));break;default:o("WALogger").ERROR(P||(P=babelHelpers.taggedTemplateLiteralLoose(["Encountered unexpected XMAMessageType when building a thread snippet: ",""])),N)}return{snippetParams:A,snippetSenderContactId:l,snippetType:w}}function M(e){var t=e!=null?o("WAJids").interpretAsUserJid(e):null;return t!=null?o("WAJids").userIdFromJid(t):null}l.default=N}),98);
__d("MAWThreadSnippet",["FBLogger","MAWLocalizationType","MAWMsgType","MAWThreadSnippetForAdminOrEphemeralMsg","MAWThreadSnippetForBumpExistingMessageMsg","MAWThreadSnippetForCiphertextMsg","MAWThreadSnippetForDocumentFileMsg","MAWThreadSnippetForFallbackMessageMsg","MAWThreadSnippetForGifMsg","MAWThreadSnippetForImageMsg","MAWThreadSnippetForPttMsg","MAWThreadSnippetForRavenMsg","MAWThreadSnippetForReceiverFetchMsg","MAWThreadSnippetForRevokedMsg","MAWThreadSnippetForStickerMsg","MAWThreadSnippetForTextMsg","MAWThreadSnippetForVideoMsg","MAWThreadSnippetForXMAMsg","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return/^\d+$/.test(e)}function s(t){if(!o("WAJids").isAuthorSystem(t)){var n=o("WAJids").isAuthorMe(t)?o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid()):o("WAJids").userIdFromJid(t);if(!e(n)){r("FBLogger")("messenger_web").mustfix("[MAWThreadSnippetBuildTxns] Snippet sender contact id is invalid");return}return n}}function u(e){var t=e.adminMsgContent,n=e.adminType,a=e.author,i=e.chatJid,l=e.content,u=e.gifPlayback,c=e.mentionedJids,d=e.msgType,m=e.ravenMediaType,p=e.replyAuthor,_=e.replyType,f=e.specialTextSize,g=e.unsupportedType,h=e.xmaMessageType,y=o("WAJids").switchOnMsgrChatJidType(i,{group:function(t){return!0},user:function(t){return!1}}),C=s(a);switch(d){case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return r("MAWThreadSnippetForCiphertextMsg")(C);case o("MAWMsgType").MSG_TYPE.TEXT:return r("MAWThreadSnippetForTextMsg")({author:a,content:l,isGroup:y,mentionedJids:c,snippetSenderContactId:C,specialTextSize:f});case o("MAWMsgType").MSG_TYPE.IMAGE:return r("MAWThreadSnippetForImageMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.VIDEO:return r("MAWThreadSnippetForVideoMsg")({author:a,gifPlayback:u,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.PTT:return r("MAWThreadSnippetForPttMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return r("MAWThreadSnippetForAdminOrEphemeralMsg")({adminMsgContent:t,adminType:n,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.GIF:return r("MAWThreadSnippetForGifMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.STICKER:return r("MAWThreadSnippetForStickerMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return r("MAWThreadSnippetForDocumentFileMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.REVOKED:return r("MAWThreadSnippetForRevokedMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.XMA:return r("MAWThreadSnippetForXMAMsg")({author:a,chatJid:i,content:l,mentionedJids:c,snippetSenderContactId:C,xmaMessageType:h});case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return r("MAWThreadSnippetForBumpExistingMessageMsg")({author:a,replyAuthor:p,replyType:_,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return r("MAWThreadSnippetForFallbackMessageMsg")({author:a,snippetSenderContactId:C,unsupportedType:g});case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return r("MAWThreadSnippetForReceiverFetchMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.RAVEN:return r("MAWThreadSnippetForRavenMsg")({author:a,mentionedJids:c,ravenMediaType:m,snippetSenderContactId:C});default:return{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:C,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET}}}l.getSnippetContactId=s,l.buildThreadSnippet=u}),98);
__d("WAProtocolMsgId",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.externalId===t.externalId&&e.author===t.author&&e.chat===t.chat}i.equals=e}),66);
__d("MAWThreadSnippetBuildTxns",["FBLogger","MAWDbMsg","MAWDbMsgOrReaction","MAWDbReaction","MAWDexieTable","MAWJidUtils","MAWLocalizationType","MAWThreadSnippet","MAWThreadSnippetUtils","MAWUserJidWrapper","WAJids","WAProtocolMsgId","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return o("WAJids").switchOnMsgrChatJidType(n,{group:function(r){return u(e,t,!0)},user:function(r){return u(e,t,!1)}})}function s(t,n){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(n,{forMessage:function(n){var e,r,a,i,l,s,u;return o("MAWThreadSnippet").buildThreadSnippet({adminMsgContent:(e=n.msgContent)==null?void 0:e.adminMsgContent,adminType:(r=n.msgContent)==null?void 0:r.adminType,author:n.author,chatJid:t,content:(a=n.msgContent)==null?void 0:a.content,mentionedJids:(i=n.msgContent)==null?void 0:i.mentionedJids,msgType:n.type,ravenMediaType:n.ravenMediaType,replyAuthor:(l=n.quote)==null?void 0:l.content.author,replyType:(s=n.quote)==null?void 0:s.content.type,specialTextSize:n.specialTextSize,unsupportedType:(u=n.msgContent)==null?void 0:u.subtype,xmaMessageType:n.xmaMessageType})},forReaction:function(n){var t=o("MAWDbReaction").castToIncomingDbReaction(n);return e(t.author,t.reaction,t.threadJid)}})}function u(e,t,n){var a;o("WAJids").isAuthorMe(e)?(r("FBLogger")("messenger_web").warn("[MAWThreadSnippetBuildTxns] Reaction snippet author should not be @me"),a=o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())):a=o("WAJids").userIdFromJid(e);var i={contactIDs:[],strings:[]},l=n?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE;return i.contactIDs.push(a),i.strings.push(t),{snippetParams:i,snippetSenderContactId:a,snippetType:l}}function c(e,t,n,r){var a,i=n.newestReaction,l=n.reactionsToClear;if(i!=null&&o("WATimeUtils").castUnixTimeToMillisTime(i.ts)>((a=t.snippetMsgTs)!=null?a:0))return o("MAWDexieTable").dexieResolve({newestReaction:i,thread:d(t,i,r)});var s=l!=null&&l.length>0;return s&&t.snippetMsg!=null?e.reactions.get({reactionId:t.snippetMsg}).then(function(n){var r=!1;if(n==null)r=!0;else{var a=o("MAWJidUtils").maybeToProtocolMsgId(n.author,n.threadJid,n.reactToExternalId);a!=null&&(r=l.some(function(e){var t=o("MAWJidUtils").maybeToProtocolMsgId(e.author,e.threadJid,e.reactToExternalId);return t!=null&&o("WAProtocolMsgId").equals(t,a)}))}return r?m(e,t).then(function(e){return{newestReaction:null,thread:e}}):o("MAWDexieTable").dexieResolve({newestReaction:null,thread:t})}):o("MAWDexieTable").dexieResolve({newestReaction:null,thread:t})}function d(e,t,n){return babelHelpers.extends({},e,{snippetMsg:t.reactionId,snippetMsgTs:o("WATimeUtils").castUnixTimeToMillisTime(t.ts)})}function m(e,t){return o("MAWThreadSnippetUtils").recalculateSnippetFromScratch_EXPENSIVE(e,t).then(function(e){if(e==null)return r("FBLogger")("messenger_web").mustfix("[Occamadillo] ThreadUpdated handler called for clear snippet when centralized thread bump is enabled"),babelHelpers.extends({},t,{snippetMsg:void 0,snippetMsgTs:void 0});var n=o("WATimeUtils").castUnixTimeToMillisTime(o("MAWDbMsg").getCanonicalTsFromMsg(e));return babelHelpers.extends({},t,{snippetMsg:e.msgId,snippetMsgTs:n})})}function p(e,t){return m(e,t).then(function(t){return e.threads.put(t).then(r("emptyFunction"))})}l.buildReactionThreadSnippet=e,l.buildThreadSnippetForMsgOrIncomingReaction=s,l.getReactionSnippetParams=u,l.getThreadChangesetForReactionChanges=c,l.getThreadChangesetForNewReaction=d,l.refreshThreadSnippet=p}),98);
__d("MAWEphemeralMsgUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return function(t){return!e.has(t.msgId)&&t.ephemeralMsgDisappeared!==!0}}i.filterNonExpiredMsg=e}),66);
__d("MAWThreadSnippetUtils",["MAWDbReaction","MAWEphemeralMsgUtils","MAWJidUtils","MAWLocalizationType","MAWLocalizationUtils","MAWMsgType","MAWThreadNewestMsgOrReactionUtils","MAWThreadSnippet","MAWThreadSnippetBuildTxns","MAWXMAUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;if(d(e.xmaMessageType))return!0;var n=((t=e.msgContent)==null?void 0:t.adminType)!=null?o("MAWLocalizationUtils").isDeviceChangeAdminMsg(e.msgContent.adminType):!1;if(e.type!==o("MAWMsgType").MSG_TYPE.ADMIN)return!1;var r=e.msgContent.adminType;return r===o("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG?!0:n}function s(t,n,r){return t.messages.where("[threadJid+sortOrderMs]").between([n.jid,Number.MIN_SAFE_INTEGER],[n.jid,Number.MAX_SAFE_INTEGER],!1,!1).filter(function(t){return(r==null||o("MAWEphemeralMsgUtils").filterNonExpiredMsg(r)(t))&&!e(t)}).reverse().first()}var u={snippetParams:{contactIDs:[],mentionJIDs:[],strings:[]},snippetSenderContactId:null,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET};function c(e,t){return o("MAWThreadNewestMsgOrReactionUtils").getNewestMsgOrReactionForSnippet(e,t).then(function(e){return e==null?{snippet:u}:m(t,e)})}function d(e){return o("MAWXMAUtils").isXMAStoryReply(e)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e)}function m(e,t){var n,r,a,i,l,s,c;if(t.reactionId!=null){var d=o("MAWDbReaction").maybeCastToIncomingDbReaction(t);return d==null?{snippet:u}:{snippet:o("MAWThreadSnippetBuildTxns").buildReactionThreadSnippet(d.author,d.reaction,e),snippetMsgOrReaction:t}}switch(t.type){case o("MAWMsgType").MSG_TYPE.XMA:{var m,p,_,f,g,h,y,C=o("MAWJidUtils").toProtocolMsgId(t);return C==null?{snippet:u}:{snippet:o("MAWThreadSnippet").buildThreadSnippet({adminMsgContent:(m=t.msgContent)==null?void 0:m.adminMsgContent,adminType:(p=t.msgContent)==null?void 0:p.adminType,author:t.author,chatJid:t.threadJid,content:(_=t.msgContent)==null?void 0:_.content,mentionedJids:(f=t.msgContent)==null?void 0:f.mentionedJids,msgType:t.type,ravenMediaType:t.ravenMediaType,replyAuthor:(g=t.quote)==null?void 0:g.content.author,replyType:(h=t.quote)==null?void 0:h.content.type,specialTextSize:t.specialTextSize,unsupportedType:(y=t.msgContent)==null?void 0:y.subtype,xmaMessageType:t.xmaMessageType}),snippetMsgOrReaction:t}}default:return{snippet:o("MAWThreadSnippet").buildThreadSnippet({adminMsgContent:(n=t.msgContent)==null?void 0:n.adminMsgContent,adminType:(r=t.msgContent)==null?void 0:r.adminType,author:t.author,chatJid:t.threadJid,content:(a=t.msgContent)==null?void 0:a.content,mentionedJids:(i=t.msgContent)==null?void 0:i.mentionedJids,msgType:t.type,ravenMediaType:t.ravenMediaType,replyAuthor:(l=t.quote)==null?void 0:l.content.author,replyType:(s=t.quote)==null?void 0:s.content.type,specialTextSize:t.specialTextSize,unsupportedType:(c=t.msgContent)==null?void 0:c.subtype,xmaMessageType:t.xmaMessageType}),snippetMsgOrReaction:t}}}l.isDbMsgDisabledForThreadSnippet=e,l.recalculateSnippetFromScratch_EXPENSIVE=s,l.EMPTY_SNIPPET_DATA=u,l.getThreadSnippetFromScratch=c,l.shouldIgnoreXMAMsgForSnippet=d}),98);
__d("MAWDbAppMeta",[],(function(t,n,r,o,a,i){"use strict";var e={allowSecurityAlert:"allowSecurityAlert",allowSecurityAlertForSelf:"allowSecurityAlertForSelf",dbMigrationVersion:"dbMigrationVersion",deviceJid:"deviceJid",hasMigratedFromDexie:"hasMigratedFromDexie",hmacKey:"hmacKey",hotlikeSticker:"hotlikeSticker",isBackfilledForOccamadillo:"isBackfilledForOccamadillo",msgTypeVersion:"msgTypeVersion",restoreMigrationAttempts:"restoreMigrationAttempts",restoreToDexieMigrationComplete:"restoreToDexieMigrationComplete"};i.AppMetaKeysEnum=e}),66);
__d("MAWDBMigrationUtils",["MAWDbAppMeta","MAWIndexedDb","MAWTransactionMode"],(function(t,n,r,o,a,i,l){"use strict";var e={batchSize:0,cursorValue:0,isRunning:!1},s={version:0},u=o("MAWIndexedDb").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READONLY},"getMigrationVersion",function(e){return function(){return e.appMeta.get(o("MAWDbAppMeta").AppMetaKeysEnum.dbMigrationVersion).then(function(e){var t,n=(t=e==null?void 0:e.value.dbMigrationVersion)!=null?t:0;return s.version=n,n})}}),c=6;l.mawDbDedupeMsgsMigrationStatus=e,l.mawDbMigrationVersion=s,l.getMigrationVersion=u,l.MAWDB_DEDUPE_MSGS_MIGRATION_VERSION=c}),98);
__d("MAWLoadReplyMediaTxns",["MAWBridgeReceiverFetchInfo","MAWDbMedia","MAWDbMsg","MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWMediaUtils","MAWMsgType","MAWUserJidWrapper","MAWXMAUtils","MWPBumpEntityKey","WAAssertUnreachable","WAJids","WALogger","WAMsgType","WAResultOrError","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_;function f(e,t,n){if(r("gkx")("2419")&&n!=null){var a=o("MAWMediaUtils").genHMACPlaintextHash(n);return e.media.where("hashedPlaintextHash").equals(a).first()}else return e.media.get(t)}var g=new Set([(_=o("MAWDbMedia")).MEDIA_TYPE.IMAGE,_.MEDIA_TYPE.GIF,_.MEDIA_TYPE.PTT,_.MEDIA_TYPE.STICKER,_.MEDIA_TYPE.VIDEO,_.MEDIA_TYPE.DOCUMENT_FILE]);function h(e){var t;switch(e.mediaType){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:case o("MAWDbMedia").MEDIA_TYPE.GIF:case o("MAWDbMedia").MEDIA_TYPE.STICKER:t=e.validatedImageInfo;break;case o("MAWDbMedia").MEDIA_TYPE.VIDEO:t=e.validatedVideoInfo;break}var n=t||{},r=n.height,a=n.jpegThumbnailHeight,i=n.jpegThumbnailWidth,l=n.width;return{replyMediaPreviewHeight:a!=null?a:r,replyMediaPreviewWidth:i!=null?i:l}}function y(e){switch(e.type){case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;case o("MAWMsgType").MSG_TYPE.XMA:return r("gkx")("9921")?!0:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType);case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("WAMsgType").NOTE_REPLY:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case o("MAWMsgType").MSG_TYPE.RAVEN:return!1;default:return r("WAAssertUnreachable")(e.type)}}function C(t,n,r){if(n==null)return o("MAWDexieTable").dexieResolve();var a=f(t,n,r).then(function(e){if(e==null)return o("WAResultOrError").makeError("reply_media_not_found");if(!g.has(e.mediaType))return o("WAResultOrError").makeError("reply_media_type_unknown");var t=h(e),r=t.replyMediaPreviewHeight,a=t.replyMediaPreviewWidth;return n!=null&&e.plaintextHash==null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","load_reply_media_txns_for_reply_type_'unknown'}"),o("WAResultOrError").makeResult({replyMediaId:n,replyMediaPreviewHeight:r,replyMediaPreviewWidth:a,replyPlaintextHash:e.plaintextHash})});return a.then(function(t){if(t.success!==!0){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to fetch reply media with id ",": ",""])),n,t.error);return}return t.value})}function b(e,t){var n=t.defaultPreviewMediaId;if(n==null)return o("MAWDexieTable").dexieResolve({replyXMAId:t.xmaId});var r=f(e,n).then(function(e){if(e==null)return o("WAResultOrError").makeError("reply_xma_media_not_found - "+t.targetType);if(!g.has(e.mediaType))return o("WAResultOrError").makeError("reply_xma_media_type_unknown");var n=h(e),r=n.replyMediaPreviewHeight,a=n.replyMediaPreviewWidth;return o("WAResultOrError").makeResult({replyMediaPreviewHeight:r,replyMediaPreviewWidth:a,replyPlaintextHash:e.plaintextHash,replyXMAId:t.xmaId})});return r.then(function(e){if(e.success!==!0){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unable to fetch reply media XMA with id ",": ",""])),t.xmaId,e.error);return}return e.value})}function v(e,t,n){var a,i,l;n===void 0&&(n=!1);var s=((a=t.quote)==null?void 0:a.content)||{},u=s.author,c=s.externalId,d=s.mediaId,m=s.msgId,p=s.plaintextHash,_=s.type,f=s.xmaMessageType;if(((i=t.quote)==null?void 0:i.content)==null||!y((l=t.quote)==null?void 0:l.content))return o("MAWDexieTable").dexieResolve();var g=t.threadJid,h=u===o("MAWUserJidWrapper").getMyUserJid(),b=h?o("WAJids").AUTHOR_ME:u;return(r("gkx")("9921")?_===o("MAWMsgType").MSG_TYPE.XMA:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(f))?S(e,o("MAWJidUtils").maybeToProtocolMsgId(b,g,c)):_===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?E(e,m):C(e,d,n?null:p)}function S(e,t){return t==null?o("MAWDexieTable").dexieResolve():o("MAWDbXMATxns").maybeGetXMAFromProtocolMsgId(e,t).then(function(t){if(!(t==null||o("MAWXMAUtils").isXMAExpired(t.isTombstoned,t.targetExpiringAtSec)))return b(e,t)})}function R(e,t){var n=t.author,a=t.externalId,i=t.mediaId,l=t.plaintextHash,s=t.threadJid,u=t.type,c=t.xmaMessageType,d=r("gkx")("9921")?u===o("MAWMsgType").MSG_TYPE.XMA:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(c),m=u===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH;return!o("MAWDbMsg").isMediaMsg(t)&&!d&&!m?o("MAWDexieTable").dexieResolve():d?S(e,o("MAWJidUtils").maybeToProtocolMsgId(n,s,a)):m?L(e,t.receiverFetchId):C(e,i,l)}function L(e,t,n){return t==null?(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Missing receiverFetchId for getReplyMediaForReceiverFetchWithReceiverFetchId"]))),o("MAWDexieTable").dexieResolve()):e.receiverFetchInfo.get({receiverFetchId:t}).then(function(e){if(e==null){o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Missing receiverFetchInfo for getReplyMediaForReceiverFetchWithReceiverFetchId"])));return}try{var t=o("MAWDbMedia").convertNumberToMediaId(parseInt(e.receiverFetchId,10));return n!=null&&o("MAWIndexedDb").afterTransaction({tag:"NewReceiverFetchInfo",value:o("MAWBridgeReceiverFetchInfo").createBridgeReceiverFetchInfoPayloadFromDbInfo(n.threadJid,n.msgId,n.sortOrderMs,n.ts,e)}),{replyMediaId:t,replyMediaPreviewHeight:e.previewHeight,replyMediaPreviewWidth:e.previewWidth}}catch(e){o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Unable to convert receiver fetch id to media id: ",""])),e);return}})}function E(e,t){return t==null?(o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Missing msgId for getReplyMediaForReceiverFetch"]))),o("MAWDexieTable").dexieResolve()):e.messages.get({msgId:t}).then(function(t){if(t==null||t.type!==o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH||t.receiverFetchId==null){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Invalid msg for getReplyMediaForReceiverFetch with type: ",""])),t==null?void 0:t.type);return}return L(e,t.receiverFetchId,t)})}l.getMedia=f,l.MSG_MEDIA_TYPE=g,l.getImageAttributes=h,l.isMediaReplyContent=y,l.getReplyMediaForMsgQuote=v,l.getReplyMediaForMsg=R}),98);
__d("MAWDbChunkTxns",["MAWDexieTable","MAWMediaUtils","MAWODSProxy","MWFBLogger","WAErrorMessage","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["maw_db","txn","MAWDbChunkTxns"]),m=function(t,n,r,a,i,l){l===void 0&&(l=0);var e=o("MAWMediaUtils").genHMACPlaintextHash(n);return p(t,n,e,r,a,i,l)},p=function(n,r,a,i,l,m,_){return _===void 0&&(_=0),n.chunk.where("hashedPlaintextHash").equals(a).first().then(function(t){var f={blobData:i,hashedPlaintextHash:a,isProgressivePreview:m!=null?m:void 0,mimetype:l,plaintextHash:r};if(t){_>0&&d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Chunk found after retry for hashedPlaintextHash: ",""])),a);var g=m!==!0&&t.isProgressivePreview===!0;if(g){var h=babelHelpers.extends({},f,{chunkId:t.chunkId});return n.chunk.put(h).then(function(){return h})}else return t}return n.chunk.add(f).then(function(e){return babelHelpers.extends({},f,{chunkId:e})}).catch(function(e){var t=o("WAErrorMessage").maybeGetMessageFromError(e);if(_>0)throw d.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk for hashedPlaintextHash: ",". Error: ",""])),a,t),d.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk after retry. Error: ",""])),t),e;return d.WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk. Possible duplicate? Will attempt a retry. For hashedPlaintextHash: ",". Error: ",""])),a,t),o("MAWODSProxy").odsBumpEntityKey({amount:1,entity:o("WAOdsEnums").Entity.MAW_MEDIA_DB_DUPLICATE_CHUNK,key:"retry"}),p(n,r,a,i,l,m,_+1)})})},_=function(t,n){return t.chunk.where("hashedPlaintextHash").equals(n)},f=function(t,n){return _(t,n).count().then(function(e){return e>0})},g=function(t,n){return o("MAWDexieTable").dexieAll(n.map(function(e){return f(t,e).then(function(t){return[e,t]})})).then(function(e){return new Map(e)})},h=function(t,n){return _(t,n).first()},y=function(t,n){return t.chunk.where("hashedPlaintextHash").anyOf(n).toArray().then(function(e){return new Map(e.map(function(e){return[e.hashedPlaintextHash,e]}))})},C=function(t,n){var e=n.map(o("MAWMediaUtils").genHMACPlaintextHash);return t.chunk.where("hashedPlaintextHash").anyOf(e).toArray().then(function(e){return new Map(e.map(function(e){return[e.plaintextHash,e]}))})};function b(e,t){return e.chunk.bulkGet(t)}var v=function(t,n){var e=o("MAWMediaUtils").genHMACPlaintextHash(n);return t.chunk.get({hashedPlaintextHash:e})};l.getOrCreateMediaChunkWithPlaintextHash=m,l.getOrCreateMediaChunkWithHashedPlaintextHash=p,l.hasMediaChunk=f,l.hasMediaChunks=g,l.maybeGetChunkFromHash=h,l.maybeBulkGetChunksFromHash=y,l.maybeBulkGetChunksFromPlaintextHash=C,l.bulkGetChunks=b,l.maybeGetChunkByPlaintextHash=v}),98);
__d("MAWDbMediaTxns",["MAWDbMsg","MAWDexieTable","MAWMediaUtils","MAWMsgType","MAWODSProxy","WAHashUtils","WALogger","WAOdsEnums","WAResultOrError","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.media.get({mediaId:t})}function m(e,t){return t.length===0?o("MAWDexieTable").dexieResolve(new Map):e.media.bulkGet(t).then(function(e){return new Map(e.filter(Boolean).map(function(e){return[e.mediaId,e]}))})}function p(e,t){return e.media.where("hashedPlaintextHash").equals(t).first()}function _(e,t){var n=o("MAWMediaUtils").genHMACPlaintextHash(t);return p(e,n)}function f(e,t){var n=t.map(function(e){return o("MAWMediaUtils").genHMACPlaintextHash(e)});return g(e,n)}function g(e,t){return e.media.where("hashedPlaintextHash").anyOf(t).toArray()}function h(e,t){return t==null?o("MAWDexieTable").dexieResolve():y(e,t).then(function(n){var r=n==null?void 0:n.mediaId;return r!=null?e.media.get({mediaId:r}):e.media.get({objectId:t})})}function y(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.mediaBackup.get({objectId:t})}function C(e,t){if(t==null)return o("MAWDexieTable").dexieResolve();var n=e.mediaBackup.where("msgId").equals(t).toArray();return n}function b(t,n){var a=n.filter(o("MAWDbMsg").isMediaMsg);if(a.length===0)return o("MAWDexieTable").dexieResolve([]);o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[getMsgMediaPairFromMsgs] msgs: ",""])),a.map(function(e){return""+e.msgId}));var i=a.reduce(function(e,t){return t.mediaId==null?(o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["mediaId is null for media msg with msgId: "," and msg type ",""])),t.msgId,t.type),e):e.set(t.mediaId,t)},new Map),l=Array.from(i.keys());return R(t,l).then(function(e){var t=[];return e.forEach(function(e){if(e==null)throw r("err")("Error missing media");var n=i.get(e.mediaId);if(n==null)throw r("err")("Error missing media");var a=o("MAWMediaUtils").genHMACPlaintextHash(e.plaintextHash);a!==e.hashedPlaintextHash&&(o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[getMsgMediaPairFromMsgs] encountered mismatched hashedPlaintextHash for media. PlaintextHash: ",""])),o("WAHashUtils").sanitisePlaintextHash(e.plaintextHash)),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MEDIA_MISMATCH_HASHED_PLAINTEXT_HASH,key:"mismatch."+n.type})),t.push([n,e])}),t})}function v(e,t){if(t.length===0)return o("MAWDexieTable").dexieResolve([]);var n=t.filter(o("MAWDbMsg").isMediaMsg).map(function(e){var t=e.mediaId;if(t==null)throw o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["mediaId is null for media msg with msgId: ",""])),e.msgId),r("err")("mediaId is missing");return t});return R(e,n).then(function(e){var t=[];return e.forEach(function(e){e!=null&&t.push(e)}),t})}function S(e,t){if(t.type===o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME||o("MAWDbMsg").isMediaMsg(t)){var n=t.mediaId;return n==null?t.type===o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME?o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeResult()):o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeError("missing")):e.media.get(n).then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}else return o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeResult())}function R(e,t){return e.media.bulkGet(t)}function L(e,t){var n=t.previewMediaIds!=null?R(e,t.previewMediaIds):o("MAWDexieTable").dexieResolve(),r=t.headerMediaId!=null?e.media.get(t.headerMediaId):o("MAWDexieTable").dexieResolve(),a=t.faviconMediaId!=null?e.media.get(t.faviconMediaId):o("MAWDexieTable").dexieResolve(),i=t.defaultPreviewMediaId!=null?e.media.get(t.defaultPreviewMediaId):o("MAWDexieTable").dexieResolve();return o("MAWDexieTable").dexieAll([n,r,a,i]).then(function(e){var n=e[0],r=e[1],a=e[2],i=e[3];if(t.headerMediaId!=null&&r==null||t.faviconMediaId!=null&&a==null||n==null)return o("WAResultOrError").makeError("missing");var l=[];for(var s of n){if(s==null)return o("WAResultOrError").makeError("missing");l.push(s)}return o("WAResultOrError").makeResult({defaultPreview:i,favicon:a,header:r,previews:l})})}function E(e,t,n){var r=babelHelpers.extends({},t,n);return e.media.put(r)}l.maybeGetMediaFromMediaId=d,l.maybeBulkGetMediaFromMediaId=m,l.maybeGetMediaFromHashedPlaintextHash=p,l.maybeGetMediaFromPlaintextHash=_,l.maybeBulkGetMediaFromPlaintextHash=f,l.maybeBulkGetMediaFromHashedPlaintextHash=g,l.maybeGetMediaFromObjectId=h,l.maybeGetMediaBackupRowFromObjectId=y,l.maybeGetMediaBackupRowFromMsgId=C,l.getMsgMediaPairFromMsgs=b,l.getMediaFromMsgs=v,l.getAndCheckMediaFromMsg=S,l.bulkGetMedias=R,l.getMediaForXMA=L,l.updateMedia=E}),98);
__d("WAMsgMap",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){var t=this;this.$1=new Map,e==null||e.forEach(function(e){var n=e[0],r=e[1];t.set(n,r)})}var t=e.prototype;return t.clear=function(){this.$1.clear()},t.delete=function(t){var e;(e=this.$1.get(t.externalId))==null||(e=e.get(t.author))==null||e.delete(t.chat)},t.get=function(t){var e;return(e=this.$1.get(t.externalId))==null||(e=e.get(t.author))==null?void 0:e.get(t.chat)},t.has=function(t){var e,n;return(e=(n=this.$1.get(t.externalId))==null||(n=n.get(t.author))==null?void 0:n.has(t.chat))!=null?e:!1},t.set=function(t,n){var e,r,o=(e=this.$1.get(t.externalId))!=null?e:new Map;this.$1.has(t.externalId)||this.$1.set(t.externalId,o);var a=(r=o.get(t.author))!=null?r:new Map;return o.has(t.author)||o.set(t.author,a),a.set(t.chat,n),this},t.keys=function(){var e=[],t=this.$1;for(var n of t.keys()){var r,o=(r=t.get(n))!=null?r:new Map;for(var a of o.keys()){var i,l=(i=o.get(a))!=null?i:new Map;for(var s of l.keys())e.push({externalId:n,author:a,chat:s})}}return e},t.entries=function(){var e=[],t=this.$1;for(var n of t.keys()){var r,o=(r=t.get(n))!=null?r:new Map;for(var a of o.keys()){var i,l=(i=o.get(a))!=null?i:new Map;for(var s of l.keys()){var u=l.get(s);u!=null&&e.push([{externalId:n,author:a,chat:s},u])}}}return e},t.values=function(){return this.entries().map(function(e){return e[1]})},e})();i.MsgMap=e}),66);
__d("MAWDbMsgUtil",["WAJids","WALogger","WAMsgMap"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return t.reduce(function(t,n){var r=n.threadJid;return r==null?(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Missing jid prevents adding message to array map"]))),t):n.author==="@system"?(o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Invalid author when converting msg array to map"]))),t):(t.set({author:n.author,chat:r,externalId:n.externalId},n),t)},new(o("WAMsgMap")).MsgMap)}function c(e){return o("WAJids").isAuthorSystem(e.author)||e.threadJid==null?null:{author:e.author,chat:e.threadJid,externalId:e.externalId}}l.convertMsgArrayToMap=u,l.getProtocolMsgIdFromDbMsg=c}),98);
__d("MAWDbUnrenderedMsgTxns",["MAWAckLevel","MAWDbMsg","MAWDbMsgUtil","MAWDexieTable","WAJids","WALogger","WAMsgMap","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){var n=t.author,r=t.chat,a=t.externalId;return e.threads.get({jid:r}).then(function(t){return t==null?o("WAResultOrError").makeError("missing_thread_unrendered_msg"):m(e,a,r,n).then(function(e){return e==null?o("WAResultOrError").makeError("missing_unrendered_msg"):o("WAResultOrError").makeResult(e)})})}function d(e,t){var n=t.map(function(e){var t=e.externalId;return t});return e.unrenderedMessages.where("externalId").anyOf(n).toArray().then(function(e){var n=o("MAWDbMsgUtil").convertMsgArrayToMap(e),r=new(o("WAMsgMap")).MsgMap;return t.forEach(function(e){var t=n.get(e);t!=null&&r.set(e,t)}),r})}function m(e,t,n,r){return e.unrenderedMessages.where("externalId").equals(t).filter(function(e){return e.author===r&&e.threadJid===n}).first()}function p(e,t){return e+"_"+t}function _(e,t){var n=t.map(function(e){var t=e.externalId;return t}),r=Array.from(new Set(t.map(function(e){return e.chat})));return o("MAWDexieTable").dexieAll([e.threads.where("jid").anyOf(r).toArray(),e.unrenderedMessages.where("externalId").anyOf(n).toArray()]).then(function(e){var n=e[0],r=e[1];if(r.length===0||n.length===0)return[];var o=new Map;return t.forEach(function(e){var t=e.author,n=e.chat,r=e.externalId,a=o.get(r)||new Set;a.add(p(t,n)),o.set(r,a)}),r.filter(function(e){var t=e.author,n=e.externalId,r=e.threadJid,a=o.get(n);return a!=null&&r!=null&&a.has(p(t,r))})})}function f(t,n,r){return g(t,[{ack:r,msgId:n}]).then(function(t){var n=t[0];return n==null?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["updateSystemAckForUnrenderedMsg on non existing message"]))),null):n})}function g(e,t){var n=t.map(function(e){return e.msgId}),r=new Map;return t.forEach(function(e){return r.set(e.msgId,{ack:e.ack})}),e.unrenderedMessages.where("msgId").anyOf(n).toArray().then(function(t){if(t.length===0)return t;var n=[],a=[];return t.forEach(function(e){var t;if(e.author!==o("WAJids").AUTHOR_ME){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck on incoming message"]))),n.push(e);return}if(e.ack>o("MAWAckLevel").ACK.clock){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck on sent message"]))),n.push(e);return}var i=(t=r.get(e.msgId))==null?void 0:t.ack;if(i==null)return null;var l=babelHelpers.extends({},e,{ack:i});i===o("MAWAckLevel").ACK.sent&&delete l.resendCount,a.push(l)}),e.unrenderedMessages.bulkPut(a).then(function(){return[].concat(a,n)})})}function h(e,t){var n=t.map(function(t){return e.unrenderedMessages.get({msgId:t})});return o("MAWDexieTable").dexieAll(n)}function y(e,t){return e.unrenderedMessages.where("msgId").between(o("MAWDbMsg").msgIdsInChatLowerBound(t.chatId),o("MAWDbMsg").msgIdsInChatUpperBound(t.chatId)).last().then(function(e){var t=e==null?0:o("MAWDbMsg").getInChatMsgIdFromMsgId(e.msgId);return t+1})}l.maybeGetUnrenderedMsgByProtocolMsgId=c,l.getUnrenderedMsgMapByProtocolMsgId=d,l.maybeGetUnrenderedMsgByExternalId=m,l.getUnrenderedMsgsByProtocolMsgId=_,l.updateSystemAckForUnrenderedMsg=f,l.bulkUpdateSystemAckForUnrenderedMsgs=g,l.getUnrenderedMsgsByMsgIds=h,l.getNextUnrenderedMsgIdNumberForThread=y}),98);
__d("MAWMessageSortOrderUtils",["I64","MAWDbMsg","MAWExtractMsFromExternalId","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d;function m(t){var n=t.revokedExternalId!=null?t.revokedExternalId:t.externalId;n==null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["generateAuthoritativeMessageSortOrder called without ID"])));var r=(d||(d=o("I64"))).of_string_opt(n);if(t.serverTs==null){var a;if(t.sortOrderMs!=null)return t.sortOrderMs;r==null&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] ExternalId is not present"])));var i=r==null?null:o("MAWExtractMsFromExternalId").extractMsFromExternalId(r);return Math.floor((a=t.originalTs)!=null?a:o("MAWDbMsg").getCanonicalTsFromMsg(t))*1e3+(i!=null?i:0)}if(r!=null){var l=o("MAWExtractMsFromExternalId").extractMsFromExternalId(r);if(l!=null){var m=t.originalTs!=null?t.originalTs:t.serverTs;return Number(m)*1e3+l}else o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] Timestamp bits in externalId not valid"])))}else o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] externalId is not a valid int64"])));return o("MAWDbMsg").getSortOrderWithFallback(t)}l.generateAuthoritativeMessageSortOrder=m}),98);
__d("WAArrayGroupBy",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=new Map,r=0;r<e.length;r++){var o=t(e[r]),a=n.get(o);a==null?n.set(o,[e[r]]):a.push(e[r])}return Array.from(n.entries())}i.groupBy=e}),66);
__d("MAWDbMsgTxns",["EncryptedBackupsUtils","FBLogger","MAWAckLevel","MAWBridgeMsg","MAWDbMsg","MAWDbMsgUtil","MAWDbThreadTxns","MAWDbUnrenderedMsgTxns","MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWLoadReplyMediaTxns","MAWMessageSortOrderUtils","MAWMsgType","MAWODSProxy","MAWTransactionMode","MAWTransactor","Random","WAArrayGroupBy","WAJids","WALogger","WAMsg","WAMsgMap","WAOdsEnums","WAResultOrError","WATimeUtils","emptyFunction","gkx","justknobx","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g;function h(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.messages.get({msgId:t})}function y(e,t){return e.messages.where("threadJid").equals(t).count().then(function(e){return e===0})}function C(e,t,n){return e.messages.where("threadJid").equals(t).filter(n).first().then(function(e){return e!=null})}function b(e,t,n,r){return e.messages.where(["threadJid","sortOrderMs"]).between([t,Number.MIN_SAFE_INTEGER],[t,Number.MAX_SAFE_INTEGER],n,r)}function v(e,t){return b(e,t,!1,!1).last()}function S(e,t){return v(e,t).then(function(e){return e==null?void 0:e.msgId})}function R(e,t){return v(e,t).then(function(e){return(e==null?void 0:e.sortOrderMs)==null?null:o("WATimeUtils").castToMillisTime(e.sortOrderMs)})}function L(e,t,n){return r("vulture")("ST6o7qk-BKGl46ZXS71LYr_2y6I="),b(e,t,!1,!1).reverse().limit(n).toArray()}function E(e,t){return b(e,t,!1,!1).first()}function k(e,t){return E(e,t).then(function(e){return e==null?void 0:e.msgId})}function I(e,t){return e.messages.where("externalId").equals(t.externalId).filter(function(e){return e.author===t.author&&e.threadJid===t.chat}).toArray().then(D)}function T(e,t){var n=new Set(t.map(function(e){var t=e.author,n=e.chat,r=e.externalId;return o("WAMsg").craftWAMsgIdString({author:t,chat:n,externalId:r})}));return e.messages.where("externalId").anyOf(t.map(function(e){var t=e.externalId;return t})).filter(function(e){var t=e.author,r=e.externalId,a=e.threadJid;return n.has(o("WAMsg").craftWAMsgIdString({author:t,chat:a,externalId:r}))}).toArray().then(function(e){return o("WAArrayGroupBy").groupBy(e,function(e){return o("WAMsg").craftWAMsgIdString({author:e.author,chat:e.threadJid,externalId:e.externalId})}).map(function(e){var t=e[0],n=e[1];return D(n)}).filter(Boolean)})}function D(t){if(t.length>1){var n=t.map(function(e){var t,n;return e.type+":"+((t=e.serverTs)!=null?t:0).toString()+":"+((n=e.ts)!=null?n:0).toString()}),a=new Set(n).size===1;a?o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[maybeGetMsgByProtocolMsgId] Suspected multiple instances of same message!"]))):o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[maybeGetMsgByProtocolMsgId] Can't have "," messages with the same protocolMsgId!"])),t.length),(r("gkx")("5039")||o("Random").coinflip(r("justknobx")._("3594")))&&x(t)}return t[0]}function x(e){var t=e.length;if(!(t<=1)){var n=t-1,a=e[n],i={editCount:0,mediaId:0,revokedStatus:0,serverTs:0,sortOrderMs:0,ts:0,type:0};e.slice(0,n).forEach(function(e){var t=[];if((e==null?void 0:e.editCount)!==(a==null?void 0:a.editCount)){var n,l;i.editCount++,t.push("editCount, reference: "+((n=a==null?void 0:a.editCount)!=null?n:"")+", duplicate: "+((l=e==null?void 0:e.editCount)!=null?l:"")+". ")}if((e==null?void 0:e.mediaId)!==(a==null?void 0:a.mediaId)&&(i.mediaId++,t.push("mediaId, reference: "+((a==null?void 0:a.mediaId)!=null?String(a.mediaId):"")+", duplicate: "+((e==null?void 0:e.mediaId)!=null?String(e.mediaId):"")+". ")),e.sortOrderMs!==a.sortOrderMs&&(i.sortOrderMs++,t.push("sortOrderMs, reference: "+String(a.sortOrderMs)+", duplicate: "+String(e.sortOrderMs)+". ")),e.serverTs!==a.serverTs&&(i.serverTs++,t.push("serverTs, reference: "+String(a.serverTs)+", duplicate: "+String(e.serverTs)+". ")),e.ts!==a.ts&&(i.ts++,t.push("ts, reference: "+String(a.ts)+", duplicate: "+String(e.ts)+". ")),e.type!==a.type){var s,u;(e.type===o("MAWMsgType").MSG_TYPE.REVOKED||a.type===o("MAWMsgType").MSG_TYPE.REVOKED)&&(i.revokedStatus++,r("FBLogger")("MAWDuplicateMessageComparison").info("Revoked duplicate msg conflict, duplicate message, %s, has type: %s, externalId: %s, revokedExternalId: %s, sortOrderMs: %s, serverTs: %s, ts: %s, rowId: %s, reference msg, %s, has type: %s, externalId: %s, revokedExternalId: %s, sortOrderMs: %s, serverTs: %s, ts: %s, rowId: %s",e.msgId,e.type,e.externalId,e.revokedExternalId,e.sortOrderMs,e.serverTs,e.ts,e.rowId,a.msgId,a.type,a.externalId,a.revokedExternalId,e.sortOrderMs,e.serverTs,e.ts,e.rowId)),i.type++,t.push("type, reference: "+((s=a.type)!=null?s:"")+", duplicate: "+((u=e.type)!=null?u:"")+". ")}var c=t.join("");c.length>0?r("FBLogger")("MAWDuplicateMessageComparison").info("Duplicate msg, %s, has conflicting field values to reference msg, %s: %s",e.msgId,a.msgId,c):r("FBLogger")("MAWDuplicateMessageComparison").info("Duplicate msg, %s, has no conflicting field values to reference msg, %s",e.msgId,a.msgId)}),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"sets_of_duplicate_msgs"}),Object.keys(i).forEach(function(e){var t=i[e];t>0&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"sets_of_duplicate_msgs_with_"+e+"_field_differences"})}),o("MAWODSProxy").odsBumpEntityKey({amount:t-1,entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"number_of_duplicate_msgs"}),Object.keys(i).forEach(function(e){var t=i[e];t>0&&o("MAWODSProxy").odsBumpEntityKey({amount:t,entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"number_of_duplicate_msgs_with_"+e+"_field_differences"})})}}function $(e,t,n,r){var o={author:r,chat:n,externalId:t};return I(e,o)}function P(e,t){return e.messages.where("msgId").equals(t).toArray()}function N(e,t){return A(e,t).then(function(e){return e.success,e})}function M(e,t){var n=t.map(function(e){var t=e.externalId;return t});return e.messages.where("externalId").anyOf(n).toArray().then(function(e){var n=o("MAWDbMsgUtil").convertMsgArrayToMap(e),r=new(o("WAMsgMap")).MsgMap;return t.forEach(function(e){var t=n.get(e);t!=null&&r.set(e,t)}),r})}function w(e,t){return e.messages.where("msgId").equals(t).first().then(function(e){return e==null?void 0:e.sortOrderMs})}function A(e,t){var n=t.author,r=t.chat,a=t.externalId;return e.threads.get({jid:r}).then(function(t){return t==null?o("WAResultOrError").makeError("missing_thread_msg"):$(e,a,t.jid,n).then(function(e){return e==null?o("WAResultOrError").makeError("missing_msg"):o("WAResultOrError").makeResult(e)})})}function F(e,t){var n=t.author,r=t.chat,o=t.externalId;return e.threads.get({jid:r}).then(function(t){if(t!=null)return e.messages.where("revokedExternalId").equals(o).filter(function(e){return e.author===n&&e.threadJid===t.jid&&e.type==="Revoked"}).first()})}function O(e,t,n,r){var a=e.messages.where("revokedExternalId").equals(t).filter(function(e){return e.author===r&&e.threadJid===n&&e.type===o("MAWMsgType").MSG_TYPE.REVOKED}).first(),i=o("MAWDbUnrenderedMsgTxns").maybeGetUnrenderedMsgByExternalId(e,t,n,r).then(function(e){if((e==null?void 0:e.type)===o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME)return e});return o("MAWDexieTable").dexieAll([a,i]).then(function(e){var t=e[0],n=e[1];return t!=null||n!=null})}function B(e,t){var n=new Array(t.length),r=new Set;return t.forEach(function(e){n.push(e.externalId),r.add(o("EncryptedBackupsUtils").convertWAMsgIdToStringId(e))}),e.messages.where("externalId").anyOf(n).filter(function(e){return r.has(o("EncryptedBackupsUtils").convertWAMsgIdToStringId({author:e.author,chat:e.threadJid,externalId:e.externalId}))}).toArray()}function W(e,t,n,r,a,i){return q(e,[{ack:n,applicationErrorCode:i,msgId:t,reportingMeta:a,serverTs:r}]).then(function(e){var n=e.find(function(e){return e.msgId===t});return n==null?(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["updateSystemAck on non existing message"]))),null):n})}function q(e,t){var n=t.map(function(e){return e.msgId});return o("MAWDbXMATxns").getXMAMsgIdsFromAssociatedMsgIds(e,n).then(function(r){var a=new Map;t.forEach(function(e){a.set(e.msgId,{ack:e.ack,applicationErrorCode:e.applicationErrorCode,reportingMeta:e.reportingMeta,serverTs:e.serverTs});var t=r.get(e.msgId);t!=null&&a.set(t,{ack:e.ack,applicationErrorCode:e.applicationErrorCode,reportingMeta:e.reportingMeta,serverTs:e.serverTs})});var i=Array.from(new Set(n.concat(Array.from(r.values()))));return e.messages.where("msgId").anyOf(i).toArray().then(function(t){if(t.length===0)return t;var n=[],r=[];return t.forEach(function(e){var t,i,l;if(e.author!==o("WAJids").AUTHOR_ME||e.ack>o("MAWAckLevel").ACK.clock){n.push(e);return}var s=(t=a.get(e.msgId))==null?void 0:t.ack,u=(i=a.get(e.msgId))==null?void 0:i.serverTs;if(s==null)return null;var c=babelHelpers.extends({},e,{ack:s});U(c,u);var d=(l=a.get(e.msgId))==null?void 0:l.reportingMeta;d!=null&&(c.reportingMeta=d),s===o("MAWAckLevel").ACK.sent&&delete c.resendCount,r.push(c)}),n.length>0&&o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck: not updating ",""])),n.map(function(e){return e.msgId}).toString()),e.messages.bulkPut(r).then(function(){return o("MAWDexieTable").dexieAll(r.map(function(t){return o("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(e,t)}))}).then(function(e){return r.forEach(function(t,n){o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(t,e[n])})}),[].concat(r,n)})})})}function U(e,t){if(t!=null){e.serverTs=t;var n=e.sortOrderMs;e.type===o("MAWMsgType").MSG_TYPE.REVOKED&&r("justknobx")._("3841")||(e.sortOrderMs=o("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder(e),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Message was acked by server (serverTs = ","), override sortOrderMs: "," -> ",""])),t,n,e.sortOrderMs))}}function V(e,t,n,a){return o("MAWDbThreadTxns").getThread(e,t).then(function(t){if(!(!t.success||a==null)){var i=t.value,l=[e.messages.where(["threadJid","sortOrderMs"]).above([i.jid,a]).first(),e.messages.where(["threadJid","sortOrderMs"]).below([i.jid,a]).last()];return o("MAWDexieTable").dexieAll(l).then(function(t){var a=t[0],l=t[1];return o("MAWDbThreadTxns").updateThread(e,babelHelpers.extends({},i,{newestMsgTs:(l==null?void 0:l.ts)==null?i.newestMsgTs:o("WATimeUtils").castUnixTimeToMillisTime(l.ts),oldestMsg:i.oldestMsg===n?a==null?void 0:a.msgId:i.oldestMsg})).then(r("emptyFunction"))})}})}function H(e){return e.messages.where("altIndex").equals(o("MAWDbMsg").FUTUREPROOF_ALT_INDEX).toArray().then(function(e){var t=[];return e.forEach(function(e){if(e.type!==o("MAWMsgType").MSG_TYPE.FUTUREPROOF){o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["getFutureproofMsg gets a message "," with unsupported type ",""])),e.msgId,e.type);return}t.push(e)}),t})}function G(e){return e.toString()}function z(e,t,n,a){var i=t.mediaId;if(i===n)return o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["updateMediaId on message "," that already has this mediaId ",""])),t.msgId,n),o("MAWDexieTable").dexieResolve();var l=i!=null?e.media.get(i):o("MAWDexieTable").dexieResolve();return l.then(function(i){i&&o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Replacing mediaId for message with pre-existing media. type=",""])),t.type);var l=a!=null?a:void 0,s=babelHelpers.extends({},t,{mediaId:n,plaintextHash:l});return e.messages.put(s).then(r("emptyFunction"))})}function j(e,t){var n=Array.from(t.keys());return e.messages.where("msgId").anyOf(n).toArray().then(function(n){var a=[];return n.map(function(e){var n=t.get(e.msgId),i=e.mediaId;if(i!=null&&i!==n){if(n!=null)throw r("FBLogger")("messenger_web").mustfixThrow("mediaId "+G(i)+" in message "+e.msgId+" is different with the "+G(n)+" in bulkUpdateMediaId");o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["updateMediaId on message "," that already has this mediaId ",""])),e.msgId,n);return}var l=babelHelpers.extends({},e,{mediaId:n,plaintextHash:e.plaintextHash});a.push(l)}),e.messages.bulkPut(a).then(r("emptyFunction"))})}function K(e,t){return Q(e,[t]).then(r("emptyFunction"))}function Q(e,t){return e.messages.where("msgId").anyOf(t).toArray().then(function(t){var n=t.map(function(e){return babelHelpers.extends({},e,{isExpiredXmaMsg:!0})});return e.messages.bulkPut(n).then(function(){return n})})}function X(e,t,n,r){if(r!=null&&r<=0)return o("MAWDexieTable").dexieResolve([]);var a=e.messages.where("altIndex").equals(o("MAWDbMsg").craftToBeReadAltIndex(t)).filter(function(e){return o("MAWDbMsg").getSortOrderWithFallback(e)<=n});return r!=null&&(a=a.limit(r)),a.toArray()}function Y(e,t,n){return X(e,t,n).then(function(t){var n=t.map(function(e){return babelHelpers.extends({altIndex:null},e)});return e.messages.bulkPut(n).then(function(){return n})})}function J(e,t){return e.messages.delete(t)}function Z(e,t){return e.messages.bulkDelete(t)}function ee(e,t,n){var r=t.map(function(e){return e.rowId}),a=n!=null?t.map(function(e){var t=o("MAWJidUtils").toProtocolMsgId(e);if(t)return babelHelpers.extends({},t,{reason:n})}).filter(Boolean):[];return o("MAWDexieTable").dexieAll([e.deletedMessages.bulkAdd(a),e.messages.bulkDelete(r)]).then(function(e){var t=e[0],n=e[1];o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Successfull deleted "," messages"])),n)})}function te(e,t){return e.messages.where("msgId").anyOf(t).toArray()}function ne(e){return e.messages.where("altIndex").anyOf([o("MAWDbMsg").SPAM_ALT_INDEX,o("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX]).toArray()}function re(e,t,n,r,a,i,l,s){l===void 0&&(l="before"),s===void 0&&(s=null);var u=n==null?null:o("MAWDbMsg").getSortOrderWithFallback(n);return l==="before"?e.messages.where(["threadJid","sortOrderMs"]).between([t,s!=null?s:Number.MIN_SAFE_INTEGER],[t,u!=null?u:Number.MAX_SAFE_INTEGER],!0,r).reverse().filter(i).limit(a).toArray():e.messages.where(["threadJid","sortOrderMs"]).between([t,u!=null?u:Number.MIN_SAFE_INTEGER],[t,s!=null?s:Number.MAX_SAFE_INTEGER],r,!0).filter(i).limit(a).toArray().then(function(e){return e.sort(function(e,t){return t.ts-e.ts})})}function oe(e,t,n,r){var o=n.msgId;if(r==null){var a;return{oldestMsg:(a=e==null?void 0:e.msgId)!=null?a:o}}var i=[e,t,n].filter(Boolean);return{oldestMsg:i.reduce(function(e,t){return ae(e,o,r)<ae(t,o,r)?e:t}).msgId}}function ae(e,t,n){return e.msgId===t?n:o("MAWDbMsg").getSortOrderWithFallback(e)}function ie(e,t){return e.messages.where("msgId").between(o("MAWDbMsg").msgIdsInChatLowerBound(t.chatId),o("MAWDbMsg").msgIdsInChatUpperBound(t.chatId)).last().then(function(e){var t=e==null?0:o("MAWDbMsg").getInChatMsgIdFromMsgId(e.msgId);return t+1})}function le(e){return o("MAWTransactor").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"checkMessagesExistenceByProtocolMsgIds",function(t){return function(){return o("MAWDexieTable").dexieAll(e.map(function(e){return t.messages.get({protocolMsgId:e.chat+"."+e.externalId})}))}})()}function se(e,t){return e.messages.where("externalId").anyOf(t).toArray()}l.maybeGetMsg=h,l.getIsThreadEmpty=y,l.doesThreadHaveMsgsMatchCriteria=C,l.getThreadMessagesBySortOrder=b,l.getThreadNewestMessageBySortOrder=v,l.getThreadNewestMessageId=S,l.getThreadNewestMessageMs=R,l.getThreadNewestNumMessagesBySortOrder=L,l.getThreadOldestMessageBySortOrder=E,l.getThreadOldestMessageId=k,l.maybeGetMsgByProtocolMsgId=I,l.getUniqueMsgsByProtocolMsgIds=T,l.maybeGetMsgByExternalId=$,l.maybeGetMsgListByMsgId_I_KNOW_WHAT_I_AM_DOING=P,l.maybeGetMsgResultByProtocolMsgId=N,l.getMsgMapByProtocolMsgId=M,l.getSortOrderFromMsgId=w,l.maybeGetRevokedMsgByProtocolMsgId=F,l.checkIfMsgIsDeletedForMeOrRevoked=O,l.getMsgsByProtocolMsgId=B,l.updateSystemAck=W,l.bulkUpdateSystemAck=q,l.maybeUpdateThreadMsgsForDeleteForMe=V,l.getFutureProofMsgs=H,l.updateMediaId=z,l.bulkUpdateMediaId=j,l.updateDbMsgXMAExpiration=K,l.bulkUpdateDbMsgXMAExpired=Q,l.getMsgsNeedingRetroactiveReadReceiptsUpTo=X,l.clearRetroactiveReadReceiptStatusFromMsgsUpTo=Y,l.deleteDbMsg=J,l.bulkDeleteDbMsg=Z,l.deleteMessages=ee,l.getMsgsByMsgIds=te,l.getSpamMsgs=ne,l.fetchMessagesFromDbWithSortOrderMs=re,l.calculateOldestMsg=oe,l.getNextMsgIdNumberForThread=ie,l.checkMessagesExistenceByProtocolMsgIds=le,l.UNSAFE_getMultipleMsgsByExternalId=se}),98);
__d("MAWDbMsgTypeVersionTxns",["MAWDbAppMeta","MAWDexieTable","MAWTransactionMode","MAWTransactor","MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e.appMeta.get({key:o("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion}).then(function(e){return e==null?void 0:e.value.msgTypeVersion})}function u(e,t){return e.appMeta.add({key:o("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:t}})}function c(e,t){return e.appMeta.put({key:o("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:t}})}function d(e,t){return e.appMeta.add({key:o("MAWDbAppMeta").AppMetaKeysEnum.hmacKey,value:{hmacKey:t}})}function m(e){return e.appMeta.get({key:o("MAWDbAppMeta").AppMetaKeysEnum.hmacKey}).then(function(e){return e==null?void 0:e.value.hmacKey})}function p(e,t){return e.appMeta.get({key:t})}function _(e,t){return o("MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor").setCachedShouldSaveSecurityAlert(t),e.appMeta.put({key:o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert,value:{allowSecurityAlert:t}}).then(r("emptyFunction"))}function f(e,t){return e.appMeta.put({key:o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf,value:{allowSecurityAlertForSelf:t}}).then(r("emptyFunction"))}function g(){return o("MAWTransactor").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READONLY},"handleInstructions",function(e){return function(){return h(e)}})()}function h(e){return p(e,o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert).then(function(e){var t;return(t=e==null?void 0:e.value.allowSecurityAlert)!=null?t:!1})}function y(e){return p(e,o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf).then(function(e){var t;return(t=e==null?void 0:e.value.allowSecurityAlertForSelf)!=null?t:!0})}function C(e,t){return e.appMeta.add({key:o("MAWDbAppMeta").AppMetaKeysEnum.hotlikeSticker,value:{hotlikeSticker:t}})}function b(e){return o("MAWDexieTable").dexieAll([y(e),h(e)]).then(function(e){var t=e[0],n=e[1];return{allowSecurityAlertForContact:n,allowSecurityAlertForSelf:t}})}l.MSG_TYPE_VERSION=(e=o("MAWDbAppMeta")).AppMetaKeysEnum.msgTypeVersion,l.ALLOW_SECURITY_ALERT_FOR_CONTACT=e.AppMetaKeysEnum.allowSecurityAlert,l.ALLOW_SECURITY_ALERT_FOR_SELF=e.AppMetaKeysEnum.allowSecurityAlertForSelf,l.HOT_LIKE=e.AppMetaKeysEnum.hotlikeSticker,l.getMsgTypeVersion=s,l.addMsgTypeVersion=u,l.updateMsgTypeVersion=c,l.addHMACKey=d,l.getHMACKey=m,l.getAppMetaValue=p,l.updateSecurityAlertValueForContact=_,l.updateSecurityAlertValueForSelf=f,l.getSecuritySettingForContactTxn=g,l.getSecuritySettingForContact=h,l.getSecuritySettingForSelf=y,l.addHotLike=C,l.maybeBulkGetSecuritySetting=b}),98);
__d("MAWDbReactionsTxns",["FBLogger","MAWAuthor","MAWBridgeTypesCreators","MAWDbMsg","MAWDexieTable","MAWIndexedDb","WALogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=function(t){return t};function d(e,t){return e.reactions.put(c(t))}function m(t,n){return t.reactions.delete(n.rowId).then(function(){var t=n.author,r=n.reactionId,a=n.reactToMsgId,i=n.threadJid;a!=null&&(o("MAWIndexedDb").afterTransaction({tag:"DeleteReaction",value:o("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:t,chatJid:i,reactToMsgId:a})}),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted reaction with id : ","."])),r))})}function p(e,t){var n=o("MAWAuthor").getAuthorUserJid(t.author);return e.reactions.where("reactToExternalId").equals(t.externalId).filter(function(e){return(e.reactToAuthor===n||e.reactToAuthor===t.author)&&e.threadJid===t.chat}).toArray()}function _(e,t){var n=t.reduce(function(e,t){return e.set(t.msgId,t),e},new Map);return e.reactions.where("reactToMsgId").anyOf(t.map(function(e){return e.msgId})).toArray().then(function(e){var t=e.filter(function(e){var t,r=e.reactToExternalId,o=e.reactToMsgId;return o!=null&&r===((t=n.get(o))==null?void 0:t.externalId)});return t.length<e.length&&r("FBLogger")("messenger_web").mustfix("Reactions query by reactToMsgId returns reactions with mismatching externalId"),t})}function f(e,t){return e.reactions.where("reactToMsgId").equals(t.msgId).toArray().then(function(e){var n=e.filter(function(e){var n=e.reactToExternalId;return n===t.externalId});return n.length<e.length&&r("FBLogger")("messenger_web").mustfix("Reactions query by reactToMsgId returns reactions with mismatching externalId"),n})}function g(e,t){return _(e,[t])}function h(e,t){var n=t.author,r=t.chat,o=t.externalId;return e.reactions.where("externalId").equals(o).filter(function(e){return e.author===n&&e.threadJid===r}).first()}function y(e,t){return o("MAWDexieTable").dexieAll(t.map(function(t){var n=t.author,r=t.externalId,a=o("MAWAuthor").getAuthorUserJid(n);return e.reactions.where("reactToExternalId").equals(r).filter(function(e){return o("MAWAuthor").getAuthorUserJid(e.reactToAuthor)===a}).toArray()})).then(function(t){var n=t.flat();if(n.forEach(function(e){var t=e.author,n=e.reactToMsgId,r=e.threadJid;n!=null&&o("MAWIndexedDb").afterTransaction({tag:"DeleteReaction",value:o("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:t,chatJid:r,reactToMsgId:n})})}),n.length!==0)return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted: "," reactions rows."])),n.length),e.reactions.bulkDelete(n.map(function(e){return e.rowId}))})}function C(e,t){return e.reactions.where("reactToMsgId").anyOf(t.map(function(e){return e.msgId})).delete().then(function(e){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Deleted "," reactions"])),e)})}function b(e,t){return e.reactions.where("reactionId").between(o("MAWDbMsg").msgIdsInChatLowerBound(t.chatId),o("MAWDbMsg").msgIdsInChatUpperBound(t.chatId)).last().then(function(e){var t=e==null?0:o("MAWDbMsg").getInChatMsgIdFromMsgId(e.reactionId);return t+1})}function v(e,t,n,r,a,i,l){var s,u,c=(s=r==null?void 0:r.ts)!=null?s:o("WATimeUtils").unixTime();return e.reactions.where(["threadJid","ts"]).between([t,(u=o("WATimeUtils").castMillisTimeToUnixTime(n))!=null?u:o("WATimeUtils").castToUnixTime(0)],[t,c],!0,a).reverse().filter(l).limit(i).toArray()}l.coerceToReaction=c,l.putReaction=d,l.deleteReaction=m,l.getReactionForEcho=p,l.getReactionsFromMessages=_,l.getReactionsForMessage=f,l.getReactionsFromMessage=g,l.maybeGetReactionByProtocolMsgId=h,l.deleteReactionsByUniqueMsgIdentifiers=y,l.deleteAllReactionsForMessages=C,l.getNextReactionIdNumberForThread=b,l.fetchReactionsFromDbWithTimestamp=v}),98);
__d("MaybeCreateOrUpdateThreadResultCache",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){e.delete(t)}i.cache__I_KNOW_WHAT_I_AM_DOING=e,i.deleteCachedThreadResult=l}),66);
__d("MAWDbThreadTxns",["MAWAuthoritativeThreadsCache","MAWBridgeTypesCreators","MAWDbMsgTxns","MAWDexieTable","MAWFolderTypes","MAWIndexedDb","MaybeCreateOrUpdateThreadResultCache","WAArrayZip","WALogger","WAResultOrError","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return e.threads.get({deduplicationKey:t}).then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}function d(e,t){return e.threads.get({jid:t}).then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}function m(e,t){return e.threads.where("jid").anyOf(t).toArray()}function p(e,t){return e.threads.where("jid").startsWith(t+"@").first().then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}function _(e){o("MaybeCreateOrUpdateThreadResultCache").deleteCachedThreadResult(e),o("MAWAuthoritativeThreadsCache").AuthoritativeThreadsCache.delete(e)}function f(e,t){return e.threads.where("jid").equals(t).delete().then(function(){return _(t)})}function g(e,t){return e.participants.where("userJid").equals(t).toArray().then(function(t){var n=t.map(function(e){return e.threadJid});return m(e,n)})}function h(e,t){return e.participants.where("userJid").anyOf(t).toArray().then(function(t){var n=new Map,r=new Set;return t.forEach(function(e){var t,o=e.userJid,a=(t=n.get(o))!=null?t:[];a.push(e.threadJid),n.set(o,a),r.add(e.threadJid)}),m(e,Array.from(r)).then(function(e){var t=e.reduce(function(e,t){return e.set(t.jid,t),e},new Map);return new Map(Array.from(n.entries()).map(function(e){var n=e[0],r=e[1];return[n,r.map(function(e){return t.get(e)}).filter(Boolean)]}))})})}function y(e,t,n){return(t==null?void 0:t.lastReadMsgReceiptSent)==null?o("MAWDexieTable").dexieResolve(!1):o("MAWDbMsgTxns").getSortOrderFromMsgId(e,t.lastReadMsgReceiptSent).then(function(e){return n.sortOrderMs==null||e==null?!1:n.sortOrderMs<=e})}function C(e,t){return e.threads.get({jid:t.threadJid}).then(function(n){return y(e,n,t)})}function b(e,t){return e.threads.where("jid").anyOf(t.map(function(e){return e.threadJid})).toArray().then(function(n){return o("MAWDexieTable").dexieAll(o("WAArrayZip").zip(t,n).map(function(t){var n=t[0],r=t[1];return y(e,r,n)}))})}function v(e,t,n){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var r=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{archived:!0,cannotReplyReason:n?"viewer_not_subscribed":e.cannotReplyReason,folder:o("MAWFolderTypes").FOLDER_ID.ARCHIVED})});return e.threads.bulkPut(r).then(function(){r.forEach(function(e){n&&o("WALogger").LOG(["[Occamadillo] Leaving a group thread\n          "+e.jid.toString()+", showing a VIEWER_NOT_SUBSCRIBED composer blocker"]),o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread({cannotReplyReason:e.cannotReplyReason,folder:o("MAWFolderTypes").FOLDER_ID.ARCHIVED,threadJid:e.jid})})})})})}function S(e,t){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var n=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{cannotReplyReason:null})});return e.threads.bulkPut(n).then(function(){n.forEach(function(e){var t={cannotReplyReason:null,threadJid:e.jid};o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread(t)})})})})}function R(e,t){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var n=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{archived:!1,cannotReplyReason:e.cannotReplyReason==="viewer_not_subscribed"?e.cannotReplyReason:null,folder:o("MAWFolderTypes").FOLDER_ID.INBOX})});return e.threads.bulkPut(n).then(function(){n.forEach(function(e){o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread({cannotReplyReason:e.cannotReplyReason,folder:o("MAWFolderTypes").FOLDER_ID.INBOX,threadJid:e.jid})})})})})}function L(e,t){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var n=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{cannotReplyReason:"viewer_not_subscribed"})});return e.threads.bulkPut(n).then(function(){n.forEach(function(e){var t={cannotReplyReason:"viewer_not_subscribed",threadJid:e.jid};o("WALogger").LOG(["[Occamadillo] User is unsubscribed from thread\n          "+e.jid.toString()+", showing a VIEWER_NOT_SUBSCRIBED composer blocker"]),o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread(t)})})})})}function E(t,n){return d(t,n).then(function(n){if(!n.success){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["markThreadAsMigratedLocally failed to get the thread"])));return}var a=n.value;if(a.isMigratedLocally===!0){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["markThreadAsMigratedLocally failed because thread is already migrated"])));return}var i=babelHelpers.extends({},a,{isMigratedLocally:!0});return t.threads.put(i).then(r("emptyFunction"))})}function k(e,t){if(t.isMigratedLocally===!1)return o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["markCutoverThreadAsNotMigratedLocally failed because thread is already unmigrated"]))),o("MAWDexieTable").dexieResolve(t);var n=babelHelpers.extends({},t,{isMigratedLocally:!1});return e.threads.put(n).then(function(){return n})}function I(e,t){return e.threads.put(t).then(r("emptyFunction"))}function T(e,t,n,r,a){return I(e,babelHelpers.extends({},t,{newestMsgTs:(a==null?void 0:a.ts)==null?t.newestMsgTs:o("WATimeUtils").castUnixTimeToMillisTime(a.ts),oldestMsg:r==null?void 0:r.msgId}))}l.getThreadByDeduplicationKey=c,l.getThread=d,l.getThreads=m,l.getThreadPrimaryId=p,l.deleteThread=f,l.getAllThreadsForUser=g,l.getAllThreadsForUsers=h,l.needsRetroactiveReadReceiptInThread=C,l.bulkNeedsRetroactiveReadReceiptInThread=b,l.archiveThreads=v,l.subscribeToThreads=S,l.unarchiveThreads=R,l.unsubscribeFromThreads=L,l.markCutoverThreadAsMigratedLocally=E,l.markCutoverThreadAsNotMigratedLocally=k,l.updateThread=I,l.updateThreadMsgsForUndefinedOldestOrNewestMsgs=T}),98);
__d("MAWDbXMATxns",["MAWDbChunkTxns","MAWDbMediaTxns","MAWDbMsg","MAWDbMsgTxns","MAWDbThreadTxns","MAWDexieTable","MAWJidUtils","MAWXMAUtils","WAResultOrError","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return e.xma.bulkGet(t)}function s(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.xma.get({xmaId:t})}function u(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.xma.where("associatedMessageId").equals(t).first()}function c(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.xma.where("externalId").equals(t.externalId).filter(function(e){return e.author===t.author&&e.threadJid===t.chat}).first()}function d(e,t){return c(e,t).then(function(t){return t==null?o("WAResultOrError").makeError("missing"):o("MAWDexieTable").dexieAll([o("MAWDbMediaTxns").getMediaForXMA(e,t),o("MAWDbMsgTxns").maybeGetMsg(e,t.associatedMessageId)]).then(function(e){var n=e[0],r=e[1];if(!n.success)return o("WAResultOrError").makeError("missing");var a=n.value,i=a.defaultPreview,l=a.favicon,s=a.header,u=a.previews;return o("WAResultOrError").makeResult({associatedMessage:r,defaultPreview:i,favicon:l,header:s,previews:u,xma:t})})})}function m(e,t){return u(e,t).then(function(t){if(t!=null)return o("MAWDbMsgTxns").maybeGetMsg(e,t.msgId)})}function p(e,t){if(t.length===0)return o("MAWDexieTable").dexieResolve([]);var n=t.filter(o("MAWDbMsg").isXMAMsg).map(function(e){return o("MAWJidUtils").maybeToProtocolMsgId(e.author,e.threadJid,e.externalId)}).filter(Boolean),r=n.map(function(t){return c(e,t)});return o("MAWDexieTable").dexieAll(r).then(function(e){return e.filter(Boolean)})}function _(e,t){return e.xma.where("associatedMessageId").anyOf(t).toArray().then(function(e){var t=e.filter(function(e){return e.msgId!=null&&r("gkx")("9841")?e.targetType!=null:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(e.targetType)});return t.reduce(function(e,t){return t.associatedMessageId!=null&&t.msgId!=null?e.set(t.associatedMessageId,t.msgId):e},new Map)})}function f(e,t){return e.xma.where("associatedMessageId").equals(t).first()}function g(e,t){return e.xma.where("associatedMessageId").equals(t).first().then(function(t){if(t!=null){var n=o("MAWJidUtils").maybeToProtocolMsgId(t.author,t.threadJid,t.externalId);if(n!=null)return o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(e,n)}})}function h(e,t){return f(e,t).then(function(t){return t==null?o("WAResultOrError").makeResult():o("MAWDexieTable").dexieAll([o("MAWDbMediaTxns").getMediaForXMA(e,t),o("MAWDbMsgTxns").maybeGetMsg(e,t.associatedMessageId)]).then(function(e){var n=e[0],r=e[1];if(!n.success)return o("WAResultOrError").makeError("missing");var a=n.value,i=a.defaultPreview,l=a.favicon,s=a.header,u=a.previews;return o("WAResultOrError").makeResult({associatedMessage:r,defaultPreview:i,favicon:l,header:s,previews:u,xma:t})})})}function y(e,t,n){return o("MAWDbThreadTxns").getThread(e,n).then(function(n){if(n.success){var r=n.value;if(t==null)return o("MAWDexieTable").dexieResolve();var a={author:t.author,chat:r.jid,externalId:t.externalId};return o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(e,a)}})}function C(e,t){return c(e,t).then(function(t){if(t==null)return o("MAWDexieTable").dexieResolve();if(!o("MAWXMAUtils").isXMAStoryReply(t.targetType))return o("MAWDbMediaTxns").maybeGetMediaFromMediaId(e,t.defaultPreviewMediaId).then(function(n){return n==null?{hasMedia:!1,xma:t}:o("MAWDexieTable").dexieAll([n,o("MAWDbChunkTxns").hasMediaChunk(e,n.hashedPlaintextHash)]).then(function(e){var n=e[0],r=e[1];return{hasMedia:r,previewMedia:n,xma:t}})})})}function b(e,t){return e.xma.where("externalId").anyOf(t).toArray()}l.bulkGetXMAs=e,l.maybeGetXMAFromXMAId=s,l.maybeGetXMAFromAssociatedMsgId=u,l.maybeGetXMAFromProtocolMsgId=c,l.maybeGetXMAPayloadFromProtocolMsgId=d,l.getDbXMAMsgFromAssociatedMsgId=m,l.getXMAFromMsgs=p,l.getXMAMsgIdsFromAssociatedMsgIds=_,l.maybeGetDbXMAMsgByAssociatedMsgId=g,l.maybeGetXMAPayloadFromAssociatedMsgId=h,l.maybeGetAssociatedXMAMsg=y,l.maybeGetXMAAndDefaultPreviewMediaFromProtocolMsg=C,l.getMultipleXMAByExternalId=b}),98);
__d("MAWMessageHasNonNullServerTsOnReceivedAckValidator",["MAWAckLevel","MAWTransactionMode","MAWTransactor"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MAWTransactor").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"isMessageHasNonNullServerTsOnReceivedAckValidator",function(e){return function(t){return e.messages.get(t).then(function(e){return e==null||e.ack<o("MAWAckLevel").ACK.sent?{key:t,result:"skipped"}:e.serverTs!=null?{key:t,result:"valid"}:{description:"Message with "+e.ack+" ack has empty serverTs.",key:t,result:"invalid"}})}}),s={description:"MAWMessageHasNonNullServerTsOnReceivedAckValidator",isValid:e,table:"messages",type:["add","put"]};l.MAWMessageHasNonNullServerTsOnReceivedAckValidator=s}),98);
__d("MAWMessageHasUniqueExternalIdValidator",["MAWDexieTable","MAWTransactionMode","MAWTransactor","WAStanzaUtils","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("3288"),s=o("MAWTransactor").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"isMessageWithUniqueExternalIdValidator",function(e){return function(t){return e.messages.get(t).then(function(n){var r=n==null?void 0:n.externalId;return n==null||r==null?o("MAWDexieTable").dexieResolve({key:t,result:"skipped"}):e.messages.where("externalId").equals(o("WAStanzaUtils").toStanzaId(r)).filter(function(e){return e.author===n.author&&e.threadJid===n.threadJid}).toArray().then(function(e){if(e.length===1)return{key:t,result:"valid"};var r=u(t,n,e);return{description:r,key:t,result:"invalid"}})})}});function u(e,t,n){var r,o=n.every(function(e){return e.serverTs===t.serverTs}),a=n.filter(function(t){return t.rowId!==e}),i="Message has duplicate externalId."+("New message type: "+((r=t.type)!=null?r:"")+". ")+("Existing message types: "+a.map(function(e){return e.type}).join(", ")+". ")+("Messages have same serverTS: "+o.toString()+". ")+("Message has null protocolMsgId: "+(t.protocolMsgId==null).toString()+". ");return i}var c={description:"MAWMessageHasUniqueExternalIdValidator",isValid:s,sampleRate:e,table:"messages",type:["add","put"]};l.MAWMessageHasUniqueExternalIdValidator=c}),98);
__d("MAWParticipantMatchOneOnOneThreadValidator",["MAWIndexedDb","MAWTransactionMode","MAWUserJidWrapper","WAJids","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("3121"),s=o("MAWIndexedDb").makeMsgrTransactor({participants:o("MAWTransactionMode").READONLY},"isParticipantMatchingOneOnOneThreadValidator",function(e){return function(t){return e.participants.get(t).then(function(e){return e==null?{key:t,result:"skipped"}:o("WAJids").switchOnMsgrChatJidType(e.threadJid,{group:function(){return{key:t,result:"skipped"}},user:function(r){return e.userJid!==r&&e.userJid!==o("MAWUserJidWrapper").getMyUserJid()?{description:"Participants added to 1:1 thread is neither self or the other user",key:t,result:"invalid"}:{key:t,result:"valid"}}})})}}),u={description:"MAWParticipantMatchOneOnOneThreadValidator",isValid:s,sampleRate:e,table:"participants",type:["add","put"]};l.MAWParticipantMatchOneOnOneThreadValidator=u}),98);
__d("MAWReactionHasUniqueProtocolMsgIdValidator",["MAWDexieTable","MAWTransactionMode","MAWTransactor","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MAWTransactor").makeMsgrTransactor({reactions:o("MAWTransactionMode").READONLY},"isReactionWithUniqueProtocolMsgIdValidator",function(e){return function(t){return e.reactions.get(t).then(function(n){var r=n==null?void 0:n.externalId;return r==null?o("MAWDexieTable").dexieResolve({key:t,result:"skipped"}):e.reactions.where("externalId").equals(o("WAStanzaUtils").toStanzaId(r)).filter(function(e){return e.threadJid===(n==null?void 0:n.threadJid)}).toArray().then(function(e){if(e.length===1)return{key:t,result:"valid"};var r=e.find(function(e){return e.author!==(n==null?void 0:n.author)})!=null;return{description:"Reaction has duplicate protocolMsgId, has existing with different author: "+r.toString(),key:t,result:"invalid"}})})}}),s={description:"MAWReactionHasUniqueProtocolMsgIdValidator",isValid:e,table:"reactions",type:["add","put"]};l.MAWReactionHasUniqueProtocolMsgIdValidator=s}),98);
__d("MAWDbMutationMiddleware",["FBLogger","MAWDbMiddlewareMutations","getErrorSafe","vulture"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{create:function(n){return babelHelpers.extends({},n,{table:function(a){var t=n.table(a);try{return babelHelpers.extends({},t,{get:function(r){return t.get(r).then(function(t){if(t!=null)return o("MAWDbMiddlewareMutations").getValue(t,a,e)})},getMany:function(r){return t.getMany(r).then(function(t){return t.map(function(t){if(t!=null)return o("MAWDbMiddlewareMutations").getValue(t,a,e)})})},mutate:function(r){var n=null;switch(r.type){case"add":case"put":n=r.values.map(function(t){return o("MAWDbMiddlewareMutations").mutateValue(t,a,e)});break;case"delete":break;case"deleteRange":break}return r.type==="delete"||r.type==="deleteRange"||n==null?t.mutate(r):(r.values=n,t.mutate(r).then(function(e){return e}))},openCursor:function(r){return t.openCursor(r).then(function(t){return t==null||t.value==null?t:u(t,a,e)})},query:function(r){return t.query(r).then(function(t){if(t.result.length===0||typeof t.result[0]!="object")return t;var n=t.result.map(function(t){return o("MAWDbMiddlewareMutations").getValue(t,a,e)});return t.result=n,t})}})}catch(e){var i=r("getErrorSafe")(e);return r("FBLogger")("messenger_web").catching(i).mustfix("Error applying MAWDbMiddleware"),t}}})},name:"MAWDbMutationMiddleware",stack:"dbcore"}}function s(){return{create:function(t){return babelHelpers.extends({},t,{table:function(n){var e=t.table(n);try{return babelHelpers.extends({},e,{get:function(r){return e.get(r).then(function(e){return o("MAWDbMiddlewareMutations").getVaultedValue(e,n)})},getMany:function(a){return e.getMany(a).then(function(e){return r("vulture")("SMxI1wxhqOhNsUbqaKEGeOiO21w="),e.map(function(e){return o("MAWDbMiddlewareMutations").getVaultedValue(e,n)})})},mutate:function(r){return r.type==="delete"||r.type==="deleteRange"||(r.values=r.values.map(function(e){return o("MAWDbMiddlewareMutations").mutateVaultedValue(e,n)})),e.mutate(r)},openCursor:function(r){return e.openCursor(r).then(function(e){return e==null||e.value==null?e:c(e,n)})},query:function(r){return e.query(r).then(function(e){return e.result.length===0||typeof e.result[0]!="object"?e:babelHelpers.extends({},e,{result:e.result.map(function(e){return o("MAWDbMiddlewareMutations").getVaultedValue(e,n)})})})}})}catch(t){var a=r("getErrorSafe")(t);return r("FBLogger")("messenger_web").catching(a).mustfix("Error applying MAWDbMiddleware"),e}}})},name:"getMAWVaultMiddleware",stack:"dbcore"}}function u(e,t,n){var r;return Object.create(e,{continue:{get:function(){return e.continue}},continuePrimaryKey:{get:function(){return e.continuePrimaryKey}},key:{get:function(){return e.key}},primaryKey:{get:function(){return e.primaryKey}},start:{value:function(i){return e.start(function(){r=o("MAWDbMiddlewareMutations").getValue(e.value,t,n);try{e.value=r}catch(e){}i()})}},value:{get:function(){return r}}})}function c(e,t){var n;return Object.create(e,{continue:{get:function(){return e.continue}},continuePrimaryKey:{get:function(){return e.continuePrimaryKey}},key:{get:function(){return e.key}},primaryKey:{get:function(){return e.primaryKey}},start:{value:function(a){return e.start(function(){n=o("MAWDbMiddlewareMutations").getVaultedValue(e.value,t);try{e.value=n}catch(e){}a()})}},value:{get:function(){return n}}})}l.getMAWDbMutationMiddleware=e,l.getMAWVaultMiddleware=s}),98);
__d("MAWDbEncryptObjContent",["MAWKeychainNaClCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return o("MAWKeychainNaClCrypto").encryptTweetNaClArrayBuffer(e,t,n)}l.encryptContent=e}),98);
__d("MAWXMACTAUtil",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.actionUrl,n=e.buttonType,r=e.ctaType,o=e.nativeUrl,a=e.title;return{actionUrl:t,buttonType:n,ctaType:r,nativeUrl:o,title:a}}function l(e){var t=e.actionUrl,n=e.buttonType,r=e.ctaType,o=e.nativeUrl,a=e.title;return{actionUrl:t,buttonType:n,ctaType:r,nativeUrl:o,title:a}}i.toMAWCTAEncode=e,i.fromMAWCTAEncode=l}),66);
__d("WAServerSync.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({SET:0,REMOVE:1}),u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={};u.name="SyncdVersion",u.internalSpec={version:[1,(e=o("WAProtoConst")).TYPES.UINT64]},c.name="ExitCode",c.internalSpec={code:[1,e.TYPES.UINT64],text:[2,e.TYPES.STRING]},d.name="SyncdIndex",d.internalSpec={blob:[1,e.TYPES.BYTES]},m.name="SyncdValue",m.internalSpec={blob:[1,e.TYPES.BYTES]},p.name="KeyId",p.internalSpec={id:[1,e.TYPES.BYTES]},_.name="SyncdRecord",_.internalSpec={index:[1,e.TYPES.MESSAGE,d],value:[2,e.TYPES.MESSAGE,m],keyId:[3,e.TYPES.MESSAGE,p]},f.name="ExternalBlobReference",f.internalSpec={mediaKey:[1,e.TYPES.BYTES],directPath:[2,e.TYPES.STRING],handle:[3,e.TYPES.STRING],fileSizeBytes:[4,e.TYPES.UINT64],fileSha256:[5,e.TYPES.BYTES],fileEncSha256:[6,e.TYPES.BYTES]},g.name="SyncdSnapshot",g.internalSpec={version:[1,e.TYPES.MESSAGE,u],records:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,_],mac:[3,e.TYPES.BYTES],keyId:[4,e.TYPES.MESSAGE,p]},h.name="SyncdMutations",h.internalSpec={mutations:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,y]},y.name="SyncdMutation",y.internalSpec={operation:[1,e.TYPES.ENUM,s],record:[2,e.TYPES.MESSAGE,_]},C.name="SyncdPatch",C.internalSpec={version:[1,e.TYPES.MESSAGE,u],mutations:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,y],externalMutations:[3,e.TYPES.MESSAGE,f],snapshotMac:[4,e.TYPES.BYTES],patchMac:[5,e.TYPES.BYTES],keyId:[6,e.TYPES.MESSAGE,p],exitCode:[7,e.TYPES.MESSAGE,c],deviceIndex:[8,e.TYPES.UINT32],clientDebugData:[9,e.TYPES.BYTES]},l.SyncdMutation$SyncdOperation=s,l.SyncdVersionSpec=u,l.ExitCodeSpec=c,l.SyncdIndexSpec=d,l.SyncdValueSpec=m,l.KeyIdSpec=p,l.SyncdRecordSpec=_,l.ExternalBlobReferenceSpec=f,l.SyncdSnapshotSpec=g,l.SyncdMutationsSpec=h,l.SyncdMutationSpec=y,l.SyncdPatchSpec=C}),98);
__d("MAWDbObjDecode",["FBLogger","MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloCollectionVersionsTableSchema.pb","MAWArmadilloDeletedMessagesTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloEBMsgRangesTableSchema.pb","MAWArmadilloEditMsgHistoryTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloMissingKeysTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPendingMutationsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloPollTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloReceiverFetchInfoTableSchema.pb","MAWArmadilloSyncActionsTableSchema.pb","MAWArmadilloSyncKeysTableSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWMsgType","MAWODSProxy","MAWXMACTAUtil","WAOdsEnums","WAServerSync.pb","decodeProtobuf"],(function(t,n,r,o,a,i,l){var e={appData:function(t){return I(t)},appMeta:function(t){return T(t)},chunk:function(t){return D(t)},collectionVersions:function(t){return O(t)},deletedMessages:function(t){return _(t)},deviceChangeAlerts:function(t){return u(t)},dualSendMedia:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},dyiBatch:function(t){return N(t)},ebMessageRestoreTasks:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ebMsgRanges:function(t){return M(t)},ebRestoreQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ebUploadQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},editMsgHistory:function(t){return q(t)},encryptionMetaV3:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ephemeralSettings:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},existingUsers:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsBackloggedMessages:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsEncryptionMeta:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsIndexV3:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsPurgeBacklog:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsPurgeThreadBacklog:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},groupInfo:function(t){return h(t)},groupInvites:function(t){return L(t)},historySyncQRCodeData:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},historySyncQRCodeSecretKey:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},igMessageAuxiliaryInfo:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},isDualSend:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},media:function(t){return $(t)},mediaBackup:function(t){return x(t)},mediaKeys:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},messages:function(t){return p(t)},missingKeys:function(t){return A(t)},participants:function(t){return R(t)},pendingMessageStanzaQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},pendingMutations:function(t){return F(t)},pendingReceipts:function(t){return v(t)},pendingStanzas:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},personalSenderKeyStatuses:function(t){return k(t)},poll:function(t){return V(t)},reactions:function(t){return P(t)},receipts:function(t){return b(t)},receiverFetchInfo:function(t){return U(t)},sentBytesCache:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},staleQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},syncActions:function(t){return w(t)},syncKeys:function(t){return B(t)},tasks:function(t){return E(t)},threads:function(t){return S(t)},unrenderedMessages:function(t){return f(t)},xma:function(t){return W(t)}};function s(t,n){var o=null;if(Object.prototype.hasOwnProperty.call(e,n))o=e[n](t);else throw r("FBLogger")("messenger_web").mustfixThrow("not a valid table name");return o}function u(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,e);return{action:t.action,deviceJid:t.deviceJid,identity:t.identity,isArchived:t.isArchived,latitude:t.latitude,location:t.location,loggedOut:t.loggedOut,longitude:t.longitude,model:t.model,platform:t.platform,ts:t.ts}}function c(e){var t=e.quote,n;if(t!=null){if(t.content==null)throw r("FBLogger")("messenger_web").mustfixThrow("QuotedMsgContent missing upon decoding");var o=t.content,a=o.author,i=o.expirationTs,l=o.externalId,s=o.mediaId,u=o.msgContent,c=o.msgId,d=o.plaintextHash,m=o.sourceId,p=o.specialTextSize,_=o.ts,f=o.type,g=o.xmaMessageType;n={content:babelHelpers.extends({},t.content,{author:a,expirationTs:i,externalId:l,mediaId:s,msgContent:u,msgId:c,plaintextHash:d,sourceId:m,specialTextSize:p,ts:_,type:f,xmaMessageType:g}),remoteJid:t.remoteJid}}return n}function d(e){return e==null?e:new Uint8Array(e)}function m(e){return e==null||e.length===0?new Set:new Set(e)}function p(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,e),n=t.msgContent;if(t.type===o("MAWMsgType").MSG_TYPE.FUTUREPROOF){if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("MsgContent missing upon decoding futureproof message");n.subtype=n.subtype}var a=c(t),i=g(t.reportingMeta);return babelHelpers.extends({},t,{msgContent:n,quote:a,reportingMeta:i})}function _(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloDeletedMessagesTableSchema.pb").DeletedMessagesTableSchemaProtoSpec,e);return babelHelpers.extends({},t)}function f(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,e),n=c(t),r=g(t.reportingMeta);return babelHelpers.extends({},t,{quote:n,reportingMeta:r})}function g(e){if(e!=null)return{frankingKey:e.frankingKey!=null?new Uint8Array(e.frankingKey):e.frankingKey,frankingTag:e.frankingTag!=null?new Uint8Array(e.frankingTag):e.frankingTag,frankingVersion:e.frankingVersion,reportingContent:e.reportingContent,reportingTag:e.reportingTag!=null?new Uint8Array(e.reportingTag):e.reportingTag}}function h(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,e);return{creationTs:t.creationTs,creator:t.creator,inviter:t.inviter,memberAddMode:t.memberAddMode,msgExpiration:t.msgExpiration,name:t.name,nameOwner:t.nameOwner,nameTs:t.nameTs,participantVersion:t.participantVersion}}function y(e){return e.length===0?null:new Map(e.map(function(e){var t=e.deviceJid;if(t==null||e.serializedPubKey==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected deviceJid or serializedPubKey are missing ");var n=new Uint8Array(e.serializedPubKey),o=d(e.baseKey),a={baseKey:o,pubKey:n};return[t,a]}))}function C(e){return e==null?null:new Map(e.map(function(e){var t;if(e.deviceJid==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected deviceJID is missing ");return[e.deviceJid,(t=e.count)!=null?t:0]}))}function b(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,e),n=t.recipientDevices,r=m(n);return{permittedIdentitiesPerDevice:y(t.permittedIdentitiesPerDevice),recipientDevices:r,retryCountsPerDevice:C(t.retryCountsPerDevice)}}function v(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,e)}function S(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,e);return{archived:t.archived,cannotReplyReason:t.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:t.didInsertDualThreadCutoverAdminMsg,folder:t.folder,isMigratedLocally:t.isMigratedLocally,lastReadMsg:t.lastReadMsg,lastReadMsgReceiptSent:t.lastReadMsgReceiptSent,muteCallsExpireTimeMs:t.muteCallsExpireTimeMs,muteExpireTimeMs:t.muteExpireTimeMs,newestMsg:t.newestMsg,newestMsgTs:t.newestMsgTs,oldestMsg:t.oldestMsg,optimisticThreadKey:t.optimisticThreadKey,snippetMsg:t.snippetMsg,snippetMsgTs:t.snippetMsgTs}}function R(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,e)}function L(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,e)}function E(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,e)}function k(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,e),n=t.hasSenderKey,r=m(n);return{hasSenderKey:r,rotateSenderKey:t.rotateSenderKey,senderKeyId:t.senderKeyId,senderKeyTs:t.senderKeyTs}}function I(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,e);return{ack:t.ack,contents:t.contents,permittedIdentitiesPerDevice:y(t.permittedIdentitiesPerDevice),recipientDevices:new Set(t.recipientDevices),sendPartial:t.sendPartial,ts:t.ts}}function T(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,e)}function D(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,e)}function x(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,e)}function $(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,e),n,a=t.mediaEntries;return a==null?n=new Map:n=new Map(a.map(function(e){if(e.msgId==null||e.mediaEntryData==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected msgId or mediaEntryData are missing ");return[e.msgId,new Uint8Array(e.mediaEntryData)]})),{accessibilitySummaryText:t.accessibilitySummaryText,isVideoGif:t.isVideoGif,mediaEntries:n,mediaType:t.mediaType,plaintextHash:t.plaintextHash,size:t.size,ts:t.ts,validatedAudioInfo:t.validatedAudioInfo,validatedDocumentFileInfo:t.validatedDocumentFileInfo,validatedImageInfo:t.validatedImageInfo,validatedResult:t.validatedResult,validatedVideoInfo:t.validatedVideoInfo}}function P(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,e);return t.ts!=null&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MIGRATE_REACTION_TS_AS_INDEX,key:"reaction_ts_encrypted"}),babelHelpers.extends({ack:t.ack,author:t.author,groupingKey:t.groupingKey,reaction:t.reaction,reactToAuthor:t.reactToAuthor,senderTimestampMs:t.senderTimestampMs},t.ts!=null?{ts:t.ts}:{})}function N(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,e);return{isThread:t.isThread,numMessages:t.numMessages,numMessagesRestored:t.numMessagesRestored,numThreadsRestored:t.numThreadsRestored,oldestTs:t.oldestTs,qplFlowDescriptor:t.qplFlowDescriptor,qplInstanceKeyE2E:t.qplInstanceKeyE2E,qplInstanceKeyForThread:t.qplInstanceKeyForThread,threadId:t.threadId}}function M(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloEBMsgRangesTableSchema.pb").EBMsgRangesTableSchemaProtoSpec,e);return{creationTime:t.creationTime,maxMsgExternalId:t.maxMsgExternalId,maxMsgSortOrderMs:t.maxMsgSortOrderMs,minMsgExternalId:t.minMsgExternalId,minMsgSortOrderMs:t.minMsgSortOrderMs}}function w(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloSyncActionsTableSchema.pb").SyncActionsTableSchemaProtoSpec,e);return{binarySyncData:t.binarySyncData,keyId:t.keyId,timestamp:t.timestamp,valueMac:t.valueMac,version:t.version}}function A(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMissingKeysTableSchema.pb").MissingKeysTableSchemaProtoSpec,e),n;return t.deviceResponses==null?n=new Map:n=new Map(t.deviceResponses.map(function(e){if(e.deviceId==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected deviceId is missing");return[e.deviceId,e.deviceResponse]})),{deviceResponses:n,keyId:t.keyId,timestamp:t.timestamp}}function F(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloPendingMutationsTableSchema.pb").PendingMutationsTableSchemaProtoSpec,e),n;switch(t.operation){case o("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.SET:n=o("WAServerSync.pb").SyncdMutation$SyncdOperation.SET;break;case o("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.REMOVE:n=o("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE;break;default:throw r("FBLogger")("messenger_web").mustfixThrow("operation missing when decoding PendingMutation")}return{binarySyncAction:t.binarySyncAction,operation:n,timestamp:t.timestamp,version:t.version}}function O(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloCollectionVersionsTableSchema.pb").CollectionVersionsTableSchemaProtoSpec,e);return{finiteFailureStartTime:t.finiteFailureStartTime,isCollectionInMacMismatchFatal:t.isCollectionInMacMismatchFatal,isCollectionLthashInconsistent:t.isCollectionLthashInconsistent,ltHash:t.ltHash,state:t.state,version:t.version}}function B(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloSyncKeysTableSchema.pb").SyncKeysTableSchemaProtoSpec,e);return{fingerprint:t.fingerprint,keyData:t.keyData,timestamp:t.timestamp}}function W(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,e);return{author:t.author,ctas:t.ctas.map(function(e){return o("MAWXMACTAUtil").fromMAWCTAEncode(e)}),defaultCTA:t.defaultCTA==null?t.defaultCTA:o("MAWXMACTAUtil").fromMAWCTAEncode(t.defaultCTA),defaultPreviewMediaPlaintextHash:t.defaultPreviewMediaPlaintextHash,faviconPlaintextHash:t.faviconPlaintextHash,headerMediaPlaintextHash:t.headerMediaPlaintextHash,headerTitle:t.headerTitle,isTombstoned:t.isTombstoned,maxSubtitleNumOfLines:t.maxSubtitleNumOfLines,maxTitleNumOfLines:t.maxTitleNumOfLines,msgId:t.msgId,overlayDescription:t.overlayDescription,overlayIconGlyph:t.overlayIconGlyph,overlayTitle:t.overlayTitle,previewMediaIds:t.previewMediaIds,subtitleText:t.subtitleText,targetId:t.targetId,targetType:t.targetType,targetUsername:t.targetUsername,threadJid:t.threadJid,titleText:t.titleText,xmaLayoutType:t.xmaLayoutType}}function q(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloEditMsgHistoryTableSchema.pb").EditMsgHistoryTableSchemaProtoSpec,e);return{author:t.author,editExternalId:t.editExternalId,editTs:t.editTs,msgContent:t.msgContent,sendStatus:t.sendStatus,specialTextSize:t.specialTextSize}}function U(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReceiverFetchInfoTableSchema.pb").ReceiverFetchInfoTableSchemaProtoSpec,e);return{accessibilitySummaryText:t.accessibilitySummaryText,mimetype:t.mimetype,previewHeight:t.previewHeight,previewUrl:t.previewUrl,previewUrlExpirationTimestampMs:t.previewUrlExpirationTimestampMs,previewWidth:t.previewWidth,type:t.type}}function V(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloPollTableSchema.pb").PollTableSchemaProtoSpec,e),n=new Map(t.pollOptions.map(function(e){var t=e.pollOptionHash;if(t==null||e.pollOption==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected pollOptionHash or pollOption is missing");return[t,{optionText:e.pollOption.optionText,voteAuthors:new Set(e.pollOption.voteAuthors)}]}).filter(Boolean)),a=new Map(t.latestSenderTimestampsMs.map(function(e){if(e.author==null||e.latestSenderTimestampMs==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected author or latestSenderTimestampMs are missing");return[e.author,e.latestSenderTimestampMs]}));return{encKey:t.encKey,latestSenderTimestampsMs:a,pollAuthor:t.pollAuthor,pollOptions:n,pollParticipantCount:t.pollParticipantCount,pollState:t.pollState,selectableOptionsCount:t.selectableOptionsCount,title:t.title}}l.decodeDbObj=s}),98);
__d("WASyncdKeyTypes",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e){return e}function u(e){return e}i.toSyncKeyId=e,i.fromSyncKeyId=l,i.toSyncKeyData=s,i.fromSyncKeyData=u}),66);
__d("MAWDbObjEncode",["FBLogger","MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloDeletedMessagesTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloEBMsgRangesTableSchema.pb","MAWArmadilloEditMsgHistoryTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloPollTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloReceiverFetchInfoTableSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWMsgType","MAWXMACTAUtil","WASyncdKeyTypes","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e=["ack","altIndex","collapsibleId","externalId","messageDeleteTs","messageExpirationTs","msgId","pollStanzaId","protocolMsgId","quoteExpirationTs","quoteExternalId","revokedExternalId","rowId","serverTs","sortOrderMs","threadJid","unsendMsgContentDeleteTs"],s=["author","chat","externalId","rowId"],u={appData:k,appMeta:I,chunk:T,deletedMessages:_,deviceChangeAlerts:c,dualSendMedia:d,dyiBatch:P,ebMessageRestoreTasks:d,ebMsgRanges:N,ebRestoreQueue:d,ebUploadQueue:d,editMsgHistory:w,encryptionMetaV3:d,ephemeralSettings:d,existingUsers:d,ftsBackloggedMessages:d,ftsEncryptionMeta:d,ftsIndexV3:d,ftsPurgeBacklog:d,ftsPurgeThreadBacklog:d,groupInfo:g,groupInvites:R,historySyncQRCodeData:d,historySyncQRCodeSecretKey:d,igMessageAuxiliaryInfo:d,isDualSend:d,media:x,mediaBackup:D,mediaKeys:d,messages:p,participants:S,pendingMessageStanzaQueue:d,pendingReceipts:b,pendingStanzas:d,personalSenderKeyStatuses:E,poll:F,reactions:$,receipts:C,receiverFetchInfo:A,sentBytesCache:d,staleQueue:d,tasks:L,threads:v,unrenderedMessages:f,xma:M};function c(e){var t={action:e.action,deviceJid:e.deviceJid,identity:e.identity,isArchived:e.isArchived,latitude:e.latitude,location:e.location,loggedOut:e.loggedOut,longitude:e.longitude,model:e.model,platform:e.platform,ts:e.ts};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,t).readByteArrayView()}}function d(e){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for encryption")}function m(e,t){var n=null;if(Object.prototype.hasOwnProperty.call(u,t))n=u[t](e);else throw r("FBLogger")("messenger_web").mustfixThrow("not a valid table name");return n}function p(t){var n=t.ack,r=t.altIndex,a=t.collapsibleId,i=t.externalId,l=t.messageDeleteTs,s=t.messageExpirationTs,u=t.msgId,c=t.pollStanzaId,d=t.protocolMsgId,m=t.quoteExpirationTs,p=t.quoteExternalId,_=t.revokedExternalId,f=t.rowId,g=t.serverTs,h=t.sortOrderMs,y=t.threadJid,C=t.unsendMsgContentDeleteTs,b=babelHelpers.objectWithoutPropertiesLoose(t,e),v=b,S;if(v.quote==null)S=v.quote;else{var R,L={author:v.quote.content.author,expirationTs:v.quote.content.expirationTs,externalId:(R=v.quote)==null?void 0:R.content.externalId,mediaId:v.quote.content.mediaId,msgContent:v.quote.content.msgContent,msgId:v.quote.content.msgId,plaintextHash:v.quote.content.plaintextHash,sourceId:v.quote.content.sourceId,specialTextSize:v.quote.content.specialTextSize,ts:v.quote.content.ts,type:v.quote.content.type,xmaMessageType:v.quote.content.xmaMessageType},E={content:L,remoteJid:v.quote.remoteJid};S=E}var k=v.msgContent;v.type===o("MAWMsgType").MSG_TYPE.FUTUREPROOF&&(k={protobuf:v.msgContent.protobuf,subtype:v.msgContent.subtype});var I=v.ravenEphemeralType,T=v.ravenEphemeralMediaState,D=I!=null?I:null,x=T!=null?T:null,$={applicationErrorCode:v.applicationErrorCode,author:v.author,editCount:v.editCount,ephemeralCounterStarted:v.ephemeralCounterStarted,ephemeralMsgDisappeared:v.ephemeralMsgDisappeared,ephemeralSetting:v.ephemeralSetting,forwardingScore:v.forwardingScore,groupId:v.groupId,groupIndex:v.groupIndex,groupSize:v.groupSize,hdType:v.hdType,isCollapsed:v.isCollapsed,isExpiredXmaMsg:v.isExpiredXmaMsg,isForwarded:v.isForwarded,mediaId:v.mediaId,msgContent:k,originalTs:v.originalTs,quote:S,ravenEphemeralMediaState:x,ravenEphemeralType:D,receiverFetchId:v.receiverFetchId,reportingMeta:v.reportingMeta,resendCount:v.resendCount,source:v.source,specialTextSize:v.specialTextSize,ts:v.ts,type:v.type,xmaMessageType:v.xmaMessageType};return{encodedFields:$,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,$).readByteArrayView()}}function _(e){var t=e.author,n=e.chat,r=e.externalId,a=e.rowId,i=babelHelpers.objectWithoutPropertiesLoose(e,s),l={reason:String(i.reason)};return{encodedFields:l,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloDeletedMessagesTableSchema.pb").DeletedMessagesTableSchemaProtoSpec,l).readByteArrayView()}}function f(e){var t;if(e.quote==null)t=e.quote;else{var n,r={author:e.quote.content.author,expirationTs:e.quote.content.expirationTs,externalId:(n=e.quote)==null?void 0:n.content.externalId,mediaId:e.quote.content.mediaId,msgContent:e.quote.content.msgContent,msgId:e.quote.content.msgId,plaintextHash:e.quote.content.plaintextHash,sourceId:e.quote.content.sourceId,ts:e.quote.content.ts,type:e.quote.content.type,xmaMessageType:e.quote.content.xmaMessageType},a={content:r,remoteJid:e.quote.remoteJid};t=a}var i={ack:e.ack,author:e.author,ephemeralSetting:e.ephemeralSetting,groupName:e.groupName,invitedParticipantUserJid:e.invitedParticipantUserJid,mediaId:e.mediaId,msgContent:e.msgContent,quote:t,reportingMeta:e.reportingMeta,resendCount:e.resendCount,ts:e.ts,type:e.type,xmaMessageType:e.xmaMessageType};return{encodedFields:i,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,i).readByteArrayView()}}function g(e){var t={creationTs:e.creationTs,creator:e.creator,inviter:e.inviter,memberAddMode:e.memberAddMode,msgExpiration:e.msgExpiration,name:e.name,nameOwner:e.nameOwner,nameTs:e.nameTs,participantVersion:e.participantVersion};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,t).readByteArrayView()}}function h(e){return e==null?e:Array.from(e,function(e){var t=e[0],n=e[1];return{baseKey:n.baseKey,deviceJid:t,serializedPubKey:n.pubKey}})}function y(e){return e==null?null:Array.from(e,function(e){var t=e[0],n=e[1];return{count:n,deviceJid:t}})}function C(e){var t=Array.from(e.recipientDevices),n={permittedIdentitiesPerDevice:h(e.permittedIdentitiesPerDevice),recipientDevices:t,retryCountsPerDevice:y(e.retryCountsPerDevice)};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,n).readByteArrayView()}}function b(e){var t={author:e.author,deliveryReceipts:e.deliveryReceipts,externalId:e.externalId,readReceipts:e.readReceipts,thread:e.thread};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,t).readByteArrayView()}}function v(e){var t={archived:e.archived,cannotReplyReason:e.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:e.didInsertDualThreadCutoverAdminMsg,folder:e.folder,isMigratedLocally:e.isMigratedLocally,lastReadMsg:e.lastReadMsg,lastReadMsgReceiptSent:e.lastReadMsgReceiptSent,newestMsgTs:e.newestMsgTs,oldestMsg:e.oldestMsg,optimisticThreadKey:e.optimisticThreadKey,snippetMsg:e.snippetMsg,snippetMsgTs:e.snippetMsgTs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,t).readByteArrayView()}}function S(e){var t={addressable:e.addressable,deliveredWatermarkTs:e.deliveredWatermarkTs,lastReadActionTs:e.lastReadActionTs,lastReadWatermarkTs:e.lastReadWatermarkTs,type:e.type};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,t).readByteArrayView()}}function R(e){var t={caption:e.caption,inviteCode:e.inviteCode,inviteExpirationTs:e.inviteExpirationTs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,t).readByteArrayView()}}function L(e){var t={scheduledTime:e.scheduledTime};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,t).readByteArrayView()}}function E(e){var t=Array.from(e.hasSenderKey),n={hasSenderKey:t,rotateSenderKey:e.rotateSenderKey,senderKeyId:e.senderKeyId,senderKeyTs:e.senderKeyTs};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,n).readByteArrayView()}}function k(e){var t;switch(e.contents.type){case"meta_sync":{var n=[];for(var a of e.contents.actions)a.chatAction?n.push({chatAction:a.chatAction}):a.messageAction&&n.push({messageAction:a.messageAction});t={actions:n,type:"meta_sync"};break}case"backups_secrets":{t={encryptedBackupsSecrets:e.contents.encryptedBackupsSecrets,type:"backups_secrets"};break}case"sync_key_share":{var i;t={syncKeyShare:{keys:e.contents.syncKeyShare.keys,orphanKeys:(i=e.contents.syncKeyShare)==null||(i=i.orphanKeys)==null?void 0:i.map(o("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_share"};break}case"sync_key_request":{t={syncKeyRequest:{keyIds:e.contents.syncKeyRequest.keyIds.map(o("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_request"};break}default:throw e.contents.type,r("FBLogger")("messenger_web").mustfixThrow("Unknown appdata type: "+e.contents.type)}var l={ack:e.ack,contents:t,permittedIdentitiesPerDevice:h(e.permittedIdentitiesPerDevice),recipientDevices:Array.from(e.recipientDevices),sendPartial:e.sendPartial,ts:e.ts};return{encodedFields:l,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,l).readByteArrayView()}}function I(e){var t={value:e.value};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,t).readByteArrayView()}}function T(e){var t={blobData:e.blobData,mimetype:e.mimetype,plaintextHash:e.plaintextHash};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,t).readByteArrayView()}}function D(e){var t={fbid:e.fbid};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,t).readByteArrayView()}}function x(e){var t=Array.from(e.mediaEntries,function(e){var t=e[0],n=e[1];return{mediaEntryData:n,msgId:t}}),n={accessibilitySummaryText:e.accessibilitySummaryText,isVideoGif:e.isVideoGif,mediaEntries:t,mediaType:e.mediaType,plaintextHash:e.plaintextHash,size:e.size,ts:e.ts,validatedAudioInfo:e.validatedAudioInfo,validatedDocumentFileInfo:e.validatedDocumentFileInfo,validatedImageInfo:e.validatedImageInfo,validatedResult:e.validatedResult,validatedVideoInfo:e.validatedVideoInfo};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,n).readByteArrayView()}}function $(e){var t={ack:e.ack,author:e.author,groupingKey:e.groupingKey,reaction:e.reaction,reactToAuthor:e.reactToAuthor,senderTimestampMs:e.senderTimestampMs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,t).readByteArrayView()}}function P(e){var t={isThread:e.isThread,numMessages:e.numMessages,numMessagesRestored:e.numMessagesRestored,numThreadsRestored:e.numThreadsRestored,oldestTs:e.oldestTs,qplFlowDescriptor:e.qplFlowDescriptor,qplInstanceKeyE2E:e.qplInstanceKeyE2E,qplInstanceKeyForThread:e.qplInstanceKeyForThread,threadId:e.threadId};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,t).readByteArrayView()}}function N(e){var t={creationTime:e.creationTime,maxMsgExternalId:e.maxMsgExternalId,maxMsgSortOrderMs:e.maxMsgSortOrderMs,minMsgExternalId:e.minMsgExternalId,minMsgSortOrderMs:e.minMsgSortOrderMs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloEBMsgRangesTableSchema.pb").EBMsgRangesTableSchemaProtoSpec,t).readByteArrayView()}}function M(e){var t=e.ctas==null?[]:e.ctas.map(function(e){return o("MAWXMACTAUtil").toMAWCTAEncode(e)}),n={author:e.author,ctas:t,defaultCTA:e.defaultCTA==null?e.defaultCTA:o("MAWXMACTAUtil").toMAWCTAEncode(e.defaultCTA),defaultPreviewMediaPlaintextHash:e.defaultPreviewMediaPlaintextHash,faviconPlaintextHash:e.faviconPlaintextHash,headerMediaPlaintextHash:e.headerMediaPlaintextHash,headerTitle:e.headerTitle,isTombstoned:e.isTombstoned,maxSubtitleNumOfLines:e.maxSubtitleNumOfLines,maxTitleNumOfLines:e.maxTitleNumOfLines,msgId:e.msgId,overlayDescription:e.overlayDescription,overlayIconGlyph:e.overlayIconGlyph,overlayTitle:e.overlayTitle,previewMediaIds:e.previewMediaIds,subtitleText:e.subtitleText,targetId:e.targetId,targetType:e.targetType,targetUsername:e.targetUsername,threadJid:e.threadJid,titleText:e.titleText,xmaLayoutType:e.xmaLayoutType};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,n).readByteArrayView()}}function w(e){var t={author:e.author,editExternalId:e.editExternalId,editTs:e.editTs,msgContent:e.msgContent,sendStatus:e.sendStatus,specialTextSize:e.specialTextSize};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloEditMsgHistoryTableSchema.pb").EditMsgHistoryTableSchemaProtoSpec,t).readByteArrayView()}}function A(e){var t={accessibilitySummaryText:e.accessibilitySummaryText,mimetype:e.mimetype,previewHeight:e.previewHeight,previewUrl:e.previewUrl,previewUrlExpirationTimestampMs:e.previewUrlExpirationTimestampMs,previewWidth:e.previewWidth,type:e.type};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReceiverFetchInfoTableSchema.pb").ReceiverFetchInfoTableSchemaProtoSpec,t).readByteArrayView()}}function F(e){var t=Array.from(e.pollOptions,function(e){var t=e[0],n=e[1];return{pollOption:{optionText:n.optionText,voteAuthors:Array.from(n.voteAuthors)},pollOptionHash:t}}),n=Array.from(e.latestSenderTimestampsMs,function(e){var t=e[0],n=e[1];return{author:t,latestSenderTimestampMs:n}}),r={encKey:e.encKey,latestSenderTimestampsMs:n,pollAuthor:e.pollAuthor,pollOptions:t,pollParticipantCount:e.pollParticipantCount,pollState:e.pollState,selectableOptionsCount:e.selectableOptionsCount,title:e.title};return{encodedFields:r,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloPollTableSchema.pb").PollTableSchemaProtoSpec,r).readByteArrayView()}}l.encodeDbObj=m,l.encodeDbPollForEncryption=F}),98);
__d("MAWMpsMigrationRunningState",[],(function(t,n,r,o,a,i){"use strict";var e=!1;function l(){return e}function s(t){e=t}i.isMawMpsMigrationRunning=l,i.setIsMawMpsMigrationRunning=s}),66);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e,t=o("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),n=(yield(e=o("MAWKeychainCrypto")).getAccountKeys(t))[0],a=e.genBrowserEncryptionKeyString(),i=e.genDatabaseEncryptionSeed(),l=yield e.encryptDataToStringBuffer(n,i),s=o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+o("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:yield e.generateHashString(o("MAWWebInitDataHelpers").getAccountKeysString(t)[0]),appIdOrigin:r("MessengerWebInitData").appId,expiration:s,formatVersion:t,key:a,seed:l,userKeyBaseString:yield e.generateHashString(r("MessengerWebInitData").userKeyBase)}}catch(e){var u=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(u).mustfixThrow("Failed to generateNewKey")}}),s.apply(this,arguments)}l.default=e}),98);
__d("MAWEARKeychainDecryptionError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="MAWEARKeychainDecryptionError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("MAWWorkerSetupArgs",[],(function(t,n,r,o,a,i){"use strict";var e=null;function l(t){e=t}function s(){return e}function u(){e=null}i.setWorkerSetupArgs=l,i.getWorkerSetupArgs=s,i.resetWorkerSetupArgs=u}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData","Promise","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n,r,o,a,i){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,u,c,d){l===void 0&&(l=1);try{var m=yield o("MAWKeychainCrypto").getAccountKeys(l),p=yield(s||(s=n("Promise"))).all([o("MAWKeychainCrypto").importBrowserEncryptionKey(t),s.all(m.map(function(e){return o("MAWKeychainCrypto").decryptDataToArrayBuffer(e,a).catch(function(){return null})}))]),_=p[0],f=p[1],g=yield s.all(f.filter(Boolean).map(function(e){return o("MAWKeychainCrypto").genDatabaseEncryptionKey(_,e).catch(function(){return null})})),h=g.filter(Boolean);if(h.length===0)throw new(r("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:h,version:i}}catch(t){var y=null,C=null,b=o("MAWWorkerSetupArgs").getWorkerSetupArgs();(e||(e=r("ExecutionEnvironment"))).isInWorker&&b!=null&&(y=b.userKeyBase===r("MessengerWebInitData").userKeyBase,C=b.fbId===o("MAWCurrentUser").getID());var v=o("MAWWebInitDataHelpers").getAccountKeysString(l),S=v&&v[0]!=null?yield o("MAWKeychainCrypto").generateHashString(v[0]):null;throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",u!=null,v!=null,u===S,c!=null,r("MessengerWebInitData").userKeyBase!=null,c===(yield o("MAWKeychainCrypto").generateHashString(r("MessengerWebInitData").userKeyBase)),d,r("MessengerWebInitData").appId,o("MAWCurrentUser").getID()===String(r("MessengerWebInitData").userId),(e||(e=r("ExecutionEnvironment"))).isInWorker,y,C,l),t}}),c.apply(this,arguments)}l.default=u}),98);
__d("MWEARKeychainV3Errors",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="EARKeychainNotFoundError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.EARKeychainNotFoundError=e}),66);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof window!="undefined"?window:self;function s(e){var t=o("MAWLocalStorage").getStorage(),n=function(r){o("MAWLocalStorage").setItemGuarded(t,e,JSON.stringify(r))},r=function(r){window.removeEventListener("storage",r),o("MAWLocalStorage").removeItemGuarded(t,e)},a=function(t){window.addEventListener("storage",t)},i=function(n){return n!=null&&n.key===e&&typeof n.newValue=="string"?JSON.parse(n.newValue):null};return{getMessage:i,onRequestReceived:function(t){var e=function(n){var e=i(n);e!=null&&t(e)};return a(e),{release:function(){r(e)}}},sendMessage:n,stopWaitingForReply:r,waitForReply:a}}function u(t){var n=new e.BroadcastChannel(t),r=new Set;n.addEventListener("message",function(e){r.forEach(function(t){t(e)})});var o=function(t){r.add(t)},a=function(t){r.delete(t)},i=function(t){n.postMessage(JSON.stringify(t))},l=function(t){return t!=null&&typeof t.data=="string"?JSON.parse(t.data):null};return{getMessage:l,onRequestReceived:function(t){var e=function(n){var e=l(n);e!=null&&t(e)};return o(e),{release:function(){a(e)}}},sendMessage:i,stopWaitingForReply:a,waitForReply:o}}function c(t){return e.BroadcastChannel!=null?u(t):s(t)}l.getChannel=c}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t){var n=this;this.$2=null,this.$5=function(e){var t=n.$4.getMessage(e);t!=null&&t.a==="sb"&&t.t!==n.tabID()&&t.r===n.tabID()&&t.k!=null&&(n.$2&&n.$2(t.k),n.$4.stopWaitingForReply(n.$5),n.$2=null)},this.$1=e,this.$3=t!=null?t:500,this.$4=o("MWTabCommunicationChannel").getChannel(e)}var a=t.prototype;return a.tabID=function(){return r("pageID")},a.$6=function(){var e={a:"r",t:this.tabID()};this.$4.sendMessage(e)},a.listenToRequest=function(r){return this.listenToRequestAsync(function(){return(e||(e=n("Promise"))).resolve(r())})},a.listenToRequestAsync=function(t){var e=this,n=function(o){o.a==="r"&&o.t!==e.tabID()&&r("promiseDone")(t().then(function(t){var n={a:"sb",k:t,r:o.t,t:e.tabID()};e.$4.sendMessage(n)}))};return this.$4.onRequestReceived(n)},a.$7=function(){var t=this;return new(e||(e=n("Promise")))(function(e){t.$2=e,t.$4.waitForReply(t.$5),t.$6()})},a.request=function(o,a){var t=this,i,l=function(){i!=null&&r("clearTimeout")(i)};return(e||(e=n("Promise"))).race([this.$7().then(function(e){return t.$4.stopWaitingForReply(t.$5),o(e)}),new e(function(e){i=r("setTimeout")(function(){e(a()),t.$4.stopWaitingForReply(t.$5)},t.$3)})]).then(function(e){return l(),e})},t})();l.MWTabCommunication=s}),98);
__d("MWEARKeychainV3",["$InternalEnum","Deferred","ExecutionEnvironment","FBLogger","LSPlatformLsInitLog","MAWCryptoConsts","MAWCurrentUser","MAWEARGenNewKeychainCryptoKey","MAWGenKeychainCryptoKeyWithVersion","MAWQplProxy","MAWReliabilityMonitor","MWEARKeychainV3Errors","MWTabCommunication","Promise","QPLUserFlow","Random","ReStoreTabNotifier","WAArrayBufferUtils","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe","gkx","memoizeOneWithArgs","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(){return{accountKey:null,databaseEncryptionKeys:new Map,dbReady:new(r("Deferred")),latestVersion:o("MAWCryptoConsts").VERSION}},c={global_ear:u(),maw_ear:u()},d=null,m=(function(){var e=Object.keys(c).reduce(function(e,t){return e[t]="none",e},{});return{get:function(n){return e[n]},is:function(n,r){return e[n]===r},set:function(n,r){var t;e[n]=r,(t=d)==null||t.updateState()}}})();function p(e){c[e]=u(),m.set(e,"none")}function _(e,t){m.set(e,t)}function f(e){for(var t=o("Random").uint32();e.some(function(e){return e.randomisedVersion===t});)t=o("Random").uint32();return t}var g={global_ear:function(){return null},maw_ear:function(){return null}},h=function(t){return g[t]()},y=function(t,n){g[t]=function(){return n}},C=function(t,n){y(t,n),k(t).dbReady.resolve()},b={global_ear:"browserEncryptionMetaV2",maw_ear:"encryptionMetaV3"},v=r("memoizeOneWithArgs")(function(e,t){return new(o("MWTabCommunication")).MWTabCommunication("ear_keys_"+t+"_"+e)});function S(e,t,n){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a;if(n===void 0&&(n=U),r("gkx")("9396")&&r("FBLogger")("messenger_web").info("Initialise EAR keychain: %s",e),d=B(e),m.is(e,"success")&&k(e).databaseEncryptionKeys.size!==0)return o("WAResultOrError").makeResult(E(e));var i=o("MAWCurrentUser").getID(),l=r("ReStoreTabNotifier")("channel-ear-keychain-v3-"+i);l.onEventReceive("notifyEarKeychainV2",w);var u=(s||(s=r("ExecutionEnvironment"))).isInWorker?"Worker":"UI";n(e+"_ear_init_start",{string:(a={},a["initFlow_"+e+"_"+u]=t,a)});try{var c,p=yield W(l,e,void 0,n);n(e+"_ear_import_end");for(var _ of p)k(e).databaseEncryptionKeys.set(_.result.version,{dbEntry:_.entry,keys:_.result.keys});return M(e),v(e,i).listenToRequest(function(){return JSON.stringify(Array.from(k(e).databaseEncryptionKeys.entries()).map(function(e){var t=e[0],n=e[1],r=n.dbEntry,a=n.keys;return[t,{dbEntry:r,keys:a.map(function(e){return o("WAArrayBufferUtils").arrayBufferToString(e)})}]}))}),n(e+"_ear_init_end",{string_array:(c={},c[e+"_randomisedVersionKeys"+u]=L(e).map(function(e){var t=e[0],n=e[1].dbEntry;return String(n.randomisedVersion)}),c)}),m.set(e,"success"),o("WAResultOrError").makeResult(E(e))}catch(t){return m.set(e,"failure"),n(e+"_ear_init_error"),r("gkx")("9396")&&r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to setup EAR Keychain V3. Namespace: %s",e),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",r("getErrorSafe")(t))}}),R.apply(this,arguments)}function L(e){return Array.from(k(e).databaseEncryptionKeys.entries())}function E(e){return k(e).latestVersion}function k(e){return c[e]}function I(e,t){var n=t!=null?t:E(e),a=k(e).databaseEncryptionKeys.get(n);if(a==null){r("promiseDone")($(e).then(function(e){var t=e.map(function(e){return e.version}).includes(n);r("FBLogger")("messenger_web").info("EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s",t,n,e.length)}));var i=E(e),l=Array.from(k(e).databaseEncryptionKeys.keys());throw r("FBLogger")("messenger_web").mustfix("EAR Key v%s was null. Latest version: %s has key: %s, keychain length: %s, currentLatestVersion: %s, init status %s, in worker %s",n,i,k(e).databaseEncryptionKeys.get(i)==null,k(e).databaseEncryptionKeys.size,Math.max.apply(Math,l),m.get(e),(s||(s=r("ExecutionEnvironment"))).isInWorker),new(o("MWEARKeychainV3Errors")).EARKeychainNotFoundError("EAR Key "+n+" was null.")}return{dbEntry:a.dbEntry,keys:a.keys,randomisedVersion:a.dbEntry.randomisedVersion,version:n}}function T(e){return r("MAWGenKeychainCryptoKeyWithVersion")(e.key,e.seed,e.version,e.formatVersion,e.accountKeyString,e.userKeyBaseString,e.appIdOrigin)}var D=n("$InternalEnum")({UNKNOWN:-1,NO_KEY:0,EBSM_EARV2_UPGRADE:1,RANDOMISED_VERSION_UPGRADE:2,EXPIRED_KEY:3,FORCE_KEY_ROTATION:4});function x(e){if(e.length===0)return{reason:D.NO_KEY,result:!0};var t=e[e.length-1];return o("WATimeUtils").isInFuture(t.expiration)?{result:!1}:{reason:D.EXPIRED_KEY,result:!0}}function $(t){var r=N(t,"readonly");return new(e||(e=n("Promise")))(function(e,n){r.onabort=function(){return n(r.error)},r.onerror=function(){return n(r.error)};var o=r.objectStore(b[t]).getAll();o.onsuccess=function(){return e(o.result)},o.onerror=function(){return n(o.error)}}).then(P)}function P(e){var t=e.find(function(e){return e.version==null});t!=null&&r("FBLogger")("messenger_web").mustfix("EAR Keychain Rotation null version: fields nonnull: %s %s %s %s %s %s",t.id==null,t.key==null,t.seed==null,t.formatVersion==null,t.accountKeyString==null,t.userKeyBaseString==null);var n=e.filter(function(e){return e.version!=null});return n.sort(function(e,t){return e.version-t.version})}function N(e,t){var n=h(e);if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Encryption IndexDB should've been initialized. Namespace: %s",e);return n.transaction(b[e],t,{durability:"strict"})}var M=function(t){var e=Array.from(k(t).databaseEncryptionKeys.keys());e.length>0?k(t).latestVersion=Math.max.apply(Math,e):r("FBLogger")("messenger_web").mustfix("EAR latest version does not exist")},w=function(t){var e=t.namespace,o=t.version;r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{r("FBLogger")("messenger_web").info("Received key rotation notification. Namespace: %s",e),yield k(e).dbReady.getPromise();var t=(yield $(e)).find(function(e){return e.version===o});if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Notified new Ear Key but missing in DB");var n=yield T(t);k(e).databaseEncryptionKeys.set(n.version,{dbEntry:t,keys:n.keys}),M(e),r("FBLogger")("messenger_web").info("Rotated key successfully. Namespace: %s",e)}catch(t){return r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to handleNewVersion. In worker %s. Namespace: %s.",(s||(s=r("ExecutionEnvironment"))).isInWorker,e)}})())};function A(e){return m.get(e)!=="none"}function F(e){return m.get(e)}function O(e){return m.is(e,"success")?(k(e).databaseEncryptionKeys.size===0&&r("FBLogger")("messenger_web").mustfix("Keychain initialised but no keys present"),!0):!1}function B(e){return o("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("EARv3",function(){return{extra:{isKeychainInitialised:O(e).toString(),latestVersion:E(e).toString()},reason:m.get(e),state:(function(){switch(m.get(e)){case"none":return o("MAWReliabilityMonitor").HealthReportState.PENDING;case"success":return o("MAWReliabilityMonitor").HealthReportState.OK;case"failure":return o("MAWReliabilityMonitor").HealthReportState.ERROR;default:return o("MAWReliabilityMonitor").HealthReportState.UNKNOWN}})()}})}function W(e,t,n,r){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,o,a,i){var l=yield r("MAWEARGenNewKeychainCryptoKey")();i(o+"_ear_raw_key_generated");var u=yield new(e||(e=n("Promise")))(function(e,n){var u=N(o,"readwrite");u.onerror=function(){return n(u.error)},u.onabort=function(){return n(u.error)};var c=u.objectStore(b[o]).getAll();c.onerror=function(){return n(c.error)},c.onsuccess=function(){var d;i(o+"_ear_keys_fetched");var m=P(c.result),p=x(m),_=p.reason,g=p.result;if((a==null?void 0:a.forceKeyRotation)!==!0&&!g)return e(m);var h=(a==null?void 0:a.forceKeyRotation)===!0?D.FORCE_KEY_ROTATION:_!=null?_:D.UNKNOWN,y=m.map(function(e){return e.version}),C=(d=y[y.length-1])!=null?d:0;r("FBLogger")("messenger_web").info("Key rotation. EAR versions: %s. Latest version: %s. Namespace: %s, Worker: %s",y.toString(),C,o,(s||(s=r("ExecutionEnvironment"))).isInWorker);var v=babelHelpers.extends({},l,{randomisedVersion:f(m),source:h,version:C+1});i(o+"_ear_adding_new_key"),u.oncomplete=function(){m.push(babelHelpers.extends({},v,{id:v.version})),t.postMessage("notifyEarKeychainV2",{namespace:o,version:v.version}),i(o+"_ear_gen_key_end"),e(m)};var S=u.objectStore(b[o]).add(v);S.onerror=function(){return n(r("FBLogger")("messenger_web").catching(S.error).mustfixThrow("Failed to rotate EAR key"))}}});i(o+"_ear_import_start");var c=yield e.allSettled(u.map(function(e){return T(e).then(function(t){return{entry:e,result:t}})})),d=c[c.length-1];if(d.status==="rejected"){var m,p=(m=a==null?void 0:a.corruptedEARRetryCount)!=null?m:0;if(p>=1)throw d.reason;return W(t,o,{corruptedEARRetryCount:p+1,forceKeyRotation:!0},i)}return c.map(function(e){if(e.status==="fulfilled")return e.value}).filter(Boolean)}),q.apply(this,arguments)}var U=function(t,n){o("LSPlatformLsInitLog").addPoint(t,n),V(t,n)},V=function(t,n){var e=r("qpl")._(25310776,"6155");(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(e,"backend_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(e,"ui_"+t),n!=null&&r("QPLUserFlow").addAnnotations(e,n))},H=function(t,n){return v(t,n).request(function(e){var n=JSON.parse(e);return n.forEach(function(e){var n=e[0],r=e[1],a=r.keys.map(o("WAArrayBufferUtils").stringToArrayBuffer);k(t).databaseEncryptionKeys.set(n,{dbEntry:r.dbEntry,keys:a})}),M(t),m.set(t,"success"),!0},function(){return!1})};l.InitStatus=m,l.resetKeychain__TEST_ONLY_DO_NOT_USE=p,l.setInitStatus__TEST_ONLY_DO_NOT_USE=_,l.generateNewRandomisedVersionNumber=f,l.setNamespaceSourceDbWithoutMarkingDbReady=y,l.setNamespaceSourceDbAndMarkAsReady=C,l.getEncryptionKeysTabCommunication=v,l.init=S,l.getLatestVersion=E,l.getKeychain=k,l.getDbEncryptionKey=I,l.isKeychainSettled=A,l.getKeychainInitStatus=F,l.isKeychainInitialised=O,l.logMawInitPoint=V,l.importKeysFromOtherTab=H}),98);
__d("MAWDbObjEncryption",["ExecutionEnvironment","FBLogger","MAWBridge","MAWCryptoConsts","MAWDbEncryptObjContent","MAWDbObjDecode","MAWDbObjEncode","MAWDexieTable","MAWIndexedDb","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWKeychainUtil","MAWMpsMigrationRunningState","MAWQplProxy","MAWUnrecoverableDbErrors","MWEARKeychainV3","MWEARKeychainV3Errors","ODS","WABase64","WATimeUtils","getErrorSafe","gkx","isEncryptionAtRestEnabled","justknobx","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="_encryptedContent",c=new Set(["threads","messages","participants"]);function d(e,t,n){if(!(r("isEncryptionAtRestEnabled")()||r("gkx")("23910")===!0)||!o("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(t))return e;var a=o("MAWQplProxy").startQplUserFlow(r("qpl")._(25300256,"115"),{bool:{isWorker:(s||(s=r("ExecutionEnvironment"))).isInWorker,useMawEar:o("MWEARKeychainV3").isKeychainSettled("maw_ear")},string:{pageID:r("pageID"),tableName:t}});try{var i=babelHelpers.extends({},e),l=n(o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear"),d=l.keys,m=d[0],p=l.version,_=l.randomisedVersion;o("MWEARKeychainV3").isKeychainSettled("maw_ear")===!1&&r("FBLogger")("messenger_web").mustfix("[EAR] Encrypting %s data with global ear. Transactor: %s",t,o("MAWDexieTable").getDexiePSDItem("transactorName")),a.addAnnotations({int:{keyVersion:p,randomisedVersion:_}});var f=o("MAWKeychainUtil").makeAAD(p,o("MAWCryptoConsts").CIPHER_ID),g=o("MAWDbObjEncode").encodeDbObj(e,t),h=g.encodedFields,y=g.proto;Object.keys(h).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&delete i[t]});var C=o("MAWDbEncryptObjContent").encryptContent(m,y,f);return i[u]=C,c.has(t)&&(i.updatedAt_S456130=Date.now(),i.randomisedVersion_S456130=_,i.encryptedWith_S456130=o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear",i.keyVersion_S456130=p),a==null||a.endSuccess(),i}catch(e){var b=r("getErrorSafe")(e);throw a==null||a.endFail("ear_encrypt_fail"),r("FBLogger")("messenger_web").catching(b).mustfixThrow("[%s] %s - Encrypted dexie was unable to encrypt an entity for table %s",b.name,b.message,t)}}function m(t,n,a){if(!o("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(n)||!Object.prototype.hasOwnProperty.call(t,u))return t;var i=(s||(s=r("ExecutionEnvironment"))).isInMainThread&&r("justknobx")._("3378")?null:o("MAWQplProxy").startQplUserFlow(r("qpl")._(25313004,"118"));i==null||i.addAnnotations({bool:{isWorker:(s||(s=r("ExecutionEnvironment"))).isInWorker,useMawEar:o("MWEARKeychainV3").isKeychainSettled("maw_ear")},string:{pageID:r("pageID"),tableName:n}});var l;try{var d=t[u],m=babelHelpers.extends({},t);(e||(e=o("ODS"))).bumpEntityKey(3185,"maw_db_ear_decryption","encrypted_content_type."+n+"."+(d instanceof ArrayBuffer?"ArrayBuffer":"string"));var f=d instanceof ArrayBuffer?d:o("WABase64").decodeB64(d),g=o("MAWKeychainCrypto").getKeyVersionFromCipherDataString(f),h=g.aadLengthInBytes,y=g.keyVersion,C=a(o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear",y);l=C;var b=C.dbEntry,v=C.keys,S=C.randomisedVersion;i==null||i.addAnnotations({int:{contentVersion:t==null?void 0:t.keyVersion_S456130,keyVersion:y,randomisedVersion:S},string:{encryptedWith:t==null?void 0:t.encryptedWith_S456130,randomisedVersionEncryption:t==null?void 0:t.randomisedVersion_S456130}});var R={},L,E;for(var k of v)try{L=o("MAWKeychainNaClCrypto").decryptArrayBuffer(k,f,y,b.formatVersion,h);break}catch(e){E=e}if(L==null)throw r("getErrorSafe")(E);var I=o("MAWDbObjDecode").decodeDbObj(L,n);Object.keys(I).forEach(function(e){R[e]=I[e]}),delete m[u];var T=babelHelpers.extends({},m,R);return i==null||i.endSuccess(),T}catch(e){var D,x,$;if(c.has(n)){var P;i==null||i.addAnnotations({int:{updatedAt:(P=t==null?void 0:t.updatedAt_S456130)!=null?P:-1}})}if((e instanceof o("MAWKeychainNaClCrypto").EARDecryptionError||e instanceof o("MWEARKeychainV3Errors").EARKeychainNotFoundError)&&o("MAWMpsMigrationRunningState").isMawMpsMigrationRunning()){i==null||i.addAnnotations({bool:{earDecryptionErrorSuppressed:!0}}),r("FBLogger")("messenger_web").mustfix("[EAR] Ignoring EAR decryption error during MAW->MPS migration. Table: %s.",n);return}(s||(s=r("ExecutionEnvironment"))).isInWorker&&(e instanceof o("MAWKeychainNaClCrypto").EARDecryptionError||e instanceof o("MWEARKeychainV3Errors").EARKeychainNotFoundError)&&(r("FBLogger")("messenger_web").mustfix("[EAR] Encountered EAR Error - submitting unrecoverableDbError. Table: %s.",n),i==null||i.addAnnotations({bool:{unrecoverableDbError:!0}}),o("MAWBridge").getBridge().fireAndForget("event","unrecoverableDbError",{error:new(o("MAWUnrecoverableDbErrors")).EarRuntimeError}));var N=r("getErrorSafe")(e);throw i==null||i.markError("ear_decrypt_exception",null,N),i==null||i.endFail("ear_decrypt_fail"),r("FBLogger")("messenger_web").catching(N).mustfixThrow("[%s] %s - (v2) Encrypted dexie was unable to decrypt an entity for table %s. UpdatedAt: %s. KeyStatus: %s. Signature matches: %s. Key source: %s. Using MAW EAR: %s. Worker: %s. Encrypted With: %s. PageID: %s. Source: %s",N.name,N.message,n,p(t==null?void 0:t.updatedAt_S456130),_(t,l),(t==null?void 0:t.randomisedVersion_S456130)!=null&&((D=l)==null?void 0:D.randomisedVersion)!=null?t.randomisedVersion_S456130===l.randomisedVersion:null,(x=($=l)==null?void 0:$.dbEntry.source)!=null?x:"-1",o("MWEARKeychainV3").isKeychainSettled("maw_ear"),(s||(s=r("ExecutionEnvironment"))).isInWorker,t==null?void 0:t.encryptedWith_S456130,r("pageID"),o("MAWDexieTable").getDexiePSDItem("transactorName"))}}function p(e){if(e==null)return"unknown";var t=Date.now()-e,n=Math.floor(t/(1e3*60*60*24));return n<1?"0-1 days":n<7?"1-7 days":n<14?"7-14 days":n<30?"14-30 days":"30+ days"}function _(e,t){if((e==null?void 0:e.updatedAt_S456130)==null||t==null)return null;var n=o("WATimeUtils").castToUnixTime(e.updatedAt_S456130/1e3),r=t.dbEntry.expiration-o("MAWCryptoConsts").ENC_KEY_TTL;return n===r?"same":n>r?"key_older":"key_newer"}l.ENCRYPTED_COLUMN_NAME=u,l.encryptDbObj=d,l.decryptDbObj=m}),98);
__d("MAWHMACKey",["MAWCryptoConsts","MAWDbMsgTypeVersionTxns","MAWIndexedDb","MAWKeychainUtil","MAWSubtleCrypto","MAWTransactionMode","WABase64","tweetnacl-auth"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWKeychainUtil").getBufferWithRandomValuesFromLength(o("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES);return c(e).then(function(e){return o("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",e)})}function s(e,t){var n=new TextEncoder().encode(e),a=new Uint8Array(t),i=r("tweetnacl-auth")(n,a);return o("WABase64").encodeB64UrlSafe(i)}function u(){return e().then(function(e){return o("MAWIndexedDb").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READWRITE},"generateAndInsertHMACKey",function(t){return function(){return o("MAWDbMsgTypeVersionTxns").getHMACKey(t).then(function(n){return n!=null?n:o("MAWDbMsgTypeVersionTxns").addHMACKey(t,e).then(function(){return e})})}})()})}function c(e){return o("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",e,{hash:"SHA-256",name:"HMAC"},!0,["sign"])}l.genHMACKey=e,l.hmacTweetNaCl=s,l.generateAndInsertHMACKey=u}),98);
__d("WAMsgIdToMessageKey",["WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.externalId,r=e.chat,a=o("WAJids").isAuthorMe(t),i=o("WAJids").interpretAsGroupJid(r),l=a?o("WAGlobals").getMyUserJid():t,s=r,u=i!=null?l:void 0;return{fromMe:a,id:n,remoteJid:s,participant:u}}l.msgIdToMessageKey=e}),98);
__d("WAAsConsumerApplication",["WAAssertUnreachable","WAConsumerApplication.pb","WAMsgIdToMessageKey","WAMsgType","err"],(function(t,n,r,o,a,i,l){"use strict";var e="image/jpeg",s="video/mp4",u="audio/wav",c="image/gif",d="image/webp";function m(e){switch(e.type){case o("WAMsgType").MSG_TYPE.TEXT:return p(e);case o("WAMsgType").MSG_TYPE.REACTION:return _(e);case o("WAMsgType").MSG_TYPE.REVOKED:return f(e);default:return r("WAAssertUnreachable")(e.type)}}function p(e){var t={payload:{content:{messageText:{mentionedJid:[],text:e.msgContent.content}}}};if(e.specialTextSize!=null){var n=e.specialTextSize===1?o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.SMALL:e.specialTextSize===2?o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.MEDIUM:o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.LARGE;t.metadata={specialTextSize:n}}return t}function _(e){if(e.reactToMsgId==null)throw r("err")("cannot send reaction that reacts to no message");var t=o("WAMsgIdToMessageKey").msgIdToMessageKey(e.reactToMsgId),n={groupingKey:e.groupingKey==null?void 0:e.groupingKey,key:t,senderTimestampMs:e.ts,text:e.reaction==null?void 0:e.reaction};return{payload:{content:{reactionMessage:n}}}}function f(e){var t={remoteJid:e.id.chat,fromMe:!0,id:e.revokedExternalId};return{payload:{applicationData:{revoke:{key:t}}}}}l.IMAGE_MIME_TYPE=e,l.VIDEO_MIME_TYPE=s,l.AUDIO_MIME_TYPE=u,l.GIF_MIME_TYPE=c,l.STICKER_MIME_TYPE=d,l.asConsumerApplication=m,l.encodeTextMessage=p,l.encodeReactionMessage=_}),98);
__d("MAWMediaUtils",["FBLogger","MAWDbMedia","MAWDexieTable","MAWHMACKey","MAWImageUtils","MAWMsgType","WAAsConsumerApplication","WABlobToArrayBuffer","WAGlobals","WAHashUtils","WAMsgType","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(t===void 0&&(t="media"),e){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:return t==="xma-media"?"xma-image":"image";case o("MAWDbMedia").MEDIA_TYPE.VIDEO:return"video";case o("MAWDbMedia").MEDIA_TYPE.PTT:return"ptt";case o("MAWDbMedia").MEDIA_TYPE.GIF:return"gif";case o("MAWDbMedia").MEDIA_TYPE.STICKER:return"sticker";case o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return"document";default:throw r("FBLogger")("messenger_web").mustfixThrow("get a wrong media file with type %s",e)}}function s(e){try{return o("WABlobToArrayBuffer").blobToArrayBuffer(e).then(u)}catch(e){var t=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").mustfixThrow("Got %s when convert the blob to Uint8Array",t.message)}}function u(e){return self.crypto.subtle.digest("SHA-256",e).then(function(e){return new Uint8Array(e)})}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield s(e),n=o("WAHashUtils").toPlaintextHash(t),r=_(n);return[n,r]}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield u(e),n=o("WAHashUtils").toPlaintextHash(t);return n}),p.apply(this,arguments)}function _(e){var t=o("WAGlobals").getHMACKey();return o("WAHashUtils").toHashedPlaintextHash(o("MAWHMACKey").hmacTweetNaCl(e,t))}function f(e){if(e==null)return null;var t="preview-"+o("WATimeUtils").unixTime().toString()+".jpeg";return g(e,t,"image/jpeg")}function g(e,t,n){return new File([new Blob([new Uint8Array(e)],{type:n})],t,{type:n})}function h(e,t,n){var r=function(){return n!=null?o("MAWDexieTable").dexieResolve(n.filter(function(e){return e.type!==o("WAMsgType").REVOKED&&t.msgIds.includes(e.msgId)})):e.messages.where("msgId").anyOf(t.msgIds).filter(function(e){return e.type!==o("WAMsgType").REVOKED}).toArray()};return r().then(function(e){return C(t,e)})}function y(e){return e.reduce(function(e,t){var n=t.hdType;return n!=null&&(e[t.msgId]=n),e},{})}function C(e,t){var n=t.filter(function(t){return t.type!==o("WAMsgType").REVOKED&&e.msgIds.includes(t.msgId)}),a=n.map(function(e){return e.msgId}),i=babelHelpers.extends({},e,{msgIds:a}),l=n.reduce(function(e,t){return e[t.msgId]=o("WATimeUtils").castToMillisTime(t.sortOrderMs!=null?t.sortOrderMs:t.ts*1e3),e},{});if(i=babelHelpers.extends({},i,{messagesSortOrderMs:l}),n.every(function(e){return e.type===o("WAMsgType").STICKER})){var s=o("MAWImageUtils").boundHeightWidth(i.previewHeight,i.previewWidth,o("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE),u=s.height,c=s.width;i=babelHelpers.extends({},i,{mediaType:o("MAWDbMedia").MEDIA_TYPE.STICKER,previewHeight:u,previewHeightLarge:u,previewWidth:c,previewWidthLarge:c})}var d=new Set(n.map(function(e){return e.type}));return d.forEach(function(t){t!==o("MAWMsgType").MSG_TYPE.RAVEN&&e.mediaType!==b(t)&&r("FBLogger")("messenger_web").mustfix("Message and media type mismatch: message with type %s is associated with media with type %s",t,e.mediaType)}),i}function b(e){switch(e){case o("MAWMsgType").MSG_TYPE.IMAGE:return o("MAWDbMedia").MEDIA_TYPE.IMAGE;case o("MAWMsgType").MSG_TYPE.VIDEO:return o("MAWDbMedia").MEDIA_TYPE.VIDEO;case o("MAWMsgType").MSG_TYPE.PTT:return o("MAWDbMedia").MEDIA_TYPE.PTT;case o("MAWMsgType").MSG_TYPE.GIF:return o("MAWDbMedia").MEDIA_TYPE.GIF;case o("MAWMsgType").MSG_TYPE.STICKER:return o("MAWDbMedia").MEDIA_TYPE.STICKER;case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE}}function v(e){var t,n,a=((t=e.ancillary)==null?void 0:t.gifPlayback)===!0,i=((n=e.integral)==null||(n=n.transport)==null||(n=n.ancillary)==null?void 0:n.mimetype)===o("WAAsConsumerApplication").GIF_MIME_TYPE,l=!r("gkx")("5398");return a&&(l||i)}l.getServerMediaTypeFromMediaType=e,l.hashBlob=s,l.hashArrayBuffer=u,l.genBlobHashes=c,l.genHashFromArrayBuffer=m,l.genHMACPlaintextHash=_,l.convertJpegThumbnailArrayBufferToFile=f,l.getBridgeMediaAnnotatedForDisplay=h,l.createHdTypesForBridgeMedia=y,l.annotateBridgeMediaForDisplay=C,l.getMediaTypeFromMsgType=b,l.isTransportLegacyGif=v}),98);
__d("mergeMaps",[],(function(t,n,r,o,a,i){"use strict";function e(){for(var e=new Map,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++)for(var a=n[o].keys(),i=void 0;!(i=a.next()).done;)e.set(i.value,n[o].get(i.value));return e}i.default=e}),66);
__d("MpsPreprocessor",["Promise","WAGetSafeQPLError","mergeMaps"],(function(t,n,r,o,a,i,l){"use strict";var e=["errors"],s;function u(t,a){return function(r){r.ctx.messageToQpl.all().addPoint(a+"_start");var o=r.errors,l=babelHelpers.objectWithoutPropertiesLoose(r,e),u=t(l);return u instanceof(s||(s=n("Promise")))?u.then(function(e){return i(e,o!=null?o:new Map)}):i(u,o!=null?o:new Map)};function i(e,t){return e.ctx.messageToQpl.all().addPoint(a+"_end"),e.errors.entries().forEach(function(t){var n=t[0],r=t[1];e.ctx.messageToQpl.endFail(n,a.toLowerCase()+"-error",o("WAGetSafeQPLError").getSafeQPLErrorMessage(r))}),babelHelpers.extends({},e,{errors:r("mergeMaps")(t,e.errors)})}}l.preprocessor=u}),98);
__d("MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor",["MAWDbMsgTypeVersionTxns","MAWProtobufDeserializers","MpsPreprocessor","WAGlobals","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(t){e=t}var u=o("MpsPreprocessor").preprocessor((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.ctx,r=t.payloadList,a=new Map,i=[];for(var l of r){var s,u,c=l.directive,d=l.insertionSource,m=l.message,p=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(m.payload),_=(s=p.payload().proto)==null||(s=s.event)==null?void 0:s.deviceChange;if(_==null){i.push({directive:c,insertionSource:d,message:m});continue}((u=p.proto.metadata)==null?void 0:u.senderId)!==o("WAGlobals").getMyUserJid()&&(e===null&&(e=yield o("MAWDbMsgTypeVersionTxns").getSecuritySettingForContactTxn()),e===!0&&i.push({directive:c,insertionSource:d,message:m}))}return{ctx:n,errors:a,payloadList:i}});return function(e){return t.apply(this,arguments)}})(),"maybe_drop_security_alerts");l.setCachedShouldSaveSecurityAlert=s,l.MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor=u}),98);
__d("MAWEBCombinedSwitch",["MAWEBEnabledStateManager","MAWEBLSInWorkerSwitch","MAWEBSwitch","MAWODSProxy","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this)||this,r.$MAWCombinedStateManager$p_1=t,r.$MAWCombinedStateManager$p_2=n,r.$MAWCombinedStateManager$p_3=null,r.$MAWCombinedStateManager$p_4=!1,r.$MAWCombinedStateManager$p_1.onSet(function(){r.$MAWCombinedStateManager$p_5()}),r.$MAWCombinedStateManager$p_2.onSet(function(){r.$MAWCombinedStateManager$p_5()}),r.$MAWCombinedStateManager$p_5(),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isEnabled=function(){var t=e.prototype.isEnabled.call(this);return this.$MAWCombinedStateManager$p_6(),t},n.$MAWCombinedStateManager$p_6=function(){var e=this.$MAWCombinedStateManager$p_1.isEnabled(),t=this.$MAWCombinedStateManager$p_2.isEnabled(),n=e!==t,r=e?"enabled":"disabled",a=t?"enabled":"disabled",i=n?"mismatch":"match";if(n&&!this.$MAWCombinedStateManager$p_4)this.$MAWCombinedStateManager$p_3=Date.now(),this.$MAWCombinedStateManager$p_4=!0;else if(this.$MAWCombinedStateManager$p_4&&this.$MAWCombinedStateManager$p_3!=null){var l=this.$MAWCombinedStateManager$p_3,s=Date.now()-l;this.$MAWCombinedStateManager$p_4=n,this.$MAWCombinedStateManager$p_3=n?Date.now():null;var u=this.$MAWCombinedStateManager$p_7(s);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch.sync.duration_bucket."+u});var c=n?"failed":"success";o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch.sync.result."+c})}o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch."+i+"."+r+"."+a})},n.$MAWCombinedStateManager$p_7=function(t){return t<100?"under_100ms":t<500?"100_to_500ms":t<1e3?"500ms_to_1s":t<5e3?"1s_to_5s":t<1e4?"5s_to_10s":"over_10s"},n.$MAWCombinedStateManager$p_5=function(){this.set(this.$MAWCombinedStateManager$p_1.isEnabled()&&this.$MAWCombinedStateManager$p_2.isEnabled()),this.$MAWCombinedStateManager$p_6()},t})(o("MAWEBEnabledStateManager").MAWEBEnabledStateManager),s=new e(r("MAWEBSwitch"),r("MAWEBLSInWorkerSwitch"));l.MAWCombinedStateManager=e,l.MAWEBCombinedSwitch=s}),98);
__d("WADbDeviceRegistration",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=25,s=6,u=s,c="https://reg-e2ee.facebook.com",d=r("gkx")("13108")?"https://reg-e2ee.messenger.com":c,m="https://v.whatsapp.net",p="https://reg-e2ee.instagram.com",_="/v2/fb_icdc_fetch",f="/v2/fb_register_v2",g="Device has already been registered to WA servers",h="Device registration finished successfully",y="Device registration retries failed "+s+" times. No longer attempting registration.",C="Device registration response was null",b="Current user id is zero",v="CryptoAuthToken is empty",S="CryptoAuthToken is expired",R={failed:"failed",finished:"finished"};l.MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE=e,l.MAX_DEVICE_REGISTRATION_RETRIES=s,l.MAX_ROTATE_CRYPTO_AUTH_TOKEN_RETRIES=u,l.REG_FB_DOMAIN=c,l.REG_MSGR_DOMAIN=d,l.REG_WA_DOMAIN=m,l.REG_IGD_DOMAIN=p,l.ICDC_ENDPOINT=_,l.REGISTRATION_ENDPOINT=f,l.DEVICE_ALREADY_REGISTERED=g,l.DEVICE_SUCCESSFULLY_REGISTERED=h,l.FAILED_REGISTRATION_RETRIES=y,l.NULL_RESPONSE_FROM_SERVER=C,l.DEVICE_REGISTER_ERROR_ZERO_AS_USER_ID=b,l.DEVICE_REGISTER_ERROR_EMPTY_CAT_TOKEN=v,l.DEVICE_REGISTER_ERROR_EXPIRED_CAT_TOKEN=S,l.RegistrationStatesEnum=R}),98);
__d("WAGetPlatformFromStanzaId",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{var n=31,r=BigInt(n<<17),a=BigInt(0),i=BigInt(1<<17),l=BigInt(t)&r;return l===a?"web":l===i?"mobile":"unknown"}catch(n){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""])),t,n),"error"}}l.getPlatformFromStanzaId=s}),98);
__d("WASmaxInPreKeysRotateSignedResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysRequestErrors").parseRequestErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRequestErrors:i.value})):i}l.parseRotateSignedResponseRequestError=e}),98);
__d("WASmaxInPreKeysRotateSignedResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysServerErrors").parseServerErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorServerErrors:i.value})):i}l.parseRotateSignedResponseServerError=e}),98);
__d("WASmaxInPreKeysRotateSignedResponseSuccess",["WASmaxInPreKeysIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(e,t);return r.success,r}l.parseRotateSignedResponseSuccess=e}),98);
__d("WASmaxInPreKeysRotateSignedResponseValidationError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysIdentityKeyMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxParseUtils").attrString(r.value,"text");if(!a.success)return a;var i=o("WASmaxParseUtils").attrIntRange(r.value,"code",400,499);if(!i.success)return i;var l=o("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(r.value);if(!l.success)return l;var s=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);return s.success?o("WAResultOrError").makeResult(babelHelpers.extends({errorText:a.value,errorCode:i.value,errorIdentityKeyMixin:l.value},s.value)):s}l.parseRotateSignedResponseValidationError=e}),98);
__d("WASmaxOutPreKeysRotateSignedRequest",["WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WASmaxOutPreKeysSignedPreKeyMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.signedPreKeyMixinArgs,n=o("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(o("WASmaxJsx").smax("iq",{type:"set"},o("WASmaxOutPreKeysSignedPreKeyMixin").mergeSignedPreKeyMixin(o("WASmaxJsx").smax("rotate",null),t)));return n}l.makeRotateSignedRequest=e}),98);
__d("WASmaxPreKeysRotateSignedRPC",["WAComms","WASmaxInPreKeysRotateSignedResponseRequestError","WASmaxInPreKeysRotateSignedResponseServerError","WASmaxInPreKeysRotateSignedResponseSuccess","WASmaxInPreKeysRotateSignedResponseValidationError","WASmaxOutPreKeysRotateSignedRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutPreKeysRotateSignedRequest").makeRotateSignedRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInPreKeysRotateSignedResponseSuccess").parseRotateSignedResponseSuccess(r,n);if(a.success)return{name:"RotateSignedResponseSuccess",value:a.value};var i=o("WASmaxInPreKeysRotateSignedResponseValidationError").parseRotateSignedResponseValidationError(r,n);if(i.success)return{name:"RotateSignedResponseValidationError",value:i.value};var l=o("WASmaxInPreKeysRotateSignedResponseRequestError").parseRotateSignedResponseRequestError(r,n);if(l.success)return{name:"RotateSignedResponseRequestError",value:l.value};var s=o("WASmaxInPreKeysRotateSignedResponseServerError").parseRotateSignedResponseServerError(r,n);if(s.success)return{name:"RotateSignedResponseServerError",value:s.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("RotateSigned",{Success:a,ValidationError:i,RequestError:l,ServerError:s}))}),s.apply(this,arguments)}l.sendRotateSignedRPC=e}),98);
__d("WARotateSignedPreKeyProtocol",["WACryptoManager","WAErrorMessage","WAGlobals","WAHandleFailureUtils","WAMakeSignedPreKeyMixin","WAResultOrError","WASmaxPreKeysRotateSignedRPC","WATagsLogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p=o("WATagsLogger").TAGS(["rotateSignedPreKeyProtocol"]);function _(){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){p.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start generating skey..."])));try{var t=yield o("WAGlobals").getWaOneQueue().enqueue(function(e){var t=e.cryptoManager;return o("WACryptoManager").generateSignedPreKey(t)},{operationType:"generate_signed_prekey",flush:!0,afterInit:!0});p.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["generated skey. Start rotating skey..."])));var n=yield o("WASmaxPreKeysRotateSignedRPC").sendRotateSignedRPC({signedPreKeyMixinArgs:o("WAMakeSignedPreKeyMixin").makeSignedPreKeyMixin(t)});switch(n.name){case"RotateSignedResponseValidationError":{var r=n.value,a=r.errorCode,i=r.errorText,l=r.errorIdentityKeyMixin;return p.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["ValidationError: "," ",""])),a,i),o("WAResultOrError").makeError({type:"validation-error",identity:l.elementValue})}case"RotateSignedResponseRequestError":{var _=n.value.errorRequestErrors.value.code,f=n.value.errorRequestErrors.name;return p.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["RequestError: "," ",""])),_,f),o("WAResultOrError").makeError({type:"request-error"})}case"RotateSignedResponseServerError":{var g=n.value.errorServerErrors.value.code,h=n.value.errorServerErrors.name;return p.ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["ServerError: "," ",""])),g,h),o("WAResultOrError").makeError({type:"server-error"})}default:return n.name,p.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["successfully rotated new skey"]))),o("WAResultOrError").makeResult()}}catch(e){var y=o("WAErrorMessage").maybeGetMessageFromError(e);if(y.includes("No lastSignedPrekeyId and registration"))return yield o("WAHandleFailureUtils").reregisterPhone(),o("WAResultOrError").makeError({type:"no-prekey-reregistered"});throw e}}),f.apply(this,arguments)}l.rotateSignedPreKeyProtocol=_}),98);
__d("WARotateSignedPreKey",["Promise","WAGenerateAndUploadPreKeys","WALoggerTag","WARotateSignedPreKeyProtocol","WATagsLogger","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("WATagsLogger").TAGS([r("WALoggerTag").SignedPrekeyRotation,r("WALoggerTag").SignedPrekey]);function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=yield o("WARotateSignedPreKeyProtocol").rotateSignedPreKeyProtocol();if(!(a.success||a.error.type==="no-prekey-reregistered")){if(a.error.type==="validation-error")return d.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Signed prekey failed server validation. need to upload all keys."]))),o("WAGenerateAndUploadPreKeys").generateAndUploadPreKeys(null,{reason:"signed prekey failed server validation"}).catch(function(e){d.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error while generating and uploading prekeys: ",""])),e)}),(c||(c=n("Promise"))).resolve();throw d.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["rotateSignedPreKey failed."]))),r("err")("rotateSignedPreKey RPC failed: "+a.error.type)}}),p.apply(this,arguments)}l.rotateSignedPreKey=m}),98);
__d("memoizeWithArgsLFUCache",["LFUCache"],(function(t,n,r,o,a,i,l){function e(e,t,n,o){var a;function i(){return a||(a=new(r("LFUCache"))(n)),a}function l(e){if(e===void 0)a=null;else{var t;(t=a)==null||t.delete(e)}}o&&o(l);var s=function(){var n=i(),r=t.apply(void 0,arguments);n.has(r)||n.set(r,e.apply(void 0,arguments));var o=n.get(r);return o};return s}l.default=e}),98);/*FB_PKG_DELIM*/
__d("InstagramAdDirectReshareSendFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3447"),s=o("FalcoLoggerInternal").create("instagram_ad_direct_reshare_send",e),u=s;l.default=u}),98);
__d("InstagramAdHideResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3449"),s=o("FalcoLoggerInternal").create("instagram_ad_hide_response",e),u=s;l.default=u}),98);
__d("PolarisAPIEditCollection",["PolarisInstapi","emptyObject","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.collectionId,n=e.collectionName,a=e.postIdsToAdd,i=e.postIdsToRemove,l=babelHelpers.extends({added_media_ids:JSON.stringify(a!=null?a:[]),removed_media_ids:JSON.stringify(i!=null?i:[])},r("isStringNullOrEmpty")(n)?r("emptyObject"):{name:n});return o("PolarisInstapi").apiPost("/api/v1/collections/{collection_id}/edit/",{body:l,path:{collection_id:t}}).then(function(e){return e.data})}l.editCollection=e}),98);
__d("PolarisAPIGetChildComments",["PolarisInstapi","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=yield o("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/{parent_comment_id}/child_comments/",{path:{media_id:e,parent_comment_id:t},query:babelHelpers.extends({min_id:n!=null?n:void 0},r===!0?{is_chronological:!0,paging_direction:"view_more"}:{})});return a.data}),s.apply(this,arguments)}l.getChildComments=e}),98);
__d("PolarisAPIGetInitialComments",["PolarisInstapi","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/",{path:{media_id:e},query:{can_support_threading:!0,permalink_enabled:!!t,sort_order:n!=null?String(n):void 0,target_comment_id:t}});return r.data}),s.apply(this,arguments)}l.getInitialComments=e}),98);
__d("PolarisAPIGetPaginationComments",["PolarisInstapi","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){n===void 0&&(n=!0);var a=yield o("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/",{path:{media_id:e},query:babelHelpers.extends({can_support_threading:!0},n===!0?{min_id:t}:{max_id:t},{sort_order:String(r)})});return a.data}),s.apply(this,arguments)}l.getPaginationComments=e}),98);
__d("PolarisAPILikePost",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/like/",{path:{media_id:e}})}l.likePost=e}),98);
__d("PolarisAPIPostNotifyGuardianCall",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r="/api/v1/users/notify_guardian_call/",a={guardian_igid:e,reported_category:n,reported_igid:t};return o("PolarisInstapi").apiPost(r,{body:a}).then(function(e){return e.data})}l.postNotifyGuardianCall=e}),98);
__d("PolarisAPISavePost",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/save/",{path:{media_id:e}})}l.savePost=e}),98);
__d("PolarisAPIUnlikePost",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/unlike/",{path:{media_id:e}})}l.unlikePost=e}),98);
__d("PolarisAPIUnsavePost",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/unsave/",{path:{media_id:e}})}l.unsavePost=e}),98);
__d("PolarisFRXBlockUserFollowupModal.react",["CometPlaceholder.react","CometRelay","IGDBlockUserDialogOffMsys.entrypoint","IGDSConfirmDialog.react","IGDSGlimmer.react","JSResourceForInteraction","PolarisBlockDialogContainer.react","PolarisFRXWebReportStrings","PolarisGenericStrings","PolarisLinkBuilder","PolarisNavigationUtils","PolarisReactRedux.react","PolarisReportConstants","isStringNullOrEmpty","lazyLoadComponent","polarisRelationshipSelectors.react","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback,c=r("lazyLoadComponent")(r("JSResourceForInteraction")("IGDBlockUserDialog.react").__setRef("PolarisFRXBlockUserFollowupModal.react"));function d(e,t){var n=e.userToBlock.id;return o("polarisRelationshipSelectors.react").getRelationship(t.relationships,n)}function m(e){e.onClose&&e.onClose()}function p(e){var t=o("react-compiler-runtime").c(24),n;t[0]!==e?(n=function(n){return d(e,n)},t[0]=e,t[1]=n):n=t[1];var a=o("PolarisReactRedux.react").useSelector(n),l=e.frxObjectType,u=e.isGroupThread,p=e.onClose,g=e.threadKey,h=e.userToBlock,y=e.useSimpleBlockModalWithoutRefresh,C=h.fbidV2,b=h.id,v=h.username,S=_(l),R=r("useCometRelayEntrypointContextualEnvironmentProvider")(),L=o("CometRelay").useEntryPointLoader(R,r("IGDBlockUserDialogOffMsys.entrypoint")),E=L[0],k=L[1],I;t[2]!==p?(I=function(){p()},t[2]=p,t[3]=I):I=t[3];var T=I;if(S&&v!=null){E==null&&C!=null&&k({userFbId:C});var D;t[4]!==E||t[5]!==u||t[6]!==T||t[7]!==g||t[8]!==b||t[9]!==v?(D=E?s.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:E,props:{blockUserIgId:b,isBlocked:!1,onClose:T}}):s.jsx(c,{clickPoint:"report",contactID:b,isAfterReport:!0,isBlocked:!1,isGroup:u!=null?u:!1,onClose:T,shouldReportAsInstamadillo:!1,threadKey:g,userName:v}),t[4]=E,t[5]=u,t[6]=T,t[7]=g,t[8]=b,t[9]=v,t[10]=D):D=t[10];var x=D,$;t[11]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(r("IGDSGlimmer.react"),{index:0}),t[11]=$):$=t[11];var P;return t[12]!==x?(P=s.jsx(r("CometPlaceholder.react"),{fallback:$,name:i.id,children:x}),t[12]=x,t[13]=P):P=t[13],P}if(!b)return null;if(y===!0){var N;return t[14]!==e?(N=s.jsx(f,babelHelpers.extends({},e)),t[14]=e,t[15]=N):N=t[15],N}var M;t[16]!==e?(M=function(){return m(e)},t[16]=e,t[17]=M):M=t[17];var w;return t[18]!==C||t[19]!==a||t[20]!==M||t[21]!==b||t[22]!==v?(w=s.jsx(r("PolarisBlockDialogContainer.react"),{fbidV2:C,onClose:M,relationship:a,userId:b,username:v}),t[18]=C,t[19]=a,t[20]=M,t[21]=b,t[22]=v,t[23]=w):w=t[23],w}function _(e){switch(e){case o("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE:case o("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE_THREAD:case o("PolarisReportConstants").FRXObjectType.ENCRYPTED_DIRECT_MESSAGE:return!0;default:return!1}}function f(e){var t=o("react-compiler-runtime").c(18),n=e.userToBlock,a=n.username,i,l,u,c;if(t[0]!==a?(c=r("isStringNullOrEmpty")(a)?null:o("PolarisLinkBuilder").buildUserLink(a),u=r("isStringNullOrEmpty")(c),t[0]=a,t[1]=i,t[2]=l,t[3]=u,t[4]=c):(i=t[1],l=t[2],u=t[3],c=t[4]),u){i=o("PolarisGenericStrings").CLOSE_TEXT;var p;t[8]===Symbol.for("react.memo_cache_sentinel")?(p={},t[8]=p):p=t[8],l=p}else{i=o("PolarisGenericStrings").CANCEL_TEXT;var d;t[5]!==e||t[6]!==c?(d={confirmLabel:o("PolarisFRXWebReportStrings").VIEW_PROFILE_BUTTON_TEXT,onConfirm:function(){o("PolarisNavigationUtils").openURLWithFullPageReload(c),m(e)}},t[5]=e,t[6]=c,t[7]=d):d=t[7],l=d}var _=l,f=i,g;t[9]!==e?(g=function(){return m(e)},t[9]=e,t[10]=g):g=t[10];var h;t[11]!==a?(h=o("PolarisFRXWebReportStrings").getBlockUserModalTitle(a),t[11]=a,t[12]=h):h=t[12];var y;return t[13]!==i||t[14]!==l||t[15]!==g||t[16]!==h?(y=s.jsx(r("IGDSConfirmDialog.react"),babelHelpers.extends({},_,{body:o("PolarisFRXWebReportStrings").BLOCK_USER_THROUGH_PROFILE_MODAL_CONTENT,cancelLabel:f,onClose:g,title:h})),t[13]=i,t[14]=l,t[15]=g,t[16]=h,t[17]=y):y=t[17],y}l.default=p}),98);
__d("PolarisFRXNotifyGuardianFollowupModal.react",["IGDSConfirmDialog.react","PolarisFRXWebReportStrings","react","react-compiler-runtime","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){e.onClose&&e.onClose()}function c(e,t,n){e.onNotify&&e.onNotify(t,n)}function d(e){var t=o("react-compiler-runtime").c(14),n=r("usePolarisViewer")(),a=n==null?void 0:n.guardianId,i;t[0]!==a||t[1]!==e?(i={confirmLabel:o("PolarisFRXWebReportStrings").SEND_BUTTON_TEXT,onConfirm:function(){c(e,!0,a)}},t[0]=a,t[1]=e,t[2]=i):i=t[2];var l=i,d;t[3]!==e.guardianUsername||t[4]!==e.reportedTagTitle||t[5]!==e.reportedUsername?(d=o("PolarisFRXWebReportStrings").getNotifyGuardianModalText(e.guardianUsername,e.reportedTagTitle,e.reportedUsername),t[3]=e.guardianUsername,t[4]=e.reportedTagTitle,t[5]=e.reportedUsername,t[6]=d):d=t[6];var m;t[7]!==a||t[8]!==e?(m=function(){c(e,!1,a),u(e)},t[7]=a,t[8]=e,t[9]=m):m=t[9];var p;return t[10]!==l||t[11]!==d||t[12]!==m?(p=s.jsx(r("IGDSConfirmDialog.react"),babelHelpers.extends({},l,{body:d,cancelLabel:o("PolarisFRXWebReportStrings").DONT_SEND_BUTTON_TEXT,onClose:m,title:o("PolarisFRXWebReportStrings").NOTIFY_GUARDIAN_MODAL_TITLE_NO_QUESTION})),t[10]=l,t[11]=d,t[12]=m,t[13]=p):p=t[13],p}l.default=d}),98);
__d("PolarisFRXReportBaseScreenModal.react",["cx","IGDSBox.react","IGDSDialogHeader.react","IGDSDialogLegacy.react","PolarisFRXWebReportConstants","PolarisFRXWebReportStrings","PolarisUA","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=4,d=4,m=4,p=!1;function _(e,t,n){var r,a=e||{},i=a.response,l=a.type;if(l===o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION)return{headerEnabled:!1};var s=i||{},u=s.title,c=(r=u==null?void 0:u.text)!=null?r:o("PolarisFRXWebReportStrings").DEFAULT_MODAL_HEADER_TEXT;return{headerEnabled:!0,onBackButton:n,titleText:c,withBackButton:t}}function f(e){e.onClose&&e.onClose()}function g(e){var t,n=o("react-compiler-runtime").c(8),a=o("PolarisUA").isMobile()?"large":"default",i=(t=e.headerParams.titleText)!=null?t:void 0,l;n[0]!==e?(l=function(){return f(e)},n[0]=e,n[1]=l):l=n[1];var s;n[2]!==e?(s=u.jsxs("div",{className:"_acgx"+(a==="large"?" _acqj":""),children:[u.jsx(h,babelHelpers.extends({},e)),u.jsx(y,babelHelpers.extends({},e))]}),n[2]=e,n[3]=s):s=n[3];var c;return n[4]!==i||n[5]!==l||n[6]!==s?(c=u.jsx(r("IGDSDialogLegacy.react"),{label:i,onClose:l,size:a,testid:void 0,children:s}),n[4]=i,n[5]=l,n[6]=s,n[7]=c):c=n[7],c}function h(e){var t=o("react-compiler-runtime").c(11),n=e.headerParams,a=n.headerEnabled,i=n.titleText,l=n.onBackButton,s=n.withBackButton,c=s===void 0?p:s;if(!a)return null;var d;t[0]!==l||t[1]!==c?(d=c&&l?{onBack:function(){return l()}}:void 0,t[0]=l,t[1]=c,t[2]=d):d=t[2];var m=d,_;t[3]!==e?(_=function(){return f(e)},t[3]=e,t[4]=_):_=t[4];var g;t[5]!==i?(g=u.jsx(u.Fragment,{children:i}),t[5]=i,t[6]=g):g=t[6];var h;return t[7]!==m||t[8]!==_||t[9]!==g?(h=u.jsx(r("IGDSDialogHeader.react"),babelHelpers.extends({onClose:_},m,{children:g})),t[7]=m,t[8]=_,t[9]=g,t[10]=h):h=t[10],h}function y(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.disableDefaultBodyPaddingMargin,i=a===void 0?!1:a,l,s,p;i?l=p=s=0:(l=c,s=m,p=d);var _;return t[0]!==p||t[1]!==s||t[2]!==l||t[3]!==n?(_=u.jsx("div",{className:"_acgy",children:u.jsx("div",{className:"_acgz",children:u.jsx(r("IGDSBox.react"),{marginBottom:p,marginTop:s,paddingX:l,position:"relative",children:n})})}),t[0]=p,t[1]=s,t[2]=l,t[3]=n,t[4]=_):_=t[4],_}l.DEFAULT_BODY_PADDING_X=c,l.DEFAULT_BODY_MARGIN_BOTTOM=d,l.DEFAULT_BODY_MARGIN_TOP=m,l.getDefaultScreenModalHeaderParamsFromScreenPayload=_,l.FRXReportBaseScreenModal=g}),98);
__d("PolarisFRXReportModalLinkUtils",["URI","polarisIsInternalURIString"],(function(t,n,r,o,a,i,l){"use strict";var e,s="help.instagram.com";function u(t){return r("polarisIsInternalURIString")(t)&&new(e||(e=r("URI")))(t).getDomain()===s}function c(e){return u(e)||!r("polarisIsInternalURIString")(e)}l.shouldLinkUseBlankTarget=c}),98);
__d("PolarisFRXReportMainButton.react",["PolarisFRXReportModalLinkUtils","PolarisIGCoreButton.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(14),n=e["data-testid"],a=e.disabled,i=e.href,l=e.onClick,u=e.primaryButton,c=e.spinner,d=e.text,m=e.textAlign,p;if(!r("isStringNullOrEmpty")(i)&&a!==!0){var _=o("PolarisFRXReportModalLinkUtils").shouldLinkUseBlankTarget(i)?"_blank":void 0,f;t[0]!==i||t[1]!==_?(f={href:i,target:_},t[0]=i,t[1]=_,t[2]=f):f=t[2],p=f}var g=u==null||u?"ig-primary-button":"ig-secondary-button",h=!!a,y=!!c,C;t[3]!==l?(C=function(){return l&&l()},t[3]=l,t[4]=C):C=t[4];var b;return t[5]!==p||t[6]!==g||t[7]!==h||t[8]!==y||t[9]!==C||t[10]!==n||t[11]!==d||t[12]!==m?(b=s.jsx(r("PolarisIGCoreButton.react"),babelHelpers.extends({},p,{color:g,"data-testid":void 0,disabled:h,loading:y,onClick:C,textAlign:m,children:d})),t[5]=p,t[6]=g,t[7]=h,t[8]=y,t[9]=C,t[10]=n,t[11]=d,t[12]=m,t[13]=b):b=t[13],b}l.default=u}),98);
__d("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9617087628339557"}),null);
__d("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql",["PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"is_f3_supervised_user",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:e,action:"THROW"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation"),metadata:{},name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisFRXReportModalOptionList.react",["cx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(4),n=e.asRadio,r=e.children,a=n===void 0?!1:n,i="_ac7r";if(a){var l;return t[0]!==r?(l=u.jsx("fieldset",{className:i,children:r}),t[0]=r,t[1]=l):l=t[1],l}var s;return t[2]!==r?(s=u.jsx("div",{className:i,role:"list",children:r}),t[2]=r,t[3]=s):s=t[3],s}l.default=c}),98);
__d("PolarisFRXReportModalOptionListItem.react",["cx","fbt","IGDSBox.react","IGDSChevronIcon.react","IGDSRadioButton.react","IGDSSpinner.react","PolarisFRXReportModalLinkUtils","PolarisFastLink.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d={BUTTON:"button",LINK:"link",RADIO:"radio"},m={DEFAULT:"default",GREY:"grey",RED:"red"},p=4;function _(e){e.onSelect&&e.onSelect()}function f(e){var t=e.href;return r("isStringNullOrEmpty")(t)?d.BUTTON:d.LINK}function g(e){var t=o("react-compiler-runtime").c(38),n=e.children,a=e["data-testid"],i=e.href,l=e.variant,s=e.textColor,u=e.disabled,g=l===void 0?f(e):l,y=s===void 0?m.DEFAULT:s,C=g===d.RADIO,b=n;if(!C){var v;t[0]!==b?(v=c.jsx(r("IGDSBox.react"),{flex:"grow",position:"relative",children:b}),t[0]=b,t[1]=v):v=t[1];var S;t[2]!==u||t[3]!==e?(S=u!==!0&&c.jsx(h,babelHelpers.extends({},e)),t[2]=u,t[3]=e,t[4]=S):S=t[4];var R;t[5]!==v||t[6]!==S?(R=c.jsxs(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",direction:"row",padding:p,position:"relative",children:[v,S]}),t[5]=v,t[6]=S,t[7]=R):R=t[7],b=R}var L="_abn2"+(y===m.RED?" _abn3":"")+(y===m.GREY?" _abn4":"");if(C){var E=e.selected,k=e.value,I=k===void 0?"":k,T;t[8]!==b||t[9]!==L?(T=c.jsx("div",{className:L,children:b}),t[8]=b,t[9]=L,t[10]=T):T=t[10];var D;t[11]!==e?(D=function(){return _(e)},t[11]=e,t[12]=D):D=t[12];var x;t[13]!==E||t[14]!==T||t[15]!==D||t[16]!==I?(x=c.jsx(r("IGDSRadioButton.react"),{isChecked:E,label:T,onChange:D,value:I}),t[13]=E,t[14]=T,t[15]=D,t[16]=I,t[17]=x):x=t[17];var $;return t[18]!==x||t[19]!==a?($=c.jsx(r("IGDSBox.react"),{"data-testid":void 0,padding:p,children:x}),t[18]=x,t[19]=a,t[20]=$):$=t[20],$}else if(g===d.LINK&&i!=null&&i!==""){var P;t[21]!==e?(P=function(){return _(e)},t[21]=e,t[22]=P):P=t[22];var N=o("PolarisFRXReportModalLinkUtils").shouldLinkUseBlankTarget(i)?"_blank":void 0,M;return t[23]!==b||t[24]!==i||t[25]!==L||t[26]!==P||t[27]!==N||t[28]!==a?(M=c.jsx(r("PolarisFastLink.react"),{className:L,"data-testid":void 0,href:i,onClick:P,target:N,children:b}),t[23]=b,t[24]=i,t[25]=L,t[26]=P,t[27]=N,t[28]=a,t[29]=M):M=t[29],M}var w;t[30]!==e?(w=function(){return _(e)},t[30]=e,t[31]=w):w=t[31];var A;return t[32]!==b||t[33]!==u||t[34]!==L||t[35]!==w||t[36]!==a?(A=c.jsx("button",{className:L,"data-testid":void 0,disabled:u,onClick:w,children:b}),t[32]=b,t[33]=u,t[34]=L,t[35]=w,t[36]=a,t[37]=A):A=t[37],A}function h(e){var t=o("react-compiler-runtime").c(4),n=e.loading,a;if(n===!0){var i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx(r("IGDSSpinner.react"),{size:"small"}),t[0]=i):i=t[0],a=i}else{var l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(r("IGDSChevronIcon.react"),{alt:u._(/*BTDS*/"divisa"),color:"ig-tertiary-text",direction:"next",size:17}),t[1]=l):l=t[1],a=l}var s;return t[2]!==a?(s=c.jsx(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",direction:"row",marginStart:2,position:"relative",children:a}),t[2]=a,t[3]=s):s=t[3],s}l.OPTION_LIST_ITEM_VARIANTS=d,l.OPTION_LIST_ITEM_TEXT_COLORS=m,l.FRXReportModalOptionListItem=g}),226);
__d("polarisGetGuardianInfo",["normalizr"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("normalizr")).schema.Entity("userInfo",{},{idAttribute:function(t){return String(t.pk)},processStrategy:function(t){return{username:t.username}}});function s(t){return o("normalizr").normalize(t,e).entities.userInfo}l.default=s}),98);
__d("PolarisFRXWebReportActions",["JSResourceForInteraction","PolarisAPIPostNotifyGuardianCall","PolarisDirectLogger","PolarisFRXWebReportConstants","PolarisInstapi","PolarisReportConstants","polarisGetGuardianInfo","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=1,s=r("JSResourceForInteraction")("PolarisFRXWebSendSecureReportAction").__setRef("PolarisFRXWebReportActions");function u(e){var t=babelHelpers.extends({},e,{frx_prompt_request_type:o("PolarisFRXWebReportConstants").FRX_SCREEN_INPUT_REQUEST_TYPE_INTS.START});return m(t,!0)}function c(e){var t,n,r=e.frxPromptRequestType,o=e.metadata,a=d(e),i=babelHelpers.extends({},o,a,{frx_prompt_request_type:r});return m(i,!1,(t=e.optionalParams)==null?void 0:t.thread_id,(n=e.optionalParams)==null?void 0:n.responsible_id)}function d(e){var t=e.context,n=e.optionalParams,r=n.attachments,o=n.evidenceText,a=n.reportSubtype,i=n.selectedPromptButtonActionType,l=n.selectedTagTypes,s=n.selectedVictimID,u=n.tipNumber,c={};return t!=null&&(c.context=t),l!=null&&(c.selected_tag_types=JSON.stringify(l)),i!=null&&(c.action_type=i),s!=null&&(c.victim_user_id=s),u!=null&&(c.tip_number=u),r!=null&&(c.attachments=r),o!=null&&(c.evidence_text=o),a!=null&&(c.report_subtype=a),babelHelpers.extends({},c)}function m(t,n,a,i){return function(l,u){var c=e++;l({frxScreenRequestID:c,isInitScreen:n,type:"FRX_WEB_REPORT_SCREEN_API_REQUESTED"});var d=o("PolarisInstapi").apiPost("/api/v1/web/reports/get_frx_prompt/",{body:t}).then(function(e){return e.data});d.then(function(e){var n=e.response,u=e.type;if(n==null||u==null)l({frxScreenRequestID:c,type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_FAILED"});else{var d=n.frx_context;[o("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_MESSAGE,o("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_THREAD].includes(t.location)&&t.frx_prompt_request_type===o("PolarisFRXWebReportConstants").FRX_SCREEN_INPUT_REQUEST_TYPE_INTS.POLICY_EDUCATION&&i!==void 0&&a!==void 0&&d!==void 0&&r("promiseDone")(s.load().then(function(e){l(e(d,i,a,t.victim_user_id,t.location===o("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_MESSAGE?t.object_id:void 0))})),l({frxScreenRequestID:c,screenPayload:{frxScreenRequestID:c,response:n,type:u},type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_SUCCESS"})}}).catch(function(){l({frxScreenRequestID:c,type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_FAILED"})})}}function p(e,t,n,r){return function(a,i){a({type:"FRX_WEB_NOTIFY_GUARDIAN_FOLLOWUP_MODAL_TO_CONFIMATION_MODAL"}),e&&o("PolarisAPIPostNotifyGuardianCall").postNotifyGuardianCall(t,n,r).catch(function(e){var t=new(o("PolarisDirectLogger")).DirectLogger("DirectActions");t.logError("Notify Guardian From Web",e)})}}function _(e){return babelHelpers.extends({type:"FRX_WEB_REPORT_REPORTING_MODAL_CLOSED"},e)}function f(){return{type:"FRX_WEB_REPORT_GO_BACK_ONE_SCREEN"}}function g(){return{type:"FRX_WEB_REPORT_START_UNFOLLOW_FOLLOWUP"}}function h(){return{type:"FRX_WEB_REPORT_START_BLOCK_FOLLOWUP"}}function y(){return{type:"FRX_WEB_REPORT_START_NOTIFY_GUARDIAN_FOLLOWUP"}}function C(){return{type:"FRX_WEB_REPORT_SUPPORT_HUB_FOLLOWUP"}}function b(){return function(e,t){e({type:"FRX_WEB_REPORT_DISABLE_NOTIFY_GUARDIAN_OPTION"})}}function v(e){return function(t,n){o("PolarisInstapi").apiGet("/api/v1/users/{user_id}/info/",{path:{user_id:e}}).then(function(n){var o=n.data.user;o&&t({guardian:r("polarisGetGuardianInfo")(o)[e],type:"FRX_WEB_REPORT_STORE_GUARDIAN_INFORMATION"})})}}function S(e){return function(t,n){t({reportedTagTitle:e,type:"FRX_WEB_REPORT_STORE_REPORTED_TAG_TITLE"})}}l.doRequestInitFRXScreenAction=u,l.doRequestNextFRXScreenAction=c,l.doOpenNotifyGuardianFollowupModalToPreviousScreenAction=p,l.doReportingModalClosedAction=_,l.doGoBackOneFRXScreenAction=f,l.doStartUnfollowFollowupAction=g,l.doStartBlockFollowupAction=h,l.doStartNotifyGuardianFollowupAction=y,l.doOpenSupportHubFollowupAction=C,l.doDisableNotifyGuardianOption=b,l.doStoreGuardianInformation=v,l.doStoreReportedTagTitle=S}),98);
__d("PolarisFRXWebReportStateSelectors",["PolarisFRXWebReportConstants","PolarisFRXWebReportUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.webFRXReport.pendingFRXScreenRequestID!==null}function s(e){return e.webFRXReport.screenHistoryStack}function u(e){return o("PolarisFRXWebReportUtils").getCurrentScreenFromHistoryStack(s(e))}function c(e){return s(e).length}function d(e){var t=s(e);return t.findIndex(function(e){return e.type===o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION})>=0}function m(e){return e.webFRXReport.currRenderStep}function p(e){return e.webFRXReport.disableNotifyGuardianOption}function _(e){return e.webFRXReport.guardianUsername}function f(e){return e.webFRXReport.reportedTagTitle}l.getIsFRXScreenRequestProcessing=e,l.getCurrScreenPayload=u,l.getScreenHistorySize=c,l.getIsConfirmationScreenInHistoryStack=d,l.getCurrRenderStep=m,l.getDisableNotifyGuardianOption=p,l.getGuardianUsername=_,l.getReportedTagTitle=f}),98);
__d("PolarisFRXReportModalFollowUpActionSection.react",["IGDSBox.react","PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql","PolarisFRXReportModalOptionList.react","PolarisFRXReportModalOptionListItem.react","PolarisFRXWebReportActions","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisReactRedux.react","PolarisReportConstants","gkx","isStringNullOrEmpty","polarisRelationshipSelectors.react","react","react-compiler-runtime","react-relay/relay-hooks/useLazyLoadQuery","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(e,t){var n=e.reportedOwner.id;return o("polarisRelationshipSelectors.react").getRelationship(t.relationships,n)}function d(e,t){var n=e.onSelectFollowupAction;n(t)}function m(t){var a,i=o("react-compiler-runtime").c(22),l,s;i[0]===Symbol.for("react.memo_cache_sentinel")?(l=e!==void 0?e:e=n("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql"),s={},i[0]=l,i[1]=s):(l=i[0],s=i[1]);var m=r("react-relay/relay-hooks/useLazyLoadQuery")(l,s),y=(a=m.xfb_youth_platform)==null||(a=a.viewer)==null?void 0:a.is_f3_supervised_user,C=t.followUpActions,b;i[2]!==t?(b=function(n){return o("polarisRelationshipSelectors.react").followedByViewer(c(t,n))},i[2]=t,i[3]=b):b=i[3];var v=o("PolarisReactRedux.react").useSelector(b),S;i[4]!==t?(S=function(n){return o("polarisRelationshipSelectors.react").isBlockedByViewer(c(t,n))},i[4]=t,i[5]=S):S=i[5];var R=o("PolarisReactRedux.react").useSelector(S),L=r("usePolarisViewer")(),E;if(i[6]!==C||i[7]!==y||i[8]!==t||i[9]!==R||i[10]!==v||i[11]!==(L==null?void 0:L.isSupervisedUser)){var k;i[13]!==y||i[14]!==t||i[15]!==R||i[16]!==v||i[17]!==(L==null?void 0:L.isSupervisedUser)?(k=function(n,a){var e=n.action_type,i=n.beta_redirect_uri,l=n.name;if(e==null)return null;var s=l==null?void 0:l.text,c=function(){return d(t,n)},m="followup-"+a;switch(e){case o("PolarisReportConstants").FRXActionType.LEARN_MORE_ADS:case o("PolarisReportConstants").FRXActionType.LEARN_MORE_EDUCATION:case o("PolarisReportConstants").FRXActionType.SELF_INJURY_EDUCATION_ACTION:case o("PolarisReportConstants").FRXActionType.EATING_DISORDER_EDUCATION_ACTION:return s==null||s===""||i==null||i===""?null:u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{href:i,onSelect:c,children:s},m);case o("PolarisReportConstants").FRXActionType.UNFOLLOW:return v?u.jsx(_,{labelText:s,onSelect:c},m):null;case o("PolarisReportConstants").FRXActionType.BLOCK_ACTOR:return R?null:u.jsx(f,{labelText:s,onSelect:c},m);case o("PolarisReportConstants").FRXActionType.SUPPORT_HUB:{var p=r("gkx")("5568");return p?u.jsx(g,{labelText:s,onSelect:c},m):null}case o("PolarisReportConstants").FRXActionType.NOTIFY_GUARDIAN:return(L==null?void 0:L.isSupervisedUser)!==!0&&y!==!0?null:u.jsx(h,{labelText:s,onSelect:c},m);default:return null}},i[13]=y,i[14]=t,i[15]=R,i[16]=v,i[17]=L==null?void 0:L.isSupervisedUser,i[18]=k):k=i[18],E=C.map(k).filter(p),i[6]=C,i[7]=y,i[8]=t,i[9]=R,i[10]=v,i[11]=L==null?void 0:L.isSupervisedUser,i[12]=E}else E=i[12];var I=E;if(I.length===0)return null;var T;i[19]===Symbol.for("react.memo_cache_sentinel")?(T=u.jsx(r("IGDSBox.react"),{marginTop:11,position:"relative"}),i[19]=T):T=i[19];var D;return i[20]!==I?(D=u.jsxs(u.Fragment,{children:[T,u.jsx(r("PolarisFRXReportModalOptionList.react"),{children:I})]}),i[20]=I,i[21]=D):D=i[21],D}function p(e){return e!=null}function _(e){var t=o("react-compiler-runtime").c(6),n=e.labelText,a=e.onSelect,i=r("isStringNullOrEmpty")(n)?o("PolarisFRXWebReportStrings").DEFAULT_UNFOLLOW_BUTTON_TEXT:n,l=o("PolarisReactRedux.react").useDispatch(),s;t[0]!==l||t[1]!==a?(s=function(){a(),l(o("PolarisFRXWebReportActions").doStartUnfollowFollowupAction())},t[0]=l,t[1]=a,t[2]=s):s=t[2];var c;return t[3]!==s||t[4]!==i?(c=u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{onSelect:s,children:i}),t[3]=s,t[4]=i,t[5]=c):c=t[5],c}function f(e){var t=o("react-compiler-runtime").c(6),n=e.labelText,a=e.onSelect,i=r("isStringNullOrEmpty")(n)?o("PolarisFRXWebReportStrings").DEFAULT_BLOCK_BUTTON_TEXT:n,l=o("PolarisReactRedux.react").useDispatch(),s;t[0]!==l||t[1]!==a?(s=function(){a(),l(o("PolarisFRXWebReportActions").doStartBlockFollowupAction())},t[0]=l,t[1]=a,t[2]=s):s=t[2];var c;return t[3]!==i||t[4]!==s?(c=u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{onSelect:s,textColor:o("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.RED,children:i}),t[3]=i,t[4]=s,t[5]=c):c=t[5],c}function g(e){var t=o("react-compiler-runtime").c(6),n=e.labelText,a=e.onSelect,i=r("isStringNullOrEmpty")(n)?o("PolarisFRXWebReportStrings").DEFAULT_GET_SUPPORT_BUTTON_TEXT:n,l=o("PolarisReactRedux.react").useDispatch(),s;t[0]!==l||t[1]!==a?(s=function(){a(),l(o("PolarisFRXWebReportActions").doOpenSupportHubFollowupAction())},t[0]=l,t[1]=a,t[2]=s):s=t[2];var c;return t[3]!==s||t[4]!==i?(c=u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{onSelect:s,children:i}),t[3]=s,t[4]=i,t[5]=c):c=t[5],c}function h(e){var t=o("react-compiler-runtime").c(8),n=e.labelText,a=e.onSelect,i=r("isStringNullOrEmpty")(n)?o("PolarisFRXWebReportStrings").DEFAULT_NOTIFY_GUARDIAN_BUTTON_TEXT:n,l=o("PolarisReactRedux.react").useDispatch(),s=o("PolarisReactRedux.react").useSelector(o("PolarisFRXWebReportStateSelectors").getDisableNotifyGuardianOption),c=s===!0?o("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.GREY:o("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.DEFAULT,d;t[0]!==l||t[1]!==a?(d=function(){a(),l(o("PolarisFRXWebReportActions").doStartNotifyGuardianFollowupAction())},t[0]=l,t[1]=a,t[2]=d):d=t[2];var m;return t[3]!==s||t[4]!==i||t[5]!==d||t[6]!==c?(m=u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{disabled:s,onSelect:d,textColor:c,children:i}),t[3]=s,t[4]=i,t[5]=d,t[6]=c,t[7]=m):m=t[7],m}l.default=m}),98);
__d("PolarisTextWithEntities.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){return e.offset===t.offset&&(e.length===0||t.length===0)?e.length-t.length:e.offset-t.offset}function c(e){return[].concat(e.ranges).filter(Boolean).sort(u)}function d(e){var t=o("react-compiler-runtime").c(4),n;if(t[0]!==e){for(var r=0,a=[],i=e.text,l=c(e),u=[],d=[],m=0;m<l.length;m++)u.push(l[m].offset),d.push(l[m].offset+l[m].length);for(var p=[],_=0;_<l.length;){var f=l[_];if(d[_]<r){_=p.length>0?p.pop():_+1;continue}if(f.offset>r){var g=i.substring(r,f.offset);a.push(s.jsx(s.Fragment,{children:g},g+_)),r=f.offset}for(var h=0,y=_+1;y<l.length;y++)if(u[y]<d[_]&&u[y]>=r){h=y;break}if(h!==0){var C=i.substring(r,u[h]);a.push(s.jsx(s.Fragment,{children:e.rangeRenderer(C,f)},C+_)),r=u[h],p.push(_),_=h;continue}var b=i.substring(r,d[_]);a.push(s.jsx(s.Fragment,{children:e.rangeRenderer(b,f)},b+_)),r=d[_],p.length>0?_=p.pop():_++}if(i.length>r){var v=i.substr(r),S;t[2]!==v?(S=s.jsx(s.Fragment,{children:v},v),t[2]=v,t[3]=S):S=t[3],a.push(S)}n=e.textRenderer(a),t[0]=e,t[1]=n}else n=t[1];return n}l.default=d}),98);
__d("PolarisFRXReportModalRichText.react",["PolarisFRXReportModalLinkUtils","PolarisFastLink.react","PolarisTextWithEntities.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.token;if(!t)return null;var n=t.color,r=t.style,o=t.uri;return n==null&&(n=t[3]),r==null&&(r=t[1]),(o===""||o==null)&&(o=t[2]),r!=null&&(r=parseInt(r,10)),{color:n,style:r,uri:o}}function c(e){if(!e)return[];var t=[];return e.forEach(function(e){var n=e.length,r=e.offset,o=u(e)||{},a=o.color,i=o.style,l=o.uri;n!=null&&r!=null&&(l!=null||a!=null||i!=null)&&t.push({color:a,length:n,offset:r,override_uri:l,style:i})}),t}function d(e){var t=o("react-compiler-runtime").c(5),n=e.richText;if(n==null)return null;var a=n.markup,i=n.text;if(i==null)return null;var l;t[0]!==a?(l=c(a),t[0]=a,t[1]=l):l=t[1];var u;return t[2]!==l||t[3]!==i?(u=s.jsx(r("PolarisTextWithEntities.react"),{rangeRenderer:p,ranges:l,text:i,textRenderer:m}),t[2]=l,t[3]=i,t[4]=u):u=t[4],u}function m(e){return s.jsx(s.Fragment,{children:e})}function p(e,t){var n=t.override_uri;return n!=null?s.jsx(r("PolarisFastLink.react"),{href:n,target:o("PolarisFRXReportModalLinkUtils").shouldLinkUseBlankTarget(n)?"_blank":void 0,children:e}):e}l.default=d}),98);
__d("PolarisFRXWebReportAPIUtils",["PolarisInstapi","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";function e(e){o("PolarisInstapi").apiPost("/api/v1/web/reports/log_tag_selected/",{body:e}).catch(r("emptyFunction"))}function s(e){o("PolarisInstapi").apiPost("/api/v1/web/reports/handle_guided_action/",{body:e}).catch(r("emptyFunction"))}l.logFRXTagSelected=e,l.handleFRXGuidedAction=s}),98);
__d("PolarisFRXReportConfirmationScreenModalForSupervision.react",["IGDSBox.react","IGDSCircleCheckPanoOutlineIcon.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportMainButton.react","PolarisFRXReportModalFollowUpActionSection.react","PolarisFRXReportModalRichText.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportStrings","PolarisGenericStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){var n=t.action_type;if(n!=null){var r=e.screenPayload.response;o("PolarisFRXWebReportAPIUtils").handleFRXGuidedAction({action_type:n,context:r==null?void 0:r.context})}}function c(e){var t=o("react-compiler-runtime").c(13),n=e.headerParams,a=e.onClose,i;t[0]!==a?(i=function(){return a()},t[0]=a,t[1]=i):i=t[1];var l=i,u,c;t[2]!==e?(u=s.jsx(d,babelHelpers.extends({},e)),c=s.jsx(m,babelHelpers.extends({},e)),t[2]=e,t[3]=u,t[4]=c):(u=t[3],c=t[4]);var p;t[5]!==l?(p=s.jsx(r("IGDSBox.react"),{marginBottom:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM,marginTop:4,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:s.jsx(r("PolarisFRXReportMainButton.react"),{onClick:l,text:o("PolarisGenericStrings").CLOSE_TEXT})}),t[5]=l,t[6]=p):p=t[6];var _;return t[7]!==n||t[8]!==l||t[9]!==u||t[10]!==c||t[11]!==p?(_=s.jsxs(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:n,onClose:l,children:[u,c,p]}),t[7]=n,t[8]=l,t[9]=u,t[10]=c,t[11]=p,t[12]=_):_=t[12],_}function d(e){var t=o("react-compiler-runtime").c(14),n=e.screenPayload,a;t[0]!==n?(a=n||{},t[0]=n,t[1]=a):a=t[1];var i=a,l=i.response,u;t[2]!==l?(u=l||{},t[2]=l,t[3]=u):u=t[3];var c=u,d=c.follow_up_actions_title,m=c.subtitle,p;t[4]!==m?(p=m?s.jsx(r("IGDSBox.react"),{marginTop:6,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextSection,{textAlign:"center",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:m})})}):null,t[4]=m,t[5]=p):p=t[5];var _=p,f=null;if(d){var g;if(t[6]!==d?(g=s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:d})}),t[6]=d,t[7]=g):g=t[7],f=g,_){var h;t[8]!==f?(h=s.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",children:f}),t[8]=f,t[9]=h):h=t[9],f=h}}var y;t[10]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(r("IGDSCircleCheckPanoOutlineIcon.react"),{alt:o("PolarisFRXWebReportStrings").CHECKMARK_ICON_ALT_TEXT,color:"ig-success",size:48}),t[10]=y):y=t[10];var C;return t[11]!==f||t[12]!==_?(C=s.jsx(r("IGDSBox.react"),{marginTop:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:s.jsxs(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",marginTop:6,position:"relative",children:[y,_,f]})}),t[11]=f,t[12]=_,t[13]=C):C=t[13],C}function m(e){var t=o("react-compiler-runtime").c(6),n=e.reportedOwner,a=e.screenPayload,i=a.response,l=i==null?void 0:i.follow_up_actions;if(!l||l.length===0)return null;var c;t[0]!==e?(c=function(n){u(e,n)},t[0]=e,t[1]=c):c=t[1];var d;return t[2]!==l||t[3]!==n||t[4]!==c?(d=s.jsx(r("PolarisFRXReportModalFollowUpActionSection.react"),{followUpActions:l,onSelectFollowupAction:c,reportedOwner:n}),t[2]=l,t[3]=n,t[4]=c,t[5]=d):d=t[5],d}l.default=c}),98);
__d("PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29609414422005335"}),null);
__d("PolarisFRXReportModalFetaSupervisionQuery.graphql",["PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"is_f3_supervised_user",storageKey:null},t={alias:null,args:null,concreteType:"XFBXMFCGuardianPreferredProfile",kind:"LinkedField",name:"f3_guardian_preferred_profile",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisFRXReportModalFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:e,action:"THROW"},t],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PolarisFRXReportModalFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,t,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation"),metadata:{},name:"PolarisFRXReportModalFetaSupervisionQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("PolarisFRXReportModalSupportHub.react",["CometPlaceholder.react","IGDSBox.react","IGDSSpinner.react","JSResourceForInteraction","PolarisFRXReportBaseScreenModal.react","PolarisNavigationUtils","lazyLoadComponent","react","react-compiler-runtime","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("lazyLoadComponent")(r("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisFRXReportModalSupportHub.react")),c="com.bloks.www.frx.support_hub_async";function d(e){var t,n=o("react-compiler-runtime").c(23),a=(t=e.is_igd)!=null?t:!1,l;n[0]!==e.location||n[1]!==e.tags_selected||n[2]!==a?(l={is_fullscreen_enabled:!1,is_igd:a,location:e.location,selected_tags:e.tags_selected,session_id:""+r("uuidv4")()},n[0]=e.location,n[1]=e.tags_selected,n[2]=a,n[3]=l):l=n[3];var d=l,p;n[4]!==e?(p=function(){e.onClose&&e.onClose()},n[4]=e,n[5]=p):p=n[5];var _=p,f;n[6]!==e?(f=function(){e.onGoBack&&e.onGoBack()},n[6]=e,n[7]=f):f=n[7];var g=f,h=m,y;n[8]!==g?(y=function(t){g()},n[8]=g,n[9]=y):y=n[9];var C=y,b;n[10]!==C?(b={"bk.action.navigation.OpenUrl":h,"bk.action.navigation.OpenUrlV2":h,"bk.action.screen.Close":C,"ig.action.navigation.OpenUrl":h},n[10]=C,n[11]=b):b=n[11];var v=b,S=!!e.onGoBack,R;n[12]!==g||n[13]!==S?(R={headerEnabled:!1,onBackButton:g,titleText:"Support",withBackButton:S},n[12]=g,n[13]=S,n[14]=R):R=n[14];var L=R,E;n[15]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",justifyContent:"center",position:"relative",children:s.jsx(r("IGDSSpinner.react"),{})}),n[15]=E):E=n[15];var k=E,I;n[16]!==v||n[17]!==d?(I=s.jsx(r("IGDSBox.react"),{color:"primaryBackground",minHeight:300,position:"relative",children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(u,{actionOverrides:v,appId:c,loadingFallback:k,params:d})})}),n[16]=v,n[17]=d,n[18]=I):I=n[18];var T;return n[19]!==L||n[20]!==_||n[21]!==I?(T=s.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:L,onClose:_,children:I}),n[19]=L,n[20]=_,n[21]=I,n[22]=T):T=n[22],T}function m(e,t){return o("PolarisNavigationUtils").openURLWithFullPageReload(t,{openInNewTab:!0})}l.default=d}),98);
__d("PolarisFRXComplianceScreenModal.react",["IGDSBox.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportMainButton.react","PolarisFRXReportModalRichText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(20),n=e.headerParams,a=e.onClose,i=e.screenPayload,l=i.response,u;t[0]!==l?(u=l||{},t[0]=l,t[1]=u):u=t[1];var d=u,m=d.button_text,p=d.contact_form_url,_=d.content,f=d.title,g;t[2]!==f?(g=f?s.jsx(r("IGDSBox.react"),{marginBottom:4,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",textAlign:"start",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:f})})}):null,t[2]=f,t[3]=g):g=t[3];var h;t[4]!==_?(h=_&&_.length>0?s.jsx(r("IGDSBox.react"),{position:"relative",children:_.map(c)}):null,t[4]=_,t[5]=h):h=t[5];var y;t[6]!==g||t[7]!==h?(y=s.jsxs(r("IGDSBox.react"),{marginTop:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:[g,h]}),t[6]=g,t[7]=h,t[8]=y):y=t[8];var C;t[9]!==m||t[10]!==p||t[11]!==e.onSubmitScreen?(C=(m==null?void 0:m.text)!=null?s.jsx(r("PolarisFRXReportMainButton.react"),{"data-testid":void 0,href:p,onClick:e.onSubmitScreen,text:m.text,textAlign:"center"}):null,t[9]=m,t[10]=p,t[11]=e.onSubmitScreen,t[12]=C):C=t[12];var b;t[13]!==C?(b=s.jsx(r("IGDSBox.react"),{marginBottom:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM,marginTop:4,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:C}),t[13]=C,t[14]=b):b=t[14];var v;return t[15]!==n||t[16]!==a||t[17]!==y||t[18]!==b?(v=s.jsxs(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:n,onClose:a,children:[y,b]}),t[15]=n,t[16]=a,t[17]=y,t[18]=b,t[19]=v):v=t[19],v}function c(e,t){return s.jsx(r("IGDSBox.react"),{marginBottom:3,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"start",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:e})})},t)}c.displayName=c.name+" [from "+i.id+"]",l.default=u}),98);
__d("PolarisFRXReportConfirmationScreenModal.react",["IGDSBox.react","IGDSCircleCheckPanoOutlineIcon.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportMainButton.react","PolarisFRXReportModalFollowUpActionSection.react","PolarisFRXReportModalRichText.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportStrings","PolarisGenericStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){var n=t.action_type;if(n!=null){var r=e.screenPayload.response;o("PolarisFRXWebReportAPIUtils").handleFRXGuidedAction({action_type:n,context:r==null?void 0:r.context})}}function c(e){var t=o("react-compiler-runtime").c(13),n=e.headerParams,a=e.onClose,i;t[0]!==a?(i=function(){return a()},t[0]=a,t[1]=i):i=t[1];var l=i,u,c;t[2]!==e?(u=s.jsx(d,babelHelpers.extends({},e)),c=s.jsx(m,babelHelpers.extends({},e)),t[2]=e,t[3]=u,t[4]=c):(u=t[3],c=t[4]);var p;t[5]!==l?(p=s.jsx(r("IGDSBox.react"),{marginBottom:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM,marginTop:4,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:s.jsx(r("PolarisFRXReportMainButton.react"),{"data-testid":void 0,onClick:l,text:o("PolarisGenericStrings").CLOSE_TEXT})}),t[5]=l,t[6]=p):p=t[6];var _;return t[7]!==n||t[8]!==l||t[9]!==u||t[10]!==c||t[11]!==p?(_=s.jsxs(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:n,onClose:l,children:[u,c,p]}),t[7]=n,t[8]=l,t[9]=u,t[10]=c,t[11]=p,t[12]=_):_=t[12],_}function d(e){var t=o("react-compiler-runtime").c(14),n=e.screenPayload,a;t[0]!==n?(a=n||{},t[0]=n,t[1]=a):a=t[1];var i=a,l=i.response,u;t[2]!==l?(u=l||{},t[2]=l,t[3]=u):u=t[3];var c=u,d=c.follow_up_actions_title,m=c.subtitle,p;t[4]!==m?(p=m?s.jsx(r("IGDSBox.react"),{alignItems:"start",marginTop:6,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",textAlign:"center",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:m})})}):null,t[4]=m,t[5]=p):p=t[5];var _=p,f=null;if(d){var g;if(t[6]!==d?(g=s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:d})}),t[6]=d,t[7]=g):g=t[7],f=g,_){var h;t[8]!==f?(h=s.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",children:f}),t[8]=f,t[9]=h):h=t[9],f=h}}var y;t[10]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(r("IGDSCircleCheckPanoOutlineIcon.react"),{alt:o("PolarisFRXWebReportStrings").CHECKMARK_ICON_ALT_TEXT,color:"ig-success",size:48}),t[10]=y):y=t[10];var C;return t[11]!==f||t[12]!==_?(C=s.jsx(r("IGDSBox.react"),{marginTop:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:s.jsxs(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",marginTop:6,position:"relative",children:[y,_,f]})}),t[11]=f,t[12]=_,t[13]=C):C=t[13],C}function m(e){var t=o("react-compiler-runtime").c(6),n=e.reportedOwner,a=e.screenPayload,i=a.response,l=i==null?void 0:i.follow_up_actions;if(!l||l.length===0)return null;var c;t[0]!==e?(c=function(n){u(e,n)},t[0]=e,t[1]=c):c=t[1];var d;return t[2]!==l||t[3]!==n||t[4]!==c?(d=s.jsx(r("PolarisFRXReportModalFollowUpActionSection.react"),{followUpActions:l,onSelectFollowupAction:c,reportedOwner:n}),t[2]=l,t[3]=n,t[4]=c,t[5]=d):d=t[5],d}l.default=c}),98);
__d("PolarisFRXReportModalScreenContentSectionList.react",["IGDSBox.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=4;function c(e){var t=o("react-compiler-runtime").c(7),n=e.sections,a=e.marginBetween,i=a===void 0?u:a,l;if(t[0]!==i||t[1]!==n){var c;t[3]!==i?(c=function(t,n){var e=n>0&&i!==0?s.jsx(r("IGDSBox.react"),{marginTop:i,position:"relative"}):null;return s.jsxs(s.Fragment,{children:[e,t]},"section-"+n)},t[3]=i,t[4]=c):c=t[4],l=n.filter(d).map(c),t[0]=i,t[1]=n,t[2]=l}else l=t[2];var m=l,p;return t[5]!==m?(p=s.jsx(s.Fragment,{children:m}),t[5]=m,t[6]=p):p=t[6],p}function d(e){return!!e}l.default=c}),98);
__d("PolarisFRXReportModalPolicyEducationSection.react",["IGDSBox.react","IGDSText.react","IGDSTextVariants.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=2,c=1,d="\u2022";function m(e,t){var n=e.first_paragraph,o=[];return[n].forEach(function(e){!e||(e==null?void 0:e.text)==null||(e==null?void 0:e.text)===""||o.push(s.jsx(r("IGDSText.react"),{color:"secondaryText",size:"body",weight:t?"semibold":"normal",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:e})}))}),o}function p(e){var t=e.policies,n=t===void 0?[]:t;if(!n||n.length===0)return[];var a=[];return n.forEach(function(e){var t=e.title;t&&a.push(s.jsx("div",{role:"listitem",children:s.jsxs(r("IGDSBox.react"),{direction:"row",position:"relative",children:[s.jsx(r("IGDSBox.react"),{marginEnd:2,position:"relative",children:s.jsx("div",{"aria-hidden":"true",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",zeroMargin:!0,children:d})})}),s.jsx(r("IGDSBox.react"),{flex:"grow",position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:t})})})]})}))}),a}function _(e){var t=o("react-compiler-runtime").c(23),n=e.policyEducation,a=n.second_paragraph,i=n.title,l;t[0]!==i?(l=i?s.jsx(o("IGDSTextVariants.react").IGDSTextSection,{zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:i})}):null,t[0]=i,t[1]=l):l=t[1];var d=l,_;t[2]!==n?(_=p(n),t[2]=n,t[3]=_):_=t[3];var f=_,g=f.length>0,h;t[4]!==n||t[5]!==g?(h=m(n,g),t[4]=n,t[5]=g,t[6]=h):h=t[6];var y=h,C;t[7]!==y||t[8]!==d?(C=y.length>0?s.jsx(r("IGDSBox.react"),{marginTop:d?u:0,position:"relative",children:s.jsx(r("PolarisFRXReportModalScreenContentSectionList.react"),{marginBetween:u,sections:y})}):null,t[7]=y,t[8]=d,t[9]=C):C=t[9];var b=C,v;t[10]!==b||t[11]!==f||t[12]!==d?(v=f.length>0?s.jsx(r("IGDSBox.react"),{marginTop:d||b?c:0,position:"relative",children:s.jsx("div",{role:"list",children:s.jsx(r("PolarisFRXReportModalScreenContentSectionList.react"),{marginBetween:c,sections:f})})}):null,t[10]=b,t[11]=f,t[12]=d,t[13]=v):v=t[13];var S=v,R;t[14]!==S||t[15]!==a||t[16]!==d?(R=a?s.jsxs(r("IGDSBox.react"),{marginTop:S?1:0,position:"relative",children:[s.jsx(r("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",zeroMargin:!0,children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:a})}),s.jsx(r("IGDSBox.react"),{height:d?2:10,position:"relative"})]}):null,t[14]=S,t[15]=a,t[16]=d,t[17]=R):R=t[17];var L=R,E;return t[18]!==b||t[19]!==S||t[20]!==L||t[21]!==d?(E=s.jsxs(r("IGDSBox.react"),{position:"relative",children:[d,L,b,S]}),t[18]=b,t[19]=S,t[20]=L,t[21]=d,t[22]=E):E=t[22],E}l.default=_}),98);
__d("PolarisFRXReportModalPromptButton.react",["fbt","PolarisFRXReportMainButton.react","PolarisFRXWebReportStateSelectors","PolarisReactRedux.react","react","react-compiler-runtime","useCometAccessibilityAlerts"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(15),n=o("PolarisReactRedux.react").useSelector(o("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing),a=r("useCometAccessibilityAlerts")(),i=a.accessibilityAlerts,l=a.triggerAccessibilityAlert,c=e.actionType,d=e.canSubmitOnClick,m=e.disabled,p=e.href,_=e.label,f=e.onSubmit,g=e.primaryButton,h=m===void 0?!1:m,y=g===void 0?!0:g,C=h||d&&n,b;t[0]!==c||t[1]!==d||t[2]!==f||t[3]!==l?(b=function(){l(s._(/*BTDS*/"Carregando")),d&&f&&f(c)},t[0]=c,t[1]=d,t[2]=f,t[3]=l,t[4]=b):b=t[4];var v=d&&n,S;t[5]!==p||t[6]!==_||t[7]!==y||t[8]!==C||t[9]!==b||t[10]!==v?(S=u.jsx(r("PolarisFRXReportMainButton.react"),{disabled:C,href:p,onClick:b,primaryButton:y,spinner:v,text:_}),t[5]=p,t[6]=_,t[7]=y,t[8]=C,t[9]=b,t[10]=v,t[11]=S):S=t[11];var R;return t[12]!==i||t[13]!==S?(R=u.jsxs(u.Fragment,{children:[S,i]}),t[12]=i,t[13]=S,t[14]=R):R=t[14],R}l.default=c}),226);
__d("PolarisFRXReportPolicyEducationScreenModal.react",["IGDSBox.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalPolicyEducationSection.react","PolarisFRXReportModalPromptButton.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisFRXWebReportUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(26),n=e.headerParams,a=e.onClose,i=e.screenPayload,l=i.response,u;t[0]!==l?(u=l||{},t[0]=l,t[1]=u):u=t[1];var m=u,p=m.policy_education,_=m.subtitle,f;t[2]!==_?(f=_?s.jsx(c,{subtitle:_}):null,t[2]=_,t[3]=f):f=t[3];var g=f,h;t[4]!==p?(h=p?s.jsx(r("PolarisFRXReportModalPolicyEducationSection.react"),{policyEducation:p}):null,t[4]=p,t[5]=h):h=t[5];var y=h,C;t[6]!==i?(C=o("PolarisFRXWebReportUtils").getPromptButtonRenderPropsFromScreenPayload(i),t[6]=i,t[7]=C):C=t[7];var b=C,v;t[8]!==b||t[9]!==e?(v=b?s.jsx(d,{parentProps:e,promptButtonProps:b}):null,t[8]=b,t[9]=e,t[10]=v):v=t[10];var S=v,R=null;if(p){var L=p.education_button;if(L){var E,k,I=(E=(k=L.title)==null?void 0:k.text)!=null?E:"",T;t[11]!==L.action_type||t[12]!==L.url||t[13]!==I?(T={actionType:L.action_type,canSubmitOnClick:!1,href:L.url,label:I,primaryButton:!1},t[11]=L.action_type,t[12]=L.url,t[13]=I,t[14]=T):T=t[14];var D=T,x;t[15]!==D?(x=s.jsx(r("PolarisFRXReportModalPromptButton.react"),babelHelpers.extends({},D)),t[15]=D,t[16]=x):x=t[16],R=x}}var $;t[17]!==R||t[18]!==y||t[19]!==S||t[20]!==g?($=s.jsx(r("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[g,y,S,R]}),t[17]=R,t[18]=y,t[19]=S,t[20]=g,t[21]=$):$=t[21];var P;return t[22]!==n||t[23]!==a||t[24]!==$?(P=s.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:n,onClose:a,children:$}),t[22]=n,t[23]=a,t[24]=$,t[25]=P):P=t[25],P}function c(e){var t=o("react-compiler-runtime").c(2),n=e.subtitle,a;return t[0]!==n?(a=s.jsx(r("IGDSBox.react"),{alignItems:"start",marginTop:2,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:n})})}),t[0]=n,t[1]=a):a=t[1],a}function d(e){var t=o("react-compiler-runtime").c(5),n=e.parentProps,a=e.promptButtonProps,i=n.onSubmitScreen,l;t[0]!==i?(l=function(t){return i(t)},t[0]=i,t[1]=l):l=t[1];var u;return t[2]!==a||t[3]!==l?(u=s.jsx(r("PolarisFRXReportModalPromptButton.react"),babelHelpers.extends({},a,{onSubmit:l})),t[2]=a,t[3]=l,t[4]=u):u=t[4],u}l.default=u}),98);
__d("PolarisReportSearchBoxContainer.react",["PolarisMobileSearchBox.react","PolarisReactRedux.react","PolarisSearchActions","polarisSearchSelectors","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.search,n=o("polarisSearchSelectors").getCurrentSearchContent(e);return{currentTab:t.currentSearchTab,discoverToken:"",loading:n.loading,rankToken:n.rankToken,results:n.results,searchedForQuery:n.searchedForQuery,selectedIndex:n.selectedIndex,suggested:t.suggested}}function c(e){return{onClearSearch:function(){e(o("PolarisSearchActions").clearSearch())},onNavigateToResult:function(n,r,a){e(o("PolarisSearchActions").navigateToResult(n,r,a))},onSearch:function(n,r,a,i,l){e(o("PolarisSearchActions").search(n,r,a))},onSelectResult:function(n,r){e(o("PolarisSearchActions").selectResult(n,r))}}}var d=o("PolarisReactRedux.react").connect(u,c)(r("PolarisMobileSearchBox.react"));l.default=d}),98);
__d("PolarisReportButton.react",["PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.color,i=e.disabled,l=e.onClick,u=a===void 0?"ig-primary-button":a,c;return t[0]!==n||t[1]!==u||t[2]!==i||t[3]!==l?(c=s.jsx(r("PolarisIGCoreButton.react"),{color:u,disabled:i,fullWidth:!0,large:!0,onClick:l,children:n}),t[0]=n,t[1]=u,t[2]=i,t[3]=l,t[4]=c):c=t[4],c}l.default=u}),98);
__d("PolarisReportUserImpersonationListItem.react",["IGDSBox.react","IGDSListItem.react","IGDSTextVariants.react","PolarisAssetManagerGlyphMapping","PolarisGenericStrings","PolarisIGCoreIcon.react","PolarisReportButton.react","PolarisReportStrings","PolarisUserAvatar.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$1=function(){t.props.onReport()},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){var e=this.props.result;return s.jsx(r("IGDSListItem.react"),{addOnEnd:s.jsx(r("PolarisReportButton.react"),{onClick:this.$1,children:o("PolarisReportStrings").nextText}),addOnStart:s.jsx(r("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:e.profilePictureUrl,size:44,username:e.username}),subtitle:e.fullName,title:s.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",display:"block",children:[s.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{breakWord:!0,children:e.username}),e.isVerified?s.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginStart:1,children:s.jsx(r("PolarisIGCoreIcon.react"),{alt:o("PolarisGenericStrings").VERIFIED_TEXT,icon:o("PolarisAssetManagerGlyphMapping").ICONS.VERIFIED_SMALL})}):null]})})},t})(s.Component);l.ReportUserImpersonationListItem=u}),98);
__d("PolarisReportUserImpersonationSearchBox.react",["IGDSBox.react","PolarisReportSearchBoxContainer.react","PolarisReportUserImpersonationListItem.react","PolarisSearchConstants","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(23),n=e.fromWebview,a=e.onSelectVictim,i=e.reportedUserID,l=e.searchBoxPlaceHolder,u=e.userSearchResults,c=e.verifiedOnly,d=n===void 0?!1:n,m;t[0]!==l?(m=s.jsx(r("PolarisReportSearchBoxContainer.react"),{analyticsContext:void 0,disableResultKeyboardNav:!0,hideCancelButton:!0,isActive:!0,placeholder:l,searchContext:o("PolarisSearchConstants").SEARCH_CONTEXT.USER,useHistory:!0}),t[0]=l,t[1]=m):m=t[1];var p=d?0:2,_;t[2]!==d?(_={0:{},1:{className:"x14sbp7s x14xr3q5"}}[!!d<<0],t[2]=d,t[3]=_):_=t[3];var f;if(t[4]!==a||t[5]!==i||t[6]!==u||t[7]!==c){var g;t[9]!==i||t[10]!==c?(g=function(t){return c?t.isVerified&&t.pk!==i.toString():t.pk!==i.toString()},t[9]=i,t[10]=c,t[11]=g):g=t[11];var h;t[12]!==a?(h=function(t,n){return s.jsx(o("PolarisReportUserImpersonationListItem.react").ReportUserImpersonationListItem,{onReport:function(){return a(t)},result:t},n)},t[12]=a,t[13]=h):h=t[13],f=u.filter(g).map(h),t[4]=a,t[5]=i,t[6]=u,t[7]=c,t[8]=f}else f=t[8];var y;t[14]!==_||t[15]!==f?(y=s.jsx("div",babelHelpers.extends({},_,{children:f})),t[14]=_,t[15]=f,t[16]=y):y=t[16];var C;t[17]!==p||t[18]!==y?(C=s.jsx(r("IGDSBox.react"),{color:"primaryBackground",marginTop:p,position:"relative",children:y}),t[17]=p,t[18]=y,t[19]=C):C=t[19];var b;return t[20]!==m||t[21]!==C?(b=s.jsxs("div",{children:[m,C]}),t[20]=m,t[21]=C,t[22]=b):b=t[22],b}l.default=u}),98);
__d("PolarisFRXReportSelectVictimScreenModal.react",["IGDSBox.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisReactRedux.react","PolarisReportConstants","PolarisReportUserImpersonationSearchBox.react","PolarisSearchActions","PolarisSearchConstants","polarisSearchSelectors","react","react-compiler-runtime","useJSON"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){for(var t=e.allSearchResults,n=[],r=0;r<t.length;r++){var o=t[r];o.type==="USER_RESULT"&&n.push(o)}return n}function d(e){var t=o("react-compiler-runtime").c(3),n=e.onClearSearch,r,a;t[0]!==n?(r=function(){return function(){n()}},a=[n],t[0]=n,t[1]=r,t[2]=a):(r=t[1],a=t[2]),u(r,a)}function m(e){d(e);var t=e.headerParams,n=e.onClose,a=e.onSelectVictim,i=e.reportedOwner,l=e.screenPayload,u=l.response,m=u||{},p=m.subtitle,_=u.context,f=i.id,g=p?s.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{children:s.jsx(r("PolarisFRXReportModalRichText.react"),{richText:p})})}):null,h=!1;try{var y=r("useJSON")(_!=null?_:null),C=y==null?void 0:y.tags;h=(C==null?void 0:C.includes(o("PolarisReportConstants").IGUserImpersonationSomeoneIFollowTag.tag_type))===!0}catch(e){h=!1}var b=!h,v=s.jsx(r("PolarisReportUserImpersonationSearchBox.react"),{onSelectVictim:function(t){return a(t)},reportedUserID:f,searchBoxPlaceHolder:o("PolarisSearchConstants").IMPERSONATION_SEARCH_TEXT,userSearchResults:c(e),verifiedOnly:b});return s.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:t,onClose:n,children:s.jsx(r("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[g,v]})})}m.displayName=m.name+" [from "+i.id+"]";function p(e){var t=o("polarisSearchSelectors").getCurrentSearchContent(e),n=t.results;return{allSearchResults:n}}var _={onClearSearch:o("PolarisSearchActions").clearSearch},f=o("PolarisReactRedux.react").connect(p,_)(m);l.default=f}),98);
__d("PolarisFRXReportTagSelectionScreenModal.react",["IGDSBox.react","IGDSInfoPanoFilledIcon.react","IGDSText.react","IGDSTextVariants.react","InstagramAdHideResponseFalcoEvent","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalOptionList.react","PolarisFRXReportModalOptionListItem.react","PolarisFRXReportModalPolicyEducationSection.react","PolarisFRXReportModalPromptButton.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportConstants","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportUtils","PolarisFastLink.react","PolarisReactRedux.react","PolarisReportConstants","goUriOnNewWindow","isEmpty","isStringNullOrEmpty","polarisAdsSelectors.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useRef,p=c.useState,_={ctaLink:{cursor:"x1ypdohk",$$css:!0}},f=null,g="";function h(e,t,n,a){var i,l=e.isFRXScreenRequestProcessing,s=e.onSubmitScreen,u=e.screenPayload.response,c=t.setStateSelectedTagTitle,d=t.setStateSelectedTagType,m=n.tag_type,p=n.title,_=(i=p==null?void 0:p.text)!=null?i:"";if(n.tag_click_override_url!=null){r("goUriOnNewWindow")(n.tag_click_override_url);return}l||m==null||m===""||(d(m),c(_),o("PolarisFRXWebReportAPIUtils").logFRXTagSelected({context:u==null?void 0:u.context,selected_tag_type:m}),a||s({selectedPromptButtonActionType:null,selectedTagTitles:[_],selectedTagTypes:[m]}))}function y(e,t,n){var o=e.onSubmitScreen,a=t.selectedTagTitle,i=t.selectedTagType;r("isStringNullOrEmpty")(i)||o({selectedPromptButtonActionType:n,selectedTagTitles:[a],selectedTagTypes:[i]})}function C(e){var t=e.onComplianceContextualMessageClicked,n=e.screenPayload,r=n.response,o=r||{},a=o.compliance;a&&t({complianceType:a.type,isComplianceNavigation:!0})}function b(){var e=o("react-compiler-runtime").c(3),t=p(f),n=t[0],r=t[1],a=p(g),i=a[0],l=a[1],s;return e[0]!==i||e[1]!==n?(s={selectedTagTitle:i,selectedTagType:n,setStateSelectedTagTitle:l,setStateSelectedTagType:r},e[0]=i,e[1]=n,e[2]=s):s=e[2],s}function v(e,t){var n=t.setStateSelectedTagTitle,r=t.setStateSelectedTagType,o=e.screenPayload.frxScreenRequestID,a=m(),i=a.current;d(function(){a.current=o,o!==i&&(r(f),n(g))},[o,i,r,n])}function S(e){var t=o("react-compiler-runtime").c(7),n=b();v(e,n);var r=e.headerParams,a=e.onClose,i;t[0]!==e||t[1]!==n?(i=u.jsx(R,{parentProps:e,parentState:n}),t[0]=e,t[1]=n,t[2]=i):i=t[2];var l;return t[3]!==r||t[4]!==a||t[5]!==i?(l=u.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:r,onClose:a,children:i}),t[3]=r,t[4]=a,t[5]=i,t[6]=l):l=t[6],l}function R(t){var n=o("react-compiler-runtime").c(32),a=t.parentProps,i=t.parentState,l=a.screenPayload,s=l.response,c,d,m,p,_;if(n[0]!==s){var f,g,h=s||{},y=h.compliance,b=h.policy_education,v=h.report_tags,S=h.second_subtitle,R=h.subtitle;c=y,d=b,m=v,p=R&&!(e||(e=r("isEmpty")))((f=R.text)==null?void 0:f.trim())?u.jsx(L,{subtitle:R}):null,_=S&&!(e||(e=r("isEmpty")))((g=S.text)==null?void 0:g.trim())?u.jsx(E,{secondSubtitle:S}):null,n[0]=s,n[1]=c,n[2]=d,n[3]=m,n[4]=p,n[5]=_}else c=n[1],d=n[2],m=n[3],p=n[4],_=n[5];var x=_,$;n[6]!==a||n[7]!==i||n[8]!==m?($=m&&m.length>0?u.jsx(k,{parentProps:a,parentState:i,reportTags:m}):null,n[6]=a,n[7]=i,n[8]=m,n[9]=$):$=n[9];var P=$,N;n[10]!==c||n[11]!==a?(N=c?u.jsx(I,{compliance:c,onOpenComplianceScreen:function(){C(a)}}):null,n[10]=c,n[11]=a,n[12]=N):N=n[12];var M=N,w;n[13]!==d?(w=d?u.jsx(T,{policyEducation:d}):null,n[13]=d,n[14]=w):w=n[14];var A=w,F;n[15]!==l?(F=o("PolarisFRXWebReportUtils").getPromptButtonRenderPropsFromScreenPayload(l),n[15]=l,n[16]=F):F=n[16];var O=F,B;n[17]!==a||n[18]!==i||n[19]!==O?(B=O?u.jsx(D,{parentProps:a,parentState:i,promptButtonProps:O}):null,n[17]=a,n[18]=i,n[19]=O,n[20]=B):B=n[20];var W=B,q=p!=null?o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP:0,U=A||W?o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM:0,V;n[21]!==M||n[22]!==A||n[23]!==W||n[24]!==P||n[25]!==x||n[26]!==p?(V=u.jsx(r("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[p,x,P,M,A,W]}),n[21]=M,n[22]=A,n[23]=W,n[24]=P,n[25]=x,n[26]=p,n[27]=V):V=n[27];var H;return n[28]!==U||n[29]!==q||n[30]!==V?(H=u.jsx(r("IGDSBox.react"),{marginBottom:U,marginTop:q,position:"relative",children:V}),n[28]=U,n[29]=q,n[30]=V,n[31]=H):H=n[31],H}function L(e){var t=o("react-compiler-runtime").c(2),n=e.subtitle,a;return t[0]!==n?(a=u.jsx(r("IGDSBox.react"),{alignItems:"start",marginTop:2,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",children:u.jsx(r("PolarisFRXReportModalRichText.react"),{richText:n})})}),t[0]=n,t[1]=a):a=t[1],a}function E(e){var t=o("react-compiler-runtime").c(2),n=e.secondSubtitle,a;return t[0]!==n?(a=u.jsx(r("IGDSBox.react"),{marginTop:0,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:u.jsx(r("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",zeroMargin:!0,children:u.jsx(r("PolarisFRXReportModalRichText.react"),{richText:n})})}),t[0]=n,t[1]=a):a=t[1],a}function k(e){var t=o("react-compiler-runtime").c(24),n=e.parentProps,a=e.parentState,i=e.reportTags,l=n.frxMetadata,s=n.isFRXScreenRequestProcessing,c=n.onSelectReportAd,d=n.screenPayload,m=d.response,p=m||{},_=p.style,f=a.selectedTagType,g=_===o("PolarisFRXWebReportConstants").FRX_TAG_SELECTION_STYLE_INTS.RADIO_BUTTONS,y=o("polarisAdsSelectors.react").useFRXReportAdLoggingParams(l.object_id,l.location),C;if(t[0]!==l.object_id||t[1]!==l.object_type||t[2]!==y||t[3]!==s||t[4]!==c||t[5]!==n||t[6]!==a||t[7]!==i||t[8]!==f||t[9]!==g){var b;t[11]!==l.object_id||t[12]!==l.object_type||t[13]!==y||t[14]!==s||t[15]!==c||t[16]!==n||t[17]!==a||t[18]!==f||t[19]!==g?(b=function(t,i){var e=t.tag_type,d=t.title,m=f===e,p=s&&m&&!g,_=g?o("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_VARIANTS.RADIO:o("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_VARIANTS.BUTTON,C="tag-"+i;return u.jsx(o("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{"data-testid":void 0,loading:p,onSelect:function(){l.object_type===o("PolarisReportConstants").FRXObjectType.AD&&(c!=null?c(e):r("InstagramAdHideResponseFalcoEvent").log(function(){return babelHelpers.extends({ad_id:l.object_id,response:e},y)})),h(n,a,t,g)},selected:m,value:C,variant:_,children:d==null?void 0:d.text},C)},t[11]=l.object_id,t[12]=l.object_type,t[13]=y,t[14]=s,t[15]=c,t[16]=n,t[17]=a,t[18]=f,t[19]=g,t[20]=b):b=t[20],C=i.map(b),t[0]=l.object_id,t[1]=l.object_type,t[2]=y,t[3]=s,t[4]=c,t[5]=n,t[6]=a,t[7]=i,t[8]=f,t[9]=g,t[10]=C}else C=t[10];var v=C,S;return t[21]!==v||t[22]!==g?(S=u.jsx(r("PolarisFRXReportModalOptionList.react"),{asRadio:g,children:v}),t[21]=v,t[22]=g,t[23]=S):S=t[23],S}function I(e){var t=o("react-compiler-runtime").c(13),n=e.compliance,a=e.onOpenComplianceScreen,i=n.cta,l=n.description,s=n.title;if(n.type===o("PolarisFRXWebReportConstants").FRX_COMPLIANCE_SCREEN_TYPE_INTS.NONE)return null;var c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=u.jsx(r("IGDSBox.react"),{alignItems:"start",display:"flex",marginEnd:4,marginTop:0,minWidth:20,children:u.jsx(r("IGDSInfoPanoFilledIcon.react"),{alt:"info_pano_icon",color:"ig-primary-icon",size:20})}),t[0]=c):c=t[0];var d;t[1]!==s?(d=s&&u.jsx(r("IGDSBox.react"),{marginBottom:4,children:u.jsx(r("IGDSText.react"),{color:"primaryText",size:"body",weight:"semibold",children:u.jsx(r("PolarisFRXReportModalRichText.react"),{richText:s})})}),t[1]=s,t[2]=d):d=t[2];var m;t[3]!==i||t[4]!==l?(m=l&&u.jsx(r("IGDSBox.react"),{marginBottom:i?4:0,children:u.jsx(r("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",children:u.jsx(r("PolarisFRXReportModalRichText.react"),{richText:l})})}),t[3]=i,t[4]=l,t[5]=m):m=t[5];var p;t[6]!==i||t[7]!==a?(p=i&&u.jsx(r("IGDSBox.react"),{xstyle:_.ctaLink,children:u.jsx(r("IGDSText.react"),{color:"link",size:"body",weight:"normal",children:u.jsx(r("PolarisFastLink.react"),{onClick:a,children:u.jsx(r("PolarisFRXReportModalRichText.react"),{richText:i})})})}),t[6]=i,t[7]=a,t[8]=p):p=t[8];var f;return t[9]!==d||t[10]!==m||t[11]!==p?(f=u.jsx(r("IGDSBox.react"),{marginBottom:8,paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:u.jsxs(r("IGDSBox.react"),{direction:"row",display:"flex",shape:"rounded",children:[c,u.jsxs(r("IGDSBox.react"),{direction:"column",display:"flex",flex:"grow",children:[d,m,p]})]})}),t[9]=d,t[10]=m,t[11]=p,t[12]=f):f=t[12],f}function T(e){var t=o("react-compiler-runtime").c(2),n=e.policyEducation,a;return t[0]!==n?(a=u.jsx(r("IGDSBox.react"),{paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:u.jsx(r("PolarisFRXReportModalPolicyEducationSection.react"),{policyEducation:n})}),t[0]=n,t[1]=a):a=t[1],a}function D(e){var t=o("react-compiler-runtime").c(7),n=e.parentProps,a=e.parentState,i=e.promptButtonProps,l=a.selectedTagType,s=!l,c;t[0]!==n||t[1]!==a?(c=function(t){return y(n,a,t)},t[0]=n,t[1]=a,t[2]=c):c=t[2];var d;return t[3]!==i||t[4]!==s||t[5]!==c?(d=u.jsx(r("IGDSBox.react"),{paddingX:o("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:u.jsx(r("PolarisFRXReportModalPromptButton.react"),babelHelpers.extends({},i,{disabled:s,onSubmit:c}))}),t[3]=i,t[4]=s,t[5]=c,t[6]=d):d=t[6],d}function x(e){return{isFRXScreenRequestProcessing:o("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing(e)}}var $=o("PolarisReactRedux.react").connect(x,null)(S);l.default=$}),98);
__d("PolarisFRXReportUtils",[],(function(t,n,r,o,a,i){"use strict";var e=["ig_ad_ip_violation","ig_ad_ip_violation","ig_intellectual_property_v1","ig_ar_effect_ip_violation","ig_intellectual_property_direct_message","ig_hashtag_intellectual_property","ig_ad_spam","ig_spam_v3","ig_spam_direct_message","ig_bullying_or_harassment_comment_v3","ig_bullying_or_harassment_direct_message","ig_hashtag_bullying_or_harassment","ig_ar_effect_harassment_or_bullying","ig_harassment_or_bullying","ig_nudity_v2","ig_nudity_direct_message","ig_clips_audio_page_nudity","ig_clips_effect_page_nudity","ig_clips_prompt_page_nudity","ig_hashtag_nudity","ig_ar_effect_nudity_or_pornography","ig_ad_sexually_inappropriate","ig_iab_sexually_inappropriate","product_sexualized_content_or_adult_products","bi_commerce_sexualized_or_adult_content","inappropriate_content","ig_commerce_ugc_graphic_content","bi_commerce_abusive_or_harmful","ig_violence_parent","ig_ad_violent_prohibited","ig_ar_effect_violence","ig_violence_direct_message","ig_hashtag_violence","ig_violence_v3","ig_violence","ig_dangerous_org_or_individual","ig_hate_speech_v3","ig_ar_effect_hate_speech","ig_hate_speech_direct_message","ig_hashtag_hate_speech","ig_i_dont_like_it_v3","ig_ar_effect_i_dont_like_it","ig_i_dont_like_it_direct_message","ig_ad_offensive","ig_self_injury_v3","ig_ar_effect_self_injury","ig_hashtag_self_injury","ig_self_injury_direct_message","ig_ad_scam_misleading","ig_product_scam_fraud_v2","ig_product_scam_fraud_reportable","ig_iab_scam_misleading","bi_commerce_misleading_or_possible_scam","ig_sale_of_illegal_or_regulated_goods_v3","ig_sale_of_illegal_or_regulated_goods_direct_message","ig_sale_of_illegal_or_regulated_goods_v2","ig_ar_effect_drugs","ig_ar_effect_firearms","bi_commerce_alcohol_tobacco_and_weapons","bi_commerce_animal_products_or_sales","ig_false_news","ig_ar_effect_false_information","ig_report_report_as_unlawful","bi_commerce_discriminatory_listing","discrimination","ig_something_else","something_else","ig_ad_political","ig_eating_disorder","bi_commerce_buying_or_selling","ig_commerce_ugc_manipulation","ig_commerce_ugc_irrelevance","ig_commerce_review_irrelevant","ig_commerce_fake_review","ig_commerce_product_answer_irrelevant","ig_commerce_product_question_irrelevant","ig_user_impersonation","ig_unwanted_joiner","ig_iab_excessive_ads","ig_iab_other","page_place_inaccurate_info","bi_commerce_service_or_job","product_no_intent_to_sale","bi_commerce_appears_to_be_counterfeit","bi_commerce_health_or_wellness","bi_commerce_other_prohibited","bi_commerce_no_service_offered","bi_commerce_health_or_medical","information_misuse","dont_recognize_activity"];function l(t){return e.includes(t)}i.shouldUseTagType=l}),66);
__d("PolarisFRXReportScreenModal.react",["IGDSBox.react","IGDSSpinner.react","PolarisFRXComplianceScreenModal.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportConfirmationScreenModal.react","PolarisFRXReportPolicyEducationScreenModal.react","PolarisFRXReportSelectVictimScreenModal.react","PolarisFRXReportTagSelectionScreenModal.react","PolarisFRXReportUtils","PolarisFRXWebReportActions","PolarisFRXWebReportConstants","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisFRXWebReportUtils","PolarisReactRedux.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useState;function c(e){e.onClose&&e.onClose()}function d(e){var t=e.isFRXScreenRequestProcessing,n=e.onGoBackOneFRXScreen;n&&!t&&n()}function m(e,t){var n=e.frxMetadata,r=e.isFRXScreenRequestProcessing,a=e.onRequestNextFRXScreen,i=e.onStoreReportedTagTitle,l=e.reportedTagTitle,s=e.screenPayload;if(!r){var u=s||{},c=u.response,d=u.type,m=c||{},p=m.context,_=t==null?void 0:t.selectedTagTypes,f=_!=null&&_.length>0?_[0]:null,g=t==null?void 0:t.selectedTagTitles,h=g!=null&&g.length>0?g[0]:"";l===""&&f!=null&&o("PolarisFRXReportUtils").shouldUseTagType(f)&&h!==""&&i(h);var y=(t==null?void 0:t.isComplianceNavigation)===!0,C=y?o("PolarisFRXWebReportConstants").FRX_SCREEN_INPUT_REQUEST_TYPE_INTS.COMPLIANCE_CARD:o("PolarisFRXWebReportUtils").getNextFRXScreenInputRequestTypeFromScreenPayloadType(d);C!=null&&a({context:p,frxPromptRequestType:C,metadata:n,optionalParams:t})}}function p(e){var t=o("react-compiler-runtime").c(67),n=e.frxMetadata,a=e.hasMountedScreenFlow,i=e.hasPreviousScreens,l=e.isFRXScreenRequestProcessing,p=e.onSelectReportAd,g=e.reportedOwner,h=e.screenPayload,y=e.showFRXDropOffSurveyModal,C=e.threadId,b;t[0]!==e?(b=function(){return d(e)},t[0]=e,t[1]=b):b=t[1];var v;t[2]!==i||t[3]!==h||t[4]!==b?(v=o("PolarisFRXReportBaseScreenModal.react").getDefaultScreenModalHeaderParamsFromScreenPayload(h,i,b),t[2]=i,t[3]=h,t[4]=b,t[5]=v):v=t[5];var S=v,R=u(!1),L=R[0],E=R[1],k;t[6]!==e?(k=function(){E(!0),c(e)},t[6]=e,t[7]=k):k=t[7];var I=k,T;t[8]!==S||t[9]!==I?(T=s.jsx(f,{headerParams:S,onClose:I}),t[8]=S,t[9]=I,t[10]=T):T=t[10];var D=T;if(!h){if(l||!a||L){var x;return t[11]!==S||t[12]!==I?(x=s.jsx(_,{headerParams:S,onClose:I}),t[11]=S,t[12]=I,t[13]=x):x=t[13],x}return D}var $=h.type;switch($){case o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.TAG_SELECTION:{var P;t[14]!==I||t[15]!==y?(P=function(){I(),y!=null&&y()},t[14]=I,t[15]=y,t[16]=P):P=t[16];var N;t[17]!==e?(N=function(n){m(e,babelHelpers.extends({},n))},t[17]=e,t[18]=N):N=t[18];var M;t[19]!==e?(M=function(n){m(e,babelHelpers.extends({},n))},t[19]=e,t[20]=M):M=t[20];var w;return t[21]!==n||t[22]!==S||t[23]!==p||t[24]!==h||t[25]!==P||t[26]!==N||t[27]!==M?(w=s.jsx(r("PolarisFRXReportTagSelectionScreenModal.react"),{frxMetadata:n,headerParams:S,onClose:P,onComplianceContextualMessageClicked:N,onSelectReportAd:p,onSubmitScreen:M,screenPayload:h}),t[21]=n,t[22]=S,t[23]=p,t[24]=h,t[25]=P,t[26]=N,t[27]=M,t[28]=w):w=t[28],w}case o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.POLICY_EDUCATION:{var A;t[29]!==I||t[30]!==y?(A=function(){I(),y!=null&&y()},t[29]=I,t[30]=y,t[31]=A):A=t[31];var F;t[32]!==e||t[33]!==g.id||t[34]!==C?(F=function(n){m(e,{responsible_id:g.id,selectedPromptButtonActionType:n,thread_id:C})},t[32]=e,t[33]=g.id,t[34]=C,t[35]=F):F=t[35];var O;return t[36]!==S||t[37]!==h||t[38]!==A||t[39]!==F?(O=s.jsx(r("PolarisFRXReportPolicyEducationScreenModal.react"),{headerParams:S,onClose:A,onSubmitScreen:F,screenPayload:h}),t[36]=S,t[37]=h,t[38]=A,t[39]=F,t[40]=O):O=t[40],O}case o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION:{var B;return t[41]!==S||t[42]!==I||t[43]!==g||t[44]!==h?(B=s.jsx(r("PolarisFRXReportConfirmationScreenModal.react"),{headerParams:S,onClose:I,reportedOwner:g,screenPayload:h}),t[41]=S,t[42]=I,t[43]=g,t[44]=h,t[45]=B):B=t[45],B}case o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.SELECT_VICTIM:{var W;t[46]!==I||t[47]!==y?(W=function(){I(),y!=null&&y()},t[46]=I,t[47]=y,t[48]=W):W=t[48];var q;t[49]!==e?(q=function(n){m(e,{selectedVictimID:n.pk})},t[49]=e,t[50]=q):q=t[50];var U;return t[51]!==S||t[52]!==g||t[53]!==h||t[54]!==W||t[55]!==q?(U=s.jsx(r("PolarisFRXReportSelectVictimScreenModal.react"),{headerParams:S,onClose:W,onSelectVictim:q,reportedOwner:g,screenPayload:h}),t[51]=S,t[52]=g,t[53]=h,t[54]=W,t[55]=q,t[56]=U):U=t[56],U}case o("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.COMPLIANCE_CARD:{var V;t[57]!==I||t[58]!==y?(V=function(){I(),y!=null&&y()},t[57]=I,t[58]=y,t[59]=V):V=t[59];var H;t[60]!==I?(H=function(){I()},t[60]=I,t[61]=H):H=t[61];var G;return t[62]!==S||t[63]!==h||t[64]!==V||t[65]!==H?(G=s.jsx(r("PolarisFRXComplianceScreenModal.react"),{headerParams:S,onClose:V,onSubmitScreen:H,screenPayload:h}),t[62]=S,t[63]=h,t[64]=V,t[65]=H,t[66]=G):G=t[66],G}default:return D}}function _(e){var t=o("react-compiler-runtime").c(4),n=e.headerParams,a=e.onClose,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",justifyContent:"center",minHeight:122,position:"relative",children:s.jsx(r("IGDSSpinner.react"),{})}),t[0]=i):i=t[0];var l;return t[1]!==n||t[2]!==a?(l=s.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:n,onClose:a,children:i}),t[1]=n,t[2]=a,t[3]=l):l=t[3],l}function f(e){var t=o("react-compiler-runtime").c(3),n=e.headerParams,r=e.onClose,a;return t[0]!==n||t[1]!==r?(a=s.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:n,onClose:r,children:o("PolarisFRXWebReportStrings").DEFAULT_ERROR_MESSAGE_TEXT}),t[0]=n,t[1]=r,t[2]=a):a=t[2],a}function g(e){return{isFRXScreenRequestProcessing:o("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing(e),reportedTagTitle:o("PolarisFRXWebReportStateSelectors").getReportedTagTitle(e)}}var h={onRequestNextFRXScreen:o("PolarisFRXWebReportActions").doRequestNextFRXScreenAction,onStoreReportedTagTitle:o("PolarisFRXWebReportActions").doStoreReportedTagTitle},y=o("PolarisReactRedux.react").connect(g,h)(p);l.default=y}),98);
__d("PolarisFRXUnfollowUserFollowupModal.react",["PolarisConnectionsLogger","PolarisUnfollowDialog.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.onClose,a=e.userToUnfollow,i=a.id;if(!i)return null;var l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={},t[0]=l):l=t[0];var u;return t[1]!==n||t[2]!==i?(u=s.jsx(r("PolarisUnfollowDialog.react"),{analyticsContext:o("PolarisConnectionsLogger").CONNECTIONS_CONTAINER_MODULES.frx_web_reporting,analyticsExtra:l,onClose:n,userId:i}),t[1]=n,t[2]=i,t[3]=u):u=t[3],u}l.default=u}),98);
__d("PolarisFRXReportModal.react",["IGDSBox.react","IGDSSpinner.react","PolarisFRXBlockUserFollowupModal.react","PolarisFRXNotifyGuardianFollowupModal.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportConfirmationScreenModalForSupervision.react","PolarisFRXReportModalFetaSupervisionQuery.graphql","PolarisFRXReportModalSupportHub.react","PolarisFRXReportScreenModal.react","PolarisFRXUnfollowUserFollowupModal.react","PolarisFRXWebReportActions","PolarisFRXWebReportState","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisReactRedux.react","PolarisReportConstants","nullthrows","react","react-compiler-runtime","react-relay/relay-hooks/useLazyLoadQuery","usePolarisAnalyticsContext","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useMemo,p=c.useState;function _(e){var t=e.frxObjectType,n=e.isAfterConfirmationScreen,r=e.onClose,o=e.onConfirm,a=e.onDoReportingModalClosedAction,i=e.reportedObjectID;n&&o!=null&&o(),a({isAfterConfirmationScreen:n,reportedObjectID:i,reportedObjectType:t}),r&&r()}function f(e){var t=e.onGoBackOneFRXScreen;t()}function g(e,t,n){if(t===!0){var r=e.onDoDisableNotifyGuardianOption;r()}var o=e.onDoOpenNotifyGuardianFollowupModalToPreviousScreen,a=e.reportedOwner.id;o(t,n,a,e.reportedTagTitle)}function h(e,t,n,r){var a=o("react-compiler-runtime").c(6),i=e.onRequestInitFRXScreen,l,s;a[0]!==r||a[1]!==t||a[2]!==i||a[3]!==n?(l=function(){t||(i(r),n(!0))},s=[n,t,r,i],a[0]=r,a[1]=t,a[2]=i,a[3]=n,a[4]=l,a[5]=s):(l=a[4],s=a[5]),d(l,s)}function y(t){var a,i,l,s,c=o("react-compiler-runtime").c(70),d=p(!1),m=d[0],y=d[1],C=t.containerModule,b=t.currScreenPayload,v=t.currRenderStep,S=t.screenHistorySize,R=t.reportedObjectID,L=t.frxEntryPoint,E=t.frxLocation,k=t.frxObjectType,I=t.reportedOwner,T=t.showFRXDropOffSurveyModal,D=t.useSimpleBlockModalWithoutRefresh,x=t.threadId,$=t.threadKey,P=t.onSelectReportAd,N=t.isGroupThread,M=t.shouldReportAsInstamadillo,w=L===void 0?o("PolarisReportConstants").FRXEntryPoint.CHEVRON_BUTTON:L,A=r("usePolarisAnalyticsContext")(),F=o("PolarisReactRedux.react").useDispatch(),O,B=C!=null?C:A,W;c[0]!==w||c[1]!==E||c[2]!==k||c[3]!==R||c[4]!==B?(W={container_module:B,entry_point:w,location:E,object_id:R,object_type:k},c[0]=w,c[1]=E,c[2]=k,c[3]=R,c[4]=B,c[5]=W):W=c[5],O=W;var q=O;h(t,m,y,q);var U;c[6]!==t?(U=function(){return _(t)},c[6]=t,c[7]=U):U=c[7];var V=U,H=S>1,G;c[8]!==t?(G=function(){return f(t)},c[8]=t,c[9]=G):G=c[9];var z;c[10]!==b||c[11]!==H||c[12]!==G?(z=o("PolarisFRXReportBaseScreenModal.react").getDefaultScreenModalHeaderParamsFromScreenPayload(b,H,G),c[10]=b,c[11]=H,c[12]=G,c[13]=z):z=c[13];var j=z,K;c[14]!==j||c[15]!==V?(K=u.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:j,onClose:V,children:o("PolarisFRXWebReportStrings").DEFAULT_ERROR_MESSAGE_TEXT}),c[14]=j,c[15]=V,c[16]=K):K=c[16];var Q=K,X;c[17]===Symbol.for("react.memo_cache_sentinel")?(X=u.jsx(r("IGDSBox.react"),{alignContent:"center",alignItems:"center",justifyContent:"center",minHeight:122,position:"relative",children:u.jsx(r("IGDSSpinner.react"),{})}),c[17]=X):X=c[17];var Y;c[18]!==j||c[19]!==V?(Y=u.jsx(o("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:j,onClose:V,children:X}),c[18]=j,c[19]=V,c[20]=Y):Y=c[20];var J=Y,Z=r("usePolarisViewer")();Z!==null&&(Z==null?void 0:Z.guardianId)!==null&&(Z==null?void 0:Z.guardianId)!==""&&F(o("PolarisFRXWebReportActions").doStoreGuardianInformation(r("nullthrows")(Z==null?void 0:Z.guardianId)));var ee,te;c[21]===Symbol.for("react.memo_cache_sentinel")?(ee=e!==void 0?e:e=n("PolarisFRXReportModalFetaSupervisionQuery.graphql"),te={},c[21]=ee,c[22]=te):(ee=c[21],te=c[22]);var ne=r("react-relay/relay-hooks/useLazyLoadQuery")(ee,te),re=(a=ne.xfb_youth_platform)==null||(a=a.viewer)==null?void 0:a.is_f3_supervised_user,oe=(i=(l=ne.xfb_youth_platform)==null||(l=l.viewer)==null||(l=l.f3_guardian_preferred_profile)==null?void 0:l.full_name)!=null?i:null,ae=o("PolarisReactRedux.react").useSelector(o("PolarisFRXWebReportStateSelectors").getGuardianUsername);re===!0&&ae===""&&oe!==null&&(ae=oe);var ie;if(c[23]!==(b==null||(s=b.response)==null||(s=s.report_info)==null?void 0:s.selected_tags)){var le,se,ue;ie=(le=b==null||(se=b.response)==null||(se=se.report_info)==null?void 0:se.selected_tags)!=null?le:[],c[23]=b==null||(ue=b.response)==null||(ue=ue.report_info)==null?void 0:ue.selected_tags,c[24]=ie}else ie=c[24];var ce=ie,de=E===o("PolarisReportConstants").FRXLocation.DIRECT_MESSAGES||E===o("PolarisReportConstants").FRXLocation.DIRECT_THREAD||E===o("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_MESSAGE||E===o("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_THREAD||k===o("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE||k===o("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE_THREAD||k===o("PolarisReportConstants").FRXObjectType.ENCRYPTED_DIRECT_MESSAGE;switch(v){case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.UNFOLLOW:{var me;return c[25]!==V||c[26]!==I?(me=u.jsx(r("PolarisFRXUnfollowUserFollowupModal.react"),{onClose:V,userToUnfollow:I}),c[25]=V,c[26]=I,c[27]=me):me=c[27],me}case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.BLOCK:{var pe;return c[28]!==k||c[29]!==N||c[30]!==V||c[31]!==I||c[32]!==M||c[33]!==$||c[34]!==D?(pe=u.jsx(r("PolarisFRXBlockUserFollowupModal.react"),{frxObjectType:k,isGroupThread:N,onClose:V,shouldReportAsInstamadillo:M,threadKey:$,userToBlock:I,useSimpleBlockModalWithoutRefresh:D}),c[28]=k,c[29]=N,c[30]=V,c[31]=I,c[32]=M,c[33]=$,c[34]=D,c[35]=pe):pe=c[35],pe}case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.SUPPORT_HUB:{var _e;c[36]!==t?(_e=function(){return f(t)},c[36]=t,c[37]=_e):_e=c[37];var fe;return c[38]!==E||c[39]!==de||c[40]!==V||c[41]!==_e||c[42]!==ce?(fe=u.jsx(r("PolarisFRXReportModalSupportHub.react"),{is_igd:de,location:E,onClose:V,onGoBack:_e,tags_selected:ce}),c[38]=E,c[39]=de,c[40]=V,c[41]=_e,c[42]=ce,c[43]=fe):fe=c[43],fe}case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.NOTIFY_GUARDIAN:{var ge;c[44]!==t?(ge=function(n,r){return g(t,n,r)},c[44]=t,c[45]=ge):ge=c[45];var he=I==null?void 0:I.username,ye;return c[46]!==ae||c[47]!==V||c[48]!==t.reportedTagTitle||c[49]!==ge||c[50]!==he?(ye=u.jsx(r("PolarisFRXNotifyGuardianFollowupModal.react"),{guardianUsername:ae,onClose:V,onNotify:ge,reportedTagTitle:t.reportedTagTitle,reportedUsername:he}),c[46]=ae,c[47]=V,c[48]=t.reportedTagTitle,c[49]=ge,c[50]=he,c[51]=ye):ye=c[51],ye}case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.NOTIFY_GUARDIAN_FOLLOWUP:{if(!b)return m?Q:J;var Ce;return c[52]!==b||c[53]!==j||c[54]!==V||c[55]!==I?(Ce=u.jsx(r("PolarisFRXReportConfirmationScreenModalForSupervision.react"),{headerParams:j,onClose:V,reportedOwner:I,screenPayload:b}),c[52]=b,c[53]=j,c[54]=V,c[55]=I,c[56]=Ce):Ce=c[56],Ce}case o("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.DEFAULT:default:{var be=S>1,ve;c[57]!==t?(ve=function(){return f(t)},c[57]=t,c[58]=ve):ve=c[58];var Se;return c[59]!==b||c[60]!==q||c[61]!==m||c[62]!==V||c[63]!==P||c[64]!==I||c[65]!==T||c[66]!==be||c[67]!==ve||c[68]!==x?(Se=u.jsx(r("PolarisFRXReportScreenModal.react"),{frxMetadata:q,hasMountedScreenFlow:m,hasPreviousScreens:be,onClose:V,onGoBackOneFRXScreen:ve,onSelectReportAd:P,reportedOwner:I,screenPayload:b,showFRXDropOffSurveyModal:T,threadId:x}),c[59]=b,c[60]=q,c[61]=m,c[62]=V,c[63]=P,c[64]=I,c[65]=T,c[66]=be,c[67]=ve,c[68]=x,c[69]=Se):Se=c[69],Se}}}function C(e){var t;return{currRenderStep:(t=o("PolarisFRXWebReportStateSelectors")).getCurrRenderStep(e),currScreenPayload:t.getCurrScreenPayload(e),isAfterConfirmationScreen:t.getIsConfirmationScreenInHistoryStack(e),reportedTagTitle:t.getReportedTagTitle(e),screenHistorySize:t.getScreenHistorySize(e)}}var b={onDoDisableNotifyGuardianOption:o("PolarisFRXWebReportActions").doDisableNotifyGuardianOption,onDoOpenNotifyGuardianFollowupModalToPreviousScreen:o("PolarisFRXWebReportActions").doOpenNotifyGuardianFollowupModalToPreviousScreenAction,onDoReportingModalClosedAction:o("PolarisFRXWebReportActions").doReportingModalClosedAction,onGoBackOneFRXScreen:o("PolarisFRXWebReportActions").doGoBackOneFRXScreenAction,onRequestInitFRXScreen:o("PolarisFRXWebReportActions").doRequestInitFRXScreenAction},v=o("PolarisReactRedux.react").connect(C,b)(y);l.default=v}),98);
__d("PolarisCommentOptionsDialog.react",["fbt","IGCoreDialog.react","IGDSDialogBackwardsCompatibilityWrapper.react","PolarisFRXReportModal.react","PolarisGenericStrings","PolarisIsLoggedIn","PolarisReportConstants","PolarisReportUnderLawDialogItem.react","react","react-compiler-runtime","usePolarisViewer"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useState;function d(e){var t,n=o("react-compiler-runtime").c(33),a=e.canDeleteComment,i=e.canPinComment,l=e.commentId,d=e.commentOwnerAvatar,m=e.commentOwnerFbidV2,p=e.commentOwnerId,_=e.commentOwnerUsername,f=e.mediaOwnerId,g=e.onClose,h=e.onDelete,y=e.onPin,C=i===void 0?!1:i,b=c(!1),v=b[0],S=b[1],R=p!==((t=r("usePolarisViewer")())==null?void 0:t.id),L;n[0]===Symbol.for("react.memo_cache_sentinel")?(L=function(){S(!0)},n[0]=L):L=n[0];var E=L,k;n[1]!==g?(k=function(){g(),S(!1)},n[1]=g,n[2]=k):k=n[2];var I=k,T;n[3]!==g||n[4]!==h?(T=function(){h(),g()},n[3]=g,n[4]=h,n[5]=T):T=n[5];var D=T;if(v){var x;n[6]!==d||n[7]!==m||n[8]!==p||n[9]!==_?(x={fbidV2:m,id:p,profilePicURL:d,username:_},n[6]=d,n[7]=m,n[8]=p,n[9]=_,n[10]=x):x=n[10];var $=p===f,P;return n[11]!==l||n[12]!==I||n[13]!==x||n[14]!==$?(P=u.jsx(r("IGDSDialogBackwardsCompatibilityWrapper.react"),{children:u.jsx(r("PolarisFRXReportModal.react"),{frxLocation:o("PolarisReportConstants").FRXLocation.COMMENTS,frxObjectType:o("PolarisReportConstants").FRXObjectType.COMMENT,onClose:I,reportedObjectID:l,reportedOwner:x,useSimpleBlockModalWithoutRefresh:$})}),n[11]=l,n[12]=I,n[13]=x,n[14]=$,n[15]=P):P=n[15],P}var N;n[16]!==l||n[17]!==_?(N=o("PolarisIsLoggedIn").isLoggedIn()?u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:E,children:s._(/*BTDS*/"Denunciar")}):u.jsx(o("PolarisReportUnderLawDialogItem.react").ReportUnderLawDialogItem,{contentId:l,reportingType:o("PolarisReportUnderLawDialogItem.react").InstagramLegalReportingType.COMMENT,username:_}),n[16]=l,n[17]=_,n[18]=N):N=n[18];var M=N,w=R&&M,A;n[19]!==C||n[20]!==y?(A=C&&u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-secondary-button",onClick:y,children:s._(/*BTDS*/"Fixar coment\u00e1rio")}),n[19]=C,n[20]=y,n[21]=A):A=n[21];var F;n[22]!==a||n[23]!==D?(F=a&&u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive","data-testid":void 0,onClick:D,children:s._(/*BTDS*/"Excluir")}),n[22]=a,n[23]=D,n[24]=F):F=n[24];var O;n[25]!==I?(O=u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:I,children:o("PolarisGenericStrings").CANCEL_TEXT}),n[25]=I,n[26]=O):O=n[26];var B;return n[27]!==I||n[28]!==w||n[29]!==A||n[30]!==F||n[31]!==O?(B=u.jsxs(o("IGCoreDialog.react").IGCoreDialog,{onModalClose:I,children:[w,A,F,O]}),n[27]=I,n[28]=w,n[29]=A,n[30]=F,n[31]=O,n[32]=B):B=n[32],B}l.default=d}),226);
__d("polarisCommentSelectors.react",["PolarisPaginationUtils","PolarisReactRedux.react","nullthrows","polarisCreateSelectorWithArg","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=r("polarisCreateSelectorWithArg")(function(e){return e.comments.byId},function(e){return e.comments.byPostId},function(e,t){return function(n){var a=t.get(n);if(a==null)return null;var i=a.commentIds;return i.toSeq().map(function(t){return r("nullthrows")(e.get(t))}).slice(i.count()-o("PolarisPaginationUtils").getVisibleCount(a.pagination),i.count()).filter(function(e){return!e.deleted&&!e.didReportAsSpam})}}),s=r("polarisCreateSelectorWithArg")(function(e){return e.posts.byId},function(e){return e.comments.byId},function(e,t){return function(n){var o=r("nullthrows")(e.get(n)),a=o.previewCommentIds;return a==null?[]:a.map(function(e){return t.get(e)}).filter(Boolean)}});function u(e,t){return r("nullthrows")(e.comments.byId.get(t))}function c(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=function(n){return e==null?null:n.comments.translationById.get(e)},t[0]=e,t[1]=n):n=t[1],o("PolarisReactRedux.react").useSelector(n)}l.selectVisibleCommentsForPostId=e,l.getPreviewCommentsForPostId=s,l.getCommentById=u,l.useCommentTranslation=c}),98);
__d("usePolarisComment",["PolarisReactRedux.react","polarisCommentSelectors.react","polarisUserSelectors","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("react-compiler-runtime").c(3),r;return n[0]!==e||n[1]!==t?(r=function(r){var n=o("polarisCommentSelectors.react").getCommentById(r,e);return t(n)},n[0]=e,n[1]=t,n[2]=r):r=n[2],o("PolarisReactRedux.react").useSelector(r)}function s(e,t){var n=o("react-compiler-runtime").c(3),r;return n[0]!==e||n[1]!==t?(r=function(r){var n=o("polarisCommentSelectors.react").getCommentById(r,e),a=o("polarisUserSelectors").getUserByIdOrThrows(r,n.userId);return t(n,a)},n[0]=e,n[1]=t,n[2]=r):r=n[2],o("PolarisReactRedux.react").useSelector(r)}function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=function(n){var t;return e==null?null:(t=n.comments.byId.get(e))!=null?t:null},t[0]=e,t[1]=n):n=t[1],o("PolarisReactRedux.react").useSelector(n)}l.useComment=e,l.useCommentAndOwner=s,l.useCommentOrNull=u}),98);
__d("PolarisCommentTranslationPrompt.react",["fbt","CometPressable.react","IGDSTextVariants.react","PolarisCommentActions","PolarisReactRedux.react","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisComment"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback;function d(e){var t,n=o("react-compiler-runtime").c(22),a=e.commentId,i=e.inFeed,l=e.isCaptionWithTranslation,c=e.isOverMedia,d=c===void 0?!1:c,m=o("PolarisReactRedux.react").useDispatch(),p=((t=o("usePolarisComment").useCommentOrNull(a))==null?void 0:t.hasTranslation)===!0,_=l===!0||p,f=o("polarisCommentSelectors.react").useCommentTranslation(a),g=f==null?void 0:f.translatedText,h;n[0]!==a||n[1]!==m||n[2]!==g?(h=function(){a!=null&&(g!=null?m(o("PolarisCommentActions").showCommentTranslatedText(a)):m(o("PolarisCommentActions").translateComment(a)))},n[0]=a,n[1]=m,n[2]=g,n[3]=h):h=n[3];var y=h;if(_!==!0)return null;var C=i===!0?"primaryText":"secondaryText";if((f==null?void 0:f.loading)===!0){var b=d?"webAlwaysWhite":C,v;n[4]===Symbol.for("react.memo_cache_sentinel")?(v=s._(/*BTDS*/"Carregando..."),n[4]=v):v=n[4];var S;return n[5]!==b?(S=u.jsx(o("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:b,children:v}),n[5]=b,n[6]=S):S=n[6],S}if((f==null?void 0:f.showTranslatedText)===!0){var R;n[7]!==a||n[8]!==m?(R=function(){a!=null&&m(o("PolarisCommentActions").showCommentOriginalText(a))},n[7]=a,n[8]=m,n[9]=R):R=n[9];var L=d?"webAlwaysWhite":C,E;n[10]===Symbol.for("react.memo_cache_sentinel")?(E=s._(/*BTDS*/"Ver original"),n[10]=E):E=n[10];var k;n[11]!==L?(k=u.jsx(o("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:L,children:E}),n[11]=L,n[12]=k):k=n[12];var I;return n[13]!==R||n[14]!==k?(I=u.jsx(r("CometPressable.react"),{onPress:R,overlayDisabled:!0,children:k}),n[13]=R,n[14]=k,n[15]=I):I=n[15],I}var T=d?"webAlwaysWhite":C,D;n[16]===Symbol.for("react.memo_cache_sentinel")?(D=s._(/*BTDS*/"Ver tradu\u00e7\u00e3o"),n[16]=D):D=n[16];var x;n[17]!==T?(x=u.jsx(o("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:T,children:D}),n[17]=T,n[18]=x):x=n[18];var $;return n[19]!==y||n[20]!==x?($=u.jsx(r("CometPressable.react"),{onPress:y,overlayDisabled:!0,children:x}),n[19]=y,n[20]=x,n[21]=$):$=n[21],$}l.default=d}),226);
__d("PolarisPostCaptionTranslationPrompt.react",["IGDSBox.react","PolarisCommentTranslationPrompt.react","react","react-compiler-runtime","usePolarisPost"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=e.inFeed,a=e.marginBottom,i=e.postId,l=a===void 0?0:a,u=o("usePolarisPost").usePost(i,d),m=o("usePolarisPost").usePost(i,c);if(u!==!0||m==null)return null;var p;t[0]!==m||t[1]!==n?(p=s.jsx(r("PolarisCommentTranslationPrompt.react"),{commentId:m,inFeed:n,isCaptionWithTranslation:!0}),t[0]=m,t[1]=n,t[2]=p):p=t[2];var _;return t[3]!==l||t[4]!==p?(_=s.jsx(r("IGDSBox.react"),{marginBottom:l,children:p}),t[3]=l,t[4]=p,t[5]=_):_=t[5],_}function c(e){return e.captionCommentId}function d(e){return e.captionHasTranslation}l.default=u}),98);
__d("PolarisPostComment.react",["cx","fbt","IGDSBox.react","IGDSButton.react","IGDSIconButton.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDSText.react","IGDSTextVariants.react","IGDSVerifiedBadge.react","Locale","PolarisApproveCommentDialog.react","PolarisCommentActions","PolarisCommentLikeListsActions","PolarisCommentLikedByListDialogRoot.entrypoint","PolarisCommentOptionsDialog.react","PolarisCommentScrollHelper","PolarisCommentTranslationPrompt.react","PolarisConfig","PolarisDoubleTappable","PolarisEngagementLogger","PolarisFastLink.react","PolarisIGCoreConstants","PolarisIgWellbeingRestrictManageCommentFalcoEvent","PolarisLikeButton.react","PolarisLikedByListDialogPlaceholder.react","PolarisLinkBuilder","PolarisPendingCommentActions","PolarisPostCaptionTranslationPrompt.react","PolarisPostGifComment.react","PolarisPostStrings","PolarisPostVariants","PolarisReactRedux.react","PolarisTimestamp.react","PolarisTruncatedText.react","PolarisUA","PolarisUserAvatarWithStories.react","PolarisUserHoverCard.react","PolarisUserText.react","PolarisViewpointReact.react","QE2Logger","joinClasses","nullthrows","polarisPostSelectors","polarisUserSelectors","qex","react","react-compiler-runtime","stylex","useIGDSEntryPointDialog","usePolarisDynamicIpadUpsell","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentAction","usePolarisLoggedOutIntentEntryPointDialog"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useEffect,f=m.useRef,g=m.useState,h=750,y=3e3,C="x5dmxwo-B",b={avatar:{alignSelf:"xqcrz7y",marginTop:"xdj266r",marginInlineEnd:"x14iifvp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0},reducedAvatarMargin:{marginTop:"xr9ek0c",marginInlineEnd:"x1sa5p1d",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0},restrictedContent:{opacity:"xbyyjgo",$$css:!0},userLinkHeader:{alignItems:"x6s0dn4",display:"x3nfvp2",$$css:!0}};function v(t){var n=o("react-compiler-runtime").c(22),a=t.parentProps,i=a.commentOwnerId,l=a.commentOwnerUsername,s=a.isAuthorVerified,u=a.isCaption,c=a.isRestrictedPending,m=a.postOwnerIsUnpublished,p=a.showRichComment,_=s===void 0?!1:s,f=u===void 0?!1:u,g=m===void 0?!1:m,h=p===void 0?!1:p,y=c&&!t.showRestrictedContent,C=f?"h2":"h3";if(y){var v;return n[0]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx(r("IGDSBox.react"),{marginBottom:1,position:"relative",children:d.jsx(r("IGDSText.react"),{color:"tertiaryText",size:"body",weight:"semibold",children:o("PolarisPostStrings").RESTRICTED_ACCOUNT_HEADER_TEXT})}),n[0]=v):v=n[0],v}else if(!f||g!==!0){var S=c===!0&&b.restrictedContent,R;n[1]!==S?(R=(e||(e=r("stylex")))(b.userLinkHeader,S),n[1]=S,n[2]=R):R=n[2];var L;n[3]!==l?(L=o("PolarisLinkBuilder").buildUserLink(r("nullthrows")(l)),n[3]=l,n[4]=L):L=n[4];var E;n[5]!==l?(E=r("nullthrows")(l),n[5]=l,n[6]=E):E=n[6];var k;n[7]!==L||n[8]!==E?(k=d.jsx(r("IGDSButton.react"),{display:"block",href:L,label:E,variant:"secondary_link"}),n[7]=L,n[8]=E,n[9]=k):k=n[9];var I;n[10]!==i||n[11]!==l||n[12]!==k?(I=d.jsx(r("IGDSBox.react"),{marginEnd:1,position:"relative",children:d.jsx(r("PolarisUserHoverCard.react"),{display:"inline",userId:i,username:l,children:k})}),n[10]=i,n[11]=l,n[12]=k,n[13]=I):I=n[13];var T;n[14]!==_||n[15]!==h?(T=h&&_&&d.jsx(r("IGDSBox.react"),{marginEnd:1,position:"relative",children:d.jsx(r("IGDSVerifiedBadge.react"),{size:"small"})}),n[14]=_,n[15]=h,n[16]=T):T=n[16];var D;return n[17]!==C||n[18]!==T||n[19]!==R||n[20]!==I?(D=d.jsxs(C,{className:R,children:[I,T]}),n[17]=C,n[18]=T,n[19]=R,n[20]=I,n[21]=D):D=n[21],D}return null}function S(e){var t=o("react-compiler-runtime").c(10),n=e.parentProps,a=n.captionCreatedAt,i=n.commentThreadId,l=n.disableTimestampNav,s=n.id,u=n.isCaption,c=n.isEdited,m=n.postedAt,p=n.postShortcode,_=u===void 0?!1:u,f=c===void 0?!1:c,g=_&&f&&a!=null?a:m,h;t[0]!==g?(h=d.jsx(r("PolarisTimestamp.react"),{className:"_a9ze _a9zf",value:g}),t[0]=g,t[1]=h):h=t[1];var y=h;if(p!=null&&s!=null){var C;t[2]!==s||t[3]!==i||t[4]!==p?(C=i!=null&&i!==s?o("PolarisLinkBuilder").buildReplyPermalink(p,i,s,o("PolarisUA").isMobile()):o("PolarisLinkBuilder").buildCommentPermalink(p,s,o("PolarisUA").isMobile()),t[2]=s,t[3]=i,t[4]=p,t[5]=C):C=t[5];var b=C,v=l===!0?R:void 0,S;t[6]!==v||t[7]!==b||t[8]!==y?(S=d.jsx(r("PolarisFastLink.react"),{className:"_a9zg",href:b,onClick:v,children:y}),t[6]=v,t[7]=b,t[8]=y,t[9]=S):S=t[9],y=S}return y}function R(e){return e.preventDefault()}function L(e){var t,n=o("react-compiler-runtime").c(147),a=g(null),i=a[0],l=a[1],s=g(!1),c=s[0],m=s[1],p=g(!1),R=p[0],L=p[1],k=g(!1),I=k[0],T=k[1],D=f(null),x=g(!1),$=x[0],P=x[1],N,M;n[0]!==e.id?(N=function(){if(e.id!=null)return o("PolarisCommentScrollHelper").subscribeToCommentScroll(e.id,function(){var e=D.current;e!=null&&(e.scrollIntoView({behavior:"smooth",block:"center"}),window.setTimeout(function(){o("PolarisCommentScrollHelper").observeElementVisible(e,function(){P(!0),window.setTimeout(function(){P(!1)},y)})},200))})},M=[e.id],n[0]=e.id,n[1]=N,n[2]=M):(N=n[1],M=n[2]),_(N,M);var w;n[3]!==i?(w=function(){window.clearTimeout(i)},n[3]=i,n[4]=w):w=n[4];var A=w,F=o("usePolarisDynamicIpadUpsell").usePolarisDesktopExcludingIpad(),O,B;n[5]!==A?(O=function(){return function(){A()}},B=[A],n[5]=A,n[6]=O,n[7]=B):(O=n[6],B=n[7]),_(O,B);var W;n[8]===Symbol.for("react.memo_cache_sentinel")?(W=function(){L(!0)},n[8]=W):W=n[8];var q=W,U;n[9]!==e.isCaption||n[10]!==e.showRichComment?(U=function(){!o("PolarisUA").isMobile()||e.showRichComment!==!0||e.isCaption===!0||l(window.setTimeout(q,h))},n[9]=e.isCaption,n[10]=e.showRichComment,n[11]=U):U=n[11];var V=U,H;n[12]===Symbol.for("react.memo_cache_sentinel")?(H=function(){L(!1)},n[12]=H):H=n[12];var G=H,z;n[13]!==e?(z=function(){L(!1),e.onDeleteComment()},n[13]=e,n[14]=z):z=n[14];var j=z,K;n[15]!==e?(K=function(){var t=e.id,n=e.onDeleteCommentClick;n&&n(r("nullthrows")(t))},n[15]=e,n[16]=K):K=n[16];var Q=K,X;n[17]!==e?(X=function(n){var t=e.onLikeComment,r=e.onUnlikeComment;n?t():r()},n[17]=e,n[18]=X):X=n[18];var Y=X,J;n[19]!==e?(J=function(){var t=e.isRestrictedPending,n=e.likedByViewer,r=e.loggedIn,o=e.onLikeComment,a=t===void 0?!1:t,i=n===void 0?!1:n;!i&&!a&&r&&o()},n[19]=e,n[20]=J):J=n[20];var Z=J,ee;n[21]===Symbol.for("react.memo_cache_sentinel")?(ee={},n[21]=ee):ee=n[21];var te=(t=e.id)!=null?t:"",ne;n[22]!==te?(ne={routeParams:ee,routeProps:{commentId:te}},n[22]=te,n[23]=ne):ne=n[23];var re=r("useIGDSEntryPointDialog")(r("PolarisCommentLikedByListDialogRoot.entrypoint"),ne,"button",E),oe=re[0],ae;n[24]!==F||n[25]!==e||n[26]!==oe?(ae=function(){var t=e.code,n=e.commentOwnerId,a=e.commentOwnerUsername,i=e.fetchCommentLikes,l=e.id,s=e.likeCount,u=e.loggedIn,c=e.onLikeCountClick,d=e.onLoggedOutDialogClick,m=e.onLoggedOutIntentClick,p=e.viewerId;if(u){if(c)if(o("QE2Logger").logExposureForIGWebCookieCritical("ig_web_h1_2023_desktop_reels_comment_likes_graphql","is_enabled"),r("qex")._("1656")){var _=p===n;oe({isOwnerTheViewer:_,likeAndViewCountsDisabled:!1,likeCount:s,ownerUsername:a,productType:void 0,viewCount:0})}else i(),c(r("nullthrows")(l))}else F?d(o("PolarisLinkBuilder").buildMediaLink(r("nullthrows")(t)),"post_comment_like_count"):m("post_comment_like_count")},n[24]=F,n[25]=e,n[26]=oe,n[27]=ae):ae=n[27];var ie=ae,le;n[28]!==e?(le=function(){var t=e.loggedIn,n=e.onLoggedOutDialogPreload;!t&&o("PolarisUA").isDesktop()&&n()},n[28]=e,n[29]=le):le=n[29];var se=le,ue;n[30]!==e?(ue=function(n){var t=e.analyticsContext,a=e.commentOwnerId,i=e.commentThreadId,l=e.id,s=e.isRestrictedPending,u=e.mediaType,c=e.postId,d=e.postOwnerId,m=e.viewerId;switch(n.state){case"entered":if(l!=null&&m!=null){o("PolarisEngagementLogger").logCommentImpression({commentAuthorId:a,commentId:l,commentThreadId:i,containerModule:t,mediaAuthorId:d,mediaId:c,mediaType:u}),s&&r("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"impression",actorIgUserid:a,commentId:l,commentThreadId:i,parentMediaId:c,step:"pending_comment"});return}}},n[30]=e,n[31]=ue):ue=n[31];var ce=ue,de;n[32]!==F||n[33]!==e?(de=function(){var t=e.code,n=e.loggedIn,a=e.onLoggedOutDialogClick,i=e.onLoggedOutIntentClick,l=e.onReplyClick;n?l():F?a(o("PolarisLinkBuilder").buildMediaLink(r("nullthrows")(t)),"post_comment_reply"):i("post_comment_reply")},n[32]=F,n[33]=e,n[34]=de):de=n[34];var me=de,pe;n[35]!==e?(pe=function(){var t=e.loggedIn,n=e.onLoggedOutDialogPreload;!t&&o("PolarisUA").isDesktop()&&n()},n[35]=e,n[36]=pe):pe=n[36];var _e=pe,fe;n[37]!==e?(fe=function(){var t=e.commentOwnerId,n=e.commentThreadId,o=e.id,a=e.postId;r("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:t,commentId:o,commentThreadId:n,parentMediaId:a,step:"pending_comment_see_hidden"}),T(!0)},n[37]=e,n[38]=fe):fe=n[38];var ge=fe,he;n[39]!==e?(he=function(){var t=e.commentOwnerId,n=e.commentThreadId,o=e.id,a=e.postId;r("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:t,commentId:o,commentThreadId:n,parentMediaId:a,step:"pending_comment_approve"}),m(!0)},n[39]=e,n[40]=he):he=n[40];var ye=he,Ce;n[41]===Symbol.for("react.memo_cache_sentinel")?(Ce=function(){m(!1)},n[41]=Ce):Ce=n[41];var be=Ce,ve;n[42]!==Q||n[43]!==e||n[44]!==I?(ve=function(){var t=e.commentOwnerId,n=e.commentThreadId,o=e.id,a=e.postId;r("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:t,commentId:o,commentThreadId:n,parentMediaId:a,step:I?"pending_comment_delete":"pending_comment_delete_hidden"}),Q()},n[42]=Q,n[43]=e,n[44]=I,n[45]=ve):ve=n[45];var Se=ve,Re;n[46]!==ie||n[47]!==se||n[48]!==e?(Re=function(){var t=e.code,n=e.id,a=e.likeCount,i=e.loggedIn;if(a==null||a===0)return null;var l=a.toLocaleString(),s=u._(/*BTDS*/"{like count} curtida",[u._param("like count",l)]),c=u._(/*BTDS*/"{like count} curtidas",[u._param("like count",l)]),m=a===1?s:c;return a>0&&(o("PolarisUA").isDesktop()||!i?d.jsx("button",{className:"_a9ze",onClick:ie,onMouseEnter:se,children:d.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:m})}):d.jsx(r("PolarisFastLink.react"),{className:"_a9ze _amp7",href:"/p/"+r("nullthrows")(t)+"/c/"+r("nullthrows")(n)+"/liked_by/",children:m}))},n[46]=ie,n[47]=se,n[48]=e,n[49]=Re):Re=n[49];var Le=Re,Ee=e.className,ke=e.commentingDisabledForViewer,Ie=e.commentOwnerAvatar,Te=e.commentOwnerId,De=e.commentOwnerUsername,xe=e.commentThreadId,$e=e.communityNoteComponent,Pe=e.customPaddingStyle,Ne=e.giphyMediaInfo,Me=e.hideUserAvatar,we=e.id,Ae=e.isCaption,Fe=e.isEdited,Oe=e.isPermalinkedComment,Be=e.isRestrictedPending,We=e.likedByViewer,qe=e.mediaCommentInfo,Ue=e.postId,Ve=e.postOwnerId,He=e.postOwnerIsUnpublished,Ge=e.reducedAvatarMargin,ze=e.showCommentOptionsInline,je=e.showRemoveIcon,Ke=e.showRichComment,Qe=e.translation,Xe=e.variant,Ye=e.viewerId,Je=Me===void 0?!1:Me,Ze=Ae===void 0?!1:Ae,et=Fe===void 0?!1:Fe,tt=Oe===void 0?!1:Oe,nt=ze===void 0?!1:ze,rt=Ke===void 0?!1:Ke,ot,at,it,lt,st,ut,ct,dt,mt,pt,_t,ft,gt,ht;if(n[50]!==Te||n[51]!==Ne||n[52]!==ce||n[53]!==Ze||n[54]!==tt||n[55]!==Be||n[56]!==Ve||n[57]!==e.text||n[58]!==nt||n[59]!==je||n[60]!==I||n[61]!==rt||n[62]!==Qe||n[63]!==Xe||n[64]!==Ye){var yt,Ct,bt;ht=e.text.toString(),(Qe==null?void 0:Qe.showTranslatedText)===!0&&Qe.translatedText!=null&&(ht=Qe.translatedText),it=!Ze&&Ye!=null&&(Ye===Te||Ve===Ye),pt=it&&je&&!rt,lt=!Ze&&Ye!=null&&!pt&&!Be;var vt;n[79]!==tt?(vt=o("PolarisConfig").isLoggedOutFRXEligible()&&tt,n[79]=tt,n[80]=vt):vt=n[80];var St=vt,Rt;n[81]!==St||n[82]!==Ze||n[83]!==rt||n[84]!==Ye?(Rt=St||rt&&!o("PolarisUA").isMobile()&&!Ze&&Ye!=null,n[81]=St,n[82]=Ze,n[83]=rt,n[84]=Ye,n[85]=Rt):Rt=n[85],st=Rt,at=Xe===o("PolarisPostVariants").VARIANTS.feed?r("PolarisTruncatedText.react"):r("PolarisUserText.react"),dt=!!Ze||!lt&&!it,_t=Be&&!I,mt=Be&&I;var Lt=Ne!=null;ct=Lt?(yt=Ne==null||(Ct=Ne.first_party_cdn_proxied_images)==null||(Ct=Ct.fixed_height)==null?void 0:Ct.url)!=null?yt:Ne==null||(bt=Ne.images)==null||(bt=bt.fixed_height)==null?void 0:bt.url:void 0;var Et=nt===!0?"_a9ze":"",kt=(nt!==!0?"_a9zh":"")+(nt===!0?" _a9zi":""),It;n[86]===Symbol.for("react.memo_cache_sentinel")?(It=d.jsx(r("IGDSIconButton.react"),{"data-testid":void 0,onClick:q,children:d.jsx(r("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:d.jsx(r("IGDSMoreHorizontalPanoOutlineIcon.react"),{alt:o("PolarisPostStrings").COMMENT_OPTIONS_ALT_TEXT,color:"ig-secondary-text"})})}),n[86]=It):It=n[86];var Tt;n[87]!==kt?(Tt=d.jsx("div",{className:kt,children:It}),n[87]=kt,n[88]=Tt):Tt=n[88];var Dt;n[89]!==Et||n[90]!==Tt?(Dt=d.jsx("div",{className:Et,children:Tt}),n[89]=Et,n[90]=Tt,n[91]=Dt):Dt=n[91],ut=Dt,ot=o("PolarisViewpointReact.react").Viewpoint,ft=ce,gt=ht.replace(" ","-"),n[50]=Te,n[51]=Ne,n[52]=ce,n[53]=Ze,n[54]=tt,n[55]=Be,n[56]=Ve,n[57]=e.text,n[58]=nt,n[59]=je,n[60]=I,n[61]=rt,n[62]=Qe,n[63]=Xe,n[64]=Ye,n[65]=ot,n[66]=at,n[67]=it,n[68]=lt,n[69]=st,n[70]=ut,n[71]=ct,n[72]=dt,n[73]=mt,n[74]=pt,n[75]=_t,n[76]=ft,n[77]=gt,n[78]=ht}else ot=n[65],at=n[66],it=n[67],lt=n[68],st=n[69],ut=n[70],ct=n[71],dt=n[72],mt=n[73],pt=n[74],_t=n[75],ft=n[76],gt=n[77],ht=n[78];var xt;n[92]!==at||n[93]!==it||n[94]!==lt||n[95]!==st||n[96]!==Ee||n[97]!==ut||n[98]!==Ie||n[99]!==Te||n[100]!==De||n[101]!==xe||n[102]!==ke||n[103]!==$e||n[104]!==Pe||n[105]!==ct||n[106]!==ye||n[107]!==j||n[108]!==V||n[109]!==A||n[110]!==Q||n[111]!==Z||n[112]!==Y||n[113]!==me||n[114]!==_e||n[115]!==Se||n[116]!==ge||n[117]!==Je||n[118]!==we||n[119]!==Ze||n[120]!==et||n[121]!==dt||n[122]!==$||n[123]!==Be||n[124]!==We||n[125]!==qe||n[126]!==Ue||n[127]!==Ve||n[128]!==He||n[129]!==e||n[130]!==Ge||n[131]!==Le||n[132]!==c||n[133]!==mt||n[134]!==R||n[135]!==nt||n[136]!==pt||n[137]!==I||n[138]!==rt||n[139]!==_t||n[140]!==ht?(xt=function(n){return d.jsxs(o("PolarisDoubleTappable").DoubleTappable,{onDoubleClick:Z,role:"button",children:[d.jsx("li",{className:r("joinClasses")((rt?"_a9zj":"")+(Pe==="compact"?" _a9zk":"")+" _a9zl",Ee),onMouseDown:V,onMouseUp:A,onTouchEnd:A,onTouchMove:A,onTouchStart:V,ref:n,children:d.jsxs("div",{className:"_a9zm","data-testid":void 0,ref:D,style:$?{animationDuration:y+"ms",animationFillMode:"forwards",animationName:C,animationTimingFunction:"ease-out",borderRadius:"8px",marginBlock:-16,marginInline:"-8px",paddingBlock:16,paddingInline:"8px"}:void 0,children:[d.jsxs("div",{className:(dt?"_a9zn":"")+" _a9zo",children:[rt&&!Je&&d.jsx(r("PolarisUserHoverCard.react"),{display:"block",userId:Te,username:De,children:d.jsx(r("PolarisUserAvatarWithStories.react"),{isLink:!He,profilePictureUrl:Ie!=null?Ie:"",size:r("PolarisIGCoreConstants").AVATAR_SIZES.small,storyEntrypoint:"post_comment",username:De,xstyle:[b.avatar,Ge===!0&&b.reducedAvatarMargin,Be===!0&&b.restrictedContent]})}),d.jsxs("div",{className:"_a9zr",children:[d.jsx(v,{parentProps:e,showRestrictedContent:I}),!_t&&(ct!=null?d.jsx(r("PolarisPostGifComment.react"),{gifSrc:ct}):d.jsxs("div",babelHelpers.extends({},{0:{className:"xt0psk2"},1:{className:"xt0psk2 xbyyjgo"}}[(Be===!0)<<0],{"data-testid":void 0,children:[d.jsx(at,{display:"inline",headlineTag:Ze===!0?"h1":void 0,size:"body",value:ht}),qe!=null&&d.jsx(r("IGDSBox.react"),{marginBottom:1,marginTop:2,position:"relative",children:d.jsx(r("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",children:u._(/*BTDS*/"Foto dispon\u00edvel no app")})})]}))),rt&&d.jsx(r("IGDSBox.react"),{marginBottom:1,marginTop:2,position:"relative",children:d.jsxs(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",dir:r("Locale").isRTL()?"rtl":"ltr",children:[Ze&&et&&d.jsxs(d.Fragment,{children:[o("PolarisPostStrings").CAPTION_EDITED_TEXT,"\xA0\xB7\xA0"]}),d.jsx(S,{parentProps:e}),Ze&&d.jsx(r("IGDSBox.react"),{display:"inlineBlock",position:"relative",children:d.jsx(r("PolarisPostCaptionTranslationPrompt.react"),{postId:Ue})}),!Ze&&!Be&&d.jsxs(d.Fragment,{children:[Le(),ke!==!0&&d.jsx("button",{className:"_a9ze",onClick:me,onMouseEnter:_e,children:d.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:o("PolarisPostStrings").REPLY_TEXT})}),we!=null&&d.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginEnd:2,position:"relative",children:d.jsx(r("PolarisCommentTranslationPrompt.react"),{commentId:we})}),st&&nt===!0&&ut]}),_t&&d.jsx("button",{className:"_a9ze",onClick:ge,children:d.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:o("PolarisPostStrings").RESTRICT_SEE_COMMENT_TEXT})}),mt&&d.jsx("button",{className:"_a9ze",onClick:ye,children:d.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:o("PolarisApproveCommentDialog.react").APPROVE_COMMENT_CTA})}),Be&&d.jsx("button",{className:"_a9ze",onClick:Se,children:d.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:o("PolarisPostStrings").RESTRICT_DELETE_COMMENT_TEXT})})]})}),$e!=null&&$e]})]}),pt&&d.jsx("button",{className:"_a9zt",onClick:Q,title:o("PolarisPostStrings").DELETE_COMMENT_TEXT,children:d.jsx(r("IGDSText.react"),{color:"tertiaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:o("PolarisPostStrings").DELETE_COMMENT_TEXT})}),st&&!nt&&ut,lt&&d.jsx(r("PolarisLikeButton.react"),{className:"_a9zu",isLiked:!!We,onChange:Y,padding:0,size:12})]})}),R&&we!=null&&d.jsx(r("PolarisCommentOptionsDialog.react"),{canDeleteComment:!!it,commentId:we,commentOwnerAvatar:Ie!=null?Ie:"",commentOwnerId:Te,commentOwnerUsername:De,mediaOwnerId:Ve,onClose:G,onDelete:j}),c&&we!=null&&d.jsx(o("PolarisApproveCommentDialog.react").ApproveCommentDialog,{commentId:we,commentOwnerId:Te,commentOwnerUsername:De,commentThreadId:xe,onClose:be,postId:Ue})]})},n[92]=at,n[93]=it,n[94]=lt,n[95]=st,n[96]=Ee,n[97]=ut,n[98]=Ie,n[99]=Te,n[100]=De,n[101]=xe,n[102]=ke,n[103]=$e,n[104]=Pe,n[105]=ct,n[106]=ye,n[107]=j,n[108]=V,n[109]=A,n[110]=Q,n[111]=Z,n[112]=Y,n[113]=me,n[114]=_e,n[115]=Se,n[116]=ge,n[117]=Je,n[118]=we,n[119]=Ze,n[120]=et,n[121]=dt,n[122]=$,n[123]=Be,n[124]=We,n[125]=qe,n[126]=Ue,n[127]=Ve,n[128]=He,n[129]=e,n[130]=Ge,n[131]=Le,n[132]=c,n[133]=mt,n[134]=R,n[135]=nt,n[136]=pt,n[137]=I,n[138]=rt,n[139]=_t,n[140]=ht,n[141]=xt):xt=n[141];var $t;return n[142]!==ot||n[143]!==ft||n[144]!==gt||n[145]!==xt?($t=d.jsx(ot,{action:ft,id:gt,children:xt}),n[142]=ot,n[143]=ft,n[144]=gt,n[145]=xt,n[146]=$t):$t=n[146],$t}function E(e){return d.jsx(r("PolarisLikedByListDialogPlaceholder.react"),{onClose:e})}E.displayName=E.name+" [from "+i.id+"]";function k(e,t){var n=t.commentOwnerId,a=t.postId,i=t.postOwnerId,l=o("polarisUserSelectors").getUserByIdOrThrows(e,n),s=o("polarisPostSelectors").getPostOrNullById(e,a),u=t.id;return u==null&&(u=s==null?void 0:s.captionCommentId),{commentOwnerAvatar:l.profilePictureUrl,commentOwnerId:r("nullthrows")(l.id),commentOwnerUsername:r("nullthrows")(l.username),postOwnerIsUnpublished:o("polarisUserSelectors").getUserByIdOrThrows(e,i).isUnpublished,postShortcode:s&&s.code,translation:u!=null?e.comments.translationById.get(u):null,viewerId:e.users.viewerId}}function I(e,t){var n={commentAuthorId:t.commentOwnerId,commentId:t.id||"",containerModule:t.analyticsContext,mediaAuthorId:t.postOwnerId,mediaId:t.id||"",mediaType:t.mediaType||0};return{fetchCommentLikes:function(){return e(o("PolarisCommentLikeListsActions").requestCommentLikes(r("nullthrows")(t.id)))},onDeleteComment:function(){return e(o("PolarisCommentActions").deleteComment(t.postId,t.id||"",t.analyticsContext))},onLikeComment:function(r){return e(o("PolarisCommentActions").likeComment(babelHelpers.extends({},n,{userId:r||""})))},onReplyClick:function(a){return e(o("PolarisPendingCommentActions").changePendingComment(t.postId,"@"+(a||"")+" ",r("nullthrows")(t.commentThreadId),t.commentOwnerId,a))},onUnlikeComment:function(r){return e(o("PolarisCommentActions").unlikeComment(babelHelpers.extends({},n,{userId:r||""})))}}}function T(e,t,n){return babelHelpers.extends({},e,t,n,{onLikeComment:function(){return t.onLikeComment(e.viewerId)},onReplyClick:function(){return t.onReplyClick(e.commentOwnerUsername)},onUnlikeComment:function(){return t.onUnlikeComment(e.viewerId)}})}function D(e){var t=o("react-compiler-runtime").c(13),n=r("usePolarisLoggedOutIntentAction")(),a=r("usePolarisLoggedOutBlockingEntryPointDialog")(),i=a[0],l=a[1],s=r("usePolarisLoggedOutIntentEntryPointDialog")(),u=s[0],c=s[1],m;t[0]!==i||t[1]!==u?(m=function(t,n){var e={contentReportingLink:t,nextUrl:t,source:n};o("PolarisUA").isDesktop()||o("PolarisConfig").isLoggedOutFRXEligible()?u==null||u(e):i==null||i(e)},t[0]=i,t[1]=u,t[2]=m):m=t[2];var p=m,_;t[3]!==l||t[4]!==c?(_=function(){o("PolarisUA").isDesktop()||o("PolarisConfig").isLoggedOutFRXEligible()?c==null||c(!0):l==null||l(!0)},t[3]=l,t[4]=c,t[5]=_):_=t[5];var f=_,g;t[6]!==n?(g=function(t){return n({source:t})},t[6]=n,t[7]=g):g=t[7];var h;return t[8]!==f||t[9]!==p||t[10]!==e||t[11]!==g?(h=d.jsx(L,babelHelpers.extends({},e,{onLoggedOutDialogClick:p,onLoggedOutDialogPreload:f,onLoggedOutIntentClick:g})),t[8]=f,t[9]=p,t[10]=e,t[11]=g,t[12]=h):h=t[12],h}var x=o("PolarisReactRedux.react").connect(k,I,T)(D);l.default=x}),226);
__d("polarisTransformCommentEntities",["PolarisCommentModel","PolarisUserModel","polarisTransformEntities"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n;return{comments:r("polarisTransformEntities")((t=e.commentDicts)!=null?t:{},function(e){return r("PolarisCommentModel").fromNativeResponse(e).toReduxStore()}),users:r("polarisTransformEntities")((n=e.userDicts)!=null?n:{},function(e){return r("PolarisUserModel").fromNativeResponse(e).toReduxStore()})}}l.default=e}),98);
__d("PolarisThreadedCommentActions",["PolarisAPIGetChildComments","PolarisAPIGetInitialComments","PolarisAPIGetPaginationComments","PolarisLegacyGraphQLPaginationUtils","PolarisPaginationUtils","PolarisThreadedCommentActionConstants","polarisNormalizeComments","polarisTransformCommentEntities"],(function(t,n,r,o,a,i,l){"use strict";var e="6718530511526291";function s(e){return{parentId:e,type:"HIDE_CHILD_COMMENTS"}}function u(e){return{parentId:e,type:"SHOW_CHILD_COMMENTS"}}function c(e,t){var n=t.map(function(e){return e.pk}),r={};for(var o of n)o!=null&&e[o]!=null&&(r[o]=e[o]);return r}var d=o("PolarisLegacyGraphQLPaginationUtils").generatePaginationActionCreators({getState:function(t,n){var e;return(e=t.threadedComments.childByParentId[n])==null?void 0:e.pagination},onError:function(t,n,r){return{fetch:n,parentId:r,type:"CHILD_COMMENT_REQUEST_FAILED"}},onUpdate:function(t,n,r){var e,o=n==null||(e=n.comment)==null?void 0:e.edge_threaded_comments;return{comments:o&&o.edges?o.edges.map(function(e){return e.node}):[],count:o&&o.count,fetch:t,pageInfo:o&&o.page_info,parentId:r,type:"CHILD_COMMENT_REQUEST_UPDATED"}},pageSize:o("PolarisThreadedCommentActionConstants").CHILD_PAGE_SIZE_V2,pagesToPreload:o("PolarisThreadedCommentActionConstants").PAGES_TO_PRELOAD,queryId:e,queryParams:function(t){return{comment_id:t}}});function m(e,t,n){var a,i,l,s=t.has_more_comments===!0||t.has_more_headload_comments===!0,u=t.has_more_headload_comments===!0,d=s?u?t.next_min_id:t.next_max_id:"",m=(a=t.comment_count)!=null?a:0,p=(i=t.comments)!=null?i:[],_=r("polarisTransformCommentEntities")(o("polarisNormalizeComments").normalizeComments(p).entities);return{comments:c(_.comments,p),count:m,pagination:{end_cursor:d,has_next_page:s,has_previous_page:u},postId:e,sortOrder:n,type:"INITIAL_PARENT_COMMENT_REQUEST_LOADED",users:(l=_.users)!=null?l:{}}}function p(e){return{postId:e,type:"INITIAL_PARENT_COMMENT_REQUEST_FAILED"}}function _(e,t,n){return function(r,a){var i,l=a(),s=l.threadedComments;if(!(n!=null&&((i=s.parentByPostId[e])==null?void 0:i.sortOrder)===n))return r({postId:e,type:"INITIAL_PARENT_COMMENT_REQUEST_LOADING"}),o("PolarisAPIGetInitialComments").getInitialComments(e,t,n).then(function(t){r(m(e,t,n))}).catch(function(t){r(p(e))})}}function f(e,t){return function(n,a){var i,l,s=a(),u=s.threadedComments,d=(i=(l=u.parentByPostId[e])==null?void 0:l.pagination)!=null?i:null,m=u.parentByPostId[e].sortOrder;if(d!=null){var p=o("PolarisPaginationUtils").getEndCursor(d);if(p!=null)return n({postId:e,type:"PARENT_COMMENT_REQUEST_LOADING"}),o("PolarisAPIGetPaginationComments").getPaginationComments(e,p,o("PolarisPaginationUtils").hasPreviousPage(d)===!0,m).then(function(a){var i,l,s,u=a.has_more_comments===!0||a.has_more_headload_comments===!0,d=a.has_more_headload_comments===!0,m=u?d?a.next_min_id:a.next_max_id:"",p=(i=a.comment_count)!=null?i:0,_=(l=a.comments)!=null?l:[],f=r("polarisTransformCommentEntities")(o("polarisNormalizeComments").normalizeComments(_).entities);n({comments:c(f.comments,_),count:p,hasRankedComments:t!=null?t:!1,pagination:{end_cursor:m,has_next_page:u,has_previous_page:d},postId:e,type:"PARENT_COMMENT_REQUEST_UPDATED_V2",users:(s=f.users)!=null?s:{}})}).catch(function(){n({postId:e,type:"PARENT_COMMENT_REQUEST_FAILED_V2"})})}}}function g(e,t){return function(n,a){var i;n({parentId:t,type:"CHILD_COMMENT_REQUEST_LOADING"});var l=a(),s=l.threadedComments,u=(i=s.childByParentId[t])==null?void 0:i.pagination,c;return u!=null&&(c=o("PolarisPaginationUtils").getEndCursor(u)),c=c!=null?c:null,o("PolarisAPIGetChildComments").getChildComments(e,t,c,!0).then(function(a){var i,l,s,u,c=a.has_more_head_child_comments===!0||a.has_more_tail_child_comments===!0,d=a.next_min_child_cursor,m=(i=a.child_comment_count)!=null?i:0,p=(l=a.child_comments)!=null?l:[],_=r("polarisTransformCommentEntities")(o("polarisNormalizeComments").normalizeComments(p).entities);n({comments:(s=_.comments)!=null?s:{},count:m,pagination:{end_cursor:d,has_next_page:c},parentId:t,postId:e,type:"CHILD_COMMENT_REQUEST_UPDATED_V2",users:(u=_.users)!=null?u:{}})}).catch(function(){n({parentId:t,type:"CHILD_COMMENT_REQUEST_FAILED_V2"})})}}function h(e,t){return function(n){return n(f(e,t))}}function y(e,t,n){return function(r){return r(_(e,t,n))}}var C=d.next;function b(e,t){return function(n){return n(g(e,t))}}function v(e){return function(t){return function(n){n(m(e,t))}}}l.hideChildComments=s,l.showChildComments=u,l.initialCommentsError=p,l.requestNextParentCommentPageV2=h,l.requestInitialComments=y,l.requestNextChildCommentPage=C,l.requestNextChildCommentPageV2=b,l.setupPostComments=v}),98);
__d("PolarisThreadedCommentSelectors",["PolarisPaginationUtils","immutable-4.0.0-rc.9","nullthrows","polarisCreateSelectorWithArg"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return!e.deleted&&!e.didReportAsSpam}var s=r("polarisCreateSelectorWithArg")(function(e){return e.posts.byId},function(e){return e.comments.byId},function(e){return e.threadedComments.parentByPostId},function(t,n,a){return function(i){var l=a[i],s=t.get(i);if(!l||!s)return o("immutable-4.0.0-rc.9").List();var u=l.commentIds,c=o("PolarisPaginationUtils").getVisibleCount(l.pagination),d=s.hasRankedComments===!0?0:u.count()-c;return u.map(function(e){return r("nullthrows")(n.get(e))}).slice(d,d+c).filter(function(t){return e(t)})}}),u=r("polarisCreateSelectorWithArg")(function(e){return e.comments.byId},function(e){return e.threadedComments.childByParentId},function(t,n){return function(a){var i=r("nullthrows")(n[a]),l=i.commentIds,s=i.pagination,u=l.map(function(e){return r("nullthrows")(t.get(e))}),c=o("PolarisPaginationUtils").getVisibleCount(s),d=u.slice(0,c).filter(function(t){return e(t)}),m=u.slice(c,u.count()).filter(function(t){return e(t)}),p=m.map(function(e){return e.id});return{remainingCachedShowableChildCommentIds:p,visibleChildComments:d}}}),c=r("polarisCreateSelectorWithArg")(function(e){return e.comments.byId},function(e){return e.threadedComments.childByParentId},function(e,t){return function(e){var n=r("nullthrows")(t[e]);return n.count||0}});function d(e,t){return!!e.threadedComments.initialCommentsLoading[t]}l.selectVisibleParentCommentsForPostId=s,l.selectChildCommentsForParentIdSplitByVisibility=u,l.getTotalChildCommentCountForParentId=c,l.getThreadedCommentsLoading=d}),98);
__d("PolarisCommentThread.react",["cx","fbt","IGDSBox.react","IGDSSpinner.react","PolarisIGCoreButton.react","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisPaginationUtils","PolarisPostComment.react","PolarisPostVariants","PolarisReactRedux.react","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","isStringNullOrEmpty","nullthrows","polarisCommentReducer","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(25),n=e.childComment,a=e.disableTimestampNav,i=e.parentProps,l=i.analyticsContext,s=i.code,u=i.commentingDisabledForViewer,d=i.hideUserAvatar,m=i.loggedIn,p=i.onDeleteCommentClick,_=i.onLikeCountClick,f=i.parentComment,g=i.postId,h=i.postOwnerId,y=i.reducedAvatarMargin,C=i.showCommentOptionsInline,b=i.showRemoveIcon,v=!!d,S;return t[0]!==l||t[1]!==n.giphyMediaInfo||t[2]!==n.id||t[3]!==n.isAuthorVerified||t[4]!==n.isRestrictedPending||t[5]!==n.likeCount||t[6]!==n.likedByViewer||t[7]!==n.mediaCommentInfo||t[8]!==n.postedAt||t[9]!==n.text||t[10]!==n.userId||t[11]!==s||t[12]!==u||t[13]!==a||t[14]!==m||t[15]!==p||t[16]!==_||t[17]!==f.id||t[18]!==g||t[19]!==h||t[20]!==y||t[21]!==C||t[22]!==b||t[23]!==v?(S=c.jsx(r("PolarisPostComment.react"),{analyticsContext:l,className:"_a9ye",code:s,commentingDisabledForViewer:u,commentOwnerId:n.userId,commentThreadId:f.id,disableTimestampNav:a,giphyMediaInfo:n.giphyMediaInfo,hideUserAvatar:v,id:n.id,isAuthorVerified:n.isAuthorVerified,isRestrictedPending:n.isRestrictedPending,likeCount:n.likeCount,likedByViewer:n.likedByViewer,loggedIn:m,mediaCommentInfo:n.mediaCommentInfo,onDeleteCommentClick:p,onLikeCountClick:_,postedAt:n.postedAt,postId:g,postOwnerId:h,reducedAvatarMargin:y,showCommentOptionsInline:C,showRemoveIcon:b,showRichComment:!0,text:n.text,variant:o("PolarisPostVariants").VARIANTS.flexible},n.id),t[0]=l,t[1]=n.giphyMediaInfo,t[2]=n.id,t[3]=n.isAuthorVerified,t[4]=n.isRestrictedPending,t[5]=n.likeCount,t[6]=n.likedByViewer,t[7]=n.mediaCommentInfo,t[8]=n.postedAt,t[9]=n.text,t[10]=n.userId,t[11]=s,t[12]=u,t[13]=a,t[14]=m,t[15]=p,t[16]=_,t[17]=f.id,t[18]=g,t[19]=h,t[20]=y,t[21]=C,t[22]=b,t[23]=v,t[24]=S):S=t[24],S}var m=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={hasPermalinkedReplyBeenHidden:!1},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidUpdate=function(t,n){(t.parentComment.id!==this.props.parentComment.id||t.permalinkedReplyId!==this.props.permalinkedReplyId)&&this.setState({hasPermalinkedReplyBeenHidden:!1})},n.$1=function(){var e=this.props,t=e.childCommentsCacheCanShowMoreWithoutFetch,n=e.childCommentsCanFetchMorePagination,r=e.childCommentsHasNextPage,o=e.permalinkedReply,a=e.remainingCachedShowableChildCommentIds;return o!=null&&r===!0&&t===!0&&n!==!0&&a.count()===1&&a.get(0)===o.id},n.$2=function(t){var e=this.props.childCommentsHasNextPage;return e!==!0||t&&this.$1()},n.$3=function(t){var e=this.props,n=e.analyticsContext,r=e.childCommentsCacheCanShowMoreWithoutFetch,a=e.childCommentsIsFetching,i=e.hideReplies,l=e.loadChildComments,s=e.loadChildCommentsV2,u=e.onHidePermalinkReply,c=e.parentComment,d=c.id,m=c.userId,p=e.permalinkedReply,_=e.postId,f=e.postOwnerId,g=e.showReplies;a||(t?(i(d),o("PolarisInteractionsLogger").logInteractionAction({commentAuthorId:m,commentId:d,containerModule:n,eventName:"instagram_child_comments_collapse",mediaAuthorId:f,mediaId:_}),p!=null&&(u!=null&&u(),this.setState({hasPermalinkedReplyBeenHidden:!0}))):r?g(d):o("PolarisIsLoggedIn").isLoggedIn()?s(_,d):l(d))},n.$4=function(t,n){var e=this,o=this.props,a=o.childCommentsIsFetching,i=o.replyPagerNodeRef,l=o.totalChildCommentCount,s=this.$2(n),d=n?1:0,m=t+d,p=l-m,_;return s&&!a?_=u._(/*BTDS*/"Ocultar respostas"):p<=0?_=u._(/*BTDS*/"Ver respostas"):_=u._(/*BTDS*/"Ver respostas ({hidden replies})",[u._param("hidden replies",p)]),c.jsx("li",{className:"_a9yg",ref:i,children:c.jsxs(r("IGDSBox.react"),{direction:"row",marginBottom:t>0?4:0,marginTop:n?2:0,position:"relative",children:[c.jsxs(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return e.$3(s)},children:[c.jsx("div",{className:"_a9yh"}),c.jsx("span",{className:"_a9yi",children:_})]}),a&&c.jsx("div",{className:"_a9yj",children:c.jsx(r("IGDSSpinner.react"),{size:"small"})})]})})},n.render=function(){var e=this,t=this.props,n=t.analyticsContext,a=t.code,i=t.commentingDisabledForViewer,l=t.customIndentationPadding,s=t.hideUserAvatar,u=t.innerRef,m=t.isPermalinkedComment,p=t.loggedIn,_=t.onDeleteCommentClick,f=t.onLikeCountClick,g=t.parentComment,h=t.permalinkedReply,y=t.permalinkedReplyAnimating,C=t.permalinkedReplyId,b=t.permalinkedReplyNodeRef,v=t.postId,S=t.postOwnerId,R=t.reducedAvatarMargin,L=t.showCommentOptionsInline,E=t.showRemoveIcon,k=t.totalChildCommentCount,I=t.visibleChildComments,T=this.state.hasPermalinkedReplyBeenHidden,D=null;h&&!(T&&I.count()===0)&&(D=c.jsx("div",{className:"_a9yk"+(y===!0&&!T?" _a9yl":""),ref:b,children:c.jsx(d,{childComment:h,disableTimestampNav:!0,parentProps:this.props})}));var x=I.map(function(t,n){return D&&r("nullthrows")(h).id===t.id?null:c.jsx(d,{childComment:t,parentProps:e.props},n)}).filter(function(e){return e!=null}),$=this.$4(x.count(),D!=null),P=l!=null?{margin:"12px 0 0 "+l+"px",width:"calc(100% - "+l+"px)"}:void 0;return c.jsxs("ul",{className:"_a9ym",ref:u,children:[c.jsx(r("PolarisPostComment.react"),{analyticsContext:n,code:a,commentingDisabledForViewer:i,commentOwnerId:g.userId,commentThreadId:g.id,disableTimestampNav:m===!0&&C==null,giphyMediaInfo:g.giphyMediaInfo,hideUserAvatar:!!s,id:g.id,isAuthorVerified:g.isAuthorVerified,isPermalinkedComment:m,isRestrictedPending:g.isRestrictedPending,likeCount:g.likeCount,likedByViewer:g.likedByViewer,loggedIn:p,mediaCommentInfo:g.mediaCommentInfo,onDeleteCommentClick:_,onLikeCountClick:f,postedAt:g.postedAt,postId:v,postOwnerId:S,reducedAvatarMargin:R,showCommentOptionsInline:L,showRemoveIcon:E,showRichComment:!0,text:g.text,variant:o("PolarisPostVariants").VARIANTS.flexible}),k!==0&&c.jsx("li",{children:c.jsxs("ul",{className:"_a9yo",style:P,children:[D,x," ",$]})})]})},t})(c.Component);function p(e,t){var n,a=t.parentComment,i=t.permalinkedReplyId,l=o("PolarisThreadedCommentSelectors").selectChildCommentsForParentIdSplitByVisibility(e,a.id),s=l.remainingCachedShowableChildCommentIds,u=l.visibleChildComments,c=o("PolarisThreadedCommentSelectors").getTotalChildCommentCountForParentId(e,a.id),d=(n=e.threadedComments.childByParentId[a.id])!=null?n:o("polarisCommentReducer").EMPTY_POST_COMMENTS_STATE,m=d.pagination,p=null;return r("isStringNullOrEmpty")(i)||(p=e.comments.byId.get(i)),{childCommentsCacheCanShowMoreWithoutFetch:o("PolarisPaginationUtils").getVisibleCount(m)<o("PolarisPaginationUtils").getLoadedCount(m),childCommentsCanFetchMorePagination:o("PolarisPaginationUtils").canFetchMorePagination(m),childCommentsHasNextPage:o("PolarisPaginationUtils").hasNextPage(m),childCommentsIsFetching:o("PolarisPaginationUtils").isFetching(m),permalinkedReply:p,remainingCachedShowableChildCommentIds:s,totalChildCommentCount:c||0,visibleChildComments:u}}var _={hideReplies:o("PolarisThreadedCommentActions").hideChildComments,loadChildComments:o("PolarisThreadedCommentActions").requestNextChildCommentPage,loadChildCommentsV2:o("PolarisThreadedCommentActions").requestNextChildCommentPageV2,showReplies:o("PolarisThreadedCommentActions").showChildComments},f=o("PolarisReactRedux.react").connect(p,_)(m);l.default=f}),226);
__d("PolarisDeleteCommentModal.react",["fbt","IGCoreDialog.react","PolarisCommentActions","PolarisGenericStrings","PolarisReactRedux.react","polarisLogAction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(15),n=e.analyticsContext,a=e.commentId,i=e.onClose,l=e.postId,c=o("PolarisReactRedux.react").useDispatch(),d;t[0]!==n||t[1]!==a||t[2]!==c||t[3]!==i||t[4]!==l?(d=function(t){r("polarisLogAction")("commentDelete",{source:n}),c(o("PolarisCommentActions").deleteComment(l,a,n)),i(t)},t[0]=n,t[1]=a,t[2]=c,t[3]=i,t[4]=l,t[5]=d):d=t[5];var m=d,p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"Excluir coment\u00e1rio"),t[6]=p):p=t[6];var _;t[7]!==m?(_=u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:m,children:p}),t[7]=m,t[8]=_):_=t[8];var f;t[9]!==i?(f=u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:i,children:o("PolarisGenericStrings").CANCEL_TEXT}),t[9]=i,t[10]=f):f=t[10];var g;return t[11]!==i||t[12]!==_||t[13]!==f?(g=u.jsxs(o("IGCoreDialog.react").IGCoreDialog,{onModalClose:i,children:[_,f]}),t[11]=i,t[12]=_,t[13]=f,t[14]=g):g=t[14],g}l.default=c}),226);
__d("PolarisDirectActionSendPostToUsers",["InstagramODS","MercuryLocalIDs","PolarisDirectAPI","PolarisDirectActionConstants","PolarisDirectActionSendText","PolarisDirectActionThreadLoaded","PolarisDirectActionsLogger","PolarisDirectConstants","PolarisDirectStrings","PolarisToastActions","Promise","isStringNullOrEmpty","nullthrows","polarisDirectSelectors"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a=t.comment,i=t.customToast,l=t.mediaId,s=t.mediaOverlayInfo,c=t.mqtt,d=t.onError,m=t.onSuccess,p=t.productType,_=t.recipients;return function(t,f){var g=function(n){i!=null?i({text:n}):t(o("PolarisToastActions").showToast({text:n}))};_.forEach(function(i,_){var h;i.type==="user"?h=o("polarisDirectSelectors").getThreadIdForUserId(f(),_):i.type==="thread"&&(h=_),o("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_attempt",{recipientType:i.type,type:o("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE}),h!=null?u(c,h,l,s,p).then(function(){m==null||m(_),o("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{recipientType:i.type,type:o("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE}),r("InstagramODS").incr("web.share_sheet.send_post"),g(o("PolarisDirectStrings").SENT_TOAST_TEXT)}).then(function(){var t=o("MercuryLocalIDs").generateOfflineThreadingID();h!=null&&!r("isStringNullOrEmpty")(a)&&new(e||(e=n("Promise")))(function(e){window.setTimeout(e,o("PolarisDirectActionConstants").NUM_SEC_DELAY_FOR_SEND_TEXT*1e3)}).then(function(){return o("PolarisDirectActionSendText").sendText(c,r("nullthrows")(h),a,t)}).then(function(){o("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{recipientType:i.type,type:o("PolarisDirectConstants").ThreadItemType.TEXT}),r("InstagramODS").incr("web.share_sheet.send_post_with_comment")}).catch(function(e){o("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_message_to_users_failed",e),g(o("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)})}).catch(function(e){d==null||d(e,_),o("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_post_to_users_failed",e),g(o("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)}):o("PolarisDirectAPI").createGroupThread([_]).then(function(f){var h=f.thread_id;t(o("PolarisDirectActionThreadLoaded").threadLoaded(f)),u(c,h,l,s,p).then(function(){m==null||m(_),o("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{type:o("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE}),g(o("PolarisDirectStrings").SENT_TOAST_TEXT)}).then(function(){var t=o("MercuryLocalIDs").generateOfflineThreadingID();h!=null&&!r("isStringNullOrEmpty")(a)&&new(e||(e=n("Promise")))(function(e){window.setTimeout(e,o("PolarisDirectActionConstants").NUM_SEC_DELAY_FOR_SEND_TEXT*1e3)}).then(function(){return o("PolarisDirectActionSendText").sendText(c,r("nullthrows")(h),a,t)}).then(function(){o("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{recipientType:i.type,type:o("PolarisDirectConstants").ThreadItemType.TEXT}),g(o("PolarisDirectStrings").SENT_TOAST_TEXT)}).catch(function(e){o("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_message_to_users_failed",e),g(o("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)})}).catch(function(e){d==null||d(e,_),o("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_post_to_users_failed",e)})},function(e){d==null||d(e,_),o("PolarisDirectActionsLogger").directActionsLogger.logError("direct_create_thread_send_post_to_users_failed",e),g(o("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)})})}}function u(t,r,o,a,i){return t!=null?t.sendMediaShare(r,o,a,i):(e||(e=n("Promise"))).reject(new Error("MQTT is not instantiated"))}l.sendPostToUsers=s}),98);
__d("PolarisEmbedHashHelpers",["memoize"],(function(t,n,r,o,a,i,l){"use strict";var e=r("memoize")(function(){var e=window.location.hash,t=decodeURIComponent(e.substring(e.indexOf("#")+1)),n;try{n=JSON.parse(t)}catch(e){n={}}return{clientId:n.ci,offset:n.os,sdkLoadEnd:n.le,sdkLoadStart:n.ls}});l.getHashPayload=e}),98);
__d("polarisGetEmbedRequestID",["nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("nullthrows")(document.querySelector(".Embed"));return e.getAttribute("data-request-id")}l.default=e}),98);
__d("PolarisEmbedLogger",["InstagramQueryParamsHelper","PolarisEmbedHashHelpers","PolarisLogger","PolarisLoggerUtils","PolarisPigeonLogger","gkx","polarisGetEmbedRequestID"],(function(t,n,r,o,a,i,l){"use strict";var e=["url"],s=["url"],u=["url"];function c(e){var t=o("PolarisLoggerUtils").trimAndSanitizeUrl(e||window.location.href),n=r("polarisGetEmbedRequestID")();return n!=null?o("InstagramQueryParamsHelper").appendQueryParams(t,{ig_rid:n}):t}function d(t,n,a){if(r("gkx")("25394")){var i=o("PolarisLogger").getExtra(),l=i.url,s=babelHelpers.objectWithoutPropertiesLoose(i,e),u=babelHelpers.extends({client_id:o("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:t.actionName,is_copyright_blocked:t.isCopyrightBlocked,media_id:t.mediaId,media_type:t.mediaType,owner_id:t.ownerId===""?null:t.ownerId},s),d=babelHelpers.extends({obj_id:c(l),obj_type:"url"},a);o("PolarisLogger").logPigeonEvent(o("PolarisPigeonLogger").createEvent("instagram_web_embeds",u,d),n)}}function m(e,t,n){var r=o("PolarisLogger").getAnonymousExtra(),a=r.url,i=babelHelpers.objectWithoutPropertiesLoose(r,s),l=babelHelpers.extends({client_id:o("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:e.actionName,is_copyright_blocked:e.isCopyrightBlocked,media_id:e.mediaId,media_type:e.mediaType,owner_id:e.ownerId===""?null:e.ownerId},i),u=babelHelpers.extends({obj_id:c(a),obj_type:"url"},n);o("PolarisLogger").logPigeonEvent(o("PolarisPigeonLogger").createEvent("instagram_web_embeds_anonymous",l,u),t)}function p(e){var t=e.isCopyrightBlocked,n=e.mediaId,r=e.mediaType,o=e.ownerId;m({actionName:"view",isCopyrightBlocked:t,mediaId:n,mediaType:r,ownerId:o})}function _(e,t,n){if(r("gkx")("25394")){var a=o("PolarisLogger").getExtra(e),i=a.url,l=babelHelpers.objectWithoutPropertiesLoose(a,u),s=babelHelpers.extends({client_id:o("PolarisEmbedHashHelpers").getHashPayload().clientId,parent_url:window.document.referrer},l),d=babelHelpers.extends({obj_id:c(i),obj_type:"url"},n);o("PolarisLogger").logPigeonEvent(o("PolarisPigeonLogger").createEvent("instagram_web_embed_perf_events",s,d),t)}}l.logEmbedAction=d,l.logEmbedPageView=p,l.logEmbedTimings=_}),98);
__d("PolarisEmbedVideoWatchAgain.react",["cx","fbt","PolarisEmbedLogger","PolarisFastLink.react","PolarisLinkBuilder","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=u._(/*BTDS*/"Controlar"),m=u._(/*BTDS*/"Assista novamente no Instagram"),p="https://www.instagram.com";function _(e){var t=o("react-compiler-runtime").c(4),n=e.className,a=e.href,i=e.onClick,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=c.jsx(r("PolarisFastLink.react"),{"aria-label":d,className:n,href:a,onClick:i,target:"_blank"}),t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}function f(e){var t,n=o("react-compiler-runtime").c(18),a=e.post,i=a.code,l=i!=null&&i.length>0?o("PolarisLinkBuilder").buildMediaLink(i):"",s=""+p+l+"?utm_source=ig_embed&utm_campaign=embed_video_watch_again",u;if(n[0]!==a.id||n[1]!==((t=a.owner)==null?void 0:t.id)){var d;u=function(){var e;o("PolarisEmbedLogger").logEmbedAction({actionName:"videoWatchAgainClick",mediaId:a.id,mediaType:"video",ownerId:((e=a.owner)==null?void 0:e.id)||""})},n[0]=a.id,n[1]=(d=a.owner)==null?void 0:d.id,n[2]=u}else u=n[2];var f=u,g;n[3]!==f||n[4]!==s?(g=c.jsx(r("PolarisFastLink.react"),{"aria-label":m,className:"_aarb _9zwu",href:s,onClick:f,target:"_blank"}),n[3]=f,n[4]=s,n[5]=g):g=n[5];var h;n[6]!==f||n[7]!==s?(h=c.jsx(r("PolarisFastLink.react"),{"aria-label":m,className:"_aarc",href:s,onClick:f,target:"_blank",children:m}),n[6]=f,n[7]=s,n[8]=h):h=n[8];var y;n[9]!==g||n[10]!==h?(y=c.jsx("div",{className:"_aar9",children:c.jsxs("div",{className:"_aara",children:[g,h]})}),n[9]=g,n[10]=h,n[11]=y):y=n[11];var C;n[12]!==f||n[13]!==s?(C=c.jsx(_,{className:"_aard",href:s,onClick:f}),n[12]=f,n[13]=s,n[14]=C):C=n[14];var b;return n[15]!==y||n[16]!==C?(b=c.jsxs(c.Fragment,{children:[y,C]}),n[15]=y,n[16]=C,n[17]=b):b=n[17],b}l.default=f}),226);
__d("PolarisVideoHeight",["PolarisSizing"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){Object.assign(r,{height:"100%",position:"absolute",width:"100%"});var a=null;e.dimensions!=null&&(a=o("PolarisSizing").getHeightPercent(e.dimensions)),a!=null&&a!==100&&(t&&(a=Math.min(a,o("PolarisSizing").CAPPED_HEIGHT_PERCENT)),Object.assign(n,{paddingBottom:"calc("+a+"% - 1px)"}),Object.assign(r,{height:"calc(100% + 1px)"}))}l.setVideoHeightCompensation=e}),98);
__d("PolarisVideoPlayButton.react",["fbt","PolarisGenericStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Controlar");function d(e){var t=o("react-compiler-runtime").c(11),n=e.onClick,r=e.showPlayButton,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"x1ey2m1c xtijo5x x1o0tod x10l6tqk x13vifvy"},t[0]=a):a=t[0];var i;t[1]!==r?(i={0:{className:"xg01cxk x1b959el x1th4bbo x972fbf x10w94by x1qhh985 x14e42zd x1lliihq xln7xf2 xk390pu xbudbmw x14z9mp xat24cr x9uk3rv xa2bojp xexx8yu xyri2b x18d9i69 x1c1uobl x10l6tqk xwa60dl x11njtxf xd0fu7d xiql0sd xi9uto2 x1pqszli xdiogjw x1s7hr1v"},1:{className:"x1b959el x1th4bbo x972fbf x10w94by x1qhh985 x14e42zd x1lliihq xln7xf2 xk390pu xbudbmw x14z9mp xat24cr x9uk3rv xa2bojp xexx8yu xyri2b x18d9i69 x1c1uobl x10l6tqk xwa60dl x11njtxf x1hc1fzr xd0fu7d xiql0sd xi9uto2 x1pqszli xdiogjw x1s7hr1v"}}[!!r<<0],t[1]=r,t[2]=i):i=t[2];var l;t[3]!==i?(l=u.jsx("div",babelHelpers.extends({},a,{children:u.jsx("span",babelHelpers.extends({"aria-label":o("PolarisGenericStrings").ASSISTIVE_TEXT_PLAY_BUTTON},i,{role:"button"}))})),t[3]=i,t[4]=l):l=t[4];var s;t[5]===Symbol.for("react.memo_cache_sentinel")?(s={className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x1ey2m1c x9f619 x1ypdohk x1lliihq xdt5ytf x2lah0s xln7xf2 xk390pu xtijo5x x1o0tod xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x10l6tqk x13vifvy x11njtxf"},t[5]=s):s=t[5];var d;t[6]!==n?(d=u.jsx("div",babelHelpers.extends({"aria-label":c},s,{onClick:n,role:"button",tabIndex:0})),t[6]=n,t[7]=d):d=t[7];var m;return t[8]!==l||t[9]!==d?(m=u.jsxs(u.Fragment,{children:[l,d]}),t[8]=l,t[9]=d,t[10]=m):m=t[10],m}l.default=d}),226);
__d("PolarisEmbedVideo.react",["cx","PolarisEmbedLogger","PolarisEmbedVideoWatchAgain.react","PolarisUserTagIndicatorWithSheet.react","PolarisVideoHeight","PolarisVideoPlayButton.react","Run","joinClasses","keyMirror","nullthrows","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=r("keyMirror")({finished:null,paused:null,playing:null}),d=(function(e){function t(t){var n;n=e.call(this,t)||this,n.$1=u.createRef(),n.$2=!1,n.$3=null,n.handleVisiblityChange=function(){n.state.playerState!=null&&document.visibilityState&&document.visibilityState==="hidden"&&n.stop()},n.handleBeforeUnload=function(){n.state.playerState===c.playing&&n.stop()},n.handlePlayerPlayEvent=function(){n.setState({playerState:c.playing})},n.handlePlayerPauseEvent=function(){n.pause()},n.handlePlayerEndedEvent=function(){n.stop()},n.handleContainerClick=function(e){n.state.playerState!==c.playing?n.play():n.pause()};var r={playerState:null};return n.state=r,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){document.addEventListener("visibilitychange",this.handleVisiblityChange),this.$3=o("Run").onBeforeUnload(this.handleBeforeUnload);var e=r("nullthrows")(this.$1.current);e.addEventListener("play",this.handlePlayerPlayEvent),e.addEventListener("pause",this.handlePlayerPauseEvent),e.addEventListener("ended",this.handlePlayerEndedEvent)},n.componentDidUpdate=function(t){this.props.isVisible===!1&&t.isVisible===!0&&this.pause()},n.componentWillUnmount=function(){this.handleBeforeUnload(),document.removeEventListener("visibilitychange",this.handleVisiblityChange),this.$3!=null&&(this.$3.remove(),this.$3=null);var e=r("nullthrows")(this.$1.current);e.removeEventListener("play",this.handlePlayerPlayEvent),e.removeEventListener("pause",this.handlePlayerPauseEvent),e.removeEventListener("ended",this.handlePlayerEndedEvent)},n.play=function(){if(this.state.playerState!==c.playing){if(this.$2===!1){var e;o("PolarisEmbedLogger").logEmbedAction({actionName:"videoFirstPlayClick",mediaId:this.props.post.id,mediaType:"video",ownerId:((e=this.props.post.owner)==null?void 0:e.id)||""}),this.$2=!0}r("nullthrows")(this.$1.current).play()}},n.pause=function(){this.state.playerState===c.playing&&(r("nullthrows")(this.$1.current).pause(),this.setState({playerState:c.paused}))},n.stop=function(){if(this.state.playerState!==c.finished){var e=r("nullthrows")(this.$1.current);e.pause(),e.currentTime=0,this.setState({playerState:c.finished})}},n.render=function(){var e=this.props,t=e.className,n=e.post,a=this.state.playerState,i={},l={};o("PolarisVideoHeight").setVideoHeightCompensation(n,!0,i,l);var s=a===c.finished,d=!a||a===c.paused;return u.jsxs("div",{className:r("joinClasses")(t,"_aand"),style:i,children:[u.jsx("div",{style:l,children:!n.mediaOverlayInfo&&u.jsx("video",{className:"_aane",controls:!1,controlsList:void 0,"data-testid":void 0,loop:!1,playsInline:!0,poster:n.src,preload:"none",ref:this.$1,src:n.videoUrl,children:u.jsx("track",{kind:"captions"})})}),s?u.jsx(r("PolarisEmbedVideoWatchAgain.react"),{post:n}):u.jsx(r("PolarisVideoPlayButton.react"),{onClick:this.handleContainerClick,showPlayButton:d}),n.usertags&&n.usertags.length>=1&&u.jsx(r("PolarisUserTagIndicatorWithSheet.react"),{mediaId:n.id,usertags:n.usertags})]})},t})(u.Component);l.default=d}),98);
__d("PolarisHotKeys.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={keyMap:{}},d=s.createContext(c);function m(e){var t=o("react-compiler-runtime").c(13),n=e.children,r=e.className,a=e.isButton,i=e.keyMap,l=a===void 0?!1:a,c=u(d).keyMap,m=_,f=p,g;t[0]!==i?(g=function(t){if(i[t.key]!=null&&f()&&m(t)){var e=i[t.key];e(),t.stopPropagation()}},t[0]=i,t[1]=g):g=t[1];var h=g,y=l?"button":"presentation",C=l?0:-1,b;t[2]!==i?(b={keyMap:i},t[2]=i,t[3]=b):b=t[3];var v;t[4]!==n||t[5]!==r||t[6]!==h||t[7]!==y||t[8]!==C?(v=typeof n=="function"?n(h,y,C):s.jsx("div",{className:r,onKeyUp:h,role:y,tabIndex:C,children:n}),t[4]=n,t[5]=r,t[6]=h,t[7]=y,t[8]=C,t[9]=v):v=t[9];var S;return t[10]!==b||t[11]!==v?(S=s.jsx(d.Provider,{value:b,children:v}),t[10]=b,t[11]=v,t[12]=S):S=t[12],S}function p(){var e,t;return((e=document.activeElement)==null?void 0:e.tagName.toLowerCase())!=="textarea"&&((t=document.activeElement)==null?void 0:t.tagName.toLowerCase())!=="input"}function _(e){return!(e.ctrlKey||e.altKey||e.metaKey)}l.default=m}),98);
__d("PolarisInFeedPostModalContext",["emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).createContext,u=s(r("emptyFunction"));l.InFeedPostModalContext=u}),98);
__d("PolarisIsLoggedInDesktop",["PolarisIsLoggedIn","PolarisUA"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!o("PolarisUA").isMobile()&&o("PolarisIsLoggedIn").isLoggedIn()}l.isLoggedInDesktop=e}),98);
__d("PolarisPhotoWrapper.react",["InstagramODS","PolarisClickEventLoggerProvider.react","PolarisExternalLink.react","PolarisSponsoredPostContext.react","PolarisTrackingNodeProvider.react","PolarisUA","polarisAdsSelectors.react","react","react-compiler-runtime","usePolarisOffsiteTrackingDataURLParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(7),n=e.children,a=e.externalURL,i=e.wrappedRef,l=d,u=r("usePolarisOffsiteTrackingDataURLParams")(a),c;t[0]!==n||t[1]!==a||t[2]!==u?(c=function(t){return s.jsx("div",{ref:t,children:s.jsx(r("PolarisExternalLink.react"),{className:"x4gyw5p",href:a,ignoreDoubleClick:!0,onClick:l,queryParams:u,children:n})})},t[0]=n,t[1]=a,t[2]=u,t[3]=c):c=t[3];var m;return t[4]!==c||t[5]!==i?(m=s.jsx(r("PolarisClickEventLoggerProvider.react"),{ignoreDoubleClick:!0,children:s.jsx(r("PolarisTrackingNodeProvider.react"),{ref:i,trackingNode:86,children:c})}),t[4]=c,t[5]=i,t[6]=m):m=t[6],m}function d(){r("InstagramODS").incr("web.ads.feed.link_click")}function m(e){var t=o("react-compiler-runtime").c(10),n=e.children,a=e.postId,i=e.ref,l=o("polarisAdsSelectors.react").useFeedAdInfo(a,p),d=u(o("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),m=d.singleImageAdAsCta,_;if(t[0]!==(l==null?void 0:l.ctaItems)||t[1]!==a){var f;_=l==null||(f=l.ctaItems)==null||(f=f.get(a))==null?void 0:f.ctaLinkUrl,t[0]=l==null?void 0:l.ctaItems,t[1]=a,t[2]=_}else _=t[2];var g=_;if(g!=null&&m&&o("PolarisUA").isDesktop()){var h;return t[3]!==n||t[4]!==g||t[5]!==i?(h=s.jsx(r("PolarisTrackingNodeProvider.react"),{trackingNode:12,children:function(t){return s.jsx("div",{ref:t,children:s.jsx(c,{externalURL:g,wrappedRef:i,children:n})})}}),t[3]=n,t[4]=g,t[5]=i,t[6]=h):h=t[6],h}var y;return t[7]!==n||t[8]!==i?(y=s.jsx("div",{ref:i,children:n}),t[7]=n,t[8]=i,t[9]=y):y=t[9],y}function p(e){return e}l.default=m}),98);
__d("usePolarisMediaSensitivityOverlay",["polarisGetPostFromGraphMediaInterface","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useMemo,c=s.useState;function d(e,t,n,r){var a=o("react-compiler-runtime").c(16),i=c(!0),l=i[0],s=i[1],u;a[0]!==n?(u=function(t){n&&n(t),s(!1)},a[0]=n,a[1]=u):u=a[1];var d=u,m,p;a[2]!==e?(p=o("polarisGetPostFromGraphMediaInterface").getMediaOverlayMediaCoverInfoFromPostOrSidecarItem(e),a[2]=e,a[3]=p):p=a[3],m=p;var _=m,f,g;a[4]!==t||a[5]!==r||a[6]!==_||a[7]!==e||a[8]!==l?(g=function(){return r!=null&&r(e)?!1:_!=null&&l&&(t==="profilePage"||t==="profilePageModal"||t==="postPage"||t==="feed"||t==="feedPage"||t==="feedPageModal"||t==="DirectThreadPage"||t==="directThreadPageModal"||t==="reelsTab")},a[4]=t,a[5]=r,a[6]=_,a[7]=e,a[8]=l,a[9]=g):g=a[9];var h=g,y;a[10]!==h?(y=h(),a[10]=h,a[11]=y):y=a[11],f=y;var C=f,b;return a[12]!==d||a[13]!==_||a[14]!==C?(b={handleHideSensitivityOverlay:d,mediaOverlayCoverInfo:_,shouldShowSensitivityOverlay:C},a[12]=d,a[13]=_,a[14]=C,a[15]=b):b=a[15],b}l.default=d}),98);
__d("PolarisMedia_DEPRECATED.react",["JSResourceForInteraction","PolarisDoubleTappable","PolarisEmbedVideo.react","PolarisFeedSeenStateManagerSingleton","PolarisIGCoreToast.react","PolarisIsLoggedInDesktop","PolarisLikeAnimation.react","PolarisMediaNoteBubbleGroup.react","PolarisMediaVideo.react","PolarisPhoto.react","PolarisPhotoWithIndicator.react","PolarisPhotoWrapper.react","PolarisSensitivityOverlay.react","PolarisSidecarMedia.react","PolarisUA","PolarisViewpointReact.react","lazyLoadComponent","nullthrows","polarisVideoUtils","polarisWithRemountOnChange","react","react-compiler-runtime","usePolarisMediaSensitivityOverlay"],(function(t,n,r,o,a,i,l){"use strict";var e=["adInfo","analyticsContext","asSidecarChild","autoplay","checkIsSensitivityOverlayDisabledCallback","commentsAreStacked","firstSidecarChildSrc","hasViewInsights","id","initialCarouselIndex","isEmbed","isVisible","mediaFooter","onLike","onMediaRendered","onSensitivityOverlayCleared","onSetModal","onSidecarChildIndexChange","onToastClose","onVideoFinished","onVideoLoop","post","relationship","sensitivityOverlayMediaOverlayInfoLoggingProps","showToast","toastString","viewer","visiblePosition"],s=["mediaFooter"],u,c=u||(u=o("react")),d=u.useState,m=r("lazyLoadComponent")(r("JSResourceForInteraction")("PolarisPostSecretReelQRCode.react").__setRef("PolarisMedia_DEPRECATED.react"));function p(t){var n=o("react-compiler-runtime").c(160),a=d(!1),i=a[0],l=a[1],u=d(!1),p=u[0],_=u[1],f=d(0),g=f[0],h=f[1],y;n[0]===Symbol.for("react.memo_cache_sentinel")?(y=r("PolarisFeedSeenStateManagerSingleton").get(),n[0]=y):y=n[0];var C=y,b;n[1]!==g||n[2]!==t?(b=function(){t.onLike&&(t.onLike(),h(g+1))},n[1]=g,n[2]=t,n[3]=b):b=n[3];var v=b,S;n[4]===Symbol.for("react.memo_cache_sentinel")?(S=function(){l(!0)},n[4]=S):S=n[4];var R=S,L;n[5]===Symbol.for("react.memo_cache_sentinel")?(L=function(){l(!1)},n[5]=L):L=n[5];var E=L,k;n[6]!==t?(k=function(n,r){var e=t.onMediaRendered,o=t.post;o.isVideo!==!0&&e&&e({mediaType:"Photo",resourceName:n,timeTaken:r})},n[6]=t,n[7]=k):k=n[7];var I=k,T;n[8]!==p?(T=function(t){e:switch(t.state){case"entered":case"updated":{var e=t.percentVisible>.2;p!==e&&_(e);break e}case"exited":_(!1)}},n[8]=p,n[9]=T):T=n[9];var D=T,x;n[10]!==t.analyticsContext||n[11]!==t.autoplay?(x=function(n,r){if(n===!0&&t.autoplay===!0){if(o("polarisVideoUtils").isFeed(t.analyticsContext))return!1;if(r===0&&o("PolarisIsLoggedInDesktop").isLoggedInDesktop())return!0}return!1},n[10]=t.analyticsContext,n[11]=t.autoplay,n[12]=x):x=n[12];var $=x,P,N,M,w,A,F,O,B,W,q,U,V,H,G,z,j,K,Q,X,Y,J,Z,ee;if(n[13]!==t){var te=t.adInfo,ne=t.analyticsContext,re=t.asSidecarChild,oe=t.autoplay,ae=t.checkIsSensitivityOverlayDisabledCallback,ie=t.commentsAreStacked,le=t.firstSidecarChildSrc,se=t.hasViewInsights,ue=t.id,ce=t.initialCarouselIndex,de=t.isEmbed,me=t.isVisible,pe=t.mediaFooter,_e=t.onLike,fe=t.onMediaRendered,ge=t.onSensitivityOverlayCleared,he=t.onSetModal,ye=t.onSidecarChildIndexChange,Ce=t.onToastClose,be=t.onVideoFinished,ve=t.onVideoLoop,Se=t.post,Re=t.relationship,Le=t.sensitivityOverlayMediaOverlayInfoLoggingProps,Ee=t.showToast,ke=t.toastString,Ie=t.viewer,Te=t.visiblePosition,De=babelHelpers.objectWithoutPropertiesLoose(t,e);N=te,M=ne,w=re,A=oe,F=ie,O=le,B=ue,W=de,q=me,U=pe,P=ge,V=ye,H=Ce,G=be,z=ve,K=Se,Q=Re,X=Le,Y=Ee,J=ke,Z=Ie,ee=Te,j=De,n[13]=t,n[14]=P,n[15]=N,n[16]=M,n[17]=w,n[18]=A,n[19]=F,n[20]=O,n[21]=B,n[22]=W,n[23]=q,n[24]=U,n[25]=V,n[26]=H,n[27]=G,n[28]=z,n[29]=j,n[30]=K,n[31]=Q,n[32]=X,n[33]=Y,n[34]=J,n[35]=Z,n[36]=ee}else P=n[14],N=n[15],M=n[16],w=n[17],A=n[18],F=n[19],O=n[20],B=n[21],W=n[22],q=n[23],U=n[24],V=n[25],H=n[26],G=n[27],z=n[28],j=n[29],K=n[30],Q=n[31],X=n[32],Y=n[33],J=n[34],Z=n[35],ee=n[36];var xe,$e;n[37]!==K?($e=K||{},n[37]=K,n[38]=$e):$e=n[38];var Pe=$e,Ne=Pe.dimensions,Me=Pe.displayResources,we=Pe.upcomingEvent,Ae=Pe.id,Fe=Pe.isVideo,Oe=Pe.mediaPreview,Be=Pe.owner,We=Pe.sidecarChildren,qe=Pe.src,Ue=Pe.usertags,Ve=Fe===void 0?!1:Fe,He;n[39]!==We?(He=We===void 0?[]:We,n[39]=We,n[40]=He):He=n[40];var Ge=He,ze=Ge&&Ge.length>0,je;if(n[41]!==M||n[42]!==ze||n[43]!==K){if(je=[],!ze&&o("polarisVideoUtils").isFeed(M)){var Ke;n[45]!==K?(Ke=function(t){C.addImpressionFromPost(K,t)},n[45]=K,n[46]=Ke):Ke=n[46],je.push(Ke)}n[41]=M,n[42]=ze,n[43]=K,n[44]=je}else je=n[44];var Qe=!1,Xe=r("usePolarisMediaSensitivityOverlay")(K,M,P,t.checkIsSensitivityOverlayDisabledCallback),Ye=Xe.mediaOverlayCoverInfo,Je=Xe.handleHideSensitivityOverlay,Ze=Xe.shouldShowSensitivityOverlay;if(Be&&Ze){var et,tt,nt;n[47]!==X?(nt=X||{},n[47]=X,n[48]=nt):nt=n[48];var rt=nt,ot=rt.checkIfMediaOverlayInfoImpressionLoggingDisabled,at=rt.onLoggedMediaOverlayInfoImpression,it=K.code;if(!o("PolarisUA").isMobile()&&it!=null&&(((et=Ye)==null?void 0:et.overlayType)==="SECRET_LINK"||((tt=Ye)==null?void 0:tt.overlayType)==="EARLY_ACCESS")){var lt=K.isVideo===!0?"reel":"p",st;n[49]!==it||n[50]!==lt?(st=c.jsx(m,{params:{permalink_key:lt,shortcode:it}}),n[49]=it,n[50]=lt,n[51]=st):st=n[51];var ut;n[52]!==Ye||n[53]!==st?(ut=babelHelpers.extends({},Ye,{extra:st}),n[52]=Ye,n[53]=st,n[54]=ut):ut=n[54],Ye=ut}var ct;n[55]!==ot||n[56]!==Ae?(ct=ot!=null?ot(Ae):!1,n[55]=ot,n[56]=Ae,n[57]=ct):ct=n[57];var dt=!Ve&&!ze,mt;n[58]!==Je||n[59]!==K?(mt=function(){return Je(K)},n[58]=Je,n[59]=K,n[60]=mt):mt=n[60];var pt;n[61]!==M||n[62]!==w||n[63]!==Ne||n[64]!==q||n[65]!==Ye||n[66]!==Oe||n[67]!==at||n[68]!==Be.id||n[69]!==Ae||n[70]!==ct||n[71]!==dt||n[72]!==mt?(pt=c.jsx(r("PolarisSensitivityOverlay.react"),{analyticsContext:M,asSidecarChild:w,dimensions:Ne,disableMediaOverlayInfoImpressionLogging:ct,isPhoto:dt,isVisible:q,mediaId:Ae,mediaOverlayCoverInfo:Ye,onLoggedMediaOverlayInfoImpression:at,onShowPostClicked:mt,ownerId:Be.id,previewData:Oe}),n[61]=M,n[62]=w,n[63]=Ne,n[64]=q,n[65]=Ye,n[66]=Oe,n[67]=at,n[68]=Be.id,n[69]=Ae,n[70]=ct,n[71]=dt,n[72]=mt,n[73]=pt):pt=n[73],xe=pt}else if(ze){var _t;if(F===!0)Qe=!0,_t=t;else{var ft;if(n[74]!==t){var gt=t.mediaFooter,ht=babelHelpers.objectWithoutPropertiesLoose(t,s);ft=ht,n[74]=t,n[75]=ft}else ft=n[75];_t=ft}var yt;n[76]!==V||n[77]!==Ge||n[78]!==_t?(yt=c.jsx(r("PolarisSidecarMedia.react"),babelHelpers.extends({},_t,{onChildIndexChange:V,sidecarChildren:Ge})),n[76]=V,n[77]=Ge,n[78]=_t,n[79]=yt):yt=n[79],xe=yt}else if(Ve){var Ct=p,bt;n[80]!==D?(bt=[D],n[80]=D,n[81]=bt):bt=n[81];var vt=bt,St;n[82]!==je||n[83]!==vt?(St=[].concat(vt,je),n[82]=je,n[83]=vt,n[84]=St):St=n[84];var Rt;n[85]!==N||n[86]!==M||n[87]!==w||n[88]!==A||n[89]!==O||n[90]!==B||n[91]!==W||n[92]!==Ct||n[93]!==H||n[94]!==G||n[95]!==z||n[96]!==K||n[97]!==t.className||n[98]!==Q||n[99]!==$||n[100]!==Y||n[101]!==J||n[102]!==ee?(Rt=function(n){return c.jsxs("div",{ref:n,children:[W===!0?c.jsx(r("PolarisEmbedVideo.react"),{className:t.className,isVisible:Ct,post:K}):c.jsx(r("PolarisMediaVideo.react"),{adInfo:N,analyticsContext:M,asSidecarChild:w,autoplay:A,className:t.className,firstSidecarChildSrc:O,isVisible:Ct,onFinished:G,onLoop:z,post:K,relationship:Q,shouldAutoPlay:$(Ct,ee),upcomingEventMediaId:B}),Y===!0&&J!=null&&c.jsx(r("PolarisIGCoreToast.react"),{absolutePosition:!0,duration:3e3,onClose:H,wide:!0,children:J})]})},n[85]=N,n[86]=M,n[87]=w,n[88]=A,n[89]=O,n[90]=B,n[91]=W,n[92]=Ct,n[93]=H,n[94]=G,n[95]=z,n[96]=K,n[97]=t.className,n[98]=Q,n[99]=$,n[100]=Y,n[101]=J,n[102]=ee,n[103]=Rt):Rt=n[103];var Lt;n[104]!==K.id||n[105]!==St||n[106]!==Rt?(Lt=c.jsx(o("PolarisViewpointReact.react").Viewpoint,{action:St,id:K.id,children:Rt}),n[104]=K.id,n[105]=St,n[106]=Rt,n[107]=Lt):Lt=n[107],xe=Lt}else{var Et;n[108]!==qe?(Et=r("nullthrows")(qe),n[108]=qe,n[109]=Et):Et=n[109];var kt;n[110]!==Ne||n[111]!==Me||n[112]!==I||n[113]!==g||n[114]!==Ae||n[115]!==Et?(kt={dimensions:Ne,likeEventCount:g,onPhotoRendered:I,postId:Ae,src:Et,srcSet:Me},n[110]=Ne,n[111]=Me,n[112]=I,n[113]=g,n[114]=Ae,n[115]=Et,n[116]=kt):kt=n[116];var It=kt,Tt;if(n[117]!==M||n[118]!==w||n[119]!==O||n[120]!==B||n[121]!==i||n[122]!==q||n[123]!==It||n[124]!==j||n[125]!==qe||n[126]!==we||n[127]!==Ue||n[128]!==Z){if(Ue&&Ue.length>0||we){var Dt=w===!0?O:qe,xt;n[130]!==Dt?(xt=r("nullthrows")(Dt),n[130]=Dt,n[131]=xt):xt=n[131],Tt=c.jsx(o("PolarisPhotoWithIndicator.react").PhotoWithIndicator,babelHelpers.extends({},j,It,{analyticsContext:M,isFocused:i,isVisible:q,upcomingEvent:we,upcomingEventMediaId:B,upcomingEventThumbnailSrc:xt,usertags:Ue,viewer:Z}))}else Tt=c.jsx(r("PolarisPhoto.react"),babelHelpers.extends({},j,It,{analyticsContext:M,asSidecarChild:w}));n[117]=M,n[118]=w,n[119]=O,n[120]=B,n[121]=i,n[122]=q,n[123]=It,n[124]=j,n[125]=qe,n[126]=we,n[127]=Ue,n[128]=Z,n[129]=Tt}else Tt=n[129];var $t;n[132]!==je?($t=[].concat(je),n[132]=je,n[133]=$t):$t=n[133];var Pt=$t,Nt;n[134]!==Tt||n[135]!==K.id?(Nt=function(t){return c.jsx(r("PolarisPhotoWrapper.react"),{postId:K.id,ref:t,children:Tt})},n[134]=Tt,n[135]=K.id,n[136]=Nt):Nt=n[136];var Mt;n[137]!==Pt||n[138]!==K.id||n[139]!==Nt?(Mt=c.jsx(o("PolarisViewpointReact.react").Viewpoint,{action:Pt,id:K.id,children:Nt}),n[137]=Pt,n[138]=K.id,n[139]=Nt,n[140]=Mt):Mt=n[140];var wt=Mt,At;n[141]!==g?(At=c.jsx(r("PolarisLikeAnimation.react"),{likeEventCount:g},g),n[141]=g,n[142]=At):At=n[142];var Ft;n[143]!==v||n[144]!==At||n[145]!==wt?(Ft=c.jsxs(o("PolarisDoubleTappable").DoubleTappable,{onBlur:E,onDoubleClick:v,onFocus:R,role:"button",children:[wt,At]}),n[143]=v,n[144]=At,n[145]=wt,n[146]=Ft):Ft=n[146],xe=Ft}var Ot;n[147]!==Ae||n[148]!==K.floating_context_items?(Ot=K.floating_context_items!=null&&K.floating_context_items.length>0?c.jsx(r("PolarisMediaNoteBubbleGroup.react"),{floatingContextItems:K.floating_context_items,mediaId:Ae}):null,n[147]=Ae,n[148]=K.floating_context_items,n[149]=Ot):Ot=n[149];var Bt=Ot;if(U!=null&&!Qe&&!Ze){var Wt;n[150]!==xe||n[151]!==U?(Wt=c.jsxs(c.Fragment,{children:[xe,U]}),n[150]=xe,n[151]=U,n[152]=Wt):Wt=n[152],xe=Wt}var qt;n[153]===Symbol.for("react.memo_cache_sentinel")?(qt={className:"x1n2onr6"},n[153]=qt):qt=n[153];var Ut=xe,Vt;n[154]===Symbol.for("react.memo_cache_sentinel")?(Vt={className:"xyxf0pu xyx8ycp x10l6tqk x1vjfegm"},n[154]=Vt):Vt=n[154];var Ht;n[155]!==Bt?(Ht=c.jsx("div",babelHelpers.extends({},Vt,{children:Bt})),n[155]=Bt,n[156]=Ht):Ht=n[156];var Gt;return n[157]!==xe||n[158]!==Ht?(Gt=c.jsxs("div",babelHelpers.extends({},qt,{children:[Ut,Ht]})),n[157]=xe,n[158]=Ht,n[159]=Gt):Gt=n[159],Gt}function _(e,t){return e.id!==t.id}var f=r("polarisWithRemountOnChange")(_)(p);l.default=f}),98);
__d("PolarisSidecarChild.react",["IGDSBox.react","PolarisMedia_DEPRECATED.react","PolarisOrganicImpressionAction","PolarisViewpointReact.react","PolarisVpvdImpressionAction","cr:5000","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["index","media","mediaWidth","onChildIndexChange","sidecarChildIndex","sidecarChildren","analyticsContext","isVisible","mediaFooter","onMediaRendered","post"],s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(43),i,l,s,c,d,m,p,_,f,g;if(a[0]!==t){var h=t.index,y=t.media,C=t.mediaWidth,b=t.onChildIndexChange,v=t.sidecarChildIndex,S=t.sidecarChildren,R=t.analyticsContext,L=t.isVisible,E=t.mediaFooter,k=t.onMediaRendered,I=t.post,T=babelHelpers.objectWithoutPropertiesLoose(t,e);l=h,c=y,d=C,f=v,g=S,i=R,s=L,m=k,_=I,p=T,a[0]=t,a[1]=i,a[2]=l,a[3]=s,a[4]=c,a[5]=d,a[6]=m,a[7]=p,a[8]=_,a[9]=f,a[10]=g}else i=a[1],l=a[2],s=a[3],c=a[4],d=a[5],m=a[6],p=a[7],_=a[8],f=a[9],g=a[10];var D;a[11]!==i||a[12]!==l||a[13]!==s||a[14]!==c||a[15]!==m||a[16]!==p||a[17]!==f||a[18]!==g?(D=c.isUpsell===!0&&n("cr:5000")!=null?u.jsx(n("cr:5000"),{upsellSidecarChild:c}):u.jsx(r("PolarisMedia_DEPRECATED.react"),babelHelpers.extends({},p,{accessibilityCaption:c.accessibilityCaption,analyticsContext:i,asSidecarChild:!0,firstSidecarChildSrc:g[0].src,isVisible:f===l?s:!1,onMediaRendered:m,post:c})),a[11]=i,a[12]=l,a[13]=s,a[14]=c,a[15]=m,a[16]=p,a[17]=f,a[18]=g,a[19]=D):D=a[19];var x=D;if(l===0){var $;return a[20]!==c.id||a[21]!==d||a[22]!==x?($=u.jsx(r("IGDSBox.react"),{position:"relative",width:d,children:x},c.id),a[20]=c.id,a[21]=d,a[22]=x,a[23]=$):$=a[23],$}var P;a[24]!==i||a[25]!==c?(P=o("PolarisOrganicImpressionAction").makeCarouselImpressionAction(c,i),a[24]=i,a[25]=c,a[26]=P):P=a[26];var N;a[27]!==i||a[28]!==l||a[29]!==c||a[30]!==_.id||a[31]!==g[0]?(N=o("PolarisVpvdImpressionAction").makeCarouselVpvdImpressionAction(c,g[0],l,_.id,i),a[27]=i,a[28]=l,a[29]=c,a[30]=_.id,a[31]=g[0],a[32]=N):N=a[32];var M;a[33]!==P||a[34]!==N?(M=[P,N],a[33]=P,a[34]=N,a[35]=M):M=a[35];var w;a[36]!==d||a[37]!==x?(w=function(t){return u.jsx(r("IGDSBox.react"),{containerRef:t,position:"relative",width:d,children:x})},a[36]=d,a[37]=x,a[38]=w):w=a[38];var A;return a[39]!==c.id||a[40]!==M||a[41]!==w?(A=u.jsx(o("PolarisViewpointReact.react").Viewpoint,{action:M,id:c.id,children:w},c.id),a[39]=c.id,a[40]=M,a[41]=w,a[42]=A):A=a[42],A}l.default=c}),98);
__d("usePolarisSidecarMediaOrUpsell",["PolarisIsLoggedIn","PolarisUA","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=4,s=2;function u(t){var n=o("react-compiler-runtime").c(3),r=t.post,a=t.sidecarChildren;if(o("PolarisIsLoggedIn").isLoggedIn()||o("PolarisUA").isDesktop()||a.some(c)||r.dimensions===null||r.owner===null)return a;var i;if(n[0]!==r||n[1]!==a){i=[].concat(a);var l=i.length>=e?s:null;if(l!=null&&i[l-1].mediaPreview!=null){var u={dimensions:r.dimensions,id:"",isUpsell:!0,isVideo:!1,mediaPreview:i[l-1].mediaPreview,owner:r.owner,src:""};i.splice(l,0,u)}n[0]=r,n[1]=a,n[2]=i}else i=n[2];return i}function c(e){return e.mediaOverlayInfo!=null}l.default=u}),98);
__d("PolarisSidecarMedia.react",["PolarisSidecarChild.react","PolarisSidecar_DEPRECATED.react","react","react-compiler-runtime","usePolarisSidecarMediaOrUpsell"],(function(t,n,r,o,a,i,l){"use strict";var e=["sidecarChildren","initialCarouselIndex","post"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){var n=o("react-compiler-runtime").c(23),a,i,l,s;n[0]!==t?(s=t.sidecarChildren,a=t.initialCarouselIndex,l=t.post,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s):(a=n[1],i=n[2],l=n[3],s=n[4]);var c;n[5]!==i.onChildIndexChange?(c=function(t,n,r){return[i.onChildIndexChange].filter(Boolean).forEach(function(e){return e(t,n,r)})},n[5]=i.onChildIndexChange,n[6]=c):c=n[6];var d=c,p;n[7]!==l||n[8]!==s?(p={post:l,sidecarChildren:s},n[7]=l,n[8]=s,n[9]=p):p=n[9];var _=r("usePolarisSidecarMediaOrUpsell")(p),f;n[10]!==i||n[11]!==l||n[12]!==_?(f=function(t,n){return _.map(function(e,o){return u.jsx(r("PolarisSidecarChild.react"),babelHelpers.extends({index:o,media:e,mediaWidth:t,post:l,sidecarChildIndex:n,sidecarChildren:_},i),o)})},n[10]=i,n[11]=l,n[12]=_,n[13]=f):f=n[13];var g=f,h;n[14]!==_?(h=_.map(m).filter(Boolean),n[14]=_,n[15]=h):h=n[15];var y=h,C;n[16]!==y||n[17]!==a||n[18]!==d||n[19]!==i.mediaFooter||n[20]!==g||n[21]!==_.length?(C=u.jsx(o("PolarisSidecar_DEPRECATED.react").Sidecar,{dimensions:y,initialCarouselIndex:a,mediaFooter:i.mediaFooter,numSidecarChildren:_.length,onChildIndexChange:d,renderSidecarChildren:g}),n[16]=y,n[17]=a,n[18]=d,n[19]=i.mediaFooter,n[20]=g,n[21]=_.length,n[22]=C):C=n[22];var b=C;return b}function m(e){var t=e.dimensions;return t}l.default=d}),98);
__d("PolarisMediaContainer.react",["PolarisMedia_DEPRECATED.react","PolarisReactRedux.react","polarisPostSelectors","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["onPostMediaRendered","onPostSidecarChildIndexChange"],s,u=s||(s=o("react"));function c(e,t){return{onMediaRendered:o("polarisPostSelectors").getOnMediaRendered(e,t.onPostMediaRendered)}}function d(e,t){return{onSidecarChildIndexChange:function(n,r,o){var e=t.onPostSidecarChildIndexChange;e&&e(r)}}}function m(t,n,r){var o=r.onPostMediaRendered,a=r.onPostSidecarChildIndexChange,i=babelHelpers.objectWithoutPropertiesLoose(r,e);return babelHelpers.extends({},i,t,n)}var p=o("PolarisReactRedux.react").connect(c,d,m)(r("PolarisMedia_DEPRECATED.react"));l.default=p}),98);
__d("PolarisPostActionLikePost",["PolarisAPILikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisSentryFeedbackActions","PolarisToastActions","QPLUserFlow","polarisLogAction","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(t,n,a){return function(i){return r("polarisLogAction")("likeAttempt",n),r("QPLUserFlow").start(r("qpl")._(379204822,"720"),{annotations:{string:{source:n==null?void 0:n.source}}}),i({postId:t,type:"LIKE_POST_REQUESTED"}),o("PolarisAPILikePost").likePost(t).then(function(){a!=null?o("PolarisAdsEngagementLogger").logAdLike(n,a):o("PolarisEngagementLogger").logOrganicLike(n),r("QPLUserFlow").endSuccess(r("qpl")._(379204822,"720")),i({postId:t,type:"LIKE_POST_SUCCEEDED"})},function(a){var l;r("polarisLogAction")("likeFailure",n),r("QPLUserFlow").endFailure(r("qpl")._(379204822,"720"),"request_failed");var s=((l=a.responseObject)==null?void 0:l.spam)||!1;if(s){var u,c,d,m,p,_,f,g=(u=a.responseObject)==null?void 0:u.feedback_title,h=(c=a.responseObject)==null?void 0:c.feedback_message,y=(d=a.responseObject)==null?void 0:d.feedback_url,C=(m=a.responseObject)==null?void 0:m.feedback_action,b=(p=a.responseObject)==null?void 0:p.feedback_appeal_label,v=(_=a.responseObject)==null?void 0:_.restriction_enrollment_data,S=(f=a.responseObject)==null?void 0:f.enforcement_transparency_instance_identifier;i(o("PolarisSentryFeedbackActions").showSentryFeedback({action:C,enforcement_transparency_instance_identifier:S,feedback_appeal_label:b,message:h,restriction_enrollment_data:v,source:n.source,sourceOfAction:"like_post",title:g,url:y}))}i({postId:t,type:"LIKE_POST_FAILED"}),i(o("PolarisToastActions").showToast({actionHandler:function(){return i(e(t,n))},actionText:o("PolarisGenericStrings").RETRY_TEXT,text:o("PolarisGenericStrings").GENERIC_ERROR_MESSAGE}))})}}l.likePost=e}),98);
__d("PolarisPostActionRemovePostFromCollection",["InstagramODS","PolarisAPIEditCollection"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.collectionId,n=e.postId;return function(e){return e({collectionId:t,postId:n,type:"REMOVE_POST_FROM_COLLECTION_REQUESTED"}),r("InstagramODS").incr("web.unsaveFromCollection.attempt"),o("PolarisAPIEditCollection").editCollection({collectionId:t,postIdsToRemove:[n]}).then(function(){e({collectionId:t,postId:n,type:"REMOVE_POST_FROM_COLLECTION_SUCCEEDED"}),r("InstagramODS").incr("web.unsaveFromCollection.success")}).catch(function(){e({collectionId:t,postId:n,type:"REMOVE_POST_FROM_COLLECTION_FAILED"}),r("InstagramODS").incr("web.unsaveFromCollection.failure")})}}l.removePostFromCollection=e}),98);
__d("PolarisPostActionSavePost",["PolarisAPISavePost","PolarisAdsEngagementLogger","polarisLogAction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return function(a){return r("polarisLogAction")("saveAttempt",t),a({postId:e,type:"SAVE_POST_REQUESTED"}),o("PolarisAPISavePost").savePost(e).then(function(){r("polarisLogAction")("saveSuccess",t),a({postId:e,type:"SAVE_POST_SUCCEEDED"}),n!=null&&o("PolarisAdsEngagementLogger").logAdSave(n)},function(){r("polarisLogAction")("saveFailure",t),a({postId:e,type:"SAVE_POST_FAILED"})})}}l.savePost=e}),98);
__d("PolarisPostActionUnlikePost",["PolarisAPIUnlikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisSentryFeedbackActions","PolarisToastActions","QPLUserFlow","polarisLogAction","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(t,n,a){return function(i){return r("polarisLogAction")("unlikeAttempt",n),r("QPLUserFlow").start(r("qpl")._(379198902,"749"),{annotations:{string:{source:n==null?void 0:n.source}}}),i({postId:t,type:"UNLIKE_POST_REQUESTED"}),o("PolarisAPIUnlikePost").unlikePost(t).then(function(){a!=null?o("PolarisAdsEngagementLogger").logAdUnlike(n,a):o("PolarisEngagementLogger").logOrganicUnlike(n),r("QPLUserFlow").endSuccess(r("qpl")._(379198902,"749")),i({postId:t,type:"UNLIKE_POST_SUCCEEDED"})},function(a){var l,s=((l=a.responseObject)==null?void 0:l.spam)||!1;if(s){var u,c,d,m,p,_,f,g=(u=a.responseObject)==null?void 0:u.feedback_title,h=(c=a.responseObject)==null?void 0:c.feedback_message,y=(d=a.responseObject)==null?void 0:d.feedback_url,C=(m=a.responseObject)==null?void 0:m.feedback_action,b=(p=a.responseObject)==null?void 0:p.feedback_appeal_label,v=(_=a.responseObject)==null?void 0:_.restriction_enrollment_data,S=(f=a.responseObject)==null?void 0:f.enforcement_transparency_instance_identifier;i(o("PolarisSentryFeedbackActions").showSentryFeedback({action:C,enforcement_transparency_instance_identifier:S,feedback_appeal_label:b,message:h,restriction_enrollment_data:v,source:n.source,sourceOfAction:"unlike_post",title:g,url:y}))}r("polarisLogAction")("unlikeFailure",n),r("QPLUserFlow").endFailure(r("qpl")._(379198902,"749"),"request_failed"),i({postId:t,type:"UNLIKE_POST_FAILED"}),i(o("PolarisToastActions").showToast({actionHandler:function(){return i(e(t,n))},actionText:o("PolarisGenericStrings").RETRY_TEXT,text:o("PolarisGenericStrings").GENERIC_ERROR_MESSAGE}))})}}l.unlikePost=e}),98);
__d("PolarisPostActionUnsavePost",["PolarisAPIUnsavePost","PolarisAdsEngagementLogger","polarisLogAction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return function(a){return r("polarisLogAction")("unsaveAttempt",t),a({postId:e,type:"UNSAVE_POST_REQUESTED"}),o("PolarisAPIUnsavePost").unsavePost(e).then(function(){r("polarisLogAction")("unsaveSuccess",t),a({postId:e,type:"UNSAVE_POST_SUCCEEDED"}),n!=null&&o("PolarisAdsEngagementLogger").logAdUnsave(n)},function(){r("polarisLogAction")("unsaveFailure",t),a({postId:e,type:"UNSAVE_POST_FAILED"})})}}l.unsavePost=e}),98);
__d("PolarisPostCoauthorReviewOverlayFooterCTA.react",["fbt","FBLogger","IGDSBox.react","IGDSButton.react","IGDSTextVariants.react","JSResourceForInteraction","PolarisConfig","PolarisUserHoverCard.react","PolarisUserLink.react","err","gkx","polarisGetPostFromGraphMediaInterface","react","react-compiler-runtime","useIGDSLazyDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback,d=r("JSResourceForInteraction")("PolarisCoauthorReviewDialog.react").__setRef("PolarisPostCoauthorReviewOverlayFooterCTA.react");function m(e){var t,n,a=o("react-compiler-runtime").c(22),i=e.invitedCoauthorProducers,l=e.mediaId,c=e.mediaShortcode,m=e.productType,p=e.user,_=r("useIGDSLazyDialog")(d),f=_[0],g;a[0]!==l||a[1]!==c||a[2]!==m||a[3]!==f||a[4]!==(p==null?void 0:p.username)?(g=function(){var e;f({mediaId:l!=null?l:"",mediaShortcode:c!=null?c:"",productType:m,username:(e=p==null?void 0:p.username)!=null?e:""})},a[0]=l,a[1]=c,a[2]=m,a[3]=f,a[4]=p==null?void 0:p.username,a[5]=g):g=a[5];var h=g;if(p==null||p.username==null||l==null){var y=r("err")("PolarisPostCoauthorReviewOverlayFooterCTA requires a post user");return r("FBLogger")("ig_web").catching(y),null}var C=o("PolarisConfig").getViewerIdOrZero(),b=i!=null&&i.some(function(e){return(e==null?void 0:e.id)===C});if(!b)return null;var v=!p.isUnpublished,S=(t=p==null?void 0:p.username)!=null?t:"",R=(n=p==null?void 0:p.username)!=null?n:"",L;a[6]!==R?(L=u.jsx(r("PolarisUserLink.react"),{username:R}),a[6]=R,a[7]=L):L=a[7];var E;a[8]!==v||a[9]!==S||a[10]!==L||a[11]!==p.id?(E=u.jsx(r("PolarisUserHoverCard.react"),{display:"inline-block",isUserAvailable:v,userId:p.id,username:S,children:L}),a[8]=v,a[9]=S,a[10]=L,a[11]=p.id,a[12]=E):E=a[12];var k=E,I;a[13]!==k?(I=s._(/*BTDS*/"{media_owner_username} convidou voc\u00ea para colaborar no post.",[s._param("media_owner_username",k)]),a[13]=k,a[14]=I):I=a[14];var T=I,D;a[15]!==k?(D=s._(/*BTDS*/"{media_owner_username} convidou voc\u00ea para colaborar no reel.",[s._param("media_owner_username",k)]),a[15]=k,a[16]=D):D=a[16];var x=D,$;return a[17]!==h||a[18]!==T||a[19]!==m||a[20]!==x?($=r("gkx")("4757")?u.jsxs(r("IGDSBox.react"),{alignItems:"center",color:"primaryBackground",direction:"row",justifyContent:"between",paddingX:3,paddingY:2,position:"relative",children:[u.jsx(r("IGDSBox.react"),{flex:"shrink",marginEnd:5,marginStart:1,maxWidth:350,overflow:"auto",wrap:!0,children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryText",maxLines:3,zeroMargin:!0,children:m===o("polarisGetPostFromGraphMediaInterface").PRODUCT_TYPE_CLIPS?x:T})}),u.jsx(r("IGDSBox.react"),{flex:"shrink",marginEnd:1,children:u.jsx(r("IGDSButton.react"),{display:"inline",label:s._(/*BTDS*/"Analisar"),onClick:h,variant:"tertiary"})})]}):null,a[17]=h,a[18]=T,a[19]=m,a[20]=x,a[21]=$):$=a[21],$}l.default=m}),226);
__d("PolarisPostConstants",["IGDSThemeConstantsHelpers"],(function(t,n,r,o,a,i,l){"use strict";var e=30,s=40,u=o("IGDSThemeConstantsHelpers").getNumericValue("medium-screen-max"),c=o("IGDSThemeConstantsHelpers").getNumericValue("medium-screen-min"),d=56;l.AVATAR_SIZE_SMALL=e,l.AVATAR_SIZE_LARGE=s,l.MEDIUM_SCREEN_MAX=u,l.SIDEBAR_VARIANT_CUTOFF=c,l.POST_TOAST_HEIGHT=d}),98);
__d("PolarisPostCommentInputPicker.react",["CometPlaceholder.react","PolarisUA","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react")),c=r("deferredLoadComponent")(r("requireDeferredForDisplay")("PolarisPostCommentInput.react").__setRef("PolarisPostCommentInputPicker.react"));function d(t){var n=o("react-compiler-runtime").c(17),a,i;n[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l=r("usePolarisIsOnFeedPage")(),s=r("usePolarisIsOnAdsActivityPage")(),d;n[3]!==s||n[4]!==l||n[5]!==a?(d=(l||s)&&a.inModal!==!0&&o("PolarisUA").isDesktop(),n[3]=s,n[4]=l,n[5]=a,n[6]=d):d=n[6];var m=d,p;n[7]!==m?(p={0:{className:"x1qjc9v5 x5ur3kl x13fuv20 x178xt8z x9f619 x78zum5 xdt5ytf x2lah0s xnnlda6 x1gslohp x1n2onr6"},1:{className:"x1qjc9v5 x9f619 x78zum5 xdt5ytf x2lah0s x1d6elog"}}[!!m<<0],n[7]=m,n[8]=p):p=n[8];var _;n[9]!==p?(_=u.jsx("div",babelHelpers.extends({},p)),n[9]=p,n[10]=_):_=n[10];var f;n[11]!==a||n[12]!==i?(f=u.jsx(c,babelHelpers.extends({},a,{ref:i})),n[11]=a,n[12]=i,n[13]=f):f=n[13];var g;return n[14]!==_||n[15]!==f?(g=u.jsx(r("CometPlaceholder.react"),{fallback:_,name:"PostCommentInputPicker",children:f}),n[14]=_,n[15]=f,n[16]=g):g=n[16],g}l.default=d}),98);
__d("PolarisPostFeatures.react",["FBLogger","PolarisPostConstants","PolarisPostModalRenderingContext.react","PolarisPostVariants","PolarisReactRedux.react","PolarisRelationshipTypes","PolarisUA","polarisRelationshipSelectors.react","react-compiler-runtime","usePolarisDisplayProperties","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[{overrides:{threeLineHeaderEnabled:!0},predicate:"isThreeLineHeaderEnabled"},{overrides:{avatarSize:(e=o("PolarisPostConstants")).AVATAR_SIZE_SMALL,commentsAreStacked:!0},predicate:"isFeed"},{overrides:{avatarSize:e.AVATAR_SIZE_SMALL,commentsAreStacked:!0},predicate:"isWidePhotoOnMediumScreen"},{overrides:{avatarSize:e.AVATAR_SIZE_SMALL,hasThreadedSidebarComments:!0,showPostButton:!0},predicate:"isRichCommentsEnabled"},{overrides:{avatarSize:e.AVATAR_SIZE_SMALL,commentsAreStacked:!0,hasThreadedSidebarComments:!1,showPostButton:!0},predicate:"isStackedScreenSize"},{overrides:{hasPhotosOfYouOption:!0},predicate:"isViewerInUserTags"},{overrides:{showFollowButton:!1},predicate:"isFeedAndOwnerFollowedByViewer"},{overrides:{showFollowButton:!1},predicate:"isModalAndOwnerFollowedByViewer"},{overrides:{canViewerProvideFeedback:!1},predicate:"isOwnerPrivate"},{overrides:{canViewerProvideFeedback:!0},predicate:"isOwnerFollowedByViewer"},{overrides:{canViewerProvideFeedback:!0,showFollowButton:!1},predicate:"isOwnerTheViewer"},{overrides:{showFollowButton:!1},predicate:"isOwnerUnpublished"},{overrides:{showFollowButton:!1},predicate:"isBlocked"},{overrides:{showFollowButton:!1},predicate:"hasFollowHashtagInfo"},{overrides:{canViewerProvideFeedback:!1},predicate:"isLoggedOut"}],u={avatarSize:e.AVATAR_SIZE_LARGE,canViewerProvideFeedback:!0,commentsAreStacked:!1,hasPhotosOfYouOption:!1,hasThreadedSidebarComments:!1,showFollowButton:!0,showPostButton:!1,threeLineHeaderEnabled:!1};function c(e){var t,n=e.isInModal,r=e.owner,a=e.post,i=e.relationship,l=e.variant,s=e.viewer,u=e.viewportWidth,c=l===o("PolarisPostVariants").VARIANTS.feed,d=!!s,m=!s,p=(s==null?void 0:s.id)===r.id,_=i.followedByViewer.state===o("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING,f=!!a.followHashtagInfo,g=!!a.location&&(a.sponsors||[]).length>0;return{hasFollowHashtagInfo:f,isBlocked:i.hasBlockedViewer.state===o("PolarisRelationshipTypes").BLOCK_STATUS_BLOCKED,isFavorited:((t=i.favoritedByViewer)==null?void 0:t.state)===o("PolarisRelationshipTypes").FAVORITE_STATUS_FAVORITED,isFeed:c,isFeedAndOwnerFollowedByViewer:c&&_,isLoggedIn:d,isLoggedOut:m,isModalAndOwnerFollowedByViewer:n&&_,isOwnerFollowedByViewer:_,isOwnerPrivate:!!r.isPrivate,isOwnerTheViewer:p,isOwnerUnpublished:!!r.isUnpublished,isRichCommentsEnabled:!0,isSidecar:(a.sidecarChildren||[]).length>0,isStackedScreenSize:u<o("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,isThreeLineHeaderEnabled:g,isViewerInUserTags:d&&(a.usertags||[]).some(function(e){return e.user.id===(s==null?void 0:s.id)}),isWidePhotoOnMediumScreen:!!(a.dimensions&&a.dimensions.width/a.dimensions.height>1.5&&u>o("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF&&u<=o("PolarisPostConstants").MEDIUM_SCREEN_MAX)}}function d(e){var t=c(e),n=t.isBlocked,o=t.isFavorited,a=t.isLoggedIn,i=t.isSidecar,l=t.isStackedScreenSize;return babelHelpers.extends({isBlocked:n,isFavorited:o,isLoggedIn:a,isSidecar:i,isStackedScreenSize:l},s.filter(function(e){var n=e.predicate,o=t[n];if(typeof o!="boolean")throw r("FBLogger")("instagram_web").mustfixThrow("Could not find predicate %s",n);return o}).reduce(function(e,t){var n=t.overrides;return babelHelpers.extends({},e,n)},u))}function m(e){var t=o("react-compiler-runtime").c(12),n=e.owner,a=e.path,i=e.post,l=e.variant,s;t[0]!==n.id?(s=function(t){return o("polarisRelationshipSelectors.react").getRelationship(t.relationships,n.id)},t[0]=n.id,t[1]=s):s=t[1];var u=o("PolarisReactRedux.react").useSelector(s),c=r("usePolarisViewer")(),m=r("usePolarisDisplayProperties")(),p=m.viewportHeight,_=m.viewportWidth,f=o("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext(),g=f.isInModal,h;if(t[2]!==g||t[3]!==n||t[4]!==a||t[5]!==i||t[6]!==u||t[7]!==l||t[8]!==c||t[9]!==p||t[10]!==_){var y={isInModal:g,isMobile:o("PolarisUA").isMobile(),owner:n,path:a,post:i,relationship:u,variant:l,viewer:c,viewportHeight:p,viewportWidth:_};h=d(y),t[2]=g,t[3]=n,t[4]=a,t[5]=i,t[6]=u,t[7]=l,t[8]=c,t[9]=p,t[10]=_,t[11]=h}else h=t[11];return h}l.getPostFeatures=d,l.usePolarisPostFeatures=m}),98);
__d("useMaybeLogInstagramAdDirectReshareSend",["InstagramAdDirectReshareSendFalcoEvent","InstagramODS","PolarisContainerModuleUtils","PolarisViewpointActionUtils","polarisAdsSelectors.react","polarisRelationshipSelectors.react","react","react-compiler-runtime","usePolarisAnalyticsContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(7),n=e.id,a=e.mediaType,i=e.mpk,l=e.ownerId,s=r("usePolarisAnalyticsContext")(),u=o("polarisAdsSelectors.react").useFeedAdInfo(n,c),d=o("polarisRelationshipSelectors.react").useRelationship(l||""),m;return t[0]!==u||t[1]!==s||t[2]!==a||t[3]!==i||t[4]!==l||t[5]!==d?(m=function(){if(u!=null&&u.ad_id!=null&&u.tracking_token!=null&&d!=null){var e=u.ad_id,t=u.tracking_token,n=o("PolarisContainerModuleUtils").getContainerModule(s);r("InstagramODS").incr("web.ads.feed.share"),r("InstagramAdDirectReshareSendFalcoEvent").log(function(){return{a_pk:l!=null?l:"",ad_id:e,follow_status:o("PolarisViewpointActionUtils").getFollowStatus(d),m_pk:i,m_t:a.toString(),pigeon_reserved_keyword_module:n,source_of_action:n,tracking_token:t}})}},t[0]=u,t[1]=s,t[2]=a,t[3]=i,t[4]=l,t[5]=d,t[6]=m):m=t[6],m}function c(e){return e}l.default=u}),98);
__d("useIGDShareSheetSendPostToOpenRecipients",["InstagramMediaProductTypeName","PolarisDirectActionSendPostToUsers","PolarisInteractionsLogger","PolarisReactRedux.react","PolarisViewpointActionUtils","react-compiler-runtime","useMaybeLogInstagramAdDirectReshareSend","usePolarisMQTT","useStableCallback"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=o("react-compiler-runtime").c(19),a=r("usePolarisMQTT")(),i=o("PolarisReactRedux.react").useDispatch(),l;if(n[0]!==e.id||n[1]!==e.owner){var s;l=(s=o("PolarisViewpointActionUtils").getMPKForFeedMedia({id:e.id,owner:e.owner}))!=null?s:"",n[0]=e.id,n[1]=e.owner,n[2]=l}else l=n[2];var u=l,c;n[3]!==e?(c=o("PolarisInteractionsLogger").getMediaTypeFromPost(e),n[3]=e,n[4]=c):c=n[4];var d=c,m;n[5]!==e.productType?(m=r("InstagramMediaProductTypeName").cast(e.productType),n[5]=e.productType,n[6]=m):m=n[6];var p=m,_=(t=e.owner)==null?void 0:t.id,f;n[7]!==d||n[8]!==u||n[9]!==e.id||n[10]!==_?(f={id:e.id,mediaType:d,mpk:u,ownerId:_},n[7]=d,n[8]=u,n[9]=e.id,n[10]=_,n[11]=f):f=n[11];var g=r("useMaybeLogInstagramAdDirectReshareSend")(f),h;return n[12]!==i||n[13]!==g||n[14]!==a||n[15]!==e.id||n[16]!==e.mediaOverlayInfo||n[17]!==p?(h=function(n,r,l,s){i(o("PolarisDirectActionSendPostToUsers").sendPostToUsers({comment:r!=null?r:void 0,mediaId:e.id,mediaOverlayInfo:e.mediaOverlayInfo,mqtt:a,onError:s,onSuccess:l,productType:p,recipients:n})),g()},n[12]=i,n[13]=g,n[14]=a,n[15]=e.id,n[16]=e.mediaOverlayInfo,n[17]=p,n[18]=h):h=n[18],r("useStableCallback")(h)}l.default=e}),98);
__d("useIGDShareSheetOnSubmitPost",["IGDShareSheetOnSubmitFactory","IGDThreadTTLCUtils","PolarisInteractionsLogger","PolarisLinkBuilder","PolarisPostShareUtils.next.react","asyncToGeneratorRuntime","react-compiler-runtime","requireDeferred","useIGDShareSheetSendPostToOpenRecipients","useStableCallback"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("getSendPostToInstamadilloRecipient").__setRef("useIGDShareSheetOnSubmitPost");function s(t){var a,i,l,s=o("react-compiler-runtime").c(7),u=r("useIGDShareSheetSendPostToOpenRecipients")(t),c=o("PolarisInteractionsLogger").getMediaTypeFromPost(t),d=o("PolarisLinkBuilder").BASE_INSTAGRAM_URL+o("PolarisPostShareUtils.next.react").getShareURL(c,(a=t.code)!=null?a:""),m;if(s[0]!==t.id||s[1]!==((i=t.owner)==null?void 0:i.id)||s[2]!==((l=t.owner)==null?void 0:l.username)||s[3]!==t.productType||s[4]!==u||s[5]!==d){var p,_;m=(function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var n,a,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];var c=l,m=yield e.load();return r("IGDShareSheetOnSubmitFactory")(u,m(t.id,(n=t.owner)==null?void 0:n.id,(a=t.owner)==null?void 0:a.username,d),function(e){return o("IGDThreadTTLCUtils").isIGDTTLCEnabledForIGDCandidate(e,t.productType)}).apply(void 0,c)});return function(){return a.apply(this,arguments)}})(),s[0]=t.id,s[1]=(p=t.owner)==null?void 0:p.id,s[2]=(_=t.owner)==null?void 0:_.username,s[3]=t.productType,s[4]=u,s[5]=d,s[6]=m}else m=s[6];return r("useStableCallback")(m)}l.default=s}),98);
__d("PolarisPostFastShareButton.react",["CometPlaceholder.react","IGDContactSearchDialogType.flow","IGDSMessagesOutlineIcon.react","IGDSecureShareSheetDialogPlaceholder.react","JSResourceForInteraction","PolarisIGCoreSVGIconButton.react","PolarisIsLoggedIn","PolarisPostModalContext.react","PolarisPostStrings","PolarisPostTypeUtils","QPLUserFlow","lazyLoadComponent","polarisLogAction","qpl","react","react-compiler-runtime","useIGDSLazyDialog","useIGDSecureShareSheetInteractionLogger","useIGDShareSheetOnSubmitPost","usePolarisPost","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo,m=u.useState,p=r("JSResourceForInteraction")("IGDSecureShareSheetDialog.react").__setRef("PolarisPostFastShareButton.react"),_=r("lazyLoadComponent")(r("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisPostFastShareButton.react"));function f(e){var t=o("react-compiler-runtime").c(42),n=e.analyticsContext,a=e["data-testid"],l=e.mediaId,u=e.mediaOverlayInfo,c=e.postId,d=e.sharingFrictionInfo,f=o("usePolarisPost").usePost(c,h),y=o("PolarisPostModalContext.react").useSetPostModal(),C=r("useIGDSLazyDialog")(p,g),b=C[0],v=C[1],S=m(!1),R=S[0],L=S[1],E=(d==null?void 0:d.bloksAppUrl)!=null&&(d==null?void 0:d.shouldHaveSharingFriction)===!0,k,I=u!=null?u:f.mediaOverlayInfo,T;t[0]!==f||t[1]!==I?(T=babelHelpers.extends({},f,{mediaOverlayInfo:I}),t[0]=f,t[1]=I,t[2]=T):T=t[2],k=T;var D=k,x=r("useIGDShareSheetOnSubmitPost")(D),$=o("useIGDSecureShareSheetInteractionLogger").useLogShareSheetInteraction(),P;t[3]!==n||t[4]!==$||t[5]!==x||t[6]!==b||t[7]!==f||t[8]!==y||t[9]!==E||t[10]!==D?(P=function(){if(r("polarisLogAction")("shareClick",{source:n,type:o("PolarisPostTypeUtils").getPostType(f)}),r("QPLUserFlow").start(r("qpl")._(379205139,"1723"),{annotations:{bool:{is_graphql:!1},string:{source:n}}}),!E){if(!o("PolarisIsLoggedIn").isLoggedIn())y("share");else{var e=r("uuidv4")();$("igd_sharesheet_open",{flowInstanceId:e,shareType:o("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:n}),b({flowInstanceId:e,onSubmit:x,post:D})}L(!0)}},t[3]=n,t[4]=$,t[5]=x,t[6]=b,t[7]=f,t[8]=y,t[9]=E,t[10]=D,t[11]=P):P=t[11];var N=P,M;t[12]!==n||t[13]!==$||t[14]!==x||t[15]!==b||t[16]!==D?(M=function(t){L(!1);var e=r("uuidv4")();$("igd_sharesheet_open",{flowInstanceId:e,shareType:o("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:n}),b({flowInstanceId:e,onSubmit:x,post:D})},t[12]=n,t[13]=$,t[14]=x,t[15]=b,t[16]=D,t[17]=M):M=t[17];var w=M,A;t[18]===Symbol.for("react.memo_cache_sentinel")?(A=function(t){L(!1)},t[18]=A):A=t[18];var F=A,O,B;t[19]!==n||t[20]!==l?(B={media_id:l,module:n},t[19]=n,t[20]=l,t[21]=B):B=t[21],O=B;var W=O,q,U;t[22]!==w?(U={"ig.action.navigation.OpenShareSheet":w,"ig.action.navigation.ResumeStoryPlayback":F},t[22]=w,t[23]=U):U=t[23],q=U;var V=q,H;t[24]!==V||t[25]!==W||t[26]!==l||t[27]!==E||t[28]!==(d==null?void 0:d.bloksAppUrl)||t[29]!==R?(H=function(){return E?R&&(d==null?void 0:d.bloksAppUrl)!=null&&s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(_,{actionOverrides:V,appId:d==null?void 0:d.bloksAppUrl,params:W},l)}):null},t[24]=V,t[25]=W,t[26]=l,t[27]=E,t[28]=d==null?void 0:d.bloksAppUrl,t[29]=R,t[30]=H):H=t[30];var G=H,z;t[31]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(r("IGDSMessagesOutlineIcon.react"),{alt:o("PolarisPostStrings").SHARE_TEXT,color:"ig-secondary-text",size:24}),t[31]=z):z=t[31];var j;t[32]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(r("IGDSMessagesOutlineIcon.react"),{alt:o("PolarisPostStrings").SHARE_TEXT,color:"ig-primary-text",size:24}),t[32]=j):j=t[32];var K;t[33]!==a||t[34]!==N||t[35]!==v?(K=s.jsx(r("PolarisIGCoreSVGIconButton.react"),{"data-testid":void 0,hover:z,onClick:N,ref:v,children:j}),t[33]=a,t[34]=N,t[35]=v,t[36]=K):K=t[36];var Q;t[37]!==G?(Q=G(),t[37]=G,t[38]=Q):Q=t[38];var X;return t[39]!==K||t[40]!==Q?(X=s.jsxs(s.Fragment,{children:[K,Q]}),t[39]=K,t[40]=Q,t[41]=X):X=t[41],X}function g(e){return s.jsx(r("IGDSecureShareSheetDialogPlaceholder.react"),{onClose:e})}g.displayName=g.name+" [from "+i.id+"]";function h(e){return e}l.default=f}),98);
__d("PolarisSaveButton.react",["IGDSIconButton.react","IGDSSavePanoFilledIcon.react","IGDSSavePanoOutlineIcon.react","JSResourceForInteraction","PolarisIGCoreAnchoredPopover.react","PolarisIGCorePressable.react","PolarisPostStrings","PolarisReactRedux.react","PolarisSavedCollectionPicker.react","PolarisSavedPostsActionRequestNextSavedCollections","PolarisUA","nullthrows","polarisSavedPostsSelectors","react","react-compiler-runtime","useIGDSLazyDialog","usePolarisViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useState,c=24,d=-16,m=5;function p(e){var t=o("react-compiler-runtime").c(40),n=e.analyticsContext,a=e.collectionsPostSavedTo,i=e["data-testid"],l=e.isSaved,p=e.onMouseEnter,f=e.onSaveMedia,g=e.onSaveMediaToCollection,h=e.onShowToast,y=e.postId,C=e.thumbnailSrcSet,b=o("PolarisReactRedux.react").useDispatch(),v=r("usePolarisViewer")(),S=!v,R;t[0]!==S||t[1]!==v?(R=function(t){if(S)return null;var e=r("nullthrows")(v);return o("polarisSavedPostsSelectors").getAllSavedCollectionsForUser(t,r("nullthrows")(e.id))},t[0]=S,t[1]=v,t[2]=R):R=t[2];var L=o("PolarisReactRedux.react").useSelector(R),E;t[3]!==S||t[4]!==v?(E=function(t){if(S)return null;var e=r("nullthrows")(v);return o("polarisSavedPostsSelectors").getSavedCollectionsPaginationForUser(t,r("nullthrows")(e.id))},t[3]=S,t[4]=v,t[5]=E):E=t[5];var k=o("PolarisReactRedux.react").useSelector(E),I;t[6]!==L||t[7]!==k?(I=function(){return L==null||k==null?!1:L.length>=m?!0:!k.moreAvailable&&L.length>1},t[6]=L,t[7]=k,t[8]=I):I=t[8];var T=I,D;t[9]!==S?(D=!S&&o("PolarisUA").isDesktop(),t[9]=S,t[10]=D):D=t[10];var x=D,$=T()&&x,P=function(t){t.preventDefault(),f(!l),!l&&$&&(h!=null&&h(),F(!0))},N=function(){if(p==null||p(),!S&&!T()&&!r("nullthrows")(k).isFetching){var e=r("nullthrows")(v);b(o("PolarisSavedPostsActionRequestNextSavedCollections").requestInitialSavedCollections(r("nullthrows")(e.id)))}F(!1)},M=u(!1),w=M[0],A=M[1],F=A,O;t[11]===Symbol.for("react.memo_cache_sentinel")?(O=r("JSResourceForInteraction")("PolarisCreateCollectionWithPostModal.react").__setRef("PolarisSaveButton.react"),t[11]=O):O=t[11];var B=r("useIGDSLazyDialog")(O),W=B[0],q;t[12]!==n||t[13]!==a||t[14]!==w||t[15]!==l||t[16]!==f||t[17]!==g||t[18]!==y||t[19]!==F||t[20]!==$||t[21]!==C||t[22]!==W?(q=$?s.jsx(r("PolarisSavedCollectionPicker.react"),{collectionsPostSavedTo:a,hidePopover:w,onSaveMedia:f,onSaveMediaToCollection:g,postId:y,postIsSaved:l,setHidePopover:F,setShowCreateCollectionModal:function(){return W({onSaveChange:f,postId:y,source:n,srcSet:C})}}):null,t[12]=n,t[13]=a,t[14]=w,t[15]=l,t[16]=f,t[17]=g,t[18]=y,t[19]=F,t[20]=$,t[21]=C,t[22]=W,t[23]=q):q=t[23];var U;t[24]!==x||t[25]!==l?(U=l||!x?null:s.jsx(r("IGDSSavePanoOutlineIcon.react"),{alt:o("PolarisPostStrings").SAVE_TEXT,color:"ig-secondary-text",size:c}),t[24]=x,t[25]=l,t[26]=U):U=t[26];var V;t[27]!==l?(V=l?s.jsx(r("IGDSSavePanoFilledIcon.react"),{alt:o("PolarisPostStrings").UNSAVE_TEXT,color:"ig-primary-text",size:c}):s.jsx(r("IGDSSavePanoOutlineIcon.react"),{alt:o("PolarisPostStrings").SAVE_TEXT,color:"ig-primary-text",size:c}),t[27]=l,t[28]=V):V=t[28];var H;t[29]!==i||t[30]!==P||t[31]!==U||t[32]!==V?(H=s.jsx(r("IGDSIconButton.react"),{"data-testid":void 0,hover:U,onClick:P,padding:8,children:V}),t[29]=i,t[30]=P,t[31]=U,t[32]=V,t[33]=H):H=t[33];var G;t[34]!==N||t[35]!==H?(G=s.jsx(r("PolarisIGCorePressable.react"),{onMouseEnter:N,onPress:_,children:H}),t[34]=N,t[35]=H,t[36]=G):G=t[36];var z;return t[37]!==G||t[38]!==q?(z=s.jsx(r("PolarisIGCoreAnchoredPopover.react"),{content:q,offsetTop:d,preferredPositionX:"center",preferredPositionY:"top",showOnHover:!0,children:G}),t[37]=G,t[38]=q,t[39]=z):z=t[39],z}function _(){}l.default=p}),98);
__d("PolarisPostActionAddPostToCollection",["InstagramODS","PolarisAPIEditCollection","nullthrows","polarisUserSelectors"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.collectionId,n=e.failureHandler,a=e.postIds,i=e.successHandler;return function(e,l){var s=l(),u=r("nullthrows")(o("polarisUserSelectors").getViewer__DEPRECATED(s)).id;return e({collectionId:t,postIds:a,type:"ADD_POST_TO_COLLECTION_REQUESTED"}),r("InstagramODS").incr("web.saveToCollection.attempt"),o("PolarisAPIEditCollection").editCollection({collectionId:t,postIdsToAdd:[].concat(a)}).then(function(){e({collectionId:t,postIds:a,type:"ADD_POST_TO_COLLECTION_SUCCEEDED",userId:u}),r("InstagramODS").incr("web.saveToCollection.success"),i!=null&&i()}).catch(function(){e({collectionId:t,postIds:a,type:"ADD_POST_TO_COLLECTION_FAILED"}),r("InstagramODS").incr("web.saveToCollection.failure"),n!=null&&n()})}}l.addPostToCollection=e}),98);
__d("usePolarisMediaSaveToCollectionReduxHandler",["PolarisPostActionAddPostToCollection","PolarisPostActionRemovePostFromCollection","PolarisReactRedux.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(3),n=o("PolarisReactRedux.react").useDispatch(),r;return t[0]!==n||t[1]!==e?(r=function(r,a){n(r?o("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:a,postId:e}):o("PolarisPostActionAddPostToCollection").addPostToCollection({collectionId:a,postIds:[e]}))},t[0]=n,t[1]=e,t[2]=r):r=t[2],r}l.default=u}),98);
__d("PolarisPostFeedbackControls_DEPRECATED.react",["IGRouter_DO_NOT_USE.react","PolarisCommentButton.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisLikeButton.react","PolarisPostFastShareButton.react","PolarisPostVariants","PolarisReactRedux.react","PolarisRepostButton.react","PolarisSaveButton.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","logPolarisPostModalOpen","maybeGetViewerRepostId","polarisLogAction","polarisPostSelectors","qex","react","react-compiler-runtime","stylex","usePolarisMediaSaveToCollectionReduxHandler","usePolarisNavigateToLogin","usePolarisPostShowSavedToastHandler","usePolarisSelector"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p={likeButton:{display:"x1rg5ohu",marginInlineStart:"x1qfufaz",$$css:!0},likeButtonLeftAligned:{marginInlineEnd:"x1xegmmw",order:"x9ek82g",$$css:!0},repostButton:{display:"x1rg5ohu",$$css:!0},root:{display:"x78zum5",flexDirection:"x1q0g3np",marginTop:"x1gslohp",$$css:!0}};function _(t){var n=o("react-compiler-runtime").c(82),a=t.analyticsContext,i=t.canViewerProvideFeedback,l=t.canViewerRepost,s=t.canViewerReshare,c=t.code,d=t.commentsDisabled,_=t.containerRef,h=t.customAlignment,y=t.hideShareButton,C=t.isBlocked,b=t.isSidecar,v=t.isVideo,S=t.likedByViewer,R=t.mediaId,L=t.onCommentClick,E=t.onLikeChange,k=t.onSaveChange,I=t.ownerIsPrivate,T=t.ownerUsername,D=t.postId,x=t.savedByViewer,$=t.sharingFrictionInfo,P=t.variant,N=t.xstyle,M=t.history,w=o("PolarisReactRedux.react").useDispatch(),A;n[0]!==D?(A=function(t){return o("polarisPostSelectors").getPostById(t,D)},n[0]=D,n[1]=A):A=n[1];var F=r("usePolarisSelector")(A),O;n[2]!==D?(O=function(t){return o("polarisPostSelectors").getSavedCollectionsForPost(t,D)},n[2]=D,n[3]=O):O=n[3];var B=r("usePolarisSelector")(O),W;if(n[4]!==F.floating_context_items){var q,U=(q=F.floating_context_items)==null?void 0:q.map(g).filter(Boolean);W=r("maybeGetViewerRepostId")(U==null?void 0:U.map(f)),n[4]=F.floating_context_items,n[5]=W}else W=n[5];var V=W,H=r("usePolarisPostShowSavedToastHandler")(),G=m(o("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),z=G.canUserSeePersistentCta,j=m(o("PolarisInFeedPostModalContext").InFeedPostModalContext),K=r("usePolarisNavigateToLogin")(c,T),Q=K[0],X=K[1],Y;n[6]!==a||n[7]!==Q||n[8]!==E?(Y=function(t){o("PolarisIsLoggedIn").isLoggedIn()?E(t,"button"):(r("polarisLogAction")("likeAttempt",{source:a}),Q("like"))},n[6]=a,n[7]=Q,n[8]=E,n[9]=Y):Y=n[9];var J=Y,Z;n[10]!==a||n[11]!==Q||n[12]!==k?(Z=function(t){o("PolarisIsLoggedIn").isLoggedIn()?k(t):(r("polarisLogAction")("saveAttempt",{source:a}),Q("save"))},n[10]=a,n[11]=Q,n[12]=k,n[13]=Z):Z=n[13];var ee=Z,te;n[14]!==X?(te=function(){o("PolarisIsLoggedIn").isLoggedIn()||X()},n[14]=X,n[15]=te):te=n[15];var ne=te,re=r("usePolarisMediaSaveToCollectionReduxHandler")(D),oe;n[16]!==a||n[17]!==z||n[18]!==c||n[19]!==w||n[20]!==M||n[21]!==b||n[22]!==v||n[23]!==Q||n[24]!==L||n[25]!==j||n[26]!==D||n[27]!==P?(oe=function(){var e=o("PolarisUA").isMobile();if(r("polarisLogAction")("commentButtonClicked",{isLoggedIn:o("PolarisIsLoggedIn").isLoggedIn(),source:a,type:v?"video":"photo"}),o("PolarisIsLoggedIn").isLoggedIn())if(o("PolarisUA").isDesktop()&&P===o("PolarisPostVariants").VARIANTS.feed)w(o("PolarisFeedActionOpenPostModalForId").openPostModalForId(D)),j(D),r("logPolarisPostModalOpen")(a,o("PolarisInteractionsLogger").getMediaTypeFromPost({isSidecar:b,isVideo:v}),"feed_comment");else if(P===o("PolarisPostVariants").VARIANTS.feed||e){var t,n=r("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((t={},t[o("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=z||void 0,t.shortcode=c,t));M.push(n)}else L();else Q("comment")},n[16]=a,n[17]=z,n[18]=c,n[19]=w,n[20]=M,n[21]=b,n[22]=v,n[23]=Q,n[24]=L,n[25]=j,n[26]=D,n[27]=P,n[28]=oe):oe=n[28];var ae=oe,ie=!o("PolarisIsLoggedIn").isLoggedIn()||i;if(C||!ie)return null;var le=l===!0&&r("qex")._("3830")===!0,se=I!==!0&&!!s,ue=h==="left",ce=ue&&p.likeButtonLeftAligned,de;n[29]!==ce?(de=(e||(e=r("stylex")))(p.likeButton,ce),n[29]=ce,n[30]=de):de=n[30];var me;n[31]!==J||n[32]!==ne||n[33]!==S||n[34]!==de?(me=u.jsx(r("PolarisLikeButton.react"),{className:de,"data-testid":void 0,isLiked:S,onChange:J,onMouseEnter:ne}),n[31]=J,n[32]=ne,n[33]=S,n[34]=de,n[35]=me):me=n[35];var pe;n[36]!==d||n[37]!==ae||n[38]!==ne||n[39]!==ue?(pe=!d&&u.jsx(r("PolarisCommentButton.react"),{className:{0:"x1rg5ohu",1:"x1rg5ohu x1xegmmw x182iqb8"}[!!ue<<0],"data-testid":void 0,onClick:ae,onHoverStart:ne}),n[36]=d,n[37]=ae,n[38]=ne,n[39]=ue,n[40]=pe):pe=n[40];var _e;n[41]!==D||n[42]!==le||n[43]!==V?(_e=le&&u.jsx(r("PolarisRepostButton.react"),{mediaId:D,viewerRepostId:V,xstyle:p.repostButton}),n[41]=D,n[42]=le,n[43]=V,n[44]=_e):_e=n[44];var fe;n[45]!==a||n[46]!==y||n[47]!==ue||n[48]!==R||n[49]!==D||n[50]!==se||n[51]!==$?(fe=se&&y!==!0&&u.jsx("span",babelHelpers.extends({},{0:{className:"x1rg5ohu"},1:{className:"x1rg5ohu x1xegmmw x14yy4lh"}}[!!ue<<0],{children:u.jsx(r("PolarisPostFastShareButton.react"),{analyticsContext:a,"data-testid":void 0,mediaId:R,mediaOverlayInfo:null,postId:D,sharingFrictionInfo:$})})),n[45]=a,n[46]=y,n[47]=ue,n[48]=R,n[49]=D,n[50]=se,n[51]=$,n[52]=fe):fe=n[52];var ge;n[53]!==me||n[54]!==pe||n[55]!==_e||n[56]!==fe?(ge=u.jsxs(u.Fragment,{children:[me,pe,_e,fe]}),n[53]=me,n[54]=pe,n[55]=_e,n[56]=fe,n[57]=ge):ge=n[57];var he=ge,ye;n[58]!==N?(ye=(e||(e=r("stylex"))).props(p.root,N),n[58]=N,n[59]=ye):ye=n[59];var Ce;n[60]!==ue?(Ce={0:{className:"x972fbf x10w94by x1qhh985 x14e42zd x1rg5ohu xln7xf2 xk390pu xdj266r xat24cr x1ows92d xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},1:{className:"x972fbf x10w94by x1qhh985 x14e42zd x1rg5ohu xln7xf2 xk390pu xdj266r xat24cr xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1xegmmw x1lziwak xo1ph6p"}}[!!ue<<0],n[60]=ue,n[61]=Ce):Ce=n[61];var be;n[62]!==B?(be=B!=null?B:[],n[62]=B,n[63]=be):be=n[63];var ve;n[64]!==a||n[65]!==ee||n[66]!==ne||n[67]!==re||n[68]!==H||n[69]!==F.displayResources||n[70]!==D||n[71]!==x||n[72]!==be?(ve=u.jsx(r("PolarisSaveButton.react"),{analyticsContext:a,collectionsPostSavedTo:be,"data-testid":void 0,isSaved:x,onMouseEnter:ne,onSaveMedia:ee,onSaveMediaToCollection:re,onShowToast:H,postId:D,thumbnailSrcSet:F.displayResources}),n[64]=a,n[65]=ee,n[66]=ne,n[67]=re,n[68]=H,n[69]=F.displayResources,n[70]=D,n[71]=x,n[72]=be,n[73]=ve):ve=n[73];var Se;n[74]!==Ce||n[75]!==ve?(Se=u.jsx("span",babelHelpers.extends({},Ce,{children:ve})),n[74]=Ce,n[75]=ve,n[76]=Se):Se=n[76];var Re;return n[77]!==he||n[78]!==_||n[79]!==ye||n[80]!==Se?(Re=u.jsxs("section",babelHelpers.extends({},ye,{ref:_,children:[he,Se]})),n[77]=he,n[78]=_,n[79]=ye,n[80]=Se,n[81]=Re):Re=n[81],Re}function f(e){return{id:e.id,user_id:e.user_id}}function g(e){return e.media_note}var h=o("IGRouter_DO_NOT_USE.react").withIGRouter(_);l.default=h}),98);
__d("PolarisPostFooter.react",["IGDSBox.react","IGDSDivider.react","PolarisBoostMultiBoostUtils.react","PolarisBoostUtils","PolarisPostAboveFooterSection.react","PolarisPostBoostButton.react","PolarisPostViewInsights.react","nullthrows","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={marginTop0:{marginTop:"xdj266r",$$css:!0},marginTop16:{marginTop:"xw7yly9",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(28),n=e.analyticsContext,a=e.bloksAppId,i=e.boostedStatus,l=e.boostUnavailableIdentifier,c=e.boostUnavailableReason,d=e.className,m=e.hasViewInsights,p=e.mediaId,_=e.productType,f=e.viewerId,g=o("PolarisBoostUtils").useIsEligibleForBoost(i!=null&&f!=null),h;t[0]!==l||t[1]!==i?(h=o("PolarisBoostMultiBoostUtils.react").isEligibleForMultiBoostWebWithinBoostFlow(i,l),t[0]=l,t[1]=i,t[2]=h):h=t[2];var y=h;if(!m&&!g)return null;var C=m?"between":"end",b=m?u.marginTop0:u.marginTop16,v;t[3]!==a||t[4]!==m||t[5]!==p?(v=m&&s.jsx(r("PolarisPostViewInsights.react"),{bloksAppId:a,mediaId:p}),t[3]=a,t[4]=m,t[5]=p,t[6]=v):v=t[6];var S;t[7]!==n||t[8]!==l||t[9]!==c||t[10]!==i||t[11]!==p||t[12]!==_||t[13]!==g?(S=g&&i!=null&&_!=="ad"&&s.jsx(r("PolarisPostBoostButton.react"),{analyticsContext:n,boostedStatus:i,boostUnavailableIdentifier:l,boostUnavailableReason:c,mediaId:p,productType:r("nullthrows")(_)}),t[7]=n,t[8]=l,t[9]=c,t[10]=i,t[11]=p,t[12]=_,t[13]=g,t[14]=S):S=t[14];var R;t[15]!==C||t[16]!==b||t[17]!==v||t[18]!==S?(R=s.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:C,paddingX:4,paddingY:3,position:"relative",xstyle:b,children:[v,S]}),t[15]=C,t[16]=b,t[17]=v,t[18]=S,t[19]=R):R=t[19];var L=R,E;t[20]!==n||t[21]!==i||t[22]!==y||t[23]!==L?(E=y?s.jsxs(r("IGDSBox.react"),{children:[s.jsx(r("PolarisPostAboveFooterSection.react"),{analyticsContext:n,boostedStatus:i}),s.jsx(r("IGDSBox.react"),{marginStart:4,width:"90%",children:s.jsx(r("IGDSDivider.react"),{})}),L]}):L,t[20]=n,t[21]=i,t[22]=y,t[23]=L,t[24]=E):E=t[24];var k;return t[25]!==d||t[26]!==E?(k=s.jsx("section",{className:d,children:E}),t[25]=d,t[26]=E,t[27]=k):k=t[27],k}l.default=c}),98);
__d("PolarisPostRemoveCommentsSelectors",["reselect"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.postRemoveComments}var s=o("reselect").createSelector(e,function(e){var t=e.isVisible;return t});l.getPostRemoveCommentsIsVisible=s}),98);
__d("PolarisThreadedComments.react",["cx","IGDSBox.react","IGDSDivider.react","PolarisBatchDOM","PolarisCommentCover.react","PolarisCommentThread.react","PolarisCommentsSectionText.react","PolarisCommentsSortContext.react","PolarisCommentsStrings","PolarisConfig","PolarisFacebookCommentCountSheet.react","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisLinkBuilder","PolarisNoCommentsPlaceholder.react","PolarisPaginationUtils","PolarisPendingCommentState","PolarisPostComment.react","PolarisPostCommentsContainerPlaceholder.react","PolarisPostVariants","PolarisReactRedux.react","PolarisSortCommentsUtil","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","PolarisThreadedCommentsLoadMoreButton.react","PolarisUA","cr:1342","isStringNullOrEmpty","nullthrows","polarisCommentReducer","polarisUserSelectors","react","react-compiler-runtime","requestIdleCallback"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={commentsCover:{marginInlineStart:"x1diwwjn",$$css:!0}};function d(e,t){var n=t.getBoundingClientRect().top,r=n-t.scrollTop,o=e.getBoundingClientRect().top;return o-r}function m(e){var t=o("react-compiler-runtime").c(22),n=e.innerRef,a=e.isPermalinkedComment,i=e.onHidePermalinkReply,l=e.parentComment,s=e.parentProps,c=e.parentState,d=e.permalinkedReplyId,m=e.permalinkedReplyNodeRef,p=e.replyPagerNodeRef,_=s.analyticsContext,f=s.code,g=s.commentingDisabledForViewer,h=s.customIndentationPadding,y=s.handleDeleteCommentClick,C=s.hideUserAvatar,b=s.id,v=s.isDeletingComments,S=s.loggedIn,R=s.onLikeCountClick,L=s.ownerId,E=s.reducedAvatarMargin,k=s.showCommentOptionsInline,I=c.commentPermalinkAnimEnabled,T;return t[0]!==_||t[1]!==f||t[2]!==I||t[3]!==g||t[4]!==h||t[5]!==y||t[6]!==C||t[7]!==b||t[8]!==n||t[9]!==v||t[10]!==a||t[11]!==S||t[12]!==i||t[13]!==R||t[14]!==L||t[15]!==l||t[16]!==d||t[17]!==m||t[18]!==E||t[19]!==p||t[20]!==k?(T=u.jsx(r("PolarisCommentThread.react"),{analyticsContext:_,code:f,commentingDisabledForViewer:g,customIndentationPadding:h,hideUserAvatar:C,innerRef:n,isPermalinkedComment:a,loggedIn:S,onDeleteCommentClick:y,onHidePermalinkReply:i,onLikeCountClick:R,parentComment:l,permalinkedReplyAnimating:I,permalinkedReplyId:d,permalinkedReplyNodeRef:m,postId:b,postOwnerId:L,reducedAvatarMargin:E,replyPagerNodeRef:p,showCommentOptionsInline:k,showRemoveIcon:v}),t[0]=_,t[1]=f,t[2]=I,t[3]=g,t[4]=h,t[5]=y,t[6]=C,t[7]=b,t[8]=n,t[9]=v,t[10]=a,t[11]=S,t[12]=i,t[13]=R,t[14]=L,t[15]=l,t[16]=d,t[17]=m,t[18]=E,t[19]=p,t[20]=k,t[21]=T):T=t[21],T}var p=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,t.$2=u.createRef(),t.$3=u.createRef(),t.$4=u.createRef(),t.$5=[],t.state={commentPermalinkAnimEnabled:!1,commentsSortOrder:t.props.sortOrder,isAutoscrollingCommentPermalink:!1,replyPermalinkLastHideTime:null,showHiddenComments:!1},t.$13=function(e){var n=t.props,r=n.analyticsContext,a=n.code,i=n.hasRankedComments,l=n.id,s=n.loadMore,u=n.mediaType,c=n.ownerId;s(l,i,a),o("PolarisInteractionsLogger").logInteractionAction({containerModule:r,eventName:"instagram_child_comments_load_more",mediaAuthorId:c,mediaId:l,mediaType:u})},t.$14=function(){t.setState({showHiddenComments:!0})},t.$15=function(e){t.setState({commentsSortOrder:e})},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var a=t.prototype;return a.$6=function(){return this.$2.current||null},a.$7=function(){return this.$3.current||null},a.$8=function(){return this.$4.current||null},a.$9=function(t,n,a,i){var e=this;this.setState({commentPermalinkAnimEnabled:!1,isAutoscrollingCommentPermalink:!0}),o("PolarisBatchDOM").measure(function(){var l,s=d(n,t);if(a){var u=d(a,t),c=a.getBoundingClientRect().height,m=t.getBoundingClientRect().height,p=Math.max(m-c,0);l=Math.max(s,u-p)}else l=s;o("PolarisBatchDOM").mutate(function(){t.scrollTop=l;var n=function(){e.setState({commentPermalinkAnimEnabled:!0,isAutoscrollingCommentPermalink:!1})};i?r("requestIdleCallback")(function(){n()}):n()})})},a.componentDidMount=function(){var e=this.$1;if(e){var t=this.$6();if(t)this.$9(e,t,this.$7(),!0);else if(!this.props.hasRankedComments){if(o("PolarisUA").isDesktop())return;e.scrollTop=e.scrollHeight}}},a.componentDidUpdate=function(t,n,r){var e=this.$1;if(e){var o=this.$6();if(o){if(this.state.isAutoscrollingCommentPermalink)return;if(this.props.permalinkedCommentId!==t.permalinkedCommentId||this.props.permalinkedReplyId!==t.permalinkedReplyId||this.props.permalinkedComment!==t.permalinkedComment){this.$9(e,o,this.$7(),!1);return}}this.$10(t,n,r,e,o)}},a.$10=function(t,n,r,a,i){var e=this,l=t.commentSaveIsInFlight&&!this.props.commentSaveIsInFlight,s=r||{},u=s.newCommentCachedOffset,c=t.id===this.props.id&&t.permalinkedCommentId===this.props.permalinkedCommentId&&t.permalinkedReplyId===this.props.permalinkedReplyId&&n.replyPermalinkLastHideTime!==this.state.replyPermalinkLastHideTime,d=this.$8();l&&!t.commentWasReply&&this.$5[0]&&this.$5[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),o("PolarisBatchDOM").measure(function(){var n=null;l&&!t.commentWasReply&&!e.props.hasRankedComments?n=a.scrollHeight:u!=null?n=a.scrollHeight-u:c&&i&&d&&(n=e.$11(a,i,d)),o("PolarisBatchDOM").mutate(function(){n!=null&&(a.scrollTop=n)})})},a.$11=function(t,n,r){var e=d(r,t),o=d(n,t),a=6,i=Math.max(e-a,o);return t.scrollTop>i?i:null},a.getSnapshotBeforeUpdate=function(t,n){var e=t.comments,r=this.props.comments,o=this.$1;return o&&t.id===this.props.id&&r.count()>e.count()&&!this.props.hasRankedComments?{newCommentCachedOffset:o.scrollHeight-o.scrollTop}:null},a.$12=function(){this.setState({replyPermalinkLastHideTime:new Date().valueOf()})},a.render=function(){var e=this,t=this.props,a=t.analyticsContext,i=t.captionAndTitle,l=t.captionCreatedAt,s=t.captionIsEdited,d=t.captionsDisabled,p=t.className,_=t.comments,f=t.commentsDisabled,g=t.commentsHasNextPage,h=t.communityNoteComponent,y=t.disableScroll,C=t.fbCommentCount,b=t.hasCoveredComments,v=t.hasRankedComments,S=t.hideUserAvatar,R=t.id,L=t.initialCommentsLoading,E=t.isFeedFeedbackAggregated,k=t.isOwnerVerified,I=t.loggedIn,T=t.mediaType,D=t.ownerId,x=t.permalinkedComment,$=t.permalinkedReplyId,P=t.postedAt,N=t.reducedAvatarMargin,M=t.requestComments,w=t.showCommentOptionsInline,A=t.showPagerBelowComments,F=f!==!0&&!!g,O=L&&_.size===0,B=C!=null&&C!==0&&T===2,W=C!=null&&C!==0&&E===!0,q=B||W;if((i==null||i==="")&&_.count()===0&&!F&&!O&&!q)return o("PolarisUA").isDesktop()?u.jsxs("div",{className:p,children:[h,u.jsx(r("PolarisNoCommentsPlaceholder.react"),{})]}):u.jsx("div",{className:p});var U=null,V=null,H=null;if(!O&&f!==!0){U=x?u.jsx("div",{className:"_a9z3"+(this.state.commentPermalinkAnimEnabled&&!$?" _a9yl":""),ref:this.$2,children:u.jsx(m,{isPermalinkedComment:!0,onHidePermalinkReply:function(){return e.$12()},parentComment:x,parentProps:this.props,parentState:this.state,permalinkedReplyId:$,permalinkedReplyNodeRef:this.$3,replyPagerNodeRef:this.$4})}):null;var G=function(){var t;return(t=e.props.comments.findIndex(function(e){return e.isAuthorVerified===!1}))!=null?t:-1};V=_.map(function(t,n){return x&&t.id===x.id||t.isCovered===!0?null:u.jsxs(r("IGDSBox.react"),{marginBottom:4,children:[u.jsx(m,{innerRef:function(r){return e.$5[n]=r},parentComment:t,parentProps:e.props,parentState:e.state},n),e.props.sortOrder===o("PolarisSortCommentsUtil").CommentsOptionValues.META_VERIFIED&&G()===n+1&&u.jsx(r("IGDSDivider.react"),{})]},n)}).filter(function(e){return!!e}),H=_.filter(function(e){return e.isCovered===!0}).map(function(t,n){return u.jsx(m,{innerRef:function(r){return e.$5[n]=r},parentComment:t,parentProps:e.props,parentState:e.state},n)})}var z=null;d!==!0&&(r("isStringNullOrEmpty")(i)?h!=null&&(z=u.jsxs(u.Fragment,{children:[h,u.jsx(r("IGDSDivider.react"),{})]})):z=u.jsxs(u.Fragment,{children:[u.jsx(r("PolarisPostComment.react"),{analyticsContext:a,captionCreatedAt:l,className:(o("PolarisUA").isMobile()?"_a9z4":"")+" _a9z5",commentOwnerId:D,communityNoteComponent:h,hideUserAvatar:!!S,isAuthorVerified:!!k,isCaption:!0,isEdited:!!s,isRestrictedPending:!1,loggedIn:I,mediaType:T,postedAt:r("nullthrows")(P),postId:R,postOwnerId:D,reducedAvatarMargin:N,showCommentOptionsInline:w,showRemoveIcon:!1,showRichComment:!0,text:i,variant:o("PolarisPostVariants").VARIANTS.flexible},"captionAndTitle"),h!=null&&u.jsx(r("IGDSDivider.react"),{})]}));var j=F&&this.renderLoadMoreCommentsLink(U!=null),K=v||A===!0,Q=function(t){return M(R,void 0,t)},X=o("PolarisSortCommentsUtil").showCommentsSortOptions(this.props.sortOrder,_.size),Y=function(){return _.some(function(e){return e.isAuthorVerified===!0})},J=this.props.sortOrder===o("PolarisSortCommentsUtil").CommentsOptionValues.META_VERIFIED&&!Y(),Z=u.jsx(r("IGDSBox.react"),{marginEnd:o("PolarisUA").isMobile()?4:0,marginStart:o("PolarisUA").isMobile()?4:0,children:u.jsx(r("IGDSDivider.react"),{})});return u.jsx(o("PolarisCommentsSortContext.react").PolarisCommentsSortContextProvider,{commentsSortOrder:this.state.commentsSortOrder,setCommentsSortOrder:this.$15,children:u.jsx("div",{className:p,children:u.jsxs("ul",{className:"_a9z6"+(y?" _a9z7":"")+(U!==null?" _a9z8":"")+(z===null?" _a9z9":"")+(!j||K?" _a9za":""),ref:function(n){return e.$1=n},children:[z,u.jsxs(r("IGDSBox.react"),{direction:"column",display:"flex",children:[X&&n("cr:1342")!=null&&u.jsx(r("IGDSBox.react"),{marginStart:12,marginTop:2,children:u.jsx(n("cr:1342"),{commentsCount:_.size,fetchComments:Q})}),U]}),O?u.jsx(r("PolarisPostCommentsContainerPlaceholder.react"),{}):null,!K&&j,u.jsxs(r("IGDSBox.react"),{children:[L?u.jsx(r("PolarisPostCommentsContainerPlaceholder.react"),{}):u.jsxs(r("IGDSBox.react"),{children:[J&&u.jsx(r("PolarisCommentsSectionText.react"),{commentsDivider:Z,marginStart:12,text:o("PolarisSortCommentsUtil").NO_META_VERIFIED_COMMENTS}),u.jsxs(r("IGDSBox.react"),{children:[!o("PolarisConfig").isLoggedOutFRXEligible()&&V,K&&j,!j&&b&&!this.state.showHiddenComments&&u.jsx(r("PolarisCommentCover.react"),{onClick:this.$14,postId:R,postOwnerId:D,xstyle:c.commentsCover}),this.state.showHiddenComments&&u.jsxs(u.Fragment,{children:[u.jsx(r("PolarisCommentsSectionText.react"),{commentsDivider:Z,marginStart:12,text:o("PolarisCommentsStrings").COVERED_COMMENTS}),H]})]})]}),q&&u.jsx(r("PolarisFacebookCommentCountSheet.react"),{fbCommentCount:C,isReels:T===2,marginStart:4})]})]})})})},a.renderLoadMoreCommentsLink=function(t){var e=this.props,n=e.code,a=e.commentsIsFetching,i=e.hasRankedComments,l=o("PolarisLinkBuilder").buildMediaCommentsLink(r("nullthrows")(n),o("PolarisUA").isMobile()),s,c;return i?(s=0,c=0):t?(s=2,c=2):(s=0,c=4),u.jsx("li",{children:u.jsx(r("PolarisThreadedCommentsLoadMoreButton.react"),{commentsIsFetching:a,handleLoadMoreCommentsClick:this.$13,marginBottom:c,marginTop:s,url:l})})},t})(u.PureComponent);function _(e,t){var n,r,a,i,l=t.id,s=t.ownerId,u=t.permalinkedCommentId,c=o("PolarisThreadedCommentSelectors").getThreadedCommentsLoading(e,l),d=o("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(e,l),m=(n=e.threadedComments.parentByPostId[l])!=null?n:o("polarisCommentReducer").EMPTY_POST_COMMENTS_STATE,p=m.count,_=m.pagination,f=(r=e.pendingComments[l])!=null?r:o("PolarisPendingCommentState").EMPTY_PENDING_COMMENT,g=null;!c&&u!=null&&u!==""&&(g=e.comments.byId.get(u));var h=(a=(i=e.threadedComments.parentByPostId[l])==null?void 0:i.sortOrder)!=null?a:o("PolarisSortCommentsUtil").CommentsOptionValues.TOP;return{comments:d,commentSaveIsInFlight:f.committing,commentsHasNextPage:o("PolarisPaginationUtils").hasNextPage(_),commentsIsFetching:o("PolarisPaginationUtils").isFetching(_),commentsTotalCount:p!=null?p:0,commentWasReply:f.repliedToCommentId!=null,hasCoveredComments:d.some(function(e){return e.isCovered===!0}),initialCommentsLoading:c,isOwnerVerified:o("polarisUserSelectors").getUserByIdOrThrows(e,s).isVerified,permalinkedComment:g,sortOrder:h}}function f(e){return{loadMore:function(n,r,a){o("PolarisIsLoggedIn").isLoggedIn()&&e(o("PolarisThreadedCommentActions").requestNextParentCommentPageV2(n,r))},requestComments:function(n,r,a){e(o("PolarisThreadedCommentActions").requestInitialComments(n,r,a))}}}var g=o("PolarisReactRedux.react").connect(_,f)(p);l.default=g}),98);
__d("PolarisThreadedCommentsLoader.react",["CometErrorBoundary.react","CometPlaceholder.react","FBLogger","IGDSBox.react","IGDSSpinner.react","PolarisReactRedux.react","PolarisThreadedCommentActions","react","react-compiler-runtime","usePolarisGetQuerySetup"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.children,a=e.initialCommentsQuery,i=e.postId,l;return t[0]!==i?(l=o("PolarisThreadedCommentActions").setupPostComments(i),t[0]=i,t[1]=l):l=t[1],r("usePolarisGetQuerySetup")(a,l),n}function c(e){var t=o("react-compiler-runtime").c(11),n=e.children,a=e.initialCommentsQuery,l=e.postId,c=o("PolarisReactRedux.react").useDispatch(),m;t[0]!==c||t[1]!==l?(m=function(t){c(o("PolarisThreadedCommentActions").initialCommentsError(l)),r("FBLogger")("ig_web").catching(t)},t[0]=c,t[1]=l,t[2]=m):m=t[2];var p=m,_;t[3]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(r("IGDSBox.react"),{direction:"row",justifyContent:"center",position:"relative",children:s.jsx(r("IGDSSpinner.react"),{})}),t[3]=_):_=t[3];var f;t[4]!==n||t[5]!==a||t[6]!==l?(f=s.jsx(r("CometPlaceholder.react"),{fallback:_,name:i.id,children:s.jsx(u,{initialCommentsQuery:a,postId:l,children:n})}),t[4]=n,t[5]=a,t[6]=l,t[7]=f):f=t[7];var g;return t[8]!==p||t[9]!==f?(g=s.jsx(r("CometErrorBoundary.react"),{fallback:d,onError:p,children:f}),t[8]=p,t[9]=f,t[10]=g):g=t[10],g}function d(){return null}l.default=c}),98);
__d("PolarisPostComments.react",["PolarisDeleteCommentModal.react","PolarisPostRemoveCommentsSelectors","PolarisPostVariants","PolarisReactRedux.react","PolarisThreadedComments.react","PolarisThreadedCommentsLoader.react","PolarisUA","nullthrows","polarisUserSelectors","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={commentToDeleteId:null,showDeleteCommentModal:!1},t.$1=function(e){t.setState({commentToDeleteId:e,showDeleteCommentModal:!0})},t.$2=function(){t.setState({commentToDeleteId:null,showDeleteCommentModal:!1})},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$3=function(){return this.props.variant!==o("PolarisPostVariants").VARIANTS.feed&&!o("PolarisUA").isMobile()},n.render=function(){var e=this.props,t=e.analyticsContext,n=e.caption,o=e.captionCreatedAt,a=e.captionIsEdited,i=e.captionsDisabled,l=e.className,u=e.code,c=e.commentingDisabledForViewer,d=e.commentsDisabled,m=e.communityNoteComponent,p=e.customIndentationPadding,_=e.fbCommentCount,f=e.hasRankedComments,g=e.hideUserAvatar,h=e.id,y=e.initialCommentsQuery,C=e.isFeedFeedbackAggregated,b=e.mediaType,v=e.onLikeCountClick,S=e.ownerId,R=e.permalinkedCommentId,L=e.permalinkedReplyId,E=e.postedAt,k=e.reducedAvatarMargin,I=e.showCommentOptionsInline,T=e.showRemoveCommentIcons,D=e.viewerId,x=D!=null,$;return $=s.jsx(r("PolarisThreadedComments.react"),{analyticsContext:t,captionAndTitle:n,captionCreatedAt:o,captionIsEdited:a,captionsDisabled:i,className:l,code:u,commentingDisabledForViewer:c,commentsDisabled:d,communityNoteComponent:m,customIndentationPadding:p,fbCommentCount:_,handleDeleteCommentClick:this.$1,hasRankedComments:f,hideUserAvatar:!!g,id:h,isDeletingComments:T,isFeedFeedbackAggregated:C,loggedIn:x,mediaType:b,onLikeCountClick:v,ownerId:S,permalinkedCommentId:R,permalinkedReplyId:L,postedAt:E,reducedAvatarMargin:k,showCommentOptionsInline:I}),y!=null&&($=s.jsx(r("PolarisThreadedCommentsLoader.react"),{initialCommentsQuery:y,postId:h,children:$})),s.jsxs(s.Fragment,{children:[$,this.state.showDeleteCommentModal&&s.jsx(r("PolarisDeleteCommentModal.react"),{analyticsContext:t,commentId:r("nullthrows")(this.state.commentToDeleteId),onClose:this.$2,postId:h})]})},t})(s.PureComponent);u.defaultProps={variant:o("PolarisPostVariants").VARIANTS.flexible};function c(e){var t;return{showRemoveCommentIcons:o("PolarisPostRemoveCommentsSelectors").getPostRemoveCommentsIsVisible(e),viewerId:(t=o("polarisUserSelectors").getViewer__DEPRECATED(e))==null?void 0:t.id}}var d=o("PolarisReactRedux.react").connect(c)(u);l.default=d}),98);
__d("PolarisPostFastPreviewCaption.react",["IGDSBox.react","PolarisPostFastCommentPrimitive.react","PolarisPostFastCrawlerComment.react","PolarisUA","nullthrows","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisIsOnFeedPage","usePolarisPost"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(10),n=e.enableTruncation,a=e.inModal,i=e.postId,l=r("usePolarisIsOnFeedPage")(),u=l&&a!==!0&&o("PolarisUA").isDesktop(),g=o("usePolarisPost").usePostAndOwner(i,f),h=o("usePolarisPost").usePostAndOwner(i,_),y=o("usePolarisPost").usePostAndOwner(i,p),C=o("usePolarisPost").usePostAndOwner(i,m),b=o("usePolarisPost").usePost(i,d),v=o("usePolarisPost").usePost(i,c),S=o("polarisCommentSelectors.react").useCommentTranslation(v);if(b==null||b==="")return null;(S==null?void 0:S.showTranslatedText)===!0&&S.translatedText!=null&&(b=S.translatedText);var R=u?2:1,L;t[0]!==n||t[1]!==C||t[2]!==y||t[3]!==b||t[4]!==g||t[5]!==h?(L=n===!0?s.jsx(r("PolarisPostFastCrawlerComment.react"),{isAuthorUnpublished:C,isAuthorVerified:y,text:b,userId:g,username:h}):s.jsx(r("PolarisPostFastCommentPrimitive.react"),{isAuthorUnpublished:C,isAuthorVerified:y,isCaption:!0,text:b,userId:g,username:h}),t[0]=n,t[1]=C,t[2]=y,t[3]=b,t[4]=g,t[5]=h,t[6]=L):L=t[6];var E;return t[7]!==R||t[8]!==L?(E=s.jsx(r("IGDSBox.react"),{marginBottom:R,position:"relative",children:L}),t[7]=R,t[8]=L,t[9]=E):E=t[9],E}function c(e){return e.captionCommentId}function d(e){return e.caption}function m(e,t){return t.isUnpublished}function p(e,t){return t.isVerified}function _(e,t){return r("nullthrows")(t.username)}function f(e,t){return r("nullthrows")(t.id)}l.default=u}),98);
__d("PolarisPostFastCommentLikeButton.react",["PolarisCommentActions","PolarisConfig","PolarisInteractionsLogger","PolarisLikeButton.react","PolarisReactRedux.react","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisComment","usePolarisPost"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){var n=o("react-compiler-runtime").c(8),a=o("usePolarisComment").useComment(e,d),i=o("usePolarisPost").usePost(t,o("PolarisInteractionsLogger").getMediaTypeFromPost),l=o("usePolarisPost").usePostAndOwner(t,c),s=r("usePolarisAnalyticsContext")(),u;if(n[0]===Symbol.for("react.memo_cache_sentinel")){var m;u=(m=o("PolarisConfig").getViewerId())!=null?m:"",n[0]=u}else u=n[0];var p;return n[1]!==s||n[2]!==a||n[3]!==e||n[4]!==t||n[5]!==l||n[6]!==i?(p={commentAuthorId:a,commentId:e,containerModule:s,mediaAuthorId:l,mediaId:t,mediaType:i,userId:u},n[1]=s,n[2]=a,n[3]=e,n[4]=t,n[5]=l,n[6]=i,n[7]=p):p=n[7],p}function c(e,t){return t.id}function d(e){return e.id}function m(e){var t=o("react-compiler-runtime").c(7),n=e.color,a=e.commentId,i=e.postId,l=o("PolarisReactRedux.react").useDispatch(),c=u(a,i),d=o("usePolarisComment").useComment(a,p),m;t[0]!==l||t[1]!==c?(m=function(t){l(t?o("PolarisCommentActions").likeComment(c):o("PolarisCommentActions").unlikeComment(c))},t[0]=l,t[1]=c,t[2]=m):m=t[2];var _=m,f;return t[3]!==n||t[4]!==d||t[5]!==_?(f=s.jsx(r("PolarisLikeButton.react"),{color:n,isLiked:d,onChange:_,padding:0,size:12}),t[3]=n,t[4]=d,t[5]=_,t[6]=f):f=t[6],f}function p(e){return e.likedByViewer}var _=s.memo(m);l.default=_}),98);
__d("PolarisPostFastPreviewComment.react",["PolarisPostFastCommentPrimitive.react","nullthrows","react","react-compiler-runtime","usePolarisComment"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t,n=o("react-compiler-runtime").c(5),a=e.commentId,i=(t=o("usePolarisComment")).useCommentAndOwner(a,p),l=t.useCommentAndOwner(a,m),u=t.useComment(a,d),_=t.useComment(a,c),f;return n[0]!==_||n[1]!==u||n[2]!==i||n[3]!==l?(f=s.jsx(r("PolarisPostFastCommentPrimitive.react"),{isAuthorVerified:_,text:u,userId:i,username:l}),n[0]=_,n[1]=u,n[2]=i,n[3]=l,n[4]=f):f=n[4],f}function c(e){return e.isAuthorVerified}function d(e){return e.text}function m(e,t){return r("nullthrows")(t.username)}function p(e,t){return r("nullthrows")(t.id)}l.default=u}),98);
__d("PolarisPostFastViewAllComments.react",["fbt","IGDSText.react","PolarisBigNumber.react","PolarisConfig","PolarisFastLink.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisReactRedux.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","logPolarisPostModalOpen","nullthrows","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentEntryPointDialog","usePolarisPost"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext;function p(e){var t=o("react-compiler-runtime").c(26),n=e.postId,a=o("usePolarisPost").usePost(n,f),i=o("usePolarisPost").usePost(n,_),l=o("usePolarisPost").usePost(n,o("PolarisInteractionsLogger").getMediaTypeFromPost),c=m(o("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),d=c.canUserSeePersistentCta,p;t[0]!==d?(p=function(t){var e;return r("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((e={},e[o("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=d||void 0,e.shortcode=r("nullthrows")(t.code),e))},t[0]=d,t[1]=p):p=t[1];var g=o("usePolarisPost").usePost(n,p),h=o("PolarisReactRedux.react").useDispatch(),y=r("usePolarisAnalyticsContext")(),C=m(o("PolarisInFeedPostModalContext").InFeedPostModalContext),b;t[2]===Symbol.for("react.memo_cache_sentinel")?(b=!o("PolarisIsLoggedIn").isLoggedIn()&&o("PolarisUA").isMobile(),t[2]=b):b=t[2];var v=b,S;t[3]===Symbol.for("react.memo_cache_sentinel")?(S=v||o("PolarisIsLoggedIn").isLoggedIn()&&o("PolarisUA").isDesktop(),t[3]=S):S=t[3];var R=S,L=r("usePolarisLoggedOutBlockingEntryPointDialog")(),E=L[0],k=L[1],I=r("usePolarisLoggedOutIntentEntryPointDialog")(),T=I[0],D=I[1],x;t[4]!==k||t[5]!==D?(x=function(){o("PolarisUA").isDesktop()||o("PolarisConfig").isLoggedOutFRXEligible()?D==null||D(!0):k==null||k(!0)},t[4]=k,t[5]=D,t[6]=x):x=t[6];var $=x,P;t[7]!==y||t[8]!==h||t[9]!==C||t[10]!==E||t[11]!==T||t[12]!==i||t[13]!==n||t[14]!==l?(P=function(t,a){if(o("PolarisIsLoggedIn").isLoggedIn())o("PolarisInteractionsLogger").logInteractionAction({containerModule:y,eventName:"instagram_organic_comment_view_all",mediaAuthorId:i,mediaId:n,mediaType:l}),o("PolarisUA").isDesktop()&&(t.preventDefault(),h(o("PolarisFeedActionOpenPostModalForId").openPostModalForId(n)),r("logPolarisPostModalOpen")(y,l,"feed_view_all_comments"),C(n));else if(v){t.preventDefault();var e={contentReportingLink:n,nextUrl:a,source:"post_comment_view_all"};o("PolarisUA").isDesktop()||o("PolarisConfig").isLoggedOutFRXEligible()?T==null||T(e):E==null||E(e)}},t[7]=y,t[8]=h,t[9]=C,t[10]=E,t[11]=T,t[12]=i,t[13]=n,t[14]=l,t[15]=P):P=t[15];var N=P,M;t[16]!==N||t[17]!==g?(M=function(t){return N(t,g)},t[16]=N,t[17]=g,t[18]=M):M=t[18];var w;t[19]!==a?(w=u.jsx(r("IGDSText.react"),{color:"secondaryText",zeroMargin:!0,children:a===1?s._(/*BTDS*/"Ver 1 coment\u00e1rio"):s._(/*BTDS*/"Ver todos os {count} coment\u00e1rios",[s._param("count",u.jsx(r("PolarisBigNumber.react"),{value:a}))])}),t[19]=a,t[20]=w):w=t[20];var A;return t[21]!==$||t[22]!==M||t[23]!==w||t[24]!==g?(A=u.jsx(r("PolarisFastLink.react"),{"data-testid":void 0,href:g,onClick:M,onMouseEnter:$,shouldOpenModal:R,children:w}),t[21]=$,t[22]=M,t[23]=w,t[24]=g,t[25]=A):A=t[25],A}function _(e){var t;return r("nullthrows")((t=e.owner)==null?void 0:t.id)}function f(e){return e.numComments||0}l.default=p}),226);
__d("PolarisPostFastPreviewCommentsList.react",["IGDSBox.react","PolarisConfig","PolarisIsLoggedIn","PolarisPostFastCommentLikeButton.react","PolarisPostFastPreviewComment.react","PolarisPostFastViewAllComments.react","PolarisReactRedux.react","PolarisThreadedCommentSelectors","PolarisUA","isTruthy","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePolarisPost"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(13),n=e.postId,a=e.previewCommentIds,i=r("usePolarisIsOnFeedPage")(),l=r("usePolarisIsOnAdsActivityPage")(),u;t[0]!==l||t[1]!==i?(u=(i||l)&&o("PolarisUA").isDesktop(),t[0]=l,t[1]=i,t[2]=u):u=t[2];var c=u,d=c;if(o("PolarisConfig").isLoggedOutFRXEligible())return null;if(a.length>0){var m=c?1:0,p;if(t[3]!==d||t[4]!==n||t[5]!==a){var _;t[7]!==d||t[8]!==n?(_=function(t){return s.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",marginBottom:1,position:"relative",children:[s.jsx(r("PolarisPostFastPreviewComment.react"),{commentId:t}),o("PolarisIsLoggedIn").isLoggedIn()&&s.jsx(r("IGDSBox.react"),{marginStart:d?2:0,position:"relative",children:s.jsx(r("PolarisPostFastCommentLikeButton.react"),{color:d?"ig-secondary-icon":void 0,commentId:t,postId:n})})]},t)},t[7]=d,t[8]=n,t[9]=_):_=t[9],p=a.map(_),t[3]=d,t[4]=n,t[5]=a,t[6]=p}else p=t[6];var f;return t[10]!==m||t[11]!==p?(f=s.jsx(r("IGDSBox.react"),{marginBottom:m,position:"relative",children:p}),t[10]=m,t[11]=p,t[12]=f):f=t[12],f}return null}function d(e){var t=e.inModal,n=e.postId,a=e.shouldIncreaseCommentPreviews,i=a===void 0?!1:a,l=r("usePolarisIsOnFeedPage")(),d=l&&t!==!0&&o("PolarisUA").isDesktop(),m=r("isTruthy")(i),p=o("usePolarisPost").usePost(n,function(e){return!e.commentsDisabled}),_=o("PolarisReactRedux.react").useSelector(function(e){return m?o("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(e,n).toArray():o("polarisCommentSelectors.react").getPreviewCommentsForPostId(e,n)}),f=u(function(){return _.map(function(e){return e.id})},[_]),g=o("usePolarisPost").usePost(n,function(e){var t;return(t=e.numComments)!=null?t:0}),h=g>f.length;if(!p||g<=0)return null;var y=!o("PolarisIsLoggedIn").isLoggedIn()&&f.length>0&&!m;return s.jsxs(s.Fragment,{children:[h&&s.jsx(r("IGDSBox.react"),{alignItems:"start",marginBottom:d?2:1,position:"relative",children:s.jsx(r("PolarisPostFastViewAllComments.react"),{postId:n})}),s.jsx(c,{postId:n,previewCommentIds:y?f.slice(-1):f})]})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("PolarisPostPreviewCommentsPicker.react",["CometPlaceholder.react","IGDSBox.react","IGDSSpinner.react","PolarisPostCaptionTranslationPrompt.react","PolarisPostComments.react","PolarisPostFastPreviewCaption.react","PolarisPostFastPreviewCommentsList.react","PolarisPostVariants","PolarisUA","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","xigRequireInterop"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(34),a=r("usePolarisIsOnFeedPage")(),l=r("usePolarisIsOnAdsActivityPage")(),u;t[0]!==l||t[1]!==a?(u=(a||l)&&o("PolarisUA").isDesktop(),t[0]=l,t[1]=a,t[2]=u):u=t[2];var c=u,d=e.variant!==o("PolarisPostVariants").VARIANTS.feed&&!o("PolarisUA").isMobile(),m=e.communityNoteComponent;if(d){var p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(r("IGDSSpinner.react"),{position:"absolute"}),t[3]=p):p=t[3];var _;t[4]!==e.className?(_=s.jsx("div",{className:e.className,children:p}),t[4]=e.className,t[5]=_):_=t[5];var f;t[6]!==e?(f=s.jsx(r("PolarisPostComments.react"),babelHelpers.extends({},e)),t[6]=e,t[7]=f):f=t[7];var g;return t[8]!==_||t[9]!==f?(g=s.jsx(r("CometPlaceholder.react"),{fallback:_,name:i.id,children:f}),t[8]=_,t[9]=f,t[10]=g):g=t[10],g}var h;t[11]===Symbol.for("react.memo_cache_sentinel")?(h=r("xigRequireInterop")(n("PolarisPostFastPreviewCommentsList.react")),t[11]=h):h=t[11];var y=h.default,C;t[12]===Symbol.for("react.memo_cache_sentinel")?(C=r("xigRequireInterop")(n("PolarisPostFastPreviewCaption.react")),t[12]=C):C=t[12];var b=C.default,v;t[13]!==b||t[14]!==e.enableTruncation||t[15]!==e.id||t[16]!==e.inModal?(v=s.jsx(b,{enableTruncation:e.enableTruncation,inModal:e.inModal,postId:e.id}),t[13]=b,t[14]=e.enableTruncation,t[15]=e.id,t[16]=e.inModal,t[17]=v):v=t[17];var S;t[18]!==c||t[19]!==e.id?(S=c&&s.jsx(r("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,marginBottom:2,postId:e.id}),t[18]=c,t[19]=e.id,t[20]=S):S=t[20];var R;t[21]!==y||t[22]!==e.id||t[23]!==e.inModal||t[24]!==e.shouldIncreaseCommentPreviews?(R=s.jsx(y,{inModal:e.inModal,postId:e.id,shouldIncreaseCommentPreviews:e.shouldIncreaseCommentPreviews}),t[21]=y,t[22]=e.id,t[23]=e.inModal,t[24]=e.shouldIncreaseCommentPreviews,t[25]=R):R=t[25];var L;t[26]!==m||t[27]!==v||t[28]!==S||t[29]!==R?(L=s.jsxs(r("IGDSBox.react"),{position:"relative",children:[v,S,m,R]}),t[26]=m,t[27]=v,t[28]=S,t[29]=R,t[30]=L):L=t[30];var E;return t[31]!==e.className||t[32]!==L?(E=s.jsx("div",{className:e.className,children:L}),t[31]=e.className,t[32]=L,t[33]=E):E=t[33],E}l.default=u}),98);
__d("PolarisPostLikers.react",["IGDSBox.react","IGDSText.react","IGRouter_DO_NOT_USE.react","PolarisFacepile.next.react","PolarisLikedByListActions","PolarisLikedByListButton.react","PolarisLikedByText.react","PolarisLinkBuilder","PolarisPostUtils","PolarisReactRedux.react","PolarisUA","polarisLogAction","react","react-compiler-runtime","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentEntryPointDialog","usePolarisLoggedOutShowIncreasedFeatureWalls"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback,c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$2=function(){n.props.onLike()},n.$3=function(e){n.$1(),!n.props.viewer&&n.props.inModal!==!0?(e.preventDefault(),n.props.onGoToLoginModal(n.props.code)):o("PolarisUA").isDesktop()&&(e.preventDefault(),n.props.onViewLikedByList(n.props.mediaId),n.props.onLikeCountClick(e))},n.$4=function(){!n.props.viewer&&n.props.inModal!==!0&&n.props.onPreloadDialog()},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$1=function(){r("polarisLogAction")("likeCountClick")},n.render=function(){var e=o("PolarisPostUtils").getOrderedUsersForLikedByList(this.props.users,this.props.viewer).map(function(e){return e.profilePictureUrl}).filter(Boolean),t=s.jsx(r("PolarisFacepile.next.react"),{avatarSize:this.props.avatarSize,border:"transparent",userProfilePicUrls:e}),n=!!this.props.viewer;return s.jsxs(r("IGDSBox.react"),{direction:"row",flex:"grow",position:"relative",children:[e.length>0&&n===!0&&s.jsx(r("IGDSBox.react"),{alignItems:"start",direction:"column",justifyContent:"start",marginEnd:1,position:"relative",children:s.jsx(r("PolarisLikedByListButton.react"),{code:this.props.code,fbLikeCount:this.props.fbLikeCount,inModal:this.props.inModal,isFeedbackAggregated:this.props.isFeedbackAggregated,isFeedFeedbackAggregated:this.props.isFeedFeedbackAggregated,isSharedToFb:this.props.isSharedToFb,onClick:this.$3,onMouseEnter:this.$4,children:t})}),s.jsx(r("IGDSBox.react"),{alignItems:"start",direction:"column",flex:"grow",margin:"auto",position:"relative",wrap:!0,children:s.jsx(r("IGDSText.react"),{zeroMargin:!0,children:s.jsx(r("PolarisLikedByText.react"),{code:this.props.code,fbLikeCount:this.props.fbLikeCount,hideCounts:this.props.hideCounts,inModal:!!this.props.inModal,isFeedbackAggregated:this.props.isFeedbackAggregated,isSharedToFb:this.props.isSharedToFb,mediaId:this.props.mediaId,onClick:this.$3,onLike:this.$2,onMouseEnter:this.$4,topLikers:this.props.topLikers,totalCount:this.props.totalCount,users:this.props.users})})})]})},t})(s.Component);function d(e){return{onViewLikedByList:function(n){return e(o("PolarisLikedByListActions").requestNativeLikedByList(n))}}}function m(e){var t=o("react-compiler-runtime").c(12),n=r("usePolarisLoggedOutBlockingEntryPointDialog")(),a=n[0],i=n[1],l=r("usePolarisLoggedOutIntentEntryPointDialog")(),u=l[0],d=l[1],m=r("usePolarisLoggedOutShowIncreasedFeatureWalls")(),p;t[0]!==i||t[1]!==d||t[2]!==m?(p=function(){m()?d==null||d(!0):i==null||i(!0)},t[0]=i,t[1]=d,t[2]=m,t[3]=p):p=t[3];var _=p,f;t[4]!==a||t[5]!==u||t[6]!==m?(f=function(t){var e=o("PolarisLinkBuilder").buildMediaLink(t),n={contentReportingLink:e,nextUrl:e,source:"post_likers"};m()?u==null||u(n):a==null||a(n)},t[4]=a,t[5]=u,t[6]=m,t[7]=f):f=t[7];var g=f,h;return t[8]!==g||t[9]!==_||t[10]!==e?(h=s.jsx(c,babelHelpers.extends({},e,{onGoToLoginModal:g,onPreloadDialog:_})),t[8]=g,t[9]=_,t[10]=e,t[11]=h):h=t[11],h}var p=o("IGRouter_DO_NOT_USE.react").withIGRouter(o("PolarisReactRedux.react").connect(null,d)(m));l.default=p}),98);
__d("PolarisPostSocialProof.react",["PolarisPostLikers.react","PolarisPostVariants","PolarisPostViews.react","PolarisShouldHideLikeCountsWithControls","PolarisUA","nullthrows","polarisGetPostFromGraphMediaInterface","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(32),n=e.analyticsContext,a=e.canLike,i=e.className,l=e.code,u=e.containerRef,c=e.fbLikeCount,d=e.inModal,m=e.isFeedbackAggregated,p=e.isFeedFeedbackAggregated,_=e.isSharedToFb,f=e.likeAndViewCountsDisabled,g=e.likedByViewer,h=e.likers,y=e.mediaId,C=e.numPreviewLikes,b=e.onLikeChange,v=e.onLikeCountClick,S=e.productType,R=e.topLikers,L=e.variant,E=e.videoViews,k=e.viewer,I=e.viewerIsOwner,T=E!=null&&E>0,D=C!==0,x=r("usePolarisIsOnFeedPage")(),$=r("usePolarisIsOnAdsActivityPage")(),P;L===o("PolarisPostVariants").VARIANTS.feed?P=D||T:P=D||T||a;var N=k==null?void 0:k.hideLikeAndViewCounts,M;t[0]!==f||t[1]!==N||t[2]!==I?(M=o("PolarisShouldHideLikeCountsWithControls").shouldHideLikeCountsWithControls(N,f,I),t[0]=f,t[1]=N,t[2]=I,t[3]=M):M=t[3];var w=M,A=T&&!w&&!o("polarisGetPostFromGraphMediaInterface").isClipsProductType(S);if(!P)return null;var F;t[4]!==d||t[5]!==$||t[6]!==x?(F=(x||$)&&d!==!0&&o("PolarisUA").isDesktop(),t[4]=d,t[5]=$,t[6]=x,t[7]=F):F=t[7];var O=F,B;t[8]!==n||t[9]!==l||t[10]!==O||t[11]!==c||t[12]!==w||t[13]!==d||t[14]!==p||t[15]!==m||t[16]!==_||t[17]!==g||t[18]!==h||t[19]!==y||t[20]!==C||t[21]!==b||t[22]!==v||t[23]!==A||t[24]!==R||t[25]!==E||t[26]!==k?(B=A?s.jsx(r("PolarisPostViews.react"),{analyticsContext:n,likeCount:C,viewCount:r("nullthrows")(E)}):s.jsx(r("PolarisPostLikers.react"),{avatarSize:O?"micro":void 0,code:l,fbLikeCount:c,hideCounts:w,inModal:!!d,isFeedbackAggregated:m,isFeedFeedbackAggregated:p,isSharedToFb:_,likedByViewer:g,mediaId:y,onLike:function(){b(!0,"beTheFirstPrompt")},onLikeCountClick:v,topLikers:R,totalCount:C,users:h,viewer:k}),t[8]=n,t[9]=l,t[10]=O,t[11]=c,t[12]=w,t[13]=d,t[14]=p,t[15]=m,t[16]=_,t[17]=g,t[18]=h,t[19]=y,t[20]=C,t[21]=b,t[22]=v,t[23]=A,t[24]=R,t[25]=E,t[26]=k,t[27]=B):B=t[27];var W;return t[28]!==i||t[29]!==u||t[30]!==B?(W=s.jsx("section",{className:i,ref:u,children:B}),t[28]=i,t[29]=u,t[30]=B,t[31]=W):W=t[31],W}l.default=u}),98);
__d("PolarisPostDetailsSection.react",["IGDSBox.react","IGDSText.react","PolarisCommentLikedByListContainerLazy.react","PolarisFeedPageConstants","PolarisGenericStrings","PolarisHotKeys.react","PolarisIGTheme.react","PolarisInteractionsLogger","PolarisLikedByListContainerLazy.react","PolarisLikedByListVariant","PolarisMediaOverlayCommunityNote","PolarisMediaOverlayInfoTypes","PolarisPendingCommentState","PolarisPostCaptionTranslationPrompt.react","PolarisPostCommentInputPicker.react","PolarisPostConstants","PolarisPostFeatures.react","PolarisPostFeedbackControls_DEPRECATED.react","PolarisPostFooter.react","PolarisPostModalRenderingContext.react","PolarisPostPreviewCommentsPicker.react","PolarisPostSocialProof.react","PolarisPostTimestamp.react","PolarisPostVariants","PolarisReactRedux.react","PolarisUA","isStringNullOrEmpty","nullthrows","polarisAdsSelectors.react","polarisGetAppPlatform","react","react-compiler-runtime","stylex","usePolarisDisplayProperties","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useMemo,p=c.useRef,_=c.useState,f={commentInput:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},commentInputAsSidebar:{order:"x1hrcb2b",$$css:!0},commentInputHidden:{display:"x1s85apg",minHeight:"x1wxaq2x",$$css:!0},commentInputStatic:{paddingInlineEnd:"xv54qhq",$$css:!0},commentInputV2:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},commentInputV2WithRichComments:{paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",$$css:!0},comments:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",overflowX:"xw2csxc",overflowY:"x1odjw0f",position:"x1n2onr6",$$css:!0},commentsAsSidebar:{marginTop:"xdj266r",marginInlineEnd:"xule2z1",marginBottom:"xat24cr",marginInlineStart:"xwqyzqf",order:"x9ek82g",overflowX:"x6ikm8r",$$css:!0},commentsMarginBottom:{marginBottom:"x12nagc",$$css:!0},commentsMarginBottomDense:{marginBottom:"xat24cr",$$css:!0},commentsV2:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"x4ii5y1",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xpdmqnj",paddingBottom:"x18d9i69",paddingInlineStart:"x1g0dm76",$$css:!0},commentsWithRichComments:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"x4ii5y1",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",$$css:!0},expandedSidebarContainerResponsive:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1t39747",borderEndEndRadius:"x1wcsgtt",borderEndStartRadius:"xbiv7yw",$$css:!0},feedback:{marginTop:"x1gslohp",paddingBottom:"xwib8y2",paddingTop:"x1yrsyyn",$$css:!0},feedbackAsSidebar:{borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",order:"xo1ph6p",$$css:!0},feedbackV2:{paddingBottom:"x10b6aqq",paddingTop:"xexx8yu",$$css:!0},feedbackV2WithRichComments:{paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",$$css:!0},feedbackWithRichComments:{paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0},msite:{borderBottomColor:"xh05dso",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",$$css:!0},responsiveViewInsights:{marginInlineStart:"x162z183",width:"x1j7kr1c",$$css:!0},roundedSidebarContainer:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1ga7v0g",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0},sectionWithNoPadding:{overflowX:"x1plvlek",overflowY:"xryxfnj",paddingInlineEnd:"xyri2b",paddingInlineStart:"x1c1uobl",$$css:!0},sidebarContainer:{display:"x78zum5",flexDirection:"xdt5ytf",pointerEvents:"x67bb7w",position:"x1n2onr6",$$css:!0},sidebarContainerAsSidebar:{backgroundColor:"xvbhtw8",height:"x5yr21d",width:"x4h1yfo",$$css:!0},sidebarContainerFeedRoot:{backgroundColor:"xvbhtw8",$$css:!0},sidebarContainerInModal:{backgroundColor:"xvbhtw8",height:"x5yr21d",$$css:!0},sidebarContainerV2:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0},timestamp:{marginBottom:"x1yztbdb",$$css:!0},timestampAsSidebar:{order:"x1h3rv7z",$$css:!0},timestampDense:{marginBottom:"x1e56ztr",$$css:!0},timestampV2:{paddingInlineStart:"x1g0dm76",$$css:!0},timestampWithRichComments:{paddingInlineStart:"xf7dkkf",$$css:!0},viewInsights:{borderBottomStyle:"x1sy0etr",borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",order:"x14yy4lh",$$css:!0}};function g(t){var n,a,i,l,s=o("react-compiler-runtime").c(88),c=t.analyticsContext,m=t.bloksAppId,g=t.communityNoteComponent,C=t.currSidecarIndex,b=t.currSidecarItem,v=t.enableTruncation,S=t.handleLikeChange,R=t.handleSaveChange,L=t.hasDenserFeedRedesign,E=t.hasSidebarInRedesign,k=t.hasViewInsights,I=t.initialCommentsQuery,T=t.owner,D=t.permalinkedCommentId,x=t.permalinkedReplyId,$=t.post,P=t.postAuthorId,N=t.postAuthorUsername,M=t.postFeedbackControlsRef,w=t.postHeader,A=t.redesignWithoutSidebar,F=t.redesignWithSidebar,O=t.shouldIncreaseCommentPreviews,B=t.showDetailsAsSidebar,W=t.variant,q=t.viewer,U=((n=$.mediaOverlayInfo)==null||(n=n.overlay_type)==null?void 0:n.toUpperCase())==="EARLY_ACCESS"&&T.followedByViewer!==!0,V=$.commentsDisabled===!0||((a=$.mediaOverlayInfo)==null||(a=a.overlay_type)==null?void 0:a.toUpperCase())==="SECRET_LINK"||U,H=!o("PolarisUA").isDesktop(),G=_(null),z=G[0],j=G[1],K=_(!1),Q=K[0],X=K[1],Y=_(!1),J=Y[0],Z=Y[1],ee=r("usePolarisDisplayProperties")(),te=ee.viewportWidth,ne=p(null),re;s[0]!==V||s[1]!==J||s[2]!==$.commentingDisabledForViewer||s[3]!==te?(re=function(){return!V&&$.commentingDisabledForViewer!==!0&&(J||te>=o("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF)},s[0]=V,s[1]=J,s[2]=$.commentingDisabledForViewer,s[3]=te,s[4]=re):re=s[4];var oe=re,ae;s[5]!==$.id?(ae=function(t){var e;return(e=t.pendingComments[$.id])!=null?e:o("PolarisPendingCommentState").EMPTY_PENDING_COMMENT},s[5]=$.id,s[6]=ae):ae=s[6];var ie=o("PolarisReactRedux.react").useSelector(ae),le=ie.committing,se=r("usePrevious")(le),ue=o("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext(),ce=ue.isInModal,de;s[7]===Symbol.for("react.memo_cache_sentinel")?(de=function(){Z(!0),ne.current&&ne.current.focusAndScroll()},s[7]=de):de=s[7];var me=de,pe;s[8]===Symbol.for("react.memo_cache_sentinel")?(pe=function(){X(!1)},s[8]=pe):pe=s[8];var _e=pe,fe;s[9]===Symbol.for("react.memo_cache_sentinel")?(fe=function(t){X(!0)},s[9]=fe):fe=s[9];var ge=fe,he;s[10]===Symbol.for("react.memo_cache_sentinel")?(he=function(){j(null)},s[10]=he):he=s[10];var ye=he,Ce;s[11]===Symbol.for("react.memo_cache_sentinel")?(Ce=function(t){j(t)},s[11]=Ce):Ce=s[11];var be=Ce,ve;s[12]!==$.commentsDisabled||s[13]!==q?(ve=q?{c:function(){$.commentsDisabled!==!0&&me()}}:{},s[12]=$.commentsDisabled,s[13]=q,s[14]=ve):ve=s[14];var Se=ve,Re=r("usePrevious")($),Le,Ee;s[15]!==$||s[16]!==Re?(Ee=function(){Re!=null&&$!=null&&Re!==$&&(j(null),X(!1))},Le=[$,Re],s[15]=$,s[16]=Re,s[17]=Le,s[18]=Ee):(Le=s[17],Ee=s[18]),d(Ee,Le);var ke,Ie;s[19]!==le||s[20]!==se?(ke=function(){se===!0&&le===!1&&Z(!1)},Ie=[le,se],s[19]=le,s[20]=se,s[21]=ke,s[22]=Ie):(ke=s[21],Ie=s[22]),d(ke,Ie);var Te;s[23]!==T||s[24]!==$||s[25]!==W?(Te={owner:T,post:$,variant:W},s[23]=T,s[24]=$,s[25]=W,s[26]=Te):Te=s[26];var De=o("PolarisPostFeatures.react").usePolarisPostFeatures(Te),xe=De.canViewerProvideFeedback,$e=De.commentsAreStacked,Pe=De.hasThreadedSidebarComments,Ne=De.isBlocked,Me=De.isSidecar,we=De.isStackedScreenSize,Ae=De.showPostButton,Fe=o("polarisAdsSelectors.react").useFeedAdInfo($==null?void 0:$.id,y),Oe=r("usePolarisIsOnFeedPage")(),Be=r("usePolarisIsOnAdsActivityPage")(),We;s[27]!==ce||s[28]!==Be||s[29]!==Oe?(We=(Oe||Be)&&ce!==!0&&o("PolarisUA").isDesktop(),s[27]=ce,s[28]=Be,s[29]=Oe,s[30]=We):We=s[30];var qe=We,Ue=qe,Ve=o("PolarisIGTheme.react").useTheme().getTheme()===o("PolarisIGTheme.react").IGTheme.Dark,He=g;(i=$.mediaOverlayInfo)==null||i.overlay_type,(l=$.mediaOverlayInfo)==null||l.buttons;var Ge;e:{var ze;if(U){Ge=null;break e}if(He!=null){Ge=He;break e}var je;if(s[31]!==((ze=$.mediaOverlayInfo)==null?void 0:ze.buttons)){var Ke,Qe;je=$==null||(Ke=$.mediaOverlayInfo)==null||(Ke=Ke.buttons)==null?void 0:Ke.find(h),s[31]=(Qe=$.mediaOverlayInfo)==null?void 0:Qe.buttons,s[32]=je}else je=s[32];var Xe=je,Ye;s[33]!==Xe||s[34]!==$.id?(Ye=Xe!=null?u.jsx(r("PolarisMediaOverlayCommunityNote"),{communityNoteButtonsProp:Xe,entityID:$.id}):null,s[33]=Xe,s[34]=$.id,s[35]=Ye):Ye=s[35],Ge=Ye}var Je=Ge,Ze=F?"grow":"none",et;s[36]!==Fe||s[37]!==c||s[38]!==m||s[39]!==xe||s[40]!==z||s[41]!==$e||s[42]!==V||s[43]!==Je||s[44]!==C||s[45]!==b||s[46]!==v||s[47]!==Ue||s[48]!==S||s[49]!==R||s[50]!==L||s[51]!==E||s[52]!==Pe||s[53]!==k||s[54]!==I||s[55]!==Ne||s[56]!==Ve||s[57]!==ce||s[58]!==Me||s[59]!==we||s[60]!==T||s[61]!==D||s[62]!==x||s[63]!==$||s[64]!==P||s[65]!==N||s[66]!==M||s[67]!==w||s[68]!==F||s[69]!==A||s[70]!==O||s[71]!==oe||s[72]!==U||s[73]!==B||s[74]!==Q||s[75]!==Ae||s[76]!==W||s[77]!==q?(et=function(n,a,i){var t,l,s,d;return u.jsxs("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(f.sidebarContainer,W===o("PolarisPostVariants").VARIANTS.feed&&f.sidebarContainerFeedRoot,B&&!ce&&f.sidebarContainerAsSidebar,ce&&f.sidebarContainerInModal,!ce&&L&&f.sidebarContainerV2,A&&f.roundedSidebarContainer,F&&f.expandedSidebarContainerResponsive),{onKeyUp:n,role:a,tabIndex:i,children:[(ce===!0?E:!$e)?w:null,u.jsxs("div",babelHelpers.extends({},{0:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3"},8:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j"},4:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl"},12:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl"},2:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},10:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},6:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},14:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},1:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1b5io7h"},9:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1b5io7h"},5:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1b5io7h"},13:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1b5io7h"},3:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},11:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},7:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},15:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"}}[!!B<<3|!!Pe<<2|!!Ue<<1|!!Ve<<0],{children:[u.jsx(r("PolarisPostFooter.react"),{analyticsContext:c,bloksAppId:m,boostedStatus:$.boostedStatus,boostUnavailableIdentifier:$.boostUnavailableIdentifier,boostUnavailableReason:$.boostUnavailableReason,className:e(o("PolarisUA").isMobile()?f.msite:f.viewInsights,!E&&f.responsiveViewInsights,$e&&Me),hasViewInsights:k,mediaId:$.id,productType:$.productType,viewerId:q==null?void 0:q.id}),u.jsx(r("PolarisPostFeedbackControls_DEPRECATED.react"),{analyticsContext:c,canViewerProvideFeedback:xe,canViewerRepost:$.canViewerRepost,canViewerReshare:$.viewerCanReshare,code:r("nullthrows")($.code),commentsDisabled:V,containerRef:M,currSidecarIndex:C,hideShareButton:$.igMediaSharingDisabled===!0,isBlocked:Ne,isSidecar:Me,isVideo:!!$.isVideo,likedByViewer:!!$.likedByViewer,mediaId:b!=null?b.id:$.id,numSteps:(t=$.sidecarChildren)==null?void 0:t.length,onCommentClick:me,onLikeChange:S,onSaveChange:R,ownerIsPrivate:T.isPrivate,ownerUsername:T.username,postId:$.id,savedByViewer:!!$.savedByViewer,sharingFrictionInfo:b!=null?b.sharingFrictionInfo:$.sharingFrictionInfo,variant:W,xstyle:[f.feedback,L&&f.feedbackV2,L&&Pe&&f.feedbackV2WithRichComments,B&&f.feedbackAsSidebar,Pe&&f.feedbackWithRichComments,Ue&&f.sectionWithNoPadding]}),$.code!=null&&u.jsx(r("PolarisPostSocialProof.react"),{analyticsContext:c,canLike:!Ne&&xe,className:{0:"x1e56ztr",8:"x12nagc x182iqb8",4:"x1e56ztr xv54qhq xf7dkkf",12:"x12nagc x182iqb8 xv54qhq xf7dkkf",2:"x1e56ztr xpdmqnj x1g0dm76",10:"x12nagc x182iqb8 xpdmqnj x1g0dm76",6:"x1e56ztr xpdmqnj x1g0dm76",14:"x12nagc x182iqb8 xpdmqnj x1g0dm76",1:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",9:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",5:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",13:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",3:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",11:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",7:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",15:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl"}[!!B<<3|!!Pe<<2|!!(L&&Pe)<<1|!!Ue<<0],code:r("nullthrows")($.code),fbLikeCount:$.fbLikeCount,inModal:ce,isFeedbackAggregated:$.isFeedbackAggregated,isFeedFeedbackAggregated:$.isFeedFeedbackAggregated,isSharedToFb:$.isSharedToFb,likeAndViewCountsDisabled:$.likeAndViewCountsDisabled,likedByViewer:!!$.likedByViewer,likers:$.likers||[],mediaId:$.id,numPreviewLikes:$.numPreviewLikes||0,onLikeChange:S,onLikeCountClick:ge,productType:$.productType,topLikers:$.topLikers,variant:W,videoViews:$.videoViews,viewer:q,viewerIsOwner:P===(q==null?void 0:q.id)}),u.jsx(r("PolarisPostPreviewCommentsPicker.react"),{analyticsContext:c,caption:$.caption,captionCreatedAt:$.captionCreatedAt,captionHasTranslation:$.captionHasTranslation,captionId:$.captionCommentId,captionIsEdited:$.captionIsEdited,captionsDisabled:U,className:e(f.comments,!H&&f.commentsMarginBottom,H&&f.commentsMarginBottomDense,B&&f.commentsAsSidebar,Pe&&f.commentsWithRichComments,L&&Pe&&f.commentsV2,Ue&&f.sectionWithNoPadding),code:$.code,commentingDisabledForViewer:(l=$.commentingDisabledForViewer)!=null?l:!1,commentsDisabled:V,commentsQuery:null,communityNoteComponent:Je,enableTruncation:v,fbCommentCount:$.fbCommentCount,hasRankedComments:$.hasRankedComments===!0,id:$.id,initialCommentsQuery:I,inModal:ce,isFeedFeedbackAggregated:$.isFeedFeedbackAggregated,mediaType:o("PolarisInteractionsLogger").getMediaTypeFromPost($),onLikeCountClick:be,owner:T,ownerId:P,permalinkedCommentId:D,permalinkedReplyId:x,postedAt:r("nullthrows")($.postedAt),postId:$.id,shouldIncreaseCommentPreviews:O,showCommentOptionsInline:!0,title:$.title,variant:W}),!Ue&&u.jsx("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(!H&&f.timestamp,H&&f.timestampDense,B&&f.timestampAsSidebar,Pe&&f.timestampWithRichComments,L&&Pe&&f.timestampV2),{children:$.isSponsored===!0?null:u.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",position:"relative",children:[u.jsx(r("PolarisPostTimestamp.react"),{code:r("nullthrows")($.code),isVideo:$.isVideo,postedAt:r("nullthrows")($.postedAt),productType:(s=$.productType)!=null?s:"",username:T.username}),c===o("PolarisFeedPageConstants").FEED_PAGE_ANALYTICS_CONTEXT&&u.jsx(r("IGDSBox.react"),{marginStart:2,position:"relative",children:u.jsx(r("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,postId:$.id})})]})})),(o("polarisGetAppPlatform").isIOS()||oe())&&u.jsx(r("PolarisPostCommentInputPicker.react"),{adInfo:Fe,analyticsContext:c,canViewerProvideFeedback:xe,hasPostButton:Ae,id:$.id,inModal:ce,isRevampVersion:!1,isVideo:$.isVideo,ownerId:T.id,ref:ne,xstyle:[f.commentInput,B&&f.commentInputAsSidebar,L&&f.commentInputV2,L&&Pe&&f.commentInputV2WithRichComments,!oe()&&f.commentInputHidden,!we&&f.commentInputStatic]},$.id),!oe()&&o("PolarisUA").isDesktop()&&$.commentsDisabled!==!0&&$.commentingDisabledForViewer===!0&&u.jsx("div",babelHelpers.extends({},{0:{className:"x6s0dn4 x1xp8e9x x13fuv20 x178xt8z x78zum5 x1dnml7z xl56j7k x1gslohp x1hrcb2b"},2:{className:"x6s0dn4 x1xp8e9x x13fuv20 x178xt8z x78zum5 x1dnml7z xl56j7k x1hrcb2b xdj266r"},1:{className:"x6s0dn4 x1xp8e9x x178xt8z x78zum5 xl56j7k x1gslohp x1hrcb2b x1ejq31n x18oe1m7 x1sy0etr xstzfhl xxeg0ib"},3:{className:"x6s0dn4 x1xp8e9x x178xt8z x78zum5 xl56j7k x1hrcb2b xdj266r x1ejq31n x18oe1m7 x1sy0etr xstzfhl xxeg0ib"}}[!!L<<1|!!Ue<<0],{children:u.jsx(r("IGDSText.react"),{color:"tertiaryText",textAlign:"center",children:o("PolarisGenericStrings").COMMENTING_LIMITED})}))]})),Q&&u.jsx(r("PolarisLikedByListContainerLazy.react"),{display:r("PolarisLikedByListVariant").Modal,fbLikeCount:$.fbLikeCount,isFeedbackAggregated:$.isFeedbackAggregated,isFeedFeedbackAggregated:$.isFeedFeedbackAggregated,isOwnerTheViewer:(q==null?void 0:q.id)===P,isSharedToFb:$.isSharedToFb,likeAndViewCountsDisabled:$.likeAndViewCountsDisabled,likeCount:$.numLikes||0,mediaId:$.id,onClose:_e,ownerUsername:N,productType:(d=$.productType)!=null?d:"",shortcode:r("nullthrows")($.code),viewCount:$.videoViews}),!r("isStringNullOrEmpty")(z)&&u.jsx(r("PolarisCommentLikedByListContainerLazy.react"),{commentId:z,display:r("PolarisLikedByListVariant").Modal,onClose:ye})]}))},s[36]=Fe,s[37]=c,s[38]=m,s[39]=xe,s[40]=z,s[41]=$e,s[42]=V,s[43]=Je,s[44]=C,s[45]=b,s[46]=v,s[47]=Ue,s[48]=S,s[49]=R,s[50]=L,s[51]=E,s[52]=Pe,s[53]=k,s[54]=I,s[55]=Ne,s[56]=Ve,s[57]=ce,s[58]=Me,s[59]=we,s[60]=T,s[61]=D,s[62]=x,s[63]=$,s[64]=P,s[65]=N,s[66]=M,s[67]=w,s[68]=F,s[69]=A,s[70]=O,s[71]=oe,s[72]=U,s[73]=B,s[74]=Q,s[75]=Ae,s[76]=W,s[77]=q,s[78]=et):et=s[78];var tt;s[79]!==Se||s[80]!==et?(tt=u.jsx(r("PolarisHotKeys.react"),{keyMap:Se,children:et}),s[79]=Se,s[80]=et,s[81]=tt):tt=s[81];var nt;s[82]!==Ze||s[83]!==tt?(nt=u.jsx(r("IGDSBox.react"),{flex:Ze,position:"relative",children:tt}),s[82]=Ze,s[83]=tt,s[84]=nt):nt=s[84];var rt=nt;if(F){var ot;s[85]===Symbol.for("react.memo_cache_sentinel")?(ot={className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x1iyjqo2 x5wqa0o xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak x65f84u x1vq45kp xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x11njtxf"},s[85]=ot):ot=s[85];var at;return s[86]!==rt?(at=u.jsx("div",babelHelpers.extends({},ot,{children:rt})),s[86]=rt,s[87]=at):at=s[87],at}return rt}function h(e){return(e==null?void 0:e.button_type)===o("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_TYPES.COMMUNITY_NOTE}function y(e){return e}l.default=g}),98);
__d("PolarisPostHeaderFavoritedIconButton.react",["IGDSBox.react","IGDSIconButton.react","IGDSStarPanoFilledGradientIcon.react","PolarisFavoritesStrings","PolarisPostModalContext.react","polarisLogAction","react","react-compiler-runtime","usePolarisAnalyticsContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.isFavorited,a=o("PolarisPostModalContext.react").useSetPostModal(),i=r("usePolarisAnalyticsContext")();if(n&&(i==="feedPage"||i==="postPage")){var l;t[0]!==a?(l=function(){r("polarisLogAction")("favoriteIconInPostHeaderClick"),a("favorites")},t[0]=a,t[1]=l):l=t[1];var u;t[2]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(r("IGDSBox.react"),{marginEnd:2,position:"relative",children:s.jsx(r("IGDSStarPanoFilledGradientIcon.react"),{alt:o("PolarisFavoritesStrings").FAVORITED_ICON_ALT,size:16})}),t[2]=u):u=t[2];var c;return t[3]!==l?(c=s.jsx(r("IGDSIconButton.react"),{onClick:l,children:u}),t[3]=l,t[4]=c):c=t[4],c}return null}l.default=u}),98);
__d("PolarisPostInvitedCoauthorsOverlayFooterCTA.react",["fbt","IGDSBox.react","IGDSTextVariants.react","PolarisConfig","PolarisInvitedCoauthorsCountWithSheet.react","PolarisUserHoverCard.react","PolarisUserLink.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(19),n=e.invitedCoauthorProducers,a=e.mediaId,i=e.user,l=o("PolarisConfig").getViewerIdOrZero(),c=n!=null;if(!c||(i==null?void 0:i.id)!==l||i==null||(i==null?void 0:i.username)==null)return null;var p;t[0]!==n?(p=n==null?void 0:n.map(m),t[0]=n,t[1]=p):p=t[1];var _=p,f;t[2]!==n?(f=n!=null?n:[],t[2]=n,t[3]=f):f=t[3];var g;t[4]!==f?(g=f.map(d),t[4]=f,t[5]=g):g=t[5];var h=g,y;t[6]!==_?(y=s._(/*BTDS*/"{invited_coauthor_username} recebeu um convite para se tornar colaborador, mas ainda n\u00e3o aceitou.",[s._param("invited_coauthor_username",_!=null&&_[0])]),t[6]=_,t[7]=y):y=t[7];var C=y,b;t[8]!==_?(b=s._(/*BTDS*/"{invited_coauthor_username_1} e {invited_coauthor_username_2} receberam um convite para se tornar colaboradores, mas ainda n\u00e3o aceitaram.",[s._param("invited_coauthor_username_1",_!=null&&_[0]),s._param("invited_coauthor_username_2",_!=null&&_[1])]),t[8]=_,t[9]=b):b=t[9];var v=b,S;t[10]!==h||t[11]!==_||t[12]!==a?(S=s._(/*BTDS*/"{invited_coauthor_username_1} e {=m2} receberam um convite para se tornar colaboradores, mas ainda n\u00e3o aceitaram.",[s._param("invited_coauthor_username_1",_!=null&&_[0]),s._implicitParam("=m2",u.jsx(r("PolarisInvitedCoauthorsCountWithSheet.react"),{analyticsContext:"post_invited_coauthors_overlay_footer_cta",coauthors:h,mediaId:a,children:s._(/*BTDS*/"")}))]),t[10]=h,t[11]=_,t[12]=a,t[13]=S):S=t[13];var R=S,L;return t[14]!==n||t[15]!==C||t[16]!==R||t[17]!==v?(L=n!=null&&n.length>0&&r("gkx")("4757")?u.jsx(r("IGDSBox.react"),{alignItems:"center",color:"primaryBackground",direction:"row",justifyContent:"between",paddingX:3,paddingY:2,position:"relative",children:u.jsx(r("IGDSBox.react"),{flex:"shrink",marginEnd:5,marginStart:1,maxWidth:350,overflow:"auto",wrap:!0,children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryText",maxLines:3,zeroMargin:!0,children:n.length===1?C:n.length===2?v:n.length>2?R:null})})}):null,t[14]=n,t[15]=C,t[16]=R,t[17]=v,t[18]=L):L=t[18],L}function d(e){var t,n,r,o;return{user:{fullName:(t=e.fullName)!=null?t:"",id:e.id,isVerified:(n=e.isVerified)!=null?n:!1,profilePictureUrl:(r=e.profilePictureUrl)!=null?r:"",username:(o=e.username)!=null?o:""}}}function m(e,t){var n,o,a;return u.jsx(r("PolarisUserHoverCard.react"),{display:"inline-block",isUserAvailable:!(e!=null&&e.isUnpublished),userId:(n=e==null?void 0:e.id)!=null?n:"",username:(o=e==null?void 0:e.username)!=null?o:"",children:u.jsx(r("PolarisUserLink.react"),{username:(a=e==null?void 0:e.username)!=null?a:""})},t)}m.displayName=m.name+" [from "+i.id+"]",l.default=c}),226);
__d("PolarisPostFastOptionsButton.react",["fbt","IGDSBox.react","IGDSIconButton.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDSMoreVerticalPanoOutline24Icon.react","InstagramAdActionMenuFalcoEvent","PolarisContainerModuleUtils","PolarisPostModalContext.react","PolarisViewpointActionUtils","identityFunction","polarisAdsSelectors.react","polarisLogAction","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisPost","usePolarisViewer"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Mais op\u00e7\u00f5es");function d(e){var t=o("react-compiler-runtime").c(3),n=e.color,a=e.orientation,i=r(a==="horizontal"?"IGDSMoreHorizontalPanoOutlineIcon.react":"IGDSMoreVerticalPanoOutline24Icon.react"),l;return t[0]!==i||t[1]!==n?(l=u.jsx(r("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:u.jsx(i,{alt:c,color:n})}),t[0]=i,t[1]=n,t[2]=l):l=t[2],l}function m(e){var t=o("react-compiler-runtime").c(27),n=e.className,a=e.orientation,i=e.padding,l=e.postId,s=a===void 0?"horizontal":a,c=o("PolarisPostModalContext.react").useSetPostModal(),m=r("usePolarisAnalyticsContext")(),f;t[0]!==m?(f=o("PolarisContainerModuleUtils").getContainerModule(m),t[0]=m,t[1]=f):f=t[1];var g=f,h=o("usePolarisPost").usePost(l,r("identityFunction")),y=!!h.isVideo,C=r("usePolarisViewer")(),b=C==null?void 0:C.id,v=o("polarisAdsSelectors.react").useFeedAdInfo(l,_),S=o("polarisAdsSelectors.react").useFeedAdInfo(l,p),R;t[2]!==h?(R=o("PolarisViewpointActionUtils").getMPKForFeedMedia(h),t[2]=h,t[3]=R):R=t[3];var L=R,E;t[4]!==v||t[5]!==m||t[6]!==g||t[7]!==y||t[8]!==L||t[9]!==h.isSponsored||t[10]!==l||t[11]!==c||t[12]!==S||t[13]!==b?(E=function(){r("polarisLogAction")("postOptionsClick",{mediaId:l,source:m,type:y?"video":"photo"}),h.isSponsored===!0&&b!=null&&r("InstagramAdActionMenuFalcoEvent").log(function(){return{ad_id:v,m_pk:L,pigeon_reserved_keyword_module:g,pk:b,source_of_action:g,tracking_token:S}}),c("options")},t[4]=v,t[5]=m,t[6]=g,t[7]=y,t[8]=L,t[9]=h.isSponsored,t[10]=l,t[11]=c,t[12]=S,t[13]=b,t[14]=E):E=t[14];var k=E,I;t[15]!==s?(I=u.jsx(d,{color:"ig-secondary-text",orientation:s}),t[15]=s,t[16]=I):I=t[16];var T;t[17]!==s?(T=u.jsx(d,{color:"ig-primary-text",orientation:s}),t[17]=s,t[18]=T):T=t[18];var D;t[19]!==k||t[20]!==i||t[21]!==I||t[22]!==T?(D=u.jsx(r("IGDSIconButton.react"),{"data-testid":void 0,hover:I,onClick:k,padding:i,children:T}),t[19]=k,t[20]=i,t[21]=I,t[22]=T,t[23]=D):D=t[23];var x;return t[24]!==n||t[25]!==D?(x=u.jsx("div",{className:n,children:D}),t[24]=n,t[25]=D,t[26]=x):x=t[26],x}function p(e){return e==null?void 0:e.tracking_token}function _(e){return e==null?void 0:e.ad_id}var f=u.memo(m);l.default=f}),226);
__d("PolarisPostOptionsButtonPicker.react",["PolarisPostFastOptionsButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.buttonClassName,a=e.mediaPK,i;t[0]!==a?(i=s.jsx(r("PolarisPostFastOptionsButton.react"),{postId:a}),t[0]=a,t[1]=i):i=t[1];var l;return t[2]!==n||t[3]!==i?(l=s.jsx("div",{className:n,children:i}),t[2]=n,t[3]=i,t[4]=l):l=t[4],l}l.default=u}),98);
__d("PolarisPostPageRouteReferrerContext.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({referrerTracePolicy:null});l.default=u}),98);
__d("PolarisSavedPostsActionEditCollection",["PolarisAPIEditCollection","PolarisGenericStrings","PolarisSavedPostsLogger","Promise","polarisNormalizeCollections"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r=t.collectionId,a=t.collectionName,i=t.postIdsToAdd,l=t.postIdsToRemove,s=t.retryHandler,u=t.source,c=t.userId;return function(t){return t({collectionId:r,type:"SAVED_COLLECTION_EDIT_PENDING",userId:c}),o("PolarisSavedPostsLogger").logEditCollection("attempt",u),o("PolarisAPIEditCollection").editCollection({collectionId:r,collectionName:a,postIdsToAdd:i,postIdsToRemove:l}).then(function(e){var n=o("polarisNormalizeCollections").normalizeCollection(e);t({collection:n,postIdsToAdd:i,postIdsToRemove:l,type:"SAVED_COLLECTION_EDIT_SUCCESS",userId:c}),o("PolarisSavedPostsLogger").logEditCollection("success",u)}).catch(function(a){return t({collectionId:r,toast:{actionHandler:s,actionText:o("PolarisGenericStrings").RETRY_TEXT,text:o("PolarisGenericStrings").GENERIC_ERROR_MESSAGE},type:"SAVED_COLLECTION_EDIT_ERRORED",userId:c}),o("PolarisSavedPostsLogger").logEditCollection("failure",u),(e||(e=n("Promise"))).reject(a)})}}l.editCollection=s}),98);
__d("PolarisSponsoredPostCTAFooter.react",["InstagramODS","PolarisClickEventLoggerProvider.react","PolarisPostFooterCTA.react","PolarisPostUtils","PolarisTrackingNodeProvider.react","polarisAdsSelectors.react","react","react-compiler-runtime","usePolarisSponsoredPostCTAFooterDominantColor"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t,n=o("react-compiler-runtime").c(17),a=e.isMediaRendered,i=e.post,l=e.sidecarIndex,u=o("polarisAdsSelectors.react").useFeedAdInfo(i.id,d),m=i.isSidecar,p=m===!0?(t=o("PolarisPostUtils").getCurrentSidecarItemFromPost(i,l))==null?void 0:t.id:i.id,_;n[0]!==a||n[1]!==p||n[2]!==i?(_={isMediaRendered:a,mediaId:p,post:i},n[0]=a,n[1]=p,n[2]=i,n[3]=_):_=n[3];var f=r("usePolarisSponsoredPostCTAFooterDominantColor")(_),g=f.ctaDominantColor,h=f.ctaFooterViewpointRef;if(p==null)return null;var y;if(n[4]!==(u==null?void 0:u.ctaItems)||n[5]!==p){var C;y=u==null||(C=u.ctaItems)==null||(C=C.get(p))==null?void 0:C.ctaLinkUrl,n[4]=u==null?void 0:u.ctaItems,n[5]=p,n[6]=y}else y=n[6];var b=y,v;if(n[7]!==(u==null?void 0:u.ctaItems)||n[8]!==p){var S;v=u==null||(S=u.ctaItems)==null||(S=S.get(p))==null?void 0:S.ctaLinkText,n[7]=u==null?void 0:u.ctaItems,n[8]=p,n[9]=v}else v=n[9];var R=v,L=c;if(b!=null&&R!=null){var E;n[10]!==g||n[11]!==R||n[12]!==b?(E=function(t){return s.jsx("div",{ref:t,children:s.jsx(r("PolarisPostFooterCTA.react"),{ctaDominantColor:g,"data-testid":void 0,disableAnimation:!1,externalURL:b,forceBottomBorder:!0,isActive:!0,isForAd:!0,onClick:L,showChevron:!0,text:R})})},n[10]=g,n[11]=R,n[12]=b,n[13]=E):E=n[13];var k;return n[14]!==h||n[15]!==E?(k=s.jsx(r("PolarisClickEventLoggerProvider.react"),{children:s.jsx(r("PolarisTrackingNodeProvider.react"),{ref:h,trackingNode:86,children:E})}),n[14]=h,n[15]=E,n[16]=k):k=n[16],k}return null}function c(){r("InstagramODS").incr("web.ads.feed.link_click")}function d(e){return e}l.default=u}),98);
__d("PolarisUnsaveFromCollectionDialog.react",["fbt","IGCoreDialog.react","PolarisGenericStrings","PolarisUA","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(16),n=e.onClose,r=e.onUnsaveFromAll,a=e.onUnsaveFromCollection,i;t[0]!==a?(i=a?s._(/*BTDS*/"Voc\u00ea pode remover dessa cole\u00e7\u00e3o ou remover de tudo que salvou."):s._(/*BTDS*/"Se o item for removido dos itens salvos, ele tamb\u00e9m ser\u00e1 removido das cole\u00e7\u00f5es."),t[0]=a,t[1]=i):i=t[1];var l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Remover dos itens salvos e das cole\u00e7\u00f5es?"),t[2]=l):l=t[2];var c;t[3]!==a?(c=a&&u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:a,children:s._(/*BTDS*/"Remover da cole\u00e7\u00e3o")}),t[3]=a,t[4]=c):c=t[4];var d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Remover"),t[5]=d):d=t[5];var m;t[6]!==r?(m=u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:o("PolarisUA").isDesktop()?"ig-error-or-destructive":"ig-primary-button",onClick:r,children:d}),t[6]=r,t[7]=m):m=t[7];var p;t[8]!==n?(p=u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:n,children:o("PolarisGenericStrings").CANCEL_TEXT}),t[8]=n,t[9]=p):p=t[9];var _;return t[10]!==n||t[11]!==i||t[12]!==c||t[13]!==m||t[14]!==p?(_=u.jsxs(o("IGCoreDialog.react").IGCoreDialog,{body:i,onModalClose:n,title:l,children:[c,m,p]}),t[10]=n,t[11]=i,t[12]=c,t[13]=m,t[14]=p,t[15]=_):_=t[15],_}l.default=c}),226);
__d("polarisPostModalHelpers",["fbt","FBLogger","justknobx","vulture"],(function(t,n,r,o,a,i,l,s){"use strict";var e=1032,u=55,c=500,d=250,m=s._(/*BTDS*/"Anterior"),p=s._(/*BTDS*/"Pr\u00f3ximo"),_=-1,f=1;function g(e){var t="";switch(e){case"profilePage":case"selfProfilePage":t="profilePageModal";break;case"locationPage":t="locationPageModal";break;case"exploreLandingPage":t="discoverMediaPageModal";break;case"DirectThreadPage":t="directThreadPageModal";break;case"ClipsAudioPage":t="clipsAudioPageModal";break;case"feedPage":case"pastPostsFeedPage":case"followingFeedPage":case"favoritesFeedPage":t="feedPageModal";break;case"KeywordSearchExplorePage":t="keywordSearchExplorePageModal";break;case"adsActivityFeed":r("vulture")("ffZkBqw2cGlao5s8XEe1u1x7yM8="),t="adActivityFeedModal";break;case"ExploreSERPPage":r("vulture")("ozn07wewnSY-kWidXVdFNfubl7g="),t="ExploreSERPPageModal";break;default:r("FBLogger")("ig_web").mustfix("Unexpected analytics context: "+e)}return t}function h(e){var t=e.match(new RegExp("^(.+/)(saved)/(.+)/(.+)/"));return t!=null?t[4]:null}function y(e){return!!e.match(new RegExp("/p/"))}function C(e){var t=e.match(new RegExp("/([^/]+)/[^/]*$"));return t?t[1]:null}function b(e,t,n,r){if(e.height>e.width){var o=n/e.height;r.style.maxHeight=n,r.style.maxWidth=e.width*o,r.style.aspectRatio=e.width+" / "+e.height}else t&&(r.style.aspectRatio="1"),r.style.maxHeight=n,r.style.maxWidth=n;return r}function v(e,t,n,r){n.style.maxWidth=t;var o=t/e.width;return n.style.maxHeight=e.height*o+r,n.style.aspectRatio=e.width*o+" / "+(e.height*o+r),n}function S(t){var n=t.dimensions,o=t.footerHeight,a=o===void 0?u:o,i=t.viewportHeight,l=t.viewportWidth,s=t.hasSidebarInRedesign,m=t.hasFooter,p=m===void 0?!1:m;if(n==null||i===0||l===0)return null;var _={style:{maxHeight:0,maxWidth:0}},f=l-128-(s?c:0);if(n){var g=i>l&&p===!0?f:s?i-48:i-48-d;if(g>e&&r("justknobx")._("64")&&(g=e),p===!1)_=b(n,s,g,_);else{var h=n.height,y=(g-a)/h;_.style.maxHeight=g,s?n.height>=n.width?i>l?_=v(n,g,_,a):n.width*y>f?_=v(n,f,_,a):(_.style.maxHeight=g,_.style.aspectRatio=n.width*y+" / "+(n.height*y+a),_.style.maxWidth=n.width*y):(_.style.aspectRatio=n.width*y>n.height*y+a?"1":n.width*y+" / "+(n.height*y+a),_.style.maxWidth=i>l||n.width*y>n.height*y+a?g:n.width*y):_=v(n,g,_,a)}s&&(_.style.flexBasis=_.style.maxWidth)}return _}l.PREVIOUS_ARROW_TITLE=m,l.NEXT_ARROW_TITLE=p,l.LEFT_DELTA=_,l.RIGHT_DELTA=f,l.getModalPageIdFromAnalyticsContext=g,l.getCollectionIdFromPath=h,l.isPostUrl=y,l.getPostCodeFromPath=C,l.getMediaContainerProps=S}),226);
__d("PolarisPost.react",["cx","fbt","CometErrorBoundary.react","CometRouteURL","IGDSBox.react","PolarisContainerModuleUtils","PolarisHeroPageletLogger","PolarisHotKeys.react","PolarisIGCoreConstants","PolarisIGTheme.react","PolarisInsightsUtils","PolarisInteractionsLogger","PolarisMediaContainer.react","PolarisOrganicImpressionAction","PolarisPanavisionQEHelpers","PolarisPostActionLikePost","PolarisPostActionRemovePostFromCollection","PolarisPostActionSavePost","PolarisPostActionUnlikePost","PolarisPostActionUnsavePost","PolarisPostCoauthorReviewOverlayFooterCTA.react","PolarisPostConstants","PolarisPostDetailsSection.react","PolarisPostFeatures.react","PolarisPostHeader.react","PolarisPostHeaderFavoritedIconButton.react","PolarisPostInvitedCoauthorsOverlayFooterCTA.react","PolarisPostModalContext.react","PolarisPostModalRenderingContext.react","PolarisPostOptionsButtonPicker.react","PolarisPostOverlayInfoFooterCTA.react","PolarisPostPageRouteReferrerContext.react","PolarisPostSuggestedHeader.react","PolarisPostToast.react","PolarisPostToastProvider.react","PolarisPostUtils","PolarisPostVariants","PolarisReactRedux.react","PolarisSavedPostsActionEditCollection","PolarisSavedPostsTypes","PolarisSponsoredPostCTAFooter.react","PolarisTrackingNodeProvider.react","PolarisUA","PolarisUnsaveFromCollectionDialog.react","PolarisViewpointActionUtils","PolarisViewpointReact.react","PolarisVpvdImpressionAction","URI","hero-tracing","joinClasses","nullthrows","polarisAdsSelectors.react","polarisDeveloperSettings","polarisLogAction","polarisPostModalHelpers","polarisPostSelectors","polarisRelationshipSelectors.react","polarisUserSelectors","polarisWithPPRLogging","qex","react","react-compiler-runtime","useMergeRefs","usePolarisDisplayProperties","usePolarisIsOnFeedPage","usePolarisPostSetURLSidecarIndex","usePolarisShowFooterCTA","usePolarisViewer","usePrevious"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=c||(c=o("react")),m=c,p=m.useContext,_=m.useEffect,f=m.useRef,g=m.useState;function h(t){var n,a,i,l,s,c,m=t.adImpressionRefs,h=t.analyticsContext,y=t.autoplay,C=t.className,b=t.communityNoteComponent,v=b===void 0?null:b,S=t.enableTruncation,R=t.id,L=t.imageMediaActsAsCta,E=t.initialCarouselIndex,k=t.initialCommentsQuery,I=t.isSponsored,T=I===void 0?!1:I,D=t.isVisible,x=t.lightLetterbox,$=t.onMediaRendered,P=t.permalinkedCommentId,N=t.permalinkedReplyId,M=t.position,w=t.shortcode,A=t.shouldIncreaseCommentPreviews,F=t.testid,O=F===void 0?"post":F,B=t.variant,W=B===void 0?o("PolarisPostVariants").VARIANTS.flexible:B,q=t.viewpointActionsForSponsoredPost,U=t.visiblePosition,V=t.willScrollTo,H=o("PolarisReactRedux.react").useDispatch(),G=o("CometRouteURL").useRouteURL(),z=new(e||(e=r("URI")))(G).getPath(),j=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisPostSelectors").getPostById(e,R)}),K=r("nullthrows")(j.owner).id,Q=(n=j.group)==null?void 0:n.id,X=Q!=null?Q:K,Y=p(r("PolarisPostPageRouteReferrerContext.react")),J=Y.referrerTracePolicy,Z=j.invitedCoauthorProducers,ee=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisUserSelectors").getUserByIdOrThrows(e,K)}),te=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisUserSelectors").getUserByIdOrThrows(e,X)}),ne=o("PolarisReactRedux.react").useSelector(function(e){return o("polarisRelationshipSelectors.react").getRelationship(e.relationships,X)}),re=r("usePolarisViewer")(),oe=!!(re!=null&&re.canSeeOrganicInsights),ae=!!j.canSeeInsightsAsBrand,ie=o("polarisAdsSelectors.react").useFeedAdInfo(j==null?void 0:j.id,function(e){return e}),le=r("usePolarisDisplayProperties")(),se=le.viewportHeight,ue=le.viewportWidth,ce=o("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext(),de=ce.isInModal,me=(a=E!=null?E:o("PolarisPostUtils").getInitialSidecarIndexFromPost(j))!=null?a:0;j.isSidecar===!0&&(me<0||j.sidecarChildren!=null&&me>=j.sidecarChildren.length)&&(me=0);var pe=g(me),_e=pe[0],fe=pe[1],ge=g({}),he=ge[0],ye=ge[1],Ce=g(!1),be=Ce[0],ve=Ce[1],Se=g({}),Re=Se[0],Le=Se[1],Ee=g(!1),ke=Ee[0],Ie=Ee[1],Te=g(!1),De=Te[0],xe=Te[1],$e=g(null),Pe=$e[0],Ne=$e[1],Me=f(null),we=r("usePolarisPostSetURLSidecarIndex")();_(function(){V==="top"&&window.setTimeout(function(){window.scrollTo(0,0)})},[V]);var Ae=r("usePrevious")(j);_(function(){Ae!=null&&j.id!==Ae.id&&(ye({}),Le({}))},[j,Ae]),_(function(){w!=null&&j.isSidecar===!0&&we(_e+1)},[_e,j.isSidecar,we,w]);var Fe=function(t){ve(!0),$!=null&&$(j.id,t)},Oe=function(t){fe(t)},Be=function(t,n){var e,r={containerModule:o("PolarisContainerModuleUtils").getContainerModule(h),inventorySource:j.inventorySource,mediaAuthorId:(e=j.owner)==null?void 0:e.id,mediaId:j.id,rankingInfoToken:j.loggingInfoToken,source:h,sourceOfLike:n,trackingToken:j.trackingToken},a=null;(ie==null?void 0:ie.ad_id)!=null&&(ie==null?void 0:ie.tracking_token)!=null&&Et!=null&&(a={adId:ie==null?void 0:ie.ad_id,adTrackingToken:ie==null?void 0:ie.tracking_token,viewerId:Et}),t?j.likedByViewer!==!0&&H(o("PolarisPostActionLikePost").likePost(j.id,r,a)):H(o("PolarisPostActionUnlikePost").unlikePost(j.id,r,a))},We=function(){Be(!0,"double_tap_media")},qe=function(t){var e={source:h},n=null;if((ie==null?void 0:ie.ad_id)!=null&&(ie==null?void 0:ie.tracking_token)!=null&&Et!=null){var a;n={adId:ie==null?void 0:ie.ad_id,adTrackingToken:ie==null?void 0:ie.tracking_token,analyticsContext:h,followStatus:o("PolarisViewpointActionUtils").getFollowStatus(ne),mediaPk:o("PolarisViewpointActionUtils").getMPKForFeedMedia(j),mediaType:o("PolarisInteractionsLogger").getMediaTypeFromPost(j),ownerId:(a=j.owner)==null?void 0:a.id,viewerId:Et}}t?j.savedByViewer!==!0&&H(o("PolarisPostActionSavePost").savePost(j.id,e,n)):j.savedByViewer===!0&&(j.savedByViewerToCollection===!0?(r("polarisLogAction")("removeSavedItemFromCollectionDialogShown"),Ie(!0)):H(o("PolarisPostActionUnsavePost").unsavePost(j.id,e,n)))},Ue=function(){r("polarisLogAction")("removeSavedItemFromCollectionDialogCancelled"),Ie(!1)},Ve=function(){Ie(!1),H(o("PolarisPostActionUnsavePost").unsavePost(j.id,{source:h})),r("polarisLogAction")("removeSavedItemFromCollectionDialogAccepted")},He=function(){var e={source:h};Ie(!1);var t=o("polarisPostModalHelpers").getCollectionIdFromPath(z);t!=null&&re!=null&&(H(o("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:t,postId:j.id})),H(o("PolarisSavedPostsActionEditCollection").editCollection({collectionId:t,postIdsToRemove:[j.id],source:e.source,userId:r("nullthrows")(re==null?void 0:re.id)})))},Ge=function(t){je(t)&&Qe(t.id)},ze=function(t){Xe(t)},je=function(t){return he[t.id]===!0},Ke=function(t){return Re[t]===!0},Qe=function(t){var e=babelHelpers.extends({},he);e[t]=!0,ye(e)},Xe=function(t){var e=babelHelpers.extends({},Re);e[t]=!0,Le(e)},Ye=function(t){xe(!0),Ne(t)},Je=function(){xe(!1)},Ze=o("PolarisPostFeatures.react").usePolarisPostFeatures({owner:te,path:z,post:j,variant:W}),et=Ze.commentsAreStacked,tt=Ze.hasPhotosOfYouOption,nt=Ze.hasThreadedSidebarComments,rt=Ze.isFavorited,ot=Ze.isSidecar,at=Ze.isStackedScreenSize,it=Ze.showFollowButton,lt=o("polarisPostModalHelpers").getCollectionIdFromPath(z),st=lt!=null&&lt!==o("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION,ut=!!it&&(!j.coauthorProducers||j.coauthorProducers.length===0)&&!T,ct=ue>=o("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,dt=ct&&de===!0,mt=!ct&&de===!0,pt=de===!0?ct:!et,_t=r("usePolarisIsOnFeedPage")(),ft=h==="adsActivityFeed",gt=r("qex")._("34")===!0,ht=(_t||ft)&&de!==!0&&o("PolarisUA").isDesktop(),yt=(_t||ft)&&de!==!0&&o("PolarisUA").isDesktop(),Ct=o("PolarisPostUtils").getCurrentSidecarItemFromPost(j,_e),bt=o("PolarisIGTheme.react").useTheme().getTheme()===o("PolarisIGTheme.react").IGTheme.Dark,vt=d.jsxs("div",{className:"_aasi"+(ht?" _aasj":"")+(mt?" _aask":"")+(yt?" _ai9a":"")+(bt?" _at8n":""),children:[j.inventorySource==="mixed_unconnected"&&_t&&!de&&!gt&&d.jsx(r("PolarisPostSuggestedHeader.react"),{postId:j.id,rankingInfoToken:j.loggingInfoToken,title:(i=j.explore)==null?void 0:i.title}),d.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",position:"relative",children:[d.jsx(r("PolarisPostHeader.react"),{adTitle:ie==null?void 0:ie.ad_title,analyticsContext:h,clipsAttributionInfo:j.clipsAttributionInfo,clipsAudioAttributionInfo:j.clipsMusicAttributionInfo,coauthorProducers:j.coauthorProducers,displayFBPageName:ie==null?void 0:ie.display_fb_page_name,followHashtagInfo:j.followHashtagInfo,headerAvatarSize:r("PolarisIGCoreConstants").AVATAR_SIZES.small,inModal:de,isAffiliate:j.isAffiliate===!0,isPaidPartnership:j.isPaidPartnership===!0,isSharedFromEdits:j.isSharedFromBasel===!0,isSharedToCloseFriends:j.audience==="MediaAudience.BESTIES",isSponsored:j.isSponsored===!0,location:j.location,mediaAttributionsData:j.mediaAttributionData,mediaId:j.id,mediaProductType:j.productType,onDisabledClipsAudioAttributionClick:Ye,owner:te,postedAt:j.postedAt,shouldEllipsisText:!0,shouldShowFollowButton:ut,showVerifiedBadge:!0,sidebarVariantOptionsButton:nt,sponsoredLabel:ie==null?void 0:ie.label,sponsors:j.sponsors,suggestionText:j.inventorySource==="mixed_unconnected"&&_t&&!de&&gt?(l=(s=j.explore)==null?void 0:s.title)!=null?l:u._(/*BTDS*/"Sugest\u00f5es para voc\u00ea"):null,transparencyLabelOwner:j.owner,wearablesAttributionInfo:j.wearableAttributionInfo},j.id),d.jsx(r("PolarisPostHeaderFavoritedIconButton.react"),{isFavorited:rt}),d.jsx(r("PolarisPostOptionsButtonPicker.react"),{buttonClassName:"_aasm"+(ht||o("PolarisPanavisionQEHelpers").hasDenserMobileWebFeed()?" _aasn":"")+(yt?" _agh1":""),mediaPK:j.id})]})]}),St=o("PolarisInsightsUtils").getViewInsightsInfo(re,K,j,ae,oe),Rt=St.bloksAppId,Lt=St.hasViewInsights,Et=re==null?void 0:re.id,kt=T&&q!=null?q:[o("PolarisOrganicImpressionAction").makePostImpressionAction(j,h,J,M),o("PolarisVpvdImpressionAction").makePostVpvdImpressionAction(j,h)],It=o("PolarisViewpointReact.react").useViewpoint({action:kt,id:"viewpoint"+j.id}),Tt=[It].concat(m!=null?m:[]),Dt=r("useMergeRefs").apply(void 0,Tt),xt=re?{l:function(){Be(!j.likedByViewer,"button")},s:function(){qe(!j.savedByViewer)}}:{},$t=r("usePolarisShowFooterCTA")(j,_e,he,T),Pt=null;T?Pt=d.jsx(r("PolarisSponsoredPostCTAFooter.react"),{isMediaRendered:be,post:j,sidecarIndex:_e}):$t||!de?Pt=d.jsx(o("PolarisPostOverlayInfoFooterCTA.react").PolarisPostOverlayInfoFooterCTA,{analyticsContext:h,currentSidecarIndex:_e,dynamicFooterRef:Me,idsWithClearedBlurOverlays:he,idsWithDisabledMediaOverlayInfoImpressionLogging:Re,onLogOverlayImpression:function(t){return ze(t)},rootPost:j}):Z!=null&&Z.length>0&&(Pt=d.jsxs("div",{children:[d.jsx(r("PolarisPostCoauthorReviewOverlayFooterCTA.react"),{invitedCoauthorProducers:Z,mediaId:j.id,mediaShortcode:j.code,productType:j.productType,user:j.owner}),d.jsx(r("PolarisPostInvitedCoauthorsOverlayFooterCTA.react"),{invitedCoauthorProducers:Z,mediaId:j.id,user:j.owner})]}));var Nt=Pt!=null,Mt=o("polarisPostModalHelpers").getMediaContainerProps({dimensions:j.dimensions,footerHeight:Nt?(c=Me.current)==null?void 0:c.offsetHeight:void 0,hasFooter:Nt,hasSidebarInRedesign:ct,viewportHeight:se,viewportWidth:ue}),wt=!1,At={border:j.isSeen===!0?"2px solid green":"2px solid red"};return d.jsx(o("PolarisPostToastProvider.react").PostToastProvider,{children:function(t){return d.jsx(o("PolarisPostModalContext.react").PostModalContext,{post:j,children:d.jsx(o("hero-tracing").HeroPagelet,{name:o("PolarisHeroPageletLogger").getHeroPageletLogName(o("PolarisHeroPageletLogger").PageletLogName.POST,M),ref:Dt,children:function(n,a){return d.jsx(r("PolarisHotKeys.react"),{keyMap:xt,children:function(i,l,s){return d.jsx(r("PolarisTrackingNodeProvider.react"),{ref:n,trackingNode:301,children:function(n){return d.jsxs("article",{className:r("joinClasses")(C,"_aatb"+(W===o("PolarisPostVariants").VARIANTS.feed?" _aatc":"")+(at?" _aatd":"")+(at?"":" _aate")+(et?" _aatf":"")+(pt?" _aatg":"")+(ot?" _aath":"")+(nt?" _aati":"")+(Lt?" _aatj":"")),"data-testid":void 0,onKeyUp:i,ref:n,role:l,style:wt?At:{},tabIndex:s,children:[d.jsxs(r("IGDSBox.react"),{alignSelf:mt?"center":void 0,direction:(de===!0?ct:!et)?"row":"column",display:"flex",justifyContent:"center",maxHeight:"inherit",maxWidth:mt&&(Mt==null?void 0:Mt.style)!=null?Mt.style.maxWidth:"inherit",position:"relative",children:[(de===!0?!ct:et)?vt:null,d.jsx("div",babelHelpers.extends({},de===!0?Mt:{},{className:"_aatk"+(de===!0?" _aatl":"")+(dt&&j.dimensions!=null&&j.dimensions.width>=j.dimensions.height?" _aatm":"")+(x===!0?" _aatn":"")+(yt?" _aiao":""),children:d.jsx(r("PolarisMediaContainer.react"),{accessibilityCaption:j.accessibilityCaption,adInfo:ie,analyticsContext:h,autoplay:y,checkIsSensitivityOverlayDisabledCallback:function(t){return je(t)},className:"_aato",commentsAreStacked:et,hasPhotosOfYouOption:tt,hasViewInsights:Lt,id:j.id,initialCarouselIndex:me,inModal:de,isVisible:D,mediaFooter:Pt,onLike:re?We:null,onPostMediaRendered:Fe,onPostSidecarChildIndexChange:Oe,onSensitivityOverlayCleared:Ge,onToastClose:Je,position:M,post:j,relationship:ne,sensitivityOverlayMediaOverlayInfoLoggingProps:{checkIfMediaOverlayInfoImpressionLoggingDisabled:function(t){return Ke(t)},onLoggedMediaOverlayInfoImpression:function(t){return ze(t)}},showToast:De,toastString:Pe,viewer:re,visiblePosition:U})})),d.jsx(r("PolarisPostDetailsSection.react"),{analyticsContext:h,bloksAppId:Rt,communityNoteComponent:v,currSidecarIndex:_e,currSidecarItem:Ct,enableTruncation:S,handleLikeChange:Be,handleSaveChange:qe,hasDenserFeedRedesign:ht,hasSidebarInRedesign:ct,hasViewInsights:Lt,initialCommentsQuery:k,owner:te,permalinkedCommentId:P,permalinkedReplyId:N,post:j,postAuthorId:K,postAuthorUsername:ee==null?void 0:ee.username,postFeedbackControlsRef:t,postHeader:vt,redesignWithoutSidebar:mt,redesignWithSidebar:dt,shouldIncreaseCommentPreviews:A,showDetailsAsSidebar:pt,variant:W,viewer:re}),ke&&d.jsx(r("PolarisUnsaveFromCollectionDialog.react"),{onClose:Ue,onUnsaveFromAll:Ve,onUnsaveFromCollection:st&&o("PolarisUA").isDesktop()?He:null}),d.jsx(r("PolarisPostToast.react"),{isFeedVariant:W===o("PolarisPostVariants").VARIANTS.feed,isModal:de!=null?de:!1})]}),d.jsx(a,{})]})}})}})}})},j.id)}})}h.displayName=h.name+" [from "+i.id+"]";var y=r("polarisWithPPRLogging")(h);function C(){r("polarisLogAction")("feedUnitFailure",{source:"PolarisPost"})}function b(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=d.jsx(r("CometErrorBoundary.react"),{fallback:v,onError:C,children:d.jsx(y,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}function v(e){return null}l.default=b}),226);